# File Decisions Log

**Generated**: 2026-01-06
**Total Files Analyzed**: 64,790 tracked files
**Files to Delete**: 64,323 (99%+ are node_modules that were accidentally committed)

---

## CRITICAL ISSUE: node_modules Tracked in Git

**64,317 files** from `frontend/node_modules/` are tracked in git. This is a serious issue:
- Bloats repository size massively
- Causes conflicts and slow clones
- Should be installed via `bun install`, not committed

**Action**: Remove entire `frontend/node_modules/` from git tracking

---

## Summary of Decisions

| Category | Keep | Delete | Reason |
|----------|------|--------|--------|
| frontend/node_modules/* | 0 | 64,317 | Should never be committed; regenerated by bun install |
| frontend/public/assets/providers/*.svg | 0 | 6 | Duplicate of src/assets/providers/*.svg |
| Root documentation (.cursorrules) | 0 | 1 | Duplicate of Claude.md (outdated subset) |
| Root documentation (README.md) | 0 | 1 | Duplicate of .cursorrules (nearly identical) |
| All other files | 465 | 0 | Essential application code |

**Total to Delete**: 64,325 files

---

## Detailed Decisions by Category

### 1. CRITICAL: node_modules (DELETE ALL - 64,317 files)

| Path Pattern | Purpose | Decision | Reason | Replacement |
|--------------|---------|----------|--------|-------------|
| frontend/node_modules/**/* | NPM dependencies | DELETE | Accidentally committed; regenerated by package manager | Run `bun install` |

### 2. Duplicate Provider SVGs (DELETE - 6 files)

| Path | Purpose | Decision | Reason | Replacement |
|------|---------|----------|--------|-------------|
| frontend/public/assets/providers/churnvision.svg | AI provider icon | DELETE | Exact duplicate (same MD5 hash) | frontend/src/assets/providers/churnvision.svg |
| frontend/public/assets/providers/ibm.svg | AI provider icon | DELETE | Exact duplicate (same MD5 hash) | frontend/src/assets/providers/ibm.svg |
| frontend/public/assets/providers/microsoft.svg | AI provider icon | DELETE | Exact duplicate (same MD5 hash) | frontend/src/assets/providers/microsoft.svg |
| frontend/public/assets/providers/mistral.svg | AI provider icon | DELETE | Exact duplicate (same MD5 hash) | frontend/src/assets/providers/mistral.svg |
| frontend/public/assets/providers/openai.svg | AI provider icon | DELETE | Exact duplicate (same MD5 hash) | frontend/src/assets/providers/openai.svg |
| frontend/public/assets/providers/qwen.svg | AI provider icon | DELETE | Exact duplicate (same MD5 hash) | frontend/src/assets/providers/qwen.svg |

**Evidence**: Code in `frontend/src/pages/Settings.tsx:52-57` imports from `@/assets/providers/`, not `public/assets/providers/`.

### 3. Duplicate Root Documentation (DELETE - 2 files)

| Path | Purpose | Decision | Reason | Replacement |
|------|---------|----------|--------|-------------|
| .cursorrules | Cursor AI guidelines | DELETE | Subset of Claude.md (251 vs 1006 lines), outdated | Claude.md |
| README.md | Project guidelines | DELETE | Nearly identical to .cursorrules, outdated port numbers | Claude.md |

**Evidence**:
- Claude.md is 1006 lines, comprehensive, and actively maintained
- README.md and .cursorrules are ~250 lines each with same content
- Claude.md includes updated port numbers (8001, 3002) while others show old ports (8000, 3000)

---

## Files to KEEP (465 files)

### Root Level (KEEP - 6 files)

| Path | Purpose | Decision | Reason |
|------|---------|----------|--------|
| Claude.md | Authoritative project guidelines | KEEP | Most comprehensive, actively maintained |
| Dockerfile | Root Docker build | KEEP | Required for CI/CD |
| Makefile | Build automation | KEEP | Required for development workflow |
| docker-compose.yml | Development stack | KEEP | Required for local development |
| docker-compose.prod.yml | Production stack | KEEP | Required for production deployment |
| generate_license.py | Dev license generator | KEEP | Convenience script that calls backend module |

### .github/ (KEEP - 2 files)

| Path | Purpose | Decision | Reason |
|------|---------|----------|--------|
| .github/workflows/ci.yml | CI pipeline | KEEP | Required for automated testing |
| .github/workflows/docker-publish.yml | Docker publishing | KEEP | Required for releases |

### backend/ (KEEP - 185 files)

All backend files are essential:
- `backend/app/` - Core application code
- `backend/alembic/` - Database migrations
- `backend/tests/` - Test suite
- `backend/data/sample_datasets/` - Test data
- `backend/models/*.pkl` - Trained ML models
- `backend/scripts/` - Utility scripts

### db/ (KEEP - 6 files)

| Path | Purpose | Decision | Reason |
|------|---------|----------|--------|
| db/init.sql | Database initialization | KEEP | Required for setup |
| db/postgresql.conf | PostgreSQL config | KEEP | Required for tuning |
| db/backup.sh | Backup script | KEEP | Required for operations |
| db/restore.sh | Restore script | KEEP | Required for DR |
| db/healthcheck.sh | Health check | KEEP | Required for Docker |
| db/pgadmin-servers.json | pgAdmin config | KEEP | Optional but useful |

### docs/ (KEEP - 12 files)

All documentation files are essential for enterprise deployment:
- INSTALL.md, UPGRADE.md - Deployment guides
- ADMIN.md, SSO_SETUP.md - Admin guides
- API.md, USER_GUIDE.md - User docs
- SECURITY.md, DISASTER_RECOVERY.md - Compliance docs
- TROUBLESHOOTING.md, PRODUCTION_SETUP.md - Operations docs

### frontend/src/ (KEEP - 147 files)

All source files are essential:
- Components, pages, hooks, services, contexts, types
- Test files (*.test.tsx, *.test.ts)
- Configuration files

### frontend/public/ (KEEP - 9 files after removing duplicates)

| Path | Purpose | Decision | Reason |
|------|---------|----------|--------|
| frontend/public/assets/icons/* | App icons | KEEP | Required for PWA |
| frontend/public/assets/images/* | Static images | KEEP | Required for UI |
| frontend/public/manifest.json | PWA manifest | KEEP | Required for PWA |
| frontend/public/offline.html | Offline page | KEEP | Required for PWA |
| frontend/public/service-worker.js | Service worker | KEEP | Required for PWA |
| frontend/public/version.txt | Version info | KEEP | Required for versioning |

### frontend/ config files (KEEP - 12 files)

Essential build/config files:
- package.json, tsconfig.json, vite.config.ts
- playwright.config.ts, vitest.config.ts
- eslint.config.js, postcss.config.js, tailwind.config.js
- Dockerfile, components.json, index.html

### frontend/e2e/ (KEEP - 7 files)

All Playwright E2E test files are essential for quality assurance.

### infra/ (KEEP - 12 files)

All infrastructure files are essential:
- Dockerfiles for build/migrate
- nginx configs
- Prometheus/Grafana/Alertmanager configs
- Airgap bundle script

---

## References Updated

After deletions, no import updates are required because:
1. node_modules is installed at runtime, not imported directly
2. Provider SVGs: Code already uses `@/assets/providers/` (the KEPT location)
3. Documentation: Claude.md is already the primary reference

---

## Verification Checklist

- [ ] All 64,317 node_modules files removed from git tracking
- [ ] All 6 duplicate provider SVGs removed
- [ ] .cursorrules removed (Claude.md is authoritative)
- [ ] README.md removed (Claude.md is authoritative)
- [ ] Tests pass after cleanup
- [ ] Application runs correctly

