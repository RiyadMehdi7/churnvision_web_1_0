import{j as t,m as W,F as as,ae as Jr,a8 as Ct,aa as pe,aj as ls,af as os,q as Le,a1 as ae,n as te,N as ke,o as Ve,s as Be,x as cs,ab as Lt,U as nt,C as An,ak as St,al as _t,ai as xn,a6 as gt,p as ds,am as us,B as jt,A as Kn,an as ms,ao as hs,X as gs}from"./ui-DzcvAssw.js";import{g as Zr,a as F,u as xs}from"./vendor-CfX-nNg5.js";import{a as Gn,z as ot,H as ps,A as fs,J as bs,B as ys,E as ks}from"./index-BjfinGfq.js";import{R as En,A as vs,F as js}from"./WindowScroller-D1vhakJR.js";import{M as ws,T as Ns}from"./TrainingReminderBanner-BvYnbVKY.js";import"./defineProperty-CzrzvwXk.js";import"./slicedToArray-w3y9pYby.js";const oe=[];for(let e=0;e<256;++e)oe.push((e+256).toString(16).slice(1));function Cs(e,n=0){return(oe[e[n+0]]+oe[e[n+1]]+oe[e[n+2]]+oe[e[n+3]]+"-"+oe[e[n+4]]+oe[e[n+5]]+"-"+oe[e[n+6]]+oe[e[n+7]]+"-"+oe[e[n+8]]+oe[e[n+9]]+"-"+oe[e[n+10]]+oe[e[n+11]]+oe[e[n+12]]+oe[e[n+13]]+oe[e[n+14]]+oe[e[n+15]]).toLowerCase()}let Yt;const Ss=new Uint8Array(16);function As(){if(!Yt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yt=crypto.getRandomValues.bind(crypto)}return Yt(Ss)}const Es=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yn={randomUUID:Es};function Rs(e,n,r){e=e||{};const i=e.random??e.rng?.()??As();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Cs(i)}function $e(e,n,r){return Yn.randomUUID&&!e?Yn.randomUUID():Rs(e)}class rt{static instance;static getInstance(){return rt.instance||(rt.instance=new rt),rt.instance}sessionId;context={};turnCount=0;messageCache=new Map;analytics={averageResponseTime:0,totalInteractions:0,successfulInteractions:0,failedInteractions:0};offlineQueue=[];constructor(){this.sessionId=this.loadOrCreateSessionId(),this.loadPersistedData(),this.setupOfflineSupport(),this.setupPeriodicCleanup()}setupPeriodicCleanup(){setInterval(()=>{const n=Date.now()-36e5;this.messageCache.forEach((r,i)=>{const s=r.filter(a=>a.timestamp.getTime()>n);s.length!==r.length&&(this.messageCache.set(i,s),this.persistData())})},3600*1e3)}loadOrCreateSessionId(){let n=localStorage.getItem("chatbot_session_id");return n||(n=`anon-session-${$e()}`,this.persistSession(n)),n}persistSession(n){localStorage.setItem("chatbot_session_id",n)}loadPersistedData(){try{const n=localStorage.getItem(`chatbot_cache_${this.sessionId}`);if(n){const i=JSON.parse(n).map(([s,a])=>[s,a.map(l=>({...l,timestamp:new Date(l.timestamp)}))]);this.messageCache=new Map(i)}const r=localStorage.getItem(`chatbot_context_${this.sessionId}`);r&&(this.context=JSON.parse(r))}catch{}}setupOfflineSupport(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this))}async handleOnline(){for(;this.offlineQueue.length>0;){const n=this.offlineQueue.shift();if(n)try{await this.sendMessage({content:n.message,sessionId:this.sessionId})}catch{this.offlineQueue.unshift(n);break}}}handleOffline(){}persistData(){try{const n=Array.from(this.messageCache.entries()).map(([r,i])=>[r,i.map(s=>({...s,timestamp:s.timestamp.toISOString()}))]);localStorage.setItem(`chatbot_cache_${this.sessionId}`,JSON.stringify(n)),localStorage.setItem(`chatbot_context_${this.sessionId}`,JSON.stringify(this.context)),this.persistSession(this.sessionId)}catch{}}async sendMessage(n){if(!navigator.onLine)return this.offlineQueue.push({message:n.content}),{response:{message:"[Message queued - will send when online]",responseTime:0},botMessageId:`queued-${$e()}`,success:!1,userMessageId:`queued-user-${$e()}`};try{const r=await Gn.post("/chatbot/chat",{message:n.content,conversation_id:n.sessionId==="new"?void 0:n.sessionId});if(!r||!r.data)throw new Error("Received invalid response structure from chatbot service.");return{response:{message:r.data.response,responseTime:100},botMessageId:r.data.id||$e(),success:!0,userMessageId:$e()}}catch(r){throw console.error("Chatbot API Error:",r),new Error(r.message||"Failed to send message via chat service.")}}async getChatHistory(n){if(!n)return[];try{const i=(await Gn.get(`/chatbot/conversations/${n}`)).data;return i&&Array.isArray(i.messages)?i.messages.map(s=>({id:s.id,text:s.content,sender:s.role==="user"?"user":"bot",timestamp:new Date(s.created_at)})):[]}catch(r){return console.error("Chat History API Error:",r),[]}}getAnalytics(){return{...this.analytics}}getCachedMessages(n){return this.messageCache.get(n)||[]}clearCache(){this.messageCache.clear(),localStorage.removeItem(`chatbot_cache_${this.sessionId}`)}clearContext(){this.context={turnCount:this.turnCount},this.persistData()}}const Qn=rt.getInstance();function Is(e,n){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const Ts=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ps=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zs={};function Xn(e,n){return(zs.jsx?Ps:Ts).test(e)}const Ds=/[ \t\n\f\r]/g;function Ls(e){return typeof e=="object"?e.type==="text"?Jn(e.value):!1:Jn(e)}function Jn(e){return e.replace(Ds,"")===""}class At{constructor(n,r,i){this.normal=r,this.property=n,i&&(this.space=i)}}At.prototype.normal={};At.prototype.property={};At.prototype.space=void 0;function ei(e,n){const r={},i={};for(const s of e)Object.assign(r,s.property),Object.assign(i,s.normal);return new At(r,i,n)}function pn(e){return e.toLowerCase()}class ve{constructor(n,r){this.attribute=r,this.property=n}}ve.prototype.attribute="";ve.prototype.booleanish=!1;ve.prototype.boolean=!1;ve.prototype.commaOrSpaceSeparated=!1;ve.prototype.commaSeparated=!1;ve.prototype.defined=!1;ve.prototype.mustUseProperty=!1;ve.prototype.number=!1;ve.prototype.overloadedBoolean=!1;ve.prototype.property="";ve.prototype.spaceSeparated=!1;ve.prototype.space=void 0;let Fs=0;const q=Ye(),se=Ye(),fn=Ye(),S=Ye(),J=Ye(),it=Ye(),Ce=Ye();function Ye(){return 2**++Fs}const bn=Object.freeze(Object.defineProperty({__proto__:null,boolean:q,booleanish:se,commaOrSpaceSeparated:Ce,commaSeparated:it,number:S,overloadedBoolean:fn,spaceSeparated:J},Symbol.toStringTag,{value:"Module"})),Qt=Object.keys(bn);class Rn extends ve{constructor(n,r,i,s){let a=-1;if(super(n,r),Zn(this,"space",s),typeof i=="number")for(;++a<Qt.length;){const l=Qt[a];Zn(this,Qt[a],(i&bn[l])===bn[l])}}}Rn.prototype.defined=!0;function Zn(e,n,r){r&&(e[n]=r)}function ct(e){const n={},r={};for(const[i,s]of Object.entries(e.properties)){const a=new Rn(i,e.transform(e.attributes||{},i),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(a.mustUseProperty=!0),n[i]=a,r[pn(i)]=i,r[pn(a.attribute)]=i}return new At(n,r,e.space)}const ti=ct({properties:{ariaActiveDescendant:null,ariaAtomic:se,ariaAutoComplete:null,ariaBusy:se,ariaChecked:se,ariaColCount:S,ariaColIndex:S,ariaColSpan:S,ariaControls:J,ariaCurrent:null,ariaDescribedBy:J,ariaDetails:null,ariaDisabled:se,ariaDropEffect:J,ariaErrorMessage:null,ariaExpanded:se,ariaFlowTo:J,ariaGrabbed:se,ariaHasPopup:null,ariaHidden:se,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:J,ariaLevel:S,ariaLive:null,ariaModal:se,ariaMultiLine:se,ariaMultiSelectable:se,ariaOrientation:null,ariaOwns:J,ariaPlaceholder:null,ariaPosInSet:S,ariaPressed:se,ariaReadOnly:se,ariaRelevant:null,ariaRequired:se,ariaRoleDescription:J,ariaRowCount:S,ariaRowIndex:S,ariaRowSpan:S,ariaSelected:se,ariaSetSize:S,ariaSort:null,ariaValueMax:S,ariaValueMin:S,ariaValueNow:S,ariaValueText:null,role:null},transform(e,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function ni(e,n){return n in e?e[n]:n}function ri(e,n){return ni(e,n.toLowerCase())}const _s=ct({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:it,acceptCharset:J,accessKey:J,action:null,allow:null,allowFullScreen:q,allowPaymentRequest:q,allowUserMedia:q,alt:null,as:null,async:q,autoCapitalize:null,autoComplete:J,autoFocus:q,autoPlay:q,blocking:J,capture:null,charSet:null,checked:q,cite:null,className:J,cols:S,colSpan:null,content:null,contentEditable:se,controls:q,controlsList:J,coords:S|it,crossOrigin:null,data:null,dateTime:null,decoding:null,default:q,defer:q,dir:null,dirName:null,disabled:q,download:fn,draggable:se,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:q,formTarget:null,headers:J,height:S,hidden:fn,high:S,href:null,hrefLang:null,htmlFor:J,httpEquiv:J,id:null,imageSizes:null,imageSrcSet:null,inert:q,inputMode:null,integrity:null,is:null,isMap:q,itemId:null,itemProp:J,itemRef:J,itemScope:q,itemType:J,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:q,low:S,manifest:null,max:null,maxLength:S,media:null,method:null,min:null,minLength:S,multiple:q,muted:q,name:null,nonce:null,noModule:q,noValidate:q,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:q,optimum:S,pattern:null,ping:J,placeholder:null,playsInline:q,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:q,referrerPolicy:null,rel:J,required:q,reversed:q,rows:S,rowSpan:S,sandbox:J,scope:null,scoped:q,seamless:q,selected:q,shadowRootClonable:q,shadowRootDelegatesFocus:q,shadowRootMode:null,shape:null,size:S,sizes:null,slot:null,span:S,spellCheck:se,src:null,srcDoc:null,srcLang:null,srcSet:null,start:S,step:null,style:null,tabIndex:S,target:null,title:null,translate:null,type:null,typeMustMatch:q,useMap:null,value:se,width:S,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:J,axis:null,background:null,bgColor:null,border:S,borderColor:null,bottomMargin:S,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:q,declare:q,event:null,face:null,frame:null,frameBorder:null,hSpace:S,leftMargin:S,link:null,longDesc:null,lowSrc:null,marginHeight:S,marginWidth:S,noResize:q,noHref:q,noShade:q,noWrap:q,object:null,profile:null,prompt:null,rev:null,rightMargin:S,rules:null,scheme:null,scrolling:se,standby:null,summary:null,text:null,topMargin:S,valueType:null,version:null,vAlign:null,vLink:null,vSpace:S,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:q,disableRemotePlayback:q,prefix:null,property:null,results:S,security:null,unselectable:null},space:"html",transform:ri}),Ms=ct({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ce,accentHeight:S,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:S,amplitude:S,arabicForm:null,ascent:S,attributeName:null,attributeType:null,azimuth:S,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:S,by:null,calcMode:null,capHeight:S,className:J,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:S,diffuseConstant:S,direction:null,display:null,dur:null,divisor:S,dominantBaseline:null,download:q,dx:null,dy:null,edgeMode:null,editable:null,elevation:S,enableBackground:null,end:null,event:null,exponent:S,externalResourcesRequired:null,fill:null,fillOpacity:S,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:it,g2:it,glyphName:it,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:S,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:S,horizOriginX:S,horizOriginY:S,id:null,ideographic:S,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:S,k:S,k1:S,k2:S,k3:S,k4:S,kernelMatrix:Ce,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:S,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:S,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:S,overlineThickness:S,paintOrder:null,panose1:null,path:null,pathLength:S,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:J,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:S,pointsAtY:S,pointsAtZ:S,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ce,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ce,rev:Ce,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ce,requiredFeatures:Ce,requiredFonts:Ce,requiredFormats:Ce,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:S,specularExponent:S,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:S,strikethroughThickness:S,string:null,stroke:null,strokeDashArray:Ce,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:S,strokeOpacity:S,strokeWidth:null,style:null,surfaceScale:S,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ce,tabIndex:S,tableValues:null,target:null,targetX:S,targetY:S,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ce,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:S,underlineThickness:S,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:S,values:null,vAlphabetic:S,vMathematical:S,vectorEffect:null,vHanging:S,vIdeographic:S,version:null,vertAdvY:S,vertOriginX:S,vertOriginY:S,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:S,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ni}),ii=ct({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,n){return"xlink:"+n.slice(5).toLowerCase()}}),si=ct({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ri}),ai=ct({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,n){return"xml:"+n.slice(3).toLowerCase()}}),Os={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},$s=/[A-Z]/g,er=/-[a-z]/g,Bs=/^data[-\w.:]+$/i;function Hs(e,n){const r=pn(n);let i=n,s=ve;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&Bs.test(n)){if(n.charAt(4)==="-"){const a=n.slice(5).replace(er,qs);i="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=n.slice(4);if(!er.test(a)){let l=a.replace($s,Us);l.charAt(0)!=="-"&&(l="-"+l),n="data"+l}}s=Rn}return new s(i,n)}function Us(e){return"-"+e.toLowerCase()}function qs(e){return e.charAt(1).toUpperCase()}const Vs=ei([ti,_s,ii,si,ai],"html"),In=ei([ti,Ms,ii,si,ai],"svg");function Ws(e){return e.join(" ").trim()}var Ze={},Xt,tr;function Ks(){if(tr)return Xt;tr=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,o=/^\s+|\s+$/g,c=`
`,d="/",m="*",u="",g="comment",h="declaration";Xt=function(b,N){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];N=N||{};var v=1,A=1;function E(z){var I=z.match(n);I&&(v+=I.length);var _=z.lastIndexOf(c);A=~_?z.length-_:A+z.length}function O(){var z={line:v,column:A};return function(I){return I.position=new $(z),U(),I}}function $(z){this.start=z,this.end={line:v,column:A},this.source=N.source}$.prototype.content=b;function w(z){var I=new Error(N.source+":"+v+":"+A+": "+z);if(I.reason=z,I.filename=N.source,I.line=v,I.column=A,I.source=b,!N.silent)throw I}function H(z){var I=z.exec(b);if(I){var _=I[0];return E(_),b=b.slice(_.length),I}}function U(){H(r)}function G(z){var I;for(z=z||[];I=j();)I!==!1&&z.push(I);return z}function j(){var z=O();if(!(d!=b.charAt(0)||m!=b.charAt(1))){for(var I=2;u!=b.charAt(I)&&(m!=b.charAt(I)||d!=b.charAt(I+1));)++I;if(I+=2,u===b.charAt(I-1))return w("End of comment missing");var _=b.slice(2,I-2);return A+=2,E(_),b=b.slice(I),A+=2,z({type:g,comment:_})}}function T(){var z=O(),I=H(i);if(I){if(j(),!H(s))return w("property missing ':'");var _=H(a),ee=z({type:h,property:x(I[0].replace(e,u)),value:_?x(_[0].replace(e,u)):u});return H(l),ee}}function P(){var z=[];G(z);for(var I;I=T();)I!==!1&&(z.push(I),G(z));return z}return U(),P()};function x(b){return b?b.replace(o,u):u}return Xt}var nr;function Gs(){if(nr)return Ze;nr=1;var e=Ze&&Ze.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.default=r;var n=e(Ks());function r(i,s){var a=null;if(!i||typeof i!="string")return a;var l=(0,n.default)(i),o=typeof s=="function";return l.forEach(function(c){if(c.type==="declaration"){var d=c.property,m=c.value;o?s(d,m,c):m&&(a=a||{},a[d]=m)}}),a}return Ze}var xt={},rr;function Ys(){if(rr)return xt;rr=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,r=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||r.test(d)||e.test(d)},l=function(d,m){return m.toUpperCase()},o=function(d,m){return"".concat(m,"-")},c=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,o):d=d.replace(i,o),d.replace(n,l))};return xt.camelCase=c,xt}var pt,ir;function Qs(){if(ir)return pt;ir=1;var e=pt&&pt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},n=e(Gs()),r=Ys();function i(s,a){var l={};return!s||typeof s!="string"||(0,n.default)(s,function(o,c){o&&c&&(l[(0,r.camelCase)(o,a)]=c)}),l}return i.default=i,pt=i,pt}var Xs=Qs();const Js=Zr(Xs),li=oi("end"),Tn=oi("start");function oi(e){return n;function n(r){const i=r&&r.position&&r.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Zs(e){const n=Tn(e),r=li(e);if(n&&r)return{start:n,end:r}}function yt(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?sr(e.position):"start"in e||"end"in e?sr(e):"line"in e||"column"in e?yn(e):""}function yn(e){return ar(e&&e.line)+":"+ar(e&&e.column)}function sr(e){return yn(e&&e.start)+"-"+yn(e&&e.end)}function ar(e){return e&&typeof e=="number"?e:1}class ue extends Error{constructor(n,r,i){super(),typeof r=="string"&&(i=r,r=void 0);let s="",a={},l=!1;if(r&&("line"in r&&"column"in r?a={place:r}:"start"in r&&"end"in r?a={place:r}:"type"in r?a={ancestors:[r],place:r.position}:a={...r}),typeof n=="string"?s=n:!a.cause&&n&&(l=!0,s=n.message,a.cause=n),!a.ruleId&&!a.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?a.ruleId=i:(a.source=i.slice(0,c),a.ruleId=i.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=o?o.line:void 0,this.name=yt(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}ue.prototype.file="";ue.prototype.name="";ue.prototype.reason="";ue.prototype.message="";ue.prototype.stack="";ue.prototype.column=void 0;ue.prototype.line=void 0;ue.prototype.ancestors=void 0;ue.prototype.cause=void 0;ue.prototype.fatal=void 0;ue.prototype.place=void 0;ue.prototype.ruleId=void 0;ue.prototype.source=void 0;const Pn={}.hasOwnProperty,ea=new Map,ta=/[A-Z]/g,na=new Set(["table","tbody","thead","tfoot","tr"]),ra=new Set(["td","th"]),ci="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ia(e,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=n.filePath||void 0;let i;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=ma(r,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=ua(r,n.jsx,n.jsxs)}const s={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:i,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?In:Vs,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},a=di(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function di(e,n,r){if(n.type==="element")return sa(e,n,r);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return aa(e,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return oa(e,n,r);if(n.type==="mdxjsEsm")return la(e,n);if(n.type==="root")return ca(e,n,r);if(n.type==="text")return da(e,n)}function sa(e,n,r){const i=e.schema;let s=i;n.tagName.toLowerCase()==="svg"&&i.space==="html"&&(s=In,e.schema=s),e.ancestors.push(n);const a=mi(e,n.tagName,!1),l=ha(e,n);let o=Dn(e,n);return na.has(n.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!Ls(c):!0})),ui(e,l,a,n),zn(l,o),e.ancestors.pop(),e.schema=i,e.create(n,a,l,r)}function aa(e,n){if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}wt(e,n.position)}function la(e,n){if(n.data&&n.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(n.data.estree);wt(e,n.position)}function oa(e,n,r){const i=e.schema;let s=i;n.name==="svg"&&i.space==="html"&&(s=In,e.schema=s),e.ancestors.push(n);const a=n.name===null?e.Fragment:mi(e,n.name,!0),l=ga(e,n),o=Dn(e,n);return ui(e,l,a,n),zn(l,o),e.ancestors.pop(),e.schema=i,e.create(n,a,l,r)}function ca(e,n,r){const i={};return zn(i,Dn(e,n)),e.create(n,e.Fragment,i,r)}function da(e,n){return n.value}function ui(e,n,r,i){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(n.node=i)}function zn(e,n){if(n.length>0){const r=n.length>1?n:n[0];r&&(e.children=r)}}function ua(e,n,r){return i;function i(s,a,l,o){const d=Array.isArray(l.children)?r:n;return o?d(a,l,o):d(a,l)}}function ma(e,n){return r;function r(i,s,a,l){const o=Array.isArray(a.children),c=Tn(i);return n(s,a,l,o,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function ha(e,n){const r={};let i,s;for(s in n.properties)if(s!=="children"&&Pn.call(n.properties,s)){const a=xa(e,s,n.properties[s]);if(a){const[l,o]=a;e.tableCellAlignToStyle&&l==="align"&&typeof o=="string"&&ra.has(n.tagName)?i=o:r[l]=o}}if(i){const a=r.style||(r.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return r}function ga(e,n){const r={};for(const i of n.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const a=i.data.estree.body[0];a.type;const l=a.expression;l.type;const o=l.properties[0];o.type,Object.assign(r,e.evaluater.evaluateExpression(o.argument))}else wt(e,n.position);else{const s=i.name;let a;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const o=i.value.data.estree.body[0];o.type,a=e.evaluater.evaluateExpression(o.expression)}else wt(e,n.position);else a=i.value===null?!0:i.value;r[s]=a}return r}function Dn(e,n){const r=[];let i=-1;const s=e.passKeys?new Map:ea;for(;++i<n.children.length;){const a=n.children[i];let l;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const d=s.get(c)||0;l=c+"-"+d,s.set(c,d+1)}}const o=di(e,a,l);o!==void 0&&r.push(o)}return r}function xa(e,n,r){const i=Hs(e.schema,n);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=i.commaSeparated?Is(r):Ws(r)),i.property==="style"){let s=typeof r=="object"?r:pa(e,String(r));return e.stylePropertyNameCase==="css"&&(s=fa(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&i.space?Os[i.property]||i.property:i.attribute,r]}}function pa(e,n){try{return Js(n,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const i=r,s=new ue("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=ci+"#cannot-parse-style-attribute",s}}function mi(e,n,r){let i;if(!r)i={type:"Literal",value:n};else if(n.includes(".")){const s=n.split(".");let a=-1,l;for(;++a<s.length;){const o=Xn(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}i=l}else i=Xn(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(i.type==="Literal"){const s=i.value;return Pn.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(i);wt(e)}function wt(e,n){const r=new ue("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ci+"#cannot-handle-mdx-estrees-without-createevaluater",r}function fa(e){const n={};let r;for(r in e)Pn.call(e,r)&&(n[ba(r)]=e[r]);return n}function ba(e){let n=e.replace(ta,ya);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function ya(e){return"-"+e.toLowerCase()}const Jt={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ka={};function Ln(e,n){const r=ka,i=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,s=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return hi(e,i,s)}function hi(e,n,r){if(va(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return lr(e.children,n,r)}return Array.isArray(e)?lr(e,n,r):""}function lr(e,n,r){const i=[];let s=-1;for(;++s<e.length;)i[s]=hi(e[s],n,r);return i.join("")}function va(e){return!!(e&&typeof e=="object")}const or=document.createElement("i");function Fn(e){const n="&"+e+";";or.innerHTML=n;const r=or.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===n?!1:r}function Se(e,n,r,i){const s=e.length;let a=0,l;if(n<0?n=-n>s?0:s+n:n=n>s?s:n,r=r>0?r:0,i.length<1e4)l=Array.from(i),l.unshift(n,r),e.splice(...l);else for(r&&e.splice(n,r);a<i.length;)l=i.slice(a,a+1e4),l.unshift(n,0),e.splice(...l),a+=1e4,n+=1e4}function Ie(e,n){return e.length>0?(Se(e,e.length,0,n),e):n}const cr={}.hasOwnProperty;function gi(e){const n={};let r=-1;for(;++r<e.length;)ja(n,e[r]);return n}function ja(e,n){let r;for(r in n){const s=(cr.call(e,r)?e[r]:void 0)||(e[r]={}),a=n[r];let l;if(a)for(l in a){cr.call(s,l)||(s[l]=[]);const o=a[l];wa(s[l],Array.isArray(o)?o:o?[o]:[])}}}function wa(e,n){let r=-1;const i=[];for(;++r<n.length;)(n[r].add==="after"?e:i).push(n[r]);Se(e,0,0,i)}function xi(e,n){const r=Number.parseInt(e,n);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCodePoint(r)}function Pe(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xe=We(/[A-Za-z]/),de=We(/[\dA-Za-z]/),Na=We(/[#-'*+\--9=?A-Z^-~]/);function Mt(e){return e!==null&&(e<32||e===127)}const kn=We(/\d/),Ca=We(/[\dA-Fa-f]/),Sa=We(/[!-/:-@[-`{-~]/);function L(e){return e!==null&&e<-2}function X(e){return e!==null&&(e<0||e===32)}function K(e){return e===-2||e===-1||e===32}const Ht=We(/\p{P}|\p{S}/u),Ge=We(/\s/);function We(e){return n;function n(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function dt(e){const n=[];let r=-1,i=0,s=0;for(;++r<e.length;){const a=e.charCodeAt(r);let l="";if(a===37&&de(e.charCodeAt(r+1))&&de(e.charCodeAt(r+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const o=e.charCodeAt(r+1);a<56320&&o>56319&&o<57344?(l=String.fromCharCode(a,o),s=1):l="�"}else l=String.fromCharCode(a);l&&(n.push(e.slice(i,r),encodeURIComponent(l)),i=r+s+1,l=""),s&&(r+=s,s=0)}return n.join("")+e.slice(i)}function Y(e,n,r,i){const s=i?i-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(c){return K(c)?(e.enter(r),o(c)):n(c)}function o(c){return K(c)&&a++<s?(e.consume(c),o):(e.exit(r),n(c))}}const Aa={tokenize:Ea};function Ea(e){const n=e.attempt(this.parser.constructs.contentInitial,i,s);let r;return n;function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Y(e,n,"linePrefix")}function s(o){return e.enter("paragraph"),a(o)}function a(o){const c=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,l(o)}function l(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return L(o)?(e.consume(o),e.exit("chunkText"),a):(e.consume(o),l)}}const Ra={tokenize:Ia},dr={tokenize:Ta};function Ia(e){const n=this,r=[];let i=0,s,a,l;return o;function o(E){if(i<r.length){const O=r[i];return n.containerState=O[1],e.attempt(O[0].continuation,c,d)(E)}return d(E)}function c(E){if(i++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,s&&A();const O=n.events.length;let $=O,w;for(;$--;)if(n.events[$][0]==="exit"&&n.events[$][1].type==="chunkFlow"){w=n.events[$][1].end;break}v(i);let H=O;for(;H<n.events.length;)n.events[H][1].end={...w},H++;return Se(n.events,$+1,0,n.events.slice(O)),n.events.length=H,d(E)}return o(E)}function d(E){if(i===r.length){if(!s)return g(E);if(s.currentConstruct&&s.currentConstruct.concrete)return x(E);n.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(dr,m,u)(E)}function m(E){return s&&A(),v(i),g(E)}function u(E){return n.parser.lazy[n.now().line]=i!==r.length,l=n.now().offset,x(E)}function g(E){return n.containerState={},e.attempt(dr,h,x)(E)}function h(E){return i++,r.push([n.currentConstruct,n.containerState]),g(E)}function x(E){if(E===null){s&&A(),v(0),e.consume(E);return}return s=s||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),b(E)}function b(E){if(E===null){N(e.exit("chunkFlow"),!0),v(0),e.consume(E);return}return L(E)?(e.consume(E),N(e.exit("chunkFlow")),i=0,n.interrupt=void 0,o):(e.consume(E),b)}function N(E,O){const $=n.sliceStream(E);if(O&&$.push(null),E.previous=a,a&&(a.next=E),a=E,s.defineSkip(E.start),s.write($),n.parser.lazy[E.start.line]){let w=s.events.length;for(;w--;)if(s.events[w][1].start.offset<l&&(!s.events[w][1].end||s.events[w][1].end.offset>l))return;const H=n.events.length;let U=H,G,j;for(;U--;)if(n.events[U][0]==="exit"&&n.events[U][1].type==="chunkFlow"){if(G){j=n.events[U][1].end;break}G=!0}for(v(i),w=H;w<n.events.length;)n.events[w][1].end={...j},w++;Se(n.events,U+1,0,n.events.slice(H)),n.events.length=w}}function v(E){let O=r.length;for(;O-- >E;){const $=r[O];n.containerState=$[1],$[0].exit.call(n,e)}r.length=E}function A(){s.write([null]),a=void 0,s=void 0,n.containerState._closeFlow=void 0}}function Ta(e,n,r){return Y(e,e.attempt(this.parser.constructs.document,n,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function st(e){if(e===null||X(e)||Ge(e))return 1;if(Ht(e))return 2}function Ut(e,n,r){const i=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!i.includes(a)&&(n=a(n,r),i.push(a))}return n}const vn={name:"attention",resolveAll:Pa,tokenize:za};function Pa(e,n){let r=-1,i,s,a,l,o,c,d,m;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(i=r;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&n.sliceSerialize(e[i][1]).charCodeAt(0)===n.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[i][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;c=e[i][1].end.offset-e[i][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const u={...e[i][1].end},g={...e[r][1].start};ur(u,-c),ur(g,c),l={type:c>1?"strongSequence":"emphasisSequence",start:u,end:{...e[i][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:g},a={type:c>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[r][1].start}},s={type:c>1?"strong":"emphasis",start:{...l.start},end:{...o.end}},e[i][1].end={...l.start},e[r][1].start={...o.end},d=[],e[i][1].end.offset-e[i][1].start.offset&&(d=Ie(d,[["enter",e[i][1],n],["exit",e[i][1],n]])),d=Ie(d,[["enter",s,n],["enter",l,n],["exit",l,n],["enter",a,n]]),d=Ie(d,Ut(n.parser.constructs.insideSpan.null,e.slice(i+1,r),n)),d=Ie(d,[["exit",a,n],["enter",o,n],["exit",o,n],["exit",s,n]]),e[r][1].end.offset-e[r][1].start.offset?(m=2,d=Ie(d,[["enter",e[r][1],n],["exit",e[r][1],n]])):m=0,Se(e,i-1,r-i+3,d),r=i+d.length-m-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function za(e,n){const r=this.parser.constructs.attentionMarkers.null,i=this.previous,s=st(i);let a;return l;function l(c){return a=c,e.enter("attentionSequence"),o(c)}function o(c){if(c===a)return e.consume(c),o;const d=e.exit("attentionSequence"),m=st(c),u=!m||m===2&&s||r.includes(c),g=!s||s===2&&m||r.includes(i);return d._open=!!(a===42?u:u&&(s||!g)),d._close=!!(a===42?g:g&&(m||!u)),n(c)}}function ur(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const Da={name:"autolink",tokenize:La};function La(e,n,r){let i=0;return s;function s(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(h){return xe(h)?(e.consume(h),l):h===64?r(h):d(h)}function l(h){return h===43||h===45||h===46||de(h)?(i=1,o(h)):d(h)}function o(h){return h===58?(e.consume(h),i=0,c):(h===43||h===45||h===46||de(h))&&i++<32?(e.consume(h),o):(i=0,d(h))}function c(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),n):h===null||h===32||h===60||Mt(h)?r(h):(e.consume(h),c)}function d(h){return h===64?(e.consume(h),m):Na(h)?(e.consume(h),d):r(h)}function m(h){return de(h)?u(h):r(h)}function u(h){return h===46?(e.consume(h),i=0,m):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),n):g(h)}function g(h){if((h===45||de(h))&&i++<63){const x=h===45?g:u;return e.consume(h),x}return r(h)}}const Et={partial:!0,tokenize:Fa};function Fa(e,n,r){return i;function i(a){return K(a)?Y(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||L(a)?n(a):r(a)}}const pi={continuation:{tokenize:Ma},exit:Oa,name:"blockQuote",tokenize:_a};function _a(e,n,r){const i=this;return s;function s(l){if(l===62){const o=i.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),a}return r(l)}function a(l){return K(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(l))}}function Ma(e,n,r){const i=this;return s;function s(l){return K(l)?Y(e,a,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return e.attempt(pi,n,r)(l)}}function Oa(e){e.exit("blockQuote")}const fi={name:"characterEscape",tokenize:$a};function $a(e,n,r){return i;function i(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return Sa(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):r(a)}}const bi={name:"characterReference",tokenize:Ba};function Ba(e,n,r){const i=this;let s=0,a,l;return o;function o(u){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(u),e.exit("characterReferenceMarker"),c}function c(u){return u===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(u),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,l=de,m(u))}function d(u){return u===88||u===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(u),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,l=Ca,m):(e.enter("characterReferenceValue"),a=7,l=kn,m(u))}function m(u){if(u===59&&s){const g=e.exit("characterReferenceValue");return l===de&&!Fn(i.sliceSerialize(g))?r(u):(e.enter("characterReferenceMarker"),e.consume(u),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return l(u)&&s++<a?(e.consume(u),m):r(u)}}const mr={partial:!0,tokenize:Ua},hr={concrete:!0,name:"codeFenced",tokenize:Ha};function Ha(e,n,r){const i=this,s={partial:!0,tokenize:$};let a=0,l=0,o;return c;function c(w){return d(w)}function d(w){const H=i.events[i.events.length-1];return a=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,o=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(w)}function m(w){return w===o?(l++,e.consume(w),m):l<3?r(w):(e.exit("codeFencedFenceSequence"),K(w)?Y(e,u,"whitespace")(w):u(w))}function u(w){return w===null||L(w)?(e.exit("codeFencedFence"),i.interrupt?n(w):e.check(mr,b,O)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===null||L(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),u(w)):K(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Y(e,h,"whitespace")(w)):w===96&&w===o?r(w):(e.consume(w),g)}function h(w){return w===null||L(w)?u(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(w))}function x(w){return w===null||L(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),u(w)):w===96&&w===o?r(w):(e.consume(w),x)}function b(w){return e.attempt(s,O,N)(w)}function N(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),v}function v(w){return a>0&&K(w)?Y(e,A,"linePrefix",a+1)(w):A(w)}function A(w){return w===null||L(w)?e.check(mr,b,O)(w):(e.enter("codeFlowValue"),E(w))}function E(w){return w===null||L(w)?(e.exit("codeFlowValue"),A(w)):(e.consume(w),E)}function O(w){return e.exit("codeFenced"),n(w)}function $(w,H,U){let G=0;return j;function j(_){return w.enter("lineEnding"),w.consume(_),w.exit("lineEnding"),T}function T(_){return w.enter("codeFencedFence"),K(_)?Y(w,P,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):P(_)}function P(_){return _===o?(w.enter("codeFencedFenceSequence"),z(_)):U(_)}function z(_){return _===o?(G++,w.consume(_),z):G>=l?(w.exit("codeFencedFenceSequence"),K(_)?Y(w,I,"whitespace")(_):I(_)):U(_)}function I(_){return _===null||L(_)?(w.exit("codeFencedFence"),H(_)):U(_)}}}function Ua(e,n,r){const i=this;return s;function s(l){return l===null?r(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a)}function a(l){return i.parser.lazy[i.now().line]?r(l):n(l)}}const Zt={name:"codeIndented",tokenize:Va},qa={partial:!0,tokenize:Wa};function Va(e,n,r){const i=this;return s;function s(d){return e.enter("codeIndented"),Y(e,a,"linePrefix",5)(d)}function a(d){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):r(d)}function l(d){return d===null?c(d):L(d)?e.attempt(qa,l,c)(d):(e.enter("codeFlowValue"),o(d))}function o(d){return d===null||L(d)?(e.exit("codeFlowValue"),l(d)):(e.consume(d),o)}function c(d){return e.exit("codeIndented"),n(d)}}function Wa(e,n,r){const i=this;return s;function s(l){return i.parser.lazy[i.now().line]?r(l):L(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s):Y(e,a,"linePrefix",5)(l)}function a(l){const o=i.events[i.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(l):L(l)?s(l):r(l)}}const Ka={name:"codeText",previous:Ya,resolve:Ga,tokenize:Qa};function Ga(e){let n=e.length-4,r=3,i,s;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(i=r;++i<n;)if(e[i][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[n][1].type="codeTextPadding",r+=2,n-=2;break}}for(i=r-1,n++;++i<=n;)s===void 0?i!==n&&e[i][1].type!=="lineEnding"&&(s=i):(i===n||e[i][1].type==="lineEnding")&&(e[s][1].type="codeTextData",i!==s+2&&(e[s][1].end=e[i-1][1].end,e.splice(s+2,i-s-2),n-=i-s-2,i=s+2),s=void 0);return e}function Ya(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Qa(e,n,r){let i=0,s,a;return l;function l(u){return e.enter("codeText"),e.enter("codeTextSequence"),o(u)}function o(u){return u===96?(e.consume(u),i++,o):(e.exit("codeTextSequence"),c(u))}function c(u){return u===null?r(u):u===32?(e.enter("space"),e.consume(u),e.exit("space"),c):u===96?(a=e.enter("codeTextSequence"),s=0,m(u)):L(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(u))}function d(u){return u===null||u===32||u===96||L(u)?(e.exit("codeTextData"),c(u)):(e.consume(u),d)}function m(u){return u===96?(e.consume(u),s++,m):s===i?(e.exit("codeTextSequence"),e.exit("codeText"),n(u)):(a.type="codeTextData",d(u))}}class Xa{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,r){const i=r??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(n,i):n>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(n,r,i){const s=r||0;this.setCursor(Math.trunc(n));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return i&&ft(this.left,i),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),ft(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),ft(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const r=this.left.splice(n,Number.POSITIVE_INFINITY);ft(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);ft(this.left,r.reverse())}}}function ft(e,n){let r=0;if(n.length<1e4)e.push(...n);else for(;r<n.length;)e.push(...n.slice(r,r+1e4)),r+=1e4}function yi(e){const n={};let r=-1,i,s,a,l,o,c,d;const m=new Xa(e);for(;++r<m.length;){for(;r in n;)r=n[r];if(i=m.get(r),r&&i[1].type==="chunkFlow"&&m.get(r-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(i[0]==="enter")i[1].contentType&&(Object.assign(n,Ja(m,r)),r=n[r],d=!0);else if(i[1]._container){for(a=r,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(i[1].end={...m.get(s)[1].start},o=m.slice(s,r),o.unshift(i),m.splice(s,r-s+1,o))}}return Se(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function Ja(e,n){const r=e.get(n)[1],i=e.get(n)[2];let s=n-1;const a=[];let l=r._tokenizer;l||(l=i.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const o=l.events,c=[],d={};let m,u,g=-1,h=r,x=0,b=0;const N=[b];for(;h;){for(;e.get(++s)[1]!==h;);a.push(s),h._tokenizer||(m=i.sliceStream(h),h.next||m.push(null),u&&l.defineSkip(h.start),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),u=h,h=h.next}for(h=r;++g<o.length;)o[g][0]==="exit"&&o[g-1][0]==="enter"&&o[g][1].type===o[g-1][1].type&&o[g][1].start.line!==o[g][1].end.line&&(b=g+1,N.push(b),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(l.events=[],h?(h._tokenizer=void 0,h.previous=void 0):N.pop(),g=N.length;g--;){const v=o.slice(N[g],N[g+1]),A=a.pop();c.push([A,A+v.length-1]),e.splice(A,2,v)}for(c.reverse(),g=-1;++g<c.length;)d[x+c[g][0]]=x+c[g][1],x+=c[g][1]-c[g][0]-1;return d}const Za={resolve:tl,tokenize:nl},el={partial:!0,tokenize:rl};function tl(e){return yi(e),e}function nl(e,n){let r;return i;function i(o){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),s(o)}function s(o){return o===null?a(o):L(o)?e.check(el,l,a)(o):(e.consume(o),s)}function a(o){return e.exit("chunkContent"),e.exit("content"),n(o)}function l(o){return e.consume(o),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,s}}function rl(e,n,r){const i=this;return s;function s(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Y(e,a,"linePrefix")}function a(l){if(l===null||L(l))return r(l);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(l):e.interrupt(i.parser.constructs.flow,r,n)(l)}}function ki(e,n,r,i,s,a,l,o,c){const d=c||Number.POSITIVE_INFINITY;let m=0;return u;function u(v){return v===60?(e.enter(i),e.enter(s),e.enter(a),e.consume(v),e.exit(a),g):v===null||v===32||v===41||Mt(v)?r(v):(e.enter(i),e.enter(l),e.enter(o),e.enter("chunkString",{contentType:"string"}),b(v))}function g(v){return v===62?(e.enter(a),e.consume(v),e.exit(a),e.exit(s),e.exit(i),n):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(o),g(v)):v===null||v===60||L(v)?r(v):(e.consume(v),v===92?x:h)}function x(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function b(v){return!m&&(v===null||v===41||X(v))?(e.exit("chunkString"),e.exit(o),e.exit(l),e.exit(i),n(v)):m<d&&v===40?(e.consume(v),m++,b):v===41?(e.consume(v),m--,b):v===null||v===32||v===40||Mt(v)?r(v):(e.consume(v),v===92?N:b)}function N(v){return v===40||v===41||v===92?(e.consume(v),b):b(v)}}function vi(e,n,r,i,s,a){const l=this;let o=0,c;return d;function d(h){return e.enter(i),e.enter(s),e.consume(h),e.exit(s),e.enter(a),m}function m(h){return o>999||h===null||h===91||h===93&&!c||h===94&&!o&&"_hiddenFootnoteSupport"in l.parser.constructs?r(h):h===93?(e.exit(a),e.enter(s),e.consume(h),e.exit(s),e.exit(i),n):L(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===null||h===91||h===93||L(h)||o++>999?(e.exit("chunkString"),m(h)):(e.consume(h),c||(c=!K(h)),h===92?g:u)}function g(h){return h===91||h===92||h===93?(e.consume(h),o++,u):u(h)}}function ji(e,n,r,i,s,a){let l;return o;function o(g){return g===34||g===39||g===40?(e.enter(i),e.enter(s),e.consume(g),e.exit(s),l=g===40?41:g,c):r(g)}function c(g){return g===l?(e.enter(s),e.consume(g),e.exit(s),e.exit(i),n):(e.enter(a),d(g))}function d(g){return g===l?(e.exit(a),c(l)):g===null?r(g):L(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),Y(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===l||g===null||L(g)?(e.exit("chunkString"),d(g)):(e.consume(g),g===92?u:m)}function u(g){return g===l||g===92?(e.consume(g),m):m(g)}}function kt(e,n){let r;return i;function i(s){return L(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r=!0,i):K(s)?Y(e,i,r?"linePrefix":"lineSuffix")(s):n(s)}}const il={name:"definition",tokenize:al},sl={partial:!0,tokenize:ll};function al(e,n,r){const i=this;let s;return a;function a(h){return e.enter("definition"),l(h)}function l(h){return vi.call(i,e,o,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function o(h){return s=Pe(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),c):r(h)}function c(h){return X(h)?kt(e,d)(h):d(h)}function d(h){return ki(e,m,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function m(h){return e.attempt(sl,u,u)(h)}function u(h){return K(h)?Y(e,g,"whitespace")(h):g(h)}function g(h){return h===null||L(h)?(e.exit("definition"),i.parser.defined.push(s),n(h)):r(h)}}function ll(e,n,r){return i;function i(o){return X(o)?kt(e,s)(o):r(o)}function s(o){return ji(e,a,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return K(o)?Y(e,l,"whitespace")(o):l(o)}function l(o){return o===null||L(o)?n(o):r(o)}}const ol={name:"hardBreakEscape",tokenize:cl};function cl(e,n,r){return i;function i(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return L(a)?(e.exit("hardBreakEscape"),n(a)):r(a)}}const dl={name:"headingAtx",resolve:ul,tokenize:ml};function ul(e,n){let r=e.length-2,i=3,s,a;return e[i][1].type==="whitespace"&&(i+=2),r-2>i&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(i===r-1||r-4>i&&e[r-2][1].type==="whitespace")&&(r-=i+1===r?2:4),r>i&&(s={type:"atxHeadingText",start:e[i][1].start,end:e[r][1].end},a={type:"chunkText",start:e[i][1].start,end:e[r][1].end,contentType:"text"},Se(e,i,r-i+1,[["enter",s,n],["enter",a,n],["exit",a,n],["exit",s,n]])),e}function ml(e,n,r){let i=0;return s;function s(m){return e.enter("atxHeading"),a(m)}function a(m){return e.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&i++<6?(e.consume(m),l):m===null||X(m)?(e.exit("atxHeadingSequence"),o(m)):r(m)}function o(m){return m===35?(e.enter("atxHeadingSequence"),c(m)):m===null||L(m)?(e.exit("atxHeading"),n(m)):K(m)?Y(e,o,"whitespace")(m):(e.enter("atxHeadingText"),d(m))}function c(m){return m===35?(e.consume(m),c):(e.exit("atxHeadingSequence"),o(m))}function d(m){return m===null||m===35||X(m)?(e.exit("atxHeadingText"),o(m)):(e.consume(m),d)}}const hl=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],gr=["pre","script","style","textarea"],gl={concrete:!0,name:"htmlFlow",resolveTo:fl,tokenize:bl},xl={partial:!0,tokenize:kl},pl={partial:!0,tokenize:yl};function fl(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function bl(e,n,r){const i=this;let s,a,l,o,c;return d;function d(f){return m(f)}function m(f){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(f),u}function u(f){return f===33?(e.consume(f),g):f===47?(e.consume(f),a=!0,b):f===63?(e.consume(f),s=3,i.interrupt?n:p):xe(f)?(e.consume(f),l=String.fromCharCode(f),N):r(f)}function g(f){return f===45?(e.consume(f),s=2,h):f===91?(e.consume(f),s=5,o=0,x):xe(f)?(e.consume(f),s=4,i.interrupt?n:p):r(f)}function h(f){return f===45?(e.consume(f),i.interrupt?n:p):r(f)}function x(f){const re="CDATA[";return f===re.charCodeAt(o++)?(e.consume(f),o===re.length?i.interrupt?n:P:x):r(f)}function b(f){return xe(f)?(e.consume(f),l=String.fromCharCode(f),N):r(f)}function N(f){if(f===null||f===47||f===62||X(f)){const re=f===47,ze=l.toLowerCase();return!re&&!a&&gr.includes(ze)?(s=1,i.interrupt?n(f):P(f)):hl.includes(l.toLowerCase())?(s=6,re?(e.consume(f),v):i.interrupt?n(f):P(f)):(s=7,i.interrupt&&!i.parser.lazy[i.now().line]?r(f):a?A(f):E(f))}return f===45||de(f)?(e.consume(f),l+=String.fromCharCode(f),N):r(f)}function v(f){return f===62?(e.consume(f),i.interrupt?n:P):r(f)}function A(f){return K(f)?(e.consume(f),A):j(f)}function E(f){return f===47?(e.consume(f),j):f===58||f===95||xe(f)?(e.consume(f),O):K(f)?(e.consume(f),E):j(f)}function O(f){return f===45||f===46||f===58||f===95||de(f)?(e.consume(f),O):$(f)}function $(f){return f===61?(e.consume(f),w):K(f)?(e.consume(f),$):E(f)}function w(f){return f===null||f===60||f===61||f===62||f===96?r(f):f===34||f===39?(e.consume(f),c=f,H):K(f)?(e.consume(f),w):U(f)}function H(f){return f===c?(e.consume(f),c=null,G):f===null||L(f)?r(f):(e.consume(f),H)}function U(f){return f===null||f===34||f===39||f===47||f===60||f===61||f===62||f===96||X(f)?$(f):(e.consume(f),U)}function G(f){return f===47||f===62||K(f)?E(f):r(f)}function j(f){return f===62?(e.consume(f),T):r(f)}function T(f){return f===null||L(f)?P(f):K(f)?(e.consume(f),T):r(f)}function P(f){return f===45&&s===2?(e.consume(f),ee):f===60&&s===1?(e.consume(f),le):f===62&&s===4?(e.consume(f),fe):f===63&&s===3?(e.consume(f),p):f===93&&s===5?(e.consume(f),Te):L(f)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(xl,Ae,z)(f)):f===null||L(f)?(e.exit("htmlFlowData"),z(f)):(e.consume(f),P)}function z(f){return e.check(pl,I,Ae)(f)}function I(f){return e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),_}function _(f){return f===null||L(f)?z(f):(e.enter("htmlFlowData"),P(f))}function ee(f){return f===45?(e.consume(f),p):P(f)}function le(f){return f===47?(e.consume(f),l="",me):P(f)}function me(f){if(f===62){const re=l.toLowerCase();return gr.includes(re)?(e.consume(f),fe):P(f)}return xe(f)&&l.length<8?(e.consume(f),l+=String.fromCharCode(f),me):P(f)}function Te(f){return f===93?(e.consume(f),p):P(f)}function p(f){return f===62?(e.consume(f),fe):f===45&&s===2?(e.consume(f),p):P(f)}function fe(f){return f===null||L(f)?(e.exit("htmlFlowData"),Ae(f)):(e.consume(f),fe)}function Ae(f){return e.exit("htmlFlow"),n(f)}}function yl(e,n,r){const i=this;return s;function s(l){return L(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):r(l)}function a(l){return i.parser.lazy[i.now().line]?r(l):n(l)}}function kl(e,n,r){return i;function i(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Et,n,r)}}const vl={name:"htmlText",tokenize:jl};function jl(e,n,r){const i=this;let s,a,l;return o;function o(p){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(p),c}function c(p){return p===33?(e.consume(p),d):p===47?(e.consume(p),$):p===63?(e.consume(p),E):xe(p)?(e.consume(p),U):r(p)}function d(p){return p===45?(e.consume(p),m):p===91?(e.consume(p),a=0,x):xe(p)?(e.consume(p),A):r(p)}function m(p){return p===45?(e.consume(p),h):r(p)}function u(p){return p===null?r(p):p===45?(e.consume(p),g):L(p)?(l=u,le(p)):(e.consume(p),u)}function g(p){return p===45?(e.consume(p),h):u(p)}function h(p){return p===62?ee(p):p===45?g(p):u(p)}function x(p){const fe="CDATA[";return p===fe.charCodeAt(a++)?(e.consume(p),a===fe.length?b:x):r(p)}function b(p){return p===null?r(p):p===93?(e.consume(p),N):L(p)?(l=b,le(p)):(e.consume(p),b)}function N(p){return p===93?(e.consume(p),v):b(p)}function v(p){return p===62?ee(p):p===93?(e.consume(p),v):b(p)}function A(p){return p===null||p===62?ee(p):L(p)?(l=A,le(p)):(e.consume(p),A)}function E(p){return p===null?r(p):p===63?(e.consume(p),O):L(p)?(l=E,le(p)):(e.consume(p),E)}function O(p){return p===62?ee(p):E(p)}function $(p){return xe(p)?(e.consume(p),w):r(p)}function w(p){return p===45||de(p)?(e.consume(p),w):H(p)}function H(p){return L(p)?(l=H,le(p)):K(p)?(e.consume(p),H):ee(p)}function U(p){return p===45||de(p)?(e.consume(p),U):p===47||p===62||X(p)?G(p):r(p)}function G(p){return p===47?(e.consume(p),ee):p===58||p===95||xe(p)?(e.consume(p),j):L(p)?(l=G,le(p)):K(p)?(e.consume(p),G):ee(p)}function j(p){return p===45||p===46||p===58||p===95||de(p)?(e.consume(p),j):T(p)}function T(p){return p===61?(e.consume(p),P):L(p)?(l=T,le(p)):K(p)?(e.consume(p),T):G(p)}function P(p){return p===null||p===60||p===61||p===62||p===96?r(p):p===34||p===39?(e.consume(p),s=p,z):L(p)?(l=P,le(p)):K(p)?(e.consume(p),P):(e.consume(p),I)}function z(p){return p===s?(e.consume(p),s=void 0,_):p===null?r(p):L(p)?(l=z,le(p)):(e.consume(p),z)}function I(p){return p===null||p===34||p===39||p===60||p===61||p===96?r(p):p===47||p===62||X(p)?G(p):(e.consume(p),I)}function _(p){return p===47||p===62||X(p)?G(p):r(p)}function ee(p){return p===62?(e.consume(p),e.exit("htmlTextData"),e.exit("htmlText"),n):r(p)}function le(p){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),me}function me(p){return K(p)?Y(e,Te,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(p):Te(p)}function Te(p){return e.enter("htmlTextData"),l(p)}}const _n={name:"labelEnd",resolveAll:Sl,resolveTo:Al,tokenize:El},wl={tokenize:Rl},Nl={tokenize:Il},Cl={tokenize:Tl};function Sl(e){let n=-1;const r=[];for(;++n<e.length;){const i=e[n][1];if(r.push(e[n]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const s=i.type==="labelImage"?4:2;i.type="data",n+=s}}return e.length!==r.length&&Se(e,0,e.length,r),e}function Al(e,n){let r=e.length,i=0,s,a,l,o;for(;r--;)if(s=e[r][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[r][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(e[r][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=r,s.type!=="labelLink")){i=2;break}}else s.type==="labelEnd"&&(l=r);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[l][1].end}},m={type:"labelText",start:{...e[a+i+2][1].end},end:{...e[l-2][1].start}};return o=[["enter",c,n],["enter",d,n]],o=Ie(o,e.slice(a+1,a+i+3)),o=Ie(o,[["enter",m,n]]),o=Ie(o,Ut(n.parser.constructs.insideSpan.null,e.slice(a+i+4,l-3),n)),o=Ie(o,[["exit",m,n],e[l-2],e[l-1],["exit",d,n]]),o=Ie(o,e.slice(l+1)),o=Ie(o,[["exit",c,n]]),Se(e,a,e.length,o),e}function El(e,n,r){const i=this;let s=i.events.length,a,l;for(;s--;)if((i.events[s][1].type==="labelImage"||i.events[s][1].type==="labelLink")&&!i.events[s][1]._balanced){a=i.events[s][1];break}return o;function o(g){return a?a._inactive?u(g):(l=i.parser.defined.includes(Pe(i.sliceSerialize({start:a.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),c):r(g)}function c(g){return g===40?e.attempt(wl,m,l?m:u)(g):g===91?e.attempt(Nl,m,l?d:u)(g):l?m(g):u(g)}function d(g){return e.attempt(Cl,m,u)(g)}function m(g){return n(g)}function u(g){return a._balanced=!0,r(g)}}function Rl(e,n,r){return i;function i(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),s}function s(u){return X(u)?kt(e,a)(u):a(u)}function a(u){return u===41?m(u):ki(e,l,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function l(u){return X(u)?kt(e,c)(u):m(u)}function o(u){return r(u)}function c(u){return u===34||u===39||u===40?ji(e,d,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):m(u)}function d(u){return X(u)?kt(e,m)(u):m(u)}function m(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),n):r(u)}}function Il(e,n,r){const i=this;return s;function s(o){return vi.call(i,e,a,l,"reference","referenceMarker","referenceString")(o)}function a(o){return i.parser.defined.includes(Pe(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?n(o):r(o)}function l(o){return r(o)}}function Tl(e,n,r){return i;function i(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),n):r(a)}}const Pl={name:"labelStartImage",resolveAll:_n.resolveAll,tokenize:zl};function zl(e,n,r){const i=this;return s;function s(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),a}function a(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),l):r(o)}function l(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?r(o):n(o)}}const Dl={name:"labelStartLink",resolveAll:_n.resolveAll,tokenize:Ll};function Ll(e,n,r){const i=this;return s;function s(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?r(l):n(l)}}const en={name:"lineEnding",tokenize:Fl};function Fl(e,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Y(e,n,"linePrefix")}}const Ft={name:"thematicBreak",tokenize:_l};function _l(e,n,r){let i=0,s;return a;function a(d){return e.enter("thematicBreak"),l(d)}function l(d){return s=d,o(d)}function o(d){return d===s?(e.enter("thematicBreakSequence"),c(d)):i>=3&&(d===null||L(d))?(e.exit("thematicBreak"),n(d)):r(d)}function c(d){return d===s?(e.consume(d),i++,c):(e.exit("thematicBreakSequence"),K(d)?Y(e,o,"whitespace")(d):o(d))}}const ye={continuation:{tokenize:Bl},exit:Ul,name:"list",tokenize:$l},Ml={partial:!0,tokenize:ql},Ol={partial:!0,tokenize:Hl};function $l(e,n,r){const i=this,s=i.events[i.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return o;function o(h){const x=i.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!i.containerState.marker||h===i.containerState.marker:kn(h)){if(i.containerState.type||(i.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Ft,r,d)(h):d(h);if(!i.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(h)}return r(h)}function c(h){return kn(h)&&++l<10?(e.consume(h),c):(!i.interrupt||l<2)&&(i.containerState.marker?h===i.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),d(h)):r(h)}function d(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||h,e.check(Et,i.interrupt?r:m,e.attempt(Ml,g,u))}function m(h){return i.containerState.initialBlankLine=!0,a++,g(h)}function u(h){return K(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),g):r(h)}function g(h){return i.containerState.size=a+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(h)}}function Bl(e,n,r){const i=this;return i.containerState._closeFlow=void 0,e.check(Et,s,a);function s(o){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Y(e,n,"listItemIndent",i.containerState.size+1)(o)}function a(o){return i.containerState.furtherBlankLines||!K(o)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(o)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(Ol,n,l)(o))}function l(o){return i.containerState._closeFlow=!0,i.interrupt=void 0,Y(e,e.attempt(ye,n,r),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Hl(e,n,r){const i=this;return Y(e,s,"listItemIndent",i.containerState.size+1);function s(a){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?n(a):r(a)}}function Ul(e){e.exit(this.containerState.type)}function ql(e,n,r){const i=this;return Y(e,s,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=i.events[i.events.length-1];return!K(a)&&l&&l[1].type==="listItemPrefixWhitespace"?n(a):r(a)}}const xr={name:"setextUnderline",resolveTo:Vl,tokenize:Wl};function Vl(e,n){let r=e.length,i,s,a;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){i=r;break}e[r][1].type==="paragraph"&&(s=r)}else e[r][1].type==="content"&&e.splice(r,1),!a&&e[r][1].type==="definition"&&(a=r);const l={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",l,n]),e.splice(a+1,0,["exit",e[i][1],n]),e[i][1].end={...e[a][1].end}):e[i][1]=l,e.push(["exit",l,n]),e}function Wl(e,n,r){const i=this;let s;return a;function a(d){let m=i.events.length,u;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){u=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||u)?(e.enter("setextHeadingLine"),s=d,l(d)):r(d)}function l(d){return e.enter("setextHeadingLineSequence"),o(d)}function o(d){return d===s?(e.consume(d),o):(e.exit("setextHeadingLineSequence"),K(d)?Y(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||L(d)?(e.exit("setextHeadingLine"),n(d)):r(d)}}const Kl={tokenize:Gl};function Gl(e){const n=this,r=e.attempt(Et,i,e.attempt(this.parser.constructs.flowInitial,s,Y(e,e.attempt(this.parser.constructs.flow,s,e.attempt(Za,s)),"linePrefix")));return r;function i(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),n.currentConstruct=void 0,r}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n.currentConstruct=void 0,r}}const Yl={resolveAll:Ni()},Ql=wi("string"),Xl=wi("text");function wi(e){return{resolveAll:Ni(e==="text"?Jl:void 0),tokenize:n};function n(r){const i=this,s=this.parser.constructs[e],a=r.attempt(s,l,o);return l;function l(m){return d(m)?a(m):o(m)}function o(m){if(m===null){r.consume(m);return}return r.enter("data"),r.consume(m),c}function c(m){return d(m)?(r.exit("data"),a(m)):(r.consume(m),c)}function d(m){if(m===null)return!0;const u=s[m];let g=-1;if(u)for(;++g<u.length;){const h=u[g];if(!h.previous||h.previous.call(i,i.previous))return!0}return!1}}}function Ni(e){return n;function n(r,i){let s=-1,a;for(;++s<=r.length;)a===void 0?r[s]&&r[s][1].type==="data"&&(a=s,s++):(!r[s]||r[s][1].type!=="data")&&(s!==a+2&&(r[a][1].end=r[s-1][1].end,r.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(r,i):r}}function Jl(e,n){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const i=e[r-1][1],s=n.sliceStream(i);let a=s.length,l=-1,o=0,c;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)o++,l--;if(l)break;l=-1}else if(d===-2)c=!0,o++;else if(d!==-1){a++;break}}if(n._contentTypeTextTrailing&&r===e.length&&(o=0),o){const d={type:r===e.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:i.start._bufferIndex+l,_index:i.start._index+a,line:i.end.line,column:i.end.column-o,offset:i.end.offset-o},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(e.splice(r,0,["enter",d,n],["exit",d,n]),r+=2)}r++}return e}const Zl={42:ye,43:ye,45:ye,48:ye,49:ye,50:ye,51:ye,52:ye,53:ye,54:ye,55:ye,56:ye,57:ye,62:pi},eo={91:il},to={[-2]:Zt,[-1]:Zt,32:Zt},no={35:dl,42:Ft,45:[xr,Ft],60:gl,61:xr,95:Ft,96:hr,126:hr},ro={38:bi,92:fi},io={[-5]:en,[-4]:en,[-3]:en,33:Pl,38:bi,42:vn,60:[Da,vl],91:Dl,92:[ol,fi],93:_n,95:vn,96:Ka},so={null:[vn,Yl]},ao={null:[42,95]},lo={null:[]},oo=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ao,contentInitial:eo,disable:lo,document:Zl,flow:no,flowInitial:to,insideSpan:so,string:ro,text:io},Symbol.toStringTag,{value:"Module"}));function co(e,n,r){let i={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},a=[];let l=[],o=[];const c={attempt:H($),check:H(w),consume:A,enter:E,exit:O,interrupt:H(w,{interrupt:!0})},d={code:null,containerState:{},defineSkip:b,events:[],now:x,parser:e,previous:null,sliceSerialize:g,sliceStream:h,write:u};let m=n.tokenize.call(d,c);return n.resolveAll&&a.push(n),d;function u(T){return l=Ie(l,T),N(),l[l.length-1]!==null?[]:(U(n,0),d.events=Ut(a,d.events,d),d.events)}function g(T,P){return mo(h(T),P)}function h(T){return uo(l,T)}function x(){const{_bufferIndex:T,_index:P,line:z,column:I,offset:_}=i;return{_bufferIndex:T,_index:P,line:z,column:I,offset:_}}function b(T){s[T.line]=T.column,j()}function N(){let T;for(;i._index<l.length;){const P=l[i._index];if(typeof P=="string")for(T=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===T&&i._bufferIndex<P.length;)v(P.charCodeAt(i._bufferIndex));else v(P)}}function v(T){m=m(T)}function A(T){L(T)?(i.line++,i.column=1,i.offset+=T===-3?2:1,j()):T!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=T}function E(T,P){const z=P||{};return z.type=T,z.start=x(),d.events.push(["enter",z,d]),o.push(z),z}function O(T){const P=o.pop();return P.end=x(),d.events.push(["exit",P,d]),P}function $(T,P){U(T,P.from)}function w(T,P){P.restore()}function H(T,P){return z;function z(I,_,ee){let le,me,Te,p;return Array.isArray(I)?Ae(I):"tokenize"in I?Ae([I]):fe(I);function fe(ie){return Ue;function Ue(Ee){const he=Ee!==null&&ie[Ee],_e=Ee!==null&&ie.null,Qe=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(_e)?_e:_e?[_e]:[]];return Ae(Qe)(Ee)}}function Ae(ie){return le=ie,me=0,ie.length===0?ee:f(ie[me])}function f(ie){return Ue;function Ue(Ee){return p=G(),Te=ie,ie.partial||(d.currentConstruct=ie),ie.name&&d.parser.constructs.disable.null.includes(ie.name)?ze():ie.tokenize.call(P?Object.assign(Object.create(d),P):d,c,re,ze)(Ee)}}function re(ie){return T(Te,p),_}function ze(ie){return p.restore(),++me<le.length?f(le[me]):ee}}}function U(T,P){T.resolveAll&&!a.includes(T)&&a.push(T),T.resolve&&Se(d.events,P,d.events.length-P,T.resolve(d.events.slice(P),d)),T.resolveTo&&(d.events=T.resolveTo(d.events,d))}function G(){const T=x(),P=d.previous,z=d.currentConstruct,I=d.events.length,_=Array.from(o);return{from:I,restore:ee};function ee(){i=T,d.previous=P,d.currentConstruct=z,d.events.length=I,o=_,j()}}function j(){i.line in s&&i.column<2&&(i.column=s[i.line],i.offset+=s[i.line]-1)}}function uo(e,n){const r=n.start._index,i=n.start._bufferIndex,s=n.end._index,a=n.end._bufferIndex;let l;if(r===s)l=[e[r].slice(i,a)];else{if(l=e.slice(r,s),i>-1){const o=l[0];typeof o=="string"?l[0]=o.slice(i):l.shift()}a>0&&l.push(e[s].slice(0,a))}return l}function mo(e,n){let r=-1;const i=[];let s;for(;++r<e.length;){const a=e[r];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=n?" ":"	";break}case-1:{if(!n&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,i.push(l)}return i.join("")}function ho(e){const i={constructs:gi([oo,...(e||{}).extensions||[]]),content:s(Aa),defined:[],document:s(Ra),flow:s(Kl),lazy:{},string:s(Ql),text:s(Xl)};return i;function s(a){return l;function l(o){return co(i,a,o)}}}function go(e){for(;!yi(e););return e}const pr=/[\0\t\n\r]/g;function xo(){let e=1,n="",r=!0,i;return s;function s(a,l,o){const c=[];let d,m,u,g,h;for(a=n+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),u=0,n="",r&&(a.charCodeAt(0)===65279&&u++,r=void 0);u<a.length;){if(pr.lastIndex=u,d=pr.exec(a),g=d&&d.index!==void 0?d.index:a.length,h=a.charCodeAt(g),!d){n=a.slice(u);break}if(h===10&&u===g&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),u<g&&(c.push(a.slice(u,g)),e+=g-u),h){case 0:{c.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,c.push(-2);e++<m;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:i=!0,e=1}u=g+1}return o&&(i&&c.push(-5),n&&c.push(n),c.push(null)),c}}const po=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function fo(e){return e.replace(po,bo)}function bo(e,n,r){if(n)return n;if(r.charCodeAt(0)===35){const s=r.charCodeAt(1),a=s===120||s===88;return xi(r.slice(a?2:1),a?16:10)}return Fn(r)||e}const Ci={}.hasOwnProperty;function yo(e,n,r){return typeof n!="string"&&(r=n,n=void 0),ko(r)(go(ho(r).document().write(xo()(e,n,!0))))}function ko(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ge),autolinkProtocol:G,autolinkEmail:G,atxHeading:a(It),blockQuote:a(_e),characterEscape:G,characterReference:G,codeFenced:a(Qe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Qe,l),codeText:a(Kt,l),codeTextData:G,data:G,codeFlowValue:G,definition:a(Gt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(ce),hardBreakEscape:a(y),hardBreakTrailing:a(y),htmlFlow:a(R,l),htmlFlowData:G,htmlText:a(R,l),htmlTextData:G,image:a(B),label:l,link:a(ge),listItem:a(M),listItemValue:g,listOrdered:a(Xe,u),listUnordered:a(Xe),paragraph:a(Me),reference:f,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(It),strong:a(Re),thematicBreak:a(Z)},exit:{atxHeading:c(),atxHeadingSequence:$,autolink:c(),autolinkEmail:he,autolinkProtocol:Ee,blockQuote:c(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:ze,characterReferenceMarkerNumeric:ze,characterReferenceValue:ie,characterReference:Ue,codeFenced:c(N),codeFencedFence:b,codeFencedFenceInfo:h,codeFencedFenceMeta:x,codeFlowValue:j,codeIndented:c(v),codeText:c(_),codeTextData:j,data:j,definition:c(),definitionDestinationString:O,definitionLabelString:A,definitionTitleString:E,emphasis:c(),hardBreakEscape:c(P),hardBreakTrailing:c(P),htmlFlow:c(z),htmlFlowData:j,htmlText:c(I),htmlTextData:j,image:c(le),label:Te,labelText:me,lineEnding:T,link:c(ee),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:re,resourceDestinationString:p,resourceTitleString:fe,resource:Ae,setextHeading:c(U),setextHeadingLineSequence:H,setextHeadingText:w,strong:c(),thematicBreak:c()}};Si(n,(e||{}).mdastExtensions||[]);const r={};return i;function i(k){let C={type:"root",children:[]};const D={stack:[C],tokenStack:[],config:n,enter:o,exit:d,buffer:l,resume:m,data:r},V=[];let Q=-1;for(;++Q<k.length;)if(k[Q][1].type==="listOrdered"||k[Q][1].type==="listUnordered")if(k[Q][0]==="enter")V.push(Q);else{const je=V.pop();Q=s(k,je,Q)}for(Q=-1;++Q<k.length;){const je=n[k[Q][0]];Ci.call(je,k[Q][1].type)&&je[k[Q][1].type].call(Object.assign({sliceSerialize:k[Q][2].sliceSerialize},D),k[Q][1])}if(D.tokenStack.length>0){const je=D.tokenStack[D.tokenStack.length-1];(je[1]||fr).call(D,void 0,je[0])}for(C.position={start:qe(k.length>0?k[0][1].start:{line:1,column:1,offset:0}),end:qe(k.length>0?k[k.length-2][1].end:{line:1,column:1,offset:0})},Q=-1;++Q<n.transforms.length;)C=n.transforms[Q](C)||C;return C}function s(k,C,D){let V=C-1,Q=-1,je=!1,ne,we,mt,ht;for(;++V<=D;){const Ne=k[V];switch(Ne[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ne[0]==="enter"?Q++:Q--,ht=void 0;break}case"lineEndingBlank":{Ne[0]==="enter"&&(ne&&!ht&&!Q&&!mt&&(mt=V),ht=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ht=void 0}if(!Q&&Ne[0]==="enter"&&Ne[1].type==="listItemPrefix"||Q===-1&&Ne[0]==="exit"&&(Ne[1].type==="listUnordered"||Ne[1].type==="listOrdered")){if(ne){let Je=V;for(we=void 0;Je--;){const Oe=k[Je];if(Oe[1].type==="lineEnding"||Oe[1].type==="lineEndingBlank"){if(Oe[0]==="exit")continue;we&&(k[we][1].type="lineEndingBlank",je=!0),Oe[1].type="lineEnding",we=Je}else if(!(Oe[1].type==="linePrefix"||Oe[1].type==="blockQuotePrefix"||Oe[1].type==="blockQuotePrefixWhitespace"||Oe[1].type==="blockQuoteMarker"||Oe[1].type==="listItemIndent"))break}mt&&(!we||mt<we)&&(ne._spread=!0),ne.end=Object.assign({},we?k[we][1].start:Ne[1].end),k.splice(we||V,0,["exit",ne,Ne[2]]),V++,D++}if(Ne[1].type==="listItemPrefix"){const Je={type:"listItem",_spread:!1,start:Object.assign({},Ne[1].start),end:void 0};ne=Je,k.splice(V,0,["enter",Je,Ne[2]]),V++,D++,mt=void 0,ht=!0}}}return k[C][1]._spread=je,D}function a(k,C){return D;function D(V){o.call(this,k(V),V),C&&C.call(this,V)}}function l(){this.stack.push({type:"fragment",children:[]})}function o(k,C,D){this.stack[this.stack.length-1].children.push(k),this.stack.push(k),this.tokenStack.push([C,D||void 0]),k.position={start:qe(C.start),end:void 0}}function c(k){return C;function C(D){k&&k.call(this,D),d.call(this,D)}}function d(k,C){const D=this.stack.pop(),V=this.tokenStack.pop();if(V)V[0].type!==k.type&&(C?C.call(this,k,V[0]):(V[1]||fr).call(this,k,V[0]));else throw new Error("Cannot close `"+k.type+"` ("+yt({start:k.start,end:k.end})+"): it’s not open");D.position.end=qe(k.end)}function m(){return Ln(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function g(k){if(this.data.expectingFirstListItemValue){const C=this.stack[this.stack.length-2];C.start=Number.parseInt(this.sliceSerialize(k),10),this.data.expectingFirstListItemValue=void 0}}function h(){const k=this.resume(),C=this.stack[this.stack.length-1];C.lang=k}function x(){const k=this.resume(),C=this.stack[this.stack.length-1];C.meta=k}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function N(){const k=this.resume(),C=this.stack[this.stack.length-1];C.value=k.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const k=this.resume(),C=this.stack[this.stack.length-1];C.value=k.replace(/(\r?\n|\r)$/g,"")}function A(k){const C=this.resume(),D=this.stack[this.stack.length-1];D.label=C,D.identifier=Pe(this.sliceSerialize(k)).toLowerCase()}function E(){const k=this.resume(),C=this.stack[this.stack.length-1];C.title=k}function O(){const k=this.resume(),C=this.stack[this.stack.length-1];C.url=k}function $(k){const C=this.stack[this.stack.length-1];if(!C.depth){const D=this.sliceSerialize(k).length;C.depth=D}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function H(k){const C=this.stack[this.stack.length-1];C.depth=this.sliceSerialize(k).codePointAt(0)===61?1:2}function U(){this.data.setextHeadingSlurpLineEnding=void 0}function G(k){const D=this.stack[this.stack.length-1].children;let V=D[D.length-1];(!V||V.type!=="text")&&(V=ut(),V.position={start:qe(k.start),end:void 0},D.push(V)),this.stack.push(V)}function j(k){const C=this.stack.pop();C.value+=this.sliceSerialize(k),C.position.end=qe(k.end)}function T(k){const C=this.stack[this.stack.length-1];if(this.data.atHardBreak){const D=C.children[C.children.length-1];D.position.end=qe(k.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(C.type)&&(G.call(this,k),j.call(this,k))}function P(){this.data.atHardBreak=!0}function z(){const k=this.resume(),C=this.stack[this.stack.length-1];C.value=k}function I(){const k=this.resume(),C=this.stack[this.stack.length-1];C.value=k}function _(){const k=this.resume(),C=this.stack[this.stack.length-1];C.value=k}function ee(){const k=this.stack[this.stack.length-1];if(this.data.inReference){const C=this.data.referenceType||"shortcut";k.type+="Reference",k.referenceType=C,delete k.url,delete k.title}else delete k.identifier,delete k.label;this.data.referenceType=void 0}function le(){const k=this.stack[this.stack.length-1];if(this.data.inReference){const C=this.data.referenceType||"shortcut";k.type+="Reference",k.referenceType=C,delete k.url,delete k.title}else delete k.identifier,delete k.label;this.data.referenceType=void 0}function me(k){const C=this.sliceSerialize(k),D=this.stack[this.stack.length-2];D.label=fo(C),D.identifier=Pe(C).toLowerCase()}function Te(){const k=this.stack[this.stack.length-1],C=this.resume(),D=this.stack[this.stack.length-1];if(this.data.inReference=!0,D.type==="link"){const V=k.children;D.children=V}else D.alt=C}function p(){const k=this.resume(),C=this.stack[this.stack.length-1];C.url=k}function fe(){const k=this.resume(),C=this.stack[this.stack.length-1];C.title=k}function Ae(){this.data.inReference=void 0}function f(){this.data.referenceType="collapsed"}function re(k){const C=this.resume(),D=this.stack[this.stack.length-1];D.label=C,D.identifier=Pe(this.sliceSerialize(k)).toLowerCase(),this.data.referenceType="full"}function ze(k){this.data.characterReferenceType=k.type}function ie(k){const C=this.sliceSerialize(k),D=this.data.characterReferenceType;let V;D?(V=xi(C,D==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):V=Fn(C);const Q=this.stack[this.stack.length-1];Q.value+=V}function Ue(k){const C=this.stack.pop();C.position.end=qe(k.end)}function Ee(k){j.call(this,k);const C=this.stack[this.stack.length-1];C.url=this.sliceSerialize(k)}function he(k){j.call(this,k);const C=this.stack[this.stack.length-1];C.url="mailto:"+this.sliceSerialize(k)}function _e(){return{type:"blockquote",children:[]}}function Qe(){return{type:"code",lang:null,meta:null,value:""}}function Kt(){return{type:"inlineCode",value:""}}function Gt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ce(){return{type:"emphasis",children:[]}}function It(){return{type:"heading",depth:0,children:[]}}function y(){return{type:"break"}}function R(){return{type:"html",value:""}}function B(){return{type:"image",title:null,url:"",alt:null}}function ge(){return{type:"link",title:null,url:"",children:[]}}function Xe(k){return{type:"list",ordered:k.type==="listOrdered",start:null,spread:k._spread,children:[]}}function M(k){return{type:"listItem",spread:k._spread,checked:null,children:[]}}function Me(){return{type:"paragraph",children:[]}}function Re(){return{type:"strong",children:[]}}function ut(){return{type:"text",value:""}}function Z(){return{type:"thematicBreak"}}}function qe(e){return{line:e.line,column:e.column,offset:e.offset}}function Si(e,n){let r=-1;for(;++r<n.length;){const i=n[r];Array.isArray(i)?Si(e,i):vo(e,i)}}function vo(e,n){let r;for(r in n)if(Ci.call(n,r))switch(r){case"canContainEols":{const i=n[r];i&&e[r].push(...i);break}case"transforms":{const i=n[r];i&&e[r].push(...i);break}case"enter":case"exit":{const i=n[r];i&&Object.assign(e[r],i);break}}}function fr(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+yt({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+yt({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+yt({start:n.start,end:n.end})+") is still open")}function jo(e){const n=this;n.parser=r;function r(i){return yo(i,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function wo(e,n){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!0)};return e.patch(n,r),e.applyData(n,r)}function No(e,n){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(n,r),[e.applyData(n,r),{type:"text",value:`
`}]}function Co(e,n){const r=n.value?n.value+`
`:"",i={};n.lang&&(i.className=["language-"+n.lang]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:r}]};return n.meta&&(s.data={meta:n.meta}),e.patch(n,s),s=e.applyData(n,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(n,s),s}function So(e,n){const r={type:"element",tagName:"del",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Ao(e,n){const r={type:"element",tagName:"em",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Eo(e,n){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(n.identifier).toUpperCase(),s=dt(i.toLowerCase()),a=e.footnoteOrder.indexOf(i);let l,o=e.footnoteCounts.get(i);o===void 0?(o=0,e.footnoteOrder.push(i),l=e.footnoteOrder.length):l=a+1,o+=1,e.footnoteCounts.set(i,o);const c={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(n,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(n,d),e.applyData(n,d)}function Ro(e,n){const r={type:"element",tagName:"h"+n.depth,properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Io(e,n){if(e.options.allowDangerousHtml){const r={type:"raw",value:n.value};return e.patch(n,r),e.applyData(n,r)}}function Ai(e,n){const r=n.referenceType;let i="]";if(r==="collapsed"?i+="[]":r==="full"&&(i+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+i}];const s=e.all(n),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=i:s.push({type:"text",value:i}),s}function To(e,n){const r=String(n.identifier).toUpperCase(),i=e.definitionById.get(r);if(!i)return Ai(e,n);const s={src:dt(i.url||""),alt:n.alt};i.title!==null&&i.title!==void 0&&(s.title=i.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(n,a),e.applyData(n,a)}function Po(e,n){const r={src:dt(n.url)};n.alt!==null&&n.alt!==void 0&&(r.alt=n.alt),n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(n,i),e.applyData(n,i)}function zo(e,n){const r={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};e.patch(n,r);const i={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(n,i),e.applyData(n,i)}function Do(e,n){const r=String(n.identifier).toUpperCase(),i=e.definitionById.get(r);if(!i)return Ai(e,n);const s={href:dt(i.url||"")};i.title!==null&&i.title!==void 0&&(s.title=i.title);const a={type:"element",tagName:"a",properties:s,children:e.all(n)};return e.patch(n,a),e.applyData(n,a)}function Lo(e,n){const r={href:dt(n.url)};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"a",properties:r,children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function Fo(e,n,r){const i=e.all(n),s=r?_o(r):Ei(n),a={},l=[];if(typeof n.checked=="boolean"){const m=i[0];let u;m&&m.type==="element"&&m.tagName==="p"?u=m:(u={type:"element",tagName:"p",properties:{},children:[]},i.unshift(u)),u.children.length>0&&u.children.unshift({type:"text",value:" "}),u.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<i.length;){const m=i[o];(s||o!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const c=i[i.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return e.patch(n,d),e.applyData(n,d)}function _o(e){let n=!1;if(e.type==="list"){n=e.spread||!1;const r=e.children;let i=-1;for(;!n&&++i<r.length;)n=Ei(r[i])}return n}function Ei(e){const n=e.spread;return n??e.children.length>1}function Mo(e,n){const r={},i=e.all(n);let s=-1;for(typeof n.start=="number"&&n.start!==1&&(r.start=n.start);++s<i.length;){const l=i[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const a={type:"element",tagName:n.ordered?"ol":"ul",properties:r,children:e.wrap(i,!0)};return e.patch(n,a),e.applyData(n,a)}function Oo(e,n){const r={type:"element",tagName:"p",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function $o(e,n){const r={type:"root",children:e.wrap(e.all(n))};return e.patch(n,r),e.applyData(n,r)}function Bo(e,n){const r={type:"element",tagName:"strong",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Ho(e,n){const r=e.all(n),i=r.shift(),s=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(n.children[0],l),s.push(l)}if(r.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},o=Tn(n.children[1]),c=li(n.children[n.children.length-1]);o&&c&&(l.position={start:o,end:c}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(n,a),e.applyData(n,a)}function Uo(e,n,r){const i=r?r.children:void 0,a=(i?i.indexOf(n):1)===0?"th":"td",l=r&&r.type==="table"?r.align:void 0,o=l?l.length:n.children.length;let c=-1;const d=[];for(;++c<o;){const u=n.children[c],g={},h=l?l[c]:void 0;h&&(g.align=h);let x={type:"element",tagName:a,properties:g,children:[]};u&&(x.children=e.all(u),e.patch(u,x),x=e.applyData(u,x)),d.push(x)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(n,m),e.applyData(n,m)}function qo(e,n){const r={type:"element",tagName:"td",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}const br=9,yr=32;function Vo(e){const n=String(e),r=/\r?\n|\r/g;let i=r.exec(n),s=0;const a=[];for(;i;)a.push(kr(n.slice(s,i.index),s>0,!0),i[0]),s=i.index+i[0].length,i=r.exec(n);return a.push(kr(n.slice(s),s>0,!1)),a.join("")}function kr(e,n,r){let i=0,s=e.length;if(n){let a=e.codePointAt(i);for(;a===br||a===yr;)i++,a=e.codePointAt(i)}if(r){let a=e.codePointAt(s-1);for(;a===br||a===yr;)s--,a=e.codePointAt(s-1)}return s>i?e.slice(i,s):""}function Wo(e,n){const r={type:"text",value:Vo(String(n.value))};return e.patch(n,r),e.applyData(n,r)}function Ko(e,n){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(n,r),e.applyData(n,r)}const Go={blockquote:wo,break:No,code:Co,delete:So,emphasis:Ao,footnoteReference:Eo,heading:Ro,html:Io,imageReference:To,image:Po,inlineCode:zo,linkReference:Do,link:Lo,listItem:Fo,list:Mo,paragraph:Oo,root:$o,strong:Bo,table:Ho,tableCell:qo,tableRow:Uo,text:Wo,thematicBreak:Ko,toml:Tt,yaml:Tt,definition:Tt,footnoteDefinition:Tt};function Tt(){}const Ri=-1,qt=0,vt=1,Ot=2,Mn=3,On=4,$n=5,Bn=6,Ii=7,Ti=8,vr=typeof self=="object"?self:globalThis,Yo=(e,n)=>{const r=(s,a)=>(e.set(a,s),s),i=s=>{if(e.has(s))return e.get(s);const[a,l]=n[s];switch(a){case qt:case Ri:return r(l,s);case vt:{const o=r([],s);for(const c of l)o.push(i(c));return o}case Ot:{const o=r({},s);for(const[c,d]of l)o[i(c)]=i(d);return o}case Mn:return r(new Date(l),s);case On:{const{source:o,flags:c}=l;return r(new RegExp(o,c),s)}case $n:{const o=r(new Map,s);for(const[c,d]of l)o.set(i(c),i(d));return o}case Bn:{const o=r(new Set,s);for(const c of l)o.add(i(c));return o}case Ii:{const{name:o,message:c}=l;return r(new vr[o](c),s)}case Ti:return r(BigInt(l),s);case"BigInt":return r(Object(BigInt(l)),s);case"ArrayBuffer":return r(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:o}=new Uint8Array(l);return r(new DataView(o),l)}}return r(new vr[a](l),s)};return i},jr=e=>Yo(new Map,e)(0),et="",{toString:Qo}={},{keys:Xo}=Object,bt=e=>{const n=typeof e;if(n!=="object"||!e)return[qt,n];const r=Qo.call(e).slice(8,-1);switch(r){case"Array":return[vt,et];case"Object":return[Ot,et];case"Date":return[Mn,et];case"RegExp":return[On,et];case"Map":return[$n,et];case"Set":return[Bn,et];case"DataView":return[vt,r]}return r.includes("Array")?[vt,r]:r.includes("Error")?[Ii,r]:[Ot,r]},Pt=([e,n])=>e===qt&&(n==="function"||n==="symbol"),Jo=(e,n,r,i)=>{const s=(l,o)=>{const c=i.push(l)-1;return r.set(o,c),c},a=l=>{if(r.has(l))return r.get(l);let[o,c]=bt(l);switch(o){case qt:{let m=l;switch(c){case"bigint":o=Ti,m=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return s([Ri],l)}return s([o,m],l)}case vt:{if(c){let g=l;return c==="DataView"?g=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(l)),s([c,[...g]],l)}const m=[],u=s([o,m],l);for(const g of l)m.push(a(g));return u}case Ot:{if(c)switch(c){case"BigInt":return s([c,l.toString()],l);case"Boolean":case"Number":case"String":return s([c,l.valueOf()],l)}if(n&&"toJSON"in l)return a(l.toJSON());const m=[],u=s([o,m],l);for(const g of Xo(l))(e||!Pt(bt(l[g])))&&m.push([a(g),a(l[g])]);return u}case Mn:return s([o,l.toISOString()],l);case On:{const{source:m,flags:u}=l;return s([o,{source:m,flags:u}],l)}case $n:{const m=[],u=s([o,m],l);for(const[g,h]of l)(e||!(Pt(bt(g))||Pt(bt(h))))&&m.push([a(g),a(h)]);return u}case Bn:{const m=[],u=s([o,m],l);for(const g of l)(e||!Pt(bt(g)))&&m.push(a(g));return u}}const{message:d}=l;return s([o,{name:c,message:d}],l)};return a},wr=(e,{json:n,lossy:r}={})=>{const i=[];return Jo(!(n||r),!!n,new Map,i)(e),i},$t=typeof structuredClone=="function"?(e,n)=>n&&("json"in n||"lossy"in n)?jr(wr(e,n)):structuredClone(e):(e,n)=>jr(wr(e,n));function Zo(e,n){const r=[{type:"text",value:"↩"}];return n>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),r}function ec(e,n){return"Back to reference "+(e+1)+(n>1?"-"+n:"")}function tc(e){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||Zo,i=e.options.footnoteBackLabel||ec,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const m=e.all(d),u=String(d.identifier).toUpperCase(),g=dt(u.toLowerCase());let h=0;const x=[],b=e.footnoteCounts.get(u);for(;b!==void 0&&++h<=b;){x.length>0&&x.push({type:"text",value:" "});let A=typeof r=="string"?r:r(c,h);typeof A=="string"&&(A={type:"text",value:A}),x.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+g+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,h),className:["data-footnote-backref"]},children:Array.isArray(A)?A:[A]})}const N=m[m.length-1];if(N&&N.type==="element"&&N.tagName==="p"){const A=N.children[N.children.length-1];A&&A.type==="text"?A.value+=" ":N.children.push({type:"text",value:" "}),N.children.push(...x)}else m.push(...x);const v={type:"element",tagName:"li",properties:{id:n+"fn-"+g},children:e.wrap(m,!0)};e.patch(d,v),o.push(v)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...$t(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const Vt=function(e){if(e==null)return sc;if(typeof e=="function")return Wt(e);if(typeof e=="object")return Array.isArray(e)?nc(e):rc(e);if(typeof e=="string")return ic(e);throw new Error("Expected function, string, or object as test")};function nc(e){const n=[];let r=-1;for(;++r<e.length;)n[r]=Vt(e[r]);return Wt(i);function i(...s){let a=-1;for(;++a<n.length;)if(n[a].apply(this,s))return!0;return!1}}function rc(e){const n=e;return Wt(r);function r(i){const s=i;let a;for(a in e)if(s[a]!==n[a])return!1;return!0}}function ic(e){return Wt(n);function n(r){return r&&r.type===e}}function Wt(e){return n;function n(r,i,s){return!!(ac(r)&&e.call(this,r,typeof i=="number"?i:void 0,s||void 0))}}function sc(){return!0}function ac(e){return e!==null&&typeof e=="object"&&"type"in e}const Pi=[],lc=!0,jn=!1,oc="skip";function zi(e,n,r,i){let s;typeof n=="function"&&typeof r!="function"?(i=r,r=n):s=n;const a=Vt(s),l=i?-1:1;o(e,void 0,[])();function o(c,d,m){const u=c&&typeof c=="object"?c:{};if(typeof u.type=="string"){const h=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return g;function g(){let h=Pi,x,b,N;if((!n||a(c,d,m[m.length-1]||void 0))&&(h=cc(r(c,m)),h[0]===jn))return h;if("children"in c&&c.children){const v=c;if(v.children&&h[0]!==oc)for(b=(i?v.children.length:-1)+l,N=m.concat(v);b>-1&&b<v.children.length;){const A=v.children[b];if(x=o(A,b,N)(),x[0]===jn)return x;b=typeof x[1]=="number"?x[1]:b+l}}return h}}}function cc(e){return Array.isArray(e)?e:typeof e=="number"?[lc,e]:e==null?Pi:[e]}function Hn(e,n,r,i){let s,a,l;typeof n=="function"&&typeof r!="function"?(a=void 0,l=n,s=r):(a=n,l=r,s=i),zi(e,a,o,s);function o(c,d){const m=d[d.length-1],u=m?m.children.indexOf(c):void 0;return l(c,u,m)}}const wn={}.hasOwnProperty,dc={};function uc(e,n){const r=n||dc,i=new Map,s=new Map,a=new Map,l={...Go,...r.handlers},o={all:d,applyData:hc,definitionById:i,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:c,options:r,patch:mc,wrap:xc};return Hn(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const u=m.type==="definition"?i:s,g=String(m.identifier).toUpperCase();u.has(g)||u.set(g,m)}}),o;function c(m,u){const g=m.type,h=o.handlers[g];if(wn.call(o.handlers,g)&&h)return h(o,m,u);if(o.options.passThrough&&o.options.passThrough.includes(g)){if("children"in m){const{children:b,...N}=m,v=$t(N);return v.children=o.all(m),v}return $t(m)}return(o.options.unknownHandler||gc)(o,m,u)}function d(m){const u=[];if("children"in m){const g=m.children;let h=-1;for(;++h<g.length;){const x=o.one(g[h],m);if(x){if(h&&g[h-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=Nr(x.value)),!Array.isArray(x)&&x.type==="element")){const b=x.children[0];b&&b.type==="text"&&(b.value=Nr(b.value))}Array.isArray(x)?u.push(...x):u.push(x)}}}return u}}function mc(e,n){e.position&&(n.position=Zs(e))}function hc(e,n){let r=n;if(e&&e.data){const i=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof i=="string")if(r.type==="element")r.tagName=i;else{const l="children"in r?r.children:[r];r={type:"element",tagName:i,properties:{},children:l}}r.type==="element"&&a&&Object.assign(r.properties,$t(a)),"children"in r&&r.children&&s!==null&&s!==void 0&&(r.children=s)}return r}function gc(e,n){const r=n.data||{},i="value"in n&&!(wn.call(r,"hProperties")||wn.call(r,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function xc(e,n){const r=[];let i=-1;for(n&&r.push({type:"text",value:`
`});++i<e.length;)i&&r.push({type:"text",value:`
`}),r.push(e[i]);return n&&e.length>0&&r.push({type:"text",value:`
`}),r}function Nr(e){let n=0,r=e.charCodeAt(n);for(;r===9||r===32;)n++,r=e.charCodeAt(n);return e.slice(n)}function Cr(e,n){const r=uc(e,n),i=r.one(e,void 0),s=tc(r),a=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function pc(e,n){return e&&"run"in e?async function(r,i){const s=Cr(r,{file:i,...n});await e.run(s,i)}:function(r,i){return Cr(r,{file:i,...e||n})}}function Sr(e){if(e)throw e}var tn,Ar;function fc(){if(Ar)return tn;Ar=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):n.call(d)==="[object Array]"},a=function(d){if(!d||n.call(d)!=="[object Object]")return!1;var m=e.call(d,"constructor"),u=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!u)return!1;var g;for(g in d);return typeof g>"u"||e.call(d,g)},l=function(d,m){r&&m.name==="__proto__"?r(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},o=function(d,m){if(m==="__proto__")if(e.call(d,m)){if(i)return i(d,m).value}else return;return d[m]};return tn=function c(){var d,m,u,g,h,x,b=arguments[0],N=1,v=arguments.length,A=!1;for(typeof b=="boolean"&&(A=b,b=arguments[1]||{},N=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});N<v;++N)if(d=arguments[N],d!=null)for(m in d)u=o(b,m),g=o(d,m),b!==g&&(A&&g&&(a(g)||(h=s(g)))?(h?(h=!1,x=u&&s(u)?u:[]):x=u&&a(u)?u:{},l(b,{name:m,newValue:c(A,x,g)})):typeof g<"u"&&l(b,{name:m,newValue:g}));return b},tn}var bc=fc();const nn=Zr(bc);function Nn(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function yc(){const e=[],n={run:r,use:i};return n;function r(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);o(null,...s);function o(c,...d){const m=e[++a];let u=-1;if(c){l(c);return}for(;++u<s.length;)(d[u]===null||d[u]===void 0)&&(d[u]=s[u]);s=d,m?kc(m,o)(...d):l(null,...d)}}function i(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),n}}function kc(e,n){let r;return i;function i(...l){const o=e.length>l.length;let c;o&&l.push(s);try{c=e.apply(this,l)}catch(d){const m=d;if(o&&r)throw m;return s(m)}o||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(l,...o){r||(r=!0,n(l,...o))}function a(l){s(null,l)}}const De={basename:vc,dirname:jc,extname:wc,join:Nc,sep:"/"};function vc(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Rt(e);let r=0,i=-1,s=e.length,a;if(n===void 0||n.length===0||n.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){r=s+1;break}}else i<0&&(a=!0,i=s+1);return i<0?"":e.slice(r,i)}if(n===e)return"";let l=-1,o=n.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){r=s+1;break}}else l<0&&(a=!0,l=s+1),o>-1&&(e.codePointAt(s)===n.codePointAt(o--)?o<0&&(i=s):(o=-1,i=l));return r===i?i=l:i<0&&(i=e.length),e.slice(r,i)}function jc(e){if(Rt(e),e.length===0)return".";let n=-1,r=e.length,i;for(;--r;)if(e.codePointAt(r)===47){if(i){n=r;break}}else i||(i=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function wc(e){Rt(e);let n=e.length,r=-1,i=0,s=-1,a=0,l;for(;n--;){const o=e.codePointAt(n);if(o===47){if(l){i=n+1;break}continue}r<0&&(l=!0,r=n+1),o===46?s<0?s=n:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||r<0||a===0||a===1&&s===r-1&&s===i+1?"":e.slice(s,r)}function Nc(...e){let n=-1,r;for(;++n<e.length;)Rt(e[n]),e[n]&&(r=r===void 0?e[n]:r+"/"+e[n]);return r===void 0?".":Cc(r)}function Cc(e){Rt(e);const n=e.codePointAt(0)===47;let r=Sc(e,!n);return r.length===0&&!n&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),n?"/"+r:r}function Sc(e,n){let r="",i=0,s=-1,a=0,l=-1,o,c;for(;++l<=e.length;){if(l<e.length)o=e.codePointAt(l);else{if(o===47)break;o=47}if(o===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(r.length<2||i!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",i=0):(r=r.slice(0,c),i=r.length-1-r.lastIndexOf("/")),s=l,a=0;continue}}else if(r.length>0){r="",i=0,s=l,a=0;continue}}n&&(r=r.length>0?r+"/..":"..",i=2)}else r.length>0?r+="/"+e.slice(s+1,l):r=e.slice(s+1,l),i=l-s-1;s=l,a=0}else o===46&&a>-1?a++:a=-1}return r}function Rt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ac={cwd:Ec};function Ec(){return"/"}function Cn(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Rc(e){if(typeof e=="string")e=new URL(e);else if(!Cn(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return Ic(e)}function Ic(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const n=e.pathname;let r=-1;for(;++r<n.length;)if(n.codePointAt(r)===37&&n.codePointAt(r+1)===50){const i=n.codePointAt(r+2);if(i===70||i===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(n)}const rn=["history","path","basename","stem","extname","dirname"];class Di{constructor(n){let r;n?Cn(n)?r={path:n}:typeof n=="string"||Tc(n)?r={value:n}:r=n:r={},this.cwd="cwd"in r?"":Ac.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<rn.length;){const a=rn[i];a in r&&r[a]!==void 0&&r[a]!==null&&(this[a]=a==="history"?[...r[a]]:r[a])}let s;for(s in r)rn.includes(s)||(this[s]=r[s])}get basename(){return typeof this.path=="string"?De.basename(this.path):void 0}set basename(n){an(n,"basename"),sn(n,"basename"),this.path=De.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?De.dirname(this.path):void 0}set dirname(n){Er(this.basename,"dirname"),this.path=De.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?De.extname(this.path):void 0}set extname(n){if(sn(n,"extname"),Er(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=De.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){Cn(n)&&(n=Rc(n)),an(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?De.basename(this.path,this.extname):void 0}set stem(n){an(n,"stem"),sn(n,"stem"),this.path=De.join(this.dirname||"",n+(this.extname||""))}fail(n,r,i){const s=this.message(n,r,i);throw s.fatal=!0,s}info(n,r,i){const s=this.message(n,r,i);return s.fatal=void 0,s}message(n,r,i){const s=new ue(n,r,i);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function sn(e,n){if(e&&e.includes(De.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+De.sep+"`")}function an(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function Er(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function Tc(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Pc=function(e){const i=this.constructor.prototype,s=i[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,i),a},zc={}.hasOwnProperty;class Un extends Pc{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=yc()}copy(){const n=new Un;let r=-1;for(;++r<this.attachers.length;){const i=this.attachers[r];n.use(...i)}return n.data(nn(!0,{},this.namespace)),n}data(n,r){return typeof n=="string"?arguments.length===2?(cn("data",this.frozen),this.namespace[n]=r,this):zc.call(this.namespace,n)&&this.namespace[n]||void 0:n?(cn("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const s=r.call(n,...i);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const r=zt(n),i=this.parser||this.Parser;return ln("parse",i),i(String(r),r)}process(n,r){const i=this;return this.freeze(),ln("process",this.parser||this.Parser),on("process",this.compiler||this.Compiler),r?s(void 0,r):new Promise(s);function s(a,l){const o=zt(n),c=i.parse(o);i.run(c,o,function(m,u,g){if(m||!u||!g)return d(m);const h=u,x=i.stringify(h,g);Fc(x)?g.value=x:g.result=x,d(m,g)});function d(m,u){m||!u?l(m):a?a(u):r(void 0,u)}}}processSync(n){let r=!1,i;return this.freeze(),ln("processSync",this.parser||this.Parser),on("processSync",this.compiler||this.Compiler),this.process(n,s),Ir("processSync","process",r),i;function s(a,l){r=!0,Sr(a),i=l}}run(n,r,i){Rr(n),this.freeze();const s=this.transformers;return!i&&typeof r=="function"&&(i=r,r=void 0),i?a(void 0,i):new Promise(a);function a(l,o){const c=zt(r);s.run(n,c,d);function d(m,u,g){const h=u||n;m?o(m):l?l(h):i(void 0,h,g)}}}runSync(n,r){let i=!1,s;return this.run(n,r,a),Ir("runSync","run",i),s;function a(l,o){Sr(l),s=o,i=!0}}stringify(n,r){this.freeze();const i=zt(r),s=this.compiler||this.Compiler;return on("stringify",s),Rr(n),s(n,i)}use(n,...r){const i=this.attachers,s=this.namespace;if(cn("use",this.frozen),n!=null)if(typeof n=="function")c(n,r);else if(typeof n=="object")Array.isArray(n)?o(n):l(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function a(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...u]=d;c(m,u)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(d.plugins),d.settings&&(s.settings=nn(!0,s.settings,d.settings))}function o(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const u=d[m];a(u)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,m){let u=-1,g=-1;for(;++u<i.length;)if(i[u][0]===d){g=u;break}if(g===-1)i.push([d,...m]);else if(m.length>0){let[h,...x]=m;const b=i[g][1];Nn(b)&&Nn(h)&&(h=nn(!0,b,h)),i[g]=[d,h,...x]}}}}const Dc=new Un().freeze();function ln(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function on(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function cn(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Rr(e){if(!Nn(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ir(e,n,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function zt(e){return Lc(e)?e:new Di(e)}function Lc(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Fc(e){return typeof e=="string"||_c(e)}function _c(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Mc="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Tr=[],Pr={allowDangerousHtml:!0},Oc=/^(https?|ircs?|mailto|xmpp)$/i,$c=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function at(e){const n=Bc(e),r=Hc(e);return Uc(n.runSync(n.parse(r),r),e)}function Bc(e){const n=e.rehypePlugins||Tr,r=e.remarkPlugins||Tr,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Pr}:Pr;return Dc().use(jo).use(r).use(pc,i).use(n)}function Hc(e){const n=e.children||"",r=new Di;return typeof n=="string"&&(r.value=n),r}function Uc(e,n){const r=n.allowedElements,i=n.allowElement,s=n.components,a=n.disallowedElements,l=n.skipHtml,o=n.unwrapDisallowed,c=n.urlTransform||qc;for(const m of $c)Object.hasOwn(n,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+Mc+m.id,void 0);return Hn(e,d),ia(e,{Fragment:t.Fragment,components:s,ignoreInvalidStyle:!0,jsx:t.jsx,jsxs:t.jsxs,passKeys:!0,passNode:!0});function d(m,u,g){if(m.type==="raw"&&g&&typeof u=="number")return l?g.children.splice(u,1):g.children[u]={type:"text",value:m.value},u;if(m.type==="element"){let h;for(h in Jt)if(Object.hasOwn(Jt,h)&&Object.hasOwn(m.properties,h)){const x=m.properties[h],b=Jt[h];(b===null||b.includes(m.tagName))&&(m.properties[h]=c(String(x||""),h,m))}}if(m.type==="element"){let h=r?!r.includes(m.tagName):a?a.includes(m.tagName):!1;if(!h&&i&&typeof u=="number"&&(h=!i(m,u,g)),h&&g&&typeof u=="number")return o&&m.children?g.children.splice(u,1,...m.children):g.children.splice(u,1),u}}}function qc(e){const n=e.indexOf(":"),r=e.indexOf("?"),i=e.indexOf("#"),s=e.indexOf("/");return n===-1||s!==-1&&n>s||r!==-1&&n>r||i!==-1&&n>i||Oc.test(e.slice(0,n))?e:""}function zr(e,n){const r=String(e);if(typeof n!="string")throw new TypeError("Expected character");let i=0,s=r.indexOf(n);for(;s!==-1;)i++,s=r.indexOf(n,s+n.length);return i}function Vc(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Wc(e,n,r){const s=Vt((r||{}).ignore||[]),a=Kc(n);let l=-1;for(;++l<a.length;)zi(e,"text",o);function o(d,m){let u=-1,g;for(;++u<m.length;){const h=m[u],x=g?g.children:void 0;if(s(h,x?x.indexOf(h):void 0,g))return;g=h}if(g)return c(d,m)}function c(d,m){const u=m[m.length-1],g=a[l][0],h=a[l][1];let x=0;const N=u.children.indexOf(d);let v=!1,A=[];g.lastIndex=0;let E=g.exec(d.value);for(;E;){const O=E.index,$={index:E.index,input:E.input,stack:[...m,d]};let w=h(...E,$);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?g.lastIndex=O+1:(x!==O&&A.push({type:"text",value:d.value.slice(x,O)}),Array.isArray(w)?A.push(...w):w&&A.push(w),x=O+E[0].length,v=!0),!g.global)break;E=g.exec(d.value)}return v?(x<d.value.length&&A.push({type:"text",value:d.value.slice(x)}),u.children.splice(N,1,...A)):A=[d],N+A.length}}function Kc(e){const n=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<r.length;){const s=r[i];n.push([Gc(s[0]),Yc(s[1])])}return n}function Gc(e){return typeof e=="string"?new RegExp(Vc(e),"g"):e}function Yc(e){return typeof e=="function"?e:function(){return e}}const dn="phrasing",un=["autolink","link","image","label"];function Qc(){return{transforms:[rd],enter:{literalAutolink:Jc,literalAutolinkEmail:mn,literalAutolinkHttp:mn,literalAutolinkWww:mn},exit:{literalAutolink:nd,literalAutolinkEmail:td,literalAutolinkHttp:Zc,literalAutolinkWww:ed}}}function Xc(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:dn,notInConstruct:un},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:dn,notInConstruct:un},{character:":",before:"[ps]",after:"\\/",inConstruct:dn,notInConstruct:un}]}}function Jc(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function mn(e){this.config.enter.autolinkProtocol.call(this,e)}function Zc(e){this.config.exit.autolinkProtocol.call(this,e)}function ed(e){this.config.exit.data.call(this,e);const n=this.stack[this.stack.length-1];n.type,n.url="http://"+this.sliceSerialize(e)}function td(e){this.config.exit.autolinkEmail.call(this,e)}function nd(e){this.exit(e)}function rd(e){Wc(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,id],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,sd]],{ignore:["link","linkReference"]})}function id(e,n,r,i,s){let a="";if(!Li(s)||(/^w/i.test(n)&&(r=n+r,n="",a="http://"),!ad(r)))return!1;const l=ld(r+i);if(!l[0])return!1;const o={type:"link",title:null,url:a+n+l[0],children:[{type:"text",value:n+l[0]}]};return l[1]?[o,{type:"text",value:l[1]}]:o}function sd(e,n,r,i){return!Li(i,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+r,children:[{type:"text",value:n+"@"+r}]}}function ad(e){const n=e.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function ld(e){const n=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!n)return[e,void 0];e=e.slice(0,n.index);let r=n[0],i=r.indexOf(")");const s=zr(e,"(");let a=zr(e,")");for(;i!==-1&&s>a;)e+=r.slice(0,i+1),r=r.slice(i+1),i=r.indexOf(")"),a++;return[e,r]}function Li(e,n){const r=e.input.charCodeAt(e.index-1);return(e.index===0||Ge(r)||Ht(r))&&(!n||r!==47)}Fi.peek=pd;function od(){this.buffer()}function cd(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function dd(){this.buffer()}function ud(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function md(e){const n=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Pe(this.sliceSerialize(e)).toLowerCase(),r.label=n}function hd(e){this.exit(e)}function gd(e){const n=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Pe(this.sliceSerialize(e)).toLowerCase(),r.label=n}function xd(e){this.exit(e)}function pd(){return"["}function Fi(e,n,r,i){const s=r.createTracker(i);let a=s.move("[^");const l=r.enter("footnoteReference"),o=r.enter("reference");return a+=s.move(r.safe(r.associationId(e),{after:"]",before:a})),o(),l(),a+=s.move("]"),a}function fd(){return{enter:{gfmFootnoteCallString:od,gfmFootnoteCall:cd,gfmFootnoteDefinitionLabelString:dd,gfmFootnoteDefinition:ud},exit:{gfmFootnoteCallString:md,gfmFootnoteCall:hd,gfmFootnoteDefinitionLabelString:gd,gfmFootnoteDefinition:xd}}}function bd(e){let n=!1;return e&&e.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:r,footnoteReference:Fi},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(i,s,a,l){const o=a.createTracker(l);let c=o.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return c+=o.move(a.safe(a.associationId(i),{before:c,after:"]"})),m(),c+=o.move("]:"),i.children&&i.children.length>0&&(o.shift(4),c+=o.move((n?`
`:" ")+a.indentLines(a.containerFlow(i,o.current()),n?_i:yd))),d(),c}}function yd(e,n,r){return n===0?e:_i(e,n,r)}function _i(e,n,r){return(r?"":"    ")+e}const kd=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Mi.peek=Cd;function vd(){return{canContainEols:["delete"],enter:{strikethrough:wd},exit:{strikethrough:Nd}}}function jd(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:kd}],handlers:{delete:Mi}}}function wd(e){this.enter({type:"delete",children:[]},e)}function Nd(e){this.exit(e)}function Mi(e,n,r,i){const s=r.createTracker(i),a=r.enter("strikethrough");let l=s.move("~~");return l+=r.containerPhrasing(e,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function Cd(){return"~"}function Sd(e){return e.length}function Ad(e,n){const r=n||{},i=(r.align||[]).concat(),s=r.stringLength||Sd,a=[],l=[],o=[],c=[];let d=0,m=-1;for(;++m<e.length;){const b=[],N=[];let v=-1;for(e[m].length>d&&(d=e[m].length);++v<e[m].length;){const A=Ed(e[m][v]);if(r.alignDelimiters!==!1){const E=s(A);N[v]=E,(c[v]===void 0||E>c[v])&&(c[v]=E)}b.push(A)}l[m]=b,o[m]=N}let u=-1;if(typeof i=="object"&&"length"in i)for(;++u<d;)a[u]=Dr(i[u]);else{const b=Dr(i);for(;++u<d;)a[u]=b}u=-1;const g=[],h=[];for(;++u<d;){const b=a[u];let N="",v="";b===99?(N=":",v=":"):b===108?N=":":b===114&&(v=":");let A=r.alignDelimiters===!1?1:Math.max(1,c[u]-N.length-v.length);const E=N+"-".repeat(A)+v;r.alignDelimiters!==!1&&(A=N.length+A+v.length,A>c[u]&&(c[u]=A),h[u]=A),g[u]=E}l.splice(1,0,g),o.splice(1,0,h),m=-1;const x=[];for(;++m<l.length;){const b=l[m],N=o[m];u=-1;const v=[];for(;++u<d;){const A=b[u]||"";let E="",O="";if(r.alignDelimiters!==!1){const $=c[u]-(N[u]||0),w=a[u];w===114?E=" ".repeat($):w===99?$%2?(E=" ".repeat($/2+.5),O=" ".repeat($/2-.5)):(E=" ".repeat($/2),O=E):O=" ".repeat($)}r.delimiterStart!==!1&&!u&&v.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&A==="")&&(r.delimiterStart!==!1||u)&&v.push(" "),r.alignDelimiters!==!1&&v.push(E),v.push(A),r.alignDelimiters!==!1&&v.push(O),r.padding!==!1&&v.push(" "),(r.delimiterEnd!==!1||u!==d-1)&&v.push("|")}x.push(r.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return x.join(`
`)}function Ed(e){return e==null?"":String(e)}function Dr(e){const n=typeof e=="string"?e.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function Rd(e,n,r,i){const s=r.enter("blockquote"),a=r.createTracker(i);a.move("> "),a.shift(2);const l=r.indentLines(r.containerFlow(e,a.current()),Id);return s(),l}function Id(e,n,r){return">"+(r?"":" ")+e}function Td(e,n){return Lr(e,n.inConstruct,!0)&&!Lr(e,n.notInConstruct,!1)}function Lr(e,n,r){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return r;let i=-1;for(;++i<n.length;)if(e.includes(n[i]))return!0;return!1}function Fr(e,n,r,i){let s=-1;for(;++s<r.unsafe.length;)if(r.unsafe[s].character===`
`&&Td(r.stack,r.unsafe[s]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function Pd(e,n){const r=String(e);let i=r.indexOf(n),s=i,a=0,l=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===s?++a>l&&(l=a):a=1,s=i+n.length,i=r.indexOf(n,s);return l}function zd(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Dd(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function Ld(e,n,r,i){const s=Dd(r),a=e.value||"",l=s==="`"?"GraveAccent":"Tilde";if(zd(e,r)){const u=r.enter("codeIndented"),g=r.indentLines(a,Fd);return u(),g}const o=r.createTracker(i),c=s.repeat(Math.max(Pd(a,s)+1,3)),d=r.enter("codeFenced");let m=o.move(c);if(e.lang){const u=r.enter(`codeFencedLang${l}`);m+=o.move(r.safe(e.lang,{before:m,after:" ",encode:["`"],...o.current()})),u()}if(e.lang&&e.meta){const u=r.enter(`codeFencedMeta${l}`);m+=o.move(" "),m+=o.move(r.safe(e.meta,{before:m,after:`
`,encode:["`"],...o.current()})),u()}return m+=o.move(`
`),a&&(m+=o.move(a+`
`)),m+=o.move(c),d(),m}function Fd(e,n,r){return(r?"":"    ")+e}function qn(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function _d(e,n,r,i){const s=qn(r),a=s==='"'?"Quote":"Apostrophe",l=r.enter("definition");let o=r.enter("label");const c=r.createTracker(i);let d=c.move("[");return d+=c.move(r.safe(r.associationId(e),{before:d,after:"]",...c.current()})),d+=c.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=r.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(r.safe(e.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(o=r.enter("destinationRaw"),d+=c.move(r.safe(e.url,{before:d,after:e.title?" ":`
`,...c.current()}))),o(),e.title&&(o=r.enter(`title${a}`),d+=c.move(" "+s),d+=c.move(r.safe(e.title,{before:d,after:s,...c.current()})),d+=c.move(s),o()),l(),d}function Md(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function Nt(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Bt(e,n,r){const i=st(e),s=st(n);return i===void 0?s===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Oi.peek=Od;function Oi(e,n,r,i){const s=Md(r),a=r.enter("emphasis"),l=r.createTracker(i),o=l.move(s);let c=l.move(r.containerPhrasing(e,{after:s,before:o,...l.current()}));const d=c.charCodeAt(0),m=Bt(i.before.charCodeAt(i.before.length-1),d,s);m.inside&&(c=Nt(d)+c.slice(1));const u=c.charCodeAt(c.length-1),g=Bt(i.after.charCodeAt(0),u,s);g.inside&&(c=c.slice(0,-1)+Nt(u));const h=l.move(s);return a(),r.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},o+c+h}function Od(e,n,r){return r.options.emphasis||"*"}function $d(e,n){let r=!1;return Hn(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return r=!0,jn}),!!((!e.depth||e.depth<3)&&Ln(e)&&(n.options.setext||r))}function Bd(e,n,r,i){const s=Math.max(Math.min(6,e.depth||1),1),a=r.createTracker(i);if($d(e,r)){const m=r.enter("headingSetext"),u=r.enter("phrasing"),g=r.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return u(),m(),g+`
`+(s===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const l="#".repeat(s),o=r.enter("headingAtx"),c=r.enter("phrasing");a.move(l+" ");let d=r.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Nt(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,r.options.closeAtx&&(d+=" "+l),c(),o(),d}$i.peek=Hd;function $i(e){return e.value||""}function Hd(){return"<"}Bi.peek=Ud;function Bi(e,n,r,i){const s=qn(r),a=s==='"'?"Quote":"Apostrophe",l=r.enter("image");let o=r.enter("label");const c=r.createTracker(i);let d=c.move("![");return d+=c.move(r.safe(e.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=r.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(r.safe(e.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(o=r.enter("destinationRaw"),d+=c.move(r.safe(e.url,{before:d,after:e.title?" ":")",...c.current()}))),o(),e.title&&(o=r.enter(`title${a}`),d+=c.move(" "+s),d+=c.move(r.safe(e.title,{before:d,after:s,...c.current()})),d+=c.move(s),o()),d+=c.move(")"),l(),d}function Ud(){return"!"}Hi.peek=qd;function Hi(e,n,r,i){const s=e.referenceType,a=r.enter("imageReference");let l=r.enter("label");const o=r.createTracker(i);let c=o.move("![");const d=r.safe(e.alt,{before:c,after:"]",...o.current()});c+=o.move(d+"]["),l();const m=r.stack;r.stack=[],l=r.enter("reference");const u=r.safe(r.associationId(e),{before:c,after:"]",...o.current()});return l(),r.stack=m,a(),s==="full"||!d||d!==u?c+=o.move(u+"]"):s==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function qd(){return"!"}Ui.peek=Vd;function Ui(e,n,r){let i=e.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(i);)s+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++a<r.unsafe.length;){const l=r.unsafe[a],o=r.compilePattern(l);let c;if(l.atBreak)for(;c=o.exec(i);){let d=c.index;i.charCodeAt(d)===10&&i.charCodeAt(d-1)===13&&d--,i=i.slice(0,d)+" "+i.slice(c.index+1)}}return s+i+s}function Vd(){return"`"}function qi(e,n){const r=Ln(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Vi.peek=Wd;function Vi(e,n,r,i){const s=qn(r),a=s==='"'?"Quote":"Apostrophe",l=r.createTracker(i);let o,c;if(qi(e,r)){const m=r.stack;r.stack=[],o=r.enter("autolink");let u=l.move("<");return u+=l.move(r.containerPhrasing(e,{before:u,after:">",...l.current()})),u+=l.move(">"),o(),r.stack=m,u}o=r.enter("link"),c=r.enter("label");let d=l.move("[");return d+=l.move(r.containerPhrasing(e,{before:d,after:"](",...l.current()})),d+=l.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=r.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(r.safe(e.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(c=r.enter("destinationRaw"),d+=l.move(r.safe(e.url,{before:d,after:e.title?" ":")",...l.current()}))),c(),e.title&&(c=r.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(r.safe(e.title,{before:d,after:s,...l.current()})),d+=l.move(s),c()),d+=l.move(")"),o(),d}function Wd(e,n,r){return qi(e,r)?"<":"["}Wi.peek=Kd;function Wi(e,n,r,i){const s=e.referenceType,a=r.enter("linkReference");let l=r.enter("label");const o=r.createTracker(i);let c=o.move("[");const d=r.containerPhrasing(e,{before:c,after:"]",...o.current()});c+=o.move(d+"]["),l();const m=r.stack;r.stack=[],l=r.enter("reference");const u=r.safe(r.associationId(e),{before:c,after:"]",...o.current()});return l(),r.stack=m,a(),s==="full"||!d||d!==u?c+=o.move(u+"]"):s==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function Kd(){return"["}function Vn(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function Gd(e){const n=Vn(e),r=e.options.bulletOther;if(!r)return n==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+r+"`) to be different");return r}function Yd(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function Ki(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function Qd(e,n,r,i){const s=r.enter("list"),a=r.bulletCurrent;let l=e.ordered?Yd(r):Vn(r);const o=e.ordered?l==="."?")":".":Gd(r);let c=n&&r.bulletLastUsed?l===r.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(c=!0),Ki(r)===l&&m){let u=-1;for(;++u<e.children.length;){const g=e.children[u];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(l=o),r.bulletCurrent=l;const d=r.containerFlow(e,i);return r.bulletLastUsed=l,r.bulletCurrent=a,s(),d}function Xd(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function Jd(e,n,r,i){const s=Xd(r);let a=r.bulletCurrent||Vn(r);n&&n.type==="list"&&n.ordered&&(a=(typeof n.start=="number"&&n.start>-1?n.start:1)+(r.options.incrementListMarker===!1?0:n.children.indexOf(e))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(l=Math.ceil(l/4)*4);const o=r.createTracker(i);o.move(a+" ".repeat(l-a.length)),o.shift(l);const c=r.enter("listItem"),d=r.indentLines(r.containerFlow(e,o.current()),m);return c(),d;function m(u,g,h){return g?(h?"":" ".repeat(l))+u:(h?a:a+" ".repeat(l-a.length))+u}}function Zd(e,n,r,i){const s=r.enter("paragraph"),a=r.enter("phrasing"),l=r.containerPhrasing(e,i);return a(),s(),l}const eu=Vt(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function tu(e,n,r,i){return(e.children.some(function(l){return eu(l)})?r.containerPhrasing:r.containerFlow).call(r,e,i)}function nu(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}Gi.peek=ru;function Gi(e,n,r,i){const s=nu(r),a=r.enter("strong"),l=r.createTracker(i),o=l.move(s+s);let c=l.move(r.containerPhrasing(e,{after:s,before:o,...l.current()}));const d=c.charCodeAt(0),m=Bt(i.before.charCodeAt(i.before.length-1),d,s);m.inside&&(c=Nt(d)+c.slice(1));const u=c.charCodeAt(c.length-1),g=Bt(i.after.charCodeAt(0),u,s);g.inside&&(c=c.slice(0,-1)+Nt(u));const h=l.move(s+s);return a(),r.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},o+c+h}function ru(e,n,r){return r.options.strong||"*"}function iu(e,n,r,i){return r.safe(e.value,i)}function su(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function au(e,n,r){const i=(Ki(r)+(r.options.ruleSpaces?" ":"")).repeat(su(r));return r.options.ruleSpaces?i.slice(0,-1):i}const Yi={blockquote:Rd,break:Fr,code:Ld,definition:_d,emphasis:Oi,hardBreak:Fr,heading:Bd,html:$i,image:Bi,imageReference:Hi,inlineCode:Ui,link:Vi,linkReference:Wi,list:Qd,listItem:Jd,paragraph:Zd,root:tu,strong:Gi,text:iu,thematicBreak:au};function lu(){return{enter:{table:ou,tableData:_r,tableHeader:_r,tableRow:du},exit:{codeText:uu,table:cu,tableData:hn,tableHeader:hn,tableRow:hn}}}function ou(e){const n=e._align;this.enter({type:"table",align:n.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function cu(e){this.exit(e),this.data.inTable=void 0}function du(e){this.enter({type:"tableRow",children:[]},e)}function hn(e){this.exit(e)}function _r(e){this.enter({type:"tableCell",children:[]},e)}function uu(e){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,mu));const r=this.stack[this.stack.length-1];r.type,r.value=n,this.exit(e)}function mu(e,n){return n==="|"?n:e}function hu(e){const n=e||{},r=n.tableCellPadding,i=n.tablePipeAlign,s=n.stringLength,a=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:l,tableCell:c,tableRow:o}};function l(h,x,b,N){return d(m(h,b,N),h.align)}function o(h,x,b,N){const v=u(h,b,N),A=d([v]);return A.slice(0,A.indexOf(`
`))}function c(h,x,b,N){const v=b.enter("tableCell"),A=b.enter("phrasing"),E=b.containerPhrasing(h,{...N,before:a,after:a});return A(),v(),E}function d(h,x){return Ad(h,{align:x,alignDelimiters:i,padding:r,stringLength:s})}function m(h,x,b){const N=h.children;let v=-1;const A=[],E=x.enter("table");for(;++v<N.length;)A[v]=u(N[v],x,b);return E(),A}function u(h,x,b){const N=h.children;let v=-1;const A=[],E=x.enter("tableRow");for(;++v<N.length;)A[v]=c(N[v],h,x,b);return E(),A}function g(h,x,b){let N=Yi.inlineCode(h,x,b);return b.stack.includes("tableCell")&&(N=N.replace(/\|/g,"\\$&")),N}}function gu(){return{exit:{taskListCheckValueChecked:Mr,taskListCheckValueUnchecked:Mr,paragraph:pu}}}function xu(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:fu}}}function Mr(e){const n=this.stack[this.stack.length-2];n.type,n.checked=e.type==="taskListCheckValueChecked"}function pu(e){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const i=r.children[0];if(i&&i.type==="text"){const s=n.children;let a=-1,l;for(;++a<s.length;){const o=s[a];if(o.type==="paragraph"){l=o;break}}l===r&&(i.value=i.value.slice(1),i.value.length===0?r.children.shift():r.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,r.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function fu(e,n,r,i){const s=e.children[0],a=typeof e.checked=="boolean"&&s&&s.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",o=r.createTracker(i);a&&o.move(l);let c=Yi.listItem(e,n,r,{...i,...o.current()});return a&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(m){return m+l}}function bu(){return[Qc(),fd(),vd(),lu(),gu()]}function yu(e){return{extensions:[Xc(),bd(e),jd(),hu(e),xu()]}}const ku={tokenize:Su,partial:!0},Qi={tokenize:Au,partial:!0},Xi={tokenize:Eu,partial:!0},Ji={tokenize:Ru,partial:!0},vu={tokenize:Iu,partial:!0},Zi={name:"wwwAutolink",tokenize:Nu,previous:ts},es={name:"protocolAutolink",tokenize:Cu,previous:ns},He={name:"emailAutolink",tokenize:wu,previous:rs},Fe={};function ju(){return{text:Fe}}let Ke=48;for(;Ke<123;)Fe[Ke]=He,Ke++,Ke===58?Ke=65:Ke===91&&(Ke=97);Fe[43]=He;Fe[45]=He;Fe[46]=He;Fe[95]=He;Fe[72]=[He,es];Fe[104]=[He,es];Fe[87]=[He,Zi];Fe[119]=[He,Zi];function wu(e,n,r){const i=this;let s,a;return l;function l(u){return!Sn(u)||!rs.call(i,i.previous)||Wn(i.events)?r(u):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(u))}function o(u){return Sn(u)?(e.consume(u),o):u===64?(e.consume(u),c):r(u)}function c(u){return u===46?e.check(vu,m,d)(u):u===45||u===95||de(u)?(a=!0,e.consume(u),c):m(u)}function d(u){return e.consume(u),s=!0,c}function m(u){return a&&s&&xe(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),n(u)):r(u)}}function Nu(e,n,r){const i=this;return s;function s(l){return l!==87&&l!==119||!ts.call(i,i.previous)||Wn(i.events)?r(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(ku,e.attempt(Qi,e.attempt(Xi,a),r),r)(l))}function a(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),n(l)}}function Cu(e,n,r){const i=this;let s="",a=!1;return l;function l(u){return(u===72||u===104)&&ns.call(i,i.previous)&&!Wn(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(u),e.consume(u),o):r(u)}function o(u){if(xe(u)&&s.length<5)return s+=String.fromCodePoint(u),e.consume(u),o;if(u===58){const g=s.toLowerCase();if(g==="http"||g==="https")return e.consume(u),c}return r(u)}function c(u){return u===47?(e.consume(u),a?d:(a=!0,c)):r(u)}function d(u){return u===null||Mt(u)||X(u)||Ge(u)||Ht(u)?r(u):e.attempt(Qi,e.attempt(Xi,m),r)(u)}function m(u){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),n(u)}}function Su(e,n,r){let i=0;return s;function s(l){return(l===87||l===119)&&i<3?(i++,e.consume(l),s):l===46&&i===3?(e.consume(l),a):r(l)}function a(l){return l===null?r(l):n(l)}}function Au(e,n,r){let i,s,a;return l;function l(d){return d===46||d===95?e.check(Ji,c,o)(d):d===null||X(d)||Ge(d)||d!==45&&Ht(d)?c(d):(a=!0,e.consume(d),l)}function o(d){return d===95?i=!0:(s=i,i=void 0),e.consume(d),l}function c(d){return s||i||!a?r(d):n(d)}}function Eu(e,n){let r=0,i=0;return s;function s(l){return l===40?(r++,e.consume(l),s):l===41&&i<r?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(Ji,n,a)(l):l===null||X(l)||Ge(l)?n(l):(e.consume(l),s)}function a(l){return l===41&&i++,e.consume(l),s}}function Ru(e,n,r){return i;function i(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),i):o===38?(e.consume(o),a):o===93?(e.consume(o),s):o===60||o===null||X(o)||Ge(o)?n(o):r(o)}function s(o){return o===null||o===40||o===91||X(o)||Ge(o)?n(o):i(o)}function a(o){return xe(o)?l(o):r(o)}function l(o){return o===59?(e.consume(o),i):xe(o)?(e.consume(o),l):r(o)}}function Iu(e,n,r){return i;function i(a){return e.consume(a),s}function s(a){return de(a)?r(a):n(a)}}function ts(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||X(e)}function ns(e){return!xe(e)}function rs(e){return!(e===47||Sn(e))}function Sn(e){return e===43||e===45||e===46||e===95||de(e)}function Wn(e){let n=e.length,r=!1;for(;n--;){const i=e[n][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){r=!0;break}if(i._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const Tu={tokenize:Ou,partial:!0};function Pu(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Fu,continuation:{tokenize:_u},exit:Mu}},text:{91:{name:"gfmFootnoteCall",tokenize:Lu},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:zu,resolveTo:Du}}}}function zu(e,n,r){const i=this;let s=i.events.length;const a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l;for(;s--;){const c=i.events[s][1];if(c.type==="labelImage"){l=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return o;function o(c){if(!l||!l._balanced)return r(c);const d=Pe(i.sliceSerialize({start:l.end,end:i.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?r(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),n(c))}}function Du(e,n){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[e[r+1],e[r+2],["enter",i,n],e[r+3],e[r+4],["enter",s,n],["exit",s,n],["enter",a,n],["enter",l,n],["exit",l,n],["exit",a,n],e[e.length-2],e[e.length-1],["exit",i,n]];return e.splice(r,e.length-r+1,...o),e}function Lu(e,n,r){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a=0,l;return o;function o(u){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),c}function c(u){return u!==94?r(u):(e.enter("gfmFootnoteCallMarker"),e.consume(u),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",d)}function d(u){if(a>999||u===93&&!l||u===null||u===91||X(u))return r(u);if(u===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return s.includes(Pe(i.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),n):r(u)}return X(u)||(l=!0),a++,e.consume(u),u===92?m:d}function m(u){return u===91||u===92||u===93?(e.consume(u),a++,d):d(u)}}function Fu(e,n,r){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a,l=0,o;return c;function c(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):r(x)}function m(x){if(l>999||x===93&&!o||x===null||x===91||X(x))return r(x);if(x===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return a=Pe(i.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return X(x)||(o=!0),l++,e.consume(x),x===92?u:m}function u(x){return x===91||x===92||x===93?(e.consume(x),l++,m):m(x)}function g(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),s.includes(a)||s.push(a),Y(e,h,"gfmFootnoteDefinitionWhitespace")):r(x)}function h(x){return n(x)}}function _u(e,n,r){return e.check(Et,n,e.attempt(Tu,n,r))}function Mu(e){e.exit("gfmFootnoteDefinition")}function Ou(e,n,r){const i=this;return Y(e,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=i.events[i.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?n(a):r(a)}}function $u(e){let r=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:a,resolveAll:s};return r==null&&(r=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function s(l,o){let c=-1;for(;++c<l.length;)if(l[c][0]==="enter"&&l[c][1].type==="strikethroughSequenceTemporary"&&l[c][1]._close){let d=c;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[c][1].end.offset-l[c][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[c][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[c][1].end)},u={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[c][1].start)},g=[["enter",m,o],["enter",l[d][1],o],["exit",l[d][1],o],["enter",u,o]],h=o.parser.constructs.insideSpan.null;h&&Se(g,g.length,0,Ut(h,l.slice(d+1,c),o)),Se(g,g.length,0,[["exit",u,o],["enter",l[c][1],o],["exit",l[c][1],o],["exit",m,o]]),Se(l,d-1,c-d+3,g),c=d+g.length-2;break}}for(c=-1;++c<l.length;)l[c][1].type==="strikethroughSequenceTemporary"&&(l[c][1].type="data");return l}function a(l,o,c){const d=this.previous,m=this.events;let u=0;return g;function g(x){return d===126&&m[m.length-1][1].type!=="characterEscape"?c(x):(l.enter("strikethroughSequenceTemporary"),h(x))}function h(x){const b=st(d);if(x===126)return u>1?c(x):(l.consume(x),u++,h);if(u<2&&!r)return c(x);const N=l.exit("strikethroughSequenceTemporary"),v=st(x);return N._open=!v||v===2&&!!b,N._close=!b||b===2&&!!v,o(x)}}}class Bu{constructor(){this.map=[]}add(n,r,i){Hu(this,n,r,i)}consume(n){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let r=this.map.length;const i=[];for(;r>0;)r-=1,i.push(n.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),n.length=this.map[r][0];i.push(n.slice()),n.length=0;let s=i.pop();for(;s;){for(const a of s)n.push(a);s=i.pop()}this.map.length=0}}function Hu(e,n,r,i){let s=0;if(!(r===0&&i.length===0)){for(;s<e.map.length;){if(e.map[s][0]===n){e.map[s][1]+=r,e.map[s][2].push(...i);return}s+=1}e.map.push([n,r,i])}}function Uu(e,n){let r=!1;const i=[];for(;n<e.length;){const s=e[n];if(r){if(s[0]==="enter")s[1].type==="tableContent"&&i.push(e[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[n-1][1].type==="tableDelimiterMarker"){const a=i.length-1;i[a]=i[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(r=!0);n+=1}return i}function qu(){return{flow:{null:{name:"table",tokenize:Vu,resolveAll:Wu}}}}function Vu(e,n,r){const i=this;let s=0,a=0,l;return o;function o(j){let T=i.events.length-1;for(;T>-1;){const I=i.events[T][1].type;if(I==="lineEnding"||I==="linePrefix")T--;else break}const P=T>-1?i.events[T][1].type:null,z=P==="tableHead"||P==="tableRow"?w:c;return z===w&&i.parser.lazy[i.now().line]?r(j):z(j)}function c(j){return e.enter("tableHead"),e.enter("tableRow"),d(j)}function d(j){return j===124||(l=!0,a+=1),m(j)}function m(j){return j===null?r(j):L(j)?a>1?(a=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),h):r(j):K(j)?Y(e,m,"whitespace")(j):(a+=1,l&&(l=!1,s+=1),j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),l=!0,m):(e.enter("data"),u(j)))}function u(j){return j===null||j===124||X(j)?(e.exit("data"),m(j)):(e.consume(j),j===92?g:u)}function g(j){return j===92||j===124?(e.consume(j),u):u(j)}function h(j){return i.interrupt=!1,i.parser.lazy[i.now().line]?r(j):(e.enter("tableDelimiterRow"),l=!1,K(j)?Y(e,x,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):x(j))}function x(j){return j===45||j===58?N(j):j===124?(l=!0,e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),b):$(j)}function b(j){return K(j)?Y(e,N,"whitespace")(j):N(j)}function N(j){return j===58?(a+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),v):j===45?(a+=1,v(j)):j===null||L(j)?O(j):$(j)}function v(j){return j===45?(e.enter("tableDelimiterFiller"),A(j)):$(j)}function A(j){return j===45?(e.consume(j),A):j===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),E):(e.exit("tableDelimiterFiller"),E(j))}function E(j){return K(j)?Y(e,O,"whitespace")(j):O(j)}function O(j){return j===124?x(j):j===null||L(j)?!l||s!==a?$(j):(e.exit("tableDelimiterRow"),e.exit("tableHead"),n(j)):$(j)}function $(j){return r(j)}function w(j){return e.enter("tableRow"),H(j)}function H(j){return j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),H):j===null||L(j)?(e.exit("tableRow"),n(j)):K(j)?Y(e,H,"whitespace")(j):(e.enter("data"),U(j))}function U(j){return j===null||j===124||X(j)?(e.exit("data"),H(j)):(e.consume(j),j===92?G:U)}function G(j){return j===92||j===124?(e.consume(j),U):U(j)}}function Wu(e,n){let r=-1,i=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],o=!1,c=0,d,m,u;const g=new Bu;for(;++r<e.length;){const h=e[r],x=h[1];h[0]==="enter"?x.type==="tableHead"?(o=!1,c!==0&&(Or(g,n,c,d,m),m=void 0,c=0),d={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(r,0,[["enter",d,n]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(i=!0,u=void 0,a=[0,0,0,0],l=[0,r+1,0,0],o&&(o=!1,m={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(r,0,[["enter",m,n]])),s=x.type==="tableDelimiterRow"?2:m?3:1):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(i=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],u=Dt(g,n,a,s,void 0,u),a=[0,0,0,0]),l[2]=r)):x.type==="tableCellDivider"&&(i?i=!1:(a[1]!==0&&(l[0]=l[1],u=Dt(g,n,a,s,void 0,u)),a=l,l=[a[1],r,0,0])):x.type==="tableHead"?(o=!0,c=r):x.type==="tableRow"||x.type==="tableDelimiterRow"?(c=r,a[1]!==0?(l[0]=l[1],u=Dt(g,n,a,s,r,u)):l[1]!==0&&(u=Dt(g,n,l,s,r,u)),s=0):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(l[3]=r)}for(c!==0&&Or(g,n,c,d,m),g.consume(n.events),r=-1;++r<n.events.length;){const h=n.events[r];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=Uu(n.events,r))}return e}function Dt(e,n,r,i,s,a){const l=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",o="tableContent";r[0]!==0&&(a.end=Object.assign({},tt(n.events,r[0])),e.add(r[0],0,[["exit",a,n]]));const c=tt(n.events,r[1]);if(a={type:l,start:Object.assign({},c),end:Object.assign({},c)},e.add(r[1],0,[["enter",a,n]]),r[2]!==0){const d=tt(n.events,r[2]),m=tt(n.events,r[3]),u={type:o,start:Object.assign({},d),end:Object.assign({},m)};if(e.add(r[2],0,[["enter",u,n]]),i!==2){const g=n.events[r[2]],h=n.events[r[3]];if(g[1].end=Object.assign({},h[1].end),g[1].type="chunkText",g[1].contentType="text",r[3]>r[2]+1){const x=r[2]+1,b=r[3]-r[2]-1;e.add(x,b,[])}}e.add(r[3]+1,0,[["exit",u,n]])}return s!==void 0&&(a.end=Object.assign({},tt(n.events,s)),e.add(s,0,[["exit",a,n]]),a=void 0),a}function Or(e,n,r,i,s){const a=[],l=tt(n.events,r);s&&(s.end=Object.assign({},l),a.push(["exit",s,n])),i.end=Object.assign({},l),a.push(["exit",i,n]),e.add(r+1,0,a)}function tt(e,n){const r=e[n],i=r[0]==="enter"?"start":"end";return r[1][i]}const Ku={name:"tasklistCheck",tokenize:Yu};function Gu(){return{text:{91:Ku}}}function Yu(e,n,r){const i=this;return s;function s(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?r(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),a)}function a(c){return X(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),l):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),l):r(c)}function l(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):r(c)}function o(c){return L(c)?n(c):K(c)?e.check({tokenize:Qu},n,r)(c):r(c)}}function Qu(e,n,r){return Y(e,i,"whitespace");function i(s){return s===null?r(s):n(s)}}function Xu(e){return gi([ju(),Pu(),$u(e),qu(),Gu()])}const Ju={};function lt(e){const n=this,r=e||Ju,i=n.data(),s=i.micromarkExtensions||(i.micromarkExtensions=[]),a=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),l=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);s.push(Xu(r)),a.push(bu()),l.push(yu(r))}const $r=e=>"churnRisk"in e&&"stage"in e,Zu={p:({children:e})=>t.jsx("p",{className:"mb-2 last:mb-0",children:e}),ul:({children:e})=>t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:e}),li:({children:e})=>t.jsx("li",{children:e})},Br=({targetEmployeeName:e,similarEmployees:n,explanation:r,comparisonType:i="resigned"})=>{const[s,a]=F.useState(!0);if(!n||n.length===0)return t.jsxs("div",{className:"my-4 p-4 rounded-lg bg-gray-100 dark:bg-gray-700/50 text-center text-gray-600 dark:text-gray-400",children:["No similar ",i," employees found for ",e,"."]});const l=[...n].sort((x,b)=>b.similarityScore-x.similarityScore),o=l.length>0&&$r(l[0]),c=x=>x>.75?"text-red-500 dark:text-red-400":x>.5?"text-yellow-500 dark:text-yellow-400":"text-emerald-500 dark:text-emerald-400",d=x=>x>.75?"bg-red-100 dark:bg-red-900/30":x>.5?"bg-yellow-100 dark:bg-yellow-900/30":"bg-emerald-100 dark:bg-emerald-900/30",m=()=>{switch(i){case"resigned":return"vs. Past Departures";case"active":return"vs. Current Colleagues";default:return"vs. Similar Employees"}},u=()=>{switch(i){case"resigned":return t.jsx(pe,{size:20,className:"text-red-500 dark:text-red-400"});case"active":return t.jsx(te,{size:20,className:"text-emerald-500 dark:text-emerald-400"});default:return t.jsx(te,{size:20,className:"text-blue-500 dark:text-blue-400"})}},g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return t.jsxs(W.div,{className:"similarity-analysis-container my-4 p-5 rounded-xl bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-800 dark:via-gray-850 dark:to-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",variants:g,initial:"hidden",animate:"visible",children:[t.jsxs(W.h3,{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100 flex items-center gap-2",variants:h,children:[u(),"Similarity Analysis: ",t.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:e})," ",m()]}),t.jsxs(W.div,{className:"explanation-section mb-6 rounded-lg bg-gray-100 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 overflow-hidden",variants:h,layout:!0,children:[t.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer",onClick:()=>a(!s),children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-1.5",children:[t.jsx(as,{size:16,className:"text-blue-500 dark:text-blue-400"}),"AI Explanation"]}),t.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors rounded-full","aria-label":s?"Hide explanation":"Show explanation",children:s?t.jsx(Jr,{size:18}):t.jsx(Ct,{size:18})})]}),s&&t.jsx(W.div,{className:"px-4 pb-4 pt-0 prose prose-sm max-w-none dark:prose-invert prose-ul:list-disc prose-ul:pl-5 prose-li:mb-1 text-gray-600 dark:text-gray-300 leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:t.jsx(at,{remarkPlugins:[lt],components:Zu,children:r})})]}),t.jsx(W.div,{className:"overflow-x-auto",variants:h,children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Employee Details"}),o&&t.jsxs(t.Fragment,{children:[t.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Risk Profile"}),t.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"AI Analysis"})]}),t.jsxs("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center gap-1",children:[t.jsx(pe,{size:14})," Similarity"]})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l.map((x,b)=>{const N=$r(x)?x:null;return t.jsxs(W.tr,{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors duration-150",variants:h,children:[t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.name}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ls,{size:12}),x.department]}),N&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"•"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(os,{size:12}),N.tenure,"y"]})]})]}),N&&t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:N.position})]})}),o&&N&&t.jsxs(t.Fragment,{children:[t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(En,{riskScore:N.churnRisk,size:"sm",showIcon:!1}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Stage: ",N.stage]})]})}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(Le,{size:12,className:"text-blue-500"}),t.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["ML: ",(N.mlScore*100).toFixed(0),"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(ae,{size:12,className:"text-orange-500"}),t.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Rules: ",(N.heuristicScore*100).toFixed(0),"%"]})]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Confidence: ",(N.confidenceLevel*100).toFixed(0),"%"]})]})})]}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${d(x.similarityScore)} ${c(x.similarityScore)}`,children:[(x.similarityScore*100).toFixed(1),"%"]})})]},`${x.name}-${b}`)})})]})})]})},e0={diagnose:"Analyze the churn risk factors for {name}",retention:"Generate a retention plan for {name}",similarity_stayed:"Show me employees similar to {name} who stayed, using AI reasoning and behavioral data",similarity_resigned:"Compare employee {name} with similar employees who resigned",diagnose_multiple:"Analyze the churn risk factors for the following employees: {names}. What are the key patterns and recommendations?",retention_multiple:"Create personalized retention strategies for these employees: {names}. Focus on their specific risk factors and career development.",trends:"Show me current workforce churn trends and risk distribution across all employees",departments:"Compare churn risk across different departments and positions. Create charts showing risk distribution",patterns:"Show common exit patterns across resigned employees",organizational_health:"Provide a comprehensive organizational health assessment for our {count} employees. Include: 1) Overall workforce stability analysis, 2) Department-by-department risk assessment, 3) Key performance indicators and benchmarks, 4) Strategic recommendations for leadership team, 5) Risk mitigation priorities. Focus on executive-level insights and actionable strategies.",workforce_trends:"Analyze strategic workforce trends and provide executive insights on: 1) Historical churn patterns and seasonal variations, 2) Predictive analysis for next 6-12 months, 3) Industry benchmarking and competitive positioning, 4) Emerging risks and opportunities, 5) Strategic workforce planning recommendations. Include data-driven insights and executive summary.",critical_intervention:"Create an executive-level critical risk intervention plan for our {count} highest-risk employees. Include: 1) Immediate retention strategies and timeline, 2) Resource allocation and budget considerations, 3) Executive sponsor assignments, 4) Success metrics and KPIs, 5) Escalation procedures and contingency plans. Focus on business impact and ROI.",department_review:"Conduct a strategic department performance review focusing on retention and organizational health. Analyze: 1) Department-level risk assessment and benchmarking, 2) Leadership effectiveness and management practices, 3) Resource allocation and operational efficiency, 4) Cross-departmental collaboration and dependencies, 5) Strategic recommendations for department heads and executive team.",board_report:"Generate a board-ready executive report on workforce retention and organizational health. Include: 1) Executive summary with key findings and recommendations, 2) Financial impact analysis and ROI projections, 3) Competitive benchmarking and industry positioning, 4) Risk assessment and mitigation strategies, 5) Strategic initiatives and resource requirements. Format for C-suite and board presentation.",quarterly_summary:"Create a quarterly workforce summary for executive review. Cover: 1) Quarterly performance metrics and trend analysis, 2) Achievement against retention targets and KPIs, 3) Strategic initiatives progress and outcomes, 4) Emerging challenges and opportunities, 5) Next quarter priorities and resource needs. Focus on strategic insights and business impact.",competitive_benchmarking:"Conduct a competitive benchmarking analysis for workforce retention and organizational health. Analyze: 1) Industry retention benchmarks and best practices, 2) Competitive positioning and market analysis, 3) Emerging trends and innovative approaches, 4) Strategic opportunities and threats, 5) Recommendations for competitive advantage. Include executive insights and strategic implications.",strategic_planning:"Develop a strategic workforce planning framework for executive decision-making. Include: 1) Long-term workforce projections and scenario planning, 2) Talent acquisition and retention strategies, 3) Succession planning and leadership development, 4) Organizational design and structure optimization, 5) Investment priorities and resource allocation. Focus on strategic alignment and business objectives.",roi_analysis:"Conduct ROI and investment analysis for workforce retention initiatives. Analyze: 1) Cost-benefit analysis of retention programs and interventions, 2) Financial impact of turnover and replacement costs, 3) Investment priorities and budget allocation recommendations, 4) Performance metrics and success indicators, 5) Long-term financial projections and business case development.",ai_insights:"Based on the current employee data and risk patterns, what are your top AI-powered insights and recommendations for reducing churn risk?",team_overview:"Provide a comprehensive team risk overview by department. Which teams have the highest churn risk and what are the recommended actions for each department?",generate_report:"Generate an executive summary report on current churn risk status. Include key metrics, trends, high-risk areas, and strategic recommendations."},be=(e,n,r,i)=>{let s=e0[e];n&&(s=s.replace("{name}",n));const a=e.includes("_multiple")||r;return{action:e,prompt:s,employeeNames:n?[n]:void 0,isMultiEmployee:a}},Hr=({data:e})=>{const n=ot(),[r,i]=F.useState("overview"),[s,a]=F.useState("ml"),l=m=>{i(r===m?null:m)},o=m=>m>n.highRisk?{bg:"bg-red-500",text:"text-red-600",light:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800"}:m>n.mediumRisk?{bg:"bg-orange-500",text:"text-orange-600",light:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800"}:{bg:"bg-green-500",text:"text-green-600",light:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800"},c=m=>{switch(m){case"Critical":return"bg-red-100 text-red-800 border-red-300";case"High":return"bg-orange-100 text-orange-800 border-orange-300";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-green-100 text-green-800 border-green-300"}},d=o(e.overallRisk);return t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsxs("div",{className:`${d.light} ${d.border} border-b p-8`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-16 h-16 rounded-full ${d.bg} flex items-center justify-center text-white mr-6 shadow-lg`,children:t.jsx(ke,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Risk Analysis"}),t.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:e.targetEmployeeName}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.personalProfile.position," • ",e.personalProfile.department]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-5xl font-bold ${d.text} mb-2`,children:[(e.overallRisk*100).toFixed(0),"%"]}),t.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border-2 ${c(e.urgencyLevel)}`,children:[t.jsx(ae,{className:"w-4 h-4 mr-2"}),e.urgencyLevel," Priority"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[(e.mlScore*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"AI Model"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[(e.heuristicScore*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Business Rules"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:e.stage}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Career Stage"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[(e.confidenceLevel*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Confidence"})]})]})]}),t.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(Ve,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Key Findings"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.keyFindings.map((m,u)=>t.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsx(Be,{className:"w-5 h-5 text-emerald-500 mr-3 mt-0.5 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:m})]},u))})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[t.jsxs("button",{onClick:()=>a("ml"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${s==="ml"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(Le,{className:"w-4 h-4 inline mr-2"}),"AI Model Insights"]}),t.jsxs("button",{onClick:()=>a("rules"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${s==="rules"?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(cs,{className:"w-4 h-4 inline mr-2"}),"Business Rules"]}),t.jsxs("button",{onClick:()=>a("comparative"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${s==="comparative"?"bg-white dark:bg-gray-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Peer Comparison"]})]}),t.jsxs("div",{className:"min-h-[300px]",children:[s==="ml"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Top Risk Factors (AI Model)"}),t.jsx("div",{className:"space-y-3",children:e.mlContributors.slice(0,6).map((m,u)=>{const g=m.importance<0;return t.jsxs("div",{className:`p-4 rounded-lg border ${g?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[g?t.jsx(Lt,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(pe,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:m.feature.replace(/(_)/g," ").replace(/\b\w/g,h=>h.toUpperCase())})]}),t.jsxs("span",{className:`text-sm font-bold px-3 py-1 rounded-full ${g?"bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-200":"bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-200"}`,children:[m.importance>0?"+":"",(m.importance*100).toFixed(1),"%"]})]}),t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("strong",{children:"Current Value:"})," ",m.value!==null?m.value:"Not Available"]})]},u)})})]}),s==="rules"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Business Rule Alerts"}),e.heuristicAlerts.length>0?t.jsx("div",{className:"space-y-3",children:e.heuristicAlerts.map((m,u)=>t.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h5",{className:"font-medium text-orange-900 dark:text-orange-200 flex items-center",children:[t.jsx(ae,{className:"w-4 h-4 mr-2"}),m.rule_name]}),t.jsxs("span",{className:"text-sm font-bold bg-orange-100 text-orange-700 dark:bg-orange-800 dark:text-orange-200 px-3 py-1 rounded-full",children:["+",(m.impact*100).toFixed(1),"%"]})]}),t.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-300 leading-relaxed",children:m.reason||m.message||"No details available"})]},u))}):t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(Be,{className:"w-12 h-12 mx-auto mb-3 text-green-500"}),t.jsx("p",{children:"No business rule alerts triggered"}),t.jsx("p",{className:"text-sm",children:"This is a positive indicator"})]})]}),s==="comparative"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Peer Comparison Analysis"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.comparativeInsights.departmentComparison&&t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[t.jsxs("h5",{className:"font-medium text-blue-900 dark:text-blue-200 mb-2 flex items-center",children:[t.jsx(te,{className:"w-4 h-4 mr-2"}),"Department Average"]}),t.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:[(e.comparativeInsights.departmentComparison.avgRisk*100).toFixed(1),"%"]}),t.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[e.targetEmployeeName," is ",e.comparativeInsights.departmentComparison.relativePosition," average"]}),t.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[e.comparativeInsights.departmentComparison.departmentSize," employees in department"]})]}),e.comparativeInsights.positionComparison&&t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:[t.jsxs("h5",{className:"font-medium text-purple-900 dark:text-purple-200 mb-2 flex items-center",children:[t.jsx(nt,{className:"w-4 h-4 mr-2"}),"Position Average"]}),t.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-1",children:[(e.comparativeInsights.positionComparison.avgRisk*100).toFixed(1),"%"]}),t.jsxs("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:[e.targetEmployeeName," is ",e.comparativeInsights.positionComparison.relativePosition," average"]}),t.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:[e.comparativeInsights.positionComparison.peerCount," employees in similar roles"]})]}),e.comparativeInsights.tenureComparison&&t.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[t.jsxs("h5",{className:"font-medium text-emerald-900 dark:text-emerald-200 mb-2 flex items-center",children:[t.jsx(An,{className:"w-4 h-4 mr-2"}),"Tenure Cohort"]}),t.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mb-1",children:[(e.comparativeInsights.tenureComparison.avgRisk*100).toFixed(1),"%"]}),t.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:[e.targetEmployeeName," is ",e.comparativeInsights.tenureComparison.relativePosition," average"]}),t.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 mt-1",children:[e.comparativeInsights.tenureComparison.cohortSize," employees with similar tenure"]})]})]})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[t.jsx(Le,{className:"w-5 h-5 mr-2 text-blue-500"}),"AI Analysis"]}),t.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:t.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 leading-relaxed",children:e.reasoning})})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[t.jsx(St,{className:"w-5 h-5 mr-2 text-green-500"}),"Recommendations"]}),t.jsx("div",{className:"space-y-2",children:e.recommendations.map((m,u)=>t.jsxs("div",{className:"flex items-start p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:u+1}),t.jsx("span",{className:"text-sm text-green-800 dark:text-green-200 leading-relaxed",children:m})]},u))})]})]})}),e.calculationBreakdown&&t.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700",children:[t.jsxs("button",{onClick:()=>l("calculation"),className:"flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors mb-4",children:[t.jsx(Ct,{className:`w-4 h-4 mr-1 transition-transform ${r==="calculation"?"rotate-180":""}`}),"Show detailed calculation breakdown"]}),r==="calculation"&&t.jsxs(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"AI Model"}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[(e.mlScore*100).toFixed(1),"% × ",e.calculationBreakdown.weights.ml_weight," = ",e.calculationBreakdown.ml_contribution.toFixed(3)]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400",children:"Business Rules"}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[(e.heuristicScore*100).toFixed(1),"% × ",e.calculationBreakdown.weights.heuristic_weight," = ",e.calculationBreakdown.heuristic_contribution.toFixed(3)]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:"Career Stage"}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[(e.stageScore*100).toFixed(1),"% × ",e.calculationBreakdown.weights.stage_weight," = ",e.calculationBreakdown.stage_contribution.toFixed(3)]})]})]}),t.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3 mt-3 text-center",children:t.jsxs("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:["Final Risk Score: ",(e.overallRisk*100).toFixed(1),"%"]})})]})]})]})},Ur=({data:e})=>{const n=ot(),[r,i]=F.useState("overview"),[s,a]=F.useState("immediate"),l=g=>{a(s===g?null:g)},o=g=>g>n.highRisk?{bg:"bg-red-500",text:"text-red-600",light:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800"}:g>n.mediumRisk?{bg:"bg-orange-500",text:"text-orange-600",light:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800"}:{bg:"bg-green-500",text:"text-green-600",light:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800"},c=g=>{switch(g){case"critical":return"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/30 dark:text-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-300 dark:bg-orange-900/30 dark:text-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300 dark:bg-yellow-900/30 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/30 dark:text-green-200";default:return"bg-gray-100 text-gray-800 border-gray-300 dark:bg-gray-900/30 dark:text-gray-200"}},d=g=>{switch(g){case"immediate":return{label:"Immediate Actions",icon:"🚨",color:"text-red-600",bgColor:"bg-red-50 dark:bg-red-900/20"};case"short_term":return{label:"Short-term Strategy",icon:"⚡",color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20"};case"long_term":return{label:"Long-term Growth",icon:"🌱",color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-900/20"};default:return{label:g,icon:"📋",color:"text-gray-600",bgColor:"bg-gray-50 dark:bg-gray-900/20"}}},m=o(e.currentRisk),u={immediate:e.actionPlan.filter(g=>g.category==="immediate"),short_term:e.actionPlan.filter(g=>g.category==="short_term"),long_term:e.actionPlan.filter(g=>g.category==="long_term")};return t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsxs("div",{className:`${m.light} ${m.border} border-b p-8`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-16 h-16 rounded-full ${m.bg} flex items-center justify-center text-white mr-6 shadow-lg`,children:t.jsx(_t,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Retention Strategy"}),t.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:e.targetEmployeeName}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.personalProfile.position," • ",e.personalProfile.department]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-4xl font-bold ${m.text} mb-2`,children:[(e.currentRisk*100).toFixed(0),"%"]}),t.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border-2 ${c("high")}`,children:[e.riskLevel," Risk"]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Primary Risk Factors"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.primaryRiskFactors.map((g,h)=>t.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 dark:bg-orange-900/40 dark:text-orange-200 text-sm rounded-full border border-orange-200 dark:border-orange-700",children:g},h))})]})]}),t.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[t.jsxs("button",{onClick:()=>i("overview"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="overview"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(pe,{className:"w-4 h-4 inline mr-2"}),"Strategy Overview"]}),t.jsxs("button",{onClick:()=>i("actions"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="actions"?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(St,{className:"w-4 h-4 inline mr-2"}),"Action Plan"]}),t.jsxs("button",{onClick:()=>i("timeline"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="timeline"?"bg-white dark:bg-gray-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(An,{className:"w-4 h-4 inline mr-2"}),"Timeline"]}),t.jsxs("button",{onClick:()=>i("budget"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="budget"?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(ke,{className:"w-4 h-4 inline mr-2"}),"ROI Analysis"]})]})}),t.jsxs("div",{className:"p-6 min-h-[400px]",children:[r==="overview"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-4 flex items-center",children:[t.jsx(pe,{className:"w-5 h-5 mr-2"}),"Expected Outcomes"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Current Risk:"}),t.jsxs("span",{className:"font-bold text-red-600",children:[e.expectedOutcomes.currentRisk,"%"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Projected Risk:"}),t.jsxs("span",{className:"font-bold text-green-600",children:[e.expectedOutcomes.projectedRisk,"%"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Risk Reduction:"}),t.jsxs("span",{className:"font-bold text-emerald-600",children:["-",e.expectedOutcomes.riskReduction,"%"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Timeline:"}),t.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:e.expectedOutcomes.timeline})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Confidence:"}),t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${e.expectedOutcomes.confidenceLevel==="High"?"bg-green-100 text-green-800":e.expectedOutcomes.confidenceLevel==="Medium"?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:e.expectedOutcomes.confidenceLevel})]})]})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-200 mb-4 flex items-center",children:[t.jsx(te,{className:"w-5 h-5 mr-2"}),"Success Examples"]}),e.successExamples.length>0?t.jsx("div",{className:"space-y-3",children:e.successExamples.map((g,h)=>t.jsxs("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg border border-green-200 dark:border-green-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"font-semibold text-green-800 dark:text-green-200",children:g.name}),t.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:g.riskReduction})]}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:g.position}),t.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:g.insights})]},h))}):t.jsx("p",{className:"text-green-700 dark:text-green-300 text-center py-4",children:"No similar success cases found in this department"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(ae,{className:"w-5 h-5 mr-2 text-orange-500"}),"Risk Mitigation Strategies"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.riskMitigation.map((g,h)=>t.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-200",children:g.riskFactor}),t.jsx("span",{className:"text-xs bg-orange-200 text-orange-800 dark:bg-orange-800 dark:text-orange-200 px-2 py-1 rounded",children:g.currentImpact})]}),t.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-300 mb-2",children:g.strategy}),t.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["Timeline: ",g.timeline]})]},h))})]})]}),r==="actions"&&t.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:Object.entries(u).map(([g,h])=>{const x=d(g);return h.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("button",{onClick:()=>l(g),className:`w-full p-4 ${x.bgColor} hover:bg-opacity-80 rounded-lg border border-gray-200 dark:border-gray-600 text-left transition-all`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-2xl mr-3",children:x.icon}),t.jsxs("div",{children:[t.jsxs("h3",{className:`font-semibold ${x.color} dark:text-white`,children:[x.label," (",h.length," actions)"]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.timelineOverview[g]?.focus})]})]}),t.jsx(Ct,{className:`w-5 h-5 transition-transform ${s===g?"rotate-180":""}`})]})}),s===g&&t.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},className:"mt-4 space-y-4",children:h.sort((b,N)=>b.step-N.step).map(b=>t.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full flex items-center justify-center text-sm font-bold",children:b.step}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${c(b.priority)}`,children:b.priority.toUpperCase()}),t.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300 rounded-full text-xs font-medium",children:b.timeframe})]})]}),t.jsxs("div",{className:"text-right text-sm",children:[t.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Risk Reduction"}),t.jsxs("div",{className:"font-semibold text-green-600",children:["-",(b.riskReduction*100).toFixed(1),"%"]})]})]}),t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 text-lg",children:b.action}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rationale:"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:b.rationale})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Expected Impact:"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:b.expectedImpact})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Owner:"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:b.owner})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cost Level:"}),t.jsx("div",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${b.cost==="High"?"bg-red-100 text-red-700":b.cost==="Medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:b.cost})]})]})]},b.step))})]},g)})}),r==="timeline"&&t.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:t.jsx("div",{className:"space-y-6",children:Object.entries(e.timelineOverview).map(([g,h])=>{const x=d(g);return t.jsxs("div",{className:`p-6 ${x.bgColor} rounded-xl border border-gray-200 dark:border-gray-600`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-3xl mr-4",children:x.icon}),t.jsxs("div",{children:[t.jsx("h3",{className:`text-xl font-bold ${x.color} dark:text-white`,children:x.label}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.timeframe})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["-",(h.expectedRiskReduction*100).toFixed(1),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Risk Reduction"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Actions:"}),t.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[h.actionCount," planned interventions"]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Focus Area:"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:h.focus})]})]})]},g)})})}),r==="budget"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-6 border border-indigo-200 dark:border-indigo-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-200 mb-4 flex items-center",children:[t.jsx(ke,{className:"w-5 h-5 mr-2"}),"Investment Analysis"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-indigo-700 dark:text-indigo-300",children:"Retention Cost:"}),t.jsxs("span",{className:"font-bold text-indigo-900 dark:text-indigo-100",children:["$",e.budgetConsiderations.estimatedRetentionCost.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-indigo-700 dark:text-indigo-300",children:"Replacement Cost:"}),t.jsxs("span",{className:"font-bold text-red-600",children:["$",e.budgetConsiderations.replacementCost.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center border-t pt-2",children:[t.jsx("span",{className:"text-indigo-700 dark:text-indigo-300",children:"Net Savings:"}),t.jsxs("span",{className:"font-bold text-green-600 text-lg",children:["$",e.budgetConsiderations.netSavings.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-indigo-700 dark:text-indigo-300",children:"ROI:"}),t.jsxs("span",{className:"font-bold text-emerald-600 text-lg",children:[e.budgetConsiderations.roi,"%"]})]})]})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-200 mb-4 flex items-center",children:[t.jsx(pe,{className:"w-5 h-5 mr-2"}),"Cost Breakdown"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-purple-700 dark:text-purple-300",children:"Immediate (0-30 days):"}),t.jsxs("span",{className:"font-semibold",children:["$",e.budgetConsiderations.breakdown.immediate.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-purple-700 dark:text-purple-300",children:"Short-term (1-3 months):"}),t.jsxs("span",{className:"font-semibold",children:["$",e.budgetConsiderations.breakdown.shortTerm.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-purple-700 dark:text-purple-300",children:"Long-term (3+ months):"}),t.jsxs("span",{className:"font-semibold",children:["$",e.budgetConsiderations.breakdown.longTerm.toLocaleString()]})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300 mb-2",children:"Investment Distribution:"}),t.jsxs("div",{className:"flex rounded-full overflow-hidden h-4 bg-purple-200 dark:bg-purple-800",children:[t.jsx("div",{className:"bg-red-500 h-full",style:{width:`${e.budgetConsiderations.breakdown.immediate/e.budgetConsiderations.estimatedRetentionCost*100}%`}}),t.jsx("div",{className:"bg-orange-500 h-full",style:{width:`${e.budgetConsiderations.breakdown.shortTerm/e.budgetConsiderations.estimatedRetentionCost*100}%`}}),t.jsx("div",{className:"bg-green-500 h-full",style:{width:`${e.budgetConsiderations.breakdown.longTerm/e.budgetConsiderations.estimatedRetentionCost*100}%`}})]})]})]})]}),t.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(Be,{className:"w-5 h-5 mr-2 text-blue-500"}),"Monitoring Metrics"]}),t.jsx("div",{className:"space-y-2",children:e.monitoringMetrics.map((g,h)=>t.jsxs("div",{className:"flex items-start p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:g})]},h))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(pe,{className:"w-5 h-5 mr-2 text-green-500"}),"Success Indicators"]}),t.jsx("div",{className:"space-y-2",children:e.successIndicators.map((g,h)=>t.jsxs("div",{className:"flex items-start p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx(Be,{className:"w-4 h-4 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:g})]},h))})]})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Strategy Summary"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.summary})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:e.actionPlan.length}),t.jsx("div",{className:"text-xs text-gray-500",children:"Total Actions"})]})]})})]})},qr=({data:e})=>{const n=e.targetDescription||"Retention Playbook";return t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsx("div",{className:"border-b p-6 bg-gray-50 dark:bg-gray-700/30",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500 text-white flex items-center justify-center",children:t.jsx(_t,{size:20})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Retention Strategy"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:n})]})]})}),t.jsx("div",{className:"p-6 space-y-4",children:e.playbook?.length?e.playbook.sort((r,i)=>(r.step||0)-(i.step||0)).map(r=>t.jsxs("div",{className:"p-4 rounded-lg border bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-200 flex items-center justify-center text-sm font-bold",children:r.step}),t.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.action})]}),t.jsx(St,{className:"w-5 h-5 text-gray-400"})]}),r.rationale&&t.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:r.rationale})]},r.step)):t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No actions provided."})}),e.summary&&t.jsx("div",{className:"p-6 border-t bg-gray-50 dark:bg-gray-700/30 border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:e.summary})})]})},Vr=({data:e})=>{const n=ot(),[r,i]=F.useState("overview");if(!e||!e.targetEmployee||!e.similarEmployees||!e.insights)return t.jsx("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 p-8",children:t.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[t.jsx(ae,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),t.jsx("p",{children:"Unable to display similarity analysis. Data structure is incomplete."})]})});const s=c=>c==="stayed"?{color:"text-green-600",bg:"bg-green-500",light:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"✓"}:{color:"text-red-600",bg:"bg-red-500",light:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:"✗"},a=c=>c>n.highRisk?"text-red-600 bg-red-100 dark:bg-red-900/30":c>n.mediumRisk?"text-orange-600 bg-orange-100 dark:bg-orange-900/30":"text-green-600 bg-green-100 dark:bg-green-900/30",l=c=>{switch(c.toLowerCase()){case"high":return"text-green-600 bg-green-100 dark:bg-green-900/30";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30";case"low":return"text-red-600 bg-red-100 dark:bg-red-900/30";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30"}},o=s(e.comparisonType);return t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsxs("div",{className:`${o.light} ${o.border} border-b p-8`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-16 h-16 rounded-full ${o.bg} flex items-center justify-center text-white mr-6 shadow-lg`,children:t.jsx("span",{className:"text-2xl",children:o.icon})}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Similar ",e.comparisonType==="stayed"?"Retained":"Resigned"," Employees"]}),t.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:e.targetEmployee.name}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.targetEmployee.position," • ",e.targetEmployee.department]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-4xl font-bold ${o.color} mb-2`,children:[(e.targetEmployee.risk*100).toFixed(0),"%"]}),t.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${a(e.targetEmployee.risk)}`,children:"Current Risk"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.similarEmployees?.length||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"Similar Found"})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[((e.patterns?.averageSimilarity||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Similarity"})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm",children:[t.jsxs("div",{className:"text-2xl font-bold text-emerald-600",children:[e.targetEmployee.tenure,"y"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Tenure"})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm",children:[t.jsx("div",{className:`text-2xl font-bold inline-flex items-center px-3 py-1 rounded-full text-xs ${l(e.confidence)}`,children:e.confidence}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Confidence"})]})]})]}),t.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[t.jsxs("button",{onClick:()=>i("overview"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="overview"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(pe,{className:"w-4 h-4 inline mr-2"}),"Overview"]}),t.jsxs("button",{onClick:()=>i("employees"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="employees"?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Similar Employees"]}),t.jsxs("button",{onClick:()=>i("patterns"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="patterns"?"bg-white dark:bg-gray-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(ke,{className:"w-4 h-4 inline mr-2"}),"Patterns"]}),t.jsxs("button",{onClick:()=>i("insights"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="insights"?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(Ve,{className:"w-4 h-4 inline mr-2"}),"Insights"]})]})}),r==="overview"&&t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-4 flex items-center",children:[t.jsx(Le,{className:"w-5 h-5 mr-2"}),"Key Findings"]}),e.insights?.keyFindings?.length>0?t.jsx("div",{className:"space-y-3",children:e.insights.keyFindings.map((c,d)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx(Be,{className:"w-4 h-4 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:c})]},d))}):t.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-center py-4",children:"No specific findings identified from the comparison"})]}),t.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-6 border border-orange-200 dark:border-orange-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-900 dark:text-orange-200 mb-4 flex items-center",children:[t.jsx(ae,{className:"w-5 h-5 mr-2"}),"Risk Patterns"]}),t.jsx("div",{className:"space-y-3",children:e.insights?.riskPatterns?.map((c,d)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:c})]},d))||t.jsx("p",{className:"text-orange-700 dark:text-orange-300 text-center py-4",children:"No risk patterns identified"})})]})]}),t.jsx("div",{className:"mt-6",children:t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6 border border-gray-200 dark:border-gray-600",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(xn,{className:"w-5 h-5 mr-2"}),"Analysis Summary"]}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:e.insights?.summary||"No analysis summary available"})]})})]}),r==="employees"&&t.jsxs("div",{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(te,{className:"w-5 h-5 mr-2"}),"Similar ",e.comparisonType==="stayed"?"Retained":"Resigned"," Employees"]}),e.similarEmployees?.length>0?t.jsx("div",{className:"space-y-4",children:e.similarEmployees.slice(0,10).map((c,d)=>t.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-10 h-10 rounded-full ${o.bg} flex items-center justify-center text-white mr-4 text-sm font-bold`,children:c.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:c.name}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.position," • ",c.department]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(c.similarityScore*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Similarity"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[c.tenure,"y"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Tenure"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:`text-lg font-bold ${a(c.risk)}`,children:[(c.risk*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Risk"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-purple-600",children:c.stage}),t.jsx("div",{className:"text-xs text-gray-500",children:"Stage"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-emerald-600",children:[(c.mlScore*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"ML Score"})]})]}),c.commonPatterns?.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Common Patterns:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:c.commonPatterns.map((m,u)=>t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-200 text-xs rounded-full",children:m},u))})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-600 rounded-lg p-3 border border-gray-200 dark:border-gray-500",children:[t.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 text-sm",children:"AI Analysis:"}),t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:c.reasoning||"No detailed reasoning available"})]})]},d))}):t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(te,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),t.jsxs("p",{children:["No similar ",e.comparisonType," employees found"]})]})]}),r==="patterns"&&t.jsxs("div",{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[t.jsx(ke,{className:"w-5 h-5 mr-2"}),"Pattern Analysis"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-4",children:"Department Distribution"}),t.jsx("div",{className:"space-y-3",children:Object.entries(e.patterns?.departmentDistribution||{}).map(([c,d])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:c}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:d}),t.jsx("div",{className:"w-16 bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d/(e.patterns?.totalSimilar||1)*100}%`}})})]})]},c))})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[t.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-200 mb-4",children:"Position Distribution"}),t.jsx("div",{className:"space-y-3",children:Object.entries(e.patterns?.positionDistribution||{}).map(([c,d])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-purple-800 dark:text-purple-200",children:c}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:d}),t.jsx("div",{className:"w-16 bg-purple-200 dark:bg-purple-800 rounded-full h-2",children:t.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${d/(e.patterns?.totalSimilar||1)*100}%`}})})]})]},c))})]}),t.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-6 border border-orange-200 dark:border-orange-800",children:[t.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-200 mb-4",children:"Risk Level Distribution"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:"Low Risk (<40%)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-orange-900 dark:text-orange-100",children:e.patterns?.riskDistribution?.low||0}),t.jsx("div",{className:"w-16 bg-green-200 dark:bg-green-800 rounded-full h-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${(e.patterns?.riskDistribution?.low||0)/(e.patterns?.totalSimilar||1)*100}%`}})})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:"Medium Risk (40-70%)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-orange-900 dark:text-orange-100",children:e.patterns?.riskDistribution?.medium||0}),t.jsx("div",{className:"w-16 bg-orange-200 dark:bg-orange-800 rounded-full h-2",children:t.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${(e.patterns?.riskDistribution?.medium||0)/(e.patterns?.totalSimilar||1)*100}%`}})})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:"High Risk (>70%)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-orange-900 dark:text-orange-100",children:e.patterns?.riskDistribution?.high||0}),t.jsx("div",{className:"w-16 bg-red-200 dark:bg-red-800 rounded-full h-2",children:t.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:`${(e.patterns?.riskDistribution?.high||0)/(e.patterns?.totalSimilar||1)*100}%`}})})]})]})]})]}),t.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-6 border border-emerald-200 dark:border-emerald-800",children:[t.jsx("h4",{className:"font-semibold text-emerald-900 dark:text-emerald-200 mb-4",children:"Behavioral Stage Distribution"}),t.jsx("div",{className:"space-y-3",children:Object.entries(e.patterns?.stageDistribution||{}).map(([c,d])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-emerald-800 dark:text-emerald-200",children:c}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-emerald-900 dark:text-emerald-100",children:d}),t.jsx("div",{className:"w-16 bg-emerald-200 dark:bg-emerald-800 rounded-full h-2",children:t.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${d/(e.patterns?.totalSimilar||1)*100}%`}})})]})]},c))})]})]}),t.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-700 rounded-xl p-6 border border-gray-200 dark:border-gray-600",children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Summary Statistics"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.patterns?.totalSimilar||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"Total Similar"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[((e.patterns?.averageSimilarity||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Similarity"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:Object.keys(e.patterns?.departmentDistribution||{}).length}),t.jsx("div",{className:"text-xs text-gray-500",children:"Departments"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Object.keys(e.patterns?.positionDistribution||{}).length}),t.jsx("div",{className:"text-xs text-gray-500",children:"Positions"})]})]})]})]}),r==="insights"&&t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-4 flex items-center",children:[t.jsx(Be,{className:"w-5 h-5 mr-2"}),"Common Factors"]}),e.insights?.commonFactors?.length>0?t.jsx("div",{className:"space-y-3",children:e.insights.commonFactors.map((c,d)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:c})]},d))}):t.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-center py-4",children:"No common factors identified"})]}),t.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-6 border border-orange-200 dark:border-orange-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-900 dark:text-orange-200 mb-4 flex items-center",children:[t.jsx(ae,{className:"w-5 h-5 mr-2"}),"Differentiating Factors"]}),e.insights?.differentiatingFactors?.length>0?t.jsx("div",{className:"space-y-3",children:e.insights.differentiatingFactors.map((c,d)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:c})]},d))}):t.jsx("p",{className:"text-orange-700 dark:text-orange-300 text-center py-4",children:"No significant differences identified"})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 border border-red-200 dark:border-red-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-4 flex items-center",children:[t.jsx(pe,{className:"w-5 h-5 mr-2"}),"Risk Patterns"]}),e.insights?.riskPatterns?.length>0?t.jsx("div",{className:"space-y-3",children:e.insights.riskPatterns.map((c,d)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-red-800 dark:text-red-200",children:c})]},d))}):t.jsx("p",{className:"text-red-700 dark:text-red-300 text-center py-4",children:"No risk patterns identified"})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-200 mb-4 flex items-center",children:[t.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Recommendations"]}),e.insights?.recommendations?.length>0?t.jsx("div",{className:"space-y-3",children:e.insights.recommendations.map((c,d)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:d+1}),t.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:c})]},d))}):t.jsx("p",{className:"text-green-700 dark:text-green-300 text-center py-4",children:"No specific recommendations generated"})]})]})}),t.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Comparison Summary"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.summary})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.similarEmployees?.length||0}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Similar ",e.comparisonType==="stayed"?"Retained":"Resigned"]})]})]})})]})},t0={h1:({children:e})=>t.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:e}),h2:({children:e})=>t.jsx("h2",{className:"text-xl font-semibold mb-3 text-gray-900 dark:text-white",children:e}),h3:({children:e})=>t.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900 dark:text-white",children:e}),p:({children:e})=>t.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 leading-relaxed",children:e}),ul:({children:e})=>t.jsx("ul",{className:"list-disc list-inside mb-2 text-gray-700 dark:text-gray-300",children:e}),ol:({children:e})=>t.jsx("ol",{className:"list-decimal list-inside mb-2 text-gray-700 dark:text-gray-300",children:e}),li:({children:e})=>t.jsx("li",{className:"mb-1",children:e}),strong:({children:e})=>t.jsx("strong",{className:"font-semibold text-gray-900 dark:text-white",children:e}),em:({children:e})=>t.jsx("em",{className:"italic text-gray-700 dark:text-gray-300",children:e}),code:({children:e})=>t.jsx("code",{className:"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:e})},Wr=({data:e})=>{const n=ot(),[r,i]=F.useState("overview");F.useState(null);const s=e.statistics.totalEmployees,a=s>0?(e.statistics.highRisk/s*100).toFixed(1):"0.0",l=s>0?(e.statistics.mediumRisk/s*100).toFixed(1):"0.0",o=s>0?(e.statistics.lowRisk/s*100).toFixed(1):"0.0",c=u=>u>=80?{bg:"bg-green-500",text:"text-green-600",light:"bg-green-50 dark:bg-green-900/20"}:u>=60?{bg:"bg-yellow-500",text:"text-yellow-600",light:"bg-yellow-50 dark:bg-yellow-900/20"}:u>=40?{bg:"bg-orange-500",text:"text-orange-600",light:"bg-orange-50 dark:bg-orange-900/20"}:{bg:"bg-red-500",text:"text-red-600",light:"bg-red-50 dark:bg-red-900/20"},d=e.insights?.organizationalHealth?.overallScore||50,m=c(d);return t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsxs("div",{className:`${m.light} border-b p-8`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-16 h-16 rounded-full ${m.bg} flex items-center justify-center text-white mr-6 shadow-lg`,children:t.jsx(pe,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Workforce Risk Analysis"}),t.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:"Organization-wide retention insights"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.summary})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:`text-5xl font-bold ${m.text} mb-2`,children:d}),t.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border-2 ${e.insights?.organizationalHealth?.riskLevel==="Critical"?"bg-red-100 text-red-800 border-red-300":e.insights?.organizationalHealth?.riskLevel==="High"?"bg-orange-100 text-orange-800 border-orange-300":e.insights?.organizationalHealth?.riskLevel==="Medium"?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-green-100 text-green-800 border-green-300"}`,children:[t.jsx(pe,{className:"w-4 h-4 mr-2"}),e.insights?.organizationalHealth?.riskLevel||"Medium"," Risk"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.toLocaleString()}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Total Employees"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:e.statistics.highRisk}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:["High Risk (",a,"%)"]})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.statistics.riskTrends?.criticalEmployees||0}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Critical (>80%)"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:e.statistics.riskTrends?.atRiskDepartments||0}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"At-Risk Departments"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[e.statistics.riskTrends?.averageConfidence?(e.statistics.riskTrends.averageConfidence*100).toFixed(0):"0","%"]}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"AI Confidence"})]})]})]}),t.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[t.jsxs("button",{onClick:()=>i("overview"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="overview"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(ke,{className:"w-4 h-4 inline mr-2"}),"Health Overview"]}),t.jsxs("button",{onClick:()=>i("departments"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="departments"?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Departments"]}),t.jsxs("button",{onClick:()=>i("positions"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="positions"?"bg-white dark:bg-gray-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(nt,{className:"w-4 h-4 inline mr-2"}),"Positions"]}),t.jsxs("button",{onClick:()=>i("recommendations"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${r==="recommendations"?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(Ve,{className:"w-4 h-4 inline mr-2"}),"Recommendations"]})]})}),t.jsxs("div",{className:"p-6 min-h-[400px]",children:[r==="overview"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-4 flex items-center",children:[t.jsx(pe,{className:"w-5 h-5 mr-2"}),"Organizational Health"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Health Score:"}),t.jsxs("span",{className:`text-2xl font-bold ${m.text}`,children:[d,"/100"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Risk Level:"}),t.jsx("span",{className:`font-semibold ${e.insights?.organizationalHealth?.riskLevel==="Critical"?"text-red-600":e.insights?.organizationalHealth?.riskLevel==="High"?"text-orange-600":e.insights?.organizationalHealth?.riskLevel==="Medium"?"text-yellow-600":"text-green-600"}`,children:e.insights?.organizationalHealth?.riskLevel||"Medium"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Confidence Level:"}),t.jsx("span",{className:`font-semibold ${e.insights?.organizationalHealth?.confidenceLevel==="High"?"text-green-600":e.insights?.organizationalHealth?.confidenceLevel==="Medium"?"text-yellow-600":"text-red-600"}`,children:e.insights?.organizationalHealth?.confidenceLevel||"Medium"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6 border border-gray-200 dark:border-gray-600",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(ke,{className:"w-5 h-5 mr-2"}),"Risk Distribution"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Low Risk"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${e.statistics.lowRisk/s*100}%`}})}),t.jsxs("span",{className:"text-sm font-semibold text-green-600 min-w-[60px]",children:[e.statistics.lowRisk," (",o,"%)"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Medium Risk"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:t.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${e.statistics.mediumRisk/s*100}%`}})}),t.jsxs("span",{className:"text-sm font-semibold text-orange-600 min-w-[60px]",children:[e.statistics.mediumRisk," (",l,"%)"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"High Risk"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:t.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${e.statistics.highRisk/s*100}%`}})}),t.jsxs("span",{className:"text-sm font-semibold text-red-600 min-w-[60px]",children:[e.statistics.highRisk," (",a,"%)"]})]})]})]})]})]}),e.insights?.organizationalHealth?.priorityAreas&&e.insights.organizationalHealth.priorityAreas.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(ae,{className:"w-5 h-5 mr-2 text-orange-500"}),"Priority Areas"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.insights.organizationalHealth.priorityAreas.map((u,g)=>t.jsxs("div",{className:"flex items-start p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[t.jsx("div",{className:"w-6 h-6 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:g+1}),t.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:u})]},g))})]}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(Le,{className:"w-5 h-5 mr-2 text-purple-500"}),"AI Analysis"]}),t.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:t.jsx("div",{className:"prose prose-sm max-w-none dark:prose-dark",children:t.jsx(at,{remarkPlugins:[lt],components:t0,children:e.insights?.detailedAnalysis||e.analysis})})})]})]}),r==="departments"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[t.jsx(te,{className:"w-5 h-5 mr-2"}),"Department Risk Analysis"]}),e.statistics.departmentRisks.length>0?t.jsx("div",{className:"space-y-4",children:e.statistics.departmentRisks.map((u,g)=>t.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white mr-4 ${u.avgRisk>n.highRisk?"bg-red-500":u.avgRisk>n.mediumRisk?"bg-orange-500":"bg-green-500"}`,children:t.jsx(te,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:u.department}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u.count," employees"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-3xl font-bold ${u.avgRisk>n.highRisk?"text-red-600":u.avgRisk>n.mediumRisk?"text-orange-600":"text-green-600"}`,children:[(u.avgRisk*100).toFixed(1),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Risk"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-red-600",children:u.highRiskCount||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"High Risk"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[((u.avgMLScore||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg ML Score"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[((u.avgStageScore||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Stage Score"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-emerald-600",children:[((u.avgConfidence||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Confidence"})]})]})]},g))}):t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(te,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),t.jsx("p",{children:"No department data available"})]})]}),r==="positions"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[t.jsx(nt,{className:"w-5 h-5 mr-2"}),"Position Risk Analysis"]}),e.statistics.positionRisks.length>0?t.jsx("div",{className:"space-y-4",children:e.statistics.positionRisks.map((u,g)=>t.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white mr-4 ${u.avgRisk>n.highRisk?"bg-red-500":u.avgRisk>n.mediumRisk?"bg-orange-500":"bg-green-500"}`,children:t.jsx(nt,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:u.position}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u.count," employees"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-3xl font-bold ${u.avgRisk>n.highRisk?"text-red-600":u.avgRisk>n.mediumRisk?"text-orange-600":"text-green-600"}`,children:[(u.avgRisk*100).toFixed(1),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Risk"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-red-600",children:u.highRiskCount||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"High Risk"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[((u.avgMLScore||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg ML Score"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[((u.avgStageScore||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Stage Score"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-emerald-600",children:[((u.avgConfidence||0)*100).toFixed(0),"%"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Avg Confidence"})]})]})]},g))}):t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(nt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),t.jsx("p",{children:"No position data available"})]})]}),r==="recommendations"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 border border-red-200 dark:border-red-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-4 flex items-center",children:[t.jsx(ae,{className:"w-5 h-5 mr-2"}),"Urgent Actions Required"]}),e.insights?.urgentActions&&e.insights.urgentActions.length>0||e.urgentActions&&e.urgentActions.length>0?t.jsx("div",{className:"space-y-3",children:(e.insights?.urgentActions||e.urgentActions||[]).map((u,g)=>t.jsxs("div",{className:"flex items-start p-4 bg-white dark:bg-gray-700 rounded-lg border border-red-200 dark:border-red-700",children:[t.jsx("div",{className:"w-6 h-6 bg-red-100 text-red-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:"!"}),t.jsx("span",{className:"text-sm text-red-800 dark:text-red-200 leading-relaxed",children:u})]},g))}):t.jsx("p",{className:"text-red-700 dark:text-red-300 text-center py-4",children:"No urgent actions identified"})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-200 mb-4 flex items-center",children:[t.jsx(St,{className:"w-5 h-5 mr-2"}),"Strategic Recommendations"]}),e.insights?.strategicRecommendations&&e.insights.strategicRecommendations.length>0||e.recommendations&&e.recommendations.length>0?t.jsx("div",{className:"space-y-3",children:(e.insights?.strategicRecommendations||e.recommendations||[]).map((u,g)=>t.jsxs("div",{className:"flex items-start p-4 bg-white dark:bg-gray-700 rounded-lg border border-green-200 dark:border-green-700",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:g+1}),t.jsx("span",{className:"text-sm text-green-800 dark:text-green-200 leading-relaxed",children:u})]},g))}):t.jsx("p",{className:"text-green-700 dark:text-green-300 text-center py-4",children:"No strategic recommendations available"})]})]}),e.insights?.trendAnalysis&&t.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-4 flex items-center",children:[t.jsx(pe,{className:"w-5 h-5 mr-2"}),"Trend Analysis"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Overall Trend"}),t.jsx("p",{className:`text-sm font-semibold px-3 py-1 rounded-full inline-block ${e.insights.trendAnalysis.riskTrend==="Critical"?"bg-red-100 text-red-800":e.insights.trendAnalysis.riskTrend==="Concerning"?"bg-orange-100 text-orange-800":e.insights.trendAnalysis.riskTrend==="Stable"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:e.insights.trendAnalysis.riskTrend})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Confidence Level"}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e.insights.trendAnalysis.confidenceTrends})]})]})]})]})]}),e.error&&t.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 bg-amber-50 dark:bg-amber-900/20",children:t.jsxs("div",{className:"flex items-center text-amber-800 dark:text-amber-200",children:[t.jsx(ae,{className:"w-4 h-4 mr-2"}),t.jsx("span",{className:"text-sm",children:e.error==="ai_error"?"AI analysis unavailable - showing statistical summary":"Limited data available"})]})})]})},n0={h1:({children:e})=>t.jsx("h1",{className:"text-xl font-bold mb-3 text-gray-900 dark:text-white",children:e}),h2:({children:e})=>t.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-white",children:e}),h3:({children:e})=>t.jsx("h3",{className:"text-base font-medium mb-2 text-gray-900 dark:text-white",children:e}),p:({children:e})=>t.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:e}),ul:({children:e})=>t.jsx("ul",{className:"list-disc list-inside mb-2 text-gray-700 dark:text-gray-300 text-sm",children:e}),ol:({children:e})=>t.jsx("ol",{className:"list-decimal list-inside mb-2 text-gray-700 dark:text-gray-300 text-sm",children:e}),li:({children:e})=>t.jsx("li",{className:"mb-1",children:e}),strong:({children:e})=>t.jsx("strong",{className:"font-semibold text-gray-900 dark:text-white",children:e}),em:({children:e})=>t.jsx("em",{className:"italic text-gray-700 dark:text-gray-300",children:e}),code:({children:e})=>t.jsx("code",{className:"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono",children:e})},Kr=({data:e})=>{const n=ot(),[r,i]=F.useState("overview");if(e.error)return t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 my-4",children:t.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[t.jsx(ae,{className:"w-5 h-5 mr-2"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Department Analysis Error"}),t.jsx("p",{className:"text-sm",children:e.message})]})]})});const s=e.departments?.length||0,a=e.departments?.filter(d=>d.avgRisk>n.highRisk).length||0,l=e.departments?.filter(d=>d.avgRisk>n.mediumRisk&&d.avgRisk<=n.highRisk).length||0,o=e.departments?.filter(d=>d.avgRisk<=n.mediumRisk).length||0,c=e.departments?.reduce((d,m)=>d+m.totalEmployees,0)||0;return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 my-4",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(gt,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.analysisType==="specific"?`${e.targetDepartment} Department Analysis`:"Department Analysis"}),t.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded",children:"Risk Overview"})]}),e.summary&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.summary})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.jsx("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-600 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-all duration-200",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:t.jsx(gt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:s}),t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Total Departments"})]})]})})}),t.jsx("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-600 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 transition-all duration-200",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:"p-2 rounded-lg bg-red-50 dark:bg-red-900/20",children:t.jsx(ae,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:a}),t.jsx("p",{className:"text-xs text-red-700 dark:text-red-300",children:"High Risk"})]})]})})}),t.jsx("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-600 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 transition-all duration-200",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-50 dark:bg-green-900/20",children:t.jsx(Be,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:o}),t.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"Low Risk"})]})]})})}),t.jsx("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-600 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-all duration-200",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:t.jsx(te,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:c.toLocaleString()}),t.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:"Total Employees"})]})]})})})]}),t.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[{id:"overview",label:"Overview",icon:ke},{id:"departments",label:"Departments",icon:gt},{id:"insights",label:"Insights",icon:Le}].map(({id:d,label:m,icon:u})=>t.jsxs("button",{onClick:()=>i(d),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${r===d?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(u,{size:14}),m]},d))}),t.jsxs("div",{className:"min-h-[300px]",children:[r==="overview"&&t.jsxs("div",{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-medium text-red-900 dark:text-red-200 text-sm",children:"High Risk"}),t.jsx("span",{className:"text-xl font-bold text-red-600",children:a})]}),t.jsx("div",{className:"w-full bg-red-200 dark:bg-red-800 rounded-full h-2",children:t.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-500",style:{width:`${s>0?a/s*100:0}%`}})}),t.jsxs("p",{className:"text-xs text-red-600 mt-2",children:[s>0?(a/s*100).toFixed(1):0,"% of departments"]})]}),t.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-medium text-orange-900 dark:text-orange-200 text-sm",children:"Medium Risk"}),t.jsx("span",{className:"text-xl font-bold text-orange-600",children:l})]}),t.jsx("div",{className:"w-full bg-orange-200 dark:bg-orange-800 rounded-full h-2",children:t.jsx("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-500",style:{width:`${s>0?l/s*100:0}%`}})}),t.jsxs("p",{className:"text-xs text-orange-600 mt-2",children:[s>0?(l/s*100).toFixed(1):0,"% of departments"]})]}),t.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-medium text-green-900 dark:text-green-200 text-sm",children:"Low Risk"}),t.jsx("span",{className:"text-xl font-bold text-green-600",children:o})]}),t.jsx("div",{className:"w-full bg-green-200 dark:bg-green-800 rounded-full h-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:`${s>0?o/s*100:0}%`}})}),t.jsxs("p",{className:"text-xs text-green-600 mt-2",children:[s>0?(o/s*100).toFixed(1):0,"% of departments"]})]})]}),e.insights?.detailedAnalysis&&t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[t.jsxs("h4",{className:"font-medium text-blue-900 dark:text-blue-200 mb-3 flex items-center text-sm",children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"AI Analysis"]}),t.jsx("div",{className:"prose prose-sm max-w-none dark:prose-dark",children:t.jsx(at,{remarkPlugins:[lt],components:n0,children:e.insights.detailedAnalysis})})]})]}),r==="departments"&&t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-4 flex items-center text-sm",children:[t.jsx(gt,{className:"w-4 h-4 mr-2"}),"Department Rankings"]}),e.departments&&e.departments.length>0?t.jsx("div",{className:"space-y-3",children:e.departments.sort((d,m)=>m.avgRisk-d.avgRisk).slice(0,5).map((d,m)=>{const u=ps(d.avgRisk,n),g=u==="High"?"text-red-600":u==="Medium"?"text-orange-600":"text-green-600",h=u==="High"?"bg-red-50 dark:bg-red-900/20":u==="Medium"?"bg-orange-50 dark:bg-orange-900/20":"bg-green-50 dark:bg-green-900/20";return t.jsx("div",{className:`p-3 ${h} rounded-lg border border-gray-200 dark:border-gray-600`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("span",{className:"text-sm font-bold text-gray-500 w-6",children:["#",m+1]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:d.department}),t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[d.totalEmployees," employees"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-lg font-bold ${g}`,children:[(d.avgRisk*100).toFixed(1),"%"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[u," Risk"]})]})]})},m)})}):t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(gt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),t.jsx("p",{className:"text-sm",children:"No department data available"})]})]}),r==="insights"&&t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-4 flex items-center text-sm",children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"Key Insights & Recommendations"]}),t.jsxs("div",{className:"space-y-4",children:[e.insights?.organizationalInsights&&e.insights.organizationalInsights.length>0&&t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[t.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-200 mb-3 text-sm",children:"Organizational Insights"}),t.jsx("div",{className:"space-y-2",children:e.insights.organizationalInsights.slice(0,3).map((d,m)=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("span",{className:"w-4 h-4 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center text-xs font-bold text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0",children:m+1}),t.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 leading-relaxed",children:d})]},m))})]}),e.insights?.strategicRecommendations&&e.insights.strategicRecommendations.length>0&&t.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[t.jsxs("h5",{className:"font-medium text-green-900 dark:text-green-200 mb-3 text-sm flex items-center",children:[t.jsx(Ve,{className:"w-4 h-4 mr-1"}),"Strategic Recommendations"]}),t.jsx("div",{className:"space-y-2",children:e.insights.strategicRecommendations.slice(0,3).map((d,m)=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("span",{className:"w-4 h-4 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center text-xs font-bold text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0",children:m+1}),t.jsx("p",{className:"text-sm text-green-800 dark:text-green-200 leading-relaxed",children:d})]},m))})]}),e.insights?.urgentActions&&e.insights.urgentActions.length>0&&t.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[t.jsxs("h5",{className:"font-medium text-orange-900 dark:text-orange-200 mb-3 text-sm flex items-center",children:[t.jsx(ae,{className:"w-4 h-4 mr-1"}),"Urgent Actions"]}),t.jsx("div",{className:"space-y-2",children:e.insights.urgentActions.slice(0,3).map((d,m)=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(ae,{className:"w-4 h-4 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),t.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 leading-relaxed",children:d})]},m))})]}),!e.insights?.organizationalInsights?.length&&!e.insights?.strategicRecommendations?.length&&!e.insights?.urgentActions?.length&&t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(Le,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),t.jsx("p",{className:"text-sm",children:"No insights available"})]})]})]})]})]})]})},r0={h1:({children:e})=>t.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:e}),h2:({children:e})=>t.jsx("h2",{className:"text-xl font-semibold mb-3 text-gray-900 dark:text-white",children:e}),h3:({children:e})=>t.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900 dark:text-white",children:e}),p:({children:e})=>t.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 leading-relaxed",children:e}),ul:({children:e})=>t.jsx("ul",{className:"list-disc list-inside mb-2 text-gray-700 dark:text-gray-300",children:e}),ol:({children:e})=>t.jsx("ol",{className:"list-decimal list-inside mb-2 text-gray-700 dark:text-gray-300",children:e}),li:({children:e})=>t.jsx("li",{className:"mb-1",children:e}),strong:({children:e})=>t.jsx("strong",{className:"font-semibold text-gray-900 dark:text-white",children:e}),em:({children:e})=>t.jsx("em",{className:"italic text-gray-700 dark:text-gray-300",children:e}),code:({children:e})=>t.jsx("code",{className:"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:e})},Gr=({data:e})=>{const[n,r]=F.useState("overview");if(e.error)return t.jsx("div",{className:"border rounded-xl bg-white dark:bg-gray-800 shadow-lg my-4 p-6",children:t.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[t.jsx(ae,{className:"w-5 h-5 mr-2"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Exit Pattern Analysis Error"}),t.jsx("p",{className:"text-sm",children:e.message})]})]})});const i=e.insights?.urgencyLevel==="High"?"text-red-600":e.insights?.urgencyLevel==="Medium"?"text-orange-600":"text-green-600";return t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border-b p-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center text-white mr-6 shadow-lg",children:t.jsx(Lt,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Exit Pattern Analysis"}),t.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:"Comprehensive departure pattern insights"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.summary})]})]}),e.insights&&t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:e.exitData?.totalResignations||0}),t.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border-2 ${i} border-current`,children:[t.jsx(ae,{className:"w-4 h-4 mr-2"}),e.insights.urgencyLevel," Priority"]})]})]}),e.exitData&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:e.exitData.departmentPatterns?.length||0}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Affected Departments"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:e.insights?.patternSummary?.mostCommonTenureExit||"N/A"}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Common Exit Tenure"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.exitData.commonRiskFactors?.length||0}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Risk Factors"})]}),t.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-sm",children:[t.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:e.insights?.patternSummary?.mostAffectedDepartment||"N/A"}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Top Affected Dept"})]})]})]}),t.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[t.jsxs("button",{onClick:()=>r("overview"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${n==="overview"?"bg-white dark:bg-gray-600 text-orange-600 dark:text-orange-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(ke,{className:"w-4 h-4 inline mr-2"}),"Overview"]}),t.jsxs("button",{onClick:()=>r("departments"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${n==="departments"?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Departments"]}),t.jsxs("button",{onClick:()=>r("patterns"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${n==="patterns"?"bg-white dark:bg-gray-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(Lt,{className:"w-4 h-4 inline mr-2"}),"Patterns"]}),t.jsxs("button",{onClick:()=>r("recommendations"),className:`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all ${n==="recommendations"?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(Ve,{className:"w-4 h-4 inline mr-2"}),"Prevention"]})]})}),t.jsxs("div",{className:"p-6 min-h-[400px]",children:[n==="overview"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.insights?.detailedAnalysis&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(Le,{className:"w-5 h-5 mr-2 text-purple-500"}),"AI Analysis"]}),t.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:t.jsx("div",{className:"prose prose-sm max-w-none dark:prose-dark",children:t.jsx(at,{remarkPlugins:[lt],components:r0,children:e.insights.detailedAnalysis})})})]}),e.insights?.keyPatterns&&e.insights.keyPatterns.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[t.jsx(Lt,{className:"w-5 h-5 mr-2 text-orange-500"}),"Key Exit Patterns"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.insights.keyPatterns.map((s,a)=>t.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-6 h-6 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:a+1}),t.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:s})]})},a))})]})]}),n==="departments"&&t.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[t.jsx(te,{className:"w-5 h-5 mr-2"}),"Department Exit Patterns"]}),e.exitData?.departmentPatterns&&e.exitData.departmentPatterns.length>0?t.jsx("div",{className:"space-y-4",children:e.exitData.departmentPatterns.map((s,a)=>t.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white mr-4 ${s.resignation_count>10?"bg-red-500":s.resignation_count>5?"bg-orange-500":"bg-yellow-500"}`,children:t.jsx(te,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:s.department}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Avg tenure at exit: ",s.avg_tenure?.toFixed(1)||"N/A"," years"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.resignation_count}),t.jsx("div",{className:"text-xs text-gray-500",children:"Resignations"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-red-600",children:s.early_exits||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"Early Exits"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-orange-600",children:s.mid_tenure_exits||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"Mid-Tenure"})]}),t.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-600 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-blue-600",children:s.senior_exits||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"Senior Exits"})]})]})]},a))}):t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(te,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),t.jsx("p",{children:"No department exit data available"})]})]}),n==="patterns"&&t.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-4 flex items-center",children:[t.jsx(An,{className:"w-5 h-5 mr-2"}),"Tenure Exit Patterns"]}),e.exitData?.tenurePatterns&&e.exitData.tenurePatterns.length>0?t.jsx("div",{className:"space-y-3",children:e.exitData.tenurePatterns.map((s,a)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:s.tenure_range}),t.jsx("span",{className:"text-lg font-bold text-blue-600",children:s.resignation_count})]},a))}):t.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"No tenure patterns available"})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 border border-red-200 dark:border-red-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-4 flex items-center",children:[t.jsx(ae,{className:"w-5 h-5 mr-2"}),"Common Risk Factors"]}),e.exitData?.commonRiskFactors&&e.exitData.commonRiskFactors.length>0?t.jsx("div",{className:"space-y-3",children:e.exitData.commonRiskFactors.slice(0,5).map((s,a)=>t.jsxs("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:s.factor}),t.jsxs("span",{className:"text-sm font-bold text-red-600",children:[s.frequency,"x"]})]}),t.jsx("div",{className:"text-xs text-gray-500 capitalize",children:s.type.replace("_"," ")})]},a))}):t.jsx("p",{className:"text-red-700 dark:text-red-300",children:"No risk factor patterns available"})]})]})}),n==="recommendations"&&t.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-200 mb-4 flex items-center",children:[t.jsx(St,{className:"w-5 h-5 mr-2"}),"Preventive Strategies"]}),e.insights?.preventiveStrategies&&e.insights.preventiveStrategies.length>0?t.jsx("div",{className:"space-y-3",children:e.insights.preventiveStrategies.map((s,a)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:a+1}),t.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:s})]},a))}):t.jsx("p",{className:"text-green-700 dark:text-green-300",children:"No preventive strategies available"})]}),t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-800",children:[t.jsxs("h3",{className:"text-lg font-semibold text-yellow-900 dark:text-yellow-200 mb-4 flex items-center",children:[t.jsx(ae,{className:"w-5 h-5 mr-2"}),"Early Warning Signs"]}),e.insights?.riskIndicators&&e.insights.riskIndicators.length>0?t.jsx("div",{className:"space-y-3",children:e.insights.riskIndicators.map((s,a)=>t.jsxs("div",{className:"flex items-start p-3 bg-white dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"w-6 h-6 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0",children:"!"}),t.jsx("span",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:s})]},a))}):t.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:"No risk indicators available"})]})]})})]})]})},Yr=({data:e})=>t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsxs("div",{className:"border-b p-6 bg-gray-50 dark:bg-gray-700/30 flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500 text-white flex items-center justify-center",children:t.jsx(te,{size:20})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Peer Comparison"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.targetEmployeeName," vs ",e.retainedPeerGroupName]})]})]}),t.jsx("div",{className:"p-6 space-y-3",children:e.comparisonFactors?.length?e.comparisonFactors.map((n,r)=>t.jsxs("div",{className:"p-4 rounded-lg border bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n.factor}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[t.jsx(ds,{size:14}),"Peer Avg: ",n.peerAverage]})]}),t.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:["Target: ",n.targetValue]}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.insight})]},r)):t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No comparison factors available."})}),e.summaryInsight&&t.jsx("div",{className:"p-6 border-t bg-gray-50 dark:bg-gray-700/30 border-gray-200 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-200",children:e.summaryInsight})]}),Qr=({data:e})=>t.jsxs("div",{className:"border rounded-2xl bg-white dark:bg-gray-800 shadow-2xl my-6 overflow-hidden",children:[t.jsxs("div",{className:"border-b p-6 bg-gray-50 dark:bg-gray-700/30 flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500 text-white flex items-center justify-center",children:t.jsx(us,{size:20})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Exit Pattern Mining"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"AI-identified organizational exit patterns"})]})]}),t.jsx("div",{className:"p-6 space-y-3",children:e.patterns?.length?e.patterns.map((n,r)=>t.jsxs("div",{className:"p-4 rounded-lg border bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n.pattern}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[typeof n.percentage=="number"?`Frequency: ${(n.percentage*100).toFixed(1)}%`:"",typeof n.count=="number"?` • Count: ${n.count}`:"",n.context?` • ${n.context}`:""]})]},r)):t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No patterns found."})}),e.summary&&t.jsx("div",{className:"p-6 border-t bg-gray-50 dark:bg-gray-700/30 border-gray-200 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-200",children:e.summary})]}),Xr={p:({children:e})=>t.jsx("p",{className:"mb-2 last:mb-0",children:e}),ul:({children:e})=>t.jsx("ul",{className:"list-disc pl-4 mb-2",children:e}),ol:({children:e})=>t.jsx("ol",{className:"list-decimal pl-4 mb-2",children:e}),li:({children:e})=>t.jsx("li",{className:"mb-1",children:e}),a:({children:e,href:n})=>t.jsx("a",{href:n,className:"text-app-green hover:underline dark:text-app-green-darkmode",target:"_blank",rel:"noopener noreferrer",children:e}),code:({children:e,inline:n,...r})=>n?t.jsx("code",{className:"bg-gray-100 px-1 rounded dark:bg-dark-700 dark:text-gray-100",...r,children:e}):t.jsx("code",{className:"block bg-gray-100 p-2 rounded dark:bg-dark-700 dark:text-gray-100",...r,children:e})},i0=["analyze","analysis","diagnose","compare","plan","pattern","trend","insight","strategy","playbook","recommend"],is=(e,n)=>{const r=e.toLowerCase();return i0.some(i=>r.includes(i))||n?"analysis":"chat"},s0=(e,n,r)=>{const i=e.timestamp?new Date(e.timestamp):new Date,s=e.id?String(e.id):`msg-${n}-${i.getTime()}`;return{...e,id:s,timestamp:i,responseKind:e.role==="assistant"?is(e.message,r):"chat"}},a0=()=>t.jsxs("div",{className:"p-4 mb-4 ml-2 mr-12 flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-blue-500 flex items-center justify-center text-white flex-shrink-0",children:t.jsx(jt,{size:16})}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),t.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.15s"}}),t.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.3s"}})]})]}),ss=()=>t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-300 border-t-app-green dark:border-gray-700 dark:border-t-app-green-darkmode"}),l0=F.memo(({employee:e,isSelected:n,onClick:r,reasoningData:i})=>{const s=i?.churn_risk??e.churnProbability??0;return t.jsxs(W.button,{onClick:r,className:`
        w-full p-3 rounded-lg text-left
        transition-all duration-300
        ${n?"bg-gradient-to-r from-emerald-50 to-transparent dark:from-emerald-900/30 dark:to-transparent border-emerald-200 dark:border-emerald-800":"hover:bg-gray-50 dark:hover:bg-gray-800 border-transparent"}
        border relative group overflow-hidden
        dark:bg-gray-800 dark:text-gray-100
      `,whileHover:{scale:1.02},whileTap:{scale:.98},"data-employee-id":e.id,"data-component":"employee-row",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 via-transparent to-transparent dark:from-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:e.name}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e.position}),t.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 truncate",children:e.department})]}),t.jsx(En,{riskScore:s,size:"sm",showIcon:!0})]})})]})}),o0=F.memo(({isOpen:e,onClose:n,children:r})=>(F.useEffect(()=>(e?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(document.body.style.overflow="unset",document.documentElement.style.overflow="unset"),()=>{document.body.style.overflow="unset",document.documentElement.style.overflow="unset"}),[e]),F.useEffect(()=>{const i=s=>{s.key==="Escape"&&e&&n()};if(e)return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e,n]),e?t.jsxs("div",{className:"fixed inset-0 z-[9999] bg-white dark:bg-gray-900",style:{width:"100vw",height:"100vh",top:0,left:0,position:"fixed"},children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-6 h-6 rounded bg-blue-500 flex items-center justify-center text-white",children:t.jsx(ke,{size:14})}),t.jsx("h2",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Analysis View"})]}),t.jsx("button",{onClick:n,className:"p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 transition-colors","aria-label":"Close full-screen view",children:t.jsx(gs,{size:18})})]}),t.jsx("div",{className:"overflow-auto bg-gray-50 dark:bg-gray-900",style:{height:"calc(100vh - 48px)",width:"100vw"},children:t.jsx("div",{className:"p-4",children:r})})]}):null)),c0=F.memo(({message:e,isContinuation:n=!1})=>{const r=e.role==="assistant",[i,s]=F.useState(!1),[a,l]=F.useState(!1),o=g=>{try{const h=JSON.parse(g);switch(h?.type){case"similarityAnalysis":if(h.targetEmployeeName&&Array.isArray(h.similarEmployees)&&h.explanation)return h;break;case"enhancedSimilarityAnalysis":if(h.targetEmployee&&h.comparisonType&&Array.isArray(h.similarEmployees)&&h.patterns&&h.insights&&h.analysis)return h;break;case"peerRetentionComparison":if(h.targetEmployeeName&&h.retainedPeerGroupName&&Array.isArray(h.comparisonFactors))return h;break;case"enhancedChurnRiskDiagnosis":if(h.targetEmployeeName&&typeof h.overallRisk=="number"&&typeof h.mlScore=="number"&&typeof h.heuristicScore=="number"&&typeof h.stageScore=="number"&&typeof h.confidenceLevel=="number"&&Array.isArray(h.mlContributors)&&Array.isArray(h.heuristicAlerts)&&h.reasoning&&Array.isArray(h.recommendations)&&h.explanation)return h;break;case"enhancedRetentionPlaybook":if(h.targetEmployeeName&&typeof h.currentRisk=="number"&&typeof h.stage=="string"&&Array.isArray(h.primaryRiskFactors)&&Array.isArray(h.actionPlan)&&Array.isArray(h.monitoringMetrics)&&Array.isArray(h.successIndicators)&&typeof h.summary=="string")return h;break;case"retentionPlaybook":if(Array.isArray(h.playbook))return h;break;case"aiReasoningAnalysis":if(h.targetEmployeeName&&typeof h.reasoning.churn_risk=="number"&&typeof h.reasoning.stage=="string"&&typeof h.reasoning.stage_score=="number"&&typeof h.reasoning.ml_score=="number"&&typeof h.reasoning.heuristic_score=="number"&&Array.isArray(h.reasoning.ml_contributors)&&Array.isArray(h.reasoning.heuristic_alerts)&&typeof h.reasoning.reasoning=="string"&&typeof h.reasoning.recommendations=="string"&&typeof h.reasoning.confidence_level=="number")return h;break;case"churn_trends_analysis":if(h.statistics&&typeof h.statistics.totalEmployees=="number"&&typeof h.analysis=="string")return h;break;case"department_analysis":if(h.analysisType&&h.summary)return h;break;case"exit_pattern_mining":if(h.exitData||h.insights||h.summary)return h;break;case"exitPatternMining":if(Array.isArray(h.patterns)&&h.summary)return h;break}}catch{}try{const h=g.match(/\{[\s\S]*?\}(?=\s*$|\s*[^}])/g);if(h)for(const x of h)try{if(JSON.parse(x)?.type){const N=o(x);if(N)return N}}catch{continue}}catch{}return null},c=r?o(e.message):null,d=()=>{if(i&&r)return t.jsx("p",{className:"italic text-gray-500 dark:text-gray-400 text-sm",children:"AI response hidden. Click to expand."});if(c){const g=()=>{switch(c.type){case"similarityAnalysis":return t.jsx(Br,{targetEmployeeName:c.targetEmployeeName,similarEmployees:c.similarEmployees,explanation:c.explanation,comparisonType:c.comparisonType});case"enhancedSimilarityAnalysis":return t.jsx(Vr,{data:c});case"enhancedChurnRiskDiagnosis":return t.jsx(Hr,{data:c});case"enhancedRetentionPlaybook":return t.jsx(Ur,{data:c});case"retentionPlaybook":return t.jsx(qr,{data:c});case"churn_trends_analysis":return t.jsx(Wr,{data:c});case"department_analysis":return t.jsx(Kr,{data:c});case"exit_pattern_mining":return t.jsx(Gr,{data:c});case"peerRetentionComparison":return t.jsx(Yr,{data:c});case"exitPatternMining":return t.jsx(Qr,{data:c});default:return t.jsx(at,{remarkPlugins:[lt],components:Xr,children:e.message})}};return t.jsxs("div",{className:"relative",children:[g(),t.jsx("div",{className:"absolute top-2 right-2 z-20",children:t.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded bg-blue-500 hover:bg-blue-600 text-white transition-colors","aria-label":"Open in full-screen view",title:"Full Screen",children:t.jsx(hs,{size:16})})})]})}else return t.jsx(at,{remarkPlugins:[lt],components:Xr,children:e.message})},m=e.timestamp?new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null,u=typeof e.confidence=="number"?e.confidence>1?e.confidence:e.confidence*100:null;return t.jsxs(W.div,{layout:!0,initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.98},transition:{type:"spring",stiffness:380,damping:28,mass:.8},className:`flex mb-4 ${r?"justify-start":"justify-end"}`,"data-message-id":e.id,children:[t.jsxs("div",{className:`relative max-w-[85%] ${r?"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm":"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-md"} rounded-2xl overflow-hidden transition-shadow ${e.isOptimistic?"opacity-80":""}`,children:[r&&t.jsx("button",{onClick:()=>s(!i),className:"absolute top-2 right-2 p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 z-10","aria-label":i?"Expand message":"Collapse message",children:i?t.jsx(Ct,{size:14}):t.jsx(Jr,{size:14})}),t.jsxs("div",{className:`flex items-start gap-3 p-3 ${r?"":"flex-row-reverse"}`,children:[t.jsx("div",{className:`flex-shrink-0 mt-0.5 ${n?"invisible":""}`,children:r?t.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-emerald-400 to-blue-500 flex items-center justify-center text-white shadow-md",children:t.jsx(jt,{size:14})}):t.jsx("div",{className:"w-7 h-7 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center text-white shadow-md",children:t.jsx(nt,{size:14})})}),t.jsxs("div",{className:`flex-1 min-w-0 ${r&&i?"pr-8":""}`,children:[t.jsxs("div",{className:`text-xs font-medium mb-1 flex items-center gap-2 ${r?"text-gray-700 dark:text-gray-300":"text-white/90"}`,children:[t.jsx("span",{children:r?"AI Assistant":"You"}),r&&e.responseKind==="analysis"&&t.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 dark:bg-emerald-900/40 dark:text-emerald-300 text-[10px] uppercase tracking-wide",children:"Analysis"})]}),t.jsx("div",{className:`prose prose-sm max-w-none ${r?"dark:prose-dark text-gray-800 dark:text-gray-200":"prose-invert text-white"}`,children:d()}),r&&(e.intent||u!==null||e.responseTimeMs)&&t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.intent&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700",children:[t.jsx("span",{className:"font-medium",children:"Intent"}),t.jsx("span",{children:e.intent})]}),u!==null&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700",children:[t.jsx(Be,{size:12,className:"text-emerald-500"}),t.jsxs("span",{children:[u.toFixed(1),"% confidence"]})]}),e.responseTimeMs&&t.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700",children:t.jsxs("span",{children:["~",Math.round(e.responseTimeMs),"ms"]})})]}),m&&t.jsx("div",{className:`mt-3 flex ${r?"justify-start":"justify-end"}`,children:t.jsx("span",{className:`${r?"text-gray-400 dark:text-gray-500":"text-white/60"} text-[10px] uppercase tracking-wide`,children:m})})]})]})]}),a&&t.jsx(o0,{isOpen:a,onClose:()=>l(!1),children:c&&(()=>{switch(c.type){case"similarityAnalysis":return t.jsx(Br,{targetEmployeeName:c.targetEmployeeName,similarEmployees:c.similarEmployees,explanation:c.explanation,comparisonType:c.comparisonType});case"enhancedSimilarityAnalysis":return t.jsx(Vr,{data:c});case"enhancedChurnRiskDiagnosis":return t.jsx(Hr,{data:c});case"enhancedRetentionPlaybook":return t.jsx(Ur,{data:c});case"retentionPlaybook":return t.jsx(qr,{data:c});case"churn_trends_analysis":return t.jsx(Wr,{data:c});case"department_analysis":return t.jsx(Kr,{data:c});case"exit_pattern_mining":return t.jsx(Gr,{data:c});case"peerRetentionComparison":return t.jsx(Yr,{data:c});case"exitPatternMining":return t.jsx(Qr,{data:c});default:return null}})()})]})}),d0=[{id:"risk",label:"Risk Level"},{id:"name",label:"Name"},{id:"department",label:"Department"},{id:"eltv",label:"Current ELTV"}],gn=({text:e,isComplete:n})=>{const[r,i]=F.useState(!1);return F.useEffect(()=>{if(n){const s=setTimeout(()=>i(!0),200);return()=>clearTimeout(s)}else i(!1)},[n]),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-1.5",children:[r?t.jsx(Be,{size:16,className:"text-emerald-500"}):t.jsx(ss,{}),t.jsx("span",{children:e})]})},u0=({isLoading:e})=>{const[n,r]=F.useState(0),[i]=F.useState(Date.now());return F.useEffect(()=>{const s=setTimeout(()=>r(1),500),a=setTimeout(()=>r(2),1e3);return()=>{clearTimeout(s),clearTimeout(a)}},[]),F.useEffect(()=>{if(!e&&n>=2){const a=Date.now()-i>2e3?0:300,l=setTimeout(()=>r(3),a);return()=>clearTimeout(l)}},[e,n,i]),t.jsxs("div",{className:"p-4 mb-4 ml-2 mr-12 flex items-start space-x-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-blue-500 flex items-center justify-center text-white flex-shrink-0 mt-0.5",children:t.jsx(jt,{size:16})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Performing Analysis..."}),t.jsx(gn,{text:"Accessing employee data...",isComplete:n>=1}),t.jsx(gn,{text:"Comparing profiles...",isComplete:n>=2}),t.jsx(gn,{text:"Generating insights...",isComplete:n>=3})]})]})};function y0(){const{activeProject:e}=fs(),[n,r]=F.useState([]),{fetchBatchReasoning:i,reasoningData:s}=bs(),{aiAssistantEmployees:a,fetchAIAssistantData:l,isLoadingAIAssistantData:o,trainingStatus:c}=ys(),d=F.useMemo(()=>(a||[]).some(y=>y?.hasReasoningData||typeof y?.reasoningChurnRisk=="number"),[a]),m=c?.status==="complete"||d,u=ks,g=ot(),h=F.useCallback(y=>s?.find(R=>R.hr_code===y),[s]),x=F.useCallback(y=>h(y.hr_code)?.churn_risk??y.churnProbability??0,[h]);F.useEffect(()=>{if(n.length>0){const y=n.map(R=>R.hr_code);i(y)}else if(a&&a.length>0){const y=a.map(R=>R.hr_code);i(y)}},[n,a,i]);const[b,N]=F.useState(()=>({messages:[],input:"",isLoading:!1,error:null,sessionId:$e(),pendingResponseKind:void 0})),v=xs();F.useEffect(()=>{const y=v.state?.prompt;y&&N(R=>({...R,input:y}))},[v.state]);const[A,E]=F.useState(""),[O,$]=F.useState(!0),[w,H]=F.useState(""),[U,G]=F.useState(""),[j,T]=F.useState("risk"),[P,z]=F.useState(!1),[I,_]=F.useState(""),[ee,le]=F.useState(!1),me=F.useRef(null);F.useEffect(()=>{if(!e){N(R=>({...R,messages:[],isLoading:!1,error:null}));return}(async()=>{(!a||a.length===0)&&await l(e?.dbPath||null),Te()})()},[l,a,e]),F.useEffect(()=>{p()},[b.messages]);const Te=async()=>{if(!e){N(y=>({...y,messages:[],isLoading:!1,error:null}));return}try{N(B=>({...B,isLoading:!0,error:null}));const R=(await Qn.getChatHistory(b.sessionId)).map((B,ge)=>s0(B,ge,n.length>0));N(B=>({...B,messages:R,isLoading:!1,pendingResponseKind:void 0}))}catch(y){if(y?.response?.status===404)N(R=>({...R,isLoading:!1,error:null}));else{let R="Failed to load chat history";y instanceof Error?R=y.message:typeof y=="string"?R=y:typeof y=="object"&&y!==null&&"message"in y&&(R=String(y.message)),N(B=>({...B,error:R,isLoading:!1}))}}},p=()=>{me.current&&me.current.scrollIntoView({behavior:"smooth"})},fe=async()=>{if(!b.input.trim()||b.isLoading)return;const y=b.input.trim(),R=is(y,n.length>0),B=b.sessionId,ge=`user-${$e()}`,Xe={id:ge,role:"user",message:y,timestamp:new Date,sessionId:B,isOptimistic:!0,responseKind:"chat"};N(M=>({...M,input:"",isLoading:!0,error:null,pendingResponseKind:R,messages:[...M.messages,Xe]}));try{let M="";if(n.length>0&&(M+=`

Selected Employees Context (from AI Reasoning System):
`,n.forEach((Z,k)=>{const C=h(Z.hr_code);if(C)M+=`${k+1}. ${Z.full_name} (${Z.hr_code}):
`,M+=`  - Combined Churn Risk: ${(C.churn_risk*100).toFixed(1)}%
`,M+=`  - ML Model Score: ${(C.ml_score*100).toFixed(1)}%
`,M+=`  - Business Rules Score: ${(C.heuristic_score*100).toFixed(1)}%
`,M+=`  - Behavioral Stage: ${C.stage} (Score: ${(C.stage_score*100).toFixed(1)}%)
`,M+=`  - Confidence Level: ${(C.confidence_level*100).toFixed(1)}%
`,M+=`  - Department: ${Z.structure_name}, Position: ${Z.position}
`;else{const D=Z.churnProbability??0;M+=`${k+1}. ${Z.full_name} (${Z.hr_code}) - Fallback Risk: ${(D*100).toFixed(1)}%, Department: ${Z.structure_name}, Position: ${Z.position}
`}})),n.length>0&&s&&s.length>0&&(M+=`

Detailed AI Reasoning Analysis:
`,n.forEach(Z=>{const k=h(Z.hr_code);k&&(M+=`
${Z.full_name} (${Z.hr_code}) - Comprehensive Analysis:
`,M+=`COMBINED SCORE BREAKDOWN:
`,M+=`- Final Churn Risk: ${(k.churn_risk*100).toFixed(1)}% (This is the authoritative score)
`,M+=`- ML Model Component: ${(k.ml_score*100).toFixed(1)}%
`,M+=`- Business Rules Component: ${(k.heuristic_score*100).toFixed(1)}%
`,M+=`- Behavioral Stage: ${k.stage} (Score: ${(k.stage_score*100).toFixed(1)}%)
`,M+=`- Overall Confidence: ${(k.confidence_level*100).toFixed(1)}%
`,k.ml_contributors&&k.ml_contributors.length>0&&(M+=`
ML MODEL RISK FACTORS:
`,k.ml_contributors.slice(0,10).forEach((C,D)=>{M+=`  ${D+1}. ${C.feature}: ${C.value} (SHAP Impact: ${C.importance>0?"+":""}${(C.importance*100).toFixed(1)}%)
`})),k.heuristic_alerts&&k.heuristic_alerts.length>0&&(M+=`
BUSINESS RULE ALERTS:
`,k.heuristic_alerts.forEach((C,D)=>{M+=`  ${D+1}. ${C.rule_name}: +${(C.impact*100).toFixed(1)}% risk increase
`,M+=`     Reason: ${C.reason}
`})),k.calculation_breakdown&&(M+=`
SCORE CALCULATION METHODOLOGY:
`,M+=`  ML Contribution: ${k.calculation_breakdown.ml_contribution.toFixed(3)} (weight: ${k.calculation_breakdown.weights.ml_weight})
`,M+=`  Business Rules Contribution: ${k.calculation_breakdown.heuristic_contribution.toFixed(3)} (weight: ${k.calculation_breakdown.weights.heuristic_weight})
`,M+=`  Stage Contribution: ${k.calculation_breakdown.stage_contribution.toFixed(3)} (weight: ${k.calculation_breakdown.weights.stage_weight})
`,M+=`  Final Combined Score: ${(k.churn_risk*100).toFixed(1)}%
`),M+=`
AI ANALYSIS: ${k.reasoning}
`,k.recommendations&&(M+=`AI RECOMMENDATIONS: ${k.recommendations}
`))})),s&&s.length>0){M+=`

General Population Context (AI Reasoning Data):
`,M+=`Total Employees with Reasoning Data: ${s.length}
`;const Z=s.filter(ne=>ne.churn_risk>g.highRisk),k=s.filter(ne=>ne.churn_risk>g.mediumRisk&&ne.churn_risk<=g.highRisk),C=s.filter(ne=>ne.churn_risk<=g.mediumRisk),D=Math.round(g.highRisk*100),V=Math.round(g.mediumRisk*100);M+=`Risk Distribution (AI Reasoning): High Risk (>${D}%): ${Z.length}, Medium Risk (${V}-${D}%): ${k.length}, Low Risk (≤${V}%): ${C.length}
`;const Q={};s.forEach(ne=>{Q[ne.stage]=(Q[ne.stage]||0)+1}),M+=`Behavioral Stages: ${Object.entries(Q).map(([ne,we])=>`${ne}: ${we}`).join(", ")}
`;const je=s.reduce((ne,we)=>ne+we.confidence_level,0)/s.length;M+=`Average AI Confidence Level: ${(je*100).toFixed(1)}%
`}const Me=`${y}

${M}

CRITICAL INSTRUCTIONS - USE ONLY AI REASONING DATA:
1. NEVER use the old churnProbability values - ONLY use the churn_risk from the AI Reasoning System
2. The churn_risk is the authoritative combined score that includes ML + Business Rules + Behavioral Stage
3. When analyzing risk, reference the SHAP values from ml_contributors and business rule impacts
4. Use the calculation breakdown to explain HOW the final score was computed
5. Reference behavioral stages and their scores in your analysis
6. Always mention confidence levels when making predictions
7. Base ALL recommendations on the comprehensive reasoning data provided

RESPONSE FORMATS (using reasoning data):
- For DIAGNOSE RISK: Use "enhancedChurnRiskDiagnosis" with reasoning.churn_risk as overallRisk
- For CREATE PLAN: Use "enhancedRetentionPlaybook" with reasoning.churn_risk as currentRisk  
- For COMPARE queries: Use reasoning data to find similar risk profiles and patterns
- For GENERAL questions: Use aggregate reasoning statistics and trends

SCORING TRANSPARENCY:
- Always explain the combination of ML + Business Rules + Stage scores
- Reference specific SHAP values and rule impacts
- Show confidence levels and calculation weights
- Use behavioral stage context in recommendations

MAKE YOUR RESPONSES DATA-DRIVEN using the comprehensive AI reasoning analysis provided. Never use fallback churnProbability values.`,Re=await Qn.sendMessage({sessionId:B,content:Me,employeeId:n[0]?.hr_code}),ut={id:Re.botMessageId||`bot-${$e()}`,role:"assistant",message:typeof Re.response?.message=="string"?Re.response.message:String(Re.response?.message??""),timestamp:new Date,sessionId:B,intent:Re.response?.intent,confidence:Re.response?.confidence,responseKind:R,responseTimeMs:Re.response?.responseTime};N(Z=>{const k=Z.messages.map(C=>C.id===ge?{...C,isOptimistic:!1}:C);return{...Z,isLoading:!1,pendingResponseKind:void 0,messages:[...k,ut]}}),setTimeout(p,100)}catch(M){let Me="Failed to send message";M instanceof Error?Me=M.message:typeof M=="string"?Me=M:M?.response?.data?.error&&(Me=M.response.data.error),N(Re=>{const ut=Re.messages.map(Z=>Z.id===ge?{...Z,isOptimistic:!1}:Z);return{...Re,isLoading:!1,pendingResponseKind:void 0,error:Me,messages:[...ut,{id:`error-${$e()}`,role:"assistant",message:`I apologize, but I encountered an error: ${Me}. Please try again.`,timestamp:new Date,sessionId:B,responseKind:"chat"}]}})}},Ae=F.useCallback(y=>{r([y])},[]),f=F.useCallback(y=>{a&&a.length>500?(z(!0),setTimeout(()=>{T(y),z(!1)},0)):T(y)},[a]),re=F.useMemo(()=>{let y=a?[...a]:[];if(y=y.filter(R=>R.status==="Active"),A.trim()){const R=A.toLowerCase().trim();y=y.filter(B=>B.name.toLowerCase().includes(R)||(B.position||"").toLowerCase().includes(R)||(B.department||"").toLowerCase().includes(R))}return y},[a,A]),ze=F.useMemo(()=>{let y=re;return I&&(y=y.filter(R=>(R.position||"N/A")===I)),U&&(y=y.filter(R=>{const B=x(R);return u(B)===U})),Array.from(new Set(y.map(R=>R.department||"N/A"))).sort()},[re,I,U,x,u]),ie=F.useMemo(()=>{let y=re;return w&&(y=y.filter(R=>(R.department||"N/A")===w)),U&&(y=y.filter(R=>{const B=x(R);return u(B)===U})),Array.from(new Set(y.map(R=>R.position||"N/A"))).sort()},[re,w,U,x,u]),Ue=F.useMemo(()=>{let y=re;w&&(y=y.filter(B=>(B.department||"N/A")===w)),I&&(y=y.filter(B=>(B.position||"N/A")===I));const R=y.map(B=>{const ge=x(B);return u(ge)});return Array.from(new Set(R)).sort()},[re,w,I,x,u]),Ee=F.useMemo(()=>{let y=re;return w&&(y=y.filter(R=>(R.department||"N/A")===w)),I&&(y=y.filter(R=>(R.position||"N/A")===I)),U&&(y=y.filter(R=>{const B=x(R);return u(B)===U})),y},[re,w,I,U,x,u]),he=F.useMemo(()=>{if(!Ee.length)return[];const y=[...Ee];return j==="risk"?y.sort((R,B)=>x(B)-x(R)):j==="name"?y.sort((R,B)=>R.name.localeCompare(B.name)):j==="department"&&y.sort((R,B)=>(R.department||"").localeCompare(B.department||"")),y},[Ee,j,x]),_e=F.useCallback(({index:y,style:R})=>{const B=he[y];if(!B)return null;const ge=h(B.hr_code);return t.jsx("div",{style:R,children:t.jsx(l0,{employee:B,isSelected:n.some(Xe=>Xe.id===B.id),onClick:()=>Ae(B),reasoningData:ge},B.id)})},[he,n,Ae,h]),Qe=95,Kt=F.useMemo(()=>t.jsx(vs,{children:({height:y,width:R})=>t.jsx(js,{height:y,width:R,itemCount:he.length,itemSize:Qe,overscanCount:5,className:"bg-transparent dark:bg-transparent",children:_e})}),[he,n,_e]),Gt=()=>t.jsx("div",{className:"flex-none bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"flex items-end gap-3",children:t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("textarea",{value:b.input,onChange:y=>N(R=>({...R,input:y.target.value})),onKeyDown:y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),fe())},placeholder:n[0]?`Ask about ${n[0].name} or general questions...`:"Select an employee or ask general questions...",disabled:b.isLoading,rows:1,className:"w-full px-4 py-2.5 pr-14 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-none min-h-[42px] overflow-hidden",style:{height:"auto",minHeight:"42px"},onInput:y=>{const R=y.target;R.style.height="auto",R.style.height=Math.min(R.scrollHeight,120)+"px"}}),t.jsx("button",{onClick:()=>{fe()},disabled:b.isLoading||!b.input.trim(),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-lg bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white transition-colors duration-200 disabled:cursor-not-allowed",children:b.isLoading?t.jsx(ss,{}):t.jsx(ms,{size:16})})]})})}),!b.isLoading&&(n[0]||b.messages.length>0)&&t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent flex-1"}),t.jsxs("button",{onClick:()=>le(!ee),className:"flex items-center gap-1 text-xs font-medium text-gray-500 dark:text-gray-400 px-2 py-1 rounded hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors","aria-label":ee?"Hide quick actions":"Show quick actions",children:[t.jsx("span",{children:"Quick Actions"}),t.jsx(Ct,{className:`w-3 h-3 transition-transform duration-200 ${ee?"rotate-180":""}`})]}),t.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent flex-1"})]}),ee&&t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2",children:[n[0]&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{const y=be("diagnose",n[0].name);ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border border-red-200 dark:border-red-700/50 rounded-lg p-3 text-left transition-all duration-300 hover:shadow-md hover:shadow-red-500/20 dark:hover:shadow-red-400/20 hover:-translate-y-0.5",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-red-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400 group-hover:bg-red-200 dark:group-hover:bg-red-800/60 transition-colors",children:t.jsx(ke,{size:14})}),t.jsx("span",{className:"font-semibold text-red-700 dark:text-red-300 text-xs",children:"Diagnose Risk"})]}),t.jsx("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 leading-relaxed",children:"Analyze why at risk"})]})]}),t.jsxs("button",{onClick:()=>{const y=be("retention",n[0].name);ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border border-purple-200 dark:border-purple-700/50 rounded-lg p-3 text-left transition-all duration-300 hover:shadow-md hover:shadow-purple-500/20 dark:hover:shadow-purple-400/20 hover:-translate-y-0.5",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-purple-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/60 transition-colors",children:t.jsx(_t,{size:14})}),t.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300 text-xs",children:"Create Plan"})]}),t.jsx("p",{className:"text-xs text-purple-600/80 dark:text-purple-400/80 leading-relaxed",children:"Generate strategy"})]})]}),t.jsxs("button",{onClick:()=>{const y=be("similarity_resigned",n[0].name);ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border border-orange-200 dark:border-orange-700/50 rounded-lg p-3 text-left transition-all duration-300 hover:shadow-md hover:shadow-orange-500/20 dark:hover:shadow-orange-400/20 hover:-translate-y-0.5",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-orange-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-400 group-hover:bg-orange-200 dark:group-hover:bg-orange-800/60 transition-colors",children:t.jsx(xn,{size:14})}),t.jsx("span",{className:"font-semibold text-orange-700 dark:text-orange-300 text-xs",children:"Compare (Left)"})]}),t.jsx("p",{className:"text-xs text-orange-600/80 dark:text-orange-400/80 leading-relaxed",children:"Find similar resigned"})]})]}),t.jsxs("button",{onClick:()=>{const y=be("similarity_stayed",n[0].name);ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border border-emerald-200 dark:border-emerald-700/50 rounded-lg p-3 text-left transition-all duration-300 hover:shadow-md hover:shadow-emerald-500/20 dark:hover:shadow-emerald-400/20 hover:-translate-y-0.5",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-emerald-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-emerald-100 dark:bg-emerald-900/40 text-emerald-600 dark:text-emerald-400 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800/60 transition-colors",children:t.jsx(te,{size:14})}),t.jsx("span",{className:"font-semibold text-emerald-700 dark:text-emerald-300 text-xs",children:"Compare (Stayed)"})]}),t.jsx("p",{className:"text-xs text-emerald-600/80 dark:text-emerald-400/80 leading-relaxed",children:"Find similar retained"})]})]})]}),t.jsxs("button",{onClick:()=>{const y=be("trends");ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border border-green-200 dark:border-green-700/50 rounded-lg p-3 text-left transition-all duration-300 hover:shadow-md hover:shadow-green-500/20 dark:hover:shadow-green-400/20 hover:-translate-y-0.5",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-green-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 group-hover:bg-green-200 dark:group-hover:bg-green-800/60 transition-colors",children:t.jsx(pe,{size:14})}),t.jsx("span",{className:"font-semibold text-green-700 dark:text-green-300 text-xs",children:"Workforce Trends"})]}),t.jsx("p",{className:"text-xs text-green-600/80 dark:text-green-400/80 leading-relaxed",children:"Analyze churn patterns"})]})]}),t.jsxs("button",{onClick:()=>{const y=be("departments");ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 border border-indigo-200 dark:border-indigo-700/50 rounded-lg p-3 text-left transition-all duration-300 hover:shadow-md hover:shadow-indigo-500/20 dark:hover:shadow-indigo-400/20 hover:-translate-y-0.5",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-indigo-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"p-1.5 rounded-lg bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-800/60 transition-colors",children:t.jsx(ke,{size:14})}),t.jsx("span",{className:"font-semibold text-indigo-700 dark:text-indigo-300 text-xs",children:"Department Analysis"})]}),t.jsx("p",{className:"text-xs text-indigo-600/80 dark:text-indigo-400/80 leading-relaxed",children:"Compare risk across teams"})]})]}),t.jsxs("button",{onClick:()=>{const y=be("patterns");ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 border border-yellow-200 dark:border-yellow-700/50 rounded-lg p-3 text-left transition-all duration-300 hover:shadow-md hover:shadow-yellow-500/20 dark:hover:shadow-yellow-400/20 hover:-translate-y-0.5",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/5 to-yellow-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"p-1.5 rounded-lg bg-yellow-100 dark:bg-yellow-900/40 text-yellow-600 dark:text-yellow-400 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-800/60 transition-colors",children:t.jsx(Ve,{size:14})}),t.jsx("span",{className:"font-semibold text-yellow-700 dark:text-yellow-300 text-xs",children:"Exit Pattern Mining"})]}),t.jsx("p",{className:"text-xs text-yellow-600/80 dark:text-yellow-400/80 leading-relaxed",children:"Identify departure trends"})]})]})]})]}),t.jsx("p",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:"The AI assistant may produce incorrect or outdated information. Please verify critical insights before acting."})]})}),ce=y=>{N(R=>({...R,input:y}))},It=()=>t.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"welcome-card p-6 rounded-xl bg-white dark:!bg-gradient-to-br dark:!from-gray-800 dark:!to-gray-900 shadow-lg max-w-3xl mx-auto my-8 border border-gray-200 dark:border-gray-700/50",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx(W.div,{className:"w-16 h-16 rounded-full bg-gradient-to-br from-emerald-400 to-blue-500 flex items-center justify-center text-white mr-4 flex-shrink-0",animate:{scale:[1,1.05,1],boxShadow:["0 0 0 rgba(91, 169, 139, 0.3)","0 0 20px rgba(91, 169, 139, 0.6)","0 0 0 rgba(91, 169, 139, 0.3)"]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:t.jsx(jt,{size:32})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:"Welcome to AI Assistant"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Your intelligent retention analysis companion"})]})]}),t.jsx("div",{className:"mt-6 border-l-4 border-emerald-500 dark:border-emerald-400 pl-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:t.jsxs("p",{className:"text-gray-700 dark:text-gray-200",children:[t.jsx("strong",{children:"✨ New:"}),' Ask general questions about your workforce! Try queries like "Show me churn trends", "What are the top risk factors", or "Compare departments by risk level". No need to select an employee first.']})}),t.jsx("div",{className:"mt-4 border-l-4 border-blue-500 dark:border-blue-400 pl-4 py-2 bg-blue-50 dark:bg-blue-700/50 rounded-md",children:t.jsx("p",{className:"text-gray-700 dark:text-gray-200",children:"Select an employee for individual analysis, or ask general questions about workforce trends and analytics. I can generate insights, charts, and recommendations for both specific employees and overall workforce patterns."})}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent flex-1"}),t.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 px-2",children:"Quick Start"}),t.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent flex-1"})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:[t.jsxs(W.button,{onClick:()=>{if(a&&a[0]){const y=be("diagnose",a[0].name);ce(y.prompt)}},disabled:!a||a.length<1,className:"group relative overflow-hidden bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border border-red-200 dark:border-red-700/50 rounded-lg p-4 text-left transition-all duration-300 hover:shadow-md hover:shadow-red-500/20 dark:hover:shadow-red-400/20 hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none disabled:hover:translate-y-0",whileHover:{scale:!a||a.length<1?1:1.02},whileTap:{scale:!a||a.length<1?1:.98},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-red-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400 group-hover:bg-red-200 dark:group-hover:bg-red-800/60 transition-colors",children:t.jsx(ke,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-red-700 dark:text-red-300 text-sm",children:"Churn Risk Diagnosis"}),t.jsx("p",{className:"text-xs text-red-600/80 dark:text-red-400/80",children:"Understand why someone is at risk"})]})]})})]}),t.jsxs(W.button,{onClick:()=>{if(a&&a[1]){const y=be("retention",a[1].name);ce(y.prompt)}},disabled:!a||a.length<2,className:"group relative overflow-hidden bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border border-purple-200 dark:border-purple-700/50 rounded-lg p-4 text-left transition-all duration-300 hover:shadow-md hover:shadow-purple-500/20 dark:hover:shadow-purple-400/20 hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none disabled:hover:translate-y-0",whileHover:{scale:!a||a.length<2?1:1.02},whileTap:{scale:!a||a.length<2?1:.98},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-purple-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/60 transition-colors",children:t.jsx(_t,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-purple-700 dark:text-purple-300 text-sm",children:"Retention Playbooks"}),t.jsx("p",{className:"text-xs text-purple-600/80 dark:text-purple-400/80",children:"Get tailored action plans"})]})]})})]}),t.jsxs(W.button,{onClick:()=>{const y=be("trends");ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border border-green-200 dark:border-green-700/50 rounded-lg p-4 text-left transition-all duration-300 hover:shadow-md hover:shadow-green-500/20 dark:hover:shadow-green-400/20 hover:-translate-y-0.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-green-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 group-hover:bg-green-200 dark:group-hover:bg-green-800/60 transition-colors",children:t.jsx(pe,{size:14})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-green-700 dark:text-green-300 text-sm",children:"Workforce Trends"}),t.jsx("p",{className:"text-xs text-green-600/80 dark:text-green-400/80",children:"Analyze overall churn patterns"})]})]})})]}),t.jsxs(W.button,{onClick:()=>{if(a&&a[2]){const y=be("similarity_stayed",a[2].name);ce(y.prompt)}},disabled:!a||a.length<3,className:"group relative overflow-hidden bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border border-emerald-200 dark:border-emerald-700/50 rounded-lg p-4 text-left transition-all duration-300 hover:shadow-md hover:shadow-emerald-500/20 dark:hover:shadow-emerald-400/20 hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none disabled:hover:translate-y-0",whileHover:{scale:!a||a.length<3?1:1.02},whileTap:{scale:!a||a.length<3?1:.98},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-emerald-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/40 text-emerald-600 dark:text-emerald-400 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800/60 transition-colors",children:t.jsx(te,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-emerald-700 dark:text-emerald-300 text-sm",children:"Compare (Stayed)"}),t.jsx("p",{className:"text-xs text-emerald-600/80 dark:text-emerald-400/80",children:"Compare with retained colleagues"})]})]})})]}),t.jsxs(W.button,{onClick:()=>{if(a&&a[3]){const y=be("similarity_resigned",a[3].name);ce(y.prompt)}},disabled:!a||a.length<4,className:"group relative overflow-hidden bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border border-orange-200 dark:border-orange-700/50 rounded-lg p-4 text-left transition-all duration-300 hover:shadow-md hover:shadow-orange-500/20 dark:hover:shadow-orange-400/20 hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none disabled:hover:translate-y-0",whileHover:{scale:!a||a.length<4?1:1.02},whileTap:{scale:!a||a.length<4?1:.98},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-orange-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-400 group-hover:bg-orange-200 dark:group-hover:bg-orange-800/60 transition-colors",children:t.jsx(te,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-orange-700 dark:text-orange-300 text-sm",children:"Compare (Resigned)"}),t.jsx("p",{className:"text-xs text-orange-600/80 dark:text-orange-400/80",children:"Compare with resigned colleagues"})]})]})})]}),t.jsxs(W.button,{onClick:()=>{const y=be("departments");ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 border border-indigo-200 dark:border-indigo-700/50 rounded-lg p-4 text-left transition-all duration-300 hover:shadow-md hover:shadow-indigo-500/20 dark:hover:shadow-indigo-400/20 hover:-translate-y-0.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-indigo-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-800/60 transition-colors",children:t.jsx(ke,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-indigo-700 dark:text-indigo-300 text-sm",children:"Department Analysis"}),t.jsx("p",{className:"text-xs text-indigo-600/80 dark:text-indigo-400/80",children:"Compare risk across teams"})]})]})})]}),t.jsxs(W.button,{onClick:()=>{const y=be("patterns");ce(y.prompt)},className:"group relative overflow-hidden bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 border border-yellow-200 dark:border-yellow-700/50 rounded-lg p-4 text-left transition-all duration-300 hover:shadow-md hover:shadow-yellow-500/20 dark:hover:shadow-yellow-400/20 hover:-translate-y-0.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/5 to-yellow-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg bg-yellow-100 dark:bg-yellow-900/40 text-yellow-600 dark:text-yellow-400 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-800/60 transition-colors",children:t.jsx(Ve,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-yellow-700 dark:text-yellow-300 text-sm",children:"Exit Pattern Mining"}),t.jsx("p",{className:"text-xs text-yellow-600/80 dark:text-yellow-400/80",children:"Identify departure trends"})]})]})})]})]})]})]});return e?m?t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("header",{className:"flex-none bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 border-b border-gray-700/50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]"}),t.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-500/50 to-transparent"})]}),t.jsx("div",{className:"max-w-[1400px] mx-auto px-8 relative",children:t.jsx("div",{className:"py-8",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-200 via-purple-400 to-purple-200 animate-gradient",children:"Talent Retention AI Assistant"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"relative",children:[t.jsxs("span",{className:"px-2.5 py-0.5 text-xs font-medium bg-emerald-500/10 text-emerald-300 rounded-full border border-emerald-500/20 relative z-10 flex items-center gap-1",children:[t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-400 animate-ping absolute"}),t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-400"}),"AI-Powered"]}),t.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-sm animate-pulse"})]}),t.jsxs("span",{className:"relative",children:[t.jsxs("span",{className:"px-2.5 py-0.5 text-xs font-semibold bg-purple-500/10 text-purple-300 rounded-full border border-purple-500/20 relative z-10 flex items-center gap-1",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"text-purple-400",children:[t.jsx("path",{d:"M12 8V4H8"}),t.jsx("rect",{x:"4",y:"12",width:"8",height:"8",rx:"2"}),t.jsx("path",{d:"M8 12v-2a2 2 0 0 1 2-2h2"})]}),"Echo"]}),t.jsx("div",{className:"absolute inset-0 bg-purple-500/20 rounded-full blur-sm animate-pulse"})]})]})]}),t.jsx("p",{className:"text-base text-gray-400 max-w-2xl",children:"AI-driven assistant for talent retention analysis and actionable insights."})]})})})})})})]}),t.jsx("div",{className:"px-6 md:px-8 py-4",children:t.jsx(Ns,{})}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsxs("aside",{className:"w-[340px] flex-none flex flex-col bg-white border-r border-gray-200 dark:bg-gray-900 dark:border-gray-700",children:[t.jsxs("div",{className:"flex-none p-4 border-b border-gray-100 dark:border-gray-800",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Team Members"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[he.length," employees found"]})]}),t.jsxs("div",{className:"flex-none p-4 border-b border-gray-100 dark:border-gray-800",children:[b.error&&t.jsxs("div",{className:"p-3 mb-3 bg-red-50 text-red-600 rounded-lg flex items-center gap-2 text-sm",children:[t.jsx(ae,{className:"w-4 h-4 flex-shrink-0"}),t.jsx("p",{children:b.error})]}),t.jsxs("div",{className:"relative mb-3",children:[t.jsx(xn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",value:A,onChange:y=>E(y.target.value),placeholder:"Search employees...",className:"w-full pl-9 pr-4 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600"})]}),t.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3",children:t.jsx("div",{children:A.trim()?t.jsxs(t.Fragment,{children:["Found ",t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:he.length})," ",he.length===1?"employee":"employees"]}):t.jsxs(t.Fragment,{children:[(a||[]).length," total employees"]})})}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("select",{value:j,onChange:y=>f(y.target.value),disabled:P,className:`w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600 ${P?"opacity-50 cursor-wait":""}`,children:d0.map(y=>t.jsxs("option",{value:y.id,children:["Sort by: ",y.label," ",P&&"(sorting...)"]},y.id))}),t.jsxs("select",{value:w,onChange:y=>H(y.target.value),className:"w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600",children:[t.jsxs("option",{value:"",children:["All Departments (",ze.length,")"]}),ze.map(y=>t.jsx("option",{value:y,children:y},y))]}),t.jsxs("select",{value:U,onChange:y=>G(y.target.value),className:"w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600",children:[t.jsxs("option",{value:"",children:["All Risk Levels (",Ue.length,")"]}),Ue.map(y=>t.jsxs("option",{value:y,children:[y," Risk"]},y))]}),t.jsxs("select",{value:I,onChange:y=>_(y.target.value),className:"w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600",children:[t.jsxs("option",{value:"",children:["All Positions (",ie.length,")"]}),ie.map(y=>t.jsx("option",{value:y,children:y},y))]})]}),t.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[(w||U||I)&&t.jsx("button",{onClick:()=>{H(""),G(""),_("")},className:"px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 text-xs rounded-full hover:bg-red-200 dark:hover:bg-red-800/50 transition-colors",children:"Clear All"}),w&&t.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 text-xs rounded-full",children:["Dept: ",w]}),U&&t.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300 text-xs rounded-full",children:["Risk: ",U]}),I&&t.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 text-xs rounded-full",children:["Pos: ",I]})]})]}),t.jsx("div",{className:"flex-1 overflow-auto p-3",children:o?t.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((y,R)=>t.jsx("div",{className:"p-4 rounded-lg border border-gray-100 dark:border-gray-800 animate-pulse h-[83px] bg-gray-100 dark:bg-gray-800"},R))}):he.length===0?t.jsxs("div",{className:"text-center py-12 px-4",children:[t.jsx(te,{className:"h-12 w-12 text-gray-300 dark:text-gray-700 mx-auto mb-3"}),t.jsx("h3",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"No employees found"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Try adjusting your search or filters"})]}):Kt})]}),t.jsxs(W.main,{className:"flex-1 flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[!O&&t.jsx("button",{onClick:()=>$(!0),className:"md:hidden absolute top-4 left-4 z-10 p-2 rounded-md bg-white dark:bg-gray-800 shadow-md text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:t.jsx(te,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[n[0]&&t.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-3 shadow-sm flex-none",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-blue-500 flex items-center justify-center text-white text-sm font-medium",children:n[0].name.charAt(0)})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:n[0].name}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n[0].position," • ",n[0].department]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(En,{riskScore:x(n[0]),size:"sm",showIcon:!0})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800 scroll-smooth",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[b.messages.length===0&&!n[0]&&It(),b.messages.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(Kn,{initial:!1,children:b.messages.map((y,R)=>t.jsx(c0,{message:y,isContinuation:R>0&&b.messages[R-1].role===y.role},y.id||`msg-${R}`))}),t.jsx(Kn,{children:b.isLoading&&t.jsx(W.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},children:b.pendingResponseKind==="analysis"?t.jsx(u0,{isLoading:b.isLoading}):t.jsx(a0,{})},"chat-loading")}),t.jsx("div",{ref:me})]}),b.error&&t.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 my-4 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ae,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("span",{className:"font-medium",children:b.error})]})})]})}),Gt()]})]})]})]}):t.jsx(ws,{status:c?.status,message:c?.message}):t.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 bg-gray-50 dark:bg-gray-900",children:[t.jsx(jt,{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Project Active"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please select or create a project to use the AI Assistant."})]})}export{y0 as AIAssistant};
//# sourceMappingURL=AIAssistant-BfG2X4Tt.js.map
