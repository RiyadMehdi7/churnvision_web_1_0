{"version":3,"file":"Diagnostics-P6-RbaiJ.js","sources":["../../src/pages/Diagnostics.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\ntype DbHealth = { ok: boolean; error?: string; missing?: string[]; counts?: Record<string, number>; dbPath?: string };\ntype LlmStatus = { ready: boolean; reason?: string; modelType: string };\n\nconst Diagnostics: React.FC = () => {\n  const [offline, setOffline] = useState<boolean>(false);\n  const [db, setDb] = useState<DbHealth | null>(null);\n  const [llm, setLlm] = useState<LlmStatus | null>(null);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        // Web application - always online\n        setOffline(false);\n      } catch {}\n      try {\n        // Check database health via API\n        const response = await fetch(`${import.meta.env.VITE_API_URL || 'http://localhost:8000/api/v1'}/health`);\n        const h = await response.json();\n        setDb({ ok: h.status === 'healthy', dbPath: 'API Backend' });\n      } catch {}\n      try {\n        // LLM is server-side - always available\n        setLlm({ ready: true, modelType: 'server-side' });\n      } catch {}\n    })();\n  }, []);\n\n  return (\n    <div style={{ padding: 24 }}>\n      <h2>Diagnostics</h2>\n      <section>\n        <h3>Security</h3>\n        <div>Strict Offline Mode: {offline ? 'Enabled' : 'Disabled'}</div>\n      </section>\n      <section>\n        <h3>Database</h3>\n        {db ? (\n          <div>\n            <div>Status: {db.ok ? 'OK' : `Issues: ${db.error || (db.missing || []).join(', ')}`}</div>\n            {db.counts && (\n              <ul>\n                {Object.entries(db.counts).map(([k, v]) => (\n                  <li key={k}>{k}: {v === null ? 'n/a' : v}</li>\n                ))}\n              </ul>\n            )}\n            <div>DB: {db.dbPath || 'n/a'}</div>\n          </div>\n        ) : (\n          <div>Loading...</div>\n        )}\n      </section>\n      <section>\n        <h3>LLM</h3>\n        {llm ? (\n          <div>\n            <div>Ready: {llm.ready ? 'Yes' : 'No'}</div>\n            <div>Mode: {llm.modelType}</div>\n            <div>Reason: {llm.reason || '-'}</div>\n          </div>\n        ) : (\n          <div>Loading...</div>\n        )}\n      </section>\n    </div>\n  );\n};\n\nexport default Diagnostics;\n\n"],"names":["Diagnostics","offline","setOffline","useState","db","setDb","llm","setLlm","useEffect","h","jsx","jsxs","k","v"],"mappings":"8EAKA,MAAMA,EAAwB,IAAM,CAClC,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAkB,EAAK,EAC/C,CAACC,EAAIC,CAAK,EAAIF,EAAAA,SAA0B,IAAI,EAC5C,CAACG,EAAKC,CAAM,EAAIJ,EAAAA,SAA2B,IAAI,EAErDK,OAAAA,EAAAA,UAAU,IAAM,EACb,SAAY,CACX,GAAI,CAEFN,EAAW,EAAK,CAClB,MAAQ,CAAC,CACT,GAAI,CAGF,MAAMO,EAAI,MADO,MAAM,MAAM,qCAA0E,GAC9E,KAAA,EACzBJ,EAAM,CAAE,GAAII,EAAE,SAAW,UAAW,OAAQ,cAAe,CAC7D,MAAQ,CAAC,CACT,GAAI,CAEFF,EAAO,CAAE,MAAO,GAAM,UAAW,cAAe,CAClD,MAAQ,CAAC,CACX,GAAA,CACF,EAAG,CAAA,CAAE,SAGF,MAAA,CAAI,MAAO,CAAE,QAAS,EAAA,EACrB,SAAA,CAAAG,EAAAA,IAAC,MAAG,SAAA,cAAW,SACd,UAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAA,WAAQ,SACX,MAAA,CAAI,SAAA,CAAA,wBAAsBT,EAAU,UAAY,UAAA,EAAW,CAAA,EAC9D,SACC,UAAA,CACC,SAAA,CAAAS,EAAAA,IAAC,MAAG,SAAA,WAAQ,EACXN,SACE,MAAA,CACC,SAAA,CAAAO,OAAC,MAAA,CAAI,SAAA,CAAA,WAASP,EAAG,GAAK,KAAO,WAAWA,EAAG,QAAUA,EAAG,SAAW,CAAA,GAAI,KAAK,IAAI,CAAC,EAAA,EAAG,EACnFA,EAAG,QACFM,MAAC,KAAA,CACE,SAAA,OAAO,QAAQN,EAAG,MAAM,EAAE,IAAI,CAAC,CAACQ,EAAGC,CAAC,WAClC,KAAA,CAAY,SAAA,CAAAD,EAAE,KAAGC,IAAM,KAAO,MAAQA,CAAA,GAA9BD,CAAgC,CAC1C,EACH,SAED,MAAA,CAAI,SAAA,CAAA,OAAKR,EAAG,QAAU,KAAA,EAAM,CAAA,CAAA,CAC/B,EAEAM,EAAAA,IAAC,MAAA,CAAI,SAAA,aAAU,CAAA,EAEnB,SACC,UAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAA,MAAG,EACNJ,SACE,MAAA,CACC,SAAA,CAAAK,OAAC,MAAA,CAAI,SAAA,CAAA,UAAQL,EAAI,MAAQ,MAAQ,IAAA,EAAK,SACrC,MAAA,CAAI,SAAA,CAAA,SAAOA,EAAI,SAAA,EAAU,SACzB,MAAA,CAAI,SAAA,CAAA,WAASA,EAAI,QAAU,GAAA,EAAI,CAAA,CAAA,CAClC,EAEAI,EAAAA,IAAC,MAAA,CAAI,SAAA,aAAU,CAAA,EAEnB,CAAA,EACF,CAEJ"}