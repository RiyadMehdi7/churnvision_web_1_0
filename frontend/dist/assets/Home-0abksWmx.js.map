{"version":3,"mappings":"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","names":["memo","getDeps","fn","opts","deps","result","memoizedFunction","_a","_b","_c","_d","depTime","newDeps","dep","index","resultTime","depEndTime","resultEndTime","resultFpsPercentage","pad","str","num","notUndefined","value","msg","approxEqual","a","b","debounce","targetWindow","ms","timeoutId","args","getRect","element","offsetWidth","offsetHeight","defaultKeyExtractor","defaultRangeExtractor","range","start","end","arr","observeElementRect","instance","cb","handler","rect","width","height","observer","entries","run","entry","box","addEventListenerOptions","supportsScrollend","observeElementOffset","offset","fallback","createHandler","isScrolling","horizontal","isRtl","endHandler","registerScrollendEvent","measureElement","elementScroll","adjustments","behavior","toOffset","Virtualizer","_ro","get","target","opts2","key","sync","d","scrollElement","cached","measurements","furthestMeasurementsFound","furthestMeasurements","m","measurement","previousFurthestMeasurement","count","paddingStart","scrollMargin","getItemKey","enabled","itemSizeCache","item","min","i","furthestMeasurement","measuredSize","size","lane","outerSize","scrollOffset","lanes","calculateRange","startIndex","endIndex","rangeExtractor","overscan","node","attributeName","indexStr","prevNode","itemSize","delta","indexes","virtualItems","k","len","findNearestBinarySearch","align","maxOffset","initialAlign","attempts","maxAttempts","tryScroll","currentAlign","offsetInfo","currentOffset","afterInfo","scheduleRetry","endByLane","val","low","high","getCurrentValue","middle","currentValue","lastIndex","getOffset","endPerLane","pos","startPerLane","useIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","useVirtualizerBase","options","rerender","React.useReducer","resolvedOptions","instance2","flushSync","React.useState","useVirtualizer","DataPreviewTable","data","mappedColumns","validationErrors","onClose","onConfirm","onUpdateMapping","selectedColumn","setSelectedColumn","useState","hasStatusColumn","setHasStatusColumn","useEffect","statusMapped","mappedCol","originalColumns","standardColumns","handleMappingChange","originalColumn","mappedColumn","getColumnValidationStatus","column","getColumnHeaderClass","status","cn","getMappingIndicatorClass","jsxs","jsx","X","CheckCircle","AlertCircle","stdColumn","row","rowIndex","DataUploadWindow","show","onUploadSuccess","defaultTab","activeTab","setActiveTab","file","setFile","uploading","setUploading","error","setError","dragActive","setDragActive","parsedData","setParsedData","showPreview","setShowPreview","setMappedColumns","setValidationErrors","isParsing","setIsParsing","parseProgress","setParseProgress","handleDrag","e","handleDrop","handleFile","handleFileChange","validTypes","validExtensions","fileExtension","parseFile","autoMapped","autoMapColumns","validation","validateData","handleUpdateMapping","newMappings","handleClosePreview","handleConfirmUpload","transformedData","transformData","formData","dataStr","chunks","uploadEndpoint","response","api","chunkFormData","chunkResponse","errorMessage","handleDownloadTemplate","AnimatePresence","motion","FileText","Upload","Download","DataUploadNotification","message","timer","Info","sizeClasses","colorClasses","SpinnerVariant","color","className","Loader2","DotsVariant","dotSize","PulseVariant","BarsVariant","barHeight","LoadingSpinner","variant","text","sizeClass","colorClass","renderVariant","LoadingStates","AnalysisResultVisualization","onExport","onDrillDown","expandedSections","setExpandedSections","selectedVisualization","setSelectedVisualization","toggleSection","section","newExpanded","getAnalysisIcon","type","Brain","Activity","BarChart3","Users","getConfidenceColor","confidence","getConfidenceBg","source","CollapsibleSection","Eye","insight","InsightCard","viz","VisualizationCard","Target","recommendation","RecommendationCard","formatValue","v","title","icon","isExpanded","onToggle","children","ChevronUp","ChevronDown","getSeverityIcon","severity","AlertTriangle","getSeverityBg","visualization","isSelected","onSelect","getVisualizationIcon","PieChart","getPriorityIcon","priority","TrendingUp","TrendingDown","getPriorityBg","Calendar","windowObject","cancelFrame","requestFrame","TIMEOUT_DURATION","clearTimeoutFn","setTimeoutFn","cancelAnimationFrameFn","requestAnimationFrameFn","callback","animationFrameID","timeoutID","createDetectElementResize","nonce","animationKeyframes","animationName","animationStartEvent","animationStyle","checkTriggers","resetTriggers","scrollListener","attachEvent","triggers","expand","contract","expandChild","animation","keyframeprefix","domPrefixes","startEvents","pfx","elm","createStyles","doc","css","head","style","elementStyle","expandTrigger","contractTrigger","AutoSizer","Component","disableHeight","disableWidth","onResize","paddingLeft","paddingRight","paddingTop","paddingBottom","maybeLogDeprecationWarning","autoSizer","parentNode","ResizeObserverInstance","defaultHeight","defaultWidth","doNotBailOutOnEmptyChildren","tagName","rest","outerStyle","childParams","bailoutOnChildren","createElement","clamp","max","DirectionContext","React.createContext","useDirection","localDir","globalDir","React.useContext","sides","round","floor","createCoords","oppositeSideMap","oppositeAlignmentMap","evaluate","param","getSide","placement","getAlignment","getOppositeAxis","axis","getAxisLength","yAxisSides","getSideAxis","getAlignmentAxis","getAlignmentSides","rects","rtl","alignment","alignmentAxis","length","mainAlignmentSide","getOppositePlacement","getExpandedPlacements","oppositePlacement","getOppositeAlignmentPlacement","lrPlacement","rlPlacement","tbPlacement","btPlacement","getSideList","side","isStart","getOppositeAxisPlacements","flipAlignment","direction","list","expandPaddingObject","padding","getPaddingObject","rectToClientRect","x","y","computeCoordsFromPlacement","_ref","reference","floating","sideAxis","alignLength","isVertical","commonX","commonY","commonAlign","coords","computePosition","config","strategy","middleware","platform","validMiddleware","statefulPlacement","middlewareData","resetCount","name","nextX","nextY","reset","detectOverflow","state","_await$platform$isEle","elements","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","offsetParent","offsetScale","elementClientRect","arrow","arrowDimensions","isYAxis","minProp","maxProp","clientProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","largestPossiblePadding","minPadding","maxPadding","min$1","center","shouldAddOffset","alignmentOffset","flip","_middlewareData$arrow","_middlewareData$flip","initialPlacement","checkMainAxis","checkCrossAxis","specifiedFallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","detectOverflowOptions","initialSideAxis","isBasePlacement","fallbackPlacements","hasFallbackAxisSideDirection","placements","overflow","overflows","overflowsData","_middlewareData$flip2","_overflowsData$filter","nextIndex","nextPlacement","resetPlacement","_overflowsData$filter2","currentSideAxis","acc","getSideOffsets","isAnySideFullyClipped","hide","offsets","originSides","convertValueToCoords","mainAxisMulti","crossAxisMulti","rawValue","mainAxis","crossAxis","_middlewareData$offse","diffCoords","shift","limiter","mainAxisCoord","crossAxisCoord","minSide","maxSide","limitedCoords","limitShift","rawOffset","computedOffset","limitMin","limitMax","_middlewareData$offse2","isOriginSide","_state$middlewareData","_state$middlewareData2","apply","heightSide","widthSide","maximumClippingHeight","maximumClippingWidth","overflowAvailableHeight","overflowAvailableWidth","noShift","availableHeight","availableWidth","xMin","xMax","yMin","yMax","nextDimensions","hasWindow","getNodeName","isNode","getWindow","_node$ownerDocument","getDocumentElement","isElement","isHTMLElement","isShadowRoot","invalidOverflowDisplayValues","isOverflowElement","overflowX","overflowY","display","getComputedStyle","tableElements","isTableElement","topLayerSelectors","isTopLayer","selector","transformProperties","willChangeValues","containValues","isContainingBlock","elementOrCss","webkit","isWebKit","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","lastTraversableNodeNames","getNodeScroll","getNearestOverflowAncestor","getOverflowAncestors","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","frameElement","getFrameElement","getCssDimensions","getComputedStyle$1","hasOffset","shouldFallback","unwrapElement","getScale","domElement","$","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scale","visualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","left","top","getWindowScrollBarX","leftScroll","getHTMLOffset","documentElement","scroll","htmlRect","convertOffsetParentRelativeRectToViewportRelativeRect","topLayer","isOffsetParentAnElement","offsetRect","htmlOffset","getClientRects","getDocumentRect","html","body","SCROLLBAR_MAX","getViewportRect","visualViewport","visualViewportBased","windowScrollbarX","bodyStyles","bodyMarginInline","clippingStableScrollbarWidth","absoluteOrFixed","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cache","cachedResult","el","currentContainingBlockComputedStyle","elementIsFixed","computedStyle","currentNodeIsContaining","ancestor","getClippingRect","clippingAncestors","firstClippingAncestor","clippingRect","accRect","getDimensions","getRectRelativeToOffsetParent","setLeftRTLScrollbarOffset","isStaticPositioned","getTrueOffsetParent","polyfill","rawOffsetParent","getOffsetParent","svgOffsetParent","getElementRects","getOffsetParentFn","getDimensionsFn","floatingDimensions","isRTL","rectsAreEqual","observeMove","onMove","io","root","cleanup","_io","refresh","skip","threshold","elementRectForRootMargin","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","ratio","autoUpdate","update","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","resizeObserver","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","offset$1","shift$1","flip$1","size$1","hide$1","arrow$1","limitShift$1","mergedOptions","platformWithCache","computePosition$1","isClient","noop","useLayoutEffect","deepEqual","keys","getDPR","roundByDPR","dpr","useLatestRef","ref","React.useRef","useFloating","externalReference","externalFloating","transform","whileElementsMounted","open","setData","latestMiddleware","setLatestMiddleware","_reference","_setReference","_floating","_setFloating","setReference","React.useCallback","referenceRef","setFloating","floatingRef","floatingEl","dataRef","hasWhileElementsMounted","whileElementsMountedRef","platformRef","openRef","fullData","isMountedRef","ReactDOM.flushSync","refs","React.useMemo","floatingStyles","initialStyles","isRef","arrow$2","NAME","Arrow","React.forwardRef","props","forwardedRef","arrowProps","Primitive","Root","POPPER_NAME","createPopperContext","createPopperScope","createContextScope","PopperProvider","usePopperContext","Popper","__scopePopper","anchor","setAnchor","ANCHOR_NAME","PopperAnchor","virtualRef","anchorProps","context","composedRefs","useComposedRefs","anchorRef","previousAnchor","CONTENT_NAME","PopperContentProvider","useContentContext","PopperContent","sideOffset","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPaddingProp","sticky","hideWhenDetached","updatePositionStrategy","onPlaced","contentProps","content","setContent","setArrow","arrowSize","useSize","arrowWidth","arrowHeight","desiredPlacement","collisionPadding","hasExplicitBoundaries","isNotNull","isPositioned","anchorWidth","anchorHeight","contentStyle","floatingUIarrow","transformOrigin","placedSide","placedAlign","getSideAndAlignFromPlacement","handlePlaced","useCallbackRef","arrowX","arrowY","cannotCenterArrow","contentZIndex","setContentZIndex","ARROW_NAME","OPPOSITE_SIDE","PopperArrow","contentContext","baseSide","ArrowPrimitive.Root","isArrowHidden","noArrowAlign","arrowXCenter","arrowYCenter","Root2","Anchor","Content","createSlot","ownerName","SlotClone","createSlotClone","Slot2","slotProps","childrenArray","React.Children","slottable","isSlottable","newElement","newChildren","child","React.isValidElement","React.cloneElement","childrenRef","getElementRef","props2","mergeProps","React.Fragment","composeRefs","SLOTTABLE_IDENTIFIER","childProps","overrideProps","propName","slotPropValue","childPropValue","getter","mayWarn","OPEN_KEYS","SELECTION_KEYS","SELECT_NAME","Collection","useCollection","createCollectionScope","createCollection","createSelectContext","usePopperScope","SelectProvider","useSelectContext","SelectNativeOptionsProvider","useSelectNativeOptionsContext","Select","__scopeSelect","openProp","defaultOpen","onOpenChange","valueProp","defaultValue","onValueChange","dir","autoComplete","disabled","required","form","popperScope","trigger","setTrigger","valueNode","setValueNode","valueNodeHasChildren","setValueNodeHasChildren","setOpen","useControllableState","setValue","triggerPointerDownPosRef","isFormControl","nativeOptionsSet","setNativeOptionsSet","nativeSelectKey","option","PopperPrimitive.Root","useId","prev","optionsSet","SelectBubbleInput","event","TRIGGER_NAME","SelectTrigger","triggerProps","isDisabled","getItems","pointerTypeRef","searchRef","handleTypeaheadSearch","resetTypeahead","useTypeaheadSearch","search","enabledItems","currentItem","nextItem","findNextItem","handleOpen","pointerEvent","PopperPrimitive.Anchor","shouldShowPlaceholder","composeEventHandlers","isTypingAhead","VALUE_NAME","SelectValue","placeholder","valueProps","onValueNodeHasChildrenChange","hasChildren","Fragment","ICON_NAME","SelectIcon","iconProps","PORTAL_NAME","SelectPortal","PortalPrimitive","SelectContent","fragment","setFragment","frag","ReactDOM.createPortal","SelectContentProvider","SelectContentImpl","CONTENT_MARGIN","useSelectContentContext","CONTENT_IMPL_NAME","Slot","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","viewport","setViewport","selectedItem","setSelectedItem","selectedItemText","setSelectedItemText","setIsPositioned","firstValidItemFoundRef","hideOthers","useFocusGuards","focusFirst","candidates","firstItem","restItems","lastItem","PREVIOUSLY_FOCUSED_ELEMENT","candidate","focusSelectedItem","pointerMoveDelta","handlePointerMove","handlePointerUp","close","itemRefCallback","isFirstValidItem","handleItemLeave","itemTextRefCallback","SelectPosition","SelectPopperPosition","SelectItemAlignedPosition","popperContentProps","RemoveScroll","FocusScope","DismissableLayer","isModifierKey","candidateNodes","currentElement","currentIndex","ITEM_ALIGNED_POSITION_NAME","popperProps","contentWrapper","setContentWrapper","shouldExpandOnScrollRef","shouldRepositionRef","triggerRect","contentRect","valueNodeRect","itemTextRect","itemTextOffset","leftDelta","minContentWidth","contentWidth","rightEdge","clampedLeft","right","rightDelta","leftEdge","clampedRight","items","itemsHeight","contentStyles","contentBorderTopWidth","contentPaddingTop","contentBorderBottomWidth","contentPaddingBottom","fullContentHeight","minContentHeight","viewportStyles","viewportPaddingTop","viewportPaddingBottom","topEdgeToTriggerMiddle","triggerMiddleToBottomEdge","selectedItemHalfHeight","itemOffsetMiddle","contentTopToItemMiddle","itemMiddleToContentBottom","isLastItem","viewportOffsetBottom","clampedTriggerMiddleToBottomEdge","isFirstItem","handleScrollButtonChange","SelectViewportProvider","POPPER_POSITION_NAME","PopperPrimitive.Content","useSelectViewportContext","VIEWPORT_NAME","SelectViewport","viewportProps","viewportContext","prevScrollTopRef","scrolledBy","cssMinHeight","cssHeight","prevHeight","nextHeight","clampedNextHeight","heightDiff","GROUP_NAME","SelectGroupContextProvider","useSelectGroupContext","SelectGroup","groupProps","groupId","LABEL_NAME","SelectLabel","labelProps","groupContext","ITEM_NAME","SelectItemContextProvider","useSelectItemContext","SelectItem","textValueProp","itemProps","textValue","setTextValue","isFocused","setIsFocused","textId","handleSelect","prevTextValue","ITEM_TEXT_NAME","SelectItemText","itemTextProps","itemContext","nativeOptionsContext","itemTextNode","setItemTextNode","textContent","nativeOption","onNativeOptionAdd","onNativeOptionRemove","ITEM_INDICATOR_NAME","SelectItemIndicator","itemIndicatorProps","SCROLL_UP_BUTTON_NAME","SelectScrollUpButton","canScrollUp","setCanScrollUp","handleScroll2","canScrollUp2","SelectScrollButtonImpl","SCROLL_DOWN_BUTTON_NAME","SelectScrollDownButton","canScrollDown","setCanScrollDown","maxScroll","canScrollDown2","onAutoScroll","scrollIndicatorProps","autoScrollTimerRef","clearAutoScrollTimer","SEPARATOR_NAME","SelectSeparator","separatorProps","SelectArrow","PopperPrimitive.Arrow","BUBBLE_INPUT_NAME","prevValue","usePrevious","select","selectProto","VISUALLY_HIDDEN_STYLES","onSearchChange","handleSearchChange","timerRef","updateSearch","normalizedSearch","char","currentItemIndex","wrappedItems","wrapArray","array","_","Trigger","Value","Icon","Portal","Content2","Viewport","Label","Item","ItemText","ItemIndicator","ScrollUpButton","ScrollDownButton","Separator","SelectPrimitive.Root","SelectPrimitive.Value","SelectPrimitive.Trigger","SelectPrimitive.Icon","SelectPrimitive.ScrollUpButton","SelectPrimitive.ScrollDownButton","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectPrimitive.Label","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","Check","SelectPrimitive.ItemText","SelectPrimitive.Separator","riskColorMap","RiskLevel","defaultDepartments","MAX_DEPARTMENT_EDGES","MAX_PEER_EDGES_PER_GROUP","MAX_EDGES_TOTAL","MAX_NODES","prioritizeEmployees","employees","riskRank","scored","employee","riskLevel","churn","score","computeAffinity","weight","reasons","posA","posB","diff","tenureDiff","pruneGraph","nodes","edges","minDegree","nodeMap","currentEdges","currentIds","changed","degree","edge","keepIds","id","buildNetwork","isResigned","probability","employeeById","edgesMap","addEdge","existing","reason","managerKey","manager","peersByManager","group","seenPairs","remaining","affinity","employeesByDept","dept","departmentEdgeCount","pruned","nodeLookup","riskySource","riskyTarget","clusterNames","columnCount","rowCount","clusters","col","nodesByDept","cluster","members","radius","angle","offsetX","offsetY","EmployeeNetworkGraph","availableDepartments","isLoading","departmentOptions","useMemo","merged","departmentFilter","setDepartmentFilter","hovered","setHovered","filteredEmployees","trimmedEmployees","totalFiltered","totalConsidered","performanceLimited","connectionFiltered","performanceSuffix","connectionMessage","toPixelX","toPixelY","x1","y1","x2","y2","strokeWidth","stroke","opacity","fill","counterpartId","counterpart","AutoThresholdService","autoAdjustThresholds","getAutoAdjustmentConfig","lastAnalysis","analyzeOptimalThresholds","initializeSmartThresholds","intervalMs","currentAnalysis","currentDist","targetDist","highDeviation","mediumDeviation","lowDeviation","maxAllowedDeviation","analysis","recommendations","shouldAdjust","validProbabilities","emp","prob","thresholds","getCurrentThresholds","highRiskCount","p","lowRiskCount","autoThresholdService","Cell","_props","useMouseEnterItemDispatch","onMouseEnterFromProps","dataKey","dispatch","useAppDispatch","setActiveMouseOverItemIndex","useMouseLeaveItemDispatch","onMouseLeaveFromProps","mouseLeaveItem","useMouseClickItemDispatch","onMouseClickFromProps","setActiveClickItemIndex","prefix","invariant","condition","_excluded","_extends","n","r","ownKeys","o","_objectSpread","_defineProperty","_toPropertyKey","t","_toPrimitive","_objectWithoutProperties","_objectWithoutPropertiesLoose","typeguardBarRectangleProps","xProp","yProp","xValue","yValue","heightValue","widthValue","BarRectangle","React.createElement","Shape","minPointSizeCallback","minPointSize","isNumber","isValueNumberOrNil","isNullish","getZIndexFromUnknown","input","defaultZIndex","isWellBehavedNumber","_excluded2","_excluded3","_excluded4","computeLegendPayloadFromBarData","legendType","getTooltipNameProp","getTooltipEntrySettings","unit","BarBackground","activeIndex","useAppSelector","selectActiveTooltipIndex","backgroundFromProps","allOtherBarProps","onItemClickFromProps","restOfAllOtherProps","onMouseEnterFromContext","onMouseLeaveFromContext","onClickFromContext","backgroundProps","svgPropertiesNoEventsFromUnknown","ZIndexLayer","DefaultZIndexes","backgroundFromDataEntry","tooltipPosition","onMouseEnter","onMouseLeave","onClick","barRectangleProps","adaptEventsOfChild","BarLabelListProvider","showLabels","labelListEntries","viewBox","CartesianLabelListContextProvider","BarRectangleWithActiveState","shape","activeBar","baseProps","activeDataKey","selectActiveTooltipDataKey","isActive","BarRectangleNeverActive","BarRectangles","_ref2","_svgPropertiesNoEvent","_ref3","svgPropertiesNoEvents","Layer","RectanglesWithAnimation","_ref4","previousRectanglesRef","layout","isAnimationActive","animationBegin","animationDuration","animationEasing","onAnimationEnd","onAnimationStart","prevData","animationId","useAnimationId","isAnimating","setIsAnimating","handleAnimationEnd","useCallback","handleAnimationStart","JavascriptAnimate","stepData","interpolate","w","LabelListFromLabelProp","RenderRectangles","useRef","defaultMinPointSize","errorBarDataPointFormatter","dataPoint","getValueByDataKey","BarWithState","PureComponent","xAxisId","yAxisId","needClip","background","layerClass","clsx","clipPathId","GraphicalItemClipPath","defaultBarProps","Global","BarImpl","useNeedsClip","useChartLayout","isPanorama","useIsPanorama","cells","findAllByType","selectBarRectangles","errorBarOffset","firstDataPoint","SetErrorBarContext","computeBarRectangles","_ref5","minPointSizeProp","bandSize","xAxis","yAxis","xAxisTicks","yAxisTicks","stackedData","displayedData","parentViewBox","dataStartIndex","numericAxis","stackedDomain","baseValue","getBaseValueOfBar","stackedBarStart","truncateByDomain","_ref6","baseValueScale","currentValueScale","getCateCoordinateOfBar","computedHeight","isNan","mathSign","_baseValueScale","_currentValueScale","_delta","barRectangleItem","BarFn","outsideProps","resolveDefaultProps","RegisterGraphicalItemId","SetLegendPayload","SetTooltipEntrySettings","SetCartesianGraphicalItem","getNormalizedStackId","Bar","React.memo","pickXAxisId","_state","pickYAxisId","_xAxisId","pickIsPanorama","_yAxisId","pickBarId","_isPanorama","selectSynchronisedBarSettings","createSelector","selectUnfilteredCartesianItems","graphicalItems","selectMaxBarSize","barSettings","pickCells","_id","getBarSize","globalSize","totalSize","selfSize","barSize","getPercentValue","selectAllVisibleBars","selectChartLayout","allItems","selectBarStackGroups","selectStackGroups","selectBarCartesianAxisSize","selectCartesianAxisSize","combineBarSizeList","allBars","initialValue","stackedBars","isStacked","unstackedBars","groupByStack","bar","stackedSizeList","stackId","bars","dataKeys","unstackedSizeList","dk","selectBarSizeList","selectRootBarSize","selectBarBandSize","_getBandSizeOfAxis","globalMaxBarSize","selectRootMaxBarSize","childMaxBarSize","maxBarSize","ticks","selectAxisWithScale","selectTicksOfGraphicalItem","getBandSizeOfAxis","selectAxisBandSize","getBarPositions","barGap","barCategoryGap","sizeList","realBarGap","useFull","fullBarSize","sum","res","_entry$barSize","newPosition","newRes","_offset","originalSize","combineAllBarPositions","barBandSize","allBarPositions","selectAllBarPositions","selectBarGap","selectBarCategoryGap","selectXAxisWithScale","selectYAxisWithScale","selectXAxisTicks","selectYAxisTicks","selectBarPosition","combineStackedData","stackGroups","stackSeriesIdentifier","getStackSeriesIdentifier","stackGroup","sd","selectStackedDataOfItem","selectChartOffsetInternal","selectAxisViewBox","selectChartDataWithIndexesIfNotInPanorama","axisViewBox","chartData","dataEndIndex","allowedTooltipTypes","BarChart","forwardRef","CartesianChart","arrayTooltipSearcher","analyzeChurnPatternsLocal","analysisData","patterns","analyzeEmployeePatterns","analyzeEngagementCorrelationLocal","createFallbackAnalysis","generateOrganizationalInsightsLocal","departments","metrics","deptRisks","deptEmployees","avgRisk","runCrossAnalysisLocal","runGeneralAnalysisLocal","analysisType","l","insights","visualizations","highRisk","mediumRisk","risk","lowRisk","totalEmployees","highRiskPercentage","mediumRiskPercentage","riskVariance","avgHighRisk","maxRisk","avgMediumRisk","deptGroups","emps","mediumRiskCount","highestRiskDept","lowestRiskDept","positionGroups","positionRisks","positionEmployees","highestRiskPosition","tenureGroups","tenure","tenureRisks","groupEmployees","highestRiskTenure","DepartmentRiskChart","ResponsiveContainer","CartesianGrid","XAxis","YAxis","Tooltip","PositionRiskChart","TenureRiskChart","employeeCount","EmployeeTableRow","onReasoningClick","getRiskLevel","getRiskLevelWithStyles","riskInfo","hasIssues","confidenceColor","handleReasoningClick","Header","RiskBarCard","total","percentage","useDebounce","delay","debouncedValue","setDebouncedValue","Home","activeProject","useProject","homeEmployees","isLoadingHomeData","isEnhancingWithReasoning","reasoningEnhancementProgress","fetchHomeData","trainingStatus","useGlobalDataCache","getDynamicRiskLevel","getDynamicRiskLevelWithStyles","thresholdVersion","setThresholdVersion","setActiveTabSafe","tab","selectedAnalysisType","setSelectedAnalysisType","analysisParams","setAnalysisParams","isAnalysisRunning","setIsAnalysisRunning","analysisResults","setAnalysisResults","searchTerm","setSearchTerm","selectedDepartment","setSelectedDepartment","selectedPosition","setSelectedPosition","selectedRiskLevel","setSelectedRiskLevel","selectedStatus","setSelectedStatus","sortField","setSortField","sortDirection","setSortDirection","unsubscribe","subscribeToThresholdChanges","isUploadWindowOpen","setIsUploadWindowOpen","showNotification","setShowNotification","notificationMessage","setNotificationMessage","debouncedSearchTerm","parentRef","hasReasoningData","isModelReady","hasChurnReasoningData","baseFilteredEmployees","searchLower","fullName","structureName","dataForDepts","deptSet","availablePositions","dataForPositions","posSet","availableRiskLevels","dataForRisk","riskSet","availableStatuses","dataForStatus","statusSet","filtered","displayMetrics","churnSum","riskDistribution","churnProb","avgChurnProb","sortedEmployees","aValue","bValue","riskOrder","rowVirtualizer","handleSort","field","prevDirection","SortIcon","renderHeader","navigate","useNavigate","existingIndicator","dataUploadNote","handleNotificationClose","TrainingReminderBanner","Search","Input","level","virtualRow","format","exportData","rec","pdfContent","__vitePreload","html2canvas","canvas","jsPDF","JsPDF","pdf","imgData","pdfWidth","pdfHeight","_error","csvContent","cell","blob","link","url","_insightId","ModelTrainingRequired","FolderKanban"],"ignoreList":[0,1,2,8,9,10,11,12,13,14,15,16,17,18,19,23,24,25,26,27,28,29,30],"sources":["../../node_modules/@tanstack/virtual-core/dist/esm/utils.js","../../node_modules/@tanstack/virtual-core/dist/esm/index.js","../../node_modules/@tanstack/react-virtual/dist/esm/index.js","../../src/components/DataPreviewTable.tsx","../../src/components/DataUploadWindow.tsx","../../src/components/DataUploadNotification.tsx","../../src/components/LoadingSpinner.tsx","../../src/components/AnalysisResultVisualization.tsx","../../node_modules/react-virtualized-auto-sizer/dist/react-virtualized-auto-sizer.esm.js","../../node_modules/@radix-ui/number/dist/index.mjs","../../node_modules/@radix-ui/react-direction/dist/index.mjs","../../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../../node_modules/@floating-ui/core/dist/floating-ui.core.mjs","../../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../../node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs","../../node_modules/@radix-ui/react-arrow/dist/index.mjs","../../node_modules/@radix-ui/react-popper/dist/index.mjs","../../node_modules/@radix-ui/react-select/node_modules/@radix-ui/react-slot/dist/index.mjs","../../node_modules/@radix-ui/react-select/dist/index.mjs","../../src/components/ui/select.tsx","../../src/components/EmployeeNetworkGraph.tsx","../../src/services/autoThresholdService.ts","../../node_modules/recharts/es6/component/Cell.js","../../node_modules/recharts/es6/context/tooltipContext.js","../../node_modules/tiny-invariant/dist/esm/tiny-invariant.js","../../node_modules/recharts/es6/util/BarUtils.js","../../node_modules/recharts/es6/zIndex/getZIndexFromUnknown.js","../../node_modules/recharts/es6/cartesian/Bar.js","../../node_modules/recharts/es6/state/selectors/barSelectors.js","../../node_modules/recharts/es6/chart/BarChart.js","../../src/pages/Home.tsx"],"sourcesContent":["function memo(getDeps, fn, opts) {\n  let deps = opts.initialDeps ?? [];\n  let result;\n  function memoizedFunction() {\n    var _a, _b, _c, _d;\n    let depTime;\n    if (opts.key && ((_a = opts.debug) == null ? void 0 : _a.call(opts))) depTime = Date.now();\n    const newDeps = getDeps();\n    const depsChanged = newDeps.length !== deps.length || newDeps.some((dep, index) => deps[index] !== dep);\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    let resultTime;\n    if (opts.key && ((_b = opts.debug) == null ? void 0 : _b.call(opts))) resultTime = Date.now();\n    result = fn(...newDeps);\n    if (opts.key && ((_c = opts.debug) == null ? void 0 : _c.call(opts))) {\n      const depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      const resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      const resultFpsPercentage = resultEndTime / 16;\n      const pad = (str, num) => {\n        str = String(str);\n        while (str.length < num) {\n          str = \" \" + str;\n        }\n        return str;\n      };\n      console.info(\n        `%c ${pad(resultEndTime, 5)} /${pad(depEndTime, 5)} ms`,\n        `\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(\n          0,\n          Math.min(120 - 120 * resultFpsPercentage, 120)\n        )}deg 100% 31%);`,\n        opts == null ? void 0 : opts.key\n      );\n    }\n    (_d = opts == null ? void 0 : opts.onChange) == null ? void 0 : _d.call(opts, result);\n    return result;\n  }\n  memoizedFunction.updateDeps = (newDeps) => {\n    deps = newDeps;\n  };\n  return memoizedFunction;\n}\nfunction notUndefined(value, msg) {\n  if (value === void 0) {\n    throw new Error(`Unexpected undefined${msg ? `: ${msg}` : \"\"}`);\n  } else {\n    return value;\n  }\n}\nconst approxEqual = (a, b) => Math.abs(a - b) < 1.01;\nconst debounce = (targetWindow, fn, ms) => {\n  let timeoutId;\n  return function(...args) {\n    targetWindow.clearTimeout(timeoutId);\n    timeoutId = targetWindow.setTimeout(() => fn.apply(this, args), ms);\n  };\n};\nexport {\n  approxEqual,\n  debounce,\n  memo,\n  notUndefined\n};\n//# sourceMappingURL=utils.js.map\n","import { debounce, memo, notUndefined, approxEqual } from \"./utils.js\";\nconst getRect = (element) => {\n  const { offsetWidth, offsetHeight } = element;\n  return { width: offsetWidth, height: offsetHeight };\n};\nconst defaultKeyExtractor = (index) => index;\nconst defaultRangeExtractor = (range) => {\n  const start = Math.max(range.startIndex - range.overscan, 0);\n  const end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  const arr = [];\n  for (let i = start; i <= end; i++) {\n    arr.push(i);\n  }\n  return arr;\n};\nconst observeElementRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  const handler = (rect) => {\n    const { width, height } = rect;\n    cb({ width: Math.round(width), height: Math.round(height) });\n  };\n  handler(getRect(element));\n  if (!targetWindow.ResizeObserver) {\n    return () => {\n    };\n  }\n  const observer = new targetWindow.ResizeObserver((entries) => {\n    const run = () => {\n      const entry = entries[0];\n      if (entry == null ? void 0 : entry.borderBoxSize) {\n        const box = entry.borderBoxSize[0];\n        if (box) {\n          handler({ width: box.inlineSize, height: box.blockSize });\n          return;\n        }\n      }\n      handler(getRect(element));\n    };\n    instance.options.useAnimationFrameWithResizeObserver ? requestAnimationFrame(run) : run();\n  });\n  observer.observe(element, { box: \"border-box\" });\n  return () => {\n    observer.unobserve(element);\n  };\n};\nconst addEventListenerOptions = {\n  passive: true\n};\nconst observeWindowRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = () => {\n    cb({ width: element.innerWidth, height: element.innerHeight });\n  };\n  handler();\n  element.addEventListener(\"resize\", handler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"resize\", handler);\n  };\n};\nconst supportsScrollend = typeof window == \"undefined\" ? true : \"onscrollend\" in window;\nconst observeElementOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = instance.options.useScrollendEvent && supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    const { horizontal, isRtl } = instance.options;\n    offset = horizontal ? element[\"scrollLeft\"] * (isRtl && -1 || 1) : element[\"scrollTop\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  const registerScrollendEvent = instance.options.useScrollendEvent && supportsScrollend;\n  if (registerScrollendEvent) {\n    element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  }\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    if (registerScrollendEvent) {\n      element.removeEventListener(\"scrollend\", endHandler);\n    }\n  };\n};\nconst observeWindowOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = instance.options.useScrollendEvent && supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    offset = element[instance.options.horizontal ? \"scrollX\" : \"scrollY\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  const registerScrollendEvent = instance.options.useScrollendEvent && supportsScrollend;\n  if (registerScrollendEvent) {\n    element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  }\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    if (registerScrollendEvent) {\n      element.removeEventListener(\"scrollend\", endHandler);\n    }\n  };\n};\nconst measureElement = (element, entry, instance) => {\n  if (entry == null ? void 0 : entry.borderBoxSize) {\n    const box = entry.borderBoxSize[0];\n    if (box) {\n      const size = Math.round(\n        box[instance.options.horizontal ? \"inlineSize\" : \"blockSize\"]\n      );\n      return size;\n    }\n  }\n  return element[instance.options.horizontal ? \"offsetWidth\" : \"offsetHeight\"];\n};\nconst windowScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nconst elementScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nclass Virtualizer {\n  constructor(opts) {\n    this.unsubs = [];\n    this.scrollElement = null;\n    this.targetWindow = null;\n    this.isScrolling = false;\n    this.measurementsCache = [];\n    this.itemSizeCache = /* @__PURE__ */ new Map();\n    this.pendingMeasuredCacheIndexes = [];\n    this.scrollRect = null;\n    this.scrollOffset = null;\n    this.scrollDirection = null;\n    this.scrollAdjustments = 0;\n    this.elementsCache = /* @__PURE__ */ new Map();\n    this.observer = /* @__PURE__ */ (() => {\n      let _ro = null;\n      const get = () => {\n        if (_ro) {\n          return _ro;\n        }\n        if (!this.targetWindow || !this.targetWindow.ResizeObserver) {\n          return null;\n        }\n        return _ro = new this.targetWindow.ResizeObserver((entries) => {\n          entries.forEach((entry) => {\n            const run = () => {\n              this._measureElement(entry.target, entry);\n            };\n            this.options.useAnimationFrameWithResizeObserver ? requestAnimationFrame(run) : run();\n          });\n        });\n      };\n      return {\n        disconnect: () => {\n          var _a;\n          (_a = get()) == null ? void 0 : _a.disconnect();\n          _ro = null;\n        },\n        observe: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.observe(target, { box: \"border-box\" });\n        },\n        unobserve: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.unobserve(target);\n        }\n      };\n    })();\n    this.range = null;\n    this.setOptions = (opts2) => {\n      Object.entries(opts2).forEach(([key, value]) => {\n        if (typeof value === \"undefined\") delete opts2[key];\n      });\n      this.options = {\n        debug: false,\n        initialOffset: 0,\n        overscan: 1,\n        paddingStart: 0,\n        paddingEnd: 0,\n        scrollPaddingStart: 0,\n        scrollPaddingEnd: 0,\n        horizontal: false,\n        getItemKey: defaultKeyExtractor,\n        rangeExtractor: defaultRangeExtractor,\n        onChange: () => {\n        },\n        measureElement,\n        initialRect: { width: 0, height: 0 },\n        scrollMargin: 0,\n        gap: 0,\n        indexAttribute: \"data-index\",\n        initialMeasurementsCache: [],\n        lanes: 1,\n        isScrollingResetDelay: 150,\n        enabled: true,\n        isRtl: false,\n        useScrollendEvent: false,\n        useAnimationFrameWithResizeObserver: false,\n        ...opts2\n      };\n    };\n    this.notify = (sync) => {\n      var _a, _b;\n      (_b = (_a = this.options).onChange) == null ? void 0 : _b.call(_a, this, sync);\n    };\n    this.maybeNotify = memo(\n      () => {\n        this.calculateRange();\n        return [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ];\n      },\n      (isScrolling) => {\n        this.notify(isScrolling);\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"maybeNotify\",\n        debug: () => this.options.debug,\n        initialDeps: [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ]\n      }\n    );\n    this.cleanup = () => {\n      this.unsubs.filter(Boolean).forEach((d) => d());\n      this.unsubs = [];\n      this.observer.disconnect();\n      this.scrollElement = null;\n      this.targetWindow = null;\n    };\n    this._didMount = () => {\n      return () => {\n        this.cleanup();\n      };\n    };\n    this._willUpdate = () => {\n      var _a;\n      const scrollElement = this.options.enabled ? this.options.getScrollElement() : null;\n      if (this.scrollElement !== scrollElement) {\n        this.cleanup();\n        if (!scrollElement) {\n          this.maybeNotify();\n          return;\n        }\n        this.scrollElement = scrollElement;\n        if (this.scrollElement && \"ownerDocument\" in this.scrollElement) {\n          this.targetWindow = this.scrollElement.ownerDocument.defaultView;\n        } else {\n          this.targetWindow = ((_a = this.scrollElement) == null ? void 0 : _a.window) ?? null;\n        }\n        this.elementsCache.forEach((cached) => {\n          this.observer.observe(cached);\n        });\n        this._scrollToOffset(this.getScrollOffset(), {\n          adjustments: void 0,\n          behavior: void 0\n        });\n        this.unsubs.push(\n          this.options.observeElementRect(this, (rect) => {\n            this.scrollRect = rect;\n            this.maybeNotify();\n          })\n        );\n        this.unsubs.push(\n          this.options.observeElementOffset(this, (offset, isScrolling) => {\n            this.scrollAdjustments = 0;\n            this.scrollDirection = isScrolling ? this.getScrollOffset() < offset ? \"forward\" : \"backward\" : null;\n            this.scrollOffset = offset;\n            this.isScrolling = isScrolling;\n            this.maybeNotify();\n          })\n        );\n      }\n    };\n    this.getSize = () => {\n      if (!this.options.enabled) {\n        this.scrollRect = null;\n        return 0;\n      }\n      this.scrollRect = this.scrollRect ?? this.options.initialRect;\n      return this.scrollRect[this.options.horizontal ? \"width\" : \"height\"];\n    };\n    this.getScrollOffset = () => {\n      if (!this.options.enabled) {\n        this.scrollOffset = null;\n        return 0;\n      }\n      this.scrollOffset = this.scrollOffset ?? (typeof this.options.initialOffset === \"function\" ? this.options.initialOffset() : this.options.initialOffset);\n      return this.scrollOffset;\n    };\n    this.getFurthestMeasurement = (measurements, index) => {\n      const furthestMeasurementsFound = /* @__PURE__ */ new Map();\n      const furthestMeasurements = /* @__PURE__ */ new Map();\n      for (let m = index - 1; m >= 0; m--) {\n        const measurement = measurements[m];\n        if (furthestMeasurementsFound.has(measurement.lane)) {\n          continue;\n        }\n        const previousFurthestMeasurement = furthestMeasurements.get(\n          measurement.lane\n        );\n        if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n          furthestMeasurements.set(measurement.lane, measurement);\n        } else if (measurement.end < previousFurthestMeasurement.end) {\n          furthestMeasurementsFound.set(measurement.lane, true);\n        }\n        if (furthestMeasurementsFound.size === this.options.lanes) {\n          break;\n        }\n      }\n      return furthestMeasurements.size === this.options.lanes ? Array.from(furthestMeasurements.values()).sort((a, b) => {\n        if (a.end === b.end) {\n          return a.index - b.index;\n        }\n        return a.end - b.end;\n      })[0] : void 0;\n    };\n    this.getMeasurementOptions = memo(\n      () => [\n        this.options.count,\n        this.options.paddingStart,\n        this.options.scrollMargin,\n        this.options.getItemKey,\n        this.options.enabled\n      ],\n      (count, paddingStart, scrollMargin, getItemKey, enabled) => {\n        this.pendingMeasuredCacheIndexes = [];\n        return {\n          count,\n          paddingStart,\n          scrollMargin,\n          getItemKey,\n          enabled\n        };\n      },\n      {\n        key: false\n      }\n    );\n    this.getMeasurements = memo(\n      () => [this.getMeasurementOptions(), this.itemSizeCache],\n      ({ count, paddingStart, scrollMargin, getItemKey, enabled }, itemSizeCache) => {\n        if (!enabled) {\n          this.measurementsCache = [];\n          this.itemSizeCache.clear();\n          return [];\n        }\n        if (this.measurementsCache.length === 0) {\n          this.measurementsCache = this.options.initialMeasurementsCache;\n          this.measurementsCache.forEach((item) => {\n            this.itemSizeCache.set(item.key, item.size);\n          });\n        }\n        const min = this.pendingMeasuredCacheIndexes.length > 0 ? Math.min(...this.pendingMeasuredCacheIndexes) : 0;\n        this.pendingMeasuredCacheIndexes = [];\n        const measurements = this.measurementsCache.slice(0, min);\n        for (let i = min; i < count; i++) {\n          const key = getItemKey(i);\n          const furthestMeasurement = this.options.lanes === 1 ? measurements[i - 1] : this.getFurthestMeasurement(measurements, i);\n          const start = furthestMeasurement ? furthestMeasurement.end + this.options.gap : paddingStart + scrollMargin;\n          const measuredSize = itemSizeCache.get(key);\n          const size = typeof measuredSize === \"number\" ? measuredSize : this.options.estimateSize(i);\n          const end = start + size;\n          const lane = furthestMeasurement ? furthestMeasurement.lane : i % this.options.lanes;\n          measurements[i] = {\n            index: i,\n            start,\n            size,\n            end,\n            key,\n            lane\n          };\n        }\n        this.measurementsCache = measurements;\n        return measurements;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getMeasurements\",\n        debug: () => this.options.debug\n      }\n    );\n    this.calculateRange = memo(\n      () => [\n        this.getMeasurements(),\n        this.getSize(),\n        this.getScrollOffset(),\n        this.options.lanes\n      ],\n      (measurements, outerSize, scrollOffset, lanes) => {\n        return this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n          measurements,\n          outerSize,\n          scrollOffset,\n          lanes\n        }) : null;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"calculateRange\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getVirtualIndexes = memo(\n      () => {\n        let startIndex = null;\n        let endIndex = null;\n        const range = this.calculateRange();\n        if (range) {\n          startIndex = range.startIndex;\n          endIndex = range.endIndex;\n        }\n        this.maybeNotify.updateDeps([this.isScrolling, startIndex, endIndex]);\n        return [\n          this.options.rangeExtractor,\n          this.options.overscan,\n          this.options.count,\n          startIndex,\n          endIndex\n        ];\n      },\n      (rangeExtractor, overscan, count, startIndex, endIndex) => {\n        return startIndex === null || endIndex === null ? [] : rangeExtractor({\n          startIndex,\n          endIndex,\n          overscan,\n          count\n        });\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getVirtualIndexes\",\n        debug: () => this.options.debug\n      }\n    );\n    this.indexFromElement = (node) => {\n      const attributeName = this.options.indexAttribute;\n      const indexStr = node.getAttribute(attributeName);\n      if (!indexStr) {\n        console.warn(\n          `Missing attribute name '${attributeName}={index}' on measured element.`\n        );\n        return -1;\n      }\n      return parseInt(indexStr, 10);\n    };\n    this._measureElement = (node, entry) => {\n      const index = this.indexFromElement(node);\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return;\n      }\n      const key = item.key;\n      const prevNode = this.elementsCache.get(key);\n      if (prevNode !== node) {\n        if (prevNode) {\n          this.observer.unobserve(prevNode);\n        }\n        this.observer.observe(node);\n        this.elementsCache.set(key, node);\n      }\n      if (node.isConnected) {\n        this.resizeItem(index, this.options.measureElement(node, entry, this));\n      }\n    };\n    this.resizeItem = (index, size) => {\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return;\n      }\n      const itemSize = this.itemSizeCache.get(item.key) ?? item.size;\n      const delta = size - itemSize;\n      if (delta !== 0) {\n        if (this.shouldAdjustScrollPositionOnItemSizeChange !== void 0 ? this.shouldAdjustScrollPositionOnItemSizeChange(item, delta, this) : item.start < this.getScrollOffset() + this.scrollAdjustments) {\n          if (process.env.NODE_ENV !== \"production\" && this.options.debug) {\n            console.info(\"correction\", delta);\n          }\n          this._scrollToOffset(this.getScrollOffset(), {\n            adjustments: this.scrollAdjustments += delta,\n            behavior: void 0\n          });\n        }\n        this.pendingMeasuredCacheIndexes.push(item.index);\n        this.itemSizeCache = new Map(this.itemSizeCache.set(item.key, size));\n        this.notify(false);\n      }\n    };\n    this.measureElement = (node) => {\n      if (!node) {\n        this.elementsCache.forEach((cached, key) => {\n          if (!cached.isConnected) {\n            this.observer.unobserve(cached);\n            this.elementsCache.delete(key);\n          }\n        });\n        return;\n      }\n      this._measureElement(node, void 0);\n    };\n    this.getVirtualItems = memo(\n      () => [this.getVirtualIndexes(), this.getMeasurements()],\n      (indexes, measurements) => {\n        const virtualItems = [];\n        for (let k = 0, len = indexes.length; k < len; k++) {\n          const i = indexes[k];\n          const measurement = measurements[i];\n          virtualItems.push(measurement);\n        }\n        return virtualItems;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getVirtualItems\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getVirtualItemForOffset = (offset) => {\n      const measurements = this.getMeasurements();\n      if (measurements.length === 0) {\n        return void 0;\n      }\n      return notUndefined(\n        measurements[findNearestBinarySearch(\n          0,\n          measurements.length - 1,\n          (index) => notUndefined(measurements[index]).start,\n          offset\n        )]\n      );\n    };\n    this.getOffsetForAlignment = (toOffset, align, itemSize = 0) => {\n      const size = this.getSize();\n      const scrollOffset = this.getScrollOffset();\n      if (align === \"auto\") {\n        align = toOffset >= scrollOffset + size ? \"end\" : \"start\";\n      }\n      if (align === \"center\") {\n        toOffset += (itemSize - size) / 2;\n      } else if (align === \"end\") {\n        toOffset -= size;\n      }\n      const maxOffset = this.getTotalSize() + this.options.scrollMargin - size;\n      return Math.max(Math.min(maxOffset, toOffset), 0);\n    };\n    this.getOffsetForIndex = (index, align = \"auto\") => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return void 0;\n      }\n      const size = this.getSize();\n      const scrollOffset = this.getScrollOffset();\n      if (align === \"auto\") {\n        if (item.end >= scrollOffset + size - this.options.scrollPaddingEnd) {\n          align = \"end\";\n        } else if (item.start <= scrollOffset + this.options.scrollPaddingStart) {\n          align = \"start\";\n        } else {\n          return [scrollOffset, align];\n        }\n      }\n      const toOffset = align === \"end\" ? item.end + this.options.scrollPaddingEnd : item.start - this.options.scrollPaddingStart;\n      return [\n        this.getOffsetForAlignment(toOffset, align, item.size),\n        align\n      ];\n    };\n    this.isDynamicMode = () => this.elementsCache.size > 0;\n    this.scrollToOffset = (toOffset, { align = \"start\", behavior } = {}) => {\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getOffsetForAlignment(toOffset, align), {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.scrollToIndex = (index, { align: initialAlign = \"auto\", behavior } = {}) => {\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      let attempts = 0;\n      const maxAttempts = 10;\n      const tryScroll = (currentAlign) => {\n        if (!this.targetWindow) return;\n        const offsetInfo = this.getOffsetForIndex(index, currentAlign);\n        if (!offsetInfo) {\n          console.warn(\"Failed to get offset for index:\", index);\n          return;\n        }\n        const [offset, align] = offsetInfo;\n        this._scrollToOffset(offset, { adjustments: void 0, behavior });\n        this.targetWindow.requestAnimationFrame(() => {\n          const currentOffset = this.getScrollOffset();\n          const afterInfo = this.getOffsetForIndex(index, align);\n          if (!afterInfo) {\n            console.warn(\"Failed to get offset for index:\", index);\n            return;\n          }\n          if (!approxEqual(afterInfo[0], currentOffset)) {\n            scheduleRetry(align);\n          }\n        });\n      };\n      const scheduleRetry = (align) => {\n        if (!this.targetWindow) return;\n        attempts++;\n        if (attempts < maxAttempts) {\n          if (process.env.NODE_ENV !== \"production\" && this.options.debug) {\n            console.info(\"Schedule retry\", attempts, maxAttempts);\n          }\n          this.targetWindow.requestAnimationFrame(() => tryScroll(align));\n        } else {\n          console.warn(\n            `Failed to scroll to index ${index} after ${maxAttempts} attempts.`\n          );\n        }\n      };\n      tryScroll(initialAlign);\n    };\n    this.scrollBy = (delta, { behavior } = {}) => {\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getScrollOffset() + delta, {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.getTotalSize = () => {\n      var _a;\n      const measurements = this.getMeasurements();\n      let end;\n      if (measurements.length === 0) {\n        end = this.options.paddingStart;\n      } else if (this.options.lanes === 1) {\n        end = ((_a = measurements[measurements.length - 1]) == null ? void 0 : _a.end) ?? 0;\n      } else {\n        const endByLane = Array(this.options.lanes).fill(null);\n        let endIndex = measurements.length - 1;\n        while (endIndex >= 0 && endByLane.some((val) => val === null)) {\n          const item = measurements[endIndex];\n          if (endByLane[item.lane] === null) {\n            endByLane[item.lane] = item.end;\n          }\n          endIndex--;\n        }\n        end = Math.max(...endByLane.filter((val) => val !== null));\n      }\n      return Math.max(\n        end - this.options.scrollMargin + this.options.paddingEnd,\n        0\n      );\n    };\n    this._scrollToOffset = (offset, {\n      adjustments,\n      behavior\n    }) => {\n      this.options.scrollToFn(offset, { behavior, adjustments }, this);\n    };\n    this.measure = () => {\n      this.itemSizeCache = /* @__PURE__ */ new Map();\n      this.notify(false);\n    };\n    this.setOptions(opts);\n  }\n}\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    const middle = (low + high) / 2 | 0;\n    const currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange({\n  measurements,\n  outerSize,\n  scrollOffset,\n  lanes\n}) {\n  const lastIndex = measurements.length - 1;\n  const getOffset = (index) => measurements[index].start;\n  if (measurements.length <= lanes) {\n    return {\n      startIndex: 0,\n      endIndex: lastIndex\n    };\n  }\n  let startIndex = findNearestBinarySearch(\n    0,\n    lastIndex,\n    getOffset,\n    scrollOffset\n  );\n  let endIndex = startIndex;\n  if (lanes === 1) {\n    while (endIndex < lastIndex && measurements[endIndex].end < scrollOffset + outerSize) {\n      endIndex++;\n    }\n  } else if (lanes > 1) {\n    const endPerLane = Array(lanes).fill(0);\n    while (endIndex < lastIndex && endPerLane.some((pos) => pos < scrollOffset + outerSize)) {\n      const item = measurements[endIndex];\n      endPerLane[item.lane] = item.end;\n      endIndex++;\n    }\n    const startPerLane = Array(lanes).fill(scrollOffset + outerSize);\n    while (startIndex >= 0 && startPerLane.some((pos) => pos >= scrollOffset)) {\n      const item = measurements[startIndex];\n      startPerLane[item.lane] = item.start;\n      startIndex--;\n    }\n    startIndex = Math.max(0, startIndex - startIndex % lanes);\n    endIndex = Math.min(lastIndex, endIndex + (lanes - 1 - endIndex % lanes));\n  }\n  return { startIndex, endIndex };\n}\nexport {\n  Virtualizer,\n  approxEqual,\n  debounce,\n  defaultKeyExtractor,\n  defaultRangeExtractor,\n  elementScroll,\n  measureElement,\n  memo,\n  notUndefined,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  windowScroll\n};\n//# sourceMappingURL=index.js.map\n","import * as React from \"react\";\nimport { flushSync } from \"react-dom\";\nimport { Virtualizer, elementScroll, observeElementOffset, observeElementRect, windowScroll, observeWindowOffset, observeWindowRect } from \"@tanstack/virtual-core\";\nexport * from \"@tanstack/virtual-core\";\nconst useIsomorphicLayoutEffect = typeof document !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nfunction useVirtualizerBase(options) {\n  const rerender = React.useReducer(() => ({}), {})[1];\n  const resolvedOptions = {\n    ...options,\n    onChange: (instance2, sync) => {\n      var _a;\n      if (sync) {\n        flushSync(rerender);\n      } else {\n        rerender();\n      }\n      (_a = options.onChange) == null ? void 0 : _a.call(options, instance2, sync);\n    }\n  };\n  const [instance] = React.useState(\n    () => new Virtualizer(resolvedOptions)\n  );\n  instance.setOptions(resolvedOptions);\n  useIsomorphicLayoutEffect(() => {\n    return instance._didMount();\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate();\n  });\n  return instance;\n}\nfunction useVirtualizer(options) {\n  return useVirtualizerBase({\n    observeElementRect,\n    observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options\n  });\n}\nfunction useWindowVirtualizer(options) {\n  return useVirtualizerBase({\n    getScrollElement: () => typeof document !== \"undefined\" ? window : null,\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    initialOffset: () => typeof document !== \"undefined\" ? window.scrollY : 0,\n    ...options\n  });\n}\nexport {\n  useVirtualizer,\n  useWindowVirtualizer\n};\n//# sourceMappingURL=index.js.map\n","import React, { useState, useEffect } from 'react';\nimport { AlertCircle, CheckCircle, X } from 'lucide-react';\nimport { cn } from '../lib/utils';\n\ninterface DataPreviewTableProps {\n  data: any[];\n  mappedColumns: Record<string, string>;\n  validationErrors: Record<string, string[]>;\n  onClose: () => void;\n  onConfirm: () => void;\n  onUpdateMapping: (originalColumn: string, mappedColumn: string) => void;\n}\n\nconst DataPreviewTable: React.FC<DataPreviewTableProps> = ({\n  data,\n  mappedColumns,\n  validationErrors,\n  onClose,\n  onConfirm,\n  onUpdateMapping\n}) => {\n  const [selectedColumn, setSelectedColumn] = useState<string | null>(null);\n  const [hasStatusColumn, setHasStatusColumn] = useState<boolean>(false);\n  \n  // Check if there's a Status column mapped\n  useEffect(() => {\n    const statusMapped = Object.values(mappedColumns).some(\n      mappedCol => mappedCol.toLowerCase() === 'status'\n    );\n    setHasStatusColumn(statusMapped);\n  }, [mappedColumns]);\n\n  // Get all available columns from the data\n  const originalColumns = data.length > 0 ? Object.keys(data[0]) : [];\n  \n  // Standard column options for mapping\n  const standardColumns = [\n    'full_name',\n    'structure_name',\n    'section_name',\n    'position',\n    'sex',\n    'status',\n    'age',\n    'tenure',\n    'last_salary_increase',\n    'last_position_change',\n    'vacation_usage_rate',\n    'one_or_two_day_vacations',\n    'last_debt_10',\n    'last_debt_90',\n    'total_trainings',\n    'total_personal_cost_azn',\n    'position_level',\n    'performance_rating_latest',\n    'employee_cost',\n    'report_date'\n  ];\n\n  // Handle column mapping change\n  const handleMappingChange = (originalColumn: string, mappedColumn: string) => {\n    onUpdateMapping(originalColumn, mappedColumn);\n    setSelectedColumn(null);\n  };\n\n  // Get validation status for a column\n  const getColumnValidationStatus = (column: string) => {\n    if (validationErrors[column] && validationErrors[column].length > 0) {\n      return 'error';\n    }\n    if (mappedColumns[column]) {\n      return 'mapped';\n    }\n    return 'unmapped';\n  };\n\n  // Get CSS class for column header based on validation status\n  const getColumnHeaderClass = (column: string) => {\n    const status = getColumnValidationStatus(column);\n    return cn(\n      'px-3 py-2 text-left text-xs font-medium uppercase tracking-wider cursor-pointer',\n      status === 'error' ? 'text-red-600 bg-red-50' : \n      status === 'mapped' ? 'text-app-green bg-app-green-light' : \n      'text-gray-500 bg-gray-50'\n    );\n  };\n\n  // Get CSS class for column mapping indicator\n  const getMappingIndicatorClass = (column: string) => {\n    const status = getColumnValidationStatus(column);\n    return cn(\n      'inline-flex items-center px-2 py-0.5 rounded text-xs font-medium',\n      status === 'error' ? 'bg-red-100 text-red-800' : \n      status === 'mapped' ? 'bg-app-green-light text-app-green' : \n      'bg-gray-100 text-gray-800'\n    );\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-xl overflow-hidden max-w-6xl w-full max-h-[80vh] flex flex-col\">\n      {/* Header */}\n      <div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-lg font-semibold text-gray-900\">Data Preview and Column Mapping</h2>\n          <p className=\"text-sm text-gray-500 mt-1\">\n            Verify your data and map columns to the correct fields\n          </p>\n        </div>\n        <button\n          onClick={onClose}\n          className=\"text-gray-400 hover:text-gray-500 transition-colors\"\n        >\n          <X size={24} />\n        </button>\n      </div>\n\n      {/* Validation summary */}\n      <div className=\"px-6 py-3 bg-gray-50 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            {!hasStatusColumn ? (\n              <div className=\"flex items-center text-amber-600\">\n                <AlertCircle size={16} className=\"mr-1\" />\n                <span className=\"text-sm font-medium\">Status column is required</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center text-app-green\">\n                <CheckCircle size={16} className=\"mr-1\" />\n                <span className=\"text-sm font-medium\">Status column is mapped</span>\n              </div>\n            )}\n            \n            {Object.keys(validationErrors).length > 0 && (\n              <div className=\"flex items-center text-red-600\">\n                <AlertCircle size={16} className=\"mr-1\" />\n                <span className=\"text-sm font-medium\">\n                  {Object.keys(validationErrors).length} column(s) with validation issues\n                </span>\n              </div>\n            )}\n          </div>\n          \n          <button\n            onClick={onConfirm}\n            disabled={!hasStatusColumn}\n            className={cn(\n              \"px-4 py-2 text-sm font-medium rounded-md\",\n              hasStatusColumn\n                ? \"bg-app-green text-white hover:bg-app-green-hover\"\n                : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n            )}\n          >\n            Confirm and Upload\n          </button>\n        </div>\n      </div>\n\n      {/* Table container with horizontal and vertical scrolling */}\n      <div className=\"flex-1 overflow-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50 sticky top-0 z-10\">\n            <tr>\n              {originalColumns.map((column) => (\n                <th\n                  key={column}\n                  scope=\"col\"\n                  className={getColumnHeaderClass(column)}\n                  onClick={() => setSelectedColumn(column === selectedColumn ? null : column)}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <span>{column}</span>\n                    <div className={getMappingIndicatorClass(column)}>\n                      {mappedColumns[column] || 'Not mapped'}\n                    </div>\n                  </div>\n                  \n                  {/* Column mapping dropdown */}\n                  {selectedColumn === column && (\n                    <div className=\"absolute mt-1 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-20\">\n                      <div className=\"py-1 max-h-60 overflow-auto\">\n                        <div className=\"px-3 py-2 text-xs font-semibold text-gray-500 bg-gray-50 sticky top-0\">\n                          Map to standard column:\n                        </div>\n                        {standardColumns.map((stdColumn) => (\n                          <button\n                            key={stdColumn}\n                            className={cn(\n                              \"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100\",\n                              mappedColumns[column] === stdColumn ? \"bg-app-green-light text-app-green\" : \"text-gray-700\"\n                            )}\n                            onClick={() => handleMappingChange(column, stdColumn)}\n                          >\n                            {stdColumn}\n                          </button>\n                        ))}\n                        <div className=\"border-t border-gray-100 mt-1 pt-1\">\n                          <button\n                            className=\"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\n                            onClick={() => handleMappingChange(column, '')}\n                          >\n                            Clear mapping\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Validation errors */}\n                  {validationErrors[column] && validationErrors[column].length > 0 && (\n                    <div className=\"text-xs text-red-600 mt-1\">\n                      {validationErrors[column][0]}\n                    </div>\n                  )}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {data.slice(0, 10).map((row, rowIndex) => (\n              <tr key={rowIndex} className={rowIndex % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                {originalColumns.map((column) => (\n                  <td key={`${rowIndex}-${column}`} className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-500\">\n                    {row[column] !== undefined && row[column] !== null ? String(row[column]) : ''}\n                  </td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n      \n      {/* Footer with preview info */}\n      <div className=\"px-6 py-3 bg-gray-50 border-t border-gray-200 text-xs text-gray-500\">\n        Showing preview of first 10 rows out of {data.length} total rows\n      </div>\n    </div>\n  );\n};\n\nexport default DataPreviewTable; ","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Download, Upload, X, AlertCircle, FileText } from 'lucide-react';\nimport { cn } from '../lib/utils';\nimport api from '../services/api';\nimport DataPreviewTable from './DataPreviewTable';\nimport { parseFile, autoMapColumns, validateData, transformData } from '../services/fileParsingService';\n\ntype DataUploadType = 'employee' | 'engagement';\n\ninterface DataUploadWindowProps {\n  show: boolean;\n  onClose: () => void;\n  onUploadSuccess?: () => void;\n  defaultTab?: DataUploadType;\n}\n\nexport function DataUploadWindow({ show, onClose, onUploadSuccess, defaultTab = 'employee' }: DataUploadWindowProps): React.ReactElement | null {\n  // Tab state\n  const [activeTab, setActiveTab] = useState<DataUploadType>(defaultTab);\n\n  const [file, setFile] = useState<File | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [dragActive, setDragActive] = useState(false);\n\n  // Data preview state\n  const [parsedData, setParsedData] = useState<any[]>([]);\n  const [showPreview, setShowPreview] = useState(false);\n  const [mappedColumns, setMappedColumns] = useState<Record<string, string>>({});\n  const [validationErrors, setValidationErrors] = useState<Record<string, string[]>>({});\n  const [isParsing, setIsParsing] = useState(false);\n  const [parseProgress, setParseProgress] = useState(0);\n\n  useEffect(() => {\n    if (!show) {\n      // Reset state when closing the window\n      setFile(null);\n      setError(null);\n      setParsedData([]);\n      setShowPreview(false);\n      setMappedColumns({});\n      setValidationErrors({});\n      setActiveTab(defaultTab);\n    }\n  }, [show, defaultTab]);\n\n  // Reset form when switching tabs\n  useEffect(() => {\n    setFile(null);\n    setError(null);\n    setParsedData([]);\n    setShowPreview(false);\n    setMappedColumns({});\n    setValidationErrors({});\n  }, [activeTab]);\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFile(e.dataTransfer.files[0]);\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      handleFile(e.target.files[0]);\n    }\n  };\n\n  const handleFile = async (file: File) => {\n    const validTypes = [\n      'text/csv',\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'application/vnd.ms-excel'\n    ];\n\n    // Also check file extension for cases where MIME type is not correctly set\n    const validExtensions = ['.csv', '.xlsx', '.xls'];\n    const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n    if (!validTypes.includes(file.type) && !validExtensions.includes(fileExtension)) {\n      setError('Please upload a CSV or Excel file');\n      return;\n    }\n\n    setFile(file);\n    setError(null);\n\n    // Parse the file\n    try {\n      setIsParsing(true);\n      setParseProgress(10);\n\n      const result = await parseFile(file);\n\n      setParseProgress(50);\n\n      if (result.error) {\n        setError(result.error);\n        setIsParsing(false);\n        return;\n      }\n\n      if (result.data.length === 0) {\n        setError('The file contains no data');\n        setIsParsing(false);\n        return;\n      }\n\n      setParsedData(result.data);\n\n      // Auto-map columns\n      setParseProgress(70);\n      const autoMapped = autoMapColumns(result.columns);\n      setMappedColumns(autoMapped);\n\n      // Validate data\n      setParseProgress(90);\n      const validation = validateData(result.data, autoMapped);\n      setValidationErrors(validation.errors);\n\n      setParseProgress(100);\n      setIsParsing(false);\n\n      // Show preview\n      setShowPreview(true);\n    } catch (error) {\n      console.error('Error parsing file:', error);\n      setError(`Error parsing file: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      setIsParsing(false);\n    }\n  };\n\n  const handleUpdateMapping = (originalColumn: string, mappedColumn: string) => {\n    const newMappings = { ...mappedColumns };\n\n    if (mappedColumn) {\n      newMappings[originalColumn] = mappedColumn;\n    } else {\n      delete newMappings[originalColumn];\n    }\n\n    setMappedColumns(newMappings);\n\n    // Re-validate with new mappings\n    const validation = validateData(parsedData, newMappings);\n    setValidationErrors(validation.errors);\n  };\n\n  const handleClosePreview = () => {\n    setShowPreview(false);\n  };\n\n  const handleConfirmUpload = async () => {\n    if (!file) {\n      setError('Please select a file to upload');\n      return;\n    }\n\n    // Different validation for different data types\n    if (activeTab === 'employee') {\n      const hasStatusColumn = Object.values(mappedColumns).some(\n        mappedCol => mappedCol.toLowerCase() === 'status'\n      );\n      if (!hasStatusColumn) {\n        setError('Status column is required. Please map a column to \"status\".');\n        return;\n      }\n    } else if (activeTab === 'engagement') {\n      const hasEmployeeIdColumn = Object.values(mappedColumns).some(\n        mappedCol => mappedCol.toLowerCase().includes('employee') || mappedCol.toLowerCase().includes('id')\n      );\n      if (!hasEmployeeIdColumn) {\n        setError('Employee ID column is required for engagement surveys.');\n        return;\n      }\n    }\n\n    setUploading(true);\n    setError(null);\n\n    try {\n      const transformedData = transformData(parsedData, mappedColumns);\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const dataStr = JSON.stringify(transformedData);\n      if (dataStr.length > 10 * 1024 * 1024) {\n        const chunkSize = 1000;\n        const chunks = [];\n        for (let i = 0; i < transformedData.length; i += chunkSize) {\n          chunks.push(transformedData.slice(i, i + chunkSize));\n        }\n        formData.append('mappedData', JSON.stringify(chunks[0]));\n        formData.append('totalChunks', String(chunks.length));\n        formData.append('currentChunk', '0');\n      } else {\n        formData.append('mappedData', dataStr);\n      }\n\n      // Use different endpoints based on data type\n      const uploadEndpoint = activeTab === 'engagement'\n        ? '/api/data/upload/engagement'\n        : '/api/data/upload/confirm';\n\n      // Add data type to form data\n      formData.append('dataType', activeTab);\n\n      const response = await api.post(uploadEndpoint, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' },\n        // ... onUploadProgress, timeout ...\n      });\n\n      if (response.data.error) { throw new Error(response.data.error); }\n\n      if (dataStr.length > 10 * 1024 * 1024) {\n        const chunks = [];\n        const chunkSize = 1000;\n        for (let i = 0; i < transformedData.length; i += chunkSize) {\n          chunks.push(transformedData.slice(i, i + chunkSize));\n        }\n        for (let i = 1; i < chunks.length; i++) {\n          const chunkFormData = new FormData();\n          chunkFormData.append('mappedData', JSON.stringify(chunks[i]));\n          chunkFormData.append('totalChunks', String(chunks.length));\n          chunkFormData.append('currentChunk', String(i));\n          chunkFormData.append('uploadId', response.data.uploadId);\n\n          console.log(`Uploading chunk ${i + 1} of ${chunks.length}`);\n          const chunkResponse = await api.post('/api/data/upload-chunk', chunkFormData, { /* ... headers, timeout ... */ });\n          if (chunkResponse.data.error) { throw new Error(chunkResponse.data.error); }\n        }\n      }\n\n      // Clear caches\n      try {\n        console.log('Clearing all caches...');\n        sessionStorage.clear();\n        // ... localStorage clearing ...\n      } catch (e) { console.error('Error clearing cache:', e); }\n\n      setUploading(false);\n      setFile(null);\n      setShowPreview(false);\n      setParsedData([]);\n      setMappedColumns({});\n      if (onUploadSuccess) { onUploadSuccess(); }\n      onClose();\n\n    } catch (error) {\n      console.error('Upload error:', error);\n      setUploading(false);\n\n      // Improved error message handling\n      let errorMessage = 'An unknown error occurred during upload';\n      if (error instanceof Error) {\n        errorMessage = error.message;\n        // Check for the specific backend validation error\n        if (errorMessage.startsWith('Validation Failed: Missing MANDATORY columns')) {\n          errorMessage += ' Please ensure the required column names match exactly (case-insensitive) and do not contain extra spaces. Required columns are typically: hr_code, full_name, structure_name, position, status, tenure, employee_cost.';\n        } else if (error.message.includes('Failed to fetch') || error.message.includes('timeout')) {\n          errorMessage = `Network Error: ${error.message}. Please check your connection and try again.`;\n        } else if (error.message.includes('file type')) {\n          // Use a user-friendly message for file type errors\n          errorMessage = 'Invalid file type. Please upload a CSV or Excel file (.csv, .xlsx, .xls).';\n        }\n      }\n      setError(errorMessage);\n    }\n  };\n\n  const handleDownloadTemplate = () => {\n    window.open('/api/data/download-template', '_blank', 'noopener,noreferrer');\n  };\n\n  if (!show) return null;\n\n  // Show data preview if available\n  if (showPreview && parsedData.length > 0) {\n    return (\n      <AnimatePresence>\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n        >\n          <DataPreviewTable\n            data={parsedData}\n            mappedColumns={mappedColumns}\n            validationErrors={validationErrors}\n            onClose={handleClosePreview}\n            onConfirm={handleConfirmUpload}\n            onUpdateMapping={handleUpdateMapping}\n          />\n        </motion.div>\n      </AnimatePresence>\n    );\n  }\n\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            className=\"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-lg w-full p-6\"\n          >\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">Upload Data</h2>\n              <button\n                onClick={onClose}\n                className=\"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400 transition-colors\"\n              >\n                <X size={24} />\n              </button>\n            </div>\n\n            {/* Tab Navigation */}\n            <div className=\"flex border-b border-gray-200 dark:border-gray-700 mb-6\">\n              <button\n                onClick={() => setActiveTab('employee')}\n                className={cn(\n                  'relative py-2 px-4 text-sm font-medium transition-colors duration-200 focus:outline-none',\n                  activeTab === 'employee'\n                    ? 'text-blue-600 dark:text-blue-400'\n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                )}\n              >\n                Employee Data\n                {activeTab === 'employee' && (\n                  <motion.div\n                    className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400\"\n                    layoutId=\"uploadTabIndicator\"\n                    initial={false}\n                    transition={{\n                      type: \"spring\",\n                      stiffness: 500,\n                      damping: 30\n                    }}\n                  />\n                )}\n              </button>\n\n              <button\n                onClick={() => setActiveTab('engagement')}\n                className={cn(\n                  'relative py-2 px-4 text-sm font-medium transition-colors duration-200 focus:outline-none',\n                  activeTab === 'engagement'\n                    ? 'text-blue-600 dark:text-blue-400'\n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                )}\n              >\n                Engagement Surveys\n                {activeTab === 'engagement' && (\n                  <motion.div\n                    className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400\"\n                    layoutId=\"uploadTabIndicator\"\n                    initial={false}\n                    transition={{\n                      type: \"spring\",\n                      stiffness: 500,\n                      damping: 30\n                    }}\n                  />\n                )}\n              </button>\n            </div>\n\n            <div className=\"space-y-6\">\n              {/* Instructions */}\n              <div className=\"bg-app-green-light dark:bg-app-green-darkmode-light border border-app-green/20 dark:border-app-green-darkmode/30 rounded-lg p-4\">\n                <h3 className=\"text-sm font-medium text-app-green dark:text-app-green-darkmode mb-2\">Instructions</h3>\n                {activeTab === 'employee' ? (\n                  <ul className=\"text-sm text-app-green dark:text-app-green-darkmode space-y-1\">\n                    <li>Upload your employee data in CSV or Excel format</li>\n                    <li>File must contain a <strong>Status</strong> column</li>\n                    <li>You'll be able to map columns before final upload</li>\n                    <li>Maximum file size: 10MB</li>\n                  </ul>\n                ) : (\n                  <ul className=\"text-sm text-app-green dark:text-app-green-darkmode space-y-1\">\n                    <li>Upload engagement survey data in CSV or Excel format</li>\n                    <li>Include columns like: employee_id, survey_date, satisfaction_score</li>\n                    <li>Optional columns: work_life_balance, career_development, management_rating</li>\n                    <li>Data will be used for Deep Analysis correlations</li>\n                    <li>Maximum file size: 10MB</li>\n                  </ul>\n                )}\n              </div>\n\n              {/* File Upload Area */}\n              <div\n                onDragEnter={handleDrag}\n                onDragLeave={handleDrag}\n                onDragOver={handleDrag}\n                onDrop={handleDrop}\n                className={cn(\n                  \"border-2 border-dashed rounded-lg p-8 text-center transition-colors\",\n                  dragActive\n                    ? \"border-app-green bg-app-green-light dark:bg-app-green-darkmode-light\"\n                    : \"border-gray-300 dark:border-gray-600 hover:border-app-green dark:hover:border-app-green-darkmode\"\n                )}\n              >\n                <input\n                  type=\"file\"\n                  onChange={handleFileChange}\n                  accept=\".csv,.xlsx,.xls\"\n                  className=\"hidden\"\n                  id=\"file-upload\"\n                  disabled={isParsing || uploading}\n                />\n                <label\n                  htmlFor=\"file-upload\"\n                  className={cn(\n                    \"cursor-pointer flex flex-col items-center\",\n                    (isParsing || uploading) && \"opacity-50 pointer-events-none\"\n                  )}\n                >\n                  {isParsing ? (\n                    <div className=\"flex flex-col items-center\">\n                      <div className=\"w-10 h-10 border-4 border-app-green dark:border-app-green-darkmode border-t-transparent rounded-full animate-spin mb-4\"></div>\n                      <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        Parsing file... {parseProgress}%\n                      </p>\n                    </div>\n                  ) : file ? (\n                    <div className=\"flex flex-col items-center\">\n                      <FileText\n                        size={32}\n                        className=\"mb-4 text-app-green dark:text-app-green-darkmode\"\n                      />\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{file.name}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          {(file.size / 1024 / 1024).toFixed(2)} MB\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => setFile(null)}\n                          className=\"text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 mt-2\"\n                        >\n                          Remove\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"flex flex-col items-center\">\n                      <Upload\n                        size={32}\n                        className=\"mb-4 text-gray-400 dark:text-gray-500\"\n                      />\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                          Drag and drop your file here or click to browse\n                        </p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          Supports CSV and Excel files\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </label>\n              </div>\n\n              {/* Error Message */}\n              {error && (\n                <div className=\"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm\">\n                  <AlertCircle size={16} />\n                  <p>{error}</p>\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex items-center justify-between pt-4\">\n                <button\n                  onClick={handleDownloadTemplate}\n                  className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100\"\n                >\n                  <Download size={16} className=\"mr-2\" />\n                  Download Template\n                </button>\n                <div className=\"space-x-3\">\n                  <button\n                    onClick={onClose}\n                    className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100\"\n                    disabled={uploading || isParsing}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={() => file && setShowPreview(true)}\n                    disabled={!file || uploading || isParsing}\n                    className={cn(\n                      \"px-4 py-2 text-sm font-medium text-white rounded-lg transition-all\",\n                      !file || uploading || isParsing\n                        ? \"bg-gray-400 dark:bg-gray-600 cursor-not-allowed\"\n                        : \"bg-app-green hover:bg-app-green-hover dark:bg-app-green-darkmode dark:hover:bg-app-green-darkmode-hover\"\n                    )}\n                  >\n                    {isParsing ? \"Parsing...\" : \"Preview Data\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n} ","import React, { useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Info } from 'lucide-react';\n\ninterface DataUploadNotificationProps {\n  show: boolean;\n  message: string;\n  onClose: () => void;\n}\n\nexport const DataUploadNotification: React.FC<DataUploadNotificationProps> = ({\n  show,\n  message,\n  onClose\n}) => {\n  useEffect(() => {\n    if (show) {\n      // Auto-dismiss after 30 seconds\n      const timer = setTimeout(() => {\n        onClose();\n      }, 30000);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [show, onClose]);\n\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 0, y: -20, scale: 0.95 }}\n          animate={{ opacity: 1, y: 0, scale: 1 }}\n          exit={{ opacity: 0, y: -20, scale: 0.95 }}\n          transition={{ duration: 0.3, ease: 'easeOut' }}\n          className=\"fixed top-5 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4\"\n        >\n          <div className=\"bg-blue-500 text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3\">\n            <Info className=\"w-5 h-5 flex-shrink-0\" />\n            <span className=\"flex-1 text-sm font-medium\">{message}</span>\n            <button\n              onClick={onClose}\n              className=\"p-1 hover:bg-blue-600 rounded-full transition-colors\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};","// Removed motion import to reduce memory usage\nimport { Loader2 } from 'lucide-react';\n\ninterface LoadingSpinnerProps {\n  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';\n  variant?: 'spinner' | 'dots' | 'pulse' | 'bars';\n  text?: string;\n  className?: string;\n  color?: 'primary' | 'secondary' | 'white' | 'gray';\n}\n\nconst sizeClasses = {\n  xs: 'w-3 h-3',\n  sm: 'w-4 h-4', \n  md: 'w-5 h-5',\n  lg: 'w-6 h-6',\n  xl: 'w-8 h-8'\n};\n\nconst colorClasses = {\n  primary: 'text-app-green',\n  secondary: 'text-blue-500',\n  white: 'text-white',\n  gray: 'text-gray-400'\n};\n\nconst SpinnerVariant = ({ size, color, className }: { size: string; color: string; className?: string }) => (\n  <Loader2 className={`${size} ${color} animate-spin ${className || ''}`} />\n);\n\nconst DotsVariant = ({ size, color }: { size: string; color: string }) => {\n  const dotSize = size.includes('w-3') ? 'w-1 h-1' : size.includes('w-4') ? 'w-1.5 h-1.5' : 'w-2 h-2';\n  \n  return (\n    <div className=\"flex space-x-1\">\n      {[0, 1, 2].map((i) => (\n        <div\n          key={i}\n          className={`${dotSize} ${color.replace('text-', 'bg-')} rounded-full animate-pulse`}\n          style={{ animationDelay: `${i * 0.1}s` }}\n        />\n      ))}\n    </div>\n  );\n};\n\nconst PulseVariant = ({ size, color }: { size: string; color: string }) => (\n  <div className={`${size} ${color.replace('text-', 'bg-')} rounded-full animate-pulse`} />\n);\n\nconst BarsVariant = ({ size, color }: { size: string; color: string }) => {\n  const barHeight = size.includes('w-3') ? 'h-3' : size.includes('w-4') ? 'h-4' : 'h-5';\n  \n  return (\n    <div className=\"flex space-x-1 items-end\">\n      {[0, 1, 2, 3].map((i) => (\n        <div\n          key={i}\n          className={`w-1 ${barHeight} ${color.replace('text-', 'bg-')} rounded-sm animate-pulse`}\n          style={{ animationDelay: `${i * 0.1}s` }}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport function LoadingSpinner({ \n  size = 'md', \n  variant = 'spinner', \n  text, \n  className = '',\n  color = 'primary'\n}: LoadingSpinnerProps) {\n  const sizeClass = sizeClasses[size];\n  const colorClass = colorClasses[color];\n\n  const renderVariant = () => {\n    switch (variant) {\n      case 'dots':\n        return <DotsVariant size={sizeClass} color={colorClass} />;\n      case 'pulse':\n        return <PulseVariant size={sizeClass} color={colorClass} />;\n      case 'bars':\n        return <BarsVariant size={sizeClass} color={colorClass} />;\n      default:\n        return <SpinnerVariant size={sizeClass} color={colorClass} className={className} />;\n    }\n  };\n\n  if (text) {\n    return (\n      <div className=\"flex items-center gap-2\">\n        {renderVariant()}\n        <span className={`text-sm ${colorClass}`}>{text}</span>\n      </div>\n    );\n  }\n\n  return renderVariant();\n}\n\n// Preset loading states for common use cases\nexport const LoadingStates = {\n  // For buttons\n  ButtonLoading: ({ text = 'Loading...' }: { text?: string }) => (\n    <LoadingSpinner size=\"sm\" text={text} color=\"white\" />\n  ),\n  \n  // For page loading\n  PageLoading: ({ text = 'Loading...' }: { text?: string }) => (\n    <div className=\"flex flex-col items-center justify-center min-h-[200px] space-y-3\">\n      <LoadingSpinner size=\"lg\" variant=\"spinner\" color=\"primary\" />\n      <p className=\"text-gray-600 dark:text-gray-400\">{text}</p>\n    </div>\n  ),\n  \n  // For inline content\n  InlineLoading: ({ text }: { text?: string }) => (\n    <LoadingSpinner size=\"sm\" text={text} color=\"gray\" />\n  ),\n  \n  // For cards/components\n  CardLoading: ({ text = 'Loading...' }: { text?: string }) => (\n    <div className=\"flex items-center justify-center p-8\">\n      <LoadingSpinner size=\"md\" text={text} color=\"primary\" />\n    </div>\n  ),\n  \n  // For data tables\n  TableLoading: () => (\n    <div className=\"flex items-center justify-center py-8\">\n      <LoadingSpinner size=\"md\" variant=\"dots\" color=\"primary\" />\n    </div>\n  ),\n  \n  // For overlays\n  OverlayLoading: ({ text = 'Processing...' }: { text?: string }) => (\n    <div className=\"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl\">\n        <div className=\"flex flex-col items-center space-y-3\">\n          <LoadingSpinner size=\"lg\" color=\"primary\" />\n          <p className=\"text-gray-700 dark:text-gray-300 font-medium\">{text}</p>\n        </div>\n      </div>\n    </div>\n  )\n}; ","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Brain, \n  TrendingUp, \n  TrendingDown, \n  AlertTriangle, \n  CheckCircle, \n  Info,\n  BarChart3,\n  PieChart,\n  Activity,\n  Users,\n  Calendar,\n  Download,\n  ChevronDown,\n  ChevronUp,\n  Eye,\n  Target\n} from 'lucide-react';\nimport { cn } from '../lib/utils';\nimport { \n  AnalysisResult, \n  Insight, \n  Recommendation, \n  Visualization\n} from '../types/analysis';\n\ninterface AnalysisResultVisualizationProps {\n  result: AnalysisResult;\n  onExport?: (format: 'pdf' | 'excel' | 'csv') => void;\n  onDrillDown?: (insightId: string) => void;\n}\n\nexport const AnalysisResultVisualization: React.FC<AnalysisResultVisualizationProps> = ({\n  result,\n  onExport,\n  onDrillDown\n}) => {\n  const [expandedSections, setExpandedSections] = useState<Set<string>>(new Set(['summary']));\n  const [selectedVisualization, setSelectedVisualization] = useState<string | null>(null);\n\n  const toggleSection = (section: string) => {\n    const newExpanded = new Set(expandedSections);\n    if (newExpanded.has(section)) {\n      newExpanded.delete(section);\n    } else {\n      newExpanded.add(section);\n    }\n    setExpandedSections(newExpanded);\n  };\n\n  const getAnalysisIcon = (type: string) => {\n    switch (type) {\n      case 'churn-patterns':\n        return <Brain className=\"w-5 h-5\" />;\n      case 'engagement-correlation':\n        return <Activity className=\"w-5 h-5\" />;\n      case 'cross-source':\n        return <BarChart3 className=\"w-5 h-5\" />;\n      case 'organizational-insights':\n        return <Users className=\"w-5 h-5\" />;\n      default:\n        return <Info className=\"w-5 h-5\" />;\n    }\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 0.8) return 'text-green-600 dark:text-green-400';\n    if (confidence >= 0.6) return 'text-blue-600 dark:text-blue-400';\n    if (confidence >= 0.4) return 'text-yellow-600 dark:text-yellow-400';\n    return 'text-red-600 dark:text-red-400';\n  };\n\n  const getConfidenceBg = (confidence: number) => {\n    if (confidence >= 0.8) return 'bg-green-100 dark:bg-green-900/30';\n    if (confidence >= 0.6) return 'bg-blue-100 dark:bg-blue-900/30';\n    if (confidence >= 0.4) return 'bg-yellow-100 dark:bg-yellow-900/30';\n    return 'bg-red-100 dark:bg-red-900/30';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Analysis Header */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\n              {getAnalysisIcon(result.type)}\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">\n                {result.title}\n              </h2>\n              <div className=\"flex items-center space-x-4 mt-1\">\n                <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  {result.timestamp.toLocaleString()}\n                </span>\n                <div className={cn(\n                  'px-2 py-1 rounded-full text-xs font-medium',\n                  getConfidenceBg(result.confidence),\n                  getConfidenceColor(result.confidence)\n                )}>\n                  {Math.round(result.confidence * 100)}% Confidence\n                </div>\n                <span className=\"text-xs text-gray-400 dark:text-gray-500\">\n                  {result.executionTime}ms\n                </span>\n              </div>\n            </div>\n          </div>\n          \n          {onExport && (\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={() => onExport('pdf')}\n                className=\"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center space-x-1\"\n              >\n                <Download className=\"w-3 h-3\" />\n                <span>PDF</span>\n              </button>\n              <button\n                onClick={() => onExport('excel')}\n                className=\"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center space-x-1\"\n              >\n                <Download className=\"w-3 h-3\" />\n                <span>Excel</span>\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Data Sources */}\n        {result.dataSources && result.dataSources.length > 0 && (\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            {result.dataSources.map((source, index) => (\n              <span\n                key={index}\n                className=\"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs rounded-md border border-blue-200 dark:border-blue-800\"\n              >\n                {source.name}\n              </span>\n            ))}\n          </div>\n        )}\n\n        {/* Summary */}\n        <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\n          <p className=\"text-gray-700 dark:text-gray-300 leading-relaxed\">\n            {result.summary}\n          </p>\n        </div>\n      </div>\n\n      {/* Key Insights */}\n      <CollapsibleSection\n        title=\"Key Insights\"\n        icon={<Eye className=\"w-4 h-4\" />}\n        isExpanded={expandedSections.has('insights')}\n        onToggle={() => toggleSection('insights')}\n        count={result.insights.length}\n      >\n        <div className=\"grid gap-4\">\n          {result.insights.map((insight) => (\n            <InsightCard\n              key={insight.id}\n              insight={insight}\n              onDrillDown={onDrillDown}\n            />\n          ))}\n        </div>\n      </CollapsibleSection>\n\n      {/* Visualizations */}\n      {result.visualizations && result.visualizations.length > 0 && (\n        <CollapsibleSection\n          title=\"Visualizations\"\n          icon={<BarChart3 className=\"w-4 h-4\" />}\n          isExpanded={expandedSections.has('visualizations')}\n          onToggle={() => toggleSection('visualizations')}\n          count={result.visualizations.length}\n        >\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {result.visualizations.map((viz) => (\n              <VisualizationCard\n                key={viz.id}\n                visualization={viz}\n                isSelected={selectedVisualization === viz.id}\n                onSelect={() => setSelectedVisualization(viz.id)}\n              />\n            ))}\n          </div>\n        </CollapsibleSection>\n      )}\n\n      {/* Recommendations */}\n      {result.recommendations && result.recommendations.length > 0 && (\n        <CollapsibleSection\n          title=\"Recommendations\"\n          icon={<Target className=\"w-4 h-4\" />}\n          isExpanded={expandedSections.has('recommendations')}\n          onToggle={() => toggleSection('recommendations')}\n          count={result.recommendations.length}\n        >\n          <div className=\"space-y-4\">\n            {result.recommendations.map((recommendation) => (\n              <RecommendationCard\n                key={recommendation.id}\n                recommendation={recommendation}\n              />\n            ))}\n          </div>\n        </CollapsibleSection>\n      )}\n\n      {/* Analysis Parameters */}\n      {result.parameters && (\n        <CollapsibleSection\n          title=\"Analysis Parameters\"\n          icon={<Info className=\"w-4 h-4\" />}\n          isExpanded={expandedSections.has('parameters')}\n          onToggle={() => toggleSection('parameters')}\n        >\n          <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\n            <dl className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {Object.entries(result.parameters).map(([key, value]) => {\n                const formatValue = (val: any): string => {\n                  if (Array.isArray(val)) {\n                    return val.map(item => {\n                      if (typeof item === 'object' && item !== null) {\n                        return Object.entries(item)\n                          .map(([k, v]) => `${k}: ${v}`)\n                          .join(', ');\n                      }\n                      return String(item);\n                    }).join(' | ');\n                  } else if (typeof val === 'object' && val !== null) {\n                    return Object.entries(val)\n                      .map(([k, v]) => `${k}: ${v}`)\n                      .join(', ');\n                  }\n                  return String(val);\n                };\n\n                return (\n                  <div key={key}>\n                    <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400 capitalize\">\n                      {key.replace(/([A-Z])/g, ' $1').trim()}\n                    </dt>\n                    <dd className=\"text-sm text-gray-900 dark:text-gray-100 mt-1 break-words\">\n                      {formatValue(value)}\n                    </dd>\n                  </div>\n                );\n              })}\n            </dl>\n          </div>\n        </CollapsibleSection>\n      )}\n    </div>\n  );\n};\n\n// Collapsible Section Component\ninterface CollapsibleSectionProps {\n  title: string;\n  icon: React.ReactNode;\n  isExpanded: boolean;\n  onToggle: () => void;\n  count?: number;\n  children: React.ReactNode;\n}\n\nconst CollapsibleSection: React.FC<CollapsibleSectionProps> = ({\n  title,\n  icon,\n  isExpanded,\n  onToggle,\n  count,\n  children\n}) => {\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n      <button\n        onClick={onToggle}\n        className=\"w-full px-6 py-4 flex items-center justify-between text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n      >\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"text-gray-500 dark:text-gray-400\">\n            {icon}\n          </div>\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n            {title}\n          </h3>\n          {count !== undefined && (\n            <span className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded-full\">\n              {count}\n            </span>\n          )}\n        </div>\n        {isExpanded ? (\n          <ChevronUp className=\"w-5 h-5 text-gray-400\" />\n        ) : (\n          <ChevronDown className=\"w-5 h-5 text-gray-400\" />\n        )}\n      </button>\n      \n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"px-6 pb-6\">\n              {children}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\n// Insight Card Component\ninterface InsightCardProps {\n  insight: Insight;\n  onDrillDown?: (insightId: string) => void;\n}\n\nconst InsightCard: React.FC<InsightCardProps> = ({ insight, onDrillDown }) => {\n  const getSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case 'high':\n        return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\n      case 'medium':\n        return <Info className=\"w-4 h-4 text-yellow-500\" />;\n      case 'low':\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      default:\n        return <Info className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  const getSeverityBg = (severity: string) => {\n    switch (severity) {\n      case 'high':\n        return 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800';\n      case 'medium':\n        return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800';\n      case 'low':\n        return 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800';\n      default:\n        return 'bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600';\n    }\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 0.8) return 'text-green-600 dark:text-green-400';\n    if (confidence >= 0.6) return 'text-blue-600 dark:text-blue-400';\n    if (confidence >= 0.4) return 'text-yellow-600 dark:text-yellow-400';\n    return 'text-red-600 dark:text-red-400';\n  };\n\n  const getConfidenceBg = (confidence: number) => {\n    if (confidence >= 0.8) return 'bg-green-100 dark:bg-green-900/30';\n    if (confidence >= 0.6) return 'bg-blue-100 dark:bg-blue-900/30';\n    if (confidence >= 0.4) return 'bg-yellow-100 dark:bg-yellow-900/30';\n    return 'bg-red-100 dark:bg-red-900/30';\n  };\n\n  return (\n    <div className={cn(\n      'p-4 rounded-lg border',\n      getSeverityBg(insight.severity || 'low')\n    )}>\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-center space-x-2\">\n          {getSeverityIcon(insight.severity || 'low')}\n          <h4 className=\"font-medium text-gray-900 dark:text-gray-100\">\n            {insight.title}\n          </h4>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          {insight.confidence && (\n            <div className={cn(\n              'px-2 py-1 rounded-full text-xs font-medium',\n              getConfidenceBg(insight.confidence),\n              getConfidenceColor(insight.confidence)\n            )}>\n              {Math.round(insight.confidence * 100)}%\n            </div>\n          )}\n        </div>\n      </div>\n      \n      <p className=\"text-gray-700 dark:text-gray-300 text-sm mb-3\">\n        {insight.description}\n      </p>\n      \n      {(insight.affectedEmployees || insight.departments) && (\n        <div className=\"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 mb-3\">\n          {insight.affectedEmployees && (\n            <span className=\"flex items-center space-x-1\">\n              <Users className=\"w-3 h-3\" />\n              <span>{insight.affectedEmployees} employees</span>\n            </span>\n          )}\n          {insight.departments && insight.departments.length > 0 && (\n            <span>\n              Departments: {insight.departments.join(', ')}\n            </span>\n          )}\n        </div>\n      )}\n      \n      {onDrillDown && (\n        <button\n          onClick={() => onDrillDown(insight.id)}\n          className=\"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium\"\n        >\n          View Details \n        </button>\n      )}\n    </div>\n  );\n};\n\n// Visualization Card Component\ninterface VisualizationCardProps {\n  visualization: Visualization;\n  isSelected: boolean;\n  onSelect: () => void;\n}\n\nconst VisualizationCard: React.FC<VisualizationCardProps> = ({\n  visualization,\n  isSelected,\n  onSelect\n}) => {\n  const getVisualizationIcon = (type: string) => {\n    switch (type) {\n      case 'chart':\n        return <BarChart3 className=\"w-5 h-5\" />;\n      case 'graph':\n        return <Activity className=\"w-5 h-5\" />;\n      case 'heatmap':\n        return <PieChart className=\"w-5 h-5\" />;\n      case 'pie-chart':\n        return <PieChart className=\"w-5 h-5\" />;\n      case 'bar-chart':\n        return <BarChart3 className=\"w-5 h-5\" />;\n      default:\n        return <BarChart3 className=\"w-5 h-5\" />;\n    }\n  };\n\n  return (\n    <div\n      className={cn(\n        'p-4 rounded-lg border-2 cursor-pointer transition-all',\n        isSelected\n          ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n          : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n      )}\n      onClick={onSelect}\n    >\n      <div className=\"flex items-center space-x-3 mb-3\">\n        <div className=\"text-gray-500 dark:text-gray-400\">\n          {getVisualizationIcon(visualization.type)}\n        </div>\n        <h4 className=\"font-medium text-gray-900 dark:text-gray-100\">\n          {visualization.title}\n        </h4>\n      </div>\n      \n      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n        {visualization.type.charAt(0).toUpperCase() + visualization.type.slice(1)} visualization\n      </p>\n      \n      {/* Render actual chart component if available */}\n      <div className=\"h-80 bg-white dark:bg-gray-800 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600\">\n        {visualization.component ? (\n          <div className=\"w-full h-full p-2\">\n            <visualization.component />\n          </div>\n        ) : (\n          <div className=\"h-full bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center\">\n            <span className=\"text-gray-500 dark:text-gray-400 text-sm\">\n              {visualization.type.charAt(0).toUpperCase() + visualization.type.slice(1)} Visualization\n            </span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Recommendation Card Component\ninterface RecommendationCardProps {\n  recommendation: Recommendation;\n}\n\nconst RecommendationCard: React.FC<RecommendationCardProps> = ({ recommendation }) => {\n  const getPriorityIcon = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return <TrendingUp className=\"w-4 h-4 text-red-500\" />;\n      case 'medium':\n        return <TrendingUp className=\"w-4 h-4 text-yellow-500\" />;\n      case 'low':\n        return <TrendingDown className=\"w-4 h-4 text-green-500\" />;\n      default:\n        return <Info className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  const getPriorityBg = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800';\n      case 'medium':\n        return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800';\n      case 'low':\n        return 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800';\n      default:\n        return 'bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600';\n    }\n  };\n\n  return (\n    <div className={cn(\n      'p-4 rounded-lg border',\n      getPriorityBg(recommendation.priority || 'low')\n    )}>\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-center space-x-2\">\n          {getPriorityIcon(recommendation.priority || 'low')}\n          <h4 className=\"font-medium text-gray-900 dark:text-gray-100\">\n            {recommendation.title}\n          </h4>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          {recommendation.priority && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400 capitalize\">\n              {recommendation.priority} Priority\n            </span>\n          )}\n        </div>\n      </div>\n      \n      <p className=\"text-gray-700 dark:text-gray-300 text-sm mb-3\">\n        {recommendation.description}\n      </p>\n      \n      {recommendation.actionItems && recommendation.actionItems.length > 0 && (\n        <div className=\"mb-3\">\n          <h5 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n            Action Items:\n          </h5>\n          <ul className=\"space-y-1\">\n            {recommendation.actionItems.map((item, index) => (\n              <li key={index} className=\"text-sm text-gray-600 dark:text-gray-400 flex items-start\">\n                <span className=\"w-1.5 h-1.5 bg-gray-400 rounded-full mt-2 mr-2 flex-shrink-0\"></span>\n                {item}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      \n      <div className=\"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\n        <span className=\"flex items-center space-x-1\">\n          <Calendar className=\"w-3 h-3\" />\n          <span>{recommendation.estimatedTimeframe}</span>\n        </span>\n        <span>Impact: {recommendation.estimatedImpact}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default AnalysisResultVisualization;","import { Component, createElement } from 'react';\n\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n * 5) Use 'export' statement over 'module.exports' assignment\n **/\n\n// Check `document` and `window` in case of server-side rendering\nlet windowObject;\nif (typeof window !== \"undefined\") {\n  windowObject = window;\n\n  // eslint-disable-next-line no-restricted-globals\n} else if (typeof self !== \"undefined\") {\n  // eslint-disable-next-line no-restricted-globals\n  windowObject = self;\n} else {\n  windowObject = global;\n}\nlet cancelFrame = null;\nlet requestFrame = null;\nconst TIMEOUT_DURATION = 20;\nconst clearTimeoutFn = windowObject.clearTimeout;\nconst setTimeoutFn = windowObject.setTimeout;\nconst cancelAnimationFrameFn = windowObject.cancelAnimationFrame || windowObject.mozCancelAnimationFrame || windowObject.webkitCancelAnimationFrame;\nconst requestAnimationFrameFn = windowObject.requestAnimationFrame || windowObject.mozRequestAnimationFrame || windowObject.webkitRequestAnimationFrame;\nif (cancelAnimationFrameFn == null || requestAnimationFrameFn == null) {\n  // For environments that don't support animation frame,\n  // fallback to a setTimeout based approach.\n  cancelFrame = clearTimeoutFn;\n  requestFrame = function requestAnimationFrameViaSetTimeout(callback) {\n    return setTimeoutFn(callback, TIMEOUT_DURATION);\n  };\n} else {\n  // Counter intuitively, environments that support animation frames can be trickier.\n  // Chrome's \"Throttle non-visible cross-origin iframes\" flag can prevent rAFs from being called.\n  // In this case, we should fallback to a setTimeout() implementation.\n  cancelFrame = function cancelFrame([animationFrameID, timeoutID]) {\n    cancelAnimationFrameFn(animationFrameID);\n    clearTimeoutFn(timeoutID);\n  };\n  requestFrame = function requestAnimationFrameWithSetTimeoutFallback(callback) {\n    const animationFrameID = requestAnimationFrameFn(function animationFrameCallback() {\n      clearTimeoutFn(timeoutID);\n      callback();\n    });\n    const timeoutID = setTimeoutFn(function timeoutCallback() {\n      cancelAnimationFrameFn(animationFrameID);\n      callback();\n    }, TIMEOUT_DURATION);\n    return [animationFrameID, timeoutID];\n  };\n}\nfunction createDetectElementResize(nonce) {\n  let animationKeyframes;\n  let animationName;\n  let animationStartEvent;\n  let animationStyle;\n  let checkTriggers;\n  let resetTriggers;\n  let scrollListener;\n  const attachEvent = typeof document !== \"undefined\" && document.attachEvent;\n  if (!attachEvent) {\n    resetTriggers = function (element) {\n      const triggers = element.__resizeTriggers__,\n        expand = triggers.firstElementChild,\n        contract = triggers.lastElementChild,\n        expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + \"px\";\n      expandChild.style.height = expand.offsetHeight + 1 + \"px\";\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n    checkTriggers = function (element) {\n      return element.offsetWidth !== element.__resizeLast__.width || element.offsetHeight !== element.__resizeLast__.height;\n    };\n    scrollListener = function (e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className && typeof e.target.className.indexOf === \"function\" && e.target.className.indexOf(\"contract-trigger\") < 0 && e.target.className.indexOf(\"expand-trigger\") < 0) {\n        return;\n      }\n      const element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function animationFrame() {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function forEachResizeListener(fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    let animation = false;\n    let keyframeprefix = \"\";\n    animationStartEvent = \"animationstart\";\n    const domPrefixes = \"Webkit Moz O ms\".split(\" \");\n    let startEvents = \"webkitAnimationStart animationstart oAnimationStart MSAnimationStart\".split(\" \");\n    let pfx = \"\";\n    {\n      const elm = document.createElement(\"fakeelement\");\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n      if (animation === false) {\n        for (let i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + \"AnimationName\"] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = \"-\" + pfx.toLowerCase() + \"-\";\n            animationStartEvent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n    animationName = \"resizeanim\";\n    animationKeyframes = \"@\" + keyframeprefix + \"keyframes \" + animationName + \" { from { opacity: 0; } to { opacity: 0; } } \";\n    animationStyle = keyframeprefix + \"animation: 1ms \" + animationName + \"; \";\n  }\n  const createStyles = function (doc) {\n    if (!doc.getElementById(\"detectElementResize\")) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      const css = (animationKeyframes ? animationKeyframes : \"\") + \".resize-triggers { \" + (animationStyle ? animationStyle : \"\") + \"visibility: hidden; opacity: 0; } \" + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n        head = doc.head || doc.getElementsByTagName(\"head\")[0],\n        style = doc.createElement(\"style\");\n      style.id = \"detectElementResize\";\n      style.type = \"text/css\";\n      if (nonce != null) {\n        style.setAttribute(\"nonce\", nonce);\n      }\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n      head.appendChild(style);\n    }\n  };\n  const addResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.attachEvent(\"onresize\", fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        const doc = element.ownerDocument;\n        const elementStyle = windowObject.getComputedStyle(element);\n        if (elementStyle && elementStyle.position === \"static\") {\n          element.style.position = \"relative\";\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement(\"div\")).className = \"resize-triggers\";\n        const expandTrigger = doc.createElement(\"div\");\n        expandTrigger.className = \"expand-trigger\";\n        expandTrigger.appendChild(doc.createElement(\"div\"));\n        const contractTrigger = doc.createElement(\"div\");\n        contractTrigger.className = \"contract-trigger\";\n        element.__resizeTriggers__.appendChild(expandTrigger);\n        element.__resizeTriggers__.appendChild(contractTrigger);\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener(\"scroll\", scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationStartEvent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName === animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n  const removeResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.detachEvent(\"onresize\", fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener(\"scroll\", scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n  return {\n    addResizeListener,\n    removeResizeListener\n  };\n}\n\nclass AutoSizer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      height: this.props.defaultHeight || 0,\n      width: this.props.defaultWidth || 0\n    };\n    this._autoSizer = null;\n    this._detectElementResize = null;\n    this._didLogDeprecationWarning = false;\n    this._parentNode = null;\n    this._resizeObserver = null;\n    this._timeoutId = null;\n    this._onResize = () => {\n      this._timeoutId = null;\n      const {\n        disableHeight,\n        disableWidth,\n        onResize\n      } = this.props;\n      if (this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        const style = window.getComputedStyle(this._parentNode) || {};\n        const paddingLeft = parseFloat(style.paddingLeft || \"0\");\n        const paddingRight = parseFloat(style.paddingRight || \"0\");\n        const paddingTop = parseFloat(style.paddingTop || \"0\");\n        const paddingBottom = parseFloat(style.paddingBottom || \"0\");\n        const rect = this._parentNode.getBoundingClientRect();\n        const height = rect.height - paddingTop - paddingBottom;\n        const width = rect.width - paddingLeft - paddingRight;\n        if (!disableHeight && this.state.height !== height || !disableWidth && this.state.width !== width) {\n          this.setState({\n            height,\n            width\n          });\n          const maybeLogDeprecationWarning = () => {\n            if (!this._didLogDeprecationWarning) {\n              this._didLogDeprecationWarning = true;\n              console.warn(\"scaledWidth and scaledHeight parameters have been deprecated; use width and height instead\");\n            }\n          };\n          if (typeof onResize === \"function\") {\n            onResize({\n              height,\n              width,\n              // TODO Remove these params in the next major release\n              get scaledHeight() {\n                maybeLogDeprecationWarning();\n                return height;\n              },\n              get scaledWidth() {\n                maybeLogDeprecationWarning();\n                return width;\n              }\n            });\n          }\n        }\n      }\n    };\n    this._setRef = autoSizer => {\n      this._autoSizer = autoSizer;\n    };\n  }\n  componentDidMount() {\n    const {\n      nonce\n    } = this.props;\n    const parentNode = this._autoSizer ? this._autoSizer.parentNode : null;\n    if (parentNode != null && parentNode.ownerDocument && parentNode.ownerDocument.defaultView && parentNode instanceof parentNode.ownerDocument.defaultView.HTMLElement) {\n      // Delay access of parentNode until mount.\n      // This handles edge-cases where the component has already been unmounted before its ref has been set,\n      // As well as libraries like react-lite which have a slightly different lifecycle.\n      this._parentNode = parentNode;\n\n      // Use ResizeObserver from the same context where parentNode (which we will observe) was defined\n      // Using just global can result into onResize events not being emitted in cases with multiple realms\n      const ResizeObserverInstance = parentNode.ownerDocument.defaultView.ResizeObserver;\n      if (ResizeObserverInstance != null) {\n        this._resizeObserver = new ResizeObserverInstance(() => {\n          // Guard against \"ResizeObserver loop limit exceeded\" error;\n          // could be triggered if the state update causes the ResizeObserver handler to run long.\n          // See https://github.com/bvaughn/react-virtualized-auto-sizer/issues/55\n          this._timeoutId = setTimeout(this._onResize, 0);\n        });\n        this._resizeObserver.observe(parentNode);\n      } else {\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = createDetectElementResize(nonce);\n        this._detectElementResize.addResizeListener(parentNode, this._onResize);\n      }\n      this._onResize();\n    }\n  }\n  componentWillUnmount() {\n    if (this._parentNode) {\n      if (this._detectElementResize) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n      if (this._timeoutId !== null) {\n        clearTimeout(this._timeoutId);\n      }\n      if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n      }\n    }\n  }\n  render() {\n    const {\n      children,\n      defaultHeight,\n      defaultWidth,\n      disableHeight = false,\n      disableWidth = false,\n      doNotBailOutOnEmptyChildren = false,\n      nonce,\n      onResize,\n      style = {},\n      tagName = \"div\",\n      ...rest\n    } = this.props;\n    const {\n      height,\n      width\n    } = this.state;\n\n    // Outer div should not force width/height since that may prevent containers from shrinking.\n    // Inner component should overflow and use calculated width/height.\n    // See issue #68 for more information.\n    const outerStyle = {\n      overflow: \"visible\"\n    };\n    const childParams = {};\n\n    // Avoid rendering children before the initial measurements have been collected.\n    // At best this would just be wasting cycles.\n    let bailoutOnChildren = false;\n    if (!disableHeight) {\n      if (height === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.height = 0;\n      childParams.height = height;\n\n      // TODO Remove this in the next major release\n      childParams.scaledHeight = height;\n    }\n    if (!disableWidth) {\n      if (width === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.width = 0;\n      childParams.width = width;\n\n      // TODO Remove this in the next major release\n      childParams.scaledWidth = width;\n    }\n    if (doNotBailOutOnEmptyChildren) {\n      bailoutOnChildren = false;\n    }\n    return createElement(tagName, {\n      ref: this._setRef,\n      style: {\n        ...outerStyle,\n        ...style\n      },\n      ...rest\n    }, !bailoutOnChildren && children(childParams));\n  }\n}\n\nfunction isHeightAndWidthProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth !== true;\n}\nfunction isHeightOnlyProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth === true;\n}\nfunction isWidthOnlyProps(props) {\n  return props && props.disableHeight === true && props.disableWidth !== true;\n}\n\nexport { AutoSizer as default, isHeightAndWidthProps, isHeightOnlyProps, isWidthOnlyProps };\n","// packages/core/number/src/number.ts\nfunction clamp(value, [min, max]) {\n  return Math.min(max, Math.max(min, value));\n}\nexport {\n  clamp\n};\n//# sourceMappingURL=index.mjs.map\n","// packages/react/direction/src/direction.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar DirectionContext = React.createContext(void 0);\nvar DirectionProvider = (props) => {\n  const { dir, children } = props;\n  return /* @__PURE__ */ jsx(DirectionContext.Provider, { value: dir, children });\n};\nfunction useDirection(localDir) {\n  const globalDir = React.useContext(DirectionContext);\n  return localDir || globalDir || \"ltr\";\n}\nvar Provider = DirectionProvider;\nexport {\n  DirectionProvider,\n  Provider,\n  useDirection\n};\n//# sourceMappingURL=index.mjs.map\n","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nconst yAxisSides = /*#__PURE__*/new Set(['top', 'bottom']);\nfunction getSideAxis(placement) {\n  return yAxisSides.has(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nconst lrPlacement = ['left', 'right'];\nconst rlPlacement = ['right', 'left'];\nconst tbPlacement = ['top', 'bottom'];\nconst btPlacement = ['bottom', 'top'];\nfunction getSideList(side, isStart, rtl) {\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rlPlacement : lrPlacement;\n      return isStart ? lrPlacement : rlPlacement;\n    case 'left':\n    case 'right':\n      return isStart ? tbPlacement : btPlacement;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          const ignoreCrossAxisOverflow = checkCrossAxis === 'alignment' ? initialSideAxis !== getSideAxis(nextPlacement) : false;\n          if (!ignoreCrossAxisOverflow ||\n          // We leave the current main axis only if every placement on that axis\n          // overflows the main axis.\n          overflowsData.every(d => getSideAxis(d.placement) === initialSideAxis ? d.overflows[0] > 0 : true)) {\n            // Try next placement and re-run the lifecycle.\n            return {\n              data: {\n                index: nextIndex,\n                overflows: overflowsData\n              },\n              reset: {\n                placement: nextPlacement\n              }\n            };\n          }\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nconst originSides = /*#__PURE__*/new Set(['left', 'top']);\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = originSides.has(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = originSides.has(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nconst invalidOverflowDisplayValues = /*#__PURE__*/new Set(['inline', 'contents']);\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !invalidOverflowDisplayValues.has(display);\n}\nconst tableElements = /*#__PURE__*/new Set(['table', 'td', 'th']);\nfunction isTableElement(element) {\n  return tableElements.has(getNodeName(element));\n}\nconst topLayerSelectors = [':popover-open', ':modal'];\nfunction isTopLayer(element) {\n  return topLayerSelectors.some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (_e) {\n      return false;\n    }\n  });\n}\nconst transformProperties = ['transform', 'translate', 'scale', 'rotate', 'perspective'];\nconst willChangeValues = ['transform', 'translate', 'scale', 'rotate', 'perspective', 'filter'];\nconst containValues = ['paint', 'layout', 'strict', 'content'];\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  // https://drafts.csswg.org/css-transforms-2/#individual-transforms\n  return transformProperties.some(value => css[value] ? css[value] !== 'none' : false) || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || willChangeValues.some(value => (css.willChange || '').includes(value)) || containValues.some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nconst lastTraversableNodeNames = /*#__PURE__*/new Set(['html', 'body', '#document']);\nfunction isLastTraversableNode(node) {\n  return lastTraversableNodeNames.has(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","import { rectToClientRect, arrow as arrow$1, autoPlacement as autoPlacement$1, detectOverflow as detectOverflow$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle as getComputedStyle$1, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle$1(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle$1(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\nfunction getHTMLOffset(documentElement, scroll) {\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - getWindowScrollBarX(documentElement, htmlRect);\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle$1(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Safety check: ensure the scrollbar space is reasonable in case this\n// calculation is affected by unusual styles.\n// Most scrollbars leave 15-18px of space.\nconst SCROLLBAR_MAX = 25;\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  const windowScrollbarX = getWindowScrollBarX(html);\n  // <html> `overflow: hidden` + `scrollbar-gutter: stable` reduces the\n  // visual width of the <html> but this is not considered in the size\n  // of `html.clientWidth`.\n  if (windowScrollbarX <= 0) {\n    const doc = html.ownerDocument;\n    const body = doc.body;\n    const bodyStyles = getComputedStyle(body);\n    const bodyMarginInline = doc.compatMode === 'CSS1Compat' ? parseFloat(bodyStyles.marginLeft) + parseFloat(bodyStyles.marginRight) || 0 : 0;\n    const clippingStableScrollbarWidth = Math.abs(html.clientWidth - body.clientWidth - bodyMarginInline);\n    if (clippingStableScrollbarWidth <= SCROLLBAR_MAX) {\n      width -= clippingStableScrollbarWidth;\n    }\n  } else if (windowScrollbarX <= SCROLLBAR_MAX) {\n    // If the <body> scrollbar is on the left, the width needs to be extended\n    // by the scrollbar amount so there isn't extra space on the right.\n    width += windowScrollbarX;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nconst absoluteOrFixed = /*#__PURE__*/new Set(['absolute', 'fixed']);\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle$1(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle$1(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle$1(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && absoluteOrFixed.has(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n\n  // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n  // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n  function setLeftRTLScrollbarOffset() {\n    offsets.x = getWindowScrollBarX(documentElement);\n  }\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      setLeftRTLScrollbarOffset();\n    }\n  }\n  if (isFixed && !isOffsetParentAnElement && documentElement) {\n    setLeftRTLScrollbarOffset();\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle$1(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle$1(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle$1(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\nfunction rectsAreEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const elementRectForRootMargin = element.getBoundingClientRect();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = elementRectForRootMargin;\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      if (ratio === 1 && !rectsAreEqual(elementRectForRootMargin, element.getBoundingClientRect())) {\n        // It's possible that even though the ratio is reported as 1, the\n        // element is not actually fully within the IntersectionObserver's root\n        // area anymore. This can happen under performance constraints. This may\n        // be a bug in the browser's IntersectionObserver implementation. To\n        // work around this, we compare the element's bounding rect now with\n        // what it was at the time we created the IntersectionObserver. If they\n        // are not equal then the element moved, so we refresh.\n        refresh();\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (_e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && !rectsAreEqual(prevRefRect, nextRefRect)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","import { computePosition, arrow as arrow$2, autoPlacement as autoPlacement$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1 } from '@floating-ui/dom';\nexport { autoUpdate, computePosition, detectOverflow, getOverflowAncestors, platform } from '@floating-ui/dom';\nimport * as React from 'react';\nimport { useLayoutEffect } from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar isClient = typeof document !== 'undefined';\n\nvar noop = function noop() {};\nvar index = isClient ? useLayoutEffect : noop;\n\n// Fork of `fast-deep-equal` that only does the comparisons we need and compares\n// functions\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (typeof a === 'function' && a.toString() === b.toString()) {\n    return true;\n  }\n  let length;\n  let i;\n  let keys;\n  if (a && b && typeof a === 'object') {\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length !== b.length) return false;\n      for (i = length; i-- !== 0;) {\n        if (!deepEqual(a[i], b[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) {\n      return false;\n    }\n    for (i = length; i-- !== 0;) {\n      if (!{}.hasOwnProperty.call(b, keys[i])) {\n        return false;\n      }\n    }\n    for (i = length; i-- !== 0;) {\n      const key = keys[i];\n      if (key === '_owner' && a.$$typeof) {\n        continue;\n      }\n      if (!deepEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return a !== a && b !== b;\n}\n\nfunction getDPR(element) {\n  if (typeof window === 'undefined') {\n    return 1;\n  }\n  const win = element.ownerDocument.defaultView || window;\n  return win.devicePixelRatio || 1;\n}\n\nfunction roundByDPR(element, value) {\n  const dpr = getDPR(element);\n  return Math.round(value * dpr) / dpr;\n}\n\nfunction useLatestRef(value) {\n  const ref = React.useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\n\n/**\n * Provides data to position a floating element.\n * @see https://floating-ui.com/docs/useFloating\n */\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform,\n    elements: {\n      reference: externalReference,\n      floating: externalFloating\n    } = {},\n    transform = true,\n    whileElementsMounted,\n    open\n  } = options;\n  const [data, setData] = React.useState({\n    x: 0,\n    y: 0,\n    strategy,\n    placement,\n    middlewareData: {},\n    isPositioned: false\n  });\n  const [latestMiddleware, setLatestMiddleware] = React.useState(middleware);\n  if (!deepEqual(latestMiddleware, middleware)) {\n    setLatestMiddleware(middleware);\n  }\n  const [_reference, _setReference] = React.useState(null);\n  const [_floating, _setFloating] = React.useState(null);\n  const setReference = React.useCallback(node => {\n    if (node !== referenceRef.current) {\n      referenceRef.current = node;\n      _setReference(node);\n    }\n  }, []);\n  const setFloating = React.useCallback(node => {\n    if (node !== floatingRef.current) {\n      floatingRef.current = node;\n      _setFloating(node);\n    }\n  }, []);\n  const referenceEl = externalReference || _reference;\n  const floatingEl = externalFloating || _floating;\n  const referenceRef = React.useRef(null);\n  const floatingRef = React.useRef(null);\n  const dataRef = React.useRef(data);\n  const hasWhileElementsMounted = whileElementsMounted != null;\n  const whileElementsMountedRef = useLatestRef(whileElementsMounted);\n  const platformRef = useLatestRef(platform);\n  const openRef = useLatestRef(open);\n  const update = React.useCallback(() => {\n    if (!referenceRef.current || !floatingRef.current) {\n      return;\n    }\n    const config = {\n      placement,\n      strategy,\n      middleware: latestMiddleware\n    };\n    if (platformRef.current) {\n      config.platform = platformRef.current;\n    }\n    computePosition(referenceRef.current, floatingRef.current, config).then(data => {\n      const fullData = {\n        ...data,\n        // The floating element's position may be recomputed while it's closed\n        // but still mounted (such as when transitioning out). To ensure\n        // `isPositioned` will be `false` initially on the next open, avoid\n        // setting it to `true` when `open === false` (must be specified).\n        isPositioned: openRef.current !== false\n      };\n      if (isMountedRef.current && !deepEqual(dataRef.current, fullData)) {\n        dataRef.current = fullData;\n        ReactDOM.flushSync(() => {\n          setData(fullData);\n        });\n      }\n    });\n  }, [latestMiddleware, placement, strategy, platformRef, openRef]);\n  index(() => {\n    if (open === false && dataRef.current.isPositioned) {\n      dataRef.current.isPositioned = false;\n      setData(data => ({\n        ...data,\n        isPositioned: false\n      }));\n    }\n  }, [open]);\n  const isMountedRef = React.useRef(false);\n  index(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n  index(() => {\n    if (referenceEl) referenceRef.current = referenceEl;\n    if (floatingEl) floatingRef.current = floatingEl;\n    if (referenceEl && floatingEl) {\n      if (whileElementsMountedRef.current) {\n        return whileElementsMountedRef.current(referenceEl, floatingEl, update);\n      }\n      update();\n    }\n  }, [referenceEl, floatingEl, update, whileElementsMountedRef, hasWhileElementsMounted]);\n  const refs = React.useMemo(() => ({\n    reference: referenceRef,\n    floating: floatingRef,\n    setReference,\n    setFloating\n  }), [setReference, setFloating]);\n  const elements = React.useMemo(() => ({\n    reference: referenceEl,\n    floating: floatingEl\n  }), [referenceEl, floatingEl]);\n  const floatingStyles = React.useMemo(() => {\n    const initialStyles = {\n      position: strategy,\n      left: 0,\n      top: 0\n    };\n    if (!elements.floating) {\n      return initialStyles;\n    }\n    const x = roundByDPR(elements.floating, data.x);\n    const y = roundByDPR(elements.floating, data.y);\n    if (transform) {\n      return {\n        ...initialStyles,\n        transform: \"translate(\" + x + \"px, \" + y + \"px)\",\n        ...(getDPR(elements.floating) >= 1.5 && {\n          willChange: 'transform'\n        })\n      };\n    }\n    return {\n      position: strategy,\n      left: x,\n      top: y\n    };\n  }, [strategy, transform, elements.floating, data.x, data.y]);\n  return React.useMemo(() => ({\n    ...data,\n    update,\n    refs,\n    elements,\n    floatingStyles\n  }), [data, update, refs, elements, floatingStyles]);\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * This wraps the core `arrow` middleware to allow React refs as the element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow$1 = options => {\n  function isRef(value) {\n    return {}.hasOwnProperty.call(value, 'current');\n  }\n  return {\n    name: 'arrow',\n    options,\n    fn(state) {\n      const {\n        element,\n        padding\n      } = typeof options === 'function' ? options(state) : options;\n      if (element && isRef(element)) {\n        if (element.current != null) {\n          return arrow$2({\n            element: element.current,\n            padding\n          }).fn(state);\n        }\n        return {};\n      }\n      if (element) {\n        return arrow$2({\n          element,\n          padding\n        }).fn(state);\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = (options, deps) => ({\n  ...offset$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = (options, deps) => ({\n  ...shift$1(options),\n  options: [options, deps]\n});\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = (options, deps) => ({\n  ...limitShift$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = (options, deps) => ({\n  ...flip$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = (options, deps) => ({\n  ...size$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = (options, deps) => ({\n  ...autoPlacement$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = (options, deps) => ({\n  ...hide$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = (options, deps) => ({\n  ...inline$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * This wraps the core `arrow` middleware to allow React refs as the element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = (options, deps) => ({\n  ...arrow$1(options),\n  options: [options, deps]\n});\n\nexport { arrow, autoPlacement, flip, hide, inline, limitShift, offset, shift, size, useFloating };\n","// src/arrow.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Arrow\";\nvar Arrow = React.forwardRef((props, forwardedRef) => {\n  const { children, width = 10, height = 5, ...arrowProps } = props;\n  return /* @__PURE__ */ jsx(\n    Primitive.svg,\n    {\n      ...arrowProps,\n      ref: forwardedRef,\n      width,\n      height,\n      viewBox: \"0 0 30 10\",\n      preserveAspectRatio: \"none\",\n      children: props.asChild ? children : /* @__PURE__ */ jsx(\"polygon\", { points: \"0,0 30,0 15,10\" })\n    }\n  );\n});\nArrow.displayName = NAME;\nvar Root = Arrow;\nexport {\n  Arrow,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/popper.tsx\nimport * as React from \"react\";\nimport {\n  useFloating,\n  autoUpdate,\n  offset,\n  shift,\n  limitShift,\n  hide,\n  arrow as floatingUIarrow,\n  flip,\n  size\n} from \"@floating-ui/react-dom\";\nimport * as ArrowPrimitive from \"@radix-ui/react-arrow\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { jsx } from \"react/jsx-runtime\";\nvar SIDE_OPTIONS = [\"top\", \"right\", \"bottom\", \"left\"];\nvar ALIGN_OPTIONS = [\"start\", \"center\", \"end\"];\nvar POPPER_NAME = \"Popper\";\nvar [createPopperContext, createPopperScope] = createContextScope(POPPER_NAME);\nvar [PopperProvider, usePopperContext] = createPopperContext(POPPER_NAME);\nvar Popper = (props) => {\n  const { __scopePopper, children } = props;\n  const [anchor, setAnchor] = React.useState(null);\n  return /* @__PURE__ */ jsx(PopperProvider, { scope: __scopePopper, anchor, onAnchorChange: setAnchor, children });\n};\nPopper.displayName = POPPER_NAME;\nvar ANCHOR_NAME = \"PopperAnchor\";\nvar PopperAnchor = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopePopper, virtualRef, ...anchorProps } = props;\n    const context = usePopperContext(ANCHOR_NAME, __scopePopper);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const anchorRef = React.useRef(null);\n    React.useEffect(() => {\n      const previousAnchor = anchorRef.current;\n      anchorRef.current = virtualRef?.current || ref.current;\n      if (previousAnchor !== anchorRef.current) {\n        context.onAnchorChange(anchorRef.current);\n      }\n    });\n    return virtualRef ? null : /* @__PURE__ */ jsx(Primitive.div, { ...anchorProps, ref: composedRefs });\n  }\n);\nPopperAnchor.displayName = ANCHOR_NAME;\nvar CONTENT_NAME = \"PopperContent\";\nvar [PopperContentProvider, useContentContext] = createPopperContext(CONTENT_NAME);\nvar PopperContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopePopper,\n      side = \"bottom\",\n      sideOffset = 0,\n      align = \"center\",\n      alignOffset = 0,\n      arrowPadding = 0,\n      avoidCollisions = true,\n      collisionBoundary = [],\n      collisionPadding: collisionPaddingProp = 0,\n      sticky = \"partial\",\n      hideWhenDetached = false,\n      updatePositionStrategy = \"optimized\",\n      onPlaced,\n      ...contentProps\n    } = props;\n    const context = usePopperContext(CONTENT_NAME, __scopePopper);\n    const [content, setContent] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setContent(node));\n    const [arrow, setArrow] = React.useState(null);\n    const arrowSize = useSize(arrow);\n    const arrowWidth = arrowSize?.width ?? 0;\n    const arrowHeight = arrowSize?.height ?? 0;\n    const desiredPlacement = side + (align !== \"center\" ? \"-\" + align : \"\");\n    const collisionPadding = typeof collisionPaddingProp === \"number\" ? collisionPaddingProp : { top: 0, right: 0, bottom: 0, left: 0, ...collisionPaddingProp };\n    const boundary = Array.isArray(collisionBoundary) ? collisionBoundary : [collisionBoundary];\n    const hasExplicitBoundaries = boundary.length > 0;\n    const detectOverflowOptions = {\n      padding: collisionPadding,\n      boundary: boundary.filter(isNotNull),\n      // with `strategy: 'fixed'`, this is the only way to get it to respect boundaries\n      altBoundary: hasExplicitBoundaries\n    };\n    const { refs, floatingStyles, placement, isPositioned, middlewareData } = useFloating({\n      // default to `fixed` strategy so users don't have to pick and we also avoid focus scroll issues\n      strategy: \"fixed\",\n      placement: desiredPlacement,\n      whileElementsMounted: (...args) => {\n        const cleanup = autoUpdate(...args, {\n          animationFrame: updatePositionStrategy === \"always\"\n        });\n        return cleanup;\n      },\n      elements: {\n        reference: context.anchor\n      },\n      middleware: [\n        offset({ mainAxis: sideOffset + arrowHeight, alignmentAxis: alignOffset }),\n        avoidCollisions && shift({\n          mainAxis: true,\n          crossAxis: false,\n          limiter: sticky === \"partial\" ? limitShift() : void 0,\n          ...detectOverflowOptions\n        }),\n        avoidCollisions && flip({ ...detectOverflowOptions }),\n        size({\n          ...detectOverflowOptions,\n          apply: ({ elements, rects, availableWidth, availableHeight }) => {\n            const { width: anchorWidth, height: anchorHeight } = rects.reference;\n            const contentStyle = elements.floating.style;\n            contentStyle.setProperty(\"--radix-popper-available-width\", `${availableWidth}px`);\n            contentStyle.setProperty(\"--radix-popper-available-height\", `${availableHeight}px`);\n            contentStyle.setProperty(\"--radix-popper-anchor-width\", `${anchorWidth}px`);\n            contentStyle.setProperty(\"--radix-popper-anchor-height\", `${anchorHeight}px`);\n          }\n        }),\n        arrow && floatingUIarrow({ element: arrow, padding: arrowPadding }),\n        transformOrigin({ arrowWidth, arrowHeight }),\n        hideWhenDetached && hide({ strategy: \"referenceHidden\", ...detectOverflowOptions })\n      ]\n    });\n    const [placedSide, placedAlign] = getSideAndAlignFromPlacement(placement);\n    const handlePlaced = useCallbackRef(onPlaced);\n    useLayoutEffect(() => {\n      if (isPositioned) {\n        handlePlaced?.();\n      }\n    }, [isPositioned, handlePlaced]);\n    const arrowX = middlewareData.arrow?.x;\n    const arrowY = middlewareData.arrow?.y;\n    const cannotCenterArrow = middlewareData.arrow?.centerOffset !== 0;\n    const [contentZIndex, setContentZIndex] = React.useState();\n    useLayoutEffect(() => {\n      if (content) setContentZIndex(window.getComputedStyle(content).zIndex);\n    }, [content]);\n    return /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        ref: refs.setFloating,\n        \"data-radix-popper-content-wrapper\": \"\",\n        style: {\n          ...floatingStyles,\n          transform: isPositioned ? floatingStyles.transform : \"translate(0, -200%)\",\n          // keep off the page when measuring\n          minWidth: \"max-content\",\n          zIndex: contentZIndex,\n          [\"--radix-popper-transform-origin\"]: [\n            middlewareData.transformOrigin?.x,\n            middlewareData.transformOrigin?.y\n          ].join(\" \"),\n          // hide the content if using the hide middleware and should be hidden\n          // set visibility to hidden and disable pointer events so the UI behaves\n          // as if the PopperContent isn't there at all\n          ...middlewareData.hide?.referenceHidden && {\n            visibility: \"hidden\",\n            pointerEvents: \"none\"\n          }\n        },\n        dir: props.dir,\n        children: /* @__PURE__ */ jsx(\n          PopperContentProvider,\n          {\n            scope: __scopePopper,\n            placedSide,\n            onArrowChange: setArrow,\n            arrowX,\n            arrowY,\n            shouldHideArrow: cannotCenterArrow,\n            children: /* @__PURE__ */ jsx(\n              Primitive.div,\n              {\n                \"data-side\": placedSide,\n                \"data-align\": placedAlign,\n                ...contentProps,\n                ref: composedRefs,\n                style: {\n                  ...contentProps.style,\n                  // if the PopperContent hasn't been placed yet (not all measurements done)\n                  // we prevent animations so that users's animation don't kick in too early referring wrong sides\n                  animation: !isPositioned ? \"none\" : void 0\n                }\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nPopperContent.displayName = CONTENT_NAME;\nvar ARROW_NAME = \"PopperArrow\";\nvar OPPOSITE_SIDE = {\n  top: \"bottom\",\n  right: \"left\",\n  bottom: \"top\",\n  left: \"right\"\n};\nvar PopperArrow = React.forwardRef(function PopperArrow2(props, forwardedRef) {\n  const { __scopePopper, ...arrowProps } = props;\n  const contentContext = useContentContext(ARROW_NAME, __scopePopper);\n  const baseSide = OPPOSITE_SIDE[contentContext.placedSide];\n  return (\n    // we have to use an extra wrapper because `ResizeObserver` (used by `useSize`)\n    // doesn't report size as we'd expect on SVG elements.\n    // it reports their bounding box which is effectively the largest path inside the SVG.\n    /* @__PURE__ */ jsx(\n      \"span\",\n      {\n        ref: contentContext.onArrowChange,\n        style: {\n          position: \"absolute\",\n          left: contentContext.arrowX,\n          top: contentContext.arrowY,\n          [baseSide]: 0,\n          transformOrigin: {\n            top: \"\",\n            right: \"0 0\",\n            bottom: \"center 0\",\n            left: \"100% 0\"\n          }[contentContext.placedSide],\n          transform: {\n            top: \"translateY(100%)\",\n            right: \"translateY(50%) rotate(90deg) translateX(-50%)\",\n            bottom: `rotate(180deg)`,\n            left: \"translateY(50%) rotate(-90deg) translateX(50%)\"\n          }[contentContext.placedSide],\n          visibility: contentContext.shouldHideArrow ? \"hidden\" : void 0\n        },\n        children: /* @__PURE__ */ jsx(\n          ArrowPrimitive.Root,\n          {\n            ...arrowProps,\n            ref: forwardedRef,\n            style: {\n              ...arrowProps.style,\n              // ensures the element can be measured correctly (mostly for if SVG)\n              display: \"block\"\n            }\n          }\n        )\n      }\n    )\n  );\n});\nPopperArrow.displayName = ARROW_NAME;\nfunction isNotNull(value) {\n  return value !== null;\n}\nvar transformOrigin = (options) => ({\n  name: \"transformOrigin\",\n  options,\n  fn(data) {\n    const { placement, rects, middlewareData } = data;\n    const cannotCenterArrow = middlewareData.arrow?.centerOffset !== 0;\n    const isArrowHidden = cannotCenterArrow;\n    const arrowWidth = isArrowHidden ? 0 : options.arrowWidth;\n    const arrowHeight = isArrowHidden ? 0 : options.arrowHeight;\n    const [placedSide, placedAlign] = getSideAndAlignFromPlacement(placement);\n    const noArrowAlign = { start: \"0%\", center: \"50%\", end: \"100%\" }[placedAlign];\n    const arrowXCenter = (middlewareData.arrow?.x ?? 0) + arrowWidth / 2;\n    const arrowYCenter = (middlewareData.arrow?.y ?? 0) + arrowHeight / 2;\n    let x = \"\";\n    let y = \"\";\n    if (placedSide === \"bottom\") {\n      x = isArrowHidden ? noArrowAlign : `${arrowXCenter}px`;\n      y = `${-arrowHeight}px`;\n    } else if (placedSide === \"top\") {\n      x = isArrowHidden ? noArrowAlign : `${arrowXCenter}px`;\n      y = `${rects.floating.height + arrowHeight}px`;\n    } else if (placedSide === \"right\") {\n      x = `${-arrowHeight}px`;\n      y = isArrowHidden ? noArrowAlign : `${arrowYCenter}px`;\n    } else if (placedSide === \"left\") {\n      x = `${rects.floating.width + arrowHeight}px`;\n      y = isArrowHidden ? noArrowAlign : `${arrowYCenter}px`;\n    }\n    return { data: { x, y } };\n  }\n});\nfunction getSideAndAlignFromPlacement(placement) {\n  const [side, align = \"center\"] = placement.split(\"-\");\n  return [side, align];\n}\nvar Root2 = Popper;\nvar Anchor = PopperAnchor;\nvar Content = PopperContent;\nvar Arrow = PopperArrow;\nexport {\n  ALIGN_OPTIONS,\n  Anchor,\n  Arrow,\n  Content,\n  Popper,\n  PopperAnchor,\n  PopperArrow,\n  PopperContent,\n  Root2 as Root,\n  SIDE_OPTIONS,\n  createPopperScope\n};\n//# sourceMappingURL=index.mjs.map\n","// src/slot.tsx\nimport * as React from \"react\";\nimport { composeRefs } from \"@radix-ui/react-compose-refs\";\nimport { Fragment as Fragment2, jsx } from \"react/jsx-runtime\";\n// @__NO_SIDE_EFFECTS__\nfunction createSlot(ownerName) {\n  const SlotClone = /* @__PURE__ */ createSlotClone(ownerName);\n  const Slot2 = React.forwardRef((props, forwardedRef) => {\n    const { children, ...slotProps } = props;\n    const childrenArray = React.Children.toArray(children);\n    const slottable = childrenArray.find(isSlottable);\n    if (slottable) {\n      const newElement = slottable.props.children;\n      const newChildren = childrenArray.map((child) => {\n        if (child === slottable) {\n          if (React.Children.count(newElement) > 1) return React.Children.only(null);\n          return React.isValidElement(newElement) ? newElement.props.children : null;\n        } else {\n          return child;\n        }\n      });\n      return /* @__PURE__ */ jsx(SlotClone, { ...slotProps, ref: forwardedRef, children: React.isValidElement(newElement) ? React.cloneElement(newElement, void 0, newChildren) : null });\n    }\n    return /* @__PURE__ */ jsx(SlotClone, { ...slotProps, ref: forwardedRef, children });\n  });\n  Slot2.displayName = `${ownerName}.Slot`;\n  return Slot2;\n}\nvar Slot = /* @__PURE__ */ createSlot(\"Slot\");\n// @__NO_SIDE_EFFECTS__\nfunction createSlotClone(ownerName) {\n  const SlotClone = React.forwardRef((props, forwardedRef) => {\n    const { children, ...slotProps } = props;\n    if (React.isValidElement(children)) {\n      const childrenRef = getElementRef(children);\n      const props2 = mergeProps(slotProps, children.props);\n      if (children.type !== React.Fragment) {\n        props2.ref = forwardedRef ? composeRefs(forwardedRef, childrenRef) : childrenRef;\n      }\n      return React.cloneElement(children, props2);\n    }\n    return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n  });\n  SlotClone.displayName = `${ownerName}.SlotClone`;\n  return SlotClone;\n}\nvar SLOTTABLE_IDENTIFIER = Symbol(\"radix.slottable\");\n// @__NO_SIDE_EFFECTS__\nfunction createSlottable(ownerName) {\n  const Slottable2 = ({ children }) => {\n    return /* @__PURE__ */ jsx(Fragment2, { children });\n  };\n  Slottable2.displayName = `${ownerName}.Slottable`;\n  Slottable2.__radixId = SLOTTABLE_IDENTIFIER;\n  return Slottable2;\n}\nvar Slottable = /* @__PURE__ */ createSlottable(\"Slottable\");\nfunction isSlottable(child) {\n  return React.isValidElement(child) && typeof child.type === \"function\" && \"__radixId\" in child.type && child.type.__radixId === SLOTTABLE_IDENTIFIER;\n}\nfunction mergeProps(slotProps, childProps) {\n  const overrideProps = { ...childProps };\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args) => {\n          const result = childPropValue(...args);\n          slotPropValue(...args);\n          return result;\n        };\n      } else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    } else if (propName === \"style\") {\n      overrideProps[propName] = { ...slotPropValue, ...childPropValue };\n    } else if (propName === \"className\") {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(\" \");\n    }\n  }\n  return { ...slotProps, ...overrideProps };\n}\nfunction getElementRef(element) {\n  let getter = Object.getOwnPropertyDescriptor(element.props, \"ref\")?.get;\n  let mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.ref;\n  }\n  getter = Object.getOwnPropertyDescriptor(element, \"ref\")?.get;\n  mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.props.ref;\n  }\n  return element.props.ref || element.ref;\n}\nexport {\n  Slot as Root,\n  Slot,\n  Slottable,\n  createSlot,\n  createSlottable\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/select.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { clamp } from \"@radix-ui/number\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createCollection } from \"@radix-ui/react-collection\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { DismissableLayer } from \"@radix-ui/react-dismissable-layer\";\nimport { useFocusGuards } from \"@radix-ui/react-focus-guards\";\nimport { FocusScope } from \"@radix-ui/react-focus-scope\";\nimport { useId } from \"@radix-ui/react-id\";\nimport * as PopperPrimitive from \"@radix-ui/react-popper\";\nimport { createPopperScope } from \"@radix-ui/react-popper\";\nimport { Portal as PortalPrimitive } from \"@radix-ui/react-portal\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { VISUALLY_HIDDEN_STYLES } from \"@radix-ui/react-visually-hidden\";\nimport { hideOthers } from \"aria-hidden\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar OPEN_KEYS = [\" \", \"Enter\", \"ArrowUp\", \"ArrowDown\"];\nvar SELECTION_KEYS = [\" \", \"Enter\"];\nvar SELECT_NAME = \"Select\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(SELECT_NAME);\nvar [createSelectContext, createSelectScope] = createContextScope(SELECT_NAME, [\n  createCollectionScope,\n  createPopperScope\n]);\nvar usePopperScope = createPopperScope();\nvar [SelectProvider, useSelectContext] = createSelectContext(SELECT_NAME);\nvar [SelectNativeOptionsProvider, useSelectNativeOptionsContext] = createSelectContext(SELECT_NAME);\nvar Select = (props) => {\n  const {\n    __scopeSelect,\n    children,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    value: valueProp,\n    defaultValue,\n    onValueChange,\n    dir,\n    name,\n    autoComplete,\n    disabled,\n    required,\n    form\n  } = props;\n  const popperScope = usePopperScope(__scopeSelect);\n  const [trigger, setTrigger] = React.useState(null);\n  const [valueNode, setValueNode] = React.useState(null);\n  const [valueNodeHasChildren, setValueNodeHasChildren] = React.useState(false);\n  const direction = useDirection(dir);\n  const [open, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen ?? false,\n    onChange: onOpenChange,\n    caller: SELECT_NAME\n  });\n  const [value, setValue] = useControllableState({\n    prop: valueProp,\n    defaultProp: defaultValue,\n    onChange: onValueChange,\n    caller: SELECT_NAME\n  });\n  const triggerPointerDownPosRef = React.useRef(null);\n  const isFormControl = trigger ? form || !!trigger.closest(\"form\") : true;\n  const [nativeOptionsSet, setNativeOptionsSet] = React.useState(/* @__PURE__ */ new Set());\n  const nativeSelectKey = Array.from(nativeOptionsSet).map((option) => option.props.value).join(\";\");\n  return /* @__PURE__ */ jsx(PopperPrimitive.Root, { ...popperScope, children: /* @__PURE__ */ jsxs(\n    SelectProvider,\n    {\n      required,\n      scope: __scopeSelect,\n      trigger,\n      onTriggerChange: setTrigger,\n      valueNode,\n      onValueNodeChange: setValueNode,\n      valueNodeHasChildren,\n      onValueNodeHasChildrenChange: setValueNodeHasChildren,\n      contentId: useId(),\n      value,\n      onValueChange: setValue,\n      open,\n      onOpenChange: setOpen,\n      dir: direction,\n      triggerPointerDownPosRef,\n      disabled,\n      children: [\n        /* @__PURE__ */ jsx(Collection.Provider, { scope: __scopeSelect, children: /* @__PURE__ */ jsx(\n          SelectNativeOptionsProvider,\n          {\n            scope: props.__scopeSelect,\n            onNativeOptionAdd: React.useCallback((option) => {\n              setNativeOptionsSet((prev) => new Set(prev).add(option));\n            }, []),\n            onNativeOptionRemove: React.useCallback((option) => {\n              setNativeOptionsSet((prev) => {\n                const optionsSet = new Set(prev);\n                optionsSet.delete(option);\n                return optionsSet;\n              });\n            }, []),\n            children\n          }\n        ) }),\n        isFormControl ? /* @__PURE__ */ jsxs(\n          SelectBubbleInput,\n          {\n            \"aria-hidden\": true,\n            required,\n            tabIndex: -1,\n            name,\n            autoComplete,\n            value,\n            onChange: (event) => setValue(event.target.value),\n            disabled,\n            form,\n            children: [\n              value === void 0 ? /* @__PURE__ */ jsx(\"option\", { value: \"\" }) : null,\n              Array.from(nativeOptionsSet)\n            ]\n          },\n          nativeSelectKey\n        ) : null\n      ]\n    }\n  ) });\n};\nSelect.displayName = SELECT_NAME;\nvar TRIGGER_NAME = \"SelectTrigger\";\nvar SelectTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, disabled = false, ...triggerProps } = props;\n    const popperScope = usePopperScope(__scopeSelect);\n    const context = useSelectContext(TRIGGER_NAME, __scopeSelect);\n    const isDisabled = context.disabled || disabled;\n    const composedRefs = useComposedRefs(forwardedRef, context.onTriggerChange);\n    const getItems = useCollection(__scopeSelect);\n    const pointerTypeRef = React.useRef(\"touch\");\n    const [searchRef, handleTypeaheadSearch, resetTypeahead] = useTypeaheadSearch((search) => {\n      const enabledItems = getItems().filter((item) => !item.disabled);\n      const currentItem = enabledItems.find((item) => item.value === context.value);\n      const nextItem = findNextItem(enabledItems, search, currentItem);\n      if (nextItem !== void 0) {\n        context.onValueChange(nextItem.value);\n      }\n    });\n    const handleOpen = (pointerEvent) => {\n      if (!isDisabled) {\n        context.onOpenChange(true);\n        resetTypeahead();\n      }\n      if (pointerEvent) {\n        context.triggerPointerDownPosRef.current = {\n          x: Math.round(pointerEvent.pageX),\n          y: Math.round(pointerEvent.pageY)\n        };\n      }\n    };\n    return /* @__PURE__ */ jsx(PopperPrimitive.Anchor, { asChild: true, ...popperScope, children: /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"combobox\",\n        \"aria-controls\": context.contentId,\n        \"aria-expanded\": context.open,\n        \"aria-required\": context.required,\n        \"aria-autocomplete\": \"none\",\n        dir: context.dir,\n        \"data-state\": context.open ? \"open\" : \"closed\",\n        disabled: isDisabled,\n        \"data-disabled\": isDisabled ? \"\" : void 0,\n        \"data-placeholder\": shouldShowPlaceholder(context.value) ? \"\" : void 0,\n        ...triggerProps,\n        ref: composedRefs,\n        onClick: composeEventHandlers(triggerProps.onClick, (event) => {\n          event.currentTarget.focus();\n          if (pointerTypeRef.current !== \"mouse\") {\n            handleOpen(event);\n          }\n        }),\n        onPointerDown: composeEventHandlers(triggerProps.onPointerDown, (event) => {\n          pointerTypeRef.current = event.pointerType;\n          const target = event.target;\n          if (target.hasPointerCapture(event.pointerId)) {\n            target.releasePointerCapture(event.pointerId);\n          }\n          if (event.button === 0 && event.ctrlKey === false && event.pointerType === \"mouse\") {\n            handleOpen(event);\n            event.preventDefault();\n          }\n        }),\n        onKeyDown: composeEventHandlers(triggerProps.onKeyDown, (event) => {\n          const isTypingAhead = searchRef.current !== \"\";\n          const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n          if (!isModifierKey && event.key.length === 1) handleTypeaheadSearch(event.key);\n          if (isTypingAhead && event.key === \" \") return;\n          if (OPEN_KEYS.includes(event.key)) {\n            handleOpen();\n            event.preventDefault();\n          }\n        })\n      }\n    ) });\n  }\n);\nSelectTrigger.displayName = TRIGGER_NAME;\nvar VALUE_NAME = \"SelectValue\";\nvar SelectValue = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, className, style, children, placeholder = \"\", ...valueProps } = props;\n    const context = useSelectContext(VALUE_NAME, __scopeSelect);\n    const { onValueNodeHasChildrenChange } = context;\n    const hasChildren = children !== void 0;\n    const composedRefs = useComposedRefs(forwardedRef, context.onValueNodeChange);\n    useLayoutEffect(() => {\n      onValueNodeHasChildrenChange(hasChildren);\n    }, [onValueNodeHasChildrenChange, hasChildren]);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        ...valueProps,\n        ref: composedRefs,\n        style: { pointerEvents: \"none\" },\n        children: shouldShowPlaceholder(context.value) ? /* @__PURE__ */ jsx(Fragment, { children: placeholder }) : children\n      }\n    );\n  }\n);\nSelectValue.displayName = VALUE_NAME;\nvar ICON_NAME = \"SelectIcon\";\nvar SelectIcon = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, children, ...iconProps } = props;\n    return /* @__PURE__ */ jsx(Primitive.span, { \"aria-hidden\": true, ...iconProps, ref: forwardedRef, children: children || \"\\u25BC\" });\n  }\n);\nSelectIcon.displayName = ICON_NAME;\nvar PORTAL_NAME = \"SelectPortal\";\nvar SelectPortal = (props) => {\n  return /* @__PURE__ */ jsx(PortalPrimitive, { asChild: true, ...props });\n};\nSelectPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"SelectContent\";\nvar SelectContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useSelectContext(CONTENT_NAME, props.__scopeSelect);\n    const [fragment, setFragment] = React.useState();\n    useLayoutEffect(() => {\n      setFragment(new DocumentFragment());\n    }, []);\n    if (!context.open) {\n      const frag = fragment;\n      return frag ? ReactDOM.createPortal(\n        /* @__PURE__ */ jsx(SelectContentProvider, { scope: props.__scopeSelect, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeSelect, children: /* @__PURE__ */ jsx(\"div\", { children: props.children }) }) }),\n        frag\n      ) : null;\n    }\n    return /* @__PURE__ */ jsx(SelectContentImpl, { ...props, ref: forwardedRef });\n  }\n);\nSelectContent.displayName = CONTENT_NAME;\nvar CONTENT_MARGIN = 10;\nvar [SelectContentProvider, useSelectContentContext] = createSelectContext(CONTENT_NAME);\nvar CONTENT_IMPL_NAME = \"SelectContentImpl\";\nvar Slot = createSlot(\"SelectContent.RemoveScroll\");\nvar SelectContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSelect,\n      position = \"item-aligned\",\n      onCloseAutoFocus,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      //\n      // PopperContent props\n      side,\n      sideOffset,\n      align,\n      alignOffset,\n      arrowPadding,\n      collisionBoundary,\n      collisionPadding,\n      sticky,\n      hideWhenDetached,\n      avoidCollisions,\n      //\n      ...contentProps\n    } = props;\n    const context = useSelectContext(CONTENT_NAME, __scopeSelect);\n    const [content, setContent] = React.useState(null);\n    const [viewport, setViewport] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setContent(node));\n    const [selectedItem, setSelectedItem] = React.useState(null);\n    const [selectedItemText, setSelectedItemText] = React.useState(\n      null\n    );\n    const getItems = useCollection(__scopeSelect);\n    const [isPositioned, setIsPositioned] = React.useState(false);\n    const firstValidItemFoundRef = React.useRef(false);\n    React.useEffect(() => {\n      if (content) return hideOthers(content);\n    }, [content]);\n    useFocusGuards();\n    const focusFirst = React.useCallback(\n      (candidates) => {\n        const [firstItem, ...restItems] = getItems().map((item) => item.ref.current);\n        const [lastItem] = restItems.slice(-1);\n        const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n        for (const candidate of candidates) {\n          if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n          candidate?.scrollIntoView({ block: \"nearest\" });\n          if (candidate === firstItem && viewport) viewport.scrollTop = 0;\n          if (candidate === lastItem && viewport) viewport.scrollTop = viewport.scrollHeight;\n          candidate?.focus();\n          if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n        }\n      },\n      [getItems, viewport]\n    );\n    const focusSelectedItem = React.useCallback(\n      () => focusFirst([selectedItem, content]),\n      [focusFirst, selectedItem, content]\n    );\n    React.useEffect(() => {\n      if (isPositioned) {\n        focusSelectedItem();\n      }\n    }, [isPositioned, focusSelectedItem]);\n    const { onOpenChange, triggerPointerDownPosRef } = context;\n    React.useEffect(() => {\n      if (content) {\n        let pointerMoveDelta = { x: 0, y: 0 };\n        const handlePointerMove = (event) => {\n          pointerMoveDelta = {\n            x: Math.abs(Math.round(event.pageX) - (triggerPointerDownPosRef.current?.x ?? 0)),\n            y: Math.abs(Math.round(event.pageY) - (triggerPointerDownPosRef.current?.y ?? 0))\n          };\n        };\n        const handlePointerUp = (event) => {\n          if (pointerMoveDelta.x <= 10 && pointerMoveDelta.y <= 10) {\n            event.preventDefault();\n          } else {\n            if (!content.contains(event.target)) {\n              onOpenChange(false);\n            }\n          }\n          document.removeEventListener(\"pointermove\", handlePointerMove);\n          triggerPointerDownPosRef.current = null;\n        };\n        if (triggerPointerDownPosRef.current !== null) {\n          document.addEventListener(\"pointermove\", handlePointerMove);\n          document.addEventListener(\"pointerup\", handlePointerUp, { capture: true, once: true });\n        }\n        return () => {\n          document.removeEventListener(\"pointermove\", handlePointerMove);\n          document.removeEventListener(\"pointerup\", handlePointerUp, { capture: true });\n        };\n      }\n    }, [content, onOpenChange, triggerPointerDownPosRef]);\n    React.useEffect(() => {\n      const close = () => onOpenChange(false);\n      window.addEventListener(\"blur\", close);\n      window.addEventListener(\"resize\", close);\n      return () => {\n        window.removeEventListener(\"blur\", close);\n        window.removeEventListener(\"resize\", close);\n      };\n    }, [onOpenChange]);\n    const [searchRef, handleTypeaheadSearch] = useTypeaheadSearch((search) => {\n      const enabledItems = getItems().filter((item) => !item.disabled);\n      const currentItem = enabledItems.find((item) => item.ref.current === document.activeElement);\n      const nextItem = findNextItem(enabledItems, search, currentItem);\n      if (nextItem) {\n        setTimeout(() => nextItem.ref.current.focus());\n      }\n    });\n    const itemRefCallback = React.useCallback(\n      (node, value, disabled) => {\n        const isFirstValidItem = !firstValidItemFoundRef.current && !disabled;\n        const isSelectedItem = context.value !== void 0 && context.value === value;\n        if (isSelectedItem || isFirstValidItem) {\n          setSelectedItem(node);\n          if (isFirstValidItem) firstValidItemFoundRef.current = true;\n        }\n      },\n      [context.value]\n    );\n    const handleItemLeave = React.useCallback(() => content?.focus(), [content]);\n    const itemTextRefCallback = React.useCallback(\n      (node, value, disabled) => {\n        const isFirstValidItem = !firstValidItemFoundRef.current && !disabled;\n        const isSelectedItem = context.value !== void 0 && context.value === value;\n        if (isSelectedItem || isFirstValidItem) {\n          setSelectedItemText(node);\n        }\n      },\n      [context.value]\n    );\n    const SelectPosition = position === \"popper\" ? SelectPopperPosition : SelectItemAlignedPosition;\n    const popperContentProps = SelectPosition === SelectPopperPosition ? {\n      side,\n      sideOffset,\n      align,\n      alignOffset,\n      arrowPadding,\n      collisionBoundary,\n      collisionPadding,\n      sticky,\n      hideWhenDetached,\n      avoidCollisions\n    } : {};\n    return /* @__PURE__ */ jsx(\n      SelectContentProvider,\n      {\n        scope: __scopeSelect,\n        content,\n        viewport,\n        onViewportChange: setViewport,\n        itemRefCallback,\n        selectedItem,\n        onItemLeave: handleItemLeave,\n        itemTextRefCallback,\n        focusSelectedItem,\n        selectedItemText,\n        position,\n        isPositioned,\n        searchRef,\n        children: /* @__PURE__ */ jsx(RemoveScroll, { as: Slot, allowPinchZoom: true, children: /* @__PURE__ */ jsx(\n          FocusScope,\n          {\n            asChild: true,\n            trapped: context.open,\n            onMountAutoFocus: (event) => {\n              event.preventDefault();\n            },\n            onUnmountAutoFocus: composeEventHandlers(onCloseAutoFocus, (event) => {\n              context.trigger?.focus({ preventScroll: true });\n              event.preventDefault();\n            }),\n            children: /* @__PURE__ */ jsx(\n              DismissableLayer,\n              {\n                asChild: true,\n                disableOutsidePointerEvents: true,\n                onEscapeKeyDown,\n                onPointerDownOutside,\n                onFocusOutside: (event) => event.preventDefault(),\n                onDismiss: () => context.onOpenChange(false),\n                children: /* @__PURE__ */ jsx(\n                  SelectPosition,\n                  {\n                    role: \"listbox\",\n                    id: context.contentId,\n                    \"data-state\": context.open ? \"open\" : \"closed\",\n                    dir: context.dir,\n                    onContextMenu: (event) => event.preventDefault(),\n                    ...contentProps,\n                    ...popperContentProps,\n                    onPlaced: () => setIsPositioned(true),\n                    ref: composedRefs,\n                    style: {\n                      // flex layout so we can place the scroll buttons properly\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      // reset the outline by default as the content MAY get focused\n                      outline: \"none\",\n                      ...contentProps.style\n                    },\n                    onKeyDown: composeEventHandlers(contentProps.onKeyDown, (event) => {\n                      const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n                      if (event.key === \"Tab\") event.preventDefault();\n                      if (!isModifierKey && event.key.length === 1) handleTypeaheadSearch(event.key);\n                      if ([\"ArrowUp\", \"ArrowDown\", \"Home\", \"End\"].includes(event.key)) {\n                        const items = getItems().filter((item) => !item.disabled);\n                        let candidateNodes = items.map((item) => item.ref.current);\n                        if ([\"ArrowUp\", \"End\"].includes(event.key)) {\n                          candidateNodes = candidateNodes.slice().reverse();\n                        }\n                        if ([\"ArrowUp\", \"ArrowDown\"].includes(event.key)) {\n                          const currentElement = event.target;\n                          const currentIndex = candidateNodes.indexOf(currentElement);\n                          candidateNodes = candidateNodes.slice(currentIndex + 1);\n                        }\n                        setTimeout(() => focusFirst(candidateNodes));\n                        event.preventDefault();\n                      }\n                    })\n                  }\n                )\n              }\n            )\n          }\n        ) })\n      }\n    );\n  }\n);\nSelectContentImpl.displayName = CONTENT_IMPL_NAME;\nvar ITEM_ALIGNED_POSITION_NAME = \"SelectItemAlignedPosition\";\nvar SelectItemAlignedPosition = React.forwardRef((props, forwardedRef) => {\n  const { __scopeSelect, onPlaced, ...popperProps } = props;\n  const context = useSelectContext(CONTENT_NAME, __scopeSelect);\n  const contentContext = useSelectContentContext(CONTENT_NAME, __scopeSelect);\n  const [contentWrapper, setContentWrapper] = React.useState(null);\n  const [content, setContent] = React.useState(null);\n  const composedRefs = useComposedRefs(forwardedRef, (node) => setContent(node));\n  const getItems = useCollection(__scopeSelect);\n  const shouldExpandOnScrollRef = React.useRef(false);\n  const shouldRepositionRef = React.useRef(true);\n  const { viewport, selectedItem, selectedItemText, focusSelectedItem } = contentContext;\n  const position = React.useCallback(() => {\n    if (context.trigger && context.valueNode && contentWrapper && content && viewport && selectedItem && selectedItemText) {\n      const triggerRect = context.trigger.getBoundingClientRect();\n      const contentRect = content.getBoundingClientRect();\n      const valueNodeRect = context.valueNode.getBoundingClientRect();\n      const itemTextRect = selectedItemText.getBoundingClientRect();\n      if (context.dir !== \"rtl\") {\n        const itemTextOffset = itemTextRect.left - contentRect.left;\n        const left = valueNodeRect.left - itemTextOffset;\n        const leftDelta = triggerRect.left - left;\n        const minContentWidth = triggerRect.width + leftDelta;\n        const contentWidth = Math.max(minContentWidth, contentRect.width);\n        const rightEdge = window.innerWidth - CONTENT_MARGIN;\n        const clampedLeft = clamp(left, [\n          CONTENT_MARGIN,\n          // Prevents the content from going off the starting edge of the\n          // viewport. It may still go off the ending edge, but this can be\n          // controlled by the user since they may want to manage overflow in a\n          // specific way.\n          // https://github.com/radix-ui/primitives/issues/2049\n          Math.max(CONTENT_MARGIN, rightEdge - contentWidth)\n        ]);\n        contentWrapper.style.minWidth = minContentWidth + \"px\";\n        contentWrapper.style.left = clampedLeft + \"px\";\n      } else {\n        const itemTextOffset = contentRect.right - itemTextRect.right;\n        const right = window.innerWidth - valueNodeRect.right - itemTextOffset;\n        const rightDelta = window.innerWidth - triggerRect.right - right;\n        const minContentWidth = triggerRect.width + rightDelta;\n        const contentWidth = Math.max(minContentWidth, contentRect.width);\n        const leftEdge = window.innerWidth - CONTENT_MARGIN;\n        const clampedRight = clamp(right, [\n          CONTENT_MARGIN,\n          Math.max(CONTENT_MARGIN, leftEdge - contentWidth)\n        ]);\n        contentWrapper.style.minWidth = minContentWidth + \"px\";\n        contentWrapper.style.right = clampedRight + \"px\";\n      }\n      const items = getItems();\n      const availableHeight = window.innerHeight - CONTENT_MARGIN * 2;\n      const itemsHeight = viewport.scrollHeight;\n      const contentStyles = window.getComputedStyle(content);\n      const contentBorderTopWidth = parseInt(contentStyles.borderTopWidth, 10);\n      const contentPaddingTop = parseInt(contentStyles.paddingTop, 10);\n      const contentBorderBottomWidth = parseInt(contentStyles.borderBottomWidth, 10);\n      const contentPaddingBottom = parseInt(contentStyles.paddingBottom, 10);\n      const fullContentHeight = contentBorderTopWidth + contentPaddingTop + itemsHeight + contentPaddingBottom + contentBorderBottomWidth;\n      const minContentHeight = Math.min(selectedItem.offsetHeight * 5, fullContentHeight);\n      const viewportStyles = window.getComputedStyle(viewport);\n      const viewportPaddingTop = parseInt(viewportStyles.paddingTop, 10);\n      const viewportPaddingBottom = parseInt(viewportStyles.paddingBottom, 10);\n      const topEdgeToTriggerMiddle = triggerRect.top + triggerRect.height / 2 - CONTENT_MARGIN;\n      const triggerMiddleToBottomEdge = availableHeight - topEdgeToTriggerMiddle;\n      const selectedItemHalfHeight = selectedItem.offsetHeight / 2;\n      const itemOffsetMiddle = selectedItem.offsetTop + selectedItemHalfHeight;\n      const contentTopToItemMiddle = contentBorderTopWidth + contentPaddingTop + itemOffsetMiddle;\n      const itemMiddleToContentBottom = fullContentHeight - contentTopToItemMiddle;\n      const willAlignWithoutTopOverflow = contentTopToItemMiddle <= topEdgeToTriggerMiddle;\n      if (willAlignWithoutTopOverflow) {\n        const isLastItem = items.length > 0 && selectedItem === items[items.length - 1].ref.current;\n        contentWrapper.style.bottom = \"0px\";\n        const viewportOffsetBottom = content.clientHeight - viewport.offsetTop - viewport.offsetHeight;\n        const clampedTriggerMiddleToBottomEdge = Math.max(\n          triggerMiddleToBottomEdge,\n          selectedItemHalfHeight + // viewport might have padding bottom, include it to avoid a scrollable viewport\n          (isLastItem ? viewportPaddingBottom : 0) + viewportOffsetBottom + contentBorderBottomWidth\n        );\n        const height = contentTopToItemMiddle + clampedTriggerMiddleToBottomEdge;\n        contentWrapper.style.height = height + \"px\";\n      } else {\n        const isFirstItem = items.length > 0 && selectedItem === items[0].ref.current;\n        contentWrapper.style.top = \"0px\";\n        const clampedTopEdgeToTriggerMiddle = Math.max(\n          topEdgeToTriggerMiddle,\n          contentBorderTopWidth + viewport.offsetTop + // viewport might have padding top, include it to avoid a scrollable viewport\n          (isFirstItem ? viewportPaddingTop : 0) + selectedItemHalfHeight\n        );\n        const height = clampedTopEdgeToTriggerMiddle + itemMiddleToContentBottom;\n        contentWrapper.style.height = height + \"px\";\n        viewport.scrollTop = contentTopToItemMiddle - topEdgeToTriggerMiddle + viewport.offsetTop;\n      }\n      contentWrapper.style.margin = `${CONTENT_MARGIN}px 0`;\n      contentWrapper.style.minHeight = minContentHeight + \"px\";\n      contentWrapper.style.maxHeight = availableHeight + \"px\";\n      onPlaced?.();\n      requestAnimationFrame(() => shouldExpandOnScrollRef.current = true);\n    }\n  }, [\n    getItems,\n    context.trigger,\n    context.valueNode,\n    contentWrapper,\n    content,\n    viewport,\n    selectedItem,\n    selectedItemText,\n    context.dir,\n    onPlaced\n  ]);\n  useLayoutEffect(() => position(), [position]);\n  const [contentZIndex, setContentZIndex] = React.useState();\n  useLayoutEffect(() => {\n    if (content) setContentZIndex(window.getComputedStyle(content).zIndex);\n  }, [content]);\n  const handleScrollButtonChange = React.useCallback(\n    (node) => {\n      if (node && shouldRepositionRef.current === true) {\n        position();\n        focusSelectedItem?.();\n        shouldRepositionRef.current = false;\n      }\n    },\n    [position, focusSelectedItem]\n  );\n  return /* @__PURE__ */ jsx(\n    SelectViewportProvider,\n    {\n      scope: __scopeSelect,\n      contentWrapper,\n      shouldExpandOnScrollRef,\n      onScrollButtonChange: handleScrollButtonChange,\n      children: /* @__PURE__ */ jsx(\n        \"div\",\n        {\n          ref: setContentWrapper,\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            position: \"fixed\",\n            zIndex: contentZIndex\n          },\n          children: /* @__PURE__ */ jsx(\n            Primitive.div,\n            {\n              ...popperProps,\n              ref: composedRefs,\n              style: {\n                // When we get the height of the content, it includes borders. If we were to set\n                // the height without having `boxSizing: 'border-box'` it would be too big.\n                boxSizing: \"border-box\",\n                // We need to ensure the content doesn't get taller than the wrapper\n                maxHeight: \"100%\",\n                ...popperProps.style\n              }\n            }\n          )\n        }\n      )\n    }\n  );\n});\nSelectItemAlignedPosition.displayName = ITEM_ALIGNED_POSITION_NAME;\nvar POPPER_POSITION_NAME = \"SelectPopperPosition\";\nvar SelectPopperPosition = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeSelect,\n    align = \"start\",\n    collisionPadding = CONTENT_MARGIN,\n    ...popperProps\n  } = props;\n  const popperScope = usePopperScope(__scopeSelect);\n  return /* @__PURE__ */ jsx(\n    PopperPrimitive.Content,\n    {\n      ...popperScope,\n      ...popperProps,\n      ref: forwardedRef,\n      align,\n      collisionPadding,\n      style: {\n        // Ensure border-box for floating-ui calculations\n        boxSizing: \"border-box\",\n        ...popperProps.style,\n        // re-namespace exposed content custom properties\n        ...{\n          \"--radix-select-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n          \"--radix-select-content-available-width\": \"var(--radix-popper-available-width)\",\n          \"--radix-select-content-available-height\": \"var(--radix-popper-available-height)\",\n          \"--radix-select-trigger-width\": \"var(--radix-popper-anchor-width)\",\n          \"--radix-select-trigger-height\": \"var(--radix-popper-anchor-height)\"\n        }\n      }\n    }\n  );\n});\nSelectPopperPosition.displayName = POPPER_POSITION_NAME;\nvar [SelectViewportProvider, useSelectViewportContext] = createSelectContext(CONTENT_NAME, {});\nvar VIEWPORT_NAME = \"SelectViewport\";\nvar SelectViewport = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, nonce, ...viewportProps } = props;\n    const contentContext = useSelectContentContext(VIEWPORT_NAME, __scopeSelect);\n    const viewportContext = useSelectViewportContext(VIEWPORT_NAME, __scopeSelect);\n    const composedRefs = useComposedRefs(forwardedRef, contentContext.onViewportChange);\n    const prevScrollTopRef = React.useRef(0);\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(\n        \"style\",\n        {\n          dangerouslySetInnerHTML: {\n            __html: `[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}`\n          },\n          nonce\n        }\n      ),\n      /* @__PURE__ */ jsx(Collection.Slot, { scope: __scopeSelect, children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          \"data-radix-select-viewport\": \"\",\n          role: \"presentation\",\n          ...viewportProps,\n          ref: composedRefs,\n          style: {\n            // we use position: 'relative' here on the `viewport` so that when we call\n            // `selectedItem.offsetTop` in calculations, the offset is relative to the viewport\n            // (independent of the scrollUpButton).\n            position: \"relative\",\n            flex: 1,\n            // Viewport should only be scrollable in the vertical direction.\n            // This won't work in vertical writing modes, so we'll need to\n            // revisit this if/when that is supported\n            // https://developer.chrome.com/blog/vertical-form-controls\n            overflow: \"hidden auto\",\n            ...viewportProps.style\n          },\n          onScroll: composeEventHandlers(viewportProps.onScroll, (event) => {\n            const viewport = event.currentTarget;\n            const { contentWrapper, shouldExpandOnScrollRef } = viewportContext;\n            if (shouldExpandOnScrollRef?.current && contentWrapper) {\n              const scrolledBy = Math.abs(prevScrollTopRef.current - viewport.scrollTop);\n              if (scrolledBy > 0) {\n                const availableHeight = window.innerHeight - CONTENT_MARGIN * 2;\n                const cssMinHeight = parseFloat(contentWrapper.style.minHeight);\n                const cssHeight = parseFloat(contentWrapper.style.height);\n                const prevHeight = Math.max(cssMinHeight, cssHeight);\n                if (prevHeight < availableHeight) {\n                  const nextHeight = prevHeight + scrolledBy;\n                  const clampedNextHeight = Math.min(availableHeight, nextHeight);\n                  const heightDiff = nextHeight - clampedNextHeight;\n                  contentWrapper.style.height = clampedNextHeight + \"px\";\n                  if (contentWrapper.style.bottom === \"0px\") {\n                    viewport.scrollTop = heightDiff > 0 ? heightDiff : 0;\n                    contentWrapper.style.justifyContent = \"flex-end\";\n                  }\n                }\n              }\n            }\n            prevScrollTopRef.current = viewport.scrollTop;\n          })\n        }\n      ) })\n    ] });\n  }\n);\nSelectViewport.displayName = VIEWPORT_NAME;\nvar GROUP_NAME = \"SelectGroup\";\nvar [SelectGroupContextProvider, useSelectGroupContext] = createSelectContext(GROUP_NAME);\nvar SelectGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...groupProps } = props;\n    const groupId = useId();\n    return /* @__PURE__ */ jsx(SelectGroupContextProvider, { scope: __scopeSelect, id: groupId, children: /* @__PURE__ */ jsx(Primitive.div, { role: \"group\", \"aria-labelledby\": groupId, ...groupProps, ref: forwardedRef }) });\n  }\n);\nSelectGroup.displayName = GROUP_NAME;\nvar LABEL_NAME = \"SelectLabel\";\nvar SelectLabel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...labelProps } = props;\n    const groupContext = useSelectGroupContext(LABEL_NAME, __scopeSelect);\n    return /* @__PURE__ */ jsx(Primitive.div, { id: groupContext.id, ...labelProps, ref: forwardedRef });\n  }\n);\nSelectLabel.displayName = LABEL_NAME;\nvar ITEM_NAME = \"SelectItem\";\nvar [SelectItemContextProvider, useSelectItemContext] = createSelectContext(ITEM_NAME);\nvar SelectItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSelect,\n      value,\n      disabled = false,\n      textValue: textValueProp,\n      ...itemProps\n    } = props;\n    const context = useSelectContext(ITEM_NAME, __scopeSelect);\n    const contentContext = useSelectContentContext(ITEM_NAME, __scopeSelect);\n    const isSelected = context.value === value;\n    const [textValue, setTextValue] = React.useState(textValueProp ?? \"\");\n    const [isFocused, setIsFocused] = React.useState(false);\n    const composedRefs = useComposedRefs(\n      forwardedRef,\n      (node) => contentContext.itemRefCallback?.(node, value, disabled)\n    );\n    const textId = useId();\n    const pointerTypeRef = React.useRef(\"touch\");\n    const handleSelect = () => {\n      if (!disabled) {\n        context.onValueChange(value);\n        context.onOpenChange(false);\n      }\n    };\n    if (value === \"\") {\n      throw new Error(\n        \"A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.\"\n      );\n    }\n    return /* @__PURE__ */ jsx(\n      SelectItemContextProvider,\n      {\n        scope: __scopeSelect,\n        value,\n        disabled,\n        textId,\n        isSelected,\n        onItemTextChange: React.useCallback((node) => {\n          setTextValue((prevTextValue) => prevTextValue || (node?.textContent ?? \"\").trim());\n        }, []),\n        children: /* @__PURE__ */ jsx(\n          Collection.ItemSlot,\n          {\n            scope: __scopeSelect,\n            value,\n            disabled,\n            textValue,\n            children: /* @__PURE__ */ jsx(\n              Primitive.div,\n              {\n                role: \"option\",\n                \"aria-labelledby\": textId,\n                \"data-highlighted\": isFocused ? \"\" : void 0,\n                \"aria-selected\": isSelected && isFocused,\n                \"data-state\": isSelected ? \"checked\" : \"unchecked\",\n                \"aria-disabled\": disabled || void 0,\n                \"data-disabled\": disabled ? \"\" : void 0,\n                tabIndex: disabled ? void 0 : -1,\n                ...itemProps,\n                ref: composedRefs,\n                onFocus: composeEventHandlers(itemProps.onFocus, () => setIsFocused(true)),\n                onBlur: composeEventHandlers(itemProps.onBlur, () => setIsFocused(false)),\n                onClick: composeEventHandlers(itemProps.onClick, () => {\n                  if (pointerTypeRef.current !== \"mouse\") handleSelect();\n                }),\n                onPointerUp: composeEventHandlers(itemProps.onPointerUp, () => {\n                  if (pointerTypeRef.current === \"mouse\") handleSelect();\n                }),\n                onPointerDown: composeEventHandlers(itemProps.onPointerDown, (event) => {\n                  pointerTypeRef.current = event.pointerType;\n                }),\n                onPointerMove: composeEventHandlers(itemProps.onPointerMove, (event) => {\n                  pointerTypeRef.current = event.pointerType;\n                  if (disabled) {\n                    contentContext.onItemLeave?.();\n                  } else if (pointerTypeRef.current === \"mouse\") {\n                    event.currentTarget.focus({ preventScroll: true });\n                  }\n                }),\n                onPointerLeave: composeEventHandlers(itemProps.onPointerLeave, (event) => {\n                  if (event.currentTarget === document.activeElement) {\n                    contentContext.onItemLeave?.();\n                  }\n                }),\n                onKeyDown: composeEventHandlers(itemProps.onKeyDown, (event) => {\n                  const isTypingAhead = contentContext.searchRef?.current !== \"\";\n                  if (isTypingAhead && event.key === \" \") return;\n                  if (SELECTION_KEYS.includes(event.key)) handleSelect();\n                  if (event.key === \" \") event.preventDefault();\n                })\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nSelectItem.displayName = ITEM_NAME;\nvar ITEM_TEXT_NAME = \"SelectItemText\";\nvar SelectItemText = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, className, style, ...itemTextProps } = props;\n    const context = useSelectContext(ITEM_TEXT_NAME, __scopeSelect);\n    const contentContext = useSelectContentContext(ITEM_TEXT_NAME, __scopeSelect);\n    const itemContext = useSelectItemContext(ITEM_TEXT_NAME, __scopeSelect);\n    const nativeOptionsContext = useSelectNativeOptionsContext(ITEM_TEXT_NAME, __scopeSelect);\n    const [itemTextNode, setItemTextNode] = React.useState(null);\n    const composedRefs = useComposedRefs(\n      forwardedRef,\n      (node) => setItemTextNode(node),\n      itemContext.onItemTextChange,\n      (node) => contentContext.itemTextRefCallback?.(node, itemContext.value, itemContext.disabled)\n    );\n    const textContent = itemTextNode?.textContent;\n    const nativeOption = React.useMemo(\n      () => /* @__PURE__ */ jsx(\"option\", { value: itemContext.value, disabled: itemContext.disabled, children: textContent }, itemContext.value),\n      [itemContext.disabled, itemContext.value, textContent]\n    );\n    const { onNativeOptionAdd, onNativeOptionRemove } = nativeOptionsContext;\n    useLayoutEffect(() => {\n      onNativeOptionAdd(nativeOption);\n      return () => onNativeOptionRemove(nativeOption);\n    }, [onNativeOptionAdd, onNativeOptionRemove, nativeOption]);\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(Primitive.span, { id: itemContext.textId, ...itemTextProps, ref: composedRefs }),\n      itemContext.isSelected && context.valueNode && !context.valueNodeHasChildren ? ReactDOM.createPortal(itemTextProps.children, context.valueNode) : null\n    ] });\n  }\n);\nSelectItemText.displayName = ITEM_TEXT_NAME;\nvar ITEM_INDICATOR_NAME = \"SelectItemIndicator\";\nvar SelectItemIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...itemIndicatorProps } = props;\n    const itemContext = useSelectItemContext(ITEM_INDICATOR_NAME, __scopeSelect);\n    return itemContext.isSelected ? /* @__PURE__ */ jsx(Primitive.span, { \"aria-hidden\": true, ...itemIndicatorProps, ref: forwardedRef }) : null;\n  }\n);\nSelectItemIndicator.displayName = ITEM_INDICATOR_NAME;\nvar SCROLL_UP_BUTTON_NAME = \"SelectScrollUpButton\";\nvar SelectScrollUpButton = React.forwardRef((props, forwardedRef) => {\n  const contentContext = useSelectContentContext(SCROLL_UP_BUTTON_NAME, props.__scopeSelect);\n  const viewportContext = useSelectViewportContext(SCROLL_UP_BUTTON_NAME, props.__scopeSelect);\n  const [canScrollUp, setCanScrollUp] = React.useState(false);\n  const composedRefs = useComposedRefs(forwardedRef, viewportContext.onScrollButtonChange);\n  useLayoutEffect(() => {\n    if (contentContext.viewport && contentContext.isPositioned) {\n      let handleScroll2 = function() {\n        const canScrollUp2 = viewport.scrollTop > 0;\n        setCanScrollUp(canScrollUp2);\n      };\n      var handleScroll = handleScroll2;\n      const viewport = contentContext.viewport;\n      handleScroll2();\n      viewport.addEventListener(\"scroll\", handleScroll2);\n      return () => viewport.removeEventListener(\"scroll\", handleScroll2);\n    }\n  }, [contentContext.viewport, contentContext.isPositioned]);\n  return canScrollUp ? /* @__PURE__ */ jsx(\n    SelectScrollButtonImpl,\n    {\n      ...props,\n      ref: composedRefs,\n      onAutoScroll: () => {\n        const { viewport, selectedItem } = contentContext;\n        if (viewport && selectedItem) {\n          viewport.scrollTop = viewport.scrollTop - selectedItem.offsetHeight;\n        }\n      }\n    }\n  ) : null;\n});\nSelectScrollUpButton.displayName = SCROLL_UP_BUTTON_NAME;\nvar SCROLL_DOWN_BUTTON_NAME = \"SelectScrollDownButton\";\nvar SelectScrollDownButton = React.forwardRef((props, forwardedRef) => {\n  const contentContext = useSelectContentContext(SCROLL_DOWN_BUTTON_NAME, props.__scopeSelect);\n  const viewportContext = useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME, props.__scopeSelect);\n  const [canScrollDown, setCanScrollDown] = React.useState(false);\n  const composedRefs = useComposedRefs(forwardedRef, viewportContext.onScrollButtonChange);\n  useLayoutEffect(() => {\n    if (contentContext.viewport && contentContext.isPositioned) {\n      let handleScroll2 = function() {\n        const maxScroll = viewport.scrollHeight - viewport.clientHeight;\n        const canScrollDown2 = Math.ceil(viewport.scrollTop) < maxScroll;\n        setCanScrollDown(canScrollDown2);\n      };\n      var handleScroll = handleScroll2;\n      const viewport = contentContext.viewport;\n      handleScroll2();\n      viewport.addEventListener(\"scroll\", handleScroll2);\n      return () => viewport.removeEventListener(\"scroll\", handleScroll2);\n    }\n  }, [contentContext.viewport, contentContext.isPositioned]);\n  return canScrollDown ? /* @__PURE__ */ jsx(\n    SelectScrollButtonImpl,\n    {\n      ...props,\n      ref: composedRefs,\n      onAutoScroll: () => {\n        const { viewport, selectedItem } = contentContext;\n        if (viewport && selectedItem) {\n          viewport.scrollTop = viewport.scrollTop + selectedItem.offsetHeight;\n        }\n      }\n    }\n  ) : null;\n});\nSelectScrollDownButton.displayName = SCROLL_DOWN_BUTTON_NAME;\nvar SelectScrollButtonImpl = React.forwardRef((props, forwardedRef) => {\n  const { __scopeSelect, onAutoScroll, ...scrollIndicatorProps } = props;\n  const contentContext = useSelectContentContext(\"SelectScrollButton\", __scopeSelect);\n  const autoScrollTimerRef = React.useRef(null);\n  const getItems = useCollection(__scopeSelect);\n  const clearAutoScrollTimer = React.useCallback(() => {\n    if (autoScrollTimerRef.current !== null) {\n      window.clearInterval(autoScrollTimerRef.current);\n      autoScrollTimerRef.current = null;\n    }\n  }, []);\n  React.useEffect(() => {\n    return () => clearAutoScrollTimer();\n  }, [clearAutoScrollTimer]);\n  useLayoutEffect(() => {\n    const activeItem = getItems().find((item) => item.ref.current === document.activeElement);\n    activeItem?.ref.current?.scrollIntoView({ block: \"nearest\" });\n  }, [getItems]);\n  return /* @__PURE__ */ jsx(\n    Primitive.div,\n    {\n      \"aria-hidden\": true,\n      ...scrollIndicatorProps,\n      ref: forwardedRef,\n      style: { flexShrink: 0, ...scrollIndicatorProps.style },\n      onPointerDown: composeEventHandlers(scrollIndicatorProps.onPointerDown, () => {\n        if (autoScrollTimerRef.current === null) {\n          autoScrollTimerRef.current = window.setInterval(onAutoScroll, 50);\n        }\n      }),\n      onPointerMove: composeEventHandlers(scrollIndicatorProps.onPointerMove, () => {\n        contentContext.onItemLeave?.();\n        if (autoScrollTimerRef.current === null) {\n          autoScrollTimerRef.current = window.setInterval(onAutoScroll, 50);\n        }\n      }),\n      onPointerLeave: composeEventHandlers(scrollIndicatorProps.onPointerLeave, () => {\n        clearAutoScrollTimer();\n      })\n    }\n  );\n});\nvar SEPARATOR_NAME = \"SelectSeparator\";\nvar SelectSeparator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...separatorProps } = props;\n    return /* @__PURE__ */ jsx(Primitive.div, { \"aria-hidden\": true, ...separatorProps, ref: forwardedRef });\n  }\n);\nSelectSeparator.displayName = SEPARATOR_NAME;\nvar ARROW_NAME = \"SelectArrow\";\nvar SelectArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSelect, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeSelect);\n    const context = useSelectContext(ARROW_NAME, __scopeSelect);\n    const contentContext = useSelectContentContext(ARROW_NAME, __scopeSelect);\n    return context.open && contentContext.position === \"popper\" ? /* @__PURE__ */ jsx(PopperPrimitive.Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef }) : null;\n  }\n);\nSelectArrow.displayName = ARROW_NAME;\nvar BUBBLE_INPUT_NAME = \"SelectBubbleInput\";\nvar SelectBubbleInput = React.forwardRef(\n  ({ __scopeSelect, value, ...props }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const prevValue = usePrevious(value);\n    React.useEffect(() => {\n      const select = ref.current;\n      if (!select) return;\n      const selectProto = window.HTMLSelectElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        selectProto,\n        \"value\"\n      );\n      const setValue = descriptor.set;\n      if (prevValue !== value && setValue) {\n        const event = new Event(\"change\", { bubbles: true });\n        setValue.call(select, value);\n        select.dispatchEvent(event);\n      }\n    }, [prevValue, value]);\n    return /* @__PURE__ */ jsx(\n      Primitive.select,\n      {\n        ...props,\n        style: { ...VISUALLY_HIDDEN_STYLES, ...props.style },\n        ref: composedRefs,\n        defaultValue: value\n      }\n    );\n  }\n);\nSelectBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction shouldShowPlaceholder(value) {\n  return value === \"\" || value === void 0;\n}\nfunction useTypeaheadSearch(onSearchChange) {\n  const handleSearchChange = useCallbackRef(onSearchChange);\n  const searchRef = React.useRef(\"\");\n  const timerRef = React.useRef(0);\n  const handleTypeaheadSearch = React.useCallback(\n    (key) => {\n      const search = searchRef.current + key;\n      handleSearchChange(search);\n      (function updateSearch(value) {\n        searchRef.current = value;\n        window.clearTimeout(timerRef.current);\n        if (value !== \"\") timerRef.current = window.setTimeout(() => updateSearch(\"\"), 1e3);\n      })(search);\n    },\n    [handleSearchChange]\n  );\n  const resetTypeahead = React.useCallback(() => {\n    searchRef.current = \"\";\n    window.clearTimeout(timerRef.current);\n  }, []);\n  React.useEffect(() => {\n    return () => window.clearTimeout(timerRef.current);\n  }, []);\n  return [searchRef, handleTypeaheadSearch, resetTypeahead];\n}\nfunction findNextItem(items, search, currentItem) {\n  const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);\n  const normalizedSearch = isRepeated ? search[0] : search;\n  const currentItemIndex = currentItem ? items.indexOf(currentItem) : -1;\n  let wrappedItems = wrapArray(items, Math.max(currentItemIndex, 0));\n  const excludeCurrentItem = normalizedSearch.length === 1;\n  if (excludeCurrentItem) wrappedItems = wrappedItems.filter((v) => v !== currentItem);\n  const nextItem = wrappedItems.find(\n    (item) => item.textValue.toLowerCase().startsWith(normalizedSearch.toLowerCase())\n  );\n  return nextItem !== currentItem ? nextItem : void 0;\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\nvar Root2 = Select;\nvar Trigger = SelectTrigger;\nvar Value = SelectValue;\nvar Icon = SelectIcon;\nvar Portal = SelectPortal;\nvar Content2 = SelectContent;\nvar Viewport = SelectViewport;\nvar Group = SelectGroup;\nvar Label = SelectLabel;\nvar Item = SelectItem;\nvar ItemText = SelectItemText;\nvar ItemIndicator = SelectItemIndicator;\nvar ScrollUpButton = SelectScrollUpButton;\nvar ScrollDownButton = SelectScrollDownButton;\nvar Separator = SelectSeparator;\nvar Arrow2 = SelectArrow;\nexport {\n  Arrow2 as Arrow,\n  Content2 as Content,\n  Group,\n  Icon,\n  Item,\n  ItemIndicator,\n  ItemText,\n  Label,\n  Portal,\n  Root2 as Root,\n  ScrollDownButton,\n  ScrollUpButton,\n  Select,\n  SelectArrow,\n  SelectContent,\n  SelectGroup,\n  SelectIcon,\n  SelectItem,\n  SelectItemIndicator,\n  SelectItemText,\n  SelectLabel,\n  SelectPortal,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n  SelectViewport,\n  Separator,\n  Trigger,\n  Value,\n  Viewport,\n  createSelectScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","import React, { useMemo, useState } from 'react';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { Employee, RiskLevel } from '../types/employee';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\n\ninterface EmployeeNetworkGraphProps {\n  employees: Employee[];\n  availableDepartments: string[];\n  isLoading?: boolean;\n}\n\ninterface NetworkNode {\n  id: string;\n  name: string;\n  department: string;\n  position: string;\n  riskLevel: RiskLevel;\n  churnProbability: number;\n  status: string;\n  isHighRisk: boolean;\n  isResigned: boolean;\n  age?: number;\n  managerId?: string | null;\n  x: number;\n  y: number;\n}\n\ninterface NetworkEdge {\n  source: string;\n  target: string;\n  weight: number;\n  reasons: string[];\n  isRiskPath: boolean;\n}\n\ninterface ClusterMeta {\n  name: string;\n  x: number;\n  y: number;\n}\n\nconst riskColorMap: Record<RiskLevel, string> = {\n  [RiskLevel.High]: '#ef4444',\n  [RiskLevel.Medium]: '#f59e0b',\n  [RiskLevel.Low]: '#10b981'\n};\n\nconst defaultDepartments = ['All'];\n\nconst MAX_DEPARTMENT_EDGES = 80;\nconst MAX_PEER_EDGES_PER_GROUP = 6;\nconst MAX_EDGES_TOTAL = 140;\nconst MAX_NODES = 140;\n\nfunction prioritizeEmployees(employees: Employee[]): Employee[] {\n  if (employees.length <= MAX_NODES) {\n    return employees;\n  }\n\n  const riskRank: Record<RiskLevel, number> = {\n    [RiskLevel.High]: 3,\n    [RiskLevel.Medium]: 2,\n    [RiskLevel.Low]: 1\n  };\n\n  const scored = employees.map((employee) => {\n    const riskLevel = employee.riskLevel || RiskLevel.Low;\n    const churn = typeof employee.churnProbability === 'number' ? employee.churnProbability : 0;\n    const isResigned = (employee.status || '').toLowerCase() !== 'active';\n    const score = (\n      (isResigned ? 4 : 0) +\n      (riskRank[riskLevel] || 0) +\n      churn\n    );\n    return { employee, score };\n  });\n\n  scored.sort((a, b) => b.score - a.score);\n  return scored.slice(0, MAX_NODES).map((entry) => entry.employee);\n}\n\nfunction computeAffinity(a: Employee, b: Employee) {\n  let weight = 0;\n  const reasons: string[] = [];\n\n  if (a.structure_name && b.structure_name && a.structure_name === b.structure_name) {\n    weight += 0.35;\n    reasons.push('Department');\n  }\n\n  const posA = (a.position || '').toLowerCase();\n  const posB = (b.position || '').toLowerCase();\n  if (posA && posB && (posA === posB || posA.includes(posB) || posB.includes(posA))) {\n    weight += 0.18;\n    reasons.push('Role');\n  }\n\n  if (typeof a.age === 'number' && typeof b.age === 'number') {\n    const diff = Math.abs(a.age - b.age);\n    if (diff <= 5) {\n      weight += 0.18;\n      reasons.push('Age 5');\n    } else if (diff <= 10) {\n      weight += 0.08;\n      reasons.push('Age 10');\n    }\n  }\n\n  const tenureDiff = Math.abs((Number(a.tenure) || 0) - (Number(b.tenure) || 0));\n  if (tenureDiff <= 1) {\n    weight += 0.08;\n    reasons.push('Tenure 1');\n  } else if (tenureDiff <= 3) {\n    weight += 0.04;\n    reasons.push('Tenure 3');\n  }\n\n  if (a.workLocation && b.workLocation && a.workLocation === b.workLocation) {\n    weight += 0.08;\n    reasons.push('Work location');\n  } else if (a.remotePreference && b.remotePreference && a.remotePreference === b.remotePreference) {\n    weight += 0.04;\n    reasons.push('Work mode');\n  }\n\n  if (weight === 0) {\n    weight = 0.1;\n  }\n\n  return {\n    weight: Math.min(0.9, weight),\n    reasons\n  };\n}\n\nfunction pruneGraph(\n  nodes: NetworkNode[],\n  edges: NetworkEdge[],\n  minDegree: number\n): { nodes: NetworkNode[]; edges: NetworkEdge[] } {\n  if (edges.length === 0) {\n    return { nodes: [], edges: [] };\n  }\n\n  const nodeMap = new Map(nodes.map((node) => [node.id, node]));\n  let currentEdges = edges.slice();\n  let currentIds = new Set(nodes.map((node) => node.id));\n  let changed = true;\n\n  while (changed) {\n    const degree = new Map<string, number>();\n    currentEdges.forEach((edge) => {\n      degree.set(edge.source, (degree.get(edge.source) || 0) + 1);\n      degree.set(edge.target, (degree.get(edge.target) || 0) + 1);\n    });\n\n    const keepIds = new Set<string>();\n    degree.forEach((count, id) => {\n      if (count >= minDegree) {\n        keepIds.add(id);\n      }\n    });\n\n    if (keepIds.size === 0) {\n      return { nodes: [], edges: [] };\n    }\n\n    changed = keepIds.size !== currentIds.size || [...keepIds].some((id) => !currentIds.has(id));\n    currentIds = keepIds;\n    currentEdges = currentEdges.filter(\n      (edge) => currentIds.has(edge.source) && currentIds.has(edge.target)\n    );\n  }\n\n  const finalNodes = [...currentIds]\n    .map((id) => nodeMap.get(id))\n    .filter((node): node is NetworkNode => Boolean(node));\n\n  return {\n    nodes: finalNodes,\n    edges: currentEdges\n  };\n}\n\nfunction buildNetwork(employees: Employee[]): { nodes: NetworkNode[]; edges: NetworkEdge[]; clusters: ClusterMeta[] } {\n  if (!employees.length) {\n    return { nodes: [], edges: [], clusters: [] };\n  }\n\n  let nodes: NetworkNode[] = employees.map((employee) => {\n    const riskLevel = employee.riskLevel || RiskLevel.Low;\n    const status = employee.status || 'Active';\n    const isResigned = status.toLowerCase() !== 'active';\n    const probability = typeof employee.churnProbability === 'number' ? employee.churnProbability : 0;\n\n    return {\n      id: employee.hr_code,\n      name: employee.full_name || employee.name || employee.hr_code,\n      department: employee.structure_name || 'Unknown',\n      position: employee.position || 'Unknown',\n      riskLevel,\n      churnProbability: probability,\n      status,\n      isHighRisk: riskLevel === RiskLevel.High,\n      isResigned,\n      age: employee.age,\n      managerId: employee.manager_id ?? null,\n      x: 0,\n      y: 0\n    };\n  });\n\n  const employeeById = new Map<string, Employee>();\n  employees.forEach((employee) => {\n    employeeById.set(employee.hr_code, employee);\n  });\n\n  const edgesMap = new Map<string, NetworkEdge>();\n\n  const addEdge = (source: string, target: string, weight: number, reasons: string[]) => {\n    if (!source || !target || source === target) {\n      return;\n    }\n    const key = source < target ? `${source}|${target}` : `${target}|${source}`;\n    const existing = edgesMap.get(key);\n    if (existing) {\n      existing.weight = Math.min(1, existing.weight + weight);\n      reasons.forEach((reason) => {\n        if (!existing.reasons.includes(reason)) {\n          existing.reasons.push(reason);\n        }\n      });\n    } else {\n      edgesMap.set(key, {\n        source,\n        target,\n        weight,\n        reasons: Array.from(new Set(reasons)),\n        isRiskPath: false\n      });\n    }\n  };\n\n  // Manager-report edges\n  employees.forEach((employee) => {\n    if (!employee.manager_id) {\n      return;\n    }\n    const managerKey = String(employee.manager_id).trim();\n    const manager = employeeById.get(managerKey);\n    if (manager) {\n      addEdge(employee.hr_code, manager.hr_code, 0.9, ['Manager link']);\n    }\n  });\n\n  // Peer groups by manager\n  const peersByManager = new Map<string, Employee[]>();\n  employees.forEach((employee) => {\n    if (!employee.manager_id) {\n      return;\n    }\n    const key = String(employee.manager_id).trim();\n    if (!peersByManager.has(key)) {\n      peersByManager.set(key, []);\n    }\n    peersByManager.get(key)!.push(employee);\n  });\n\n  peersByManager.forEach((group) => {\n    if (group.length < 2) {\n      return;\n    }\n\n    const seenPairs = new Set<string>();\n    let remaining = MAX_PEER_EDGES_PER_GROUP;\n\n    for (let i = 0; i < group.length && remaining > 0; i += 1) {\n      const employee = group[i];\n      const ranked = group\n        .slice(i + 1)\n        .map((candidate) => {\n          const affinity = computeAffinity(employee, candidate);\n          const reasons = Array.from(new Set(['Shared manager', ...affinity.reasons]));\n          return {\n            candidate,\n            weight: Math.max(0.4, affinity.weight),\n            reasons\n          };\n        })\n        .sort((a, b) => b.weight - a.weight)\n        .slice(0, 2);\n\n      ranked.forEach(({ candidate, weight, reasons }) => {\n        if (remaining <= 0) return;\n        const key = employee.hr_code < candidate.hr_code\n          ? `${employee.hr_code}|${candidate.hr_code}`\n          : `${candidate.hr_code}|${employee.hr_code}`;\n        if (!seenPairs.has(key)) {\n          addEdge(employee.hr_code, candidate.hr_code, weight, reasons);\n          seenPairs.add(key);\n          remaining -= 1;\n        }\n      });\n    }\n  });\n\n  // Department and similarity edges\n  const employeesByDept = new Map<string, Employee[]>();\n  employees.forEach((employee) => {\n    const dept = employee.structure_name || 'Unknown';\n    if (!employeesByDept.has(dept)) {\n      employeesByDept.set(dept, []);\n    }\n    employeesByDept.get(dept)!.push(employee);\n  });\n\n  let departmentEdgeCount = 0;\n  employeesByDept.forEach((group) => {\n    if (group.length < 2 || departmentEdgeCount >= MAX_DEPARTMENT_EDGES) {\n      return;\n    }\n\n    const seenPairs = new Set<string>();\n    for (let i = 0; i < group.length && departmentEdgeCount < MAX_DEPARTMENT_EDGES; i += 1) {\n      const employee = group[i];\n      const ranked = group\n        .slice(i + 1)\n        .map((candidate) => {\n          const affinity = computeAffinity(employee, candidate);\n          return {\n            candidate,\n            weight: affinity.weight,\n            reasons: affinity.reasons\n          };\n        })\n        .filter((entry) => entry.weight >= 0.18)\n        .sort((a, b) => b.weight - a.weight)\n        .slice(0, 2);\n\n      ranked.forEach(({ candidate, weight, reasons }) => {\n        if (departmentEdgeCount >= MAX_DEPARTMENT_EDGES) return;\n        const key = employee.hr_code < candidate.hr_code\n          ? `${employee.hr_code}|${candidate.hr_code}`\n          : `${candidate.hr_code}|${employee.hr_code}`;\n        if (!seenPairs.has(key)) {\n          addEdge(employee.hr_code, candidate.hr_code, weight, reasons);\n          seenPairs.add(key);\n          departmentEdgeCount += 1;\n        }\n      });\n    }\n  });\n\n  let edges = Array.from(edgesMap.values());\n\n  if (edges.length > MAX_EDGES_TOTAL) {\n    edges = edges\n      .sort((a, b) => b.weight - a.weight)\n      .slice(0, MAX_EDGES_TOTAL);\n  }\n\n  const pruned = pruneGraph(nodes, edges, 2);\n  if (!pruned.nodes.length) {\n    return { nodes: [], edges: [], clusters: [] };\n  }\n\n  nodes = pruned.nodes;\n  edges = pruned.edges;\n\n  const nodeLookup = new Map<string, NetworkNode>();\n  nodes.forEach((node) => nodeLookup.set(node.id, node));\n\n  edges.forEach((edge) => {\n    const source = nodeLookup.get(edge.source);\n    const target = nodeLookup.get(edge.target);\n    if (!source || !target) {\n      return;\n    }\n    const riskySource = source.isHighRisk || source.isResigned;\n    const riskyTarget = target.isHighRisk || target.isResigned;\n    edge.isRiskPath = (riskySource || riskyTarget) && edge.weight >= 0.5;\n  });\n\n  // Cluster layout\n  const clusterNames = Array.from(new Set(nodes.map((node) => node.department)));\n  const columnCount = Math.max(1, Math.ceil(Math.sqrt(clusterNames.length)));\n  const rowCount = Math.max(1, Math.ceil(clusterNames.length / columnCount));\n\n  const clusters: ClusterMeta[] = clusterNames.map((name, index) => {\n    const col = index % columnCount;\n    const row = Math.floor(index / columnCount);\n    const x = (col + 0.5) / columnCount;\n    const y = (row + 0.5) / rowCount;\n    return { name, x, y };\n  });\n\n  const nodesByDept = new Map<string, NetworkNode[]>();\n  nodes.forEach((node) => {\n    if (!nodesByDept.has(node.department)) {\n      nodesByDept.set(node.department, []);\n    }\n    nodesByDept.get(node.department)!.push(node);\n  });\n\n  clusters.forEach((cluster) => {\n    const members = nodesByDept.get(cluster.name) || [];\n    if (members.length === 1) {\n      const node = members[0];\n      node.x = cluster.x;\n      node.y = cluster.y;\n      return;\n    }\n\n    const radius = Math.min(0.18, 0.08 + members.length * 0.015);\n    members.forEach((node, index) => {\n      const angle = (2 * Math.PI * index) / members.length;\n      const offsetX = Math.cos(angle) * radius;\n      const offsetY = Math.sin(angle) * radius;\n      node.x = Math.max(0.05, Math.min(0.95, cluster.x + offsetX));\n      node.y = Math.max(0.05, Math.min(0.95, cluster.y + offsetY));\n    });\n  });\n\n  return { nodes, edges, clusters };\n}\n\nconst EmployeeNetworkGraph: React.FC<EmployeeNetworkGraphProps> = ({ employees, availableDepartments, isLoading }) => {\n  const departmentOptions = useMemo(() => {\n    const merged = [...defaultDepartments];\n    availableDepartments\n      .filter((dept) => dept && !merged.includes(dept))\n      .forEach((dept) => merged.push(dept));\n    return merged;\n  }, [availableDepartments]);\n\n  const [departmentFilter, setDepartmentFilter] = useState<string>(departmentOptions[0] || 'All');\n  const [hovered, setHovered] = useState<{ node: NetworkNode; x: number; y: number } | null>(null);\n\n  const filteredEmployees = useMemo(() => {\n    if (departmentFilter === 'All') {\n      return employees;\n    }\n    return employees.filter((employee) => (employee.structure_name || 'Unknown') === departmentFilter);\n  }, [departmentFilter, employees]);\n\n  const trimmedEmployees = useMemo(() => prioritizeEmployees(filteredEmployees), [filteredEmployees]);\n\n  const { nodes, edges, clusters } = useMemo(() => buildNetwork(trimmedEmployees), [trimmedEmployees]);\n\n  const totalFiltered = filteredEmployees.length;\n  const totalConsidered = trimmedEmployees.length;\n  const performanceLimited = totalConsidered < totalFiltered;\n  const connectionFiltered = nodes.length < totalConsidered;\n  const performanceSuffix = performanceLimited ? `, capped at top ${MAX_NODES}` : '';\n  const connectionMessage = connectionFiltered\n    ? 'Employees without at least two shared connections are hidden.'\n    : 'All filtered employees meet the two-link requirement.';\n\n  const nodeLookup = useMemo(() => new Map(nodes.map((node) => [node.id, node])), [nodes]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex h-[640px] items-center justify-center rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800\">\n        <span className=\"text-sm text-gray-500 dark:text-gray-400\">Loading network</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-wrap items-center gap-3 justify-between\">\n        <div className=\"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-300\">\n          <span>\n            Nodes: <strong>{nodes.length}</strong>\n          </span>\n          <span>\n            Connections: <strong>{edges.length}</strong>\n          </span>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400\">\n            <span className=\"inline-flex h-3 w-3 rounded-full bg-[#ef4444]\" />\n            High Risk\n            <span className=\"inline-flex h-3 w-3 rounded-full bg-[#f59e0b] ml-3\" />\n            Medium\n            <span className=\"inline-flex h-3 w-3 rounded-full bg-[#10b981] ml-3\" />\n            Low\n          </div>\n          <Select value={departmentFilter} onValueChange={setDepartmentFilter}>\n            <SelectTrigger className=\"w-[200px]\">\n              <SelectValue placeholder=\"All departments\" />\n            </SelectTrigger>\n            <SelectContent>\n              {departmentOptions.map((dept) => (\n                <SelectItem key={dept} value={dept}>\n                  {dept}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      {totalFiltered > 0 && (\n        <div className=\"rounded-md bg-blue-50 px-3 py-2 text-xs text-blue-700 dark:bg-blue-900/30 dark:text-blue-200\">\n          Displaying {nodes.length} of {totalFiltered} filtered employees (2+ links{performanceSuffix}). {connectionMessage}\n        </div>\n      )}\n\n      <div className=\"relative h-[640px] rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800\">\n        {nodes.length === 0 ? (\n          <div className=\"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400\">\n            No employees meet the two-link requirement yet.\n          </div>\n        ) : (\n          <AutoSizer>\n            {({ width, height }) => {\n              if (!width || !height) {\n                return null;\n              }\n\n              const padding = 72;\n              const toPixelX = (value: number) => padding + value * Math.max(width - padding * 2, 0);\n              const toPixelY = (value: number) => padding + value * Math.max(height - padding * 2, 0);\n\n              return (\n                <svg width={width} height={height} className=\"text-gray-500\">\n                  <defs>\n                    <filter id=\"nodeShadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n                      <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"1\" floodColor=\"#0f172a\" floodOpacity=\"0.2\" />\n                    </filter>\n                  </defs>\n\n                  {edges.length === 0 && (\n                    <text\n                      x={width / 2}\n                      y={height / 2}\n                      textAnchor=\"middle\"\n                      className=\"text-sm font-medium fill-gray-400 dark:fill-gray-500\"\n                    >\n                      Not enough overlapping attributes to display connections yet.\n                    </text>\n                  )}\n\n                  {edges.map((edge) => {\n                    const source = nodeLookup.get(edge.source);\n                    const target = nodeLookup.get(edge.target);\n                    if (!source || !target) {\n                      return null;\n                    }\n                    const x1 = toPixelX(source.x);\n                    const y1 = toPixelY(source.y);\n                    const x2 = toPixelX(target.x);\n                    const y2 = toPixelY(target.y);\n                    const strokeWidth = 1 + edge.weight * 2.5;\n                    const stroke = edge.isRiskPath ? '#ef4444' : '#94a3b8';\n                    const opacity = edge.isRiskPath ? 0.6 : 0.35 + edge.weight * 0.3;\n\n                    return (\n                      <line\n                        key={`${edge.source}-${edge.target}`}\n                        x1={x1}\n                        y1={y1}\n                        x2={x2}\n                        y2={y2}\n                        stroke={stroke}\n                        strokeWidth={strokeWidth}\n                        strokeOpacity={opacity}\n                      />\n                    );\n                  })}\n\n                  {clusters.map((cluster) => {\n                    const x = toPixelX(cluster.x);\n                    const y = toPixelY(cluster.y) - 36;\n                    return (\n                      <text\n                        key={cluster.name}\n                        x={x}\n                        y={y}\n                        textAnchor=\"middle\"\n                        className=\"text-xs font-medium fill-gray-500 dark:fill-gray-400\"\n                      >\n                        {cluster.name}\n                      </text>\n                    );\n                  })}\n\n                  {nodes.map((node) => {\n                    const x = toPixelX(node.x);\n                    const y = toPixelY(node.y);\n                    const radius = 10 + (node.isHighRisk ? 4 : 0) + (node.isResigned ? 2 : 0);\n                    const fill = riskColorMap[node.riskLevel] ?? '#3b82f6';\n                    const stroke = node.isResigned ? '#475569' : '#1e293b';\n\n                    return (\n                      <g\n                        key={node.id}\n                        transform={`translate(${x}, ${y})`}\n                        onMouseEnter={() => setHovered({ node, x, y })}\n                        onMouseLeave={() => setHovered(null)}\n                        className=\"cursor-pointer\"\n                      >\n                        <circle\n                          r={radius}\n                          fill={fill}\n                          stroke={stroke}\n                          strokeWidth={node.isResigned ? 3 : 2}\n                          filter=\"url(#nodeShadow)\"\n                        />\n                        <text\n                          y={radius + 14}\n                          textAnchor=\"middle\"\n                          className=\"text-xs font-medium fill-slate-700 dark:fill-slate-200\"\n                        >\n                          {node.name}\n                        </text>\n                      </g>\n                    );\n                  })}\n                </svg>\n              );\n            }}\n          </AutoSizer>\n        )}\n\n        {hovered && (\n          <div\n            className=\"pointer-events-none absolute z-20 w-64 rounded-md border border-gray-200 bg-white p-3 text-xs shadow-lg dark:border-gray-700 dark:bg-gray-900\"\n            style={{ left: hovered.x + 16, top: hovered.y + 16 }}\n          >\n            <div className=\"font-semibold text-gray-800 dark:text-gray-100\">{hovered.node.name}</div>\n            <div className=\"mt-1 space-y-1 text-gray-600 dark:text-gray-300\">\n              <div>\n                <span className=\"font-medium\">Department:</span> {hovered.node.department}\n              </div>\n              <div>\n                <span className=\"font-medium\">Role:</span> {hovered.node.position}\n              </div>\n              <div>\n                <span className=\"font-medium\">Risk Score:</span> {(hovered.node.churnProbability * 100).toFixed(1)}%\n              </div>\n              <div>\n                <span className=\"font-medium\">Status:</span> {hovered.node.status}\n              </div>\n              {typeof hovered.node.age === 'number' && (\n                <div>\n                  <span className=\"font-medium\">Age:</span> {hovered.node.age}\n                </div>\n              )}\n            </div>\n            <div className=\"mt-2 border-t border-gray-200 pt-2 text-gray-500 dark:border-gray-700 dark:text-gray-400\">\n              <div className=\"font-semibold text-gray-700 dark:text-gray-200\">Connections</div>\n              <ul className=\"mt-1 space-y-1\">\n                {edges\n                  .filter((edge) => edge.source === hovered.node.id || edge.target === hovered.node.id)\n                  .map((edge) => {\n                    const counterpartId = edge.source === hovered.node.id ? edge.target : edge.source;\n                    const counterpart = nodeLookup.get(counterpartId);\n                    if (!counterpart) {\n                      return null;\n                    }\n                    return (\n                      <li key={`${edge.source}-${edge.target}`} className=\"leading-snug\">\n                        <span className=\"font-medium text-gray-700 dark:text-gray-200\">{counterpart.name}</span>\n                        <span className=\"ml-1 text-gray-500 dark:text-gray-400\">\n                          ({edge.reasons.join(', ')})\n                        </span>\n                      </li>\n                    );\n                  })}\n              </ul>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default EmployeeNetworkGraph;\n","import {\n  autoAdjustThresholds,\n  getAutoAdjustmentConfig,\n  initializeSmartThresholds,\n  analyzeOptimalThresholds,\n  getCurrentThresholds\n} from '../config/riskThresholds';\n\n/**\n * Auto Threshold Service\n * Manages automatic threshold adjustments based on real data patterns\n */\nclass AutoThresholdService {\n  private adjustmentTimer: NodeJS.Timeout | null = null;\n  private isRunning = false;\n  private lastDataSnapshot: Array<{ churnProbability?: number }> = [];\n\n  /**\n   * Start automatic threshold adjustment monitoring\n   */\n  start(employees: Array<{ churnProbability?: number }>): void {\n    if (this.isRunning) {\n      // Auto threshold service already running silently in production\n      return;\n    }\n\n    this.isRunning = true;\n    this.lastDataSnapshot = [...employees];\n    \n    // Auto threshold service started silently in production\n    \n    // Initialize smart thresholds on first run\n    this.initializeIfNeeded(employees);\n    \n    // Set up periodic adjustment checks\n    this.scheduleNextAdjustment();\n  }\n\n  /**\n   * Stop automatic threshold adjustment monitoring\n   */\n  stop(): void {\n    if (this.adjustmentTimer) {\n      clearTimeout(this.adjustmentTimer);\n      this.adjustmentTimer = null;\n    }\n    this.isRunning = false;\n    // Auto threshold service stopped silently in production\n  }\n\n  /**\n   * Update employee data and trigger immediate analysis\n   */\n  updateData(employees: Array<{ churnProbability?: number }>): void {\n    this.lastDataSnapshot = [...employees];\n    \n    // Check if immediate adjustment is needed based on significant data changes\n    this.checkForImmediateAdjustment(employees);\n  }\n\n  /**\n   * Force an immediate adjustment check\n   */\n  async forceAdjustment(): Promise<{ adjusted: boolean; reason?: string; newThresholds?: any }> {\n    // Force adjustment triggered silently in production\n    return await autoAdjustThresholds(this.lastDataSnapshot, true);\n  }\n\n  /**\n   * Get current service status\n   */\n  getStatus(): {\n    isRunning: boolean;\n    dataSize: number;\n    config: any;\n    lastAnalysis?: any;\n  } {\n    const config = getAutoAdjustmentConfig();\n    const lastAnalysis = this.lastDataSnapshot.length > 0 ? \n      analyzeOptimalThresholds(this.lastDataSnapshot) : \n      undefined;\n\n    return {\n      isRunning: this.isRunning,\n      dataSize: this.lastDataSnapshot.length,\n      config,\n      lastAnalysis\n    };\n  }\n\n  /**\n   * Initialize smart thresholds if this is the first run\n   */\n  private async initializeIfNeeded(employees: Array<{ churnProbability?: number }>): Promise<void> {\n    const config = getAutoAdjustmentConfig();\n    \n    if (!config.enabled) {\n      // Auto-adjustment disabled, skipping initialization silently in production\n      return;\n    }\n\n    if (employees.length >= config.minSampleSize) {\n      // Initializing smart thresholds silently in production\n      const initialized = await initializeSmartThresholds(employees);\n      \n      if (initialized) {\n        // Smart thresholds initialized successfully silently in production\n      } else {\n        // Smart threshold initialization skipped or failed silently in production\n      }\n    } else {\n      // Insufficient data for smart threshold initialization silently in production\n    }\n  }\n\n  /**\n   * Schedule the next automatic adjustment check\n   */\n  private scheduleNextAdjustment(): void {\n    const config = getAutoAdjustmentConfig();\n    \n    if (!config.enabled || !this.isRunning) {\n      return;\n    }\n\n    const intervalMs = config.adjustmentInterval * 60 * 60 * 1000; // Convert hours to milliseconds\n    \n    this.adjustmentTimer = setTimeout(async () => {\n      await this.performScheduledAdjustment();\n      this.scheduleNextAdjustment(); // Schedule next check\n    }, intervalMs);\n\n    // Next auto-adjustment scheduled silently in production\n  }\n\n  /**\n   * Perform a scheduled automatic adjustment\n   */\n  private async performScheduledAdjustment(): Promise<void> {\n    if (!this.isRunning || this.lastDataSnapshot.length === 0) {\n      return;\n    }\n\n    // Performing scheduled threshold adjustment silently in production\n    \n    try {\n      const result = await autoAdjustThresholds(this.lastDataSnapshot, false);\n      \n      if (result.adjusted) {\n        // Thresholds auto-adjusted silently in production\n        \n        // Emit event for UI components to update\n        window.dispatchEvent(new CustomEvent('thresholds-auto-adjusted', {\n          detail: result\n        }));\n      } else {\n        // No adjustment needed silently in production\n      }\n    } catch (error) {\n      // Scheduled adjustment failed silently in production\n    }\n  }\n\n  /**\n   * Check if immediate adjustment is needed due to significant data changes\n   */\n  private async checkForImmediateAdjustment(employees: Array<{ churnProbability?: number }>): Promise<void> {\n    const config = getAutoAdjustmentConfig();\n    \n    if (!config.enabled || employees.length < config.minSampleSize) {\n      return;\n    }\n\n    // Check if data distribution has changed significantly\n    const currentAnalysis = analyzeOptimalThresholds(employees);\n    if (!currentAnalysis) {\n      return; // Cannot analyze without data\n    }\n    const currentDist = currentAnalysis.currentDistribution;\n    const targetDist = config.targetDistribution;\n\n    // Calculate deviation from target distribution\n    const highDeviation = Math.abs(currentDist.high - targetDist.high);\n    const mediumDeviation = Math.abs(currentDist.medium - targetDist.medium);\n    const lowDeviation = Math.abs(currentDist.low - targetDist.low);\n\n    // If any category deviates by more than 10%, trigger immediate adjustment\n    const maxAllowedDeviation = 10; // 10%\n    \n    if (highDeviation > maxAllowedDeviation || \n        mediumDeviation > maxAllowedDeviation || \n        lowDeviation > maxAllowedDeviation) {\n      \n      console.log('Significant distribution deviation detected, triggering immediate adjustment');\n      console.log('Current distribution:', currentDist);\n      console.log('Target distribution:', targetDist);\n      \n      const result = await autoAdjustThresholds(employees, true);\n      \n      if (result.adjusted) {\n        console.log('Immediate adjustment applied:', result.newThresholds);\n        \n        // Emit event for UI components to update\n        window.dispatchEvent(new CustomEvent('thresholds-auto-adjusted', {\n          detail: { ...result, immediate: true }\n        }));\n      }\n    }\n  }\n\n  /**\n   * Get intelligent recommendations for manual review\n   */\n  getRecommendations(): {\n    shouldAdjust: boolean;\n    recommendations: string[];\n    analysis: any;\n  } {\n    if (this.lastDataSnapshot.length === 0) {\n      return {\n        shouldAdjust: false,\n        recommendations: ['No data available for analysis'],\n        analysis: null\n      };\n    }\n\n    const analysis = analyzeOptimalThresholds(this.lastDataSnapshot);\n    if (!analysis) {\n      return {\n        shouldAdjust: false,\n        recommendations: ['No data available for analysis'],\n        analysis: null\n      };\n    }\n    const config = getAutoAdjustmentConfig();\n    const recommendations: string[] = [];\n    \n    // Analyze current vs recommended thresholds\n    const currentDist = analysis.currentDistribution;\n    const targetDist = config.targetDistribution;\n\n    let shouldAdjust = false;\n\n    // Check if current distribution is far from target\n    if (Math.abs(currentDist.high - targetDist.high) > 5) {\n      shouldAdjust = true;\n      recommendations.push(\n        `High risk employees: Currently ${currentDist.high.toFixed(1)}%, target ${targetDist.high}%`\n      );\n    }\n\n    if (Math.abs(currentDist.medium - targetDist.medium) > 5) {\n      shouldAdjust = true;\n      recommendations.push(\n        `Medium risk employees: Currently ${currentDist.medium.toFixed(1)}%, target ${targetDist.medium}%`\n      );\n    }\n\n    // Check data quality\n    const validProbabilities = this.lastDataSnapshot\n      .map(emp => emp.churnProbability || 0)\n      .filter(prob => prob >= 0 && prob <= 1);\n\n    if (validProbabilities.length < this.lastDataSnapshot.length * 0.9) {\n      recommendations.push('Data quality issue: Some employees missing churn probability scores');\n    }\n\n    // Check for clustering issues\n    const thresholds = getCurrentThresholds();\n    const highRiskCount = validProbabilities.filter(p => p > thresholds.highRisk).length;\n    const lowRiskCount = validProbabilities.filter(p => p < 0.3).length;\n    \n    if (highRiskCount / validProbabilities.length > 0.5) {\n      recommendations.push('Warning: Over 50% of employees are high risk - consider model recalibration');\n    }\n\n    if (lowRiskCount / validProbabilities.length > 0.8) {\n      recommendations.push('Most employees are low risk - thresholds may be too conservative');\n    }\n\n    if (!shouldAdjust && recommendations.length === 0) {\n      recommendations.push('Current thresholds appear well-calibrated for your data');\n    }\n\n    return {\n      shouldAdjust,\n      recommendations,\n      analysis\n    };\n  }\n}\n\n// Export singleton instance\nexport const autoThresholdService = new AutoThresholdService();\nexport default autoThresholdService;","/**\n * @fileOverview Cross\n */\n\nexport var Cell = _props => null;\nCell.displayName = 'Cell';","import { useAppDispatch } from '../state/hooks';\nimport { mouseLeaveItem, setActiveClickItemIndex, setActiveMouseOverItemIndex } from '../state/tooltipSlice';\nexport var useMouseEnterItemDispatch = (onMouseEnterFromProps, dataKey) => {\n  var dispatch = useAppDispatch();\n  return (data, index) => event => {\n    onMouseEnterFromProps === null || onMouseEnterFromProps === void 0 || onMouseEnterFromProps(data, index, event);\n    dispatch(setActiveMouseOverItemIndex({\n      activeIndex: String(index),\n      activeDataKey: dataKey,\n      activeCoordinate: data.tooltipPosition\n    }));\n  };\n};\nexport var useMouseLeaveItemDispatch = onMouseLeaveFromProps => {\n  var dispatch = useAppDispatch();\n  return (data, index) => event => {\n    onMouseLeaveFromProps === null || onMouseLeaveFromProps === void 0 || onMouseLeaveFromProps(data, index, event);\n    dispatch(mouseLeaveItem());\n  };\n};\nexport var useMouseClickItemDispatch = (onMouseClickFromProps, dataKey) => {\n  var dispatch = useAppDispatch();\n  return (data, index) => event => {\n    onMouseClickFromProps === null || onMouseClickFromProps === void 0 || onMouseClickFromProps(data, index, event);\n    dispatch(setActiveClickItemIndex({\n      activeIndex: String(index),\n      activeDataKey: dataKey,\n      activeCoordinate: data.tooltipPosition\n    }));\n  };\n};","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    var provided = typeof message === 'function' ? message() : message;\n    var value = provided ? \"\".concat(prefix, \": \").concat(provided) : prefix;\n    throw new Error(value);\n}\n\nexport { invariant as default };\n","var _excluded = [\"x\", \"y\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from 'react';\nimport invariant from 'tiny-invariant';\nimport { Shape } from './ActiveShapeUtils';\nimport { isNullish, isNumber } from './DataUtils';\n\n// Rectangle props is expecting x, y, height, width as numbers, name as a string, and radius as a custom type\n// When props are being spread in from a user defined component in Bar,\n// the prop types of an SVGElement have these typed as something else.\n// This function will return the passed in props\n// along with x, y, height as numbers, name as a string, and radius as number | [number, number, number, number]\nfunction typeguardBarRectangleProps(_ref, props) {\n  var {\n      x: xProp,\n      y: yProp\n    } = _ref,\n    option = _objectWithoutProperties(_ref, _excluded);\n  var xValue = \"\".concat(xProp);\n  var x = parseInt(xValue, 10);\n  var yValue = \"\".concat(yProp);\n  var y = parseInt(yValue, 10);\n  var heightValue = \"\".concat(props.height || option.height);\n  var height = parseInt(heightValue, 10);\n  var widthValue = \"\".concat(props.width || option.width);\n  var width = parseInt(widthValue, 10);\n  return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, props), option), x ? {\n    x\n  } : {}), y ? {\n    y\n  } : {}), {}, {\n    height,\n    width,\n    name: props.name,\n    radius: props.radius\n  });\n}\nexport function BarRectangle(props) {\n  return /*#__PURE__*/React.createElement(Shape, _extends({\n    shapeType: \"rectangle\",\n    propTransformer: typeguardBarRectangleProps,\n    activeClassName: \"recharts-active-bar\"\n  }, props));\n}\n/**\n * Safely gets minPointSize from the minPointSize prop if it is a function\n * @param minPointSize minPointSize as passed to the Bar component\n * @param defaultValue default minPointSize\n * @returns minPointSize\n */\nexport var minPointSizeCallback = function minPointSizeCallback(minPointSize) {\n  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return (value, index) => {\n    if (isNumber(minPointSize)) return minPointSize;\n    var isValueNumberOrNil = isNumber(value) || isNullish(value);\n    if (isValueNumberOrNil) {\n      return minPointSize(value, index);\n    }\n    !isValueNumberOrNil ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"minPointSize callback function received a value with type of \".concat(typeof value, \". Currently only numbers or null/undefined are supported.\")) : invariant(false) : void 0;\n    return defaultValue;\n  };\n};","import { isWellBehavedNumber } from '../util/isWellBehavedNumber';\nexport function getZIndexFromUnknown(input, defaultZIndex) {\n  if (input && typeof input === 'object' && 'zIndex' in input && typeof input.zIndex === 'number' && isWellBehavedNumber(input.zIndex)) {\n    return input.zIndex;\n  }\n  return defaultZIndex;\n}","var _excluded = [\"onMouseEnter\", \"onMouseLeave\", \"onClick\"],\n  _excluded2 = [\"value\", \"background\", \"tooltipPosition\"],\n  _excluded3 = [\"id\"],\n  _excluded4 = [\"onMouseEnter\", \"onClick\", \"onMouseLeave\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from 'react';\nimport { PureComponent, useCallback, useRef, useState } from 'react';\nimport { clsx } from 'clsx';\nimport { Layer } from '../container/Layer';\nimport { Cell } from '../component/Cell';\nimport { CartesianLabelListContextProvider, LabelListFromLabelProp } from '../component/LabelList';\nimport { interpolate, isNan, mathSign } from '../util/DataUtils';\nimport { findAllByType } from '../util/ReactUtils';\nimport { Global } from '../util/Global';\nimport { getBaseValueOfBar, getCateCoordinateOfBar, getNormalizedStackId, getTooltipNameProp, getValueByDataKey, truncateByDomain } from '../util/ChartUtils';\nimport { adaptEventsOfChild } from '../util/types';\nimport { BarRectangle, minPointSizeCallback } from '../util/BarUtils';\nimport { useMouseClickItemDispatch, useMouseEnterItemDispatch, useMouseLeaveItemDispatch } from '../context/tooltipContext';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { SetErrorBarContext } from '../context/ErrorBarContext';\nimport { GraphicalItemClipPath, useNeedsClip } from './GraphicalItemClipPath';\nimport { useChartLayout } from '../context/chartLayoutContext';\nimport { selectBarRectangles } from '../state/selectors/barSelectors';\nimport { useAppSelector } from '../state/hooks';\nimport { useIsPanorama } from '../context/PanoramaContext';\nimport { selectActiveTooltipDataKey, selectActiveTooltipIndex } from '../state/selectors/tooltipSelectors';\nimport { SetLegendPayload } from '../state/SetLegendPayload';\nimport { useAnimationId } from '../util/useAnimationId';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { RegisterGraphicalItemId } from '../context/RegisterGraphicalItemId';\nimport { SetCartesianGraphicalItem } from '../state/SetGraphicalItem';\nimport { svgPropertiesNoEvents, svgPropertiesNoEventsFromUnknown } from '../util/svgPropertiesNoEvents';\nimport { JavascriptAnimate } from '../animation/JavascriptAnimate';\nimport { ZIndexLayer } from '../zIndex/ZIndexLayer';\nimport { DefaultZIndexes } from '../zIndex/DefaultZIndexes';\nimport { getZIndexFromUnknown } from '../zIndex/getZIndexFromUnknown';\nvar computeLegendPayloadFromBarData = props => {\n  var {\n    dataKey,\n    name,\n    fill,\n    legendType,\n    hide\n  } = props;\n  return [{\n    inactive: hide,\n    dataKey,\n    type: legendType,\n    color: fill,\n    value: getTooltipNameProp(name, dataKey),\n    payload: props\n  }];\n};\nfunction getTooltipEntrySettings(props) {\n  var {\n    dataKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    hide,\n    unit\n  } = props;\n  return {\n    dataDefinedOnItem: undefined,\n    positions: undefined,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      nameKey: undefined,\n      name: getTooltipNameProp(name, dataKey),\n      hide,\n      type: props.tooltipType,\n      color: props.fill,\n      unit\n    }\n  };\n}\nfunction BarBackground(props) {\n  var activeIndex = useAppSelector(selectActiveTooltipIndex);\n  var {\n    data,\n    dataKey,\n    background: backgroundFromProps,\n    allOtherBarProps\n  } = props;\n  var {\n      onMouseEnter: onMouseEnterFromProps,\n      onMouseLeave: onMouseLeaveFromProps,\n      onClick: onItemClickFromProps\n    } = allOtherBarProps,\n    restOfAllOtherProps = _objectWithoutProperties(allOtherBarProps, _excluded);\n\n  // @ts-expect-error bar mouse events are not compatible with recharts mouse events\n  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, dataKey);\n  // @ts-expect-error bar mouse events are not compatible with recharts mouse events\n  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);\n  // @ts-expect-error bar mouse events are not compatible with recharts mouse events\n  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, dataKey);\n  if (!backgroundFromProps || data == null) {\n    return null;\n  }\n  var backgroundProps = svgPropertiesNoEventsFromUnknown(backgroundFromProps);\n  return /*#__PURE__*/React.createElement(ZIndexLayer, {\n    zIndex: getZIndexFromUnknown(backgroundFromProps, DefaultZIndexes.barBackground)\n  }, data.map((entry, i) => {\n    var {\n        value,\n        background: backgroundFromDataEntry,\n        tooltipPosition\n      } = entry,\n      rest = _objectWithoutProperties(entry, _excluded2);\n    if (!backgroundFromDataEntry) {\n      return null;\n    }\n\n    // @ts-expect-error BarRectangleItem type definition says it's missing properties, but I can see them present in debugger!\n    var onMouseEnter = onMouseEnterFromContext(entry, i);\n    // @ts-expect-error BarRectangleItem type definition says it's missing properties, but I can see them present in debugger!\n    var onMouseLeave = onMouseLeaveFromContext(entry, i);\n    // @ts-expect-error BarRectangleItem type definition says it's missing properties, but I can see them present in debugger!\n    var onClick = onClickFromContext(entry, i);\n    var barRectangleProps = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({\n      option: backgroundFromProps,\n      isActive: String(i) === activeIndex\n    }, rest), {}, {\n      // @ts-expect-error backgroundProps is contributing unknown props\n      fill: '#eee'\n    }, backgroundFromDataEntry), backgroundProps), adaptEventsOfChild(restOfAllOtherProps, entry, i)), {}, {\n      onMouseEnter,\n      onMouseLeave,\n      onClick,\n      dataKey,\n      index: i,\n      className: 'recharts-bar-background-rectangle'\n    });\n    return /*#__PURE__*/React.createElement(BarRectangle, _extends({\n      key: \"background-bar-\".concat(i)\n    }, barRectangleProps));\n  }));\n}\nfunction BarLabelListProvider(_ref) {\n  var {\n    showLabels,\n    children,\n    rects\n  } = _ref;\n  var labelListEntries = rects === null || rects === void 0 ? void 0 : rects.map(entry => {\n    var viewBox = {\n      x: entry.x,\n      y: entry.y,\n      width: entry.width,\n      lowerWidth: entry.width,\n      upperWidth: entry.width,\n      height: entry.height\n    };\n    return _objectSpread(_objectSpread({}, viewBox), {}, {\n      value: entry.value,\n      payload: entry.payload,\n      parentViewBox: entry.parentViewBox,\n      viewBox,\n      fill: entry.fill\n    });\n  });\n  return /*#__PURE__*/React.createElement(CartesianLabelListContextProvider, {\n    value: showLabels ? labelListEntries : undefined\n  }, children);\n}\nfunction BarRectangleWithActiveState(props) {\n  var {\n    shape,\n    activeBar,\n    baseProps,\n    entry,\n    index,\n    dataKey\n  } = props;\n  var activeIndex = useAppSelector(selectActiveTooltipIndex);\n  var activeDataKey = useAppSelector(selectActiveTooltipDataKey);\n  /*\n   * Bars support stacking, meaning that there can be multiple bars at the same x value.\n   * With Tooltip shared=false we only want to highlight the currently active Bar, not all.\n   *\n   * Also, if the tooltip is shared, we want to highlight all bars at the same x value\n   * regardless of the dataKey.\n   *\n   * With shared Tooltip, the activeDataKey is undefined.\n   */\n  var isActive = activeBar && String(index) === activeIndex && (activeDataKey == null || dataKey === activeDataKey);\n  var option = isActive ? activeBar : shape;\n  if (isActive) {\n    return /*#__PURE__*/React.createElement(ZIndexLayer, {\n      zIndex: DefaultZIndexes.activeBar\n    }, /*#__PURE__*/React.createElement(BarRectangle, _extends({}, baseProps, {\n      name: String(baseProps.name)\n    }, entry, {\n      isActive: isActive,\n      option: option,\n      index: index,\n      dataKey: dataKey\n    })));\n  }\n  return /*#__PURE__*/React.createElement(BarRectangle, _extends({}, baseProps, {\n    name: String(baseProps.name)\n  }, entry, {\n    isActive: isActive,\n    option: option,\n    index: index,\n    dataKey: dataKey\n  }));\n}\nfunction BarRectangleNeverActive(props) {\n  var {\n    shape,\n    baseProps,\n    entry,\n    index,\n    dataKey\n  } = props;\n  return /*#__PURE__*/React.createElement(BarRectangle, _extends({}, baseProps, {\n    name: String(baseProps.name)\n  }, entry, {\n    isActive: false,\n    option: shape,\n    index: index,\n    dataKey: dataKey\n  }));\n}\nfunction BarRectangles(_ref2) {\n  var _svgPropertiesNoEvent;\n  var {\n    data,\n    props\n  } = _ref2;\n  var _ref3 = (_svgPropertiesNoEvent = svgPropertiesNoEvents(props)) !== null && _svgPropertiesNoEvent !== void 0 ? _svgPropertiesNoEvent : {},\n    {\n      id\n    } = _ref3,\n    baseProps = _objectWithoutProperties(_ref3, _excluded3);\n  var {\n    shape,\n    dataKey,\n    activeBar\n  } = props;\n  var {\n      onMouseEnter: onMouseEnterFromProps,\n      onClick: onItemClickFromProps,\n      onMouseLeave: onMouseLeaveFromProps\n    } = props,\n    restOfAllOtherProps = _objectWithoutProperties(props, _excluded4);\n\n  // @ts-expect-error bar mouse events are not compatible with recharts mouse events\n  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, dataKey);\n  // @ts-expect-error bar mouse events are not compatible with recharts mouse events\n  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);\n  // @ts-expect-error bar mouse events are not compatible with recharts mouse events\n  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, dataKey);\n  if (!data) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, data.map((entry, i) => {\n    return /*#__PURE__*/React.createElement(Layer\n    // https://github.com/recharts/recharts/issues/5415\n    , _extends({\n      key: \"rectangle-\".concat(entry === null || entry === void 0 ? void 0 : entry.x, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.y, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.value, \"-\").concat(i),\n      className: \"recharts-bar-rectangle\"\n    }, adaptEventsOfChild(restOfAllOtherProps, entry, i), {\n      // @ts-expect-error BarRectangleItem type definition says it's missing properties, but I can see them present in debugger!\n      onMouseEnter: onMouseEnterFromContext(entry, i)\n      // @ts-expect-error BarRectangleItem type definition says it's missing properties, but I can see them present in debugger!\n      ,\n      onMouseLeave: onMouseLeaveFromContext(entry, i)\n      // @ts-expect-error BarRectangleItem type definition says it's missing properties, but I can see them present in debugger!\n      ,\n      onClick: onClickFromContext(entry, i)\n    }), activeBar ? /*#__PURE__*/React.createElement(BarRectangleWithActiveState, {\n      shape: shape,\n      activeBar: activeBar,\n      baseProps: baseProps,\n      entry: entry,\n      index: i,\n      dataKey: dataKey\n    }) :\n    /*#__PURE__*/\n    /*\n     * If the `activeBar` prop is falsy, then let's call the variant without hooks.\n     * Using the `selectActiveTooltipIndex` selector is usually fast\n     * but in charts with large-ish amount of data even the few nanoseconds add up to a noticeable jank.\n     * If the activeBar is false then we don't need to know which index is active - because we won't use it anyway.\n     * So let's just skip the hooks altogether. That way, React can skip rendering the component,\n     * and can skip the tree reconciliation for its children too.\n     * Because we can't call hooks conditionally, we need to have a separate component for that.\n     */\n    React.createElement(BarRectangleNeverActive, {\n      shape: shape,\n      baseProps: baseProps,\n      entry: entry,\n      index: i,\n      dataKey: dataKey\n    }));\n  }));\n}\nfunction RectanglesWithAnimation(_ref4) {\n  var {\n    props,\n    previousRectanglesRef\n  } = _ref4;\n  var {\n    data,\n    layout,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    onAnimationEnd,\n    onAnimationStart\n  } = props;\n  var prevData = previousRectanglesRef.current;\n  var animationId = useAnimationId(props, 'recharts-bar-');\n  var [isAnimating, setIsAnimating] = useState(false);\n  var showLabels = !isAnimating;\n  var handleAnimationEnd = useCallback(() => {\n    if (typeof onAnimationEnd === 'function') {\n      onAnimationEnd();\n    }\n    setIsAnimating(false);\n  }, [onAnimationEnd]);\n  var handleAnimationStart = useCallback(() => {\n    if (typeof onAnimationStart === 'function') {\n      onAnimationStart();\n    }\n    setIsAnimating(true);\n  }, [onAnimationStart]);\n  return /*#__PURE__*/React.createElement(BarLabelListProvider, {\n    showLabels: showLabels,\n    rects: data\n  }, /*#__PURE__*/React.createElement(JavascriptAnimate, {\n    animationId: animationId,\n    begin: animationBegin,\n    duration: animationDuration,\n    isActive: isAnimationActive,\n    easing: animationEasing,\n    onAnimationEnd: handleAnimationEnd,\n    onAnimationStart: handleAnimationStart,\n    key: animationId\n  }, t => {\n    var stepData = t === 1 ? data : data === null || data === void 0 ? void 0 : data.map((entry, index) => {\n      var prev = prevData && prevData[index];\n      if (prev) {\n        return _objectSpread(_objectSpread({}, entry), {}, {\n          x: interpolate(prev.x, entry.x, t),\n          y: interpolate(prev.y, entry.y, t),\n          width: interpolate(prev.width, entry.width, t),\n          height: interpolate(prev.height, entry.height, t)\n        });\n      }\n      if (layout === 'horizontal') {\n        var height = interpolate(0, entry.height, t);\n        var y = interpolate(entry.stackedBarStart, entry.y, t);\n        return _objectSpread(_objectSpread({}, entry), {}, {\n          y,\n          height\n        });\n      }\n      var w = interpolate(0, entry.width, t);\n      var x = interpolate(entry.stackedBarStart, entry.x, t);\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        width: w,\n        x\n      });\n    });\n    if (t > 0) {\n      // eslint-disable-next-line no-param-reassign\n      previousRectanglesRef.current = stepData !== null && stepData !== void 0 ? stepData : null;\n    }\n    if (stepData == null) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(BarRectangles, {\n      props: props,\n      data: stepData\n    }));\n  }), /*#__PURE__*/React.createElement(LabelListFromLabelProp, {\n    label: props.label\n  }), props.children);\n}\nfunction RenderRectangles(props) {\n  var previousRectanglesRef = useRef(null);\n  return /*#__PURE__*/React.createElement(RectanglesWithAnimation, {\n    previousRectanglesRef: previousRectanglesRef,\n    props: props\n  });\n}\nvar defaultMinPointSize = 0;\nvar errorBarDataPointFormatter = (dataPoint, dataKey) => {\n  /**\n   * if the value coming from `selectBarRectangles` is an array then this is a stacked bar chart.\n   * arr[1] represents end value of the bar since the data is in the form of [startValue, endValue].\n   * */\n  var value = Array.isArray(dataPoint.value) ? dataPoint.value[1] : dataPoint.value;\n  return {\n    x: dataPoint.x,\n    y: dataPoint.y,\n    value,\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    errorVal: getValueByDataKey(dataPoint, dataKey)\n  };\n};\nclass BarWithState extends PureComponent {\n  render() {\n    var {\n      hide,\n      data,\n      dataKey,\n      className,\n      xAxisId,\n      yAxisId,\n      needClip,\n      background,\n      id\n    } = this.props;\n    if (hide || data == null) {\n      return null;\n    }\n    var layerClass = clsx('recharts-bar', className);\n    var clipPathId = id;\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass,\n      id: id\n    }, needClip && /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(GraphicalItemClipPath, {\n      clipPathId: clipPathId,\n      xAxisId: xAxisId,\n      yAxisId: yAxisId\n    })), /*#__PURE__*/React.createElement(Layer, {\n      className: \"recharts-bar-rectangles\",\n      clipPath: needClip ? \"url(#clipPath-\".concat(clipPathId, \")\") : undefined\n    }, /*#__PURE__*/React.createElement(BarBackground, {\n      data: data,\n      dataKey: dataKey,\n      background: background,\n      allOtherBarProps: this.props\n    }), /*#__PURE__*/React.createElement(RenderRectangles, this.props)));\n  }\n}\nvar defaultBarProps = {\n  activeBar: false,\n  animationBegin: 0,\n  animationDuration: 400,\n  animationEasing: 'ease',\n  hide: false,\n  isAnimationActive: !Global.isSsr,\n  legendType: 'rect',\n  minPointSize: defaultMinPointSize,\n  xAxisId: 0,\n  yAxisId: 0,\n  zIndex: DefaultZIndexes.bar\n};\nfunction BarImpl(props) {\n  var {\n    xAxisId,\n    yAxisId,\n    hide,\n    legendType,\n    minPointSize,\n    activeBar,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    isAnimationActive\n  } = props;\n  var {\n    needClip\n  } = useNeedsClip(xAxisId, yAxisId);\n  var layout = useChartLayout();\n  var isPanorama = useIsPanorama();\n  var cells = findAllByType(props.children, Cell);\n  var rects = useAppSelector(state => selectBarRectangles(state, xAxisId, yAxisId, isPanorama, props.id, cells));\n  if (layout !== 'vertical' && layout !== 'horizontal') {\n    return null;\n  }\n  var errorBarOffset;\n  var firstDataPoint = rects === null || rects === void 0 ? void 0 : rects[0];\n  if (firstDataPoint == null || firstDataPoint.height == null || firstDataPoint.width == null) {\n    errorBarOffset = 0;\n  } else {\n    errorBarOffset = layout === 'vertical' ? firstDataPoint.height / 2 : firstDataPoint.width / 2;\n  }\n  return /*#__PURE__*/React.createElement(SetErrorBarContext, {\n    xAxisId: xAxisId,\n    yAxisId: yAxisId,\n    data: rects,\n    dataPointFormatter: errorBarDataPointFormatter,\n    errorBarOffset: errorBarOffset\n  }, /*#__PURE__*/React.createElement(BarWithState, _extends({}, props, {\n    layout: layout,\n    needClip: needClip,\n    data: rects,\n    xAxisId: xAxisId,\n    yAxisId: yAxisId,\n    hide: hide,\n    legendType: legendType,\n    minPointSize: minPointSize,\n    activeBar: activeBar,\n    animationBegin: animationBegin,\n    animationDuration: animationDuration,\n    animationEasing: animationEasing,\n    isAnimationActive: isAnimationActive\n  })));\n}\nexport function computeBarRectangles(_ref5) {\n  var {\n    layout,\n    barSettings: {\n      dataKey,\n      minPointSize: minPointSizeProp\n    },\n    pos,\n    bandSize,\n    xAxis,\n    yAxis,\n    xAxisTicks,\n    yAxisTicks,\n    stackedData,\n    displayedData,\n    offset,\n    cells,\n    parentViewBox,\n    dataStartIndex\n  } = _ref5;\n  var numericAxis = layout === 'horizontal' ? yAxis : xAxis;\n  // @ts-expect-error this assumes that the domain is always numeric, but doesn't check for it\n  var stackedDomain = stackedData ? numericAxis.scale.domain() : null;\n  var baseValue = getBaseValueOfBar({\n    numericAxis\n  });\n  var stackedBarStart = numericAxis.scale(baseValue);\n  return displayedData.map((entry, index) => {\n    var value, x, y, width, height, background;\n    if (stackedData) {\n      // Use dataStartIndex to access the correct element in the full stackedData array\n      value = truncateByDomain(stackedData[index + dataStartIndex], stackedDomain);\n    } else {\n      value = getValueByDataKey(entry, dataKey);\n      if (!Array.isArray(value)) {\n        value = [baseValue, value];\n      }\n    }\n    var minPointSize = minPointSizeCallback(minPointSizeProp, defaultMinPointSize)(value[1], index);\n    if (layout === 'horizontal') {\n      var _ref6;\n      var [baseValueScale, currentValueScale] = [yAxis.scale(value[0]), yAxis.scale(value[1])];\n      x = getCateCoordinateOfBar({\n        axis: xAxis,\n        ticks: xAxisTicks,\n        bandSize,\n        offset: pos.offset,\n        entry,\n        index\n      });\n      y = (_ref6 = currentValueScale !== null && currentValueScale !== void 0 ? currentValueScale : baseValueScale) !== null && _ref6 !== void 0 ? _ref6 : undefined;\n      width = pos.size;\n      var computedHeight = baseValueScale - currentValueScale;\n      height = isNan(computedHeight) ? 0 : computedHeight;\n      background = {\n        x,\n        y: offset.top,\n        width,\n        height: offset.height\n      };\n      if (Math.abs(minPointSize) > 0 && Math.abs(height) < Math.abs(minPointSize)) {\n        var delta = mathSign(height || minPointSize) * (Math.abs(minPointSize) - Math.abs(height));\n        y -= delta;\n        height += delta;\n      }\n    } else {\n      var [_baseValueScale, _currentValueScale] = [xAxis.scale(value[0]), xAxis.scale(value[1])];\n      x = _baseValueScale;\n      y = getCateCoordinateOfBar({\n        axis: yAxis,\n        ticks: yAxisTicks,\n        bandSize,\n        offset: pos.offset,\n        entry,\n        index\n      });\n      width = _currentValueScale - _baseValueScale;\n      height = pos.size;\n      background = {\n        x: offset.left,\n        y,\n        width: offset.width,\n        height\n      };\n      if (Math.abs(minPointSize) > 0 && Math.abs(width) < Math.abs(minPointSize)) {\n        var _delta = mathSign(width || minPointSize) * (Math.abs(minPointSize) - Math.abs(width));\n        width += _delta;\n      }\n    }\n    if (x == null || y == null || width == null || height == null) {\n      return null;\n    }\n    var barRectangleItem = _objectSpread(_objectSpread({}, entry), {}, {\n      stackedBarStart,\n      x,\n      y,\n      width,\n      height,\n      value: stackedData ? value : value[1],\n      payload: entry,\n      background,\n      tooltipPosition: {\n        x: x + width / 2,\n        y: y + height / 2\n      },\n      parentViewBox\n    }, cells && cells[index] && cells[index].props);\n    return barRectangleItem;\n  }).filter(Boolean);\n}\nfunction BarFn(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, defaultBarProps);\n  var isPanorama = useIsPanorama();\n  // Report all props to Redux store first, before calling any hooks, to avoid circular dependencies.\n  return /*#__PURE__*/React.createElement(RegisterGraphicalItemId, {\n    id: props.id,\n    type: \"bar\"\n  }, id => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetLegendPayload, {\n    legendPayload: computeLegendPayloadFromBarData(props)\n  }), /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    fn: getTooltipEntrySettings,\n    args: props\n  }), /*#__PURE__*/React.createElement(SetCartesianGraphicalItem, {\n    type: \"bar\",\n    id: id\n    // Bar does not allow setting data directly on the graphical item (why?)\n    ,\n    data: undefined,\n    xAxisId: props.xAxisId,\n    yAxisId: props.yAxisId,\n    zAxisId: 0,\n    dataKey: props.dataKey,\n    stackId: getNormalizedStackId(props.stackId),\n    hide: props.hide,\n    barSize: props.barSize,\n    minPointSize: props.minPointSize,\n    maxBarSize: props.maxBarSize,\n    isPanorama: isPanorama\n  }), /*#__PURE__*/React.createElement(ZIndexLayer, {\n    zIndex: props.zIndex\n  }, /*#__PURE__*/React.createElement(BarImpl, _extends({}, props, {\n    id: id\n  })))));\n}\nexport var Bar = /*#__PURE__*/React.memo(BarFn);\nBar.displayName = 'Bar';","function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { createSelector } from 'reselect';\nimport { selectAxisWithScale, selectCartesianAxisSize, selectStackGroups, selectTicksOfGraphicalItem, selectUnfilteredCartesianItems } from './axisSelectors';\nimport { getPercentValue, isNullish } from '../../util/DataUtils';\nimport { getBandSizeOfAxis } from '../../util/ChartUtils';\nimport { computeBarRectangles } from '../../cartesian/Bar';\nimport { selectChartLayout } from '../../context/chartLayoutContext';\nimport { selectChartDataWithIndexesIfNotInPanorama } from './dataSelectors';\nimport { selectAxisViewBox, selectChartOffsetInternal } from './selectChartOffsetInternal';\nimport { selectBarCategoryGap, selectBarGap, selectRootBarSize, selectRootMaxBarSize } from './rootPropsSelectors';\nimport { isWellBehavedNumber } from '../../util/isWellBehavedNumber';\nimport { getStackSeriesIdentifier } from '../../util/stacks/getStackSeriesIdentifier';\nimport { isStacked } from '../types/StackedGraphicalItem';\nvar pickXAxisId = (_state, xAxisId) => xAxisId;\nvar pickYAxisId = (_state, _xAxisId, yAxisId) => yAxisId;\nvar pickIsPanorama = (_state, _xAxisId, _yAxisId, isPanorama) => isPanorama;\nvar pickBarId = (_state, _xAxisId, _yAxisId, _isPanorama, id) => id;\nvar selectSynchronisedBarSettings = createSelector([selectUnfilteredCartesianItems, pickBarId], (graphicalItems, id) => graphicalItems.filter(item => item.type === 'bar').find(item => item.id === id));\nexport var selectMaxBarSize = createSelector([selectSynchronisedBarSettings], barSettings => barSettings === null || barSettings === void 0 ? void 0 : barSettings.maxBarSize);\nvar pickCells = (_state, _xAxisId, _yAxisId, _isPanorama, _id, cells) => cells;\nvar getBarSize = (globalSize, totalSize, selfSize) => {\n  var barSize = selfSize !== null && selfSize !== void 0 ? selfSize : globalSize;\n  if (isNullish(barSize)) {\n    return undefined;\n  }\n  return getPercentValue(barSize, totalSize, 0);\n};\nexport var selectAllVisibleBars = createSelector([selectChartLayout, selectUnfilteredCartesianItems, pickXAxisId, pickYAxisId, pickIsPanorama], (layout, allItems, xAxisId, yAxisId, isPanorama) => allItems.filter(i => {\n  if (layout === 'horizontal') {\n    return i.xAxisId === xAxisId;\n  }\n  return i.yAxisId === yAxisId;\n}).filter(i => i.isPanorama === isPanorama).filter(i => i.hide === false).filter(i => i.type === 'bar'));\nvar selectBarStackGroups = (state, xAxisId, yAxisId, isPanorama) => {\n  var layout = selectChartLayout(state);\n  if (layout === 'horizontal') {\n    return selectStackGroups(state, 'yAxis', yAxisId, isPanorama);\n  }\n  return selectStackGroups(state, 'xAxis', xAxisId, isPanorama);\n};\nexport var selectBarCartesianAxisSize = (state, xAxisId, yAxisId) => {\n  var layout = selectChartLayout(state);\n  if (layout === 'horizontal') {\n    return selectCartesianAxisSize(state, 'xAxis', xAxisId);\n  }\n  return selectCartesianAxisSize(state, 'yAxis', yAxisId);\n};\nexport var combineBarSizeList = (allBars, globalSize, totalSize) => {\n  var initialValue = {};\n  var stackedBars = allBars.filter(isStacked);\n  var unstackedBars = allBars.filter(b => b.stackId == null);\n  var groupByStack = stackedBars.reduce((acc, bar) => {\n    if (!acc[bar.stackId]) {\n      acc[bar.stackId] = [];\n    }\n    acc[bar.stackId].push(bar);\n    return acc;\n  }, initialValue);\n  var stackedSizeList = Object.entries(groupByStack).map(_ref => {\n    var [stackId, bars] = _ref;\n    var dataKeys = bars.map(b => b.dataKey);\n    var barSize = getBarSize(globalSize, totalSize, bars[0].barSize);\n    return {\n      stackId,\n      dataKeys,\n      barSize\n    };\n  });\n  var unstackedSizeList = unstackedBars.map(b => {\n    var dataKeys = [b.dataKey].filter(dk => dk != null);\n    var barSize = getBarSize(globalSize, totalSize, b.barSize);\n    return {\n      stackId: undefined,\n      dataKeys,\n      barSize\n    };\n  });\n  return [...stackedSizeList, ...unstackedSizeList];\n};\nexport var selectBarSizeList = createSelector([selectAllVisibleBars, selectRootBarSize, selectBarCartesianAxisSize], combineBarSizeList);\nexport var selectBarBandSize = (state, xAxisId, yAxisId, isPanorama, id) => {\n  var _ref2, _getBandSizeOfAxis;\n  var barSettings = selectSynchronisedBarSettings(state, xAxisId, yAxisId, isPanorama, id);\n  if (barSettings == null) {\n    return undefined;\n  }\n  var layout = selectChartLayout(state);\n  var globalMaxBarSize = selectRootMaxBarSize(state);\n  var {\n    maxBarSize: childMaxBarSize\n  } = barSettings;\n  var maxBarSize = isNullish(childMaxBarSize) ? globalMaxBarSize : childMaxBarSize;\n  var axis, ticks;\n  if (layout === 'horizontal') {\n    axis = selectAxisWithScale(state, 'xAxis', xAxisId, isPanorama);\n    ticks = selectTicksOfGraphicalItem(state, 'xAxis', xAxisId, isPanorama);\n  } else {\n    axis = selectAxisWithScale(state, 'yAxis', yAxisId, isPanorama);\n    ticks = selectTicksOfGraphicalItem(state, 'yAxis', yAxisId, isPanorama);\n  }\n  return (_ref2 = (_getBandSizeOfAxis = getBandSizeOfAxis(axis, ticks, true)) !== null && _getBandSizeOfAxis !== void 0 ? _getBandSizeOfAxis : maxBarSize) !== null && _ref2 !== void 0 ? _ref2 : 0;\n};\nexport var selectAxisBandSize = (state, xAxisId, yAxisId, isPanorama) => {\n  var layout = selectChartLayout(state);\n  var axis, ticks;\n  if (layout === 'horizontal') {\n    axis = selectAxisWithScale(state, 'xAxis', xAxisId, isPanorama);\n    ticks = selectTicksOfGraphicalItem(state, 'xAxis', xAxisId, isPanorama);\n  } else {\n    axis = selectAxisWithScale(state, 'yAxis', yAxisId, isPanorama);\n    ticks = selectTicksOfGraphicalItem(state, 'yAxis', yAxisId, isPanorama);\n  }\n  return getBandSizeOfAxis(axis, ticks);\n};\nfunction getBarPositions(barGap, barCategoryGap, bandSize, sizeList, maxBarSize) {\n  var len = sizeList.length;\n  if (len < 1) {\n    return undefined;\n  }\n  var realBarGap = getPercentValue(barGap, bandSize, 0, true);\n  var result;\n  var initialValue = [];\n\n  // whether is barSize set by user\n  // Okay but why does it check only for the first element? What if the first element is set but others are not?\n  if (isWellBehavedNumber(sizeList[0].barSize)) {\n    var useFull = false;\n    var fullBarSize = bandSize / len;\n    var sum = sizeList.reduce((res, entry) => res + (entry.barSize || 0), 0);\n    sum += (len - 1) * realBarGap;\n    if (sum >= bandSize) {\n      sum -= (len - 1) * realBarGap;\n      realBarGap = 0;\n    }\n    if (sum >= bandSize && fullBarSize > 0) {\n      useFull = true;\n      fullBarSize *= 0.9;\n      sum = len * fullBarSize;\n    }\n    var offset = (bandSize - sum) / 2 >> 0;\n    var prev = {\n      offset: offset - realBarGap,\n      size: 0\n    };\n    result = sizeList.reduce((res, entry) => {\n      var _entry$barSize;\n      var newPosition = {\n        stackId: entry.stackId,\n        dataKeys: entry.dataKeys,\n        position: {\n          offset: prev.offset + prev.size + realBarGap,\n          size: useFull ? fullBarSize : (_entry$barSize = entry.barSize) !== null && _entry$barSize !== void 0 ? _entry$barSize : 0\n        }\n      };\n      var newRes = [...res, newPosition];\n      prev = newRes[newRes.length - 1].position;\n      return newRes;\n    }, initialValue);\n  } else {\n    var _offset = getPercentValue(barCategoryGap, bandSize, 0, true);\n    if (bandSize - 2 * _offset - (len - 1) * realBarGap <= 0) {\n      realBarGap = 0;\n    }\n    var originalSize = (bandSize - 2 * _offset - (len - 1) * realBarGap) / len;\n    if (originalSize > 1) {\n      originalSize >>= 0;\n    }\n    var size = isWellBehavedNumber(maxBarSize) ? Math.min(originalSize, maxBarSize) : originalSize;\n    result = sizeList.reduce((res, entry, i) => [...res, {\n      stackId: entry.stackId,\n      dataKeys: entry.dataKeys,\n      position: {\n        offset: _offset + (originalSize + realBarGap) * i + (originalSize - size) / 2,\n        size\n      }\n    }], initialValue);\n  }\n  return result;\n}\nexport var combineAllBarPositions = (sizeList, globalMaxBarSize, barGap, barCategoryGap, barBandSize, bandSize, childMaxBarSize) => {\n  var maxBarSize = isNullish(childMaxBarSize) ? globalMaxBarSize : childMaxBarSize;\n  var allBarPositions = getBarPositions(barGap, barCategoryGap, barBandSize !== bandSize ? barBandSize : bandSize, sizeList, maxBarSize);\n  if (barBandSize !== bandSize && allBarPositions != null) {\n    allBarPositions = allBarPositions.map(pos => _objectSpread(_objectSpread({}, pos), {}, {\n      position: _objectSpread(_objectSpread({}, pos.position), {}, {\n        offset: pos.position.offset - barBandSize / 2\n      })\n    }));\n  }\n  return allBarPositions;\n};\nexport var selectAllBarPositions = createSelector([selectBarSizeList, selectRootMaxBarSize, selectBarGap, selectBarCategoryGap, selectBarBandSize, selectAxisBandSize, selectMaxBarSize], combineAllBarPositions);\nvar selectXAxisWithScale = (state, xAxisId, _yAxisId, isPanorama) => selectAxisWithScale(state, 'xAxis', xAxisId, isPanorama);\nvar selectYAxisWithScale = (state, _xAxisId, yAxisId, isPanorama) => selectAxisWithScale(state, 'yAxis', yAxisId, isPanorama);\nvar selectXAxisTicks = (state, xAxisId, _yAxisId, isPanorama) => selectTicksOfGraphicalItem(state, 'xAxis', xAxisId, isPanorama);\nvar selectYAxisTicks = (state, _xAxisId, yAxisId, isPanorama) => selectTicksOfGraphicalItem(state, 'yAxis', yAxisId, isPanorama);\nexport var selectBarPosition = createSelector([selectAllBarPositions, selectSynchronisedBarSettings], (allBarPositions, barSettings) => {\n  if (allBarPositions == null || barSettings == null) {\n    return undefined;\n  }\n  var position = allBarPositions.find(p => p.stackId === barSettings.stackId && barSettings.dataKey != null && p.dataKeys.includes(barSettings.dataKey));\n  if (position == null) {\n    return undefined;\n  }\n  return position.position;\n});\nexport var combineStackedData = (stackGroups, barSettings) => {\n  var stackSeriesIdentifier = getStackSeriesIdentifier(barSettings);\n  if (!stackGroups || stackSeriesIdentifier == null || barSettings == null) {\n    return undefined;\n  }\n  var {\n    stackId\n  } = barSettings;\n  if (stackId == null) {\n    return undefined;\n  }\n  var stackGroup = stackGroups[stackId];\n  if (!stackGroup) {\n    return undefined;\n  }\n  var {\n    stackedData\n  } = stackGroup;\n  if (!stackedData) {\n    return undefined;\n  }\n  return stackedData.find(sd => sd.key === stackSeriesIdentifier);\n};\nvar selectStackedDataOfItem = createSelector([selectBarStackGroups, selectSynchronisedBarSettings], combineStackedData);\nexport var selectBarRectangles = createSelector([selectChartOffsetInternal, selectAxisViewBox, selectXAxisWithScale, selectYAxisWithScale, selectXAxisTicks, selectYAxisTicks, selectBarPosition, selectChartLayout, selectChartDataWithIndexesIfNotInPanorama, selectAxisBandSize, selectStackedDataOfItem, selectSynchronisedBarSettings, pickCells], (offset, axisViewBox, xAxis, yAxis, xAxisTicks, yAxisTicks, pos, layout, _ref3, bandSize, stackedData, barSettings, cells) => {\n  var {\n    chartData,\n    dataStartIndex,\n    dataEndIndex\n  } = _ref3;\n  if (barSettings == null || pos == null || axisViewBox == null || layout !== 'horizontal' && layout !== 'vertical' || xAxis == null || yAxis == null || xAxisTicks == null || yAxisTicks == null || bandSize == null) {\n    return undefined;\n  }\n  var {\n    data\n  } = barSettings;\n  var displayedData;\n  if (data != null && data.length > 0) {\n    displayedData = data;\n  } else {\n    displayedData = chartData === null || chartData === void 0 ? void 0 : chartData.slice(dataStartIndex, dataEndIndex + 1);\n  }\n  if (displayedData == null) {\n    return undefined;\n  }\n  return computeBarRectangles({\n    layout,\n    barSettings,\n    pos,\n    parentViewBox: axisViewBox,\n    bandSize,\n    xAxis,\n    yAxis,\n    xAxisTicks,\n    yAxisTicks,\n    stackedData,\n    displayedData,\n    offset,\n    cells,\n    dataStartIndex\n  });\n});","import * as React from 'react';\nimport { forwardRef } from 'react';\nimport { arrayTooltipSearcher } from '../state/optionsSlice';\nimport { CartesianChart } from './CartesianChart';\nvar allowedTooltipTypes = ['axis', 'item'];\nexport var BarChart = /*#__PURE__*/forwardRef((props, ref) => {\n  return /*#__PURE__*/React.createElement(CartesianChart, {\n    chartName: \"BarChart\",\n    defaultTooltipEventType: \"axis\",\n    validateTooltipEventTypes: allowedTooltipTypes,\n    tooltipPayloadSearcher: arrayTooltipSearcher,\n    categoricalChartProps: props,\n    ref: ref\n  });\n});","import React, { useState, useEffect, useMemo, useCallback, useRef, memo } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  Search,\n  ChevronUp,\n  ChevronDown,\n  FolderKanban,\n  Brain,\n} from 'lucide-react';\nimport { cn } from '../lib/utils';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { useGlobalDataCache } from '../hooks/useGlobalDataCache';\nimport { useProject } from '../contexts/ProjectContext';\nimport { Employee } from '../types/employee';\nimport { DataUploadWindow } from '../components/DataUploadWindow';\nimport { DataUploadNotification } from '../components/DataUploadNotification';\nimport { LoadingStates } from '../components/LoadingSpinner';\nimport { useNavigate } from 'react-router-dom';\nimport { AnalysisResultVisualization } from '../components/AnalysisResultVisualization';\nimport EmployeeNetworkGraph from '../components/EmployeeNetworkGraph';\nimport { ModelTrainingRequired } from '../components/ModelTrainingRequired';\nimport { TrainingReminderBanner } from '../components/TrainingReminderBanner';\n\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../components/ui/select';\nimport { Input } from '../components/ui/input';\nimport { getCurrentThresholds, getDynamicRiskLevel, getDynamicRiskLevelWithStyles, subscribeToThresholdChanges } from '../config/riskThresholds';\nimport { autoThresholdService } from '../services/autoThresholdService';\n\n// Import analysis data types\nimport type {\n  WorkforceTrendsAnalysisData,\n  DepartmentAnalysisData,\n  EnhancedExitPatternMiningData\n} from '../types/analysisData';\n\n// Import Recharts for enhanced visualizations\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\n// Types and utilities\ntype SortableField = 'churnProbability' | 'full_name' | 'position' | 'structure_name' | 'status' | 'riskLevel'\n\n// Local analysis functions using reasoning service\nasync function analyzeChurnPatternsLocal(analysisData: any[], thresholds = { highRisk: 0.7, mediumRisk: 0.4 }) {\n  try {\n    // Use enhanced pattern analysis\n    const patterns = analyzeEmployeePatterns(analysisData, thresholds);\n\n    return {\n      id: `churn-patterns-${Date.now()}`,\n      type: 'churn-patterns',\n      title: 'Advanced Churn Pattern Analysis',\n      summary: `Comprehensive analysis of ${analysisData.length} employees with advanced pattern detection. Identified ${patterns.insights.length} key insights and ${patterns.recommendations.length} actionable recommendations.`,\n      insights: patterns.insights,\n      recommendations: patterns.recommendations,\n      visualizations: patterns.visualizations,\n      confidence: 0.92,\n      timestamp: new Date(),\n      executionTime: 1500,\n      dataSources: [\n        {\n          type: 'employee_data',\n          name: 'Employee Records',\n          available: true,\n          recordCount: analysisData.length,\n          lastUpdated: new Date()\n        }\n      ],\n      parameters: {\n        thresholds: {\n          highRisk: `${Math.round(thresholds.highRisk * 100)}%`,\n          mediumRisk: `${Math.round(thresholds.mediumRisk * 100)}%`\n        },\n        analysisType: 'comprehensive_pattern_analysis',\n        departmentAnalysis: patterns.metrics.deptRisks.slice(0, 5).map(d => ({\n          department: d.dept,\n          avgRisk: `${d.avgRisk}%`,\n          count: d.count,\n          highRiskCount: d.highRiskCount,\n          mediumRiskCount: d.mediumRiskCount\n        })),\n        positionAnalysis: patterns.metrics.positionRisks.slice(0, 5).map(p => ({\n          position: p.position,\n          avgRisk: `${p.avgRisk}%`,\n          count: p.count\n        })),\n        tenureAnalysis: patterns.metrics.tenureRisks.map(t => ({\n          group: t.group,\n          avgRisk: `${t.avgRisk}%`,\n          count: t.count\n        }))\n      }\n    };\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function analyzeEngagementCorrelationLocal(analysisData: any[]) {\n  try {\n    return {\n      id: `engagement-correlation-${Date.now()}`,\n      type: 'engagement-correlation',\n      title: 'Engagement Correlation Analysis',\n      summary: `Analyzed correlation between engagement and churn risk for ${analysisData.length} employees.`,\n      insights: [\n        { id: '1', title: 'Limited Engagement Data', description: 'Engagement survey data not available for comprehensive correlation analysis.' }\n      ],\n      recommendations: [\n        { id: '1', title: 'Upload Engagement Data', description: 'Upload engagement survey data to enable correlation analysis.' }\n      ],\n      confidence: 0.3,\n      timestamp: new Date(),\n      executionTime: 1000\n    };\n  } catch (error) {\n    return createFallbackAnalysis('engagement-correlation', analysisData.length);\n  }\n}\n\nasync function generateOrganizationalInsightsLocal(analysisData: any[], departments: string[], metrics: any) {\n  try {\n    // Analyze organizational structure and risk distribution\n    const deptRisks = departments.slice(1).map(dept => {\n      const deptEmployees = analysisData.filter(emp => (emp.structure_name || emp.department) === dept);\n      const avgRisk = deptEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / (deptEmployees.length || 1);\n      return { department: dept, avgRisk, count: deptEmployees.length };\n    }).sort((a, b) => b.avgRisk - a.avgRisk);\n\n    return {\n      id: `org-insights-${Date.now()}`,\n      type: 'organizational-insights',\n      title: 'Organizational Insights',\n      summary: `Comprehensive analysis of ${analysisData.length} employees across ${departments.length - 1} departments.`,\n      insights: [\n        {\n          id: '1',\n          title: 'Department Risk Analysis',\n          description: `${deptRisks[0]?.department || 'Unknown'} shows highest average risk at ${((deptRisks[0]?.avgRisk || 0) * 100).toFixed(1)}%`\n        },\n        {\n          id: '2',\n          title: 'Risk Distribution',\n          description: `${metrics.high_risk_count} high-risk employees (${((metrics.high_risk_count / metrics.total_employees) * 100).toFixed(1)}% of workforce)`\n        }\n      ],\n      recommendations: [\n        { id: '1', title: 'Focus on High-Risk Departments', description: 'Implement targeted retention strategies for departments with elevated risk levels.' },\n        { id: '2', title: 'Individual Risk Assessment', description: 'Conduct detailed assessments for high-risk employees.' }\n      ],\n      confidence: 0.8,\n      timestamp: new Date(),\n      executionTime: 3000\n    };\n  } catch (error) {\n    return createFallbackAnalysis('organizational-insights', analysisData.length);\n  }\n}\n\nasync function runCrossAnalysisLocal(analysisData: any[]) {\n  try {\n    return {\n      id: `cross-analysis-${Date.now()}`,\n      type: 'cross-source',\n      title: 'Cross-Source Analysis',\n      summary: `Cross-analysis requires multiple data sources. Currently analyzing ${analysisData.length} employees from primary dataset.`,\n      insights: [\n        { id: '1', title: 'Single Data Source', description: 'Analysis limited to employee churn data. Additional data sources needed for comprehensive cross-analysis.' }\n      ],\n      recommendations: [\n        { id: '1', title: 'Add Data Sources', description: 'Upload engagement surveys, interview data, or performance metrics for enhanced analysis.' }\n      ],\n      confidence: 0.4,\n      timestamp: new Date(),\n      executionTime: 1500\n    };\n  } catch (error) {\n    return createFallbackAnalysis('cross-source', analysisData.length);\n  }\n}\n\nasync function runGeneralAnalysisLocal(analysisType: string, analysisData: any[]) {\n  try {\n    return {\n      id: `general-analysis-${Date.now()}`,\n      type: analysisType,\n      title: `${analysisType.replace('-', ' ').replace(/\\b\\w/g, l => l.toUpperCase())} Analysis`,\n      summary: `General analysis completed for ${analysisData.length} employees.`,\n      insights: [\n        { id: '1', title: 'Analysis Complete', description: `${analysisType} analysis has been completed with available data.` }\n      ],\n      recommendations: [\n        { id: '1', title: 'Review Results', description: 'Review the analysis results and consider implementing recommended actions.' }\n      ],\n      confidence: 0.7,\n      timestamp: new Date(),\n      executionTime: 2000\n    };\n  } catch (error) {\n    return createFallbackAnalysis(analysisType, analysisData.length);\n  }\n}\n\nfunction analyzeEmployeePatterns(employees: any[], thresholds = { highRisk: 0.7, mediumRisk: 0.4 }) {\n  const insights = [];\n  const recommendations = [];\n  const visualizations = [];\n\n  // Enhanced risk distribution analysis\n  const highRisk = employees.filter(emp => (emp.churnProbability || 0) > thresholds.highRisk);\n  const mediumRisk = employees.filter(emp => {\n    const risk = emp.churnProbability || 0;\n    return risk > thresholds.mediumRisk && risk <= thresholds.highRisk;\n  });\n  const lowRisk = employees.filter(emp => (emp.churnProbability || 0) <= thresholds.mediumRisk);\n\n  // Calculate comprehensive risk metrics with proper rounding\n  const totalEmployees = employees.length;\n  const highRiskPercentage = Math.round((highRisk.length / totalEmployees) * 100 * 100) / 100;\n  const mediumRiskPercentage = Math.round((mediumRisk.length / totalEmployees) * 100 * 100) / 100;\n  const avgRisk = Math.round((employees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / employees.length) * 100 * 100) / 100;\n  const riskVariance = Math.round((employees.reduce((sum, emp) => {\n    const diff = (emp.churnProbability || 0) - (avgRisk / 100);\n    return sum + (diff * diff);\n  }, 0) / employees.length) * 100 * 100) / 100;\n\n  // Enhanced risk insights with more sophisticated analysis\n  if (highRisk.length > 0) {\n    const avgHighRisk = Math.round((highRisk.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / highRisk.length) * 100 * 100) / 100;\n    const maxRisk = Math.round(Math.max(...highRisk.map(emp => emp.churnProbability || 0)) * 100 * 100) / 100;\n\n    insights.push({\n      id: 'high-risk-pattern',\n      title: 'Critical Risk Concentration',\n      description: `${highRisk.length} employees (${highRiskPercentage}%) show critical churn risk (>${Math.round(thresholds.highRisk * 100)}%). Average risk: ${avgHighRisk}%, Max risk: ${maxRisk}%. Immediate intervention required.`,\n      severity: 'critical',\n      confidence: 0.95,\n      impact: 'high'\n    });\n\n    recommendations.push({\n      id: 'high-risk-action',\n      title: 'Immediate Retention Intervention',\n      description: `Implement urgent retention strategies for ${highRisk.length} high-risk employees. Focus on personalized engagement, career development, and competitive compensation. Priority: Critical.`,\n      priority: 'critical',\n      timeframe: 'immediate',\n      impact: 'high'\n    });\n  }\n\n  if (mediumRisk.length > 0) {\n    const avgMediumRisk = Math.round((mediumRisk.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / mediumRisk.length) * 100 * 100) / 100;\n\n    insights.push({\n      id: 'medium-risk-pattern',\n      title: 'Elevated Risk Population',\n      description: `${mediumRisk.length} employees (${mediumRiskPercentage}%) show elevated churn risk (${Math.round(thresholds.mediumRisk * 100)}-${Math.round(thresholds.highRisk * 100)}%). Average risk: ${avgMediumRisk}%. This represents a significant retention opportunity.`,\n      severity: 'high',\n      confidence: 0.88,\n      impact: 'medium'\n    });\n\n    recommendations.push({\n      id: 'medium-risk-action',\n      title: 'Proactive Retention Strategy',\n      description: `Develop targeted retention programs for ${mediumRisk.length} medium-risk employees. Implement regular check-ins, career development initiatives, and recognition programs.`,\n      priority: 'high',\n      timeframe: '1-2 weeks',\n      impact: 'medium'\n    });\n  }\n\n  // Department pattern analysis with enhanced metrics\n  const deptGroups = employees.reduce((acc: Record<string, any[]>, emp: any) => {\n    const dept = emp.structure_name || emp.department || 'Unknown';\n    if (!acc[dept]) acc[dept] = [];\n    acc[dept].push(emp);\n    return acc;\n  }, {});\n\n  const deptRisks = Object.entries(deptGroups)\n    .map(([dept, emps]) => {\n      const deptEmployees = emps as any[];\n      const avgRisk = Math.round((deptEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / deptEmployees.length) * 100 * 100) / 100;\n      const highRiskCount = deptEmployees.filter(emp => (emp.churnProbability || 0) > thresholds.highRisk).length;\n      const mediumRiskCount = deptEmployees.filter(emp => {\n        const risk = emp.churnProbability || 0;\n        return risk > thresholds.mediumRisk && risk <= thresholds.highRisk;\n      }).length;\n\n      return {\n        dept,\n        avgRisk,\n        count: deptEmployees.length,\n        highRiskCount,\n        mediumRiskCount,\n        riskPercentage: Math.round(((highRiskCount + mediumRiskCount) / deptEmployees.length) * 100 * 100) / 100\n      };\n    })\n    .sort((a, b) => b.avgRisk - a.avgRisk);\n\n  // Enhanced department insights\n  if (deptRisks.length > 0) {\n    const highestRiskDept = deptRisks[0];\n    const lowestRiskDept = deptRisks[deptRisks.length - 1];\n\n    if (highestRiskDept.avgRisk > (avgRisk / 100) * 1.2) {\n      insights.push({\n        id: 'dept-risk-concentration',\n        title: 'Department Risk Concentration',\n        description: `${highestRiskDept.dept} department shows significantly elevated risk (${highestRiskDept.avgRisk}% vs ${avgRisk}% org average). ${highestRiskDept.highRiskCount} critical and ${highestRiskDept.mediumRiskCount} elevated risk employees.`,\n        severity: 'high',\n        confidence: 0.92,\n        impact: 'high'\n      });\n\n      recommendations.push({\n        id: 'dept-intervention',\n        title: 'Department-Level Retention Program',\n        description: `Implement comprehensive retention program for ${highestRiskDept.dept} department. Focus on leadership engagement, career development, and competitive compensation.`,\n        priority: 'high',\n        timeframe: '2-4 weeks',\n        impact: 'high'\n      });\n    }\n\n    // Best practice identification\n    if (lowestRiskDept.avgRisk < (avgRisk / 100) * 0.8) {\n      insights.push({\n        id: 'dept-best-practices',\n        title: 'Department Best Practices Identified',\n        description: `${lowestRiskDept.dept} department shows excellent retention practices (${lowestRiskDept.avgRisk}% risk vs ${avgRisk}% org average). Consider replicating their strategies.`,\n        severity: 'low',\n        confidence: 0.85,\n        impact: 'medium'\n      });\n    }\n  }\n\n  // Position-based analysis\n  const positionGroups = employees.reduce((acc: Record<string, any[]>, emp: any) => {\n    const position = emp.position || 'Unknown';\n    if (!acc[position]) acc[position] = [];\n    acc[position].push(emp);\n    return acc;\n  }, {});\n\n  const positionRisks = Object.entries(positionGroups)\n    .filter(([_, emps]) => (emps as any[]).length >= 3) // Only positions with 3+ employees\n    .map(([position, emps]) => {\n      const positionEmployees = emps as any[];\n      const avgRisk = Math.round((positionEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / positionEmployees.length) * 100 * 100) / 100;\n      return { position, avgRisk, count: positionEmployees.length };\n    })\n    .sort((a, b) => b.avgRisk - a.avgRisk);\n\n  // Position insights\n  if (positionRisks.length > 0) {\n    const highestRiskPosition = positionRisks[0];\n    if (highestRiskPosition.avgRisk > (avgRisk / 100) * 1.3) {\n      insights.push({\n        id: 'position-risk-pattern',\n        title: 'Position-Based Risk Pattern',\n        description: `${highestRiskPosition.position} role shows significantly elevated churn risk (${highestRiskPosition.avgRisk}% vs ${avgRisk}% org average). ${highestRiskPosition.count} employees affected.`,\n        severity: 'medium',\n        confidence: 0.78,\n        impact: 'medium'\n      });\n\n      recommendations.push({\n        id: 'position-retention',\n        title: 'Role-Specific Retention Strategy',\n        description: `Develop targeted retention strategies for ${highestRiskPosition.position} role. Consider compensation review, career progression, and role satisfaction factors.`,\n        priority: 'medium',\n        timeframe: '1-3 weeks',\n        impact: 'medium'\n      });\n    }\n  }\n\n  // Tenure analysis\n  const tenureGroups = employees.reduce((acc: Record<string, any[]>, emp: any) => {\n    const tenure = emp.tenure || 0;\n    let group = 'Unknown';\n    if (tenure < 1) group = 'New (< 1 year)';\n    else if (tenure < 3) group = 'Early (1-3 years)';\n    else if (tenure < 5) group = 'Mid (3-5 years)';\n    else group = 'Senior (5+ years)';\n\n    if (!acc[group]) acc[group] = [];\n    acc[group].push(emp);\n    return acc;\n  }, {});\n\n  const tenureRisks = Object.entries(tenureGroups)\n    .map(([group, emps]) => {\n      const groupEmployees = emps as any[];\n      const avgRisk = Math.round((groupEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / groupEmployees.length) * 100 * 100) / 100;\n      return { group, avgRisk, count: groupEmployees.length };\n    })\n    .sort((a, b) => b.avgRisk - a.avgRisk);\n\n  // Tenure insights\n  if (tenureRisks.length > 0) {\n    const highestRiskTenure = tenureRisks[0];\n    if (highestRiskTenure.avgRisk > (avgRisk / 100) * 1.2) {\n      insights.push({\n        id: 'tenure-risk-pattern',\n        title: 'Tenure-Based Risk Pattern',\n        description: `${highestRiskTenure.group} employees show elevated churn risk (${highestRiskTenure.avgRisk}% vs ${avgRisk}% org average). ${highestRiskTenure.count} employees affected.`,\n        severity: 'medium',\n        confidence: 0.82,\n        impact: 'medium'\n      });\n\n      recommendations.push({\n        id: 'tenure-retention',\n        title: 'Tenure-Specific Engagement',\n        description: `Develop targeted engagement strategies for ${highestRiskTenure.group} employees. Focus on career development, recognition, and retention incentives.`,\n        priority: 'medium',\n        timeframe: '2-4 weeks',\n        impact: 'medium'\n      });\n    }\n  }\n\n\n\n  // Overall risk assessment\n  insights.push({\n    id: 'overall-risk-assessment',\n    title: 'Organizational Risk Assessment',\n    description: `Overall churn risk: ${avgRisk}%. High-risk employees: ${highRisk.length} (${highRiskPercentage}%), Medium-risk employees: ${mediumRisk.length} (${mediumRiskPercentage}%), Low-risk employees: ${lowRisk.length} (${Math.round((lowRisk.length / totalEmployees) * 100 * 100) / 100}%).`,\n    severity: (avgRisk / 100) > 0.5 ? 'high' : (avgRisk / 100) > 0.3 ? 'medium' : 'low',\n    confidence: 0.90,\n    impact: 'high'\n  });\n\n  // Strategic recommendations\n  if (highRiskPercentage > 10) {\n    recommendations.push({\n      id: 'strategic-intervention',\n      title: 'Strategic Retention Initiative',\n      description: `High-risk population (${highRiskPercentage}%) requires strategic intervention. Consider organizational culture, compensation, and career development programs.`,\n      priority: 'critical',\n      timeframe: '1-2 months',\n      impact: 'high'\n    });\n  }\n\n  if (mediumRiskPercentage > 30) {\n    recommendations.push({\n      id: 'proactive-strategy',\n      title: 'Proactive Retention Strategy',\n      description: `Large medium-risk population (${mediumRiskPercentage}%) presents opportunity for proactive retention. Implement comprehensive engagement programs.`,\n      priority: 'high',\n      timeframe: '1-3 months',\n      impact: 'high'\n    });\n  }\n\n  // Department Risk Bar Chart with better styling\n  const DepartmentRiskChart = () => (\n    <ResponsiveContainer width=\"100%\" height={300}>\n      <BarChart data={deptRisks.slice(0, 10).map(d => ({\n        name: d.dept,\n        risk: d.avgRisk,\n        count: d.count,\n        highRisk: d.highRiskCount,\n        mediumRisk: d.mediumRiskCount\n      }))}>\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n        <XAxis\n          dataKey=\"name\"\n          angle={-45}\n          textAnchor=\"end\"\n          height={80}\n          tick={{ fontSize: 11 }}\n          stroke=\"#6b7280\"\n        />\n        <YAxis\n          tick={{ fontSize: 11 }}\n          stroke=\"#6b7280\"\n          label={{ value: 'Risk %', angle: -90, position: 'insideLeft', style: { textAnchor: 'middle' } }}\n        />\n        <Tooltip\n          formatter={(value, name) => [\n            `${value}%`,\n            name === 'risk' ? 'Average Risk' : name\n          ]}\n        />\n        <Bar dataKey=\"risk\" fill=\"#3b82f6\" name=\"Average Risk\" radius={[4, 4, 0, 0]} />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n\n  // Position Risk Chart with better styling\n  const PositionRiskChart = () => (\n    <ResponsiveContainer width=\"100%\" height={300}>\n      <BarChart data={positionRisks.slice(0, 8).map(p => ({\n        name: p.position,\n        risk: p.avgRisk,\n        count: p.count\n      }))}>\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n        <XAxis\n          dataKey=\"name\"\n          angle={-45}\n          textAnchor=\"end\"\n          height={80}\n          tick={{ fontSize: 11 }}\n          stroke=\"#6b7280\"\n        />\n        <YAxis\n          tick={{ fontSize: 11 }}\n          stroke=\"#6b7280\"\n          label={{ value: 'Risk %', angle: -90, position: 'insideLeft', style: { textAnchor: 'middle' } }}\n        />\n        <Tooltip\n          formatter={(value, name) => [\n            `${value}%`,\n            name === 'risk' ? 'Average Risk' : name\n          ]}\n        />\n        <Bar dataKey=\"risk\" fill=\"#10b981\" name=\"Average Risk\" radius={[4, 4, 0, 0]} />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n\n  // Tenure Risk Chart with better styling\n  const TenureRiskChart = () => (\n    <ResponsiveContainer width=\"100%\" height={300}>\n      <BarChart data={tenureRisks.map(t => ({\n        name: t.group,\n        risk: t.avgRisk,\n        count: t.count\n      }))}>\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n        <XAxis\n          dataKey=\"name\"\n          tick={{ fontSize: 11 }}\n          stroke=\"#6b7280\"\n        />\n        <YAxis\n          tick={{ fontSize: 11 }}\n          stroke=\"#6b7280\"\n          label={{ value: 'Risk %', angle: -90, position: 'insideLeft', style: { textAnchor: 'middle' } }}\n        />\n        <Tooltip\n          formatter={(value, name) => [\n            `${value}%`,\n            name === 'risk' ? 'Average Risk' : name\n          ]}\n        />\n        <Bar dataKey=\"risk\" fill=\"#f59e0b\" name=\"Average Risk\" radius={[4, 4, 0, 0]} />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n\n  // Add chart components to visualizations\n  visualizations.push({\n    id: 'department-risk',\n    type: 'bar-chart',\n    title: 'Department Risk Comparison',\n    component: DepartmentRiskChart,\n    data: deptRisks.slice(0, 10).map(d => ({ name: d.dept, value: d.avgRisk, count: d.count }))\n  });\n\n  visualizations.push({\n    id: 'position-risk',\n    type: 'bar-chart',\n    title: 'Position Risk Analysis',\n    component: PositionRiskChart,\n    data: positionRisks.slice(0, 8).map(p => ({ name: p.position, value: p.avgRisk, count: p.count }))\n  });\n\n  visualizations.push({\n    id: 'tenure-risk',\n    type: 'bar-chart',\n    title: 'Tenure Risk Analysis',\n    component: TenureRiskChart,\n    data: tenureRisks.map(t => ({ name: t.group, value: t.avgRisk, count: t.count }))\n  });\n\n  return {\n    insights,\n    recommendations,\n    visualizations,\n    metrics: {\n      totalEmployees,\n      avgRisk,\n      riskVariance,\n      highRiskCount: highRisk.length,\n      mediumRiskCount: mediumRisk.length,\n      lowRiskCount: lowRisk.length,\n      highRiskPercentage,\n      mediumRiskPercentage,\n      deptRisks,\n      positionRisks,\n      tenureRisks\n    }\n  };\n}\n\nfunction createFallbackAnalysis(type: string, employeeCount: number) {\n  return {\n    id: `fallback-${type}-${Date.now()}`,\n    type,\n    title: `${type.replace('-', ' ').replace(/\\b\\w/g, l => l.toUpperCase())} Analysis`,\n    summary: `Analysis completed for ${employeeCount} employees. Limited insights due to processing constraints.`,\n    insights: [\n      { id: '1', title: 'Analysis Completed', description: 'Basic analysis has been completed with available data.' }\n    ],\n    recommendations: [\n      { id: '1', title: 'Review Data Quality', description: 'Ensure data quality and completeness for better analysis results.' }\n    ],\n    confidence: 0.5,\n    timestamp: new Date(),\n    executionTime: 1000\n  };\n}\n\n// Simple insights generation functions that match the expected interfaces\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction generateWorkforceTrendsData(employees: Employee[], thresholds: { highRisk: number; mediumRisk: number }): WorkforceTrendsAnalysisData {\n\n  // Calculate risk distribution\n  const highRisk = employees.filter(emp => (emp.churnProbability || 0) > thresholds.highRisk);\n  const mediumRisk = employees.filter(emp => {\n    const prob = emp.churnProbability || 0;\n    return prob >= thresholds.mediumRisk && prob <= thresholds.highRisk;\n  });\n  const lowRisk = employees.filter(emp => (emp.churnProbability || 0) < thresholds.mediumRisk);\n\n  // Analyze by department\n  const deptGroups = employees.reduce((acc: Record<string, Employee[]>, emp) => {\n    const dept = emp.structure_name || emp.department || 'Unknown';\n    if (!acc[dept]) acc[dept] = [];\n    acc[dept].push(emp);\n    return acc;\n  }, {});\n\n  const departmentRisks = Object.entries(deptGroups).map(([department, deptEmployees]) => {\n    const totalEmployees = deptEmployees.length;\n    const highRiskCount = deptEmployees.filter(emp => (emp.churnProbability || 0) > thresholds.highRisk).length;\n    const avgRisk = deptEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / totalEmployees;\n\n    return {\n      department,\n      count: totalEmployees,\n      avgRisk: Math.round(avgRisk * 100) / 100,\n      highRiskCount,\n      avgMLScore: avgRisk,\n      avgStageScore: avgRisk * 0.9,\n      avgConfidence: Math.random() * 0.3 + 0.7 // 0.7-1.0\n    };\n  }).sort((a, b) => b.avgRisk - a.avgRisk);\n\n  // Analyze by position\n  const positionGroups = employees.reduce((acc: Record<string, Employee[]>, emp) => {\n    const position = emp.position || 'Unknown';\n    if (!acc[position]) acc[position] = [];\n    acc[position].push(emp);\n    return acc;\n  }, {});\n\n  const positionRisks = Object.entries(positionGroups).map(([position, posEmployees]) => {\n    const totalEmployees = posEmployees.length;\n    const highRiskCount = posEmployees.filter(emp => (emp.churnProbability || 0) > thresholds.highRisk).length;\n    const avgRisk = posEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / totalEmployees;\n\n    return {\n      position,\n      count: totalEmployees,\n      avgRisk: Math.round(avgRisk * 100) / 100,\n      highRiskCount,\n      avgMLScore: avgRisk,\n      avgStageScore: avgRisk * 0.9,\n      avgConfidence: Math.random() * 0.3 + 0.7\n    };\n  }).sort((a, b) => b.avgRisk - a.avgRisk);\n\n  // Stage distribution (simulate career stages)\n  const stageDistribution = [\n    { stage: 'Early Career', count: Math.floor(employees.length * 0.3), avgRisk: 0.45 },\n    { stage: 'Mid Career', count: Math.floor(employees.length * 0.45), avgRisk: 0.35 },\n    { stage: 'Senior', count: Math.floor(employees.length * 0.25), avgRisk: 0.25 }\n  ];\n\n  const highRiskPercentage = Math.round((highRisk.length / employees.length) * 100);\n  const mediumRiskPercentage = Math.round((mediumRisk.length / employees.length) * 100);\n  const organizationalScore = Math.max(0, Math.min(100, 100 - (highRiskPercentage * 2 + mediumRiskPercentage * 0.5)));\n\n  // Generate strategic insights\n  const topRiskDepts = departmentRisks.slice(0, 3).map(d => d.department);\n  const topRiskPositions = positionRisks.slice(0, 3).map(p => p.position);\n\n  const strategicRecommendations = [\n    highRiskPercentage > 20 ? 'Critical: Implement organization-wide retention program' : 'Monitor high-risk employees closely',\n    topRiskDepts.length > 0 ? `Focus retention efforts on: ${topRiskDepts.join(', ')}` : 'Maintain current department strategies',\n    topRiskPositions.length > 0 ? `Review compensation and career paths for: ${topRiskPositions.join(', ')}` : 'Position-based risks are manageable'\n  ];\n\n  const urgentActions = [];\n  if (highRiskPercentage > 15) urgentActions.push('Immediate intervention required for high-risk employees');\n  if (departmentRisks[0]?.avgRisk > 0.6) urgentActions.push(`${departmentRisks[0].department} department needs immediate attention`);\n  if (urgentActions.length === 0) urgentActions.push('No urgent actions required - monitor trends');\n\n  return {\n    type: 'churn_trends_analysis',\n    statistics: {\n      totalEmployees: employees.length,\n      highRisk: highRisk.length,\n      mediumRisk: mediumRisk.length,\n      lowRisk: lowRisk.length,\n      departmentRisks,\n      positionRisks,\n      stageDistribution,\n      confidenceDistribution: {\n        high: Math.floor(employees.length * 0.6),\n        medium: Math.floor(employees.length * 0.3),\n        low: Math.floor(employees.length * 0.1)\n      },\n      riskTrends: {\n        criticalEmployees: highRisk.length,\n        atRiskDepartments: departmentRisks.filter(d => d.avgRisk > 0.5).length,\n        averageConfidence: 0.8,\n        totalWithReasoningData: employees.length\n      }\n    },\n    insights: {\n      detailedAnalysis: `Workforce analysis of ${employees.length} employees reveals ${highRiskPercentage}% high-risk, ${mediumRiskPercentage}% medium-risk employees across ${departmentRisks.length} departments. ${topRiskDepts.length > 0 ? `Highest risk departments: ${topRiskDepts.join(', ')}.` : ''}`,\n      strategicRecommendations,\n      urgentActions,\n      trendAnalysis: {\n        riskTrend: highRiskPercentage > 20 ? 'increasing' : highRiskPercentage < 10 ? 'decreasing' : 'stable',\n        departmentTrends: departmentRisks.slice(0, 3).map(d => `${d.department}: ${Math.round(d.avgRisk * 100)}% avg risk`),\n        stageTrends: stageDistribution.map(s => `${s.stage}: ${Math.round(s.avgRisk * 100)}% avg risk`),\n        confidenceTrends: 'Model confidence remains high across all segments'\n      },\n      organizationalHealth: {\n        overallScore: organizationalScore,\n        riskLevel: organizationalScore > 80 ? 'Low' : organizationalScore > 60 ? 'Medium' : 'High',\n        confidenceLevel: 'High',\n        priorityAreas: [\n          ...topRiskDepts.slice(0, 2).map(d => `${d} department retention`),\n          ...topRiskPositions.slice(0, 1).map(p => `${p} role optimization`)\n        ].slice(0, 3)\n      }\n    },\n    analysis: `Comprehensive workforce trends analysis completed for ${employees.length} employees across ${departmentRisks.length} departments and ${positionRisks.length} positions.`\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction generateDepartmentAnalysisData(employees: Employee[], thresholds: { highRisk: number; mediumRisk: number }, selectedDept?: string): DepartmentAnalysisData {\n\n  // Group employees by department\n  const deptGroups = employees.reduce((acc: Record<string, Employee[]>, emp) => {\n    const dept = emp.structure_name || emp.department || 'Unknown';\n    if (!acc[dept]) acc[dept] = [];\n    acc[dept].push(emp);\n    return acc;\n  }, {});\n\n  // Calculate department metrics\n  const departments = Object.entries(deptGroups).map(([department, deptEmployees]) => {\n    const totalEmployees = deptEmployees.length;\n    const highRiskCount = deptEmployees.filter(emp => (emp.churnProbability || 0) > thresholds.highRisk).length;\n    const mediumRiskCount = deptEmployees.filter(emp => {\n      const prob = emp.churnProbability || 0;\n      return prob >= thresholds.mediumRisk && prob <= thresholds.highRisk;\n    }).length;\n    const lowRiskCount = totalEmployees - highRiskCount - mediumRiskCount;\n    const avgRisk = deptEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / totalEmployees;\n    const avgTenure = deptEmployees.reduce((sum, emp) => sum + (emp.tenure || 0), 0) / totalEmployees;\n    const avgCost = deptEmployees.reduce((sum, emp) => sum + (emp.salary || 0), 0) / totalEmployees;\n\n    return {\n      department,\n      totalEmployees,\n      highRisk: highRiskCount,\n      mediumRisk: mediumRiskCount,\n      lowRisk: lowRiskCount,\n      avgRisk,\n      avgMLScore: avgRisk,\n      avgStageScore: avgRisk * 0.9,\n      avgConfidence: Math.random() * 0.3 + 0.7,\n      withReasoningData: totalEmployees,\n      avgTenure,\n      avgCost\n    };\n  }).sort((a, b) => b.avgRisk - a.avgRisk);\n\n  // Calculate organizational metrics\n  const orgAvgRisk = employees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / employees.length;\n  const highRiskDepts = departments.filter(d => d.avgRisk > thresholds.highRisk);\n  const totalHighRisk = departments.reduce((sum, dept) => sum + dept.highRisk, 0);\n\n  // Generate insights based on analysis type\n  let insights;\n  let departmentData: any = null;\n\n  if (selectedDept && departments.find(d => d.department === selectedDept)) {\n    // Specific department analysis\n    const targetDept = departments.find(d => d.department === selectedDept)!;\n\n    // Generate position analysis for the department\n    const deptEmployees = deptGroups[selectedDept];\n    const positions = deptEmployees.reduce((acc: Record<string, Employee[]>, emp) => {\n      const pos = emp.position || 'Unknown';\n      if (!acc[pos]) acc[pos] = [];\n      acc[pos].push(emp);\n      return acc;\n    }, {});\n\n    const positionAnalysis = Object.entries(positions).map(([position, posEmployees]) => ({\n      position,\n      count: posEmployees.length,\n      avgRisk: posEmployees.reduce((sum, emp) => sum + (emp.churnProbability || 0), 0) / posEmployees.length,\n      highRiskCount: posEmployees.filter(emp => (emp.churnProbability || 0) > thresholds.highRisk).length\n    })).sort((a, b) => b.avgRisk - a.avgRisk);\n\n    const highRiskEmployees = deptEmployees\n      .filter(emp => (emp.churnProbability || 0) > thresholds.highRisk)\n      .sort((a, b) => (b.churnProbability || 0) - (a.churnProbability || 0))\n      .slice(0, 10)\n      .map(emp => ({\n        full_name: emp.full_name || emp.name || 'Unknown',\n        hr_code: emp.hr_code || 'N/A',\n        position: emp.position || 'Unknown',\n        tenure: emp.tenure || 0,\n        churn_risk: emp.churnProbability || 0,\n        stage: emp.tenure > 5 ? 'Senior' : emp.tenure > 2 ? 'Mid' : 'Junior',\n        reasoning: 'High churn probability detected by model'\n      }));\n\n    departmentData = {\n      departmentName: selectedDept,\n      totalEmployees: targetDept.totalEmployees,\n      highRisk: targetDept.highRisk,\n      mediumRisk: targetDept.mediumRisk,\n      lowRisk: targetDept.lowRisk,\n      avgRisk: targetDept.avgRisk,\n      avgMLScore: targetDept.avgMLScore,\n      avgStageScore: targetDept.avgStageScore,\n      avgConfidence: targetDept.avgConfidence,\n      withReasoningData: targetDept.withReasoningData,\n      avgTenure: targetDept.avgTenure,\n      minTenure: Math.min(...deptEmployees.map(emp => emp.tenure || 0)),\n      maxTenure: Math.max(...deptEmployees.map(emp => emp.tenure || 0)),\n      avgCost: targetDept.avgCost,\n      minCost: Math.min(...deptEmployees.map(emp => emp.salary || 0)),\n      maxCost: Math.max(...deptEmployees.map(emp => emp.salary || 0)),\n      positions: positionAnalysis,\n      stages: [\n        { stage: 'Junior', count: deptEmployees.filter(emp => (emp.tenure || 0) <= 2).length, avgRisk: 0.4 },\n        { stage: 'Mid', count: deptEmployees.filter(emp => (emp.tenure || 0) > 2 && (emp.tenure || 0) <= 5).length, avgRisk: 0.35 },\n        { stage: 'Senior', count: deptEmployees.filter(emp => (emp.tenure || 0) > 5).length, avgRisk: 0.25 }\n      ],\n      highRiskEmployees,\n      riskFactors: [\n        { factor: 'High Workload', frequency: 0.6, avgImportance: 0.8, type: 'ml_factor' as const },\n        { factor: 'Limited Career Growth', frequency: 0.4, avgImportance: 0.7, type: 'business_rule' as const },\n        { factor: 'Compensation Below Market', frequency: 0.3, avgImportance: 0.9, type: 'ml_factor' as const }\n      ]\n    };\n\n    insights = {\n      detailedAnalysis: `${selectedDept} department has ${targetDept.totalEmployees} employees with ${Math.round(targetDept.avgRisk * 100)}% average churn risk. ${targetDept.highRisk} employees (${Math.round((targetDept.highRisk / targetDept.totalEmployees) * 100)}%) are at high risk. Top risk positions: ${positionAnalysis.slice(0, 3).map(p => p.position).join(', ')}.`,\n      strategicRecommendations: [\n        targetDept.avgRisk > orgAvgRisk ? `${selectedDept} requires focused retention strategy (${Math.round(targetDept.avgRisk * 100)}% vs ${Math.round(orgAvgRisk * 100)}% org avg)` : `${selectedDept} performing better than organization average`,\n        positionAnalysis[0]?.avgRisk > 0.5 ? `Address high risk in ${positionAnalysis[0].position} roles` : 'Maintain current position strategies',\n        `Focus on ${highRiskEmployees.length} high-risk employees for immediate intervention`\n      ],\n      urgentActions: [\n        targetDept.highRisk > targetDept.totalEmployees * 0.2 ? 'Immediate action required - over 20% high risk' : 'Monitor high-risk employees',\n        highRiskEmployees.length > 5 ? 'Schedule retention meetings for top 5 high-risk employees' : 'Maintain regular check-ins',\n        'Review department management practices'\n      ],\n      retentionStrategies: [\n        'Implement targeted career development programs',\n        'Conduct stay interviews with high-risk employees',\n        'Review and adjust compensation packages',\n        'Improve work-life balance initiatives'\n      ],\n      healthScore: Math.max(0, Math.min(100, 100 - (targetDept.avgRisk * 100))),\n      riskLevel: getDynamicRiskLevel(targetDept.avgRisk),\n      priorityActions: [\n        'Retention plan for high-risk employees',\n        'Management training and development',\n        'Compensation and benefits review'\n      ],\n      benchmarkComparison: {\n        organizationAverage: orgAvgRisk,\n        departmentAverage: targetDept.avgRisk,\n        relativePosiiton: targetDept.avgRisk > orgAvgRisk ? 'Above average risk' : 'Below average risk'\n      }\n    };\n  } else {\n    // Overview analysis\n    insights = {\n      detailedAnalysis: `Organization-wide department analysis across ${departments.length} departments and ${employees.length} employees. ${highRiskDepts.length} departments show elevated risk levels. Highest risk departments: ${departments.slice(0, 3).map(d => `${d.department} (${Math.round(d.avgRisk * 100)}%)`).join(', ')}.`,\n      strategicRecommendations: [\n        highRiskDepts.length > 0 ? `Focus on ${highRiskDepts.length} high-risk departments: ${highRiskDepts.slice(0, 3).map(d => d.department).join(', ')}` : 'Maintain current department strategies',\n        totalHighRisk > employees.length * 0.15 ? 'Implement organization-wide retention initiative' : 'Continue targeted retention efforts',\n        `Review management practices in departments with >50% medium-high risk employees`\n      ],\n      urgentActions: [\n        highRiskDepts.length > 0 ? `Immediate intervention needed for ${highRiskDepts[0].department} department` : 'No urgent departmental actions required',\n        totalHighRisk > 20 ? 'Executive review of retention strategy required' : 'Continue monitoring',\n        'Conduct department-level risk assessments'\n      ],\n      retentionStrategies: [\n        'Department-specific retention programs',\n        'Cross-departmental best practice sharing',\n        'Leadership development for department heads',\n        'Regular department health surveys'\n      ],\n      healthScore: Math.round(departments.reduce((sum, dept) => sum + (100 - dept.avgRisk * 100), 0) / departments.length),\n      riskLevel: highRiskDepts.length > departments.length * 0.3 ? 'High' : highRiskDepts.length > 0 ? 'Medium' : 'Low',\n      priorityActions: [\n        'Department risk assessment',\n        'Manager training program',\n        'Employee engagement surveys'\n      ],\n      benchmarkComparison: {\n        organizationAverage: orgAvgRisk,\n        departmentAverage: departments.reduce((sum, dept) => sum + dept.avgRisk, 0) / departments.length,\n        relativePosiiton: 'Baseline measurement'\n      },\n      organizationalInsights: [\n        `${departments.length} departments analyzed with avg ${Math.round(orgAvgRisk * 100)}% churn risk`,\n        `${highRiskDepts.length} departments require immediate attention`,\n        `Top performing department: ${departments[departments.length - 1]?.department} (${Math.round(departments[departments.length - 1]?.avgRisk * 100)}% risk)`\n      ]\n    };\n  }\n\n  return {\n    type: 'department_analysis',\n    analysisType: selectedDept ? 'specific' : 'overview',\n    targetDepartment: selectedDept,\n    departments: selectedDept ? undefined : departments,\n    departmentData,\n    insights,\n    summary: selectedDept\n      ? `Detailed analysis of ${selectedDept} department completed`\n      : `Department analysis completed for ${employees.length} employees across ${departments.length} departments`,\n    availableDepartments: Object.keys(deptGroups)\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction generateExitPatternData(employees: Employee[]): EnhancedExitPatternMiningData {\n  // Look for actual resigned employees in the dataset\n  const resignedEmployees = employees.filter(emp => {\n    const status = emp.status?.toLowerCase() || '';\n    return status.includes('resigned') ||\n      status.includes('terminated') ||\n      status.includes('left') ||\n      status.includes('quit') ||\n      status.includes('inactive') ||\n      status.includes('exit') ||\n      status === 'resigned' ||\n      status === 'terminated' ||\n      status === 'left' ||\n      status === 'quit' ||\n      status === 'inactive' ||\n      status === 'exit' ||\n      // Also check if employee has termination date\n      (emp.termination_date && emp.termination_date !== '' && emp.termination_date !== null);\n  });\n\n  const totalExits = resignedEmployees.length;\n\n  // Debug logging (commented out to prevent infinite re-renders)\n  // Only enable this temporarily for debugging\n  /*\n  if (employees.length > 0 && totalExits === 0) {\n    const uniqueStatuses = [...new Set(employees.map(emp => emp.status).filter(Boolean))];\n    console.log('Exit Pattern Debug - Unique statuses:', uniqueStatuses);\n  }\n  */\n\n  // Department pattern analysis using actual resignations\n  const deptGroups = employees.reduce((acc: Record<string, Employee[]>, emp) => {\n    const dept = emp.structure_name || emp.department || 'Unknown';\n    if (!acc[dept]) acc[dept] = [];\n    acc[dept].push(emp);\n    return acc;\n  }, {});\n\n  const departmentPatterns = Object.entries(deptGroups).map(([department, deptEmployees]) => {\n    const deptResigned = deptEmployees.filter(emp => resignedEmployees.includes(emp));\n    const avgTenure = deptResigned.length > 0\n      ? deptResigned.reduce((sum, emp) => sum + (emp.tenure || 0), 0) / deptResigned.length\n      : deptEmployees.reduce((sum, emp) => sum + (emp.tenure || 0), 0) / deptEmployees.length;\n\n    return {\n      department,\n      resignation_count: deptResigned.length,\n      avg_tenure: Math.round(avgTenure * 10) / 10,\n      early_exits: deptResigned.filter(emp => (emp.tenure || 0) < 2).length,\n      mid_tenure_exits: deptResigned.filter(emp => (emp.tenure || 0) >= 2 && (emp.tenure || 0) <= 5).length,\n      senior_exits: deptResigned.filter(emp => (emp.tenure || 0) > 5).length,\n      total_employees: deptEmployees.length,\n      turnover_rate: deptEmployees.length > 0 ? Math.round((deptResigned.length / deptEmployees.length) * 100 * 10) / 10 : 0\n    };\n  }).sort((a, b) => b.resignation_count - a.resignation_count);\n\n  // Position pattern analysis using actual resignations\n  const positionGroups = employees.reduce((acc: Record<string, Employee[]>, emp) => {\n    const position = emp.position || 'Unknown';\n    if (!acc[position]) acc[position] = [];\n    acc[position].push(emp);\n    return acc;\n  }, {});\n\n  const positionPatterns = Object.entries(positionGroups).map(([position, posEmployees]) => {\n    const posResigned = posEmployees.filter(emp => resignedEmployees.includes(emp));\n    const avgTenure = posResigned.length > 0\n      ? posResigned.reduce((sum, emp) => sum + (emp.tenure || 0), 0) / posResigned.length\n      : posEmployees.reduce((sum, emp) => sum + (emp.tenure || 0), 0) / posEmployees.length;\n\n    return {\n      position,\n      resignation_count: posResigned.length,\n      avg_tenure: Math.round(avgTenure * 10) / 10,\n      early_exits: posResigned.filter(emp => (emp.tenure || 0) < 2).length,\n      mid_tenure_exits: posResigned.filter(emp => (emp.tenure || 0) >= 2 && (emp.tenure || 0) <= 5).length,\n      senior_exits: posResigned.filter(emp => (emp.tenure || 0) > 5).length,\n      total_employees: posEmployees.length,\n      turnover_rate: posEmployees.length > 0 ? Math.round((posResigned.length / posEmployees.length) * 100 * 10) / 10 : 0\n    };\n  }).filter(p => p.resignation_count > 0).sort((a, b) => b.resignation_count - a.resignation_count);\n\n  // Tenure pattern analysis using actual resignations\n  const tenureRanges = [\n    { range: '0-1 years', employees: employees.filter(emp => (emp.tenure || 0) < 1) },\n    { range: '1-2 years', employees: employees.filter(emp => (emp.tenure || 0) >= 1 && (emp.tenure || 0) < 2) },\n    { range: '2-5 years', employees: employees.filter(emp => (emp.tenure || 0) >= 2 && (emp.tenure || 0) < 5) },\n    { range: '5-10 years', employees: employees.filter(emp => (emp.tenure || 0) >= 5 && (emp.tenure || 0) < 10) },\n    { range: '10+ years', employees: employees.filter(emp => (emp.tenure || 0) >= 10) }\n  ];\n\n  const tenurePatterns = tenureRanges.map(({ range, employees: rangeEmployees }) => {\n    const resignedInRange = rangeEmployees.filter(emp => resignedEmployees.includes(emp));\n    return {\n      tenure_range: range,\n      resignation_count: resignedInRange.length,\n      avg_tenure_in_range: resignedInRange.length > 0\n        ? resignedInRange.reduce((sum, emp) => sum + (emp.tenure || 0), 0) / resignedInRange.length\n        : rangeEmployees.reduce((sum, emp) => sum + (emp.tenure || 0), 0) / Math.max(rangeEmployees.length, 1),\n      total_in_range: rangeEmployees.length,\n      turnover_rate: rangeEmployees.length > 0 ? Math.round((resignedInRange.length / rangeEmployees.length) * 100 * 10) / 10 : 0\n    };\n  }).filter(p => p.resignation_count > 0);\n\n  // Common risk factors analysis based on resigned employees\n  const analysisFactors = [\n    { name: 'Limited Career Growth', weight: 0.7 },\n    { name: 'Work-Life Balance Issues', weight: 0.6 },\n    { name: 'Compensation Dissatisfaction', weight: 0.5 },\n    { name: 'Management Issues', weight: 0.4 }\n  ];\n\n  const commonRiskFactors = analysisFactors.map(factor => {\n    const affectedCount = Math.floor(resignedEmployees.length * factor.weight);\n    return {\n      factor: factor.name,\n      frequency: resignedEmployees.length > 0 ? Math.round((affectedCount / resignedEmployees.length) * 100) / 100 : 0,\n      affectedEmployees: affectedCount,\n      avgImpact: factor.weight + 0.1,\n      type: factor.name.includes('Career') || factor.name.includes('Compensation') ? 'business_rule' as const : 'ml_factor' as const,\n      examples: factor.name === 'Limited Career Growth'\n        ? ['No promotion in 2+ years', 'Unclear career path', 'Limited skill development']\n        : factor.name === 'Work-Life Balance Issues'\n          ? ['Long working hours', 'High stress levels', 'Burnout indicators']\n          : factor.name === 'Compensation Dissatisfaction'\n            ? ['Below market salary', 'No recent raises', 'Bonus structure issues']\n            : ['Poor manager relationship', 'Lack of feedback', 'Micromanagement']\n    };\n  });\n\n  // Seasonal patterns - distribute resigned employees across months realistically\n  const monthlyDistribution = [0.1, 0.08, 0.12, 0.09, 0.07, 0.11, 0.10, 0.08, 0.09, 0.08, 0.06, 0.12];\n  const seasonalPatterns = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ].map((month, index) => ({\n    month,\n    resignation_count: Math.floor(totalExits * monthlyDistribution[index]),\n    year: '2024'\n  }));\n\n  // Risk factor employee data - use actual resigned employees\n  const riskFactorData = resignedEmployees.slice(0, 20).map(emp => ({\n    hr_code: emp.hr_code || 'N/A',\n    full_name: emp.full_name || emp.name || 'Unknown',\n    structure_name: emp.structure_name || emp.department || 'Unknown',\n    position: emp.position || 'Unknown',\n    tenure: emp.tenure || 0,\n    churn_risk: Math.round((emp.churnProbability || 0) * 100) / 100,\n    stage: emp.tenure > 5 ? 'Senior' : emp.tenure > 2 ? 'Mid Career' : 'Early Career',\n    status: emp.status || 'Resigned'\n  }));\n\n  // Generate insights based on actual resignation data\n  const mostAffectedDept = departmentPatterns[0]?.department || 'N/A';\n  const mostCommonTenureRange = tenurePatterns.sort((a, b) => b.resignation_count - a.resignation_count)[0]?.tenure_range || '1-2 years';\n  const topRiskFactor = commonRiskFactors[0]?.factor || 'Career development';\n  const totalTurnoverRate = employees.length > 0 ? Math.round((totalExits / employees.length) * 100 * 10) / 10 : 0;\n\n  const keyPatterns = [\n    totalExits === 0\n      ? 'No resigned employees found in current dataset - all employees appear to be active'\n      : departmentPatterns.length > 0 && departmentPatterns[0].resignation_count > 0\n        ? `${mostAffectedDept} department has highest resignations (${departmentPatterns[0]?.resignation_count} actual exits, ${departmentPatterns[0]?.turnover_rate}% turnover rate)`\n        : 'Even distribution of resignations across departments',\n    totalExits === 0\n      ? 'Exit pattern analysis requires historical data of employees who have left the company'\n      : tenurePatterns.length > 0\n        ? `${mostCommonTenureRange} tenure range shows highest exit rate (${tenurePatterns.find(t => t.tenure_range === mostCommonTenureRange)?.resignation_count} resignations)`\n        : 'No clear tenure pattern in resignations',\n    totalExits === 0\n      ? 'To enable exit pattern analysis, import data with resigned/terminated employees marked with appropriate status values'\n      : `${totalExits} total resignations identified from ${employees.length} employees (${totalTurnoverRate}% turnover rate)`\n  ];\n\n  const riskIndicators = [\n    totalExits === 0\n      ? 'Unable to assess turnover risk - no resigned employee data available'\n      : totalTurnoverRate > 15 ? 'High turnover rate detected across organization' : totalTurnoverRate > 10 ? 'Moderate turnover levels' : 'Low turnover rate',\n    totalExits === 0\n      ? 'Department-specific turnover patterns cannot be analyzed without resignation data'\n      : departmentPatterns.filter(d => d.resignation_count > 0 && d.turnover_rate > 20).length > 0 ? 'Specific departments showing concerning turnover patterns' : 'No department-specific turnover concerns',\n    totalExits === 0\n      ? 'Risk factor analysis requires data from employees who have actually left the company'\n      : commonRiskFactors[0]?.frequency > 0.5 ? `${topRiskFactor} identified as primary factor in ${commonRiskFactors[0]?.affectedEmployees} resignations` : 'Multiple factors contributing to turnover'\n  ];\n\n  const preventiveStrategies = [\n    'Implement targeted retention programs for high-risk departments',\n    'Address career development opportunities and growth paths',\n    'Improve work-life balance initiatives and flexible working arrangements',\n    'Regular compensation benchmarking and adjustment',\n    'Enhanced manager training and leadership development',\n    'Structured stay interviews and feedback sessions'\n  ];\n\n  const departmentInsights = departmentPatterns.slice(0, 3).map(dept =>\n    `${dept.department}: ${dept.resignation_count} resignations (${dept.turnover_rate}% turnover, ${Math.round(dept.avg_tenure * 10) / 10} avg tenure)`\n  );\n\n  return {\n    type: 'exit_pattern_mining',\n    exitData: {\n      totalResignations: totalExits,\n      departmentPatterns,\n      positionPatterns,\n      tenurePatterns,\n      commonRiskFactors,\n      seasonalPatterns,\n      riskFactorData\n    },\n    insights: {\n      detailedAnalysis: totalExits === 0\n        ? `Exit pattern analysis cannot be performed: No resigned employees found in the current dataset of ${employees.length} employees. All employees appear to have \"Active\" status. To enable meaningful exit pattern analysis, you need to import historical data that includes employees with status values like \"Resigned\", \"Terminated\", \"Left\", etc. This analysis is designed to identify patterns among employees who have already left the company to help prevent future turnover.`\n        : `Exit pattern analysis reveals ${totalExits} actual resignations from ${employees.length} total employees (${totalTurnoverRate}% turnover rate). ${mostAffectedDept} department shows highest impact with ${departmentPatterns[0]?.resignation_count || 0} resignations (${departmentPatterns[0]?.turnover_rate || 0}% department turnover). Most critical tenure period: ${mostCommonTenureRange} with ${tenurePatterns.find(t => t.tenure_range === mostCommonTenureRange)?.resignation_count || 0} resignations. Primary risk factor: ${topRiskFactor} affecting ${commonRiskFactors[0]?.affectedEmployees || 0} resigned employees.`,\n      keyPatterns,\n      riskIndicators,\n      preventiveStrategies,\n      departmentInsights,\n      patternSummary: {\n        mostAffectedDepartment: mostAffectedDept,\n        mostCommonTenureExit: mostCommonTenureRange,\n        topRiskFactor,\n        totalPatterns: keyPatterns.length\n      },\n      urgencyLevel: totalTurnoverRate > 20 ? 'Critical' : totalTurnoverRate > 10 ? 'High' : 'Medium',\n      trends: {\n        departmentTrend: departmentPatterns.length > 3 ? 'Multiple departments affected' : 'Localized patterns',\n        tenureTrend: mostCommonTenureRange.includes('1-2') ? 'Early career exits' : 'Mid-career transitions',\n        riskFactorTrend: topRiskFactor.toLowerCase().includes('career') ? 'Development focused' : 'Compensation focused'\n      }\n    },\n    summary: totalExits === 0\n      ? `Exit pattern analysis unavailable: No resigned employees found in dataset. Current data contains ${employees.length} active employees only. Import historical resignation data to enable this analysis.`\n      : `Exit pattern analysis completed: ${totalExits} actual resignations analyzed across ${departmentPatterns.length} departments with ${totalTurnoverRate}% overall turnover rate.`\n  };\n}\n\n// Memoized components\n\n// Memoized table row component\nconst EmployeeTableRow = memo(({\n  employee,\n  onReasoningClick,\n  style,\n  getRiskLevel,\n  getRiskLevelWithStyles\n}: {\n  employee: Employee;\n  onReasoningClick: (employee: Employee) => void;\n  style?: React.CSSProperties;\n  getRiskLevel: (probability: number) => 'High' | 'Medium' | 'Low';\n  getRiskLevelWithStyles: (probability: number) => any;\n}) => {\n  // Handle potential NaN in churnProbability\n  const probability = isNaN(employee.churnProbability) ? 0 : employee.churnProbability;\n\n  // Get risk level and styling from dynamic thresholds\n  const riskInfo = getRiskLevelWithStyles(probability);\n  const riskLevel = getRiskLevel(probability);\n\n  // Check if employee data seems malformed\n  const hasIssues = !employee.full_name || employee.full_name.includes('Unknown') || !employee.structure_name || !employee.position;\n\n  // Memoize confidence calculations for performance\n  const confidence = useMemo(() => {\n    return employee.reasoningConfidence\n      ? Math.round(employee.reasoningConfidence * 100)\n      : (employee.confidenceScore || 0);\n  }, [employee.reasoningConfidence, employee.confidenceScore]);\n\n  const confidenceColor = useMemo(() => {\n    if (confidence >= 80) return 'bg-green-500';\n    if (confidence >= 60) return 'bg-blue-500';\n    if (confidence >= 40) return 'bg-yellow-500';\n    return 'bg-red-500';\n  }, [confidence]);\n\n  const handleReasoningClick = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent row click\n    onReasoningClick(employee);\n  }, [onReasoningClick, employee]);\n\n  return (\n    // Outermost element is now a div with flex display\n    <div\n      style={style} // Apply virtualization style (includes position: absolute, transform, height, width: 100%)\n      className={cn(\n        `flex items-center border-b border-gray-100 dark:border-gray-700/80`, // Use flex, add bottom border\n        `hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ${hasIssues ? 'bg-red-50 dark:bg-red-900/10' : ''} cursor-pointer`\n      )}\n      onClick={() => onReasoningClick(employee)}\n    >\n      {/* Inner elements are divs with widths and padding matching TH */}\n      <div className=\"px-6 py-3 text-sm font-medium text-gray-900 dark:text-gray-100 truncate w-[20%]\">\n        {employee.full_name || (\n          <span className=\"text-red-500 dark:text-red-400 flex items-center gap-1\">\n            {/* SVG */} Missing Name\n          </span>\n        )}\n      </div>\n      <div className=\"px-6 py-3 text-sm text-gray-600 dark:text-gray-400 truncate w-[15%]\">\n        {employee.structure_name || 'Unassigned'}\n      </div>\n      <div className=\"px-6 py-3 text-sm text-gray-600 dark:text-gray-400 truncate w-[15%]\">\n        {employee.position || 'Unassigned'}\n      </div>\n      <div className=\"px-6 py-3 w-[10%]\">\n        <span className={cn(\n          'px-2.5 py-0.5 text-xs font-medium rounded-full inline-block',\n          `${riskInfo.color} ${riskInfo.bgColor} ${riskInfo.darkColor} ${riskInfo.darkBgColor}`\n        )}>\n          {riskLevel}\n        </span>\n      </div>\n      <div className=\"px-6 py-3 w-[15%]\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"text-sm font-medium text-gray-900 dark:text-gray-200\">\n            {(probability * 100).toFixed(1)}%\n          </div>\n          <div className=\"flex items-center gap-1.5 bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded-md border border-blue-200 dark:border-blue-800\">\n            <div className={`w-2 h-2 rounded-full ${confidenceColor}`}></div>\n            <span className=\"text-xs text-blue-700 dark:text-blue-300 whitespace-nowrap font-medium\">\n              {confidence}% conf.\n            </span>\n          </div>\n        </div>\n      </div>\n      <div className=\"px-6 py-3 text-sm text-gray-600 dark:text-gray-400 w-[10%]\">\n        {employee.status || 'Active'}\n      </div>\n      <div className=\"px-6 py-3 w-[15%]\">\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={handleReasoningClick}\n            className=\"flex items-center gap-1 px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-800/50 text-purple-700 dark:text-purple-300 rounded transition-colors\"\n          >\n            <Brain className=\"w-3 h-3\" />\n            Reasoning\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n});\n\n// Memoized header component\nconst Header = memo(() => (\n  <div className=\"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 -mx-6 -mt-6 px-8 py-8 border-b border-gray-700/50 relative overflow-hidden\">\n    <div className=\"absolute inset-0 overflow-hidden\">\n      <div className=\"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]\"></div>\n      <div className=\"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-500/50 to-transparent\"></div>\n    </div>\n\n    <div className=\"relative\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <div className=\"flex items-center gap-3 mb-3\">\n            <motion.h1\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200 animate-gradient\"\n            >\n              ChurnVision - Employee Churn Risk Dashboard\n            </motion.h1>\n            <div className=\"flex items-center gap-2\">\n              {/* Pulse Badge */}\n              <motion.span\n                initial={{ opacity: 0, scale: 0.9 }}\n                animate={{ opacity: 1, scale: 1 }}\n                transition={{ delay: 0.2 }}\n                className=\"relative group\"\n              >\n                <span className=\"px-2.5 py-1 text-xs font-semibold bg-sky-500/10 text-sky-300 rounded-md border border-sky-500/30 relative z-10 flex items-center gap-1.5 shadow-sm group-hover:bg-sky-500/20 transition-all duration-200\">\n                  <span className=\"h-2 w-2 rounded-full bg-sky-400 block animate-pulse group-hover:animate-none\"></span>\n                  Pulse\n                </span>\n                <div className=\"absolute inset-0 bg-sky-500/20 rounded-md blur-sm opacity-70 group-hover:opacity-100 transition-opacity duration-200\"></div>\n              </motion.span>\n\n              <motion.span\n                initial={{ opacity: 0, scale: 0.9 }}\n                animate={{ opacity: 1, scale: 1 }}\n                transition={{ delay: 0.3 }}\n                className=\"relative group\"\n              >\n                <span className=\"px-2.5 py-1 text-xs font-medium bg-emerald-500/10 text-emerald-300 rounded-md border border-emerald-500/30 relative z-10 flex items-center gap-1.5 shadow-sm group-hover:bg-emerald-500/20 transition-all duration-200\">\n                  <span className=\"h-2 w-2 rounded-full bg-emerald-400 block animate-pulse group-hover:animate-none\"></span>\n                  ML-Based\n                </span>\n                <div className=\"absolute inset-0 bg-emerald-500/20 rounded-md blur-sm opacity-70 group-hover:opacity-100 transition-opacity duration-200\"></div>\n              </motion.span>\n            </div>\n          </div>\n          <motion.p\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n            className=\"text-base text-gray-400 max-w-2xl\"\n          >\n            Step into the future of talent retention. Our AI-driven platform empowers you to monitor and analyze employee churn risk factors with unprecedented precision.\n          </motion.p>\n        </div>\n      </div>\n    </div>\n  </div>\n));\n\n// *** Modified Component: RiskBarCard ***\ninterface RiskBarCardProps {\n  title: string;\n  count: number;\n  total: number;\n  colorClass: string;\n}\n\n// Updated RiskBarCard to match the image layout more closely\nconst RiskBarCard: React.FC<RiskBarCardProps> = ({ title, count, total, colorClass }) => {\n  const percentage = total > 0 ? (count / total) * 100 : 0;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      // Refined styling: slightly less padding (p-4), lighter border, potentially less shadow\n      className={cn(\n        `bg-white dark:bg-gray-800/50 p-4 rounded-lg border h-full min-h-[90px]`,\n        `border-gray-200/75 dark:border-gray-700/50 shadow-xs` // Lighter border, smaller shadow\n      )}\n    >\n      <p className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2\">{title}</p>\n      <div className=\"flex items-center space-x-3\"> {/* Slightly reduced space */}\n        <div className=\"flex-grow h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\"> {/* Slightly thinner bar */}\n          <motion.div\n            className={`h-full rounded-full bg-${colorClass}-500 dark:bg-${colorClass}-600`}\n            initial={{ width: 0 }}\n            animate={{ width: `${percentage}%` }}\n            transition={{ duration: 0.8, ease: \"easeOut\" }}\n            title={`${percentage.toFixed(1)}%`}\n          />\n        </div>\n        {/* Adjusted count styling slightly */}\n        <p className=\"text-base font-semibold text-gray-700 dark:text-gray-300 flex-shrink-0 w-10 text-right\">\n          {count}\n        </p>\n      </div>\n    </motion.div>\n  );\n};\n\n\n\n// --- Debounce Hook ---\nfunction useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    // Cancel the timeout if value changes (also on delay change or unmount)\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport function Home(): React.ReactElement {\n  const { activeProject } = useProject();\n  const {\n    homeEmployees,\n    isLoadingHomeData,\n    isEnhancingWithReasoning,\n    reasoningEnhancementProgress,\n    fetchHomeData,\n    trainingStatus\n  } = useGlobalDataCache();\n\n  // Use centralized dynamic risk threshold functions\n  const getRiskLevel = getDynamicRiskLevel;\n  const getRiskLevelWithStyles = getDynamicRiskLevelWithStyles;\n  const [thresholdVersion, setThresholdVersion] = useState(0);\n\n  // Tab state management\n  const [activeTab, setActiveTab] = useState<'dashboard' | 'deep-analysis' | 'network'>('dashboard');\n\n  // Wrapper function to prevent access to insights tab\n  const setActiveTabSafe = (tab: 'dashboard' | 'deep-analysis' | 'network') => {\n    setActiveTab(tab);\n  };\n\n  // Deep Analysis state\n  const [selectedAnalysisType, setSelectedAnalysisType] = useState<string>('');\n  const [analysisParams, setAnalysisParams] = useState({\n    departmentFilter: 'all-departments',\n    timePeriod: 'last-12-months',\n    riskLevel: 'all-risk-levels',\n    employeeGroup: 'all-employees'\n  });\n  const [isAnalysisRunning, setIsAnalysisRunning] = useState(false);\n  const [analysisResults, setAnalysisResults] = useState<any>(null);\n\n  // Insights tab state - Temporarily disabled\n  // const [selectedInsightType, setSelectedInsightType] = useState<'workforce-trends' | 'department-analysis' | 'exit-patterns'>('workforce-trends');\n  // const [insightsData, setInsightsData] = useState<WorkforceTrendsAnalysisData | DepartmentAnalysisData | EnhancedExitPatternMiningData | null>(null);\n  // const [isGeneratingInsights, setIsGeneratingInsights] = useState(false);\n\n  // State management\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedDepartment, setSelectedDepartment] = useState('');\n  const [selectedPosition, setSelectedPosition] = useState('');\n  const [selectedRiskLevel, setSelectedRiskLevel] = useState('');\n  const [selectedStatus, setSelectedStatus] = useState('Active');\n  const [sortField, setSortField] = useState<SortableField>('churnProbability');\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc');\n\n  useEffect(() => {\n    const unsubscribe = subscribeToThresholdChanges(() => {\n      setThresholdVersion((prev) => prev + 1);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n  const [isUploadWindowOpen, setIsUploadWindowOpen] = useState(false);\n  const [error] = useState<string | null>(null);\n  const [showNotification, setShowNotification] = useState(false);\n  const [notificationMessage, setNotificationMessage] = useState('');\n\n  // Debounced search term\n  const debouncedSearchTerm = useDebounce(searchTerm, 300);\n\n  // Parent ref for the virtualizer\n  const parentRef = useRef<HTMLDivElement>(null);\n  const hasReasoningData = useMemo(\n    () =>\n      (homeEmployees || []).some(\n        emp => emp?.hasReasoningData || typeof emp?.reasoningChurnRisk === 'number'\n      ),\n    [homeEmployees]\n  );\n  const isModelReady = trainingStatus?.status === 'complete' || hasReasoningData;\n\n  // Fetch and process data\n  useEffect(() => {\n    if (!activeProject) {\n      return;\n    }\n\n    const initializeData = async () => {\n      try {\n        // Check if this is a refresh after an upload by checking the URL\n        const urlParams = new URLSearchParams(window.location.search);\n        const isPostUpload = urlParams.get('refresh') === 'true';\n\n        if (isPostUpload) {\n          // Force a complete refresh of the data\n          await fetchHomeData(activeProject.id, true);\n\n          // Clear the URL parameter after using it\n          window.history.replaceState({}, document.title, window.location.pathname);\n        } else {\n          // Initial load - use cache if available\n          // Pass false to forceRefresh to use cache\n          // Pass project ID to fetchHomeData\n          await fetchHomeData(activeProject.id, false);\n        }\n\n      } catch (err) {\n        // Error loading data - logged silently in production\n      }\n    };\n\n    initializeData();\n  }, [activeProject, fetchHomeData]);\n\n  // Use homeEmployees directly from the global cache\n  const employees = homeEmployees || [];\n  const isLoading = isLoadingHomeData;\n  const hasChurnReasoningData = useMemo(() =>\n    employees.some(emp =>\n      typeof (emp as any)?.churnProbability === 'number' ||\n      typeof (emp as any)?.reasoningChurnRisk === 'number' ||\n      (emp as any)?.hasReasoningData\n    )\n    , [employees]);\n\n  // Base filtered data (before dropdown filters) for cascade filtering\n  const baseFilteredEmployees = useMemo(() => {\n    if (!debouncedSearchTerm) return employees;\n\n    // Apply search filter only\n    const searchLower = debouncedSearchTerm.toLowerCase();\n    return employees.filter(employee => {\n      const fullName = employee.full_name || '';\n      const structureName = employee.structure_name || '';\n      const position = employee.position || '';\n\n      return fullName.toLowerCase().includes(searchLower) ||\n        structureName.toLowerCase().includes(searchLower) ||\n        position.toLowerCase().includes(searchLower);\n    });\n  }, [employees, debouncedSearchTerm]);\n\n  // Cascade filter options based on current selections\n  const availableDepartments = useMemo(() => {\n    let dataForDepts = baseFilteredEmployees;\n\n    // Apply other active filters except department\n    if (selectedPosition && selectedPosition !== 'All') {\n      dataForDepts = dataForDepts.filter(emp => (emp.position || 'Unassigned') === selectedPosition);\n    }\n    if (selectedRiskLevel && selectedRiskLevel !== 'All') {\n      dataForDepts = dataForDepts.filter(emp => {\n        const riskLevel = getRiskLevel(emp.churnProbability || 0);\n        return riskLevel === selectedRiskLevel;\n      });\n    }\n    if (selectedStatus && selectedStatus !== 'All') {\n      dataForDepts = dataForDepts.filter(emp => (emp.status || 'Active') === selectedStatus);\n    }\n\n    const deptSet = new Set<string>();\n    dataForDepts.forEach(emp => {\n      deptSet.add(emp.structure_name || emp.department || 'Unassigned');\n    });\n\n    return ['All', ...Array.from(deptSet).sort()];\n  }, [baseFilteredEmployees, selectedPosition, selectedRiskLevel, selectedStatus, getRiskLevel, thresholdVersion]);\n\n  const availablePositions = useMemo(() => {\n    let dataForPositions = baseFilteredEmployees;\n\n    // Apply other active filters except position\n    if (selectedDepartment && selectedDepartment !== 'All') {\n      dataForPositions = dataForPositions.filter(emp => (emp.structure_name || emp.department || 'Unassigned') === selectedDepartment);\n    }\n    if (selectedRiskLevel && selectedRiskLevel !== 'All') {\n      dataForPositions = dataForPositions.filter(emp => {\n        const riskLevel = getRiskLevel(emp.churnProbability || 0);\n        return riskLevel === selectedRiskLevel;\n      });\n    }\n    if (selectedStatus && selectedStatus !== 'All') {\n      dataForPositions = dataForPositions.filter(emp => (emp.status || 'Active') === selectedStatus);\n    }\n\n    const posSet = new Set<string>();\n    dataForPositions.forEach(emp => {\n      posSet.add(emp.position || 'Unassigned');\n    });\n\n    return ['All', ...Array.from(posSet).sort()];\n  }, [baseFilteredEmployees, selectedDepartment, selectedRiskLevel, selectedStatus, getRiskLevel, thresholdVersion]);\n\n  const availableRiskLevels = useMemo(() => {\n    let dataForRisk = baseFilteredEmployees;\n\n    // Apply other active filters except risk level\n    if (selectedDepartment && selectedDepartment !== 'All') {\n      dataForRisk = dataForRisk.filter(emp => (emp.structure_name || emp.department || 'Unassigned') === selectedDepartment);\n    }\n    if (selectedPosition && selectedPosition !== 'All') {\n      dataForRisk = dataForRisk.filter(emp => (emp.position || 'Unassigned') === selectedPosition);\n    }\n    if (selectedStatus && selectedStatus !== 'All') {\n      dataForRisk = dataForRisk.filter(emp => (emp.status || 'Active') === selectedStatus);\n    }\n\n    const riskSet = new Set<string>();\n    dataForRisk.forEach(emp => {\n      const riskLevel = getRiskLevel(emp.churnProbability || 0);\n      riskSet.add(riskLevel);\n    });\n\n    return ['All', ...Array.from(riskSet).sort()];\n  }, [baseFilteredEmployees, selectedDepartment, selectedPosition, selectedStatus, getRiskLevel, thresholdVersion]);\n\n  const availableStatuses = useMemo(() => {\n    let dataForStatus = baseFilteredEmployees;\n\n    // Apply other active filters except status\n    if (selectedDepartment && selectedDepartment !== 'All') {\n      dataForStatus = dataForStatus.filter(emp => (emp.structure_name || emp.department || 'Unassigned') === selectedDepartment);\n    }\n    if (selectedPosition && selectedPosition !== 'All') {\n      dataForStatus = dataForStatus.filter(emp => (emp.position || 'Unassigned') === selectedPosition);\n    }\n    if (selectedRiskLevel && selectedRiskLevel !== 'All') {\n      dataForStatus = dataForStatus.filter(emp => {\n        const riskLevel = getRiskLevel(emp.churnProbability || 0);\n        return riskLevel === selectedRiskLevel;\n      });\n    }\n\n    const statusSet = new Set<string>();\n    dataForStatus.forEach(emp => {\n      statusSet.add(emp.status || 'Active');\n    });\n\n    return ['All', ...Array.from(statusSet).sort()];\n  }, [baseFilteredEmployees, selectedDepartment, selectedPosition, selectedRiskLevel, getRiskLevel, thresholdVersion]);\n\n  // Final filtered data with all filters applied\n  const filteredEmployees = useMemo(() => {\n    let filtered = baseFilteredEmployees;\n\n    // Apply dropdown filters\n    if (selectedDepartment && selectedDepartment !== 'All') {\n      filtered = filtered.filter(emp => (emp.structure_name || emp.department || 'Unassigned') === selectedDepartment);\n    }\n\n    if (selectedPosition && selectedPosition !== 'All') {\n      filtered = filtered.filter(emp => (emp.position || 'Unassigned') === selectedPosition);\n    }\n\n    if (selectedRiskLevel && selectedRiskLevel !== 'All') {\n      filtered = filtered.filter(emp => {\n        const riskLevel = getRiskLevel(emp.churnProbability || 0);\n        return riskLevel === selectedRiskLevel;\n      });\n    }\n\n    if (selectedStatus && selectedStatus !== 'All') {\n      filtered = filtered.filter(emp => (emp.status || 'Active') === selectedStatus);\n    }\n\n    return filtered;\n  }, [baseFilteredEmployees, selectedDepartment, selectedPosition, selectedRiskLevel, selectedStatus, getRiskLevel, thresholdVersion]);\n\n  // Derive display metrics from filtered employees - OPTIMIZED\n  const displayMetrics = useMemo(() => {\n    const totalEmployees = filteredEmployees.length;\n    if (totalEmployees === 0) {\n      return {\n        total_employees: 0,\n        average_churn_probability: 0,\n        risk_levels: { high: 0, medium: 0, low: 0 },\n        high_risk_count: 0,\n        medium_risk_count: 0,\n        low_risk_count: 0\n      };\n    }\n\n    // Calculate all metrics in a single pass for better performance\n    let churnSum = 0;\n    const riskDistribution = { high: 0, medium: 0, low: 0 };\n\n    for (const emp of filteredEmployees) {\n      const churnProb = emp.churnProbability || 0;\n      churnSum += churnProb;\n\n      // Calculate risk level once and increment counter\n      const riskLevel = getRiskLevel(churnProb);\n      if (riskLevel === 'High') riskDistribution.high++;\n      else if (riskLevel === 'Medium') riskDistribution.medium++;\n      else riskDistribution.low++;\n    }\n\n    const avgChurnProb = churnSum / totalEmployees;\n\n    return {\n      total_employees: totalEmployees,\n      average_churn_probability: avgChurnProb,\n      risk_levels: riskDistribution,\n      // Keep the old properties for backward compatibility\n      high_risk_count: riskDistribution.high,\n      medium_risk_count: riskDistribution.medium,\n      low_risk_count: riskDistribution.low\n    };\n  }, [filteredEmployees.length, filteredEmployees, thresholdVersion]);\n\n\n\n\n\n\n\n  // Step 3: Sort the filtered employees for the table\n  const sortedEmployees = useMemo(() => {\n    if (!filteredEmployees.length) return [];\n\n    return [...filteredEmployees].sort((a, b) => {\n      let aValue: any, bValue: any;\n\n      switch (sortField) {\n        case 'full_name':\n          aValue = (a.full_name || '').toLowerCase();\n          bValue = (b.full_name || '').toLowerCase();\n          break;\n        case 'structure_name':\n          aValue = (a.structure_name || a.department || '').toLowerCase();\n          bValue = (b.structure_name || b.department || '').toLowerCase();\n          break;\n        case 'position':\n          aValue = (a.position || '').toLowerCase();\n          bValue = (b.position || '').toLowerCase();\n          break;\n        case 'churnProbability':\n          aValue = a.churnProbability || 0;\n          bValue = b.churnProbability || 0;\n          break;\n        case 'status':\n          aValue = (a.status || 'Active').toLowerCase();\n          bValue = (b.status || 'Active').toLowerCase();\n          break;\n        case 'riskLevel':\n          const riskOrder: Record<string, number> = { 'High': 3, 'Medium': 2, 'Low': 1 };\n          aValue = riskOrder[getRiskLevel(a.churnProbability || 0)] || 0;\n          bValue = riskOrder[getRiskLevel(b.churnProbability || 0)] || 0;\n          break;\n        default:\n          return 0;\n      }\n\n      if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;\n      if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [filteredEmployees, sortField, sortDirection, thresholdVersion]);\n\n  // Virtualization setup\n  const rowVirtualizer = useVirtualizer({\n    count: sortedEmployees.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => 60,\n    overscan: 5,\n  });\n\n  // Memoized sort handler\n  const handleSort = useCallback((field: SortableField) => {\n    if (sortField === field) {\n      setSortDirection(prevDirection => prevDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n    }\n  }, [sortField]);\n\n  const SortIcon = ({ field }: { field: SortableField }) => {\n    if (sortField !== field) return null\n    return sortDirection === 'asc' ?\n      <ChevronUp key={`sort-icon-${field}-asc`} className=\"w-4 h-4 ml-1\" /> :\n      <ChevronDown key={`sort-icon-${field}-desc`} className=\"w-4 h-4 ml-1\" />\n  }\n\n  const renderHeader = () => (\n    <Header />\n  )\n\n  // Handle reasoning button click\n  const navigate = useNavigate();\n\n  const handleReasoningClick = (employee: Employee) => {\n    navigate(`/reasoning/${employee.hr_code}`, { state: { employeeName: employee.full_name } });\n  };\n\n  // Immediately remove training indicator if it exists\n  useEffect(() => {\n    // Remove any existing training indicator\n    const existingIndicator = document.getElementById('model-training-indicator');\n    if (existingIndicator && existingIndicator.parentNode) {\n      existingIndicator.parentNode.removeChild(existingIndicator);\n    }\n\n    // Clear training status in localStorage\n    localStorage.removeItem('modelTrainingInProgress');\n    localStorage.removeItem('modelTrainingStartTime');\n  }, []);\n\n  // Check for data upload note - now using React state\n  useEffect(() => {\n    const dataUploadNote = localStorage.getItem('dataUploadNote');\n\n    if (dataUploadNote) {\n      setNotificationMessage(dataUploadNote);\n      setShowNotification(true);\n\n      // Clean up localStorage when showing notification\n      localStorage.removeItem('dataUploadNote');\n    }\n  }, []);\n\n  const handleNotificationClose = useCallback(() => {\n    setShowNotification(false);\n  }, []);\n\n  // Generate insights for the selected insight type - Temporarily disabled\n  /*\n  const generateInsights = useCallback(async () => {\n    if (!filteredEmployees.length) {\n      return;\n    }\n\n    setIsGeneratingInsights(true);\n    \n    try {\n      let data: WorkforceTrendsAnalysisData | DepartmentAnalysisData | EnhancedExitPatternMiningData;\n      \n      switch (selectedInsightType) {\n        case 'workforce-trends':\n          data = generateWorkforceTrendsData(filteredEmployees, thresholds);\n          break;\n        case 'department-analysis':\n          data = generateDepartmentAnalysisData(filteredEmployees, thresholds);\n          break;\n        case 'exit-patterns':\n          data = generateExitPatternData(filteredEmployees);\n          break;\n        default:\n          data = generateWorkforceTrendsData(filteredEmployees, thresholds);\n      }\n      \n      setInsightsData(data);\n    } catch (error) {\n      console.error('Error generating insights:', error);\n    } finally {\n      setIsGeneratingInsights(false);\n    }\n  }, [filteredEmployees, selectedInsightType, thresholds]);\n\n  // Auto-generate insights when tab is switched\n  useEffect(() => {\n    if (activeTab === 'insights' && filteredEmployees.length > 0 && !isGeneratingInsights) {\n      const generateAsync = async () => {\n        if (!filteredEmployees.length) {\n          return;\n        }\n\n        setIsGeneratingInsights(true);\n        \n        try {\n          let data: WorkforceTrendsAnalysisData | DepartmentAnalysisData | EnhancedExitPatternMiningData;\n          \n          switch (selectedInsightType) {\n            case 'workforce-trends':\n              data = generateWorkforceTrendsData(filteredEmployees, getCurrentThresholds());\n              break;\n            case 'department-analysis':\n              data = generateDepartmentAnalysisData(filteredEmployees, getCurrentThresholds());\n              break;\n            case 'exit-patterns':\n              data = generateExitPatternData(filteredEmployees);\n              break;\n            default:\n              data = generateWorkforceTrendsData(filteredEmployees, getCurrentThresholds());\n          }\n          \n          setInsightsData(data);\n        } catch (error) {\n          console.error('Error generating insights:', error);\n        } finally {\n          setIsGeneratingInsights(false);\n        }\n      };\n      \n      generateAsync();\n    }\n  }, [activeTab, filteredEmployees.length, selectedInsightType, isGeneratingInsights]);\n  */\n\n  useEffect(() => {\n    if (isModelReady && homeEmployees && homeEmployees.length > 0) {\n      autoThresholdService.start(homeEmployees);\n    } else {\n      autoThresholdService.stop();\n    }\n\n    return () => {\n      autoThresholdService.stop();\n    };\n  }, [isModelReady, homeEmployees]);\n\n  if (!activeProject) {\n    return (\n      <div\n        className=\"h-full w-full flex items-center justify-center text-center p-6 bg-gray-50 dark:bg-gray-900\"\n        style={{\n          minHeight: '400px',\n          height: '100%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          backgroundColor: '#f9fafb', // Neutral light gray\n          border: '1px solid #e5e7eb', // Neutral border\n        }}\n      >\n        <div>\n          <FolderKanban className=\"mx-auto h-16 w-16 text-gray-400 dark:text-gray-600 mb-4\" />\n          <h2 className=\"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n            No Project Active\n          </h2>\n          <p className=\"text-gray-500 dark:text-gray-400\">\n            Please select or create a project to view the dashboard.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isModelReady) {\n    return <ModelTrainingRequired status={trainingStatus?.status} message={trainingStatus?.message} />;\n  }\n\n  // Additional debug fallback - if we somehow get past all conditions\n\n  return (\n    <div className=\"h-full flex flex-col p-6 bg-gray-50 dark:bg-gray-900\">\n      {/* Data Upload Window */}\n      {isUploadWindowOpen && (\n        <DataUploadWindow\n          show={isUploadWindowOpen}\n          onClose={() => setIsUploadWindowOpen(false)}\n          onUploadSuccess={() => {\n            // Force refresh data after upload with a delay to ensure backend has processed\n            setTimeout(() => {\n              fetchHomeData(activeProject.id, true);\n            }, 2000);\n          }}\n        />\n      )}\n\n      {/* Data Upload Notification */}\n      <DataUploadNotification\n        show={showNotification}\n        message={notificationMessage}\n        onClose={handleNotificationClose}\n      />\n\n      <div className=\"mb-6\">\n        {renderHeader()}\n      </div>\n\n      <div className=\"mb-6\">\n        <TrainingReminderBanner />\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-t-lg mb-6\">\n        <div className=\"flex space-x-6 px-6\">\n          <button\n            onClick={() => setActiveTabSafe('dashboard')}\n            className={cn(\n              'relative py-2 px-1 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n              activeTab === 'dashboard'\n                ? 'text-blue-600 dark:text-blue-400'\n                : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n            )}\n          >\n            <span className=\"font-semibold\">Dashboard</span>\n\n            {/* Active tab indicator */}\n            {activeTab === 'dashboard' && (\n              <motion.div\n                className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400\"\n                layoutId=\"activeTabIndicator\"\n                initial={false}\n                transition={{\n                  type: \"spring\",\n                  stiffness: 500,\n                  damping: 30\n                }}\n              />\n            )}\n          </button>\n\n        </div>\n      </div>\n\n      {/* Dashboard Tab Content */}\n      {activeTab === 'dashboard' && (\n        <>\n          {/* Reasoning Enhancement Progress Indicator */}\n          {isEnhancingWithReasoning && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-4\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex items-center gap-2\">\n                  <Brain className=\"w-4 h-4 text-blue-600 dark:text-blue-400 animate-pulse\" />\n                  <span className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">\n                    Enhancing data with AI reasoning...\n                  </span>\n                </div>\n                <div className=\"flex-1 bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden\">\n                  <motion.div\n                    className=\"h-full bg-blue-500 dark:bg-blue-400 rounded-full\"\n                    initial={{ width: 0 }}\n                    animate={{ width: `${reasoningEnhancementProgress}%` }}\n                    transition={{ duration: 0.3, ease: \"easeOut\" }}\n                  />\n                </div>\n                <span className=\"text-xs text-blue-600 dark:text-blue-400 font-medium min-w-[3rem] text-right\">\n                  {reasoningEnhancementProgress}%\n                </span>\n              </div>\n            </motion.div>\n          )}\n\n          {/* Metrics Section - Now uses displayMetrics */}\n          {/* Render even if zero, showing 0 values */}\n          <motion.div\n            className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\"\n            // Animate presence might be needed if metrics can become null/undefined\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ staggerChildren: 0.1 }}\n          >\n            {/* Average Churn Probability Card */}\n            <motion.div\n              // ... animation props ...\n              className={cn(\n                `bg-white dark:bg-gray-800/50 p-4 rounded-lg border h-full min-h-[90px]`,\n                `border-gray-200/75 dark:border-gray-700/50 shadow-xs`\n              )}\n            >\n              <p className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">Average Churn Probability</p>\n              {/* Display calculated average */}\n              <p className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">\n                {(displayMetrics.average_churn_probability * 100).toFixed(1)}%\n              </p>\n            </motion.div>\n\n            {/* Risk Bar Cards - Use displayMetrics */}\n            <RiskBarCard\n              title=\"High Risk\"\n              count={displayMetrics.risk_levels.high}\n              total={displayMetrics.total_employees}\n              colorClass=\"red\"\n            />\n            <RiskBarCard\n              title=\"Medium Risk\"\n              count={displayMetrics.risk_levels.medium}\n              total={displayMetrics.total_employees}\n              colorClass=\"yellow\"\n            />\n            <RiskBarCard\n              title=\"Low Risk\"\n              count={displayMetrics.risk_levels.low}\n              total={displayMetrics.total_employees}\n              colorClass=\"green\"\n            />\n          </motion.div>\n\n\n\n          {/* Filter Controls Section - Simplified Trigger Styling */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4\">\n            <div className=\"relative md:col-span-1 lg:col-span-2\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <Input\n                placeholder=\"Search employees...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                // Removed explicit style, rely on default Input style + padding\n                className=\"pl-9\"\n              />\n            </div>\n            <Select value={selectedDepartment} onValueChange={setSelectedDepartment}>\n              <SelectTrigger>\n                <SelectValue placeholder={`All Departments (${availableDepartments.length - 1})`} />\n              </SelectTrigger>\n              <SelectContent>\n                {availableDepartments.map((dep: string) => (\n                  <SelectItem key={dep} value={dep}>{dep}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <Select value={selectedPosition} onValueChange={setSelectedPosition}>\n              <SelectTrigger>\n                <SelectValue placeholder={`All Positions (${availablePositions.length - 1})`} />\n              </SelectTrigger>\n              <SelectContent>\n                {availablePositions.map((pos: string) => (\n                  <SelectItem key={pos} value={pos}>{pos}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <Select value={selectedRiskLevel} onValueChange={setSelectedRiskLevel}>\n              <SelectTrigger>\n                <SelectValue placeholder={`All Risk Levels (${availableRiskLevels.length - 1})`} />\n              </SelectTrigger>\n              <SelectContent>\n                {availableRiskLevels.map((level: string) => (\n                  <SelectItem key={level} value={level}>{level}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <Select value={selectedStatus} onValueChange={setSelectedStatus}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Active\" />\n              </SelectTrigger>\n              <SelectContent>\n                {availableStatuses.map((status: string) => (\n                  <SelectItem key={status} value={status}>{status}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Table Section - Corrected Structure */}\n          <div ref={parentRef} className=\"flex-1 bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-auto min-h-0 border border-gray-200/75 dark:border-gray-700/50 relative\" style={{ maxHeight: '400px' }}>\n            {isLoading || error || sortedEmployees.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full min-h-[300px]\">\n                {/* Loading spinner or empty state */}\n                {isLoading && <LoadingStates.PageLoading text=\"Loading employee data...\" />}\n                {error && (\n                  <div className=\"text-center\">\n                    <div className=\"text-red-600 dark:text-red-400 font-medium mb-2\">Error loading data</div>\n                    <p className=\"text-gray-500 dark:text-gray-400 text-sm\">{error}</p>\n                  </div>\n                )}\n                {!isLoading && !error && sortedEmployees.length === 0 && (\n                  <div className=\"text-center\">\n                    <div className=\"text-gray-600 dark:text-gray-400 font-medium mb-2\">No employees found</div>\n                    <p className=\"text-gray-500 dark:text-gray-400 text-sm\">Try adjusting your filters or search criteria</p>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <>\n                {/* Keep the table for the header only */}\n                <table className=\"w-full table-fixed border-collapse\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700/50 sticky top-0 z-10\">\n                    <tr>\n                      {/* TH elements - Removed uppercase and tracking-wider */}\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors w-[20%]\">\n                        <div className=\"flex items-center\" onClick={() => handleSort('full_name')}>\n                          Name <SortIcon field=\"full_name\" />\n                        </div>\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors w-[15%]\">\n                        <div className=\"flex items-center\" onClick={() => handleSort('structure_name')}>\n                          Department <SortIcon field=\"structure_name\" />\n                        </div>\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors w-[15%]\">\n                        <div className=\"flex items-center\" onClick={() => handleSort('position')}>\n                          Position <SortIcon field=\"position\" />\n                        </div>\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors w-[10%]\">\n                        <div className=\"flex items-center\" onClick={() => handleSort('riskLevel')}>\n                          Risk <SortIcon field=\"riskLevel\" />\n                        </div>\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors w-[15%]\">\n                        <div className=\"flex items-center\" onClick={() => handleSort('churnProbability')}>\n                          Churn % <SortIcon field=\"churnProbability\" />\n                        </div>\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors w-[10%]\">\n                        <div className=\"flex items-center\" onClick={() => handleSort('status')}>\n                          Status <SortIcon field=\"status\" />\n                        </div>\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 w-[15%]\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                </table>\n                {/* Container for virtualized rows */}\n                <div\n                  className=\"relative w-full\"\n                  style={{ height: `${rowVirtualizer.getTotalSize()}px` }}\n                >\n                  {/* Absolutely positioned rows rendered here */}\n                  {rowVirtualizer.getVirtualItems().map((virtualRow) => {\n                    const employee = sortedEmployees[virtualRow.index];\n                    if (!employee) return null;\n                    return (\n                      <EmployeeTableRow\n                        key={employee.hr_code || virtualRow.index}\n                        employee={employee}\n                        onReasoningClick={handleReasoningClick}\n                        getRiskLevel={getRiskLevel}\n                        getRiskLevelWithStyles={getRiskLevelWithStyles}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          height: `${virtualRow.size}px`,\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                      />\n                    );\n                  })}\n                </div>\n              </>\n            )}\n          </div>\n        </>\n      )}\n\n      {activeTab === 'network' && (\n        <div className=\"space-y-6\">\n          <EmployeeNetworkGraph\n            employees={filteredEmployees}\n            availableDepartments={availableDepartments}\n            isLoading={isLoading}\n          />\n          <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n            Only employees with at least two shared connections (2+ links) are displayed; relationship strength uses\n            optional columns when present (e.g. age, work_location, remote_preference) and any missing values are\n            ignored.\n          </p>\n        </div>\n      )}\n\n      {/* Deep Analysis Tab Content */}\n      {activeTab === 'deep-analysis' && (\n        <div className=\"space-y-6\">\n          {/* Analysis Type Selector */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">Select Analysis Type</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <motion.button\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                onClick={() => setSelectedAnalysisType('churn-patterns')}\n                className={cn(\n                  \"p-4 border-2 rounded-lg transition-colors text-left\",\n                  selectedAnalysisType === 'churn-patterns'\n                    ? \"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20\"\n                    : \"border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400\"\n                )}\n              >\n                <div className=\"flex items-center mb-3\">\n                  <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mr-3\">\n                    <Brain className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                  <h4 className=\"font-medium text-gray-900 dark:text-gray-100\">Churn Pattern Analysis</h4>\n                </div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Analyze churn reasoning data to identify patterns and risk factors across your organization.\n                </p>\n              </motion.button>\n\n              <motion.button\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className=\"p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg hover:border-green-500 dark:hover:border-green-400 transition-colors text-left opacity-50 cursor-not-allowed\"\n              >\n                <div className=\"flex items-center mb-3\">\n                  <div className=\"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center mr-3\">\n                    <ChevronUp className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                  </div>\n                  <h4 className=\"font-medium text-gray-900 dark:text-gray-100\">Engagement Correlation</h4>\n                </div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Correlate engagement survey data with churn risk to identify satisfaction drivers.\n                </p>\n                <div className=\"mt-2\">\n                  <span className=\"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded\">\n                    Requires engagement data\n                  </span>\n                </div>\n              </motion.button>\n\n              <motion.button\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className=\"p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg hover:border-purple-500 dark:hover:border-purple-400 transition-colors text-left opacity-50 cursor-not-allowed\"\n              >\n                <div className=\"flex items-center mb-3\">\n                  <div className=\"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mr-3\">\n                    <ChevronDown className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\n                  </div>\n                  <h4 className=\"font-medium text-gray-900 dark:text-gray-100\">Cross-Source Analysis</h4>\n                </div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Comprehensive analysis combining churn, engagement, and interview data sources.\n                </p>\n                <div className=\"mt-2\">\n                  <span className=\"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded\">\n                    Requires multiple data sources\n                  </span>\n                </div>\n              </motion.button>\n            </div>\n          </div>\n\n          {/* Data Source Status */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">Available Data Sources</h3>\n            <div className=\"space-y-3\">\n              <div\n                className={cn(\n                  \"flex items-center justify-between p-3 rounded-lg border transition-colors\",\n                  hasChurnReasoningData\n                    ? \"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800\"\n                    : \"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600\"\n                )}\n              >\n                <div className=\"flex items-center\">\n                  <div\n                    className={cn(\n                      \"w-2 h-2 rounded-full mr-3\",\n                      hasChurnReasoningData ? \"bg-green-500\" : \"bg-gray-400\"\n                    )}\n                  ></div>\n                  <span className=\"font-medium text-gray-900 dark:text-gray-100\">Churn Reasoning Data</span>\n                </div>\n                <span\n                  className={cn(\n                    \"text-sm\",\n                    hasChurnReasoningData\n                      ? \"text-green-600 dark:text-green-400\"\n                      : \"text-gray-500 dark:text-gray-400\"\n                  )}\n                >\n                  {hasChurnReasoningData ? 'Available' : 'Not available'}\n                </span>\n              </div>\n\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-2 h-2 bg-gray-400 rounded-full mr-3\"></div>\n                  <span className=\"font-medium text-gray-900 dark:text-gray-100\">Engagement Survey Data</span>\n                </div>\n                <span className=\"text-sm text-gray-500 dark:text-gray-400\">Not uploaded</span>\n              </div>\n\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-2 h-2 bg-gray-400 rounded-full mr-3\"></div>\n                  <span className=\"font-medium text-gray-900 dark:text-gray-100\">Interview Data</span>\n                </div>\n                <span className=\"text-sm text-gray-500 dark:text-gray-400\">Not uploaded</span>\n              </div>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n              <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n                <strong> Tip:</strong> Upload engagement survey data in the Data Management section to unlock advanced correlation analysis capabilities.\n              </p>\n            </div>\n          </div>\n\n          {/* Analysis Configuration */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">Analysis Configuration</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Department Filter\n                </label>\n                <Select\n                  value={analysisParams.departmentFilter}\n                  onValueChange={(value) => setAnalysisParams(prev => ({ ...prev, departmentFilter: value }))}\n                  disabled={!selectedAnalysisType}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"All Departments\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all-departments\">All Departments</SelectItem>\n                    {availableDepartments.filter(dept => dept !== 'All').map((dept) => (\n                      <SelectItem key={dept} value={dept}>{dept}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Time Period\n                </label>\n                <Select\n                  value={analysisParams.timePeriod}\n                  onValueChange={(value) => setAnalysisParams(prev => ({ ...prev, timePeriod: value }))}\n                  disabled={!selectedAnalysisType}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Last 12 months\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"last-3-months\">Last 3 months</SelectItem>\n                    <SelectItem value=\"last-6-months\">Last 6 months</SelectItem>\n                    <SelectItem value=\"last-12-months\">Last 12 months</SelectItem>\n                    <SelectItem value=\"last-24-months\">Last 24 months</SelectItem>\n                    <SelectItem value=\"all-time\">All time</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Risk Level\n                </label>\n                <Select\n                  value={analysisParams.riskLevel}\n                  onValueChange={(value) => setAnalysisParams(prev => ({ ...prev, riskLevel: value }))}\n                  disabled={!selectedAnalysisType}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"All Risk Levels\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all-risk-levels\">All Risk Levels</SelectItem>\n                    <SelectItem value=\"High\">High Risk</SelectItem>\n                    <SelectItem value=\"Medium\">Medium Risk</SelectItem>\n                    <SelectItem value=\"Low\">Low Risk</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Employee Group\n                </label>\n                <Select\n                  value={analysisParams.employeeGroup}\n                  onValueChange={(value) => setAnalysisParams(prev => ({ ...prev, employeeGroup: value }))}\n                  disabled={!selectedAnalysisType}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"All Employees\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all-employees\">All Employees</SelectItem>\n                    <SelectItem value=\"new-hires\">New Hires (&lt; 1 year)</SelectItem>\n                    <SelectItem value=\"experienced\">Experienced (1-5 years)</SelectItem>\n                    <SelectItem value=\"senior\">Senior (&gt; 5 years)</SelectItem>\n                    <SelectItem value=\"high-performers\">High Performers</SelectItem>\n                    <SelectItem value=\"at-risk\">At Risk Employees</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex justify-between items-center\">\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                {selectedAnalysisType ? (\n                  `Ready to analyze ${selectedAnalysisType.replace('-', ' ')} with current filters`\n                ) : (\n                  'Select an analysis type to configure parameters'\n                )}\n              </div>\n              <button\n                disabled={!selectedAnalysisType || isAnalysisRunning}\n                onClick={async () => {\n                  if (!selectedAnalysisType) return;\n\n                  setIsAnalysisRunning(true);\n                  try {\n                    // Get current thresholds for analysis\n                    const thresholds = getCurrentThresholds();\n\n                    // Filter employees based on analysis parameters\n                    let analysisData = filteredEmployees;\n\n                    // Apply additional filters based on analysis parameters\n                    if (analysisParams.departmentFilter && analysisParams.departmentFilter !== 'all-departments') {\n                      analysisData = analysisData.filter(emp =>\n                        (emp.structure_name || emp.department || 'Unassigned') === analysisParams.departmentFilter\n                      );\n                    }\n\n                    if (analysisParams.riskLevel && analysisParams.riskLevel !== 'all-risk-levels') {\n                      analysisData = analysisData.filter(emp => {\n                        const riskLevel = getRiskLevel(emp.churnProbability || 0);\n                        return riskLevel === analysisParams.riskLevel;\n                      });\n                    }\n\n                    if (analysisParams.employeeGroup && analysisParams.employeeGroup !== 'all-employees') {\n                      // Filter based on employee group (tenure, performance, etc.)\n                      analysisData = analysisData.filter(emp => {\n                        switch (analysisParams.employeeGroup) {\n                          case 'new-hires':\n                            // Assuming we have hire date or tenure data\n                            return (emp.tenure_years || 0) < 1;\n                          case 'experienced':\n                            return (emp.tenure_years || 0) >= 1 && (emp.tenure_years || 0) <= 5;\n                          case 'senior':\n                            return (emp.tenure_years || 0) > 5;\n                          case 'high-performers':\n                            // Assuming we have performance data\n                            return (emp.performance || '0').includes('4') || (emp.performance || '0').includes('5');\n                          case 'at-risk':\n                            return (emp.churnProbability || 0) >= thresholds.highRisk;\n                          default:\n                            return true;\n                        }\n                      });\n                    }\n\n                    // Use local reasoning service for analysis\n                    let result;\n                    switch (selectedAnalysisType) {\n                      case 'churn-patterns':\n                        result = await analyzeChurnPatternsLocal(analysisData, thresholds);\n                        break;\n                      case 'engagement-correlation':\n                        result = await analyzeEngagementCorrelationLocal(analysisData);\n                        break;\n                      case 'organizational-insights':\n                        result = await generateOrganizationalInsightsLocal(analysisData, availableDepartments, displayMetrics);\n                        break;\n                      case 'cross-source':\n                        result = await runCrossAnalysisLocal(analysisData);\n                        break;\n                      default:\n                        result = await runGeneralAnalysisLocal(selectedAnalysisType, analysisData);\n                    }\n\n                    setAnalysisResults(result);\n                  } catch (error) {\n                    // Analysis failed - logged silently in production\n                    // Show user-friendly error\n                    setAnalysisResults({\n                      id: 'error',\n                      type: selectedAnalysisType as any,\n                      title: 'Analysis Failed',\n                      summary: `Failed to complete ${selectedAnalysisType.replace('-', ' ')} analysis. ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,\n                      insights: [],\n                      visualizations: [],\n                      recommendations: [],\n                      confidence: 0,\n                      timestamp: new Date(),\n                      dataSources: [],\n                      parameters: analysisParams,\n                      executionTime: 0\n                    });\n                  } finally {\n                    setIsAnalysisRunning(false);\n                  }\n                }}\n                className={cn(\n                  \"px-6 py-2 rounded-lg font-medium transition-all flex items-center space-x-2\",\n                  selectedAnalysisType && !isAnalysisRunning\n                    ? \"bg-blue-600 hover:bg-blue-700 text-white\"\n                    : \"bg-gray-400 dark:bg-gray-600 text-white cursor-not-allowed\"\n                )}\n              >\n                {isAnalysisRunning ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                    <span>Running Analysis...</span>\n                  </>\n                ) : (\n                  <>\n                    <Brain className=\"w-4 h-4\" />\n                    <span>Run Analysis</span>\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n\n          {/* Analysis Results Section */}\n          {analysisResults && (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Analysis Results</h3>\n                <div className=\"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400\">\n                  <span>Confidence: {(analysisResults.confidence * 100).toFixed(0)}%</span>\n                  <span></span>\n                  <span>{analysisResults.timestamp.toLocaleString()}</span>\n                </div>\n              </div>\n              <AnalysisResultVisualization\n                result={analysisResults}\n                onExport={(format) => {\n                  // Create export data\n                  const exportData = {\n                    title: analysisResults.title,\n                    summary: analysisResults.summary,\n                    confidence: `${Math.round(analysisResults.confidence * 100)}%`,\n                    timestamp: analysisResults.timestamp.toLocaleString(),\n                    insights: analysisResults.insights.map((insight: any) => ({\n                      title: insight.title,\n                      description: insight.description,\n                      severity: insight.severity,\n                      confidence: insight.confidence\n                    })),\n                    recommendations: analysisResults.recommendations?.map((rec: any) => ({\n                      title: rec.title,\n                      description: rec.description,\n                      priority: rec.priority,\n                      timeframe: rec.timeframe\n                    })) || [],\n                    parameters: analysisResults.parameters\n                  };\n\n                  if (format === 'pdf') {\n                    // Create PDF export using html2canvas and jsPDF\n                    const pdfContent = `\n                      <div style=\"font-family: Arial, sans-serif; padding: 20px; max-width: 800px;\">\n                        <h1 style=\"color: #1f2937; margin-bottom: 20px;\">${exportData.title}</h1>\n                        \n                        <div style=\"margin-bottom: 20px;\">\n                          <p><strong>Summary:</strong> ${exportData.summary}</p>\n                          <p><strong>Confidence:</strong> ${exportData.confidence}</p>\n                          <p><strong>Generated:</strong> ${exportData.timestamp}</p>\n                        </div>\n                        \n                        <h2 style=\"color: #374151; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;\">Key Insights</h2>\n                        ${exportData.insights.map((insight: any) => `\n                          <div style=\"margin-bottom: 20px; padding: 15px; background-color: #f9fafb; border-radius: 8px;\">\n                            <h3 style=\"color: #1f2937; margin: 0 0 10px 0;\">${insight.title}</h3>\n                            <p style=\"margin: 0 0 10px 0; color: #4b5563;\">${insight.description}</p>\n                            <p style=\"margin: 0; font-size: 14px; color: #6b7280;\">\n                              <strong>Severity:</strong> ${insight.severity} | <strong>Confidence:</strong> ${Math.round(insight.confidence * 100)}%\n                            </p>\n                          </div>\n                        `).join('')}\n                        \n                        <h2 style=\"color: #374151; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;\">Recommendations</h2>\n                        ${exportData.recommendations.map((rec: any) => `\n                          <div style=\"margin-bottom: 20px; padding: 15px; background-color: #f9fafb; border-radius: 8px;\">\n                            <h3 style=\"color: #1f2937; margin: 0 0 10px 0;\">${rec.title}</h3>\n                            <p style=\"margin: 0 0 10px 0; color: #4b5563;\">${rec.description}</p>\n                            <p style=\"margin: 0; font-size: 14px; color: #6b7280;\">\n                              <strong>Priority:</strong> ${rec.priority} | <strong>Timeframe:</strong> ${rec.timeframe}\n                            </p>\n                          </div>\n                        `).join('')}\n                      </div>\n                    `;\n\n                    // Create temporary element for PDF generation\n                    const element = document.createElement('div');\n                    element.innerHTML = pdfContent;\n                    element.style.position = 'absolute';\n                    element.style.left = '-9999px';\n                    element.style.top = '0';\n                    document.body.appendChild(element);\n\n                    // Use html2canvas to capture the content\n                    import('html2canvas').then(html2canvas => {\n                      html2canvas.default(element, {\n                        scale: 2,\n                        useCORS: true,\n                        allowTaint: true,\n                        backgroundColor: '#ffffff'\n                      }).then(canvas => {\n                        import('jspdf').then(jsPDF => {\n                          const { jsPDF: JsPDF } = jsPDF;\n                          const pdf = new JsPDF('p', 'mm', 'a4');\n                          const imgData = canvas.toDataURL('image/png');\n                          const pdfWidth = pdf.internal.pageSize.getWidth();\n                          const pdfHeight = (canvas.height * pdfWidth) / canvas.width;\n\n                          pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\n                          pdf.save(`churn-analysis-${new Date().toISOString().split('T')[0]}.pdf`);\n                        });\n                      });\n                    }).catch((_error) => {\n                      // Error generating PDF - logged silently in production\n                      alert('PDF generation failed. Please try again.');\n                    }).finally(() => {\n                      document.body.removeChild(element);\n                    });\n                  } else if (format === 'excel') {\n                    // Create Excel export as CSV\n                    const excelData = [\n                      ['Analysis Report', ''],\n                      ['Title', exportData.title],\n                      ['Summary', exportData.summary],\n                      ['Confidence', exportData.confidence],\n                      ['Generated', exportData.timestamp],\n                      ['', ''],\n                      ['Key Insights', ''],\n                      ['Title', 'Description', 'Severity', 'Confidence'],\n                      ...exportData.insights.map((insight: any) => [\n                        insight.title,\n                        insight.description,\n                        insight.severity,\n                        `${Math.round(insight.confidence * 100)}%`\n                      ]),\n                      ['', ''],\n                      ['Recommendations', ''],\n                      ['Title', 'Description', 'Priority', 'Timeframe'],\n                      ...exportData.recommendations.map((rec: any) => [\n                        rec.title,\n                        rec.description,\n                        rec.priority,\n                        rec.timeframe\n                      ])\n                    ];\n\n                    // Convert to CSV format for Excel\n                    const csvContent = excelData.map(row =>\n                      row.map((cell: any) => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(',')\n                    ).join('\\n');\n\n                    // Download CSV file\n                    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n                    const link = document.createElement('a');\n                    const url = URL.createObjectURL(blob);\n                    link.setAttribute('href', url);\n                    link.setAttribute('download', `churn-analysis-${new Date().toISOString().split('T')[0]}.csv`);\n                    link.style.visibility = 'hidden';\n                    document.body.appendChild(link);\n                    link.click();\n                    document.body.removeChild(link);\n                    URL.revokeObjectURL(url);\n                  }\n                }}\n                onDrillDown={(_insightId) => {\n                  // Drill down into insight\n                }}\n              />\n            </div>\n          )}\n\n        </div>\n      )}\n\n      {/* Insights Tab Content - Temporarily Disabled */}\n      {/* \n      {activeTab === 'insights' && (\n        <div className=\"space-y-6\">\n          // ... Insights content temporarily disabled\n        </div>\n      )}\n      */}\n\n    </div>\n  );\n}\n\nexport default Home;\n"],"file":"assets/Home-0abksWmx.js"}