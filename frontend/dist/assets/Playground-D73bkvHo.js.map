{"version":3,"file":"Playground-D73bkvHo.js","sources":["../../node_modules/recharts/es6/component/DefaultLegendContent.js","../../node_modules/recharts/es6/context/legendPayloadContext.js","../../node_modules/recharts/es6/component/Legend.js","../../node_modules/recharts/es6/shape/Dot.js","../../node_modules/recharts/es6/component/Dots.js","../../node_modules/recharts/es6/component/ActivePoints.js","../../node_modules/recharts/es6/state/selectors/lineSelectors.js","../../node_modules/recharts/es6/util/getRadiusAndStrokeWidthFromDot.js","../../node_modules/recharts/es6/cartesian/Line.js","../../node_modules/recharts/es6/chart/LineChart.js","../../src/services/treatmentTrackingService.ts","../../src/components/TreatmentTracker.tsx","../../src/hooks/useDynamicRiskThresholds.ts","../../src/pages/Playground.tsx"],"sourcesContent":["function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * @fileOverview Default Legend Content\n */\nimport * as React from 'react';\nimport { clsx } from 'clsx';\nimport { Surface } from '../container/Surface';\nimport { Symbols } from '../shape/Symbols';\nimport { adaptEventsOfChild } from '../util/types';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nvar SIZE = 32;\nvar defaultLegendContentDefaultProps = {\n  align: 'center',\n  iconSize: 14,\n  inactiveColor: '#ccc',\n  layout: 'horizontal',\n  verticalAlign: 'middle'\n};\nfunction Icon(_ref) {\n  var {\n    data,\n    iconType,\n    inactiveColor\n  } = _ref;\n  var halfSize = SIZE / 2;\n  var sixthSize = SIZE / 6;\n  var thirdSize = SIZE / 3;\n  var color = data.inactive ? inactiveColor : data.color;\n  var preferredIcon = iconType !== null && iconType !== void 0 ? iconType : data.type;\n  if (preferredIcon === 'none') {\n    return null;\n  }\n  if (preferredIcon === 'plainline') {\n    var _data$payload;\n    return /*#__PURE__*/React.createElement(\"line\", {\n      strokeWidth: 4,\n      fill: \"none\",\n      stroke: color,\n      strokeDasharray: (_data$payload = data.payload) === null || _data$payload === void 0 ? void 0 : _data$payload.strokeDasharray,\n      x1: 0,\n      y1: halfSize,\n      x2: SIZE,\n      y2: halfSize,\n      className: \"recharts-legend-icon\"\n    });\n  }\n  if (preferredIcon === 'line') {\n    return /*#__PURE__*/React.createElement(\"path\", {\n      strokeWidth: 4,\n      fill: \"none\",\n      stroke: color,\n      d: \"M0,\".concat(halfSize, \"h\").concat(thirdSize, \"\\n            A\").concat(sixthSize, \",\").concat(sixthSize, \",0,1,1,\").concat(2 * thirdSize, \",\").concat(halfSize, \"\\n            H\").concat(SIZE, \"M\").concat(2 * thirdSize, \",\").concat(halfSize, \"\\n            A\").concat(sixthSize, \",\").concat(sixthSize, \",0,1,1,\").concat(thirdSize, \",\").concat(halfSize),\n      className: \"recharts-legend-icon\"\n    });\n  }\n  if (preferredIcon === 'rect') {\n    return /*#__PURE__*/React.createElement(\"path\", {\n      stroke: \"none\",\n      fill: color,\n      d: \"M0,\".concat(SIZE / 8, \"h\").concat(SIZE, \"v\").concat(SIZE * 3 / 4, \"h\").concat(-SIZE, \"z\"),\n      className: \"recharts-legend-icon\"\n    });\n  }\n  if (/*#__PURE__*/React.isValidElement(data.legendIcon)) {\n    var iconProps = _objectSpread({}, data);\n    delete iconProps.legendIcon;\n    return /*#__PURE__*/React.cloneElement(data.legendIcon, iconProps);\n  }\n  return /*#__PURE__*/React.createElement(Symbols, {\n    fill: color,\n    cx: halfSize,\n    cy: halfSize,\n    size: SIZE,\n    sizeType: \"diameter\",\n    type: preferredIcon\n  });\n}\nfunction Items(props) {\n  var {\n    payload,\n    iconSize,\n    layout,\n    formatter,\n    inactiveColor,\n    iconType\n  } = props;\n  var viewBox = {\n    x: 0,\n    y: 0,\n    width: SIZE,\n    height: SIZE\n  };\n  var itemStyle = {\n    display: layout === 'horizontal' ? 'inline-block' : 'block',\n    marginRight: 10\n  };\n  var svgStyle = {\n    display: 'inline-block',\n    verticalAlign: 'middle',\n    marginRight: 4\n  };\n  return payload.map((entry, i) => {\n    var finalFormatter = entry.formatter || formatter;\n    var className = clsx({\n      'recharts-legend-item': true,\n      [\"legend-item-\".concat(i)]: true,\n      inactive: entry.inactive\n    });\n    if (entry.type === 'none') {\n      return null;\n    }\n    var color = entry.inactive ? inactiveColor : entry.color;\n    var finalValue = finalFormatter ? finalFormatter(entry.value, entry, i) : entry.value;\n    return /*#__PURE__*/React.createElement(\"li\", _extends({\n      className: className,\n      style: itemStyle,\n      key: \"legend-item-\".concat(i)\n    }, adaptEventsOfChild(props, entry, i)), /*#__PURE__*/React.createElement(Surface, {\n      width: iconSize,\n      height: iconSize,\n      viewBox: viewBox,\n      style: svgStyle,\n      \"aria-label\": \"\".concat(finalValue, \" legend icon\")\n    }, /*#__PURE__*/React.createElement(Icon, {\n      data: entry,\n      iconType: iconType,\n      inactiveColor: inactiveColor\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"recharts-legend-item-text\",\n      style: {\n        color\n      }\n    }, finalValue));\n  });\n}\nexport var DefaultLegendContent = outsideProps => {\n  var props = resolveDefaultProps(outsideProps, defaultLegendContentDefaultProps);\n  var {\n    payload,\n    layout,\n    align\n  } = props;\n  if (!payload || !payload.length) {\n    return null;\n  }\n  var finalStyle = {\n    padding: 0,\n    margin: 0,\n    textAlign: layout === 'horizontal' ? align : 'left'\n  };\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"recharts-default-legend\",\n    style: finalStyle\n  }, /*#__PURE__*/React.createElement(Items, _extends({}, props, {\n    payload: payload\n  })));\n};","import { useAppSelector } from '../state/hooks';\nimport { selectLegendPayload } from '../state/selectors/legendSelectors';\n\n/**\n * Use this hook in Legend, or anywhere else where you want to read the current Legend items.\n * @return all Legend items ready to be rendered\n */\nexport function useLegendPayload() {\n  return useAppSelector(selectLegendPayload);\n}","var _excluded = [\"contextPayload\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useLegendPortal } from '../context/legendPortalContext';\nimport { DefaultLegendContent } from './DefaultLegendContent';\nimport { isNumber } from '../util/DataUtils';\nimport { getUniqPayload } from '../util/payload/getUniqPayload';\nimport { useLegendPayload } from '../context/legendPayloadContext';\nimport { useElementOffset } from '../util/useElementOffset';\nimport { useChartHeight, useChartWidth, useMargin } from '../context/chartLayoutContext';\nimport { setLegendSettings, setLegendSize } from '../state/legendSlice';\nimport { useAppDispatch } from '../state/hooks';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nfunction defaultUniqBy(entry) {\n  return entry.value;\n}\nfunction LegendContent(props) {\n  var {\n      contextPayload\n    } = props,\n    otherProps = _objectWithoutProperties(props, _excluded);\n  var finalPayload = getUniqPayload(contextPayload, props.payloadUniqBy, defaultUniqBy);\n  var contentProps = _objectSpread(_objectSpread({}, otherProps), {}, {\n    payload: finalPayload\n  });\n  if (/*#__PURE__*/React.isValidElement(props.content)) {\n    return /*#__PURE__*/React.cloneElement(props.content, contentProps);\n  }\n  if (typeof props.content === 'function') {\n    return /*#__PURE__*/React.createElement(props.content, contentProps);\n  }\n  return /*#__PURE__*/React.createElement(DefaultLegendContent, contentProps);\n}\nfunction getDefaultPosition(style, props, margin, chartWidth, chartHeight, box) {\n  var {\n    layout,\n    align,\n    verticalAlign\n  } = props;\n  var hPos, vPos;\n  if (!style || (style.left === undefined || style.left === null) && (style.right === undefined || style.right === null)) {\n    if (align === 'center' && layout === 'vertical') {\n      hPos = {\n        left: ((chartWidth || 0) - box.width) / 2\n      };\n    } else {\n      hPos = align === 'right' ? {\n        right: margin && margin.right || 0\n      } : {\n        left: margin && margin.left || 0\n      };\n    }\n  }\n  if (!style || (style.top === undefined || style.top === null) && (style.bottom === undefined || style.bottom === null)) {\n    if (verticalAlign === 'middle') {\n      vPos = {\n        top: ((chartHeight || 0) - box.height) / 2\n      };\n    } else {\n      vPos = verticalAlign === 'bottom' ? {\n        bottom: margin && margin.bottom || 0\n      } : {\n        top: margin && margin.top || 0\n      };\n    }\n  }\n  return _objectSpread(_objectSpread({}, hPos), vPos);\n}\nfunction LegendSettingsDispatcher(props) {\n  var dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(setLegendSettings(props));\n  }, [dispatch, props]);\n  return null;\n}\nfunction LegendSizeDispatcher(props) {\n  var dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(setLegendSize(props));\n    return () => {\n      dispatch(setLegendSize({\n        width: 0,\n        height: 0\n      }));\n    };\n  }, [dispatch, props]);\n  return null;\n}\nfunction getWidthOrHeight(layout, height, width, maxWidth) {\n  if (layout === 'vertical' && isNumber(height)) {\n    return {\n      height\n    };\n  }\n  if (layout === 'horizontal') {\n    return {\n      width: width || maxWidth\n    };\n  }\n  return null;\n}\nvar legendDefaultProps = {\n  align: 'center',\n  iconSize: 14,\n  itemSorter: 'value',\n  layout: 'horizontal',\n  verticalAlign: 'bottom'\n};\nexport function Legend(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, legendDefaultProps);\n  var contextPayload = useLegendPayload();\n  var legendPortalFromContext = useLegendPortal();\n  var margin = useMargin();\n  var {\n    width: widthFromProps,\n    height: heightFromProps,\n    wrapperStyle,\n    portal: portalFromProps\n  } = props;\n  // The contextPayload is not used directly inside the hook, but we need the onBBoxUpdate call\n  // when the payload changes, therefore it's here as a dependency.\n  var [lastBoundingBox, updateBoundingBox] = useElementOffset([contextPayload]);\n  var chartWidth = useChartWidth();\n  var chartHeight = useChartHeight();\n  if (chartWidth == null || chartHeight == null) {\n    return null;\n  }\n  var maxWidth = chartWidth - ((margin === null || margin === void 0 ? void 0 : margin.left) || 0) - ((margin === null || margin === void 0 ? void 0 : margin.right) || 0);\n  var widthOrHeight = getWidthOrHeight(props.layout, heightFromProps, widthFromProps, maxWidth);\n  // if the user supplies their own portal, only use their defined wrapper styles\n  var outerStyle = portalFromProps ? wrapperStyle : _objectSpread(_objectSpread({\n    position: 'absolute',\n    width: (widthOrHeight === null || widthOrHeight === void 0 ? void 0 : widthOrHeight.width) || widthFromProps || 'auto',\n    height: (widthOrHeight === null || widthOrHeight === void 0 ? void 0 : widthOrHeight.height) || heightFromProps || 'auto'\n  }, getDefaultPosition(wrapperStyle, props, margin, chartWidth, chartHeight, lastBoundingBox)), wrapperStyle);\n  var legendPortal = portalFromProps !== null && portalFromProps !== void 0 ? portalFromProps : legendPortalFromContext;\n  if (legendPortal == null || contextPayload == null) {\n    return null;\n  }\n  var legendElement = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recharts-legend-wrapper\",\n    style: outerStyle,\n    ref: updateBoundingBox\n  }, /*#__PURE__*/React.createElement(LegendSettingsDispatcher, {\n    layout: props.layout,\n    align: props.align,\n    verticalAlign: props.verticalAlign,\n    itemSorter: props.itemSorter\n  }), /*#__PURE__*/React.createElement(LegendSizeDispatcher, {\n    width: lastBoundingBox.width,\n    height: lastBoundingBox.height\n  }), /*#__PURE__*/React.createElement(LegendContent, _extends({}, props, widthOrHeight, {\n    margin: margin,\n    chartWidth: chartWidth,\n    chartHeight: chartHeight,\n    contextPayload: contextPayload\n  })));\n  return /*#__PURE__*/createPortal(legendElement, legendPortal);\n}\nLegend.displayName = 'Legend';","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n/**\n * @fileOverview Dot\n */\nimport * as React from 'react';\nimport { clsx } from 'clsx';\nimport { adaptEventHandlers } from '../util/types';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\nimport { isNumber } from '../util/DataUtils';\nexport var Dot = props => {\n  var {\n    cx,\n    cy,\n    r,\n    className\n  } = props;\n  var layerClass = clsx('recharts-dot', className);\n  if (isNumber(cx) && isNumber(cy) && isNumber(r)) {\n    return /*#__PURE__*/React.createElement(\"circle\", _extends({}, svgPropertiesNoEvents(props), adaptEventHandlers(props), {\n      className: layerClass,\n      cx: cx,\n      cy: cy,\n      r: r\n    }));\n  }\n  return null;\n};","var _excluded = [\"points\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from 'react';\nimport { cloneElement, isValidElement } from 'react';\nimport { clsx } from 'clsx';\nimport { Dot } from '../shape/Dot';\nimport { Layer } from '../container/Layer';\nimport { isClipDot } from '../util/ReactUtils';\nimport { svgPropertiesAndEventsFromUnknown } from '../util/svgPropertiesAndEvents';\nimport { ZIndexLayer } from '../zIndex/ZIndexLayer';\nimport { DefaultZIndexes } from '../zIndex/DefaultZIndexes';\nfunction DotItem(_ref) {\n  var {\n    option,\n    dotProps,\n    className\n  } = _ref;\n  if (/*#__PURE__*/isValidElement(option)) {\n    // @ts-expect-error we can't type check element cloning properly\n    return /*#__PURE__*/cloneElement(option, dotProps);\n  }\n  if (typeof option === 'function') {\n    return option(dotProps);\n  }\n  var finalClassName = clsx(className, typeof option !== 'boolean' ? option.className : '');\n  var _ref2 = dotProps !== null && dotProps !== void 0 ? dotProps : {},\n    {\n      points\n    } = _ref2,\n    props = _objectWithoutProperties(_ref2, _excluded);\n  return /*#__PURE__*/React.createElement(Dot, _extends({}, props, {\n    className: finalClassName\n  }));\n}\nfunction shouldRenderDots(points, dot) {\n  if (points == null) {\n    return false;\n  }\n  if (dot) {\n    return true;\n  }\n  return points.length === 1;\n}\nexport function Dots(_ref3) {\n  var {\n    points,\n    dot,\n    className,\n    dotClassName,\n    dataKey,\n    baseProps,\n    needClip,\n    clipPathId,\n    zIndex = DefaultZIndexes.scatter\n  } = _ref3;\n  if (!shouldRenderDots(points, dot)) {\n    return null;\n  }\n  var clipDot = isClipDot(dot);\n  var customDotProps = svgPropertiesAndEventsFromUnknown(dot);\n  var dots = points.map((entry, i) => {\n    var _entry$x, _entry$y;\n    var dotProps = _objectSpread(_objectSpread(_objectSpread({\n      r: 3\n    }, baseProps), customDotProps), {}, {\n      index: i,\n      cx: (_entry$x = entry.x) !== null && _entry$x !== void 0 ? _entry$x : undefined,\n      cy: (_entry$y = entry.y) !== null && _entry$y !== void 0 ? _entry$y : undefined,\n      dataKey,\n      value: entry.value,\n      payload: entry.payload,\n      points\n    });\n    return /*#__PURE__*/React.createElement(DotItem, {\n      key: \"dot-\".concat(i),\n      option: dot,\n      dotProps: dotProps,\n      className: dotClassName\n    });\n  });\n  var layerProps = {};\n  if (needClip && clipPathId != null) {\n    layerProps.clipPath = \"url(#clipPath-\".concat(clipDot ? '' : 'dots-').concat(clipPathId, \")\");\n  }\n  return /*#__PURE__*/React.createElement(ZIndexLayer, {\n    zIndex: zIndex\n  }, /*#__PURE__*/React.createElement(Layer, _extends({\n    className: className\n  }, layerProps), dots));\n}","function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { cloneElement, isValidElement } from 'react';\nimport { adaptEventHandlers } from '../util/types';\nimport { Dot } from '../shape/Dot';\nimport { Layer } from '../container/Layer';\nimport { useAppSelector } from '../state/hooks';\nimport { selectActiveTooltipIndex } from '../state/selectors/tooltipSelectors';\nimport { useActiveTooltipDataPoints } from '../hooks';\nimport { isNullish } from '../util/DataUtils';\nimport { svgPropertiesNoEventsFromUnknown } from '../util/svgPropertiesNoEvents';\nimport { ZIndexLayer } from '../zIndex/ZIndexLayer';\nimport { DefaultZIndexes } from '../zIndex/DefaultZIndexes';\nvar ActivePoint = _ref => {\n  var {\n    point,\n    childIndex,\n    mainColor,\n    activeDot,\n    dataKey\n  } = _ref;\n  if (activeDot === false || point.x == null || point.y == null) {\n    return null;\n  }\n  var dotPropsTyped = {\n    index: childIndex,\n    dataKey,\n    cx: point.x,\n    cy: point.y,\n    r: 4,\n    fill: mainColor !== null && mainColor !== void 0 ? mainColor : 'none',\n    strokeWidth: 2,\n    stroke: '#fff',\n    payload: point.payload,\n    value: point.value\n  };\n\n  // @ts-expect-error svgPropertiesNoEventsFromUnknown(activeDot) is contributing unknown props\n  var dotProps = _objectSpread(_objectSpread(_objectSpread({}, dotPropsTyped), svgPropertiesNoEventsFromUnknown(activeDot)), adaptEventHandlers(activeDot));\n  var dot;\n  if (/*#__PURE__*/isValidElement(activeDot)) {\n    // @ts-expect-error we're improperly typing events\n    dot = /*#__PURE__*/cloneElement(activeDot, dotProps);\n  } else if (typeof activeDot === 'function') {\n    dot = activeDot(dotProps);\n  } else {\n    dot = /*#__PURE__*/React.createElement(Dot, dotProps);\n  }\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-active-dot\"\n  }, dot);\n};\nexport function ActivePoints(_ref2) {\n  var {\n    points,\n    mainColor,\n    activeDot,\n    itemDataKey,\n    zIndex = DefaultZIndexes.activeDot\n  } = _ref2;\n  var activeTooltipIndex = useAppSelector(selectActiveTooltipIndex);\n  var activeDataPoints = useActiveTooltipDataPoints();\n  if (points == null || activeDataPoints == null) {\n    return null;\n  }\n  var activePoint = points.find(p => activeDataPoints.includes(p.payload));\n  if (isNullish(activePoint)) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(ZIndexLayer, {\n    zIndex: zIndex\n  }, /*#__PURE__*/React.createElement(ActivePoint, {\n    point: activePoint,\n    childIndex: Number(activeTooltipIndex),\n    mainColor: mainColor,\n    dataKey: itemDataKey,\n    activeDot: activeDot\n  }));\n}","import { createSelector } from 'reselect';\nimport { computeLinePoints } from '../../cartesian/Line';\nimport { selectChartDataWithIndexesIfNotInPanorama } from './dataSelectors';\nimport { selectChartLayout } from '../../context/chartLayoutContext';\nimport { selectAxisWithScale, selectTicksOfGraphicalItem, selectUnfilteredCartesianItems } from './axisSelectors';\nimport { getBandSizeOfAxis, isCategoricalAxis } from '../../util/ChartUtils';\nvar selectXAxisWithScale = (state, xAxisId, _yAxisId, isPanorama) => selectAxisWithScale(state, 'xAxis', xAxisId, isPanorama);\nvar selectXAxisTicks = (state, xAxisId, _yAxisId, isPanorama) => selectTicksOfGraphicalItem(state, 'xAxis', xAxisId, isPanorama);\nvar selectYAxisWithScale = (state, _xAxisId, yAxisId, isPanorama) => selectAxisWithScale(state, 'yAxis', yAxisId, isPanorama);\nvar selectYAxisTicks = (state, _xAxisId, yAxisId, isPanorama) => selectTicksOfGraphicalItem(state, 'yAxis', yAxisId, isPanorama);\nvar selectBandSize = createSelector([selectChartLayout, selectXAxisWithScale, selectYAxisWithScale, selectXAxisTicks, selectYAxisTicks], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks) => {\n  if (isCategoricalAxis(layout, 'xAxis')) {\n    return getBandSizeOfAxis(xAxis, xAxisTicks, false);\n  }\n  return getBandSizeOfAxis(yAxis, yAxisTicks, false);\n});\nvar pickLineId = (_state, _xAxisId, _yAxisId, _isPanorama, id) => id;\nfunction isLineSettings(item) {\n  return item.type === 'line';\n}\n\n/*\n * There is a race condition problem because we read some data from props and some from the state.\n * The state is updated through a dispatch and is one render behind,\n * and so we have this weird one tick render where the displayedData in one selector have the old dataKey\n * but the new dataKey in another selector.\n *\n * So here instead of reading the dataKey from the props, we always read it from the state.\n */\nvar selectSynchronisedLineSettings = createSelector([selectUnfilteredCartesianItems, pickLineId], (graphicalItems, id) => graphicalItems.filter(isLineSettings).find(x => x.id === id));\nexport var selectLinePoints = createSelector([selectChartLayout, selectXAxisWithScale, selectYAxisWithScale, selectXAxisTicks, selectYAxisTicks, selectSynchronisedLineSettings, selectBandSize, selectChartDataWithIndexesIfNotInPanorama], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks, lineSettings, bandSize, _ref) => {\n  var {\n    chartData,\n    dataStartIndex,\n    dataEndIndex\n  } = _ref;\n  if (lineSettings == null || xAxis == null || yAxis == null || xAxisTicks == null || yAxisTicks == null || xAxisTicks.length === 0 || yAxisTicks.length === 0 || bandSize == null) {\n    return undefined;\n  }\n  var {\n    dataKey,\n    data\n  } = lineSettings;\n  var displayedData;\n  if (data != null && data.length > 0) {\n    displayedData = data;\n  } else {\n    displayedData = chartData === null || chartData === void 0 ? void 0 : chartData.slice(dataStartIndex, dataEndIndex + 1);\n  }\n  if (displayedData == null) {\n    return undefined;\n  }\n  return computeLinePoints({\n    layout,\n    xAxis,\n    yAxis,\n    xAxisTicks,\n    yAxisTicks,\n    dataKey,\n    bandSize,\n    displayedData\n  });\n});","import { svgPropertiesNoEventsFromUnknown } from './svgPropertiesNoEvents';\nexport function getRadiusAndStrokeWidthFromDot(dot) {\n  var props = svgPropertiesNoEventsFromUnknown(dot);\n  var defaultR = 3;\n  var defaultStrokeWidth = 2;\n  if (props != null) {\n    var {\n      r,\n      strokeWidth\n    } = props;\n    var realR = Number(r);\n    var realStrokeWidth = Number(strokeWidth);\n    if (Number.isNaN(realR) || realR < 0) {\n      realR = defaultR;\n    }\n    if (Number.isNaN(realStrokeWidth) || realStrokeWidth < 0) {\n      realStrokeWidth = defaultStrokeWidth;\n    }\n    return {\n      r: realR,\n      strokeWidth: realStrokeWidth\n    };\n  }\n  return {\n    r: defaultR,\n    strokeWidth: defaultStrokeWidth\n  };\n}","var _excluded = [\"id\"],\n  _excluded2 = [\"type\", \"layout\", \"connectNulls\", \"needClip\", \"shape\"],\n  _excluded3 = [\"activeDot\", \"animateNewValues\", \"animationBegin\", \"animationDuration\", \"animationEasing\", \"connectNulls\", \"dot\", \"hide\", \"isAnimationActive\", \"label\", \"legendType\", \"xAxisId\", \"yAxisId\", \"id\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from 'react';\nimport { Component, useCallback, useMemo, useRef, useState } from 'react';\nimport { clsx } from 'clsx';\nimport { Layer } from '../container/Layer';\nimport { CartesianLabelListContextProvider, LabelListFromLabelProp } from '../component/LabelList';\nimport { Dots } from '../component/Dots';\nimport { interpolate, isNullish } from '../util/DataUtils';\nimport { isClipDot } from '../util/ReactUtils';\nimport { Global } from '../util/Global';\nimport { getCateCoordinateOfLine, getTooltipNameProp, getValueByDataKey } from '../util/ChartUtils';\nimport { ActivePoints } from '../component/ActivePoints';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { SetErrorBarContext } from '../context/ErrorBarContext';\nimport { GraphicalItemClipPath, useNeedsClip } from './GraphicalItemClipPath';\nimport { useChartLayout } from '../context/chartLayoutContext';\nimport { useIsPanorama } from '../context/PanoramaContext';\nimport { selectLinePoints } from '../state/selectors/lineSelectors';\nimport { useAppSelector } from '../state/hooks';\nimport { SetLegendPayload } from '../state/SetLegendPayload';\nimport { useAnimationId } from '../util/useAnimationId';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { usePlotArea } from '../hooks';\nimport { RegisterGraphicalItemId } from '../context/RegisterGraphicalItemId';\nimport { SetCartesianGraphicalItem } from '../state/SetGraphicalItem';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\nimport { JavascriptAnimate } from '../animation/JavascriptAnimate';\nimport { svgPropertiesAndEvents } from '../util/svgPropertiesAndEvents';\nimport { getRadiusAndStrokeWidthFromDot } from '../util/getRadiusAndStrokeWidthFromDot';\nimport { Shape } from '../util/ActiveShapeUtils';\nimport { ZIndexLayer } from '../zIndex/ZIndexLayer';\nimport { DefaultZIndexes } from '../zIndex/DefaultZIndexes';\n\n/**\n * Internal props, combination of external props + defaultProps + private Recharts state\n */\n\n/**\n * External props, intended for end users to fill in\n */\n\n/**\n * Because of naming conflict, we are forced to ignore certain (valid) SVG attributes.\n */\n\nvar computeLegendPayloadFromAreaData = props => {\n  var {\n    dataKey,\n    name,\n    stroke,\n    legendType,\n    hide\n  } = props;\n  return [{\n    inactive: hide,\n    dataKey,\n    type: legendType,\n    color: stroke,\n    value: getTooltipNameProp(name, dataKey),\n    payload: props\n  }];\n};\nfunction getTooltipEntrySettings(props) {\n  var {\n    dataKey,\n    data,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    hide,\n    unit\n  } = props;\n  return {\n    dataDefinedOnItem: data,\n    positions: undefined,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      nameKey: undefined,\n      name: getTooltipNameProp(name, dataKey),\n      hide,\n      type: props.tooltipType,\n      color: props.stroke,\n      unit\n    }\n  };\n}\nvar generateSimpleStrokeDasharray = (totalLength, length) => {\n  return \"\".concat(length, \"px \").concat(totalLength - length, \"px\");\n};\nfunction repeat(lines, count) {\n  var linesUnit = lines.length % 2 !== 0 ? [...lines, 0] : lines;\n  var result = [];\n  for (var i = 0; i < count; ++i) {\n    result = [...result, ...linesUnit];\n  }\n  return result;\n}\nvar getStrokeDasharray = (length, totalLength, lines) => {\n  var lineLength = lines.reduce((pre, next) => pre + next);\n\n  // if lineLength is 0 return the default when no strokeDasharray is provided\n  if (!lineLength) {\n    return generateSimpleStrokeDasharray(totalLength, length);\n  }\n  var count = Math.floor(length / lineLength);\n  var remainLength = length % lineLength;\n  var restLength = totalLength - length;\n  var remainLines = [];\n  for (var i = 0, sum = 0; i < lines.length; sum += lines[i], ++i) {\n    if (sum + lines[i] > remainLength) {\n      remainLines = [...lines.slice(0, i), remainLength - sum];\n      break;\n    }\n  }\n  var emptyLines = remainLines.length % 2 === 0 ? [0, restLength] : [restLength];\n  return [...repeat(lines, count), ...remainLines, ...emptyLines].map(line => \"\".concat(line, \"px\")).join(', ');\n};\nfunction LineDotsWrapper(_ref) {\n  var {\n    clipPathId,\n    points,\n    props\n  } = _ref;\n  var {\n    dot,\n    dataKey,\n    needClip\n  } = props;\n\n  /*\n   * Exclude ID from the props passed to the Dots component\n   * because then the ID would be applied to multiple dots, and it would no longer be unique.\n   */\n  var {\n      id\n    } = props,\n    propsWithoutId = _objectWithoutProperties(props, _excluded);\n  var lineProps = svgPropertiesNoEvents(propsWithoutId);\n  return /*#__PURE__*/React.createElement(Dots, {\n    points: points,\n    dot: dot,\n    className: \"recharts-line-dots\",\n    dotClassName: \"recharts-line-dot\",\n    dataKey: dataKey,\n    baseProps: lineProps,\n    needClip: needClip,\n    clipPathId: clipPathId\n  });\n}\nfunction LineLabelListProvider(_ref2) {\n  var {\n    showLabels,\n    children,\n    points\n  } = _ref2;\n  var labelListEntries = useMemo(() => {\n    return points === null || points === void 0 ? void 0 : points.map(point => {\n      var _point$x, _point$y;\n      var viewBox = {\n        x: (_point$x = point.x) !== null && _point$x !== void 0 ? _point$x : 0,\n        y: (_point$y = point.y) !== null && _point$y !== void 0 ? _point$y : 0,\n        width: 0,\n        lowerWidth: 0,\n        upperWidth: 0,\n        height: 0\n      };\n      return _objectSpread(_objectSpread({}, viewBox), {}, {\n        value: point.value,\n        payload: point.payload,\n        viewBox,\n        /*\n         * Line is not passing parentViewBox to the LabelList so the labels can escape - looks like a bug, should we pass parentViewBox?\n         * Or should this just be the root chart viewBox?\n         */\n        parentViewBox: undefined,\n        fill: undefined\n      });\n    });\n  }, [points]);\n  return /*#__PURE__*/React.createElement(CartesianLabelListContextProvider, {\n    value: showLabels ? labelListEntries : undefined\n  }, children);\n}\nfunction StaticCurve(_ref3) {\n  var {\n    clipPathId,\n    pathRef,\n    points,\n    strokeDasharray,\n    props\n  } = _ref3;\n  var {\n      type,\n      layout,\n      connectNulls,\n      needClip,\n      shape\n    } = props,\n    others = _objectWithoutProperties(props, _excluded2);\n  var curveProps = _objectSpread(_objectSpread({}, svgPropertiesAndEvents(others)), {}, {\n    fill: 'none',\n    className: 'recharts-line-curve',\n    clipPath: needClip ? \"url(#clipPath-\".concat(clipPathId, \")\") : undefined,\n    points,\n    type,\n    layout,\n    connectNulls,\n    strokeDasharray: strokeDasharray !== null && strokeDasharray !== void 0 ? strokeDasharray : props.strokeDasharray\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, (points === null || points === void 0 ? void 0 : points.length) > 1 && /*#__PURE__*/React.createElement(Shape, _extends({\n    shapeType: \"curve\",\n    option: shape\n  }, curveProps, {\n    pathRef: pathRef\n  })), /*#__PURE__*/React.createElement(LineDotsWrapper, {\n    points: points,\n    clipPathId: clipPathId,\n    props: props\n  }));\n}\nfunction getTotalLength(mainCurve) {\n  try {\n    return mainCurve && mainCurve.getTotalLength && mainCurve.getTotalLength() || 0;\n  } catch (_unused) {\n    return 0;\n  }\n}\nfunction CurveWithAnimation(_ref4) {\n  var {\n    clipPathId,\n    props,\n    pathRef,\n    previousPointsRef,\n    longestAnimatedLengthRef\n  } = _ref4;\n  var {\n    points,\n    strokeDasharray,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    animateNewValues,\n    width,\n    height,\n    onAnimationEnd,\n    onAnimationStart\n  } = props;\n  var prevPoints = previousPointsRef.current;\n  var animationId = useAnimationId(props, 'recharts-line-');\n  var [isAnimating, setIsAnimating] = useState(false);\n  var showLabels = !isAnimating;\n  var handleAnimationEnd = useCallback(() => {\n    if (typeof onAnimationEnd === 'function') {\n      onAnimationEnd();\n    }\n    setIsAnimating(false);\n  }, [onAnimationEnd]);\n  var handleAnimationStart = useCallback(() => {\n    if (typeof onAnimationStart === 'function') {\n      onAnimationStart();\n    }\n    setIsAnimating(true);\n  }, [onAnimationStart]);\n  var totalLength = getTotalLength(pathRef.current);\n  /*\n   * Here we want to detect if the length animation has been interrupted.\n   * For that we keep a reference to the furthest length that has been animated.\n   *\n   * And then, to keep things smooth, we add to it the current length that is being animated right now.\n   *\n   * If we did Math.max then it makes the length animation \"pause\" but we want to keep it smooth\n   * so in case we have some \"leftover\" length from the previous animation we add it to the current length.\n   *\n   * This is not perfect because the animation changes speed due to easing. The default easing is 'ease' which is not linear\n   * and makes it stand out. But it's good enough I suppose.\n   * If we want to fix it then we need to keep track of multiple animations and their easing and timings.\n   *\n   * If you want to see this in action, try to change the dataKey of the line chart while the initial animation is running.\n   * The Line begins with zero length and slowly grows to the full length. While this growth is in progress,\n   * change the dataKey and the Line will continue growing from where it has grown so far.\n   */\n  var startingPoint = longestAnimatedLengthRef.current;\n  return /*#__PURE__*/React.createElement(LineLabelListProvider, {\n    points: points,\n    showLabels: showLabels\n  }, props.children, /*#__PURE__*/React.createElement(JavascriptAnimate, {\n    animationId: animationId,\n    begin: animationBegin,\n    duration: animationDuration,\n    isActive: isAnimationActive,\n    easing: animationEasing,\n    onAnimationEnd: handleAnimationEnd,\n    onAnimationStart: handleAnimationStart,\n    key: animationId\n  }, t => {\n    var lengthInterpolated = interpolate(startingPoint, totalLength + startingPoint, t);\n    var curLength = Math.min(lengthInterpolated, totalLength);\n    var currentStrokeDasharray;\n    if (isAnimationActive) {\n      if (strokeDasharray) {\n        var lines = \"\".concat(strokeDasharray).split(/[,\\s]+/gim).map(num => parseFloat(num));\n        currentStrokeDasharray = getStrokeDasharray(curLength, totalLength, lines);\n      } else {\n        currentStrokeDasharray = generateSimpleStrokeDasharray(totalLength, curLength);\n      }\n    } else {\n      currentStrokeDasharray = strokeDasharray == null ? undefined : String(strokeDasharray);\n    }\n    if (prevPoints) {\n      var prevPointsDiffFactor = prevPoints.length / points.length;\n      var stepData = t === 1 ? points : points.map((entry, index) => {\n        var prevPointIndex = Math.floor(index * prevPointsDiffFactor);\n        if (prevPoints[prevPointIndex]) {\n          var prev = prevPoints[prevPointIndex];\n          return _objectSpread(_objectSpread({}, entry), {}, {\n            x: interpolate(prev.x, entry.x, t),\n            y: interpolate(prev.y, entry.y, t)\n          });\n        }\n\n        // magic number of faking previous x and y location\n        if (animateNewValues) {\n          return _objectSpread(_objectSpread({}, entry), {}, {\n            x: interpolate(width * 2, entry.x, t),\n            y: interpolate(height / 2, entry.y, t)\n          });\n        }\n        return _objectSpread(_objectSpread({}, entry), {}, {\n          x: entry.x,\n          y: entry.y\n        });\n      });\n      // eslint-disable-next-line no-param-reassign\n      previousPointsRef.current = stepData;\n      return /*#__PURE__*/React.createElement(StaticCurve, {\n        props: props,\n        points: stepData,\n        clipPathId: clipPathId,\n        pathRef: pathRef,\n        strokeDasharray: currentStrokeDasharray\n      });\n    }\n\n    /*\n     * Here it is important to wait a little bit with updating the previousPointsRef\n     * before the animation has a time to initialize.\n     * If we set the previous pointsRef immediately, we set it before the Legend height it calculated\n     * and before pathRef is set.\n     * If that happens, the Line will re-render again after Legend had reported its height\n     * which will start a new animation with the previous points as the starting point\n     * which gives the effect of the Line animating slightly upwards (where the animation distance equals the Legend height).\n     * Waiting for t > 0 is indirect but good enough to ensure that the Legend height is calculated and animation works properly.\n     *\n     * Total length similarly is calculated from the pathRef. We should not update the previousPointsRef\n     * before the pathRef is set, otherwise we will have a wrong total length.\n     */\n    if (t > 0 && totalLength > 0) {\n      // eslint-disable-next-line no-param-reassign\n      previousPointsRef.current = points;\n      /*\n       * totalLength is set from a ref and is not updated in the first tick of the animation.\n       * It defaults to zero which is exactly what we want here because we want to grow from zero,\n       * however the same happens when the data change.\n       *\n       * In that case we want to remember the previous length and continue from there, and only animate the shape.\n       *\n       * Therefore the totalLength > 0 check.\n       *\n       * The Animate is about to fire handleAnimationStart which will update the state\n       * and cause a re-render and read a new proper totalLength which will be used in the next tick\n       * and update the longestAnimatedLengthRef.\n       */\n      // eslint-disable-next-line no-param-reassign\n      longestAnimatedLengthRef.current = curLength;\n    }\n    return /*#__PURE__*/React.createElement(StaticCurve, {\n      props: props,\n      points: points,\n      clipPathId: clipPathId,\n      pathRef: pathRef,\n      strokeDasharray: currentStrokeDasharray\n    });\n  }), /*#__PURE__*/React.createElement(LabelListFromLabelProp, {\n    label: props.label\n  }));\n}\nfunction RenderCurve(_ref5) {\n  var {\n    clipPathId,\n    props\n  } = _ref5;\n  var previousPointsRef = useRef(null);\n  var longestAnimatedLengthRef = useRef(0);\n  var pathRef = useRef(null);\n  return /*#__PURE__*/React.createElement(CurveWithAnimation, {\n    props: props,\n    clipPathId: clipPathId,\n    previousPointsRef: previousPointsRef,\n    longestAnimatedLengthRef: longestAnimatedLengthRef,\n    pathRef: pathRef\n  });\n}\nvar errorBarDataPointFormatter = (dataPoint, dataKey) => {\n  var _dataPoint$x, _dataPoint$y;\n  return {\n    x: (_dataPoint$x = dataPoint.x) !== null && _dataPoint$x !== void 0 ? _dataPoint$x : undefined,\n    y: (_dataPoint$y = dataPoint.y) !== null && _dataPoint$y !== void 0 ? _dataPoint$y : undefined,\n    value: dataPoint.value,\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    errorVal: getValueByDataKey(dataPoint.payload, dataKey)\n  };\n};\n\n// eslint-disable-next-line react/prefer-stateless-function\nclass LineWithState extends Component {\n  render() {\n    var {\n      hide,\n      dot,\n      points,\n      className,\n      xAxisId,\n      yAxisId,\n      top,\n      left,\n      width,\n      height,\n      id,\n      needClip,\n      zIndex\n    } = this.props;\n    if (hide) {\n      return null;\n    }\n    var layerClass = clsx('recharts-line', className);\n    var clipPathId = id;\n    var {\n      r,\n      strokeWidth\n    } = getRadiusAndStrokeWidthFromDot(dot);\n    var clipDot = isClipDot(dot);\n    var dotSize = r * 2 + strokeWidth;\n    return /*#__PURE__*/React.createElement(ZIndexLayer, {\n      zIndex: zIndex\n    }, /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass\n    }, needClip && /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(GraphicalItemClipPath, {\n      clipPathId: clipPathId,\n      xAxisId: xAxisId,\n      yAxisId: yAxisId\n    }), !clipDot && /*#__PURE__*/React.createElement(\"clipPath\", {\n      id: \"clipPath-dots-\".concat(clipPathId)\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      x: left - dotSize / 2,\n      y: top - dotSize / 2,\n      width: width + dotSize,\n      height: height + dotSize\n    }))), /*#__PURE__*/React.createElement(SetErrorBarContext, {\n      xAxisId: xAxisId,\n      yAxisId: yAxisId,\n      data: points,\n      dataPointFormatter: errorBarDataPointFormatter,\n      errorBarOffset: 0\n    }, /*#__PURE__*/React.createElement(RenderCurve, {\n      props: this.props,\n      clipPathId: clipPathId\n    }))), /*#__PURE__*/React.createElement(ActivePoints, {\n      activeDot: this.props.activeDot,\n      points: points,\n      mainColor: this.props.stroke,\n      itemDataKey: this.props.dataKey\n    }));\n  }\n}\nvar defaultLineProps = {\n  activeDot: true,\n  animateNewValues: true,\n  animationBegin: 0,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  connectNulls: false,\n  dot: true,\n  fill: '#fff',\n  hide: false,\n  isAnimationActive: !Global.isSsr,\n  label: false,\n  legendType: 'line',\n  stroke: '#3182bd',\n  strokeWidth: 1,\n  xAxisId: 0,\n  yAxisId: 0,\n  zIndex: DefaultZIndexes.line\n};\nfunction LineImpl(props) {\n  var _resolveDefaultProps = resolveDefaultProps(props, defaultLineProps),\n    {\n      activeDot,\n      animateNewValues,\n      animationBegin,\n      animationDuration,\n      animationEasing,\n      connectNulls,\n      dot,\n      hide,\n      isAnimationActive,\n      label,\n      legendType,\n      xAxisId,\n      yAxisId,\n      id\n    } = _resolveDefaultProps,\n    everythingElse = _objectWithoutProperties(_resolveDefaultProps, _excluded3);\n  var {\n    needClip\n  } = useNeedsClip(xAxisId, yAxisId);\n  var plotArea = usePlotArea();\n  var layout = useChartLayout();\n  var isPanorama = useIsPanorama();\n  var points = useAppSelector(state => selectLinePoints(state, xAxisId, yAxisId, isPanorama, id));\n  if (layout !== 'horizontal' && layout !== 'vertical' || points == null || plotArea == null) {\n    // Cannot render Line in an unsupported layout\n    return null;\n  }\n  var {\n    height,\n    width,\n    x: left,\n    y: top\n  } = plotArea;\n  return /*#__PURE__*/React.createElement(LineWithState, _extends({}, everythingElse, {\n    id: id,\n    connectNulls: connectNulls,\n    dot: dot,\n    activeDot: activeDot,\n    animateNewValues: animateNewValues,\n    animationBegin: animationBegin,\n    animationDuration: animationDuration,\n    animationEasing: animationEasing,\n    isAnimationActive: isAnimationActive,\n    hide: hide,\n    label: label,\n    legendType: legendType,\n    xAxisId: xAxisId,\n    yAxisId: yAxisId,\n    points: points,\n    layout: layout,\n    height: height,\n    width: width,\n    left: left,\n    top: top,\n    needClip: needClip\n  }));\n}\nexport function computeLinePoints(_ref6) {\n  var {\n    layout,\n    xAxis,\n    yAxis,\n    xAxisTicks,\n    yAxisTicks,\n    dataKey,\n    bandSize,\n    displayedData\n  } = _ref6;\n  return displayedData.map((entry, index) => {\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    var value = getValueByDataKey(entry, dataKey);\n    if (layout === 'horizontal') {\n      var _x = getCateCoordinateOfLine({\n        axis: xAxis,\n        ticks: xAxisTicks,\n        bandSize,\n        entry,\n        index\n      });\n      var _y = isNullish(value) ? null : yAxis.scale(value);\n      return {\n        x: _x,\n        y: _y,\n        value,\n        payload: entry\n      };\n    }\n    var x = isNullish(value) ? null : xAxis.scale(value);\n    var y = getCateCoordinateOfLine({\n      axis: yAxis,\n      ticks: yAxisTicks,\n      bandSize,\n      entry,\n      index\n    });\n    if (x == null || y == null) {\n      return null;\n    }\n    return {\n      x,\n      y,\n      value,\n      payload: entry\n    };\n  }).filter(Boolean);\n}\nfunction LineFn(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, defaultLineProps);\n  var isPanorama = useIsPanorama();\n  return /*#__PURE__*/React.createElement(RegisterGraphicalItemId, {\n    id: props.id,\n    type: \"line\"\n  }, id => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetLegendPayload, {\n    legendPayload: computeLegendPayloadFromAreaData(props)\n  }), /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    fn: getTooltipEntrySettings,\n    args: props\n  }), /*#__PURE__*/React.createElement(SetCartesianGraphicalItem, {\n    type: \"line\",\n    id: id,\n    data: props.data,\n    xAxisId: props.xAxisId,\n    yAxisId: props.yAxisId,\n    zAxisId: 0,\n    dataKey: props.dataKey,\n    hide: props.hide,\n    isPanorama: isPanorama\n  }), /*#__PURE__*/React.createElement(LineImpl, _extends({}, props, {\n    id: id\n  }))));\n}\nexport var Line = /*#__PURE__*/React.memo(LineFn);\nLine.displayName = 'Line';","import * as React from 'react';\nimport { forwardRef } from 'react';\nimport { arrayTooltipSearcher } from '../state/optionsSlice';\nimport { CartesianChart } from './CartesianChart';\nvar allowedTooltipTypes = ['axis'];\nexport var LineChart = /*#__PURE__*/forwardRef((props, ref) => {\n  return /*#__PURE__*/React.createElement(CartesianChart, {\n    chartName: \"LineChart\",\n    defaultTooltipEventType: \"axis\",\n    validateTooltipEventTypes: allowedTooltipTypes,\n    tooltipPayloadSearcher: arrayTooltipSearcher,\n    categoricalChartProps: props,\n    ref: ref\n  });\n});","import api from '@/services/api';\n\nexport interface TreatmentApplication {\n  id: number;\n  employee_id: string;\n  hr_code: string;\n  treatment_name: string;\n  treatment_type: string;\n  predicted_churn_reduction: number;\n  predicted_cost: number;\n  predicted_roi: number;\n  actual_cost?: number;\n  applied_date: string;\n  status: 'applied' | 'active' | 'completed' | 'cancelled';\n  ab_group: 'control' | 'treatment';\n}\n\nexport interface TreatmentEffectiveness {\n  treatment_type: string;\n  treatment_name: string;\n  total_applications: number;\n  successful_retentions: number;\n  effectiveness_rate: number;\n  average_cost: number;\n  roi_ratio: number;\n  statistical_significance: boolean;\n  sample_size: number;\n}\n\nexport interface ABTestResult {\n  test_name: string;\n  group_assignment: 'control' | 'treatment';\n  group_size: number;\n  avg_baseline_risk: number;\n  retained_count: number;\n  churned_count: number;\n  retention_rate: number;\n}\n\nexport const treatmentTrackingService = {\n  async getEmployeeApplications(projectId: string, employeeId: string): Promise<TreatmentApplication[]> {\n    const res = await api.get(`/api/eltv/tracking/applications/${encodeURIComponent(employeeId)}`, { params: { projectId } });\n    return res.data?.data || [];\n  },\n\n  async getEffectiveness(projectId: string): Promise<TreatmentEffectiveness[]> {\n    const res = await api.get('/api/eltv/tracking/effectiveness', { params: { projectId } });\n    return res.data?.data || [];\n  },\n\n  async getABTests(projectId: string, testName?: string): Promise<ABTestResult[]> {\n    const res = await api.get('/api/eltv/tracking/ab-tests', { params: { projectId, testName } });\n    return res.data?.data || [];\n  },\n\n  async createABTest(projectId: string, payload?: { testName?: string; controlRatio?: number; employees?: any[] }) {\n    const res = await api.post('/api/eltv/tracking/ab-tests', { projectId, ...(payload || {}) });\n    return res.data?.data;\n  },\n\n  async syncHR(projectId: string, connectionDetails: any) {\n    const res = await api.post('/api/eltv/tracking/hr-sync', { projectId, connectionDetails });\n    return res.data?.data;\n  },\n\n  async getLastSync(projectId: string): Promise<string | null> {\n    const res = await api.get('/api/eltv/tracking/last-sync', { params: { projectId } });\n    return res.data?.data ?? null;\n  }\n};\n\nexport default treatmentTrackingService;\n\n\n","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n    Activity,\n    Database,\n    CheckCircle,\n    XCircle,\n    Clock,\n    TrendingUp,\n    TrendingDown,\n    BarChart3,\n    Users,\n    DollarSign,\n    AlertTriangle,\n    Wifi,\n    WifiOff,\n    RefreshCw,\n    Calendar,\n    Target,\n    Award\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { useToast } from '@/hooks/use-toast';\nimport treatmentTrackingService, { TreatmentApplication as AppType, TreatmentEffectiveness as EffType, ABTestResult as ABType } from '@/services/treatmentTrackingService';\nimport api from '@/services/api';\nimport { useProject } from '@/contexts/ProjectContext';\n\ninterface TreatmentApplication {\n    id: number;\n    employee_id: string;\n    hr_code: string;\n    treatment_name: string;\n    treatment_type: string;\n    predicted_churn_reduction: number;\n    predicted_cost: number;\n    predicted_roi: number;\n    actual_cost?: number;\n    applied_date: string;\n    status: 'applied' | 'active' | 'completed' | 'cancelled';\n    ab_group: 'control' | 'treatment';\n}\n\ninterface TreatmentEffectiveness {\n    treatment_type: string;\n    treatment_name: string;\n    total_applications: number;\n    successful_retentions: number;\n    effectiveness_rate: number;\n    average_cost: number;\n    roi_ratio: number;\n    statistical_significance: boolean;\n    sample_size: number;\n}\n\ninterface ABTestResult {\n    test_name: string;\n    group_assignment: 'control' | 'treatment';\n    group_size: number;\n    avg_baseline_risk: number;\n    retained_count: number;\n    churned_count: number;\n    retention_rate: number;\n}\n\ninterface TreatmentTrackerProps {\n    selectedEmployee?: {\n        hr_code: string;\n        name: string;\n        churn_probability: number;\n    };\n    isVisible: boolean;\n    hasDBConnection: boolean;\n    isPerformanceMode?: boolean;\n}\n\nexport const TreatmentTracker: React.FC<TreatmentTrackerProps> = ({\n    selectedEmployee,\n    isVisible,\n    hasDBConnection,\n    isPerformanceMode = false\n}) => {\n    const { toast } = useToast();\n\n    // State management\n    const [isLoading, setIsLoading] = useState(false);\n    const [activeTab, setActiveTab] = useState<'tracking' | 'effectiveness' | 'ab-tests' | 'uplift'>('tracking');\n    const [employeeTreatments, setEmployeeTreatments] = useState<AppType[]>([]);\n    const [treatmentEffectiveness, setTreatmentEffectiveness] = useState<EffType[]>([]);\n    const [abTestResults, setAbTestResults] = useState<ABType[]>([]);\n    const [lastSyncTime, setLastSyncTime] = useState<string | null>(null);\n    const [isConnected, setIsConnected] = useState(hasDBConnection);\n    const [upliftBasic, setUpliftBasic] = useState<any[]>([]);\n    const [upliftCuped, setUpliftCuped] = useState<any[]>([]);\n    const { activeProject } = useProject();\n\n    // Load data when component becomes visible\n    useEffect(() => {\n        if (isVisible && hasDBConnection) {\n            loadTreatmentData();\n        }\n    }, [isVisible, hasDBConnection, selectedEmployee]);\n\n    // Load treatment tracking data\n    const loadTreatmentData = async () => {\n        if (!hasDBConnection || !activeProject?.id) return;\n\n        setIsLoading(true);\n        try {\n            // Load employee treatments if selected\n            if (selectedEmployee) {\n                const apps = await treatmentTrackingService.getEmployeeApplications(activeProject.id, selectedEmployee.hr_code);\n                setEmployeeTreatments(apps);\n            }\n\n            // Load overall effectiveness data\n            const effectiveness = await treatmentTrackingService.getEffectiveness(activeProject.id);\n            setTreatmentEffectiveness(effectiveness);\n\n            // Load A/B test results\n            const abTests = await treatmentTrackingService.getABTests(activeProject.id);\n            setAbTestResults(abTests);\n\n            // Get last sync time\n            const syncTime = await treatmentTrackingService.getLastSync(activeProject.id);\n            setLastSyncTime(syncTime);\n\n            // Load uplift summary via API\n            try {\n                const basic = await api.get('/api/eltv/uplift/basic', { params: { projectId: activeProject.id } });\n                setUpliftBasic(basic.data?.data || []);\n                const tr = await api.get('/api/eltv/uplift/tr', { params: { projectId: activeProject.id } });\n                setUpliftCuped(tr.data?.data || []);\n            } catch (e) {\n                console.warn('Failed to load uplift summary', e);\n            }\n\n            setIsConnected(true);\n        } catch (error) {\n            console.error('Failed to load treatment data:', error);\n            setIsConnected(false);\n            toast({\n                title: \"Error\",\n                description: \"Failed to load treatment tracking data\",\n                variant: \"destructive\",\n            });\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    // Sync with HR system\n    const syncWithHR = async () => {\n        if (!hasDBConnection || !activeProject?.id) return;\n\n        setIsLoading(true);\n        try {\n            // Get connection details from API or use default\n            const connectionDetails = {};\n            const result = await treatmentTrackingService.syncHR(activeProject.id, connectionDetails);\n\n            if (result?.records_updated !== undefined) {\n                toast({\n                    title: \"Sync Completed\",\n                    description: `Updated ${result.records_updated} employee records`,\n                });\n\n                // Reload data after sync\n                await loadTreatmentData();\n            } else {\n                throw new Error('Sync failed');\n            }\n        } catch (error: any) {\n            toast({\n                title: \"Sync Failed\",\n                description: error?.message || \"Failed to sync with HR system\",\n                variant: \"destructive\",\n            });\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    // Apply treatment to selected employee (enhanced with tracking)\n    const applyTreatmentWithTracking = async (treatment: any, abGroup: 'control' | 'treatment' = 'treatment') => {\n        if (!selectedEmployee || !hasDBConnection) return;\n\n        try {\n            // Apply treatment through API\n            const response = await api.post('/playground/apply-treatment', {\n                hr_code: selectedEmployee.hr_code,\n                treatment_id: treatment.id\n            });\n            const result = response.data;\n\n            // Record treatment application for tracking\n            if (result) {\n                try {\n                    const r: any = result as any;\n                    const preProb = r.pre_churn_probability ?? r.preChurnProbability ?? selectedEmployee.churn_probability;\n                    const postProb = r.post_churn_probability ?? r.postChurnProbability ?? Math.max(0, (preProb || 0) * (1 - (treatment.effectSize || 0)));\n                    const preEltv = r.pre_eltv ?? r.eltv_pre_treatment ?? 0;\n                    const postEltv = r.post_eltv ?? r.eltv_post_treatment ?? 0;\n                    const roi = result.roi ?? 0;\n\n                    await api.post('/treatment/record-application', {\n                        hr_code: selectedEmployee.hr_code,\n                        treatment_id: treatment.id,\n                        treatment_name: treatment.name,\n                        cost: treatment.cost || result.treatment_cost || 0,\n                        pre_churn_probability: preProb || 0,\n                        post_churn_probability: postProb || 0,\n                        pre_eltv: preEltv,\n                        post_eltv: postEltv,\n                        roi,\n                        success_indicator: 'pending',\n                        notes: `AB: ${abGroup}`,\n                        applied_by: 'user',\n                        is_simulation: false,\n                    });\n                } catch (err) {\n                    console.error('Failed to record treatment application:', err);\n                }\n                // Reload treatment data\n                await loadTreatmentData();\n            }\n\n            return result;\n        } catch (error) {\n            console.error('Failed to apply treatment with tracking:', error);\n            throw error;\n        }\n    };\n\n    // Create A/B test\n    const createABTest = async () => {\n        if (!hasDBConnection || !activeProject?.id) return;\n\n        try {\n            const created = await treatmentTrackingService.createABTest(activeProject.id);\n            if (created?.testName) {\n                toast({\n                    title: \"A/B Test Created\",\n                    description: `Created test \"${created.testName}\" with ${created.control?.length || 0} control and ${created.treatment?.length || 0} treatment employees`,\n                });\n\n                await loadTreatmentData();\n            }\n        } catch (error: any) {\n            toast({\n                title: \"Failed to Create A/B Test\",\n                description: error.message,\n                variant: \"destructive\",\n            });\n        }\n    };\n\n    if (!isVisible) return null;\n\n    if (!hasDBConnection) {\n        return (\n            <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-6 mb-6\"\n            >\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-full\">\n                        <Database className=\"w-5 h-5 text-amber-600\" />\n                    </div>\n                    <div>\n                        <h3 className=\"text-lg font-semibold text-amber-900 dark:text-amber-100\">\n                            Database Connection Required\n                        </h3>\n                        <p className=\"text-sm text-amber-700 dark:text-amber-300 mt-1\">\n                            Treatment tracking requires an active database connection to your HR system.\n                            Connect to enable real-time validation and A/B testing.\n                        </p>\n                    </div>\n                </div>\n            </motion.div>\n        );\n    }\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden mb-6\"\n        >\n            {/* Header */}\n            <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n                <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg\">\n                            <Activity className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                        </div>\n                        <div>\n                            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n                                Treatment Validation & A/B Testing\n                            </h2>\n                            <div className=\"flex items-center gap-4 mt-1\">\n                                <div className=\"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400\">\n                                    {isConnected ? (\n                                        <>\n                                            <Wifi className=\"w-4 h-4 text-green-500\" />\n                                            <span>Connected</span>\n                                        </>\n                                    ) : (\n                                        <>\n                                            <WifiOff className=\"w-4 h-4 text-red-500\" />\n                                            <span>Disconnected</span>\n                                        </>\n                                    )}\n                                </div>\n                                {lastSyncTime && (\n                                    <div className=\"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400\">\n                                        <Clock className=\"w-4 h-4\" />\n                                        <span>Last sync: {new Date(lastSyncTime).toLocaleString()}</span>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"flex items-center gap-2\">\n                        <Button\n                            onClick={syncWithHR}\n                            disabled={isLoading || !isConnected}\n                            size=\"sm\"\n                            variant=\"outline\"\n                            className=\"flex items-center gap-2\"\n                        >\n                            <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\n                            Sync HR\n                        </Button>\n\n                        <Button\n                            onClick={createABTest}\n                            disabled={isLoading || !isConnected}\n                            size=\"sm\"\n                            className=\"flex items-center gap-2\"\n                        >\n                            <Target className=\"w-4 h-4\" />\n                            Create A/B Test\n                        </Button>\n                    </div>\n                </div>\n            </div>\n\n            {/* Tab Navigation */}\n            <div className=\"px-6 py-3 border-b border-gray-200 dark:border-gray-700\">\n                <div className=\"flex gap-1\">\n                    {[\n                        { id: 'tracking', label: 'Active Treatments', icon: Activity },\n                        { id: 'effectiveness', label: 'Effectiveness', icon: BarChart3 },\n                        { id: 'ab-tests', label: 'A/B Tests', icon: Users },\n                        { id: 'uplift', label: 'Uplift', icon: BarChart3 }\n                    ].map(tab => (\n                        <button\n                            key={tab.id}\n                            onClick={() => setActiveTab(tab.id as any)}\n                            className={`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-2 ${activeTab === tab.id\n                                    ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300'\n                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                                }`}\n                        >\n                            <tab.icon className=\"w-4 h-4\" />\n                            {tab.label}\n                        </button>\n                    ))}\n                </div>\n            </div>\n\n            {/* Tab Content */}\n            <div className=\"p-6\">\n                <AnimatePresence mode=\"wait\">\n                    {activeTab === 'tracking' && (\n                        <motion.div\n                            key=\"tracking\"\n                            initial={{ opacity: 0, x: -20 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            exit={{ opacity: 0, x: 20 }}\n                            className=\"space-y-4\"\n                        >\n                            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n                                {selectedEmployee ? `Treatments for ${selectedEmployee.name}` : 'Select an employee to view treatments'}\n                            </h3>\n\n                            {selectedEmployee && employeeTreatments.length > 0 ? (\n                                <div className=\"space-y-3\">\n                                    {employeeTreatments.map(treatment => (\n                                        <div\n                                            key={treatment.id}\n                                            className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-600\"\n                                        >\n                                            <div className=\"flex items-start justify-between\">\n                                                <div className=\"flex-1\">\n                                                    <div className=\"flex items-center gap-2 mb-2\">\n                                                        <span className=\"font-medium text-gray-900 dark:text-gray-100\">\n                                                            {treatment.treatment_name}\n                                                        </span>\n                                                        <span className={`px-2 py-1 text-xs rounded-full ${treatment.status === 'completed' ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300' :\n                                                                treatment.status === 'active' ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300' :\n                                                                    treatment.status === 'applied' ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300' :\n                                                                        'bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300'\n                                                            }`}>\n                                                            {treatment.status}\n                                                        </span>\n                                                        <span className={`px-2 py-1 text-xs rounded-full ${treatment.ab_group === 'treatment'\n                                                                ? 'bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300'\n                                                                : 'bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300'\n                                                            }`}>\n                                                            {treatment.ab_group}\n                                                        </span>\n                                                    </div>\n\n                                                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                                                        <div>\n                                                            <span className=\"text-gray-500 dark:text-gray-400\">Applied:</span>\n                                                            <p className=\"font-medium\">{new Date(treatment.applied_date).toLocaleDateString()}</p>\n                                                        </div>\n                                                        <div>\n                                                            <span className=\"text-gray-500 dark:text-gray-400\">Predicted Impact:</span>\n                                                            <p className=\"font-medium\">{(treatment.predicted_churn_reduction * 100).toFixed(1)}%</p>\n                                                        </div>\n                                                        {!isPerformanceMode && (\n                                                            <div>\n                                                                <span className=\"text-gray-500 dark:text-gray-400\">Cost:</span>\n                                                                <p className=\"font-medium\">${treatment.actual_cost || treatment.predicted_cost}</p>\n                                                            </div>\n                                                        )}\n                                                        <div>\n                                                            <span className=\"text-gray-500 dark:text-gray-400\">Predicted ROI:</span>\n                                                            <p className=\"font-medium\">{treatment.predicted_roi.toFixed(1)}x</p>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            ) : selectedEmployee ? (\n                                <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                    No treatments applied to this employee yet\n                                </div>\n                            ) : (\n                                <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                    Select an employee from the list to view their treatment history\n                                </div>\n                            )}\n                        </motion.div>\n                    )}\n\n                    {activeTab === 'effectiveness' && (\n                        <motion.div\n                            key=\"effectiveness\"\n                            initial={{ opacity: 0, x: -20 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            exit={{ opacity: 0, x: 20 }}\n                            className=\"space-y-4\"\n                        >\n                            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n                                Treatment Effectiveness Analysis\n                            </h3>\n\n                            {treatmentEffectiveness.length > 0 ? (\n                                <div className=\"space-y-4\">\n                                    {treatmentEffectiveness.map((item, index) => (\n                                        <div\n                                            key={index}\n                                            className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-600\"\n                                        >\n                                            <div className=\"flex items-center justify-between mb-3\">\n                                                <h4 className=\"font-medium text-gray-900 dark:text-gray-100\">\n                                                    {item.treatment_name}\n                                                </h4>\n                                                <div className=\"flex items-center gap-2\">\n                                                    {item.statistical_significance && (\n                                                        <Award className=\"w-4 h-4 text-green-500\" />\n                                                    )}\n                                                    <span className={`px-2 py-1 text-xs rounded-full ${item.effectiveness_rate > 0.7 ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300' :\n                                                            item.effectiveness_rate > 0.5 ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300' :\n                                                                'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300'\n                                                        }`}>\n                                                        {(item.effectiveness_rate * 100).toFixed(1)}% effective\n                                                    </span>\n                                                </div>\n                                            </div>\n\n                                            <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm\">\n                                                <div>\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Applications:</span>\n                                                    <p className=\"font-medium\">{item.total_applications}</p>\n                                                </div>\n                                                <div>\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Successful:</span>\n                                                    <p className=\"font-medium text-green-600 dark:text-green-400\">\n                                                        {item.successful_retentions}\n                                                    </p>\n                                                </div>\n                                                <div>\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Avg Cost:</span>\n                                                    <p className=\"font-medium\">${item.average_cost.toLocaleString()}</p>\n                                                </div>\n                                                <div>\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">ROI Ratio:</span>\n                                                    <p className=\"font-medium\">{item.roi_ratio.toFixed(1)}x</p>\n                                                </div>\n                                                <div>\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Sample Size:</span>\n                                                    <p className=\"font-medium\">{item.sample_size}</p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            ) : (\n                                <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                    No effectiveness data available yet. Apply treatments and sync with HR to see results.\n                                </div>\n                            )}\n                        </motion.div>\n                    )}\n\n                    {activeTab === 'ab-tests' && (\n                        <motion.div\n                            key=\"ab-tests\"\n                            initial={{ opacity: 0, x: -20 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            exit={{ opacity: 0, x: 20 }}\n                            className=\"space-y-4\"\n                        >\n                            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n                                A/B Test Results\n                            </h3>\n\n                            {abTestResults.length > 0 ? (\n                                <div className=\"space-y-6\">\n                                    {/* Group A/B test results by test name */}\n                                    {Object.entries(\n                                        abTestResults.reduce((acc, result) => {\n                                            if (!acc[result.test_name]) acc[result.test_name] = [];\n                                            acc[result.test_name].push(result);\n                                            return acc;\n                                        }, {} as Record<string, ABTestResult[]>)\n                                    ).map(([testName, results]) => (\n                                        <div\n                                            key={testName}\n                                            className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-600\"\n                                        >\n                                            <h4 className=\"font-medium text-gray-900 dark:text-gray-100 mb-3\">\n                                                {testName}\n                                            </h4>\n\n                                            <div className=\"grid md:grid-cols-2 gap-4\">\n                                                {results.map(result => (\n                                                    <div\n                                                        key={`${testName}-${result.group_assignment}`}\n                                                        className={`p-3 rounded border ${result.group_assignment === 'treatment'\n                                                                ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800'\n                                                                : 'bg-gray-100 dark:bg-gray-600/50 border-gray-300 dark:border-gray-500'\n                                                            }`}\n                                                    >\n                                                        <div className=\"flex items-center justify-between mb-2\">\n                                                            <span className=\"font-medium capitalize\">\n                                                                {result.group_assignment} Group\n                                                            </span>\n                                                            <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                                                {result.group_size} employees\n                                                            </span>\n                                                        </div>\n\n                                                        <div className=\"space-y-1 text-sm\">\n                                                            <div className=\"flex justify-between\">\n                                                                <span>Retained:</span>\n                                                                <span className=\"font-medium text-green-600 dark:text-green-400\">\n                                                                    {result.retained_count}\n                                                                </span>\n                                                            </div>\n                                                            <div className=\"flex justify-between\">\n                                                                <span>Churned:</span>\n                                                                <span className=\"font-medium text-red-600 dark:text-red-400\">\n                                                                    {result.churned_count}\n                                                                </span>\n                                                            </div>\n                                                            <div className=\"flex justify-between\">\n                                                                <span>Retention Rate:</span>\n                                                                <span className=\"font-medium\">\n                                                                    {result.retention_rate.toFixed(1)}%\n                                                                </span>\n                                                            </div>\n                                                            <div className=\"flex justify-between\">\n                                                                <span>Avg Baseline Risk:</span>\n                                                                <span className=\"font-medium\">\n                                                                    {(result.avg_baseline_risk * 100).toFixed(1)}%\n                                                                </span>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n\n                                            {/* Calculate and show comparison */}\n                                            {results.length === 2 && (\n                                                <div className=\"mt-4 p-3 bg-white dark:bg-gray-800 rounded border\">\n                                                    <div className=\"text-sm\">\n                                                        <span className=\"font-medium\">Treatment Effect: </span>\n                                                        {(() => {\n                                                            const treatment = results.find(r => r.group_assignment === 'treatment');\n                                                            const control = results.find(r => r.group_assignment === 'control');\n                                                            if (treatment && control) {\n                                                                const effect = treatment.retention_rate - control.retention_rate;\n                                                                return (\n                                                                    <span className={`font-medium ${effect > 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'\n                                                                        }`}>\n                                                                        {effect > 0 ? '+' : ''}{effect.toFixed(1)}% retention improvement\n                                                                    </span>\n                                                                );\n                                                            }\n                                                            return 'Calculating...';\n                                                        })()}\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n                                    ))}\n                                </div>\n                            ) : (\n                                <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                    No A/B tests created yet. Create a test to compare treatment effectiveness.\n                                </div>\n                            )}\n                        </motion.div>\n                    )}\n\n                    {activeTab === 'uplift' && (\n                        <motion.div\n                            key=\"uplift\"\n                            initial={{ opacity: 0, x: -20 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            exit={{ opacity: 0, x: 20 }}\n                            className=\"space-y-6\"\n                        >\n                            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2\">Uplift Summary</h3>\n                            <div>\n                                <h4 className=\"text-sm font-semibold mb-2\">Baseline (Diff-in-Proportions)</h4>\n                                <div className=\"overflow-x-auto border border-gray-200 dark:border-gray-700 rounded\">\n                                    <table className=\"min-w-full text-sm\">\n                                        <thead className=\"bg-gray-50 dark:bg-gray-800\">\n                                            <tr>\n                                                <th className=\"px-2 py-2 text-left\">Treatment</th>\n                                                <th className=\"px-2 py-2 text-right\">T</th>\n                                                <th className=\"px-2 py-2 text-right\">C</th>\n                                                <th className=\"px-2 py-2 text-right\">Rate T</th>\n                                                <th className=\"px-2 py-2 text-right\">Rate C</th>\n                                                <th className=\"px-2 py-2 text-right\">Uplift</th>\n                                                <th className=\"px-2 py-2 text-right\">95% CI</th>\n                                                <th className=\"px-2 py-2 text-right\">p</th>\n                                                <th className=\"px-2 py-2 text-right\">Power80%</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            {upliftBasic.length === 0 ? (\n                                                <tr><td className=\"px-2 py-3 text-gray-500\" colSpan={9}>No data</td></tr>\n                                            ) : upliftBasic.map((r, idx) => (\n                                                <tr key={idx} className=\"border-t border-gray-200 dark:border-gray-700\">\n                                                    <td className=\"px-2 py-2\">{r.treatment_name}</td>\n                                                    <td className=\"px-2 py-2 text-right\">{r.n_treatment}</td>\n                                                    <td className=\"px-2 py-2 text-right\">{r.n_control}</td>\n                                                    <td className=\"px-2 py-2 text-right\">{(r.retention_rate_t * 100).toFixed(1)}%</td>\n                                                    <td className=\"px-2 py-2 text-right\">{(r.retention_rate_c * 100).toFixed(1)}%</td>\n                                                    <td className=\"px-2 py-2 text-right\">{(r.uplift * 100).toFixed(1)}%</td>\n                                                    <td className=\"px-2 py-2 text-right\">[{(r.ci_low * 100).toFixed(1)}%, {(r.ci_high * 100).toFixed(1)}%]</td>\n                                                    <td className=\"px-2 py-2 text-right\">{r.p_value?.toFixed(3)}</td>\n                                                    <td className=\"px-2 py-2 text-right\">{r.power_80 ? 'Yes' : 'No'}</td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                            <div>\n                                <h4 className=\"text-sm font-semibold mb-2\">CUPED-Adjusted</h4>\n                                <div className=\"overflow-x-auto border border-gray-200 dark:border-gray-700 rounded\">\n                                    <table className=\"min-w-full text-sm\">\n                                        <thead className=\"bg-gray-50 dark:bg-gray-800\">\n                                            <tr>\n                                                <th className=\"px-2 py-2 text-left\">Treatment</th>\n                                                <th className=\"px-2 py-2 text-right\">Uplift (CUPED)</th>\n                                                <th className=\"px-2 py-2 text-right\"></th>\n                                                <th className=\"px-2 py-2 text-right\">Variance Reduction</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            {upliftCuped.length === 0 ? (\n                                                <tr><td className=\"px-2 py-3 text-gray-500\" colSpan={4}>No data</td></tr>\n                                            ) : upliftCuped.map((r, idx) => (\n                                                <tr key={idx} className=\"border-t border-gray-200 dark:border-gray-700\">\n                                                    <td className=\"px-2 py-2\">{r.treatment_name}</td>\n                                                    <td className=\"px-2 py-2 text-right\">{(r.uplift_cuped * 100).toFixed(1)}%</td>\n                                                    <td className=\"px-2 py-2 text-right\">{r.cuped_theta?.toFixed(3)}</td>\n                                                    <td className=\"px-2 py-2 text-right\">{((r.cuped_variance_reduction || 0) * 100).toFixed(1)}%</td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n                                <p className=\"text-xs text-gray-500 mt-1\">CUPED adjusts for baseline differences to reduce variance.</p>\n                            </div>\n                        </motion.div>\n                    )}\n                </AnimatePresence>\n            </div>\n        </motion.div>\n    );\n};\n\nexport default TreatmentTracker;\n","import { useState, useEffect, useCallback } from 'react';\nimport {\n  RiskThresholds,\n  DynamicRiskConfig,\n  AutoAdjustmentConfig,\n  getCurrentRiskConfig,\n  subscribeToThresholdChanges,\n  getDynamicRiskLevel,\n  getDynamicRiskLevelWithStyles,\n  getDynamicRiskDistribution,\n  autoAdjustThresholds,\n  getAutoAdjustmentConfig,\n} from '../config/riskThresholds';\n\nexport interface UseDynamicRiskRangesReturn {\n  // Current configuration\n  config: DynamicRiskConfig;\n  thresholds: RiskThresholds;\n  autoConfig: AutoAdjustmentConfig;\n  \n  // Auto-adjustment functions\n  autoAdjust: (employees: Array<{ churnProbability?: number }>, forceAdjust?: boolean) => Promise<{ adjusted: boolean; reason?: string; newThresholds?: RiskThresholds }>;\n  \n  // Utility functions\n  getRiskLevel: (probability: number) => 'High' | 'Medium' | 'Low';\n  getRiskLevelWithStyles: (probability: number) => any;\n  calculateRiskDistribution: (employees: Array<{ churnProbability?: number }>) => { high: number; medium: number; low: number };\n  \n  // State\n  isLoading: boolean;\n  error: string | null;\n}\n\n/**\n * Hook for managing dynamic risk thresholds\n * Provides reactive access to risk threshold configuration with automatic updates\n */\nexport function useDynamicRiskRanges(): UseDynamicRiskRangesReturn {\n  const [config, setConfig] = useState<DynamicRiskConfig>(getCurrentRiskConfig());\n  const [autoConfig] = useState<AutoAdjustmentConfig>(getAutoAdjustmentConfig());\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Subscribe to configuration changes\n  useEffect(() => {\n    const unsubscribe = subscribeToThresholdChanges((newConfig) => {\n      setConfig(newConfig);\n      setError(null);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  // Auto-adjust thresholds\n  const handleAutoAdjust = useCallback(async (\n    employees: Array<{ churnProbability?: number }>,\n    forceAdjust = false\n  ) => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const result = await autoAdjustThresholds(employees, forceAdjust);\n      return result;\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Auto-adjustment failed';\n      setError(errorMessage);\n      return { adjusted: false, reason: errorMessage };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  return {\n    // Current configuration\n    config,\n    thresholds: config.current,\n    autoConfig,\n    \n    // Auto-adjustment functions\n    autoAdjust: handleAutoAdjust,\n    \n    // Utility functions (these use current dynamic thresholds)\n    getRiskLevel: getDynamicRiskLevel,\n    getRiskLevelWithStyles: getDynamicRiskLevelWithStyles,\n    calculateRiskDistribution: getDynamicRiskDistribution,\n    \n    // State\n    isLoading,\n    error,\n  };\n}\n\n/**\n * Alias for useDynamicRiskRanges for backward compatibility\n */\nexport const useCurrentRiskThresholds = useDynamicRiskRanges;\n","import React, { useState, useEffect, useRef, useMemo, memo, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { motion } from 'framer-motion';\nimport {\n  TrendingUp,\n  AlertTriangle,\n  Search,\n  Info,\n  Bot,\n  Loader2,\n  FlaskConical,\n  Calculator,\n  Users,\n  GitCompare,\n  Zap,\n  Activity,\n  CheckCircle\n} from 'lucide-react';\nimport { cn } from '../utils/cn';\nimport { useToast } from '@/hooks/use-toast';\nimport { useProject } from '@/contexts/ProjectContext';\nimport ErrorBoundary from '@/components/ErrorBoundary';\nimport { useErrorReporting } from '@/utils/errorReporting';\nimport { useGlobalDataCache } from '@/hooks/useGlobalDataCache';\nimport { Employee } from '@/types/employee';\nimport type { TreatmentOptions, TreatmentSuggestion, ApplyTreatmentResult } from '@/types/treatment';\nimport { RiskIndicator } from '@/components/RiskIndicator';\nimport TreatmentTracker from '@/components/TreatmentTracker';\nimport { useDynamicRiskRanges } from '../hooks/useDynamicRiskThresholds';\nimport { FixedSizeList as List } from 'react-window';\nimport { AutoSizer } from 'react-virtualized';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip as RechartsTooltip,\n  ResponsiveContainer,\n  Legend\n} from 'recharts';\nimport { useLocation } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { TrainingReminderBanner } from '../components/TrainingReminderBanner';\nimport { ModelTrainingRequired } from '../components/ModelTrainingRequired';\nimport api from '../services/api';\nimport { employeeService } from '../services/employee';\n\n// --- WhatIf Adjustments State ---\ninterface WhatIfState {\n  tenure: number | null;\n  employee_cost: number | null;\n}\n\n// --- Import Backend Types (Assume these are defined/imported correctly) ---\n// You might need to create these types based on the backend service definitions\n// or place them in a shared types directory.\ninterface SurvivalProbabilities { [key: string]: number; }\ninterface EmployeeDataStrict {\n  hr_code: string;\n  full_name: string;\n  structure_name: string;\n  position: string;\n  status: string;\n  tenure: number;\n  employee_cost: number;\n  report_date: string;\n  normalized_position_level?: string;\n  termination_date: string | null;\n}\ninterface PlaygroundEmployeeData {\n  employee_id: string;\n  current_features: EmployeeDataStrict;\n  current_churn_probability: number;\n  current_eltv: number;\n  current_survival_probabilities: SurvivalProbabilities;\n  shap_values: { [featureName: string]: number };\n  normalized_position_level?: string;\n}\ninterface SuggestionExplanation { // Added from backend\n  ruleId: string;\n  ruleName: string;\n  impact: number;\n  newProbability: number;\n  reason: string;\n}\n// Use shared TreatmentSuggestion & ApplyTreatmentResult types\n\n// --- End Backend Types ---\n\n\n// Utility functions\nfunction formatCurrency(value: number): string {\n  if (value === undefined || value === null || isNaN(value)) return '$0.00';\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(value);\n}\n\n// ELTV categorical conversion functions\nfunction convertELTVToCategory(eltv: number): 'high' | 'medium' | 'low' {\n  // Convert ELTV to categorical based on value ranges\n  if (eltv >= 100000) return 'high';\n  if (eltv >= 50000) return 'medium';\n  return 'low';\n}\n\nfunction formatELTVByMode(eltv: number, mode: 'quantification' | 'quality'): string {\n  if (mode === 'quality') {\n    const category = convertELTVToCategory(eltv);\n    return category.charAt(0).toUpperCase() + category.slice(1);\n  }\n  return formatCurrency(eltv);\n}\n\nfunction getELTVCategoryClass(eltv: number): string {\n  const category = convertELTVToCategory(eltv);\n  if (category === 'high') return 'text-emerald-600 dark:text-emerald-400';\n  if (category === 'medium') return 'text-yellow-600 dark:text-yellow-400';\n  return 'text-red-600 dark:text-red-400';\n}\n\n// Info text helpers for ELTV/RVI tooltips\nfunction getMetricInfoText(metric: 'current' | 'post', isPerformanceMode: boolean): string {\n  if (isPerformanceMode) {\n    return metric === 'current'\n      ? 'RVI (Retention Value Index) is a qualitative index (High/Medium/Low) derived from the modeled retention value and churn risk signals. In performance mode it does not use salary and is shown as categories rather than currency.'\n      : 'RVI Post-Treatment indicates the expected category (High/Medium/Low) after applying the treatment, reflecting the treatments impact on predicted retention without using salary figures.';\n  }\n  return metric === 'current'\n    ? 'ELTV (Employee Lifetime Value) estimates the present value of an employees contribution based on predicted retention (survival probabilities) over a fixed horizon and a discount rate, scaled by the employees salary.'\n    : 'ELTV Post-Treatment is the projected value using the updated retention curve after applying the selected treatment. The display here does not subtract treatment cost; costs are reflected separately in ROI.';\n}\n\n// Calculate treatment cost as percentage of employee salary\nfunction calculateCostPercentage(treatmentCost: number, employeeSalary: number): number {\n  if (!employeeSalary || employeeSalary <= 0) return 0;\n  return (treatmentCost / employeeSalary) * 100;\n}\n\nfunction formatCostPercentage(percentage: number): string {\n  return `${percentage.toFixed(1)}%`;\n}\n\n// -------------------------------------\n// Data Interfaces and Mock Treatments\n// -------------------------------------\n// Removed Treatment interface - use TreatmentSuggestion / TreatmentOptions from backend types\n// Removed SimulationResult interface - use ApplyTreatmentResult\n\n// Risk zone configuration\n// const riskZones = [\n//   { name: 'High Risk', color: 'rgba(239, 68, 68, 0.1)', threshold: 0.6 },\n//   { name: 'Medium Risk', color: 'rgba(245, 158, 11, 0.1)', threshold: 0.8 },\n//   { name: 'Low Risk', color: 'rgba(34, 197, 94, 0.1)', threshold: 1.0 },\n// ];\n\n// Sorting options\n// const sortOptions = [\n//   { id: 'risk', label: 'Risk Level' },\n//   { id: 'name', label: 'Name' },\n//   { id: 'department', label: 'Department' },\n//   { id: 'eltv', label: 'Current ELTV' }\n// ];\n\n// Metric descriptions for tooltips\nconst metricDescriptions = {\n  treatmentEffectELTV: 'The expected increase in Employee Lifetime Value after applying the selected treatment',\n  newELTV: 'Projected Employee Lifetime Value after the treatment is applied',\n  roi: 'Return on Investment = (ELTV Increase - Treatment Cost) / Treatment Cost',\n  timeToValue: 'Estimated time until the treatment shows measurable impact',\n  currentELTV: 'Current Employee Lifetime Value without any interventions',\n  churnProbability: 'Likelihood of the employee leaving within the next 12 months',\n  survivalProbability: 'Probability of the employee staying with the company over time'\n};\n\n// -------------------------------------\n// Reusable UI Components\n// -------------------------------------\ninterface TooltipProps {\n  content: string;\n  children: React.ReactNode;\n  position?: 'top' | 'right' | 'bottom' | 'left';\n  disabled?: boolean;\n}\nfunction CustomTooltip({ content, children, position = 'top', disabled = false }: TooltipProps) {\n  const [show, setShow] = useState(false);\n  const triggerRef = useRef<HTMLDivElement | null>(null);\n  const [coords, setCoords] = useState<{ top: number; left: number }>({ top: 0, left: 0 });\n  const [transformClass, setTransformClass] = useState<string>(\"\");\n  const showTooltipsContext = true; // Simplified for now\n\n  const updatePosition = useCallback(() => {\n    const el = triggerRef.current;\n    if (!el) return;\n    const rect = el.getBoundingClientRect();\n    const margin = 8;\n    if (position === 'top') {\n      setCoords({ top: rect.top - margin, left: rect.left + rect.width / 2 });\n      setTransformClass('-translate-x-1/2 -translate-y-full');\n    } else if (position === 'right') {\n      setCoords({ top: rect.top + rect.height / 2, left: rect.right + margin });\n      setTransformClass('-translate-y-1/2');\n    } else if (position === 'bottom') {\n      setCoords({ top: rect.bottom + margin, left: rect.left + rect.width / 2 });\n      setTransformClass('-translate-x-1/2');\n    } else {\n      // left\n      setCoords({ top: rect.top + rect.height / 2, left: rect.left - margin });\n      setTransformClass('-translate-y-1/2 -translate-x-full');\n    }\n  }, [position]);\n\n  useEffect(() => {\n    if (!show) return;\n    updatePosition();\n    const onScroll = () => updatePosition();\n    const onResize = () => updatePosition();\n    window.addEventListener('scroll', onScroll, true);\n    window.addEventListener('resize', onResize);\n    return () => {\n      window.removeEventListener('scroll', onScroll, true);\n      window.removeEventListener('resize', onResize);\n    };\n  }, [show, updatePosition]);\n\n  return (\n    <div\n      ref={triggerRef}\n      className=\"relative inline-block\"\n      onMouseEnter={() => !disabled && showTooltipsContext && setShow(true)}\n      onMouseLeave={() => !disabled && showTooltipsContext && setShow(false)}\n    >\n      {children}\n      {show && !disabled && showTooltipsContext && createPortal(\n        <div\n          className={cn(\n            \"fixed z-[9999] px-2 py-1 text-xs bg-white border border-gray-200 rounded shadow-lg whitespace-nowrap dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200\",\n            transformClass\n          )}\n          style={{ top: coords.top, left: coords.left }}\n        >\n          {content}\n        </div>,\n        document.body\n      )}\n    </div>\n  );\n}\n\n// Clickable, accessible info popover with rich content rendered in a portal\nfunction InfoPopover({\n  title,\n  children,\n  content,\n  position = 'top',\n}: {\n  title: string;\n  children: React.ReactNode;\n  content: React.ReactNode;\n  position?: 'top' | 'right' | 'bottom' | 'left';\n}) {\n  const [open, setOpen] = useState(false);\n  const triggerRef = useRef<HTMLButtonElement | null>(null);\n  const panelRef = useRef<HTMLDivElement | null>(null);\n  const [coords, setCoords] = useState<{ top: number; left: number }>({ top: 0, left: 0 });\n  const [transformClass, setTransformClass] = useState<string>(\"\");\n\n  const updatePosition = useCallback(() => {\n    const el = triggerRef.current;\n    if (!el) return;\n    const rect = el.getBoundingClientRect();\n    const margin = 10;\n    if (position === 'top') {\n      setCoords({ top: rect.top - margin, left: rect.left + rect.width / 2 });\n      setTransformClass('-translate-x-1/2 -translate-y-full');\n    } else if (position === 'right') {\n      setCoords({ top: rect.top + rect.height / 2, left: rect.right + margin });\n      setTransformClass('-translate-y-1/2');\n    } else if (position === 'bottom') {\n      setCoords({ top: rect.bottom + margin, left: rect.left + rect.width / 2 });\n      setTransformClass('-translate-x-1/2');\n    } else {\n      setCoords({ top: rect.top + rect.height / 2, left: rect.left - margin });\n      setTransformClass('-translate-y-1/2 -translate-x-full');\n    }\n  }, [position]);\n\n  useEffect(() => {\n    if (!open) return;\n    updatePosition();\n    const onScroll = () => updatePosition();\n    const onResize = () => updatePosition();\n    const onClickOutside = (e: MouseEvent) => {\n      if (!panelRef.current || !triggerRef.current) return;\n      if (panelRef.current.contains(e.target as Node)) return;\n      if (triggerRef.current.contains(e.target as Node)) return;\n      setOpen(false);\n    };\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') setOpen(false);\n    };\n    window.addEventListener('scroll', onScroll, true);\n    window.addEventListener('resize', onResize);\n    window.addEventListener('mousedown', onClickOutside);\n    window.addEventListener('keydown', onKeyDown as any);\n    return () => {\n      window.removeEventListener('scroll', onScroll, true);\n      window.removeEventListener('resize', onResize);\n      window.removeEventListener('mousedown', onClickOutside);\n      window.removeEventListener('keydown', onKeyDown as any);\n    };\n  }, [open, updatePosition]);\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        ref={triggerRef}\n        onClick={() => setOpen(v => !v)}\n        aria-expanded={open}\n        aria-label={`${title} info`}\n        className=\"inline-flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-blue-500/40 rounded\"\n      >\n        {children}\n      </button>\n      {open && createPortal(\n        <div\n          ref={panelRef}\n          className={cn(\n            'fixed z-[10000] max-w-xs sm:max-w-sm md:max-w-md p-3 sm:p-3.5 rounded-lg shadow-xl border backdrop-blur bg-white/95 dark:bg-gray-900/95 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200',\n            transformClass\n          )}\n          style={{ top: coords.top, left: coords.left }}\n          role=\"dialog\"\n          aria-modal=\"true\"\n        >\n          <div className=\"flex items-start gap-2 mb-2\">\n            <Info className=\"w-4 h-4 text-blue-500 mt-0.5\" />\n            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">{title}</h4>\n            <button onClick={() => setOpen(false)} className=\"ml-auto text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"></button>\n          </div>\n          <div className=\"text-xs leading-5 space-y-2\">\n            {content}\n          </div>\n        </div>,\n        document.body\n      )}\n    </>\n  );\n}\n\n// Context removed for simplicity, enable if needed later\n// const ShowTooltipsContext = createContext(true);\n\n// function SkeletonLoader({ className = \"\" }: { className?: string }) {\n//   return <div className={cn(\"animate-pulse bg-gray-200 dark:bg-gray-700 rounded\", className)} />;\n// }\n\n\n// Unused component - commented out\n// function EmployeeCardSkeleton() {\n//   return (\n//     <div className=\"p-3 rounded-lg border border-gray-100 dark:border-gray-800\">\n//       <div className=\"flex items-center justify-between\">\n//         <div className=\"flex-1\">\n//           <SkeletonLoader className=\"h-5 w-32 mb-2\" />\n//           <SkeletonLoader className=\"h-4 w-24 mb-1\" />\n//           <SkeletonLoader className=\"h-3 w-20\" />\n//         </div>\n//         <SkeletonLoader className=\"h-8 w-8 rounded-full\" />\n//       </div>\n//     </div>\n//   );\n// }\n\n// Treatment Card Component\nconst TreatmentCard = memo(({\n  treatment,\n  onSelect,\n  isSelected = false,\n  isLoading = false,\n  employeeSalary = 0\n}: {\n  treatment: TreatmentSuggestion;\n  onSelect: (treatment: TreatmentSuggestion) => void;\n  isSelected?: boolean;\n  isLoading?: boolean;\n  employeeSalary?: number;\n}) => {\n  const isPerformanceMode = (typeof window !== 'undefined') && (localStorage.getItem('settings.dataMode') === 'performance');\n  // Format change as a percentage with sign\n  const formatChangePercent = (change: number) => {\n    const sign = change < 0 ? '' : '+'; // use minus sign instead of hyphen\n    return `${sign}${Math.abs(change * 100).toFixed(1)}%`;\n  };\n\n  // Format ROI with proper handling of new category system\n  const formatROI = (roi: 'high' | 'medium' | 'low') => {\n    if (!roi || typeof roi !== 'string') {\n      return 'Unknown';\n    }\n    return roi.charAt(0).toUpperCase() + roi.slice(1);\n  };\n\n  // Derive class based on ROI for visual indication\n  const getRoiClass = (roi: 'high' | 'medium' | 'low') => {\n    if (!roi || typeof roi !== 'string') {\n      return 'text-gray-500 dark:text-gray-400';\n    }\n    if (roi === 'high') return 'text-emerald-600 dark:text-emerald-400';\n    if (roi === 'medium') return 'text-yellow-600 dark:text-yellow-400';\n    return 'text-red-600 dark:text-red-400';\n  };\n\n  // Determine if this is an ongoing cost treatment\n  const isOngoingCost = treatment.name.toLowerCase().includes('salary increase') ||\n    treatment.name.toLowerCase().includes('salary adjustment');\n\n  return (\n    <motion.div\n      className={`group relative overflow-hidden rounded-xl transition-all duration-500 cursor-pointer ${isSelected\n        ? 'bg-gradient-to-br from-blue-500/10 via-purple-500/5 to-blue-500/10 border-2 border-blue-400/50 shadow-xl shadow-blue-500/20'\n        : 'bg-gradient-to-br from-white via-gray-50/50 to-white dark:from-gray-800 dark:via-gray-800/80 dark:to-gray-800 border border-gray-200/60 dark:border-gray-700/60 hover:border-blue-300/50 dark:hover:border-blue-600/50 hover:shadow-lg hover:shadow-blue-500/10'\n        }`}\n      onClick={() => {\n        !isLoading && onSelect(treatment);\n      }}\n      whileHover={{\n        scale: 1.01,\n        transition: {\n          type: \"tween\",\n          duration: 0.15\n        }\n      }}\n      whileTap={{\n        scale: 0.99,\n        transition: {\n          type: \"tween\",\n          duration: 0.1\n        }\n      }}\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{\n        duration: 0.2,\n        ease: \"easeOut\"\n      }}\n      style={{\n        willChange: 'transform',\n        backfaceVisibility: 'hidden'\n      }}\n    >\n      {/* Simplified overlay */}\n      <div className=\"absolute inset-0 bg-blue-50/50 dark:bg-blue-900/10 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"></div>\n\n      {/* Loading overlay */}\n      {isLoading && (\n        <div className=\"absolute inset-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm flex items-center justify-center rounded-xl z-50\">\n          <div className=\"flex items-center gap-2\">\n            <Loader2 className=\"w-5 h-5 text-blue-500 animate-spin\" />\n            <span className=\"text-sm text-gray-600 dark:text-gray-300\">Applying...</span>\n          </div>\n        </div>\n      )}\n\n      <div className=\"relative z-10 p-5 flex flex-col\">\n        <div className=\"flex flex-col gap-4\">\n          {/* Header */}\n          <div className=\"flex justify-between items-start mb-4\">\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <div className={`w-2 h-2 rounded-full ${isSelected ? 'bg-blue-400' : 'bg-gray-300 dark:bg-gray-600'} transition-colors`}></div>\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 text-base leading-tight break-words\">\n                  {treatment.name}\n                </h3>\n              </div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 leading-relaxed break-words whitespace-pre-line\">\n                {treatment.description}\n              </p>\n            </div>\n            {/* Status indicator */}\n            <div className={`flex-shrink-0 w-3 h-3 rounded-full ${isSelected ? 'bg-blue-500 shadow-lg shadow-blue-500/50' : 'bg-gray-300 dark:bg-gray-600'\n              } transition-all duration-300`}></div>\n          </div>\n\n          {/* Treatment info badges */}\n          {(((treatment as any).timeToEffect) || (treatment.riskLevels && treatment.riskLevels.length > 0)) && (\n            <div className=\"flex items-center gap-2 text-xs mb-4 flex-wrap\">\n              {(treatment as any).timeToEffect && (\n                <span className=\"inline-flex items-center gap-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2.5 py-1 rounded-lg border border-blue-200 dark:border-blue-800 whitespace-normal break-words\">\n                  <Info size={12} />\n                  <span className=\"font-medium\">Effect: {(treatment as any).timeToEffect}</span>\n                </span>\n              )}\n              {treatment.riskLevels && treatment.riskLevels.length > 0 && (\n                <span className=\"inline-flex items-center gap-1.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 px-2.5 py-1 rounded-lg border border-amber-200 dark:border-amber-800 whitespace-normal break-words\">\n                  <AlertTriangle size={12} />\n                  <span className=\"font-medium\">Best for: {treatment.riskLevels.join(', ')} risk</span>\n                </span>\n              )}\n            </div>\n          )}\n\n          {/* LLM Reasoning Display - Enhanced Look */}\n          {treatment.explanation && treatment.explanation.length > 0 && treatment.explanation[0].ruleId === 'llm' && (\n            <div className=\"mb-4 p-4 bg-gradient-to-r from-indigo-50 via-purple-50 to-blue-50 dark:from-indigo-900/20 dark:via-purple-900/20 dark:to-blue-900/20 rounded-xl border border-indigo-200/50 dark:border-indigo-700/50\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <div className=\"w-6 h-6 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center\">\n                  <Bot size={14} className=\"text-white\" />\n                </div>\n                <h4 className=\"text-sm font-semibold text-indigo-800 dark:text-indigo-200\">\n                  AI Reasoning\n                </h4>\n              </div>\n              <p className=\"text-sm text-indigo-700 dark:text-indigo-300 leading-relaxed pl-2 border-l-2 border-indigo-300 dark:border-indigo-600 break-words\">\n                {treatment.explanation[0].reason}\n              </p>\n            </div>\n          )}\n\n          {/* Metrics Grid */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-5\">\n            <div className=\"bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-900/20 dark:to-emerald-900/10 rounded-lg p-3 border border-emerald-200/50 dark:border-emerald-800/50\">\n              <p className=\"text-xs font-medium text-emerald-600 dark:text-emerald-400 mb-1 whitespace-pre-wrap leading-snug\">Churn Impact</p>\n              <p className={`text-sm font-bold ${treatment.projected_churn_prob_change <= 0 ? 'text-emerald-700 dark:text-emerald-300' : 'text-red-700 dark:text-red-300'}`}>\n                {formatChangePercent(treatment.projected_churn_prob_change)}\n              </p>\n              <p className=\"text-xs text-emerald-600/70 dark:text-emerald-400/70 mt-0.5\">\n                ~{Math.abs((treatment.effectSize || 0) * 100).toFixed(0)}% reduction\n              </p>\n            </div>\n\n            <div className=\"bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-900/10 rounded-lg p-3 border border-blue-200/50 dark:border-blue-800/50\">\n              <p className=\"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1 whitespace-pre-wrap leading-snug\">ROI</p>\n              <p className={`text-sm font-bold ${getRoiClass(treatment.projected_roi)}`}>\n                {formatROI(treatment.projected_roi)}\n              </p>\n              <p className=\"text-xs text-blue-600/70 dark:text-blue-400/70 mt-0.5\">\n                {isOngoingCost ? 'over 3 years' : 'one-time'}\n              </p>\n            </div>\n\n            <div className=\"bg-gradient-to-br from-gray-50 to-gray-100/50 dark:from-gray-800/20 dark:to-gray-800/10 rounded-lg p-3 border border-gray-200/50 dark:border-gray-700/50\">\n              <p className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1 whitespace-pre-wrap leading-snug\">Cost</p>\n              <p className=\"text-sm font-bold text-gray-800 dark:text-gray-200\">\n                {formatCostPercentage(calculateCostPercentage(treatment.cost, employeeSalary))}\n              </p>\n              <p className=\"text-xs text-gray-600/70 dark:text-gray-400/70 mt-0.5\">\n                of annual salary\n              </p>\n            </div>\n          </div>\n\n          {/* Expected Post-Treatment Value (ELTV or RVI) */}\n          <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-3 mb-4 border border-purple-200/50 dark:border-purple-700/50\">\n            <div className=\"flex justify-between items-center\">\n              <div>\n                <div className=\"flex items-center gap-1 mb-1\">\n                  <p className=\"text-xs font-medium text-purple-600 dark:text-purple-400\">{isPerformanceMode ? 'Expected RVI Post-Treatment' : 'Expected ELTV Post-Treatment'}</p>\n                  <InfoPopover\n                    title={isPerformanceMode ? 'RVI PostTreatment' : 'ELTV PostTreatment'}\n                    content={\n                      <>\n                        {isPerformanceMode ? (\n                          <>\n                            <p>Expected <strong>RVI</strong> category after applying the selected treatment.</p>\n                            <p>Uses the treatments predicted churn reduction to update retention and rerank value into categories.</p>\n                          </>\n                        ) : (\n                          <>\n                            <p>Projected <strong>ELTV</strong> after treatment using the updated survival curve and discounting.</p>\n                            <p>Note: display does not subtract treatment cost; ROI reflects cost separately.</p>\n                          </>\n                        )}\n                      </>\n                    }\n                  >\n                    <Info className=\"w-3.5 h-3.5 text-purple-500 cursor-pointer\" />\n                  </InfoPopover>\n                </div>\n                <p className={cn(\n                  \"text-lg font-bold\",\n                  isPerformanceMode\n                    ? getELTVCategoryClass(treatment.projected_post_eltv || 0)\n                    : \"text-purple-800 dark:text-purple-200\"\n                )} title={`Raw value: ${treatment.projected_post_eltv}, Treatment ID: ${treatment.id}`}>\n                  {isPerformanceMode\n                    ? formatELTVByMode(treatment.projected_post_eltv || 0, 'quality')\n                    : formatELTVByMode(treatment.projected_post_eltv || 0, 'quantification')}\n                </p>\n              </div>\n              <TrendingUp className=\"w-5 h-5 text-purple-500 flex-shrink-0\" />\n            </div>\n          </div>\n\n          {/* Close content wrapper */}\n        </div>\n\n        {/* Action Button */}\n        <button\n          className={`mt-auto w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2 ${isLoading\n            ? 'bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-wait'\n            : isSelected\n              ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30'\n              : 'bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 hover:from-blue-50 hover:to-purple-50 dark:hover:from-blue-900/30 dark:hover:to-purple-900/30 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-300 dark:border-gray-600'\n            }`}\n          onClick={(e) => {\n            e.stopPropagation();\n            if (!isLoading) {\n              onSelect(treatment);\n            }\n          }}\n          disabled={isLoading}\n        >\n          {isLoading ? (\n            <>\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n              <span className=\"text-sm sm:text-base leading-tight text-center\">Applying...</span>\n            </>\n          ) : isSelected ? (\n            <>\n              <div className=\"w-4 h-4 rounded-full bg-white/20 flex items-center justify-center\">\n                <div className=\"w-2 h-2 rounded-full bg-white\"></div>\n              </div>\n              <span className=\"text-sm sm:text-base leading-tight text-center\">Applied</span>\n            </>\n          ) : (\n            <>\n              <TrendingUp className=\"w-4 h-4\" />\n              <span className=\"text-sm sm:text-base leading-tight text-center\">Apply Treatment</span>\n            </>\n          )}\n        </button>\n      </div>\n    </motion.div>\n  );\n});\n\n// function ChartSkeleton() {\n//   return (\n//     <div className=\"space-y-4 p-4\">\n//       <div className=\"flex justify-between items-center\">\n//         <SkeletonLoader className=\"h-6 w-48\" />\n//         <SkeletonLoader className=\"h-6 w-6 rounded-full\" />\n//       </div>\n//       <SkeletonLoader className=\"h-[300px] w-full\" />\n//        <div className=\"flex justify-center gap-6 pt-2\">\n//            <SkeletonLoader className=\"h-4 w-24\" />\n//            <SkeletonLoader className=\"h-4 w-24\" />\n//        </div>\n//     </div>\n//   );\n// }\n\n// Memoized components\n// const MemoizedRiskIndicator = memo(RiskIndicator); // Unused\n// Removed unused memos\n// const MemoizedEmployeeCard = memo(EmployeeCardSkeleton);\n// const MemoizedTreatmentCard = memo(TreatmentCardSkeleton);\n// const MemoizedChartSkeleton = memo(ChartSkeleton); // Unused in new tab structure\n\n// Constants\nconst MAX_SCENARIOS = 5;\nconst SCENARIO_COLORS = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899'];\n\nconst clonePlaygroundEmployeeData = (data: PlaygroundEmployeeData | null): PlaygroundEmployeeData | null => {\n  if (!data) return null;\n  try {\n    return structuredClone(data);\n  } catch (_error) {\n    return JSON.parse(JSON.stringify(data));\n  }\n};\n\nconst generateScenarioId = (counter: number): string => {\n  const suffix = `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 8)}`;\n  return `scenario-${counter}-${suffix}`;\n};\n\n// Removed createSearchIndex - using simple includes for filtering\n// Removed mockTreatments\n\n// -------------------------------------\n// Tab Types and Interfaces\n// -------------------------------------\ntype PlaygroundTab = 'scenario' | 'mass-treatment' | 'treatment-tracking';\n\ninterface ScenarioData {\n  id: string;\n  name: string;\n  color: string;\n  employeeId: string;\n  treatmentId: number | null;\n  data: PlaygroundEmployeeData | null;\n  treatmentResult: ApplyTreatmentResult | null;\n}\n\ninterface MassTreatmentCandidate {\n  employee: Employee;\n  playgroundData: PlaygroundEmployeeData;\n  suggestedTreatments: TreatmentSuggestion[];\n  topTreatment: TreatmentSuggestion | null;\n  potentialELTVGain: number;\n  potentialChurnReduction?: number;\n  projectedPostRviCategory?: string | null;\n  costPercentage?: number;\n  employeeSalaryReference?: number;\n  riskLevel: string;\n  selectionCriteria?: string[];\n  treatmentRationale?: string[];\n  // Scoring properties for enhanced insights\n  criticalityScore?: number;\n  efficiencyScore?: number;\n  priorityScore?: number;\n  // Runtime status fields for UI/processing\n  lastResult?: ApplyTreatmentResult | null;\n  isApplying?: boolean;\n  lastError?: string | null;\n}\n\n// -------------------------------------\n// Main Component\n// -------------------------------------\nexport function Playground() {\n  const { toast } = useToast();\n  const { reportError } = useErrorReporting();\n  const { activeProject } = useProject();\n  const globalCache = useGlobalDataCache();\n  const trainingStatus = globalCache.trainingStatus;\n  const hasReasoningData = useMemo(\n    () =>\n      (globalCache.playgroundEmployees || []).some(\n        emp => emp?.hasReasoningData || typeof emp?.reasoningChurnRisk === 'number'\n      ),\n    [globalCache.playgroundEmployees]\n  );\n  const isModelReady = trainingStatus?.status === 'complete' || hasReasoningData;\n  const location = useLocation();\n  const isPerformanceMode = (typeof window !== 'undefined') && (localStorage.getItem('settings.dataMode') === 'performance');\n\n  // Use dynamic risk thresholds\n  const { getRiskLevel } = useDynamicRiskRanges();\n\n  // Tab management\n  const [activeTab, setActiveTab] = useState<PlaygroundTab>('scenario');\n  const [hasDBConnection, setHasDBConnection] = useState(false);\n\n  // Check project data presence in local SQLite (Excel uploads populate this DB)\n  useEffect(() => {\n    const checkProjectData = async () => {\n      try {\n        if (!activeProject) return;\n        const employees = await employeeService.getEmployees(activeProject.name);\n        setHasDBConnection(employees && employees.length > 0);\n      } catch (_error) {\n        setHasDBConnection(false);\n      }\n    };\n\n    checkProjectData();\n    const interval = setInterval(checkProjectData, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Scenario comparison state\n  const [scenarios, setScenarios] = useState<ScenarioData[]>([]);\n  const [nextScenarioId, setNextScenarioId] = useState(1);\n\n  // Mass treatment state\n  const [massTreatmentCandidates, setMassTreatmentCandidates] = useState<MassTreatmentCandidate[]>([]);\n  const [isLoadingMassTreatment, setIsLoadingMassTreatment] = useState(false);\n  const [massTreatmentFilters, setMassTreatmentFilters] = useState({\n    riskLevel: '',\n    department: '',\n    minELTVGain: 0\n  });\n  const [selectedCandidates, setSelectedCandidates] = useState<Set<string>>(new Set());\n  const [isApplyingBulkTreatment, setIsApplyingBulkTreatment] = useState(false);\n  const [bulkProgress, setBulkProgress] = useState<{\n    completed: number;\n    total: number;\n    currentEmployee?: string;\n    successful?: number;\n    failed?: number;\n  }>({ completed: 0, total: 0, successful: 0, failed: 0 });\n  const [bulkOperationCancelled, setBulkOperationCancelled] = useState(false);\n  const bulkOperationCancelRef = useRef(false);\n\n  // Declare selectedEmployee first before using it in hooks\n  const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\n\n  const updateCandidateState = useCallback((hrCode: string, updater: (candidate: MassTreatmentCandidate) => MassTreatmentCandidate) => {\n    setMassTreatmentCandidates(prev => prev.map(candidate =>\n      candidate.employee.hr_code === hrCode ? updater(candidate) : candidate\n    ));\n  }, [setMassTreatmentCandidates]);\n\n  const applyTreatmentToCandidate = useCallback(async (\n    candidate: MassTreatmentCandidate,\n    options?: { treatment?: TreatmentSuggestion | null; silent?: boolean }\n  ): Promise<ApplyTreatmentResult | null> => {\n    const treatment = options?.treatment ?? candidate.topTreatment;\n    const silent = options?.silent ?? false;\n    const employeeName = candidate.employee.full_name || candidate.employee.name || candidate.employee.hr_code;\n\n    if (!treatment) {\n      if (!silent) {\n        toast({\n          title: 'No Treatment Available',\n          description: 'Select a treatment option before applying.',\n          variant: 'destructive',\n        });\n      }\n      return null;\n    }\n\n    // API is always available\n\n    updateCandidateState(candidate.employee.hr_code, current => ({\n      ...current,\n      isApplying: true,\n      lastError: null,\n    }));\n\n    try {\n      // Use API for simulation\n      const response = await api.post('/playground/simulate', {\n        employee_id: candidate.employee.hr_code,\n        treatment_id: treatment.id\n      });\n      const result = response.data;\n\n      if (!result) {\n        throw new Error('No response returned from treatment service.');\n      }\n\n      updateCandidateState(candidate.employee.hr_code, current => {\n        const updatedPlayground = current.playgroundData ? {\n          ...current.playgroundData,\n          current_churn_probability: result.post_churn_probability ?? current.playgroundData.current_churn_probability,\n          current_eltv: result.eltv_post_treatment ?? current.playgroundData.current_eltv,\n          current_survival_probabilities: result.new_survival_probabilities ?? current.playgroundData.current_survival_probabilities,\n        } : current.playgroundData;\n\n        const churnReduction = (result.pre_churn_probability != null && result.post_churn_probability != null)\n          ? Math.max(0, result.pre_churn_probability - result.post_churn_probability)\n          : current.potentialChurnReduction ?? 0;\n        const projectedRviCategory = formatELTVByMode(result.eltv_post_treatment ?? updatedPlayground?.current_eltv ?? 0, 'quality');\n        const salaryRef = current.employeeSalaryReference || current.employee.salary || updatedPlayground?.current_features?.employee_cost || 0;\n        const updatedCostPercentage = calculateCostPercentage(\n          result.treatment_cost ?? treatment.cost ?? 0,\n          salaryRef\n        );\n\n        return {\n          ...current,\n          isApplying: false,\n          lastResult: result,\n          lastError: null,\n          topTreatment: treatment,\n          potentialELTVGain: result.treatment_effect_eltv ?? current.potentialELTVGain,\n          potentialChurnReduction: churnReduction,\n          projectedPostRviCategory: projectedRviCategory,\n          costPercentage: Number.isFinite(updatedCostPercentage) && updatedCostPercentage > 0 ? updatedCostPercentage : current.costPercentage,\n          employeeSalaryReference: salaryRef || current.employeeSalaryReference,\n          playgroundData: updatedPlayground,\n        };\n      });\n\n      setSelectedCandidates(prev => {\n        if (!prev.has(candidate.employee.hr_code)) return prev;\n        const next = new Set(prev);\n        next.delete(candidate.employee.hr_code);\n        return next;\n      });\n\n      if (!silent) {\n        if (isPerformanceMode) {\n          const churnDrop = (result.pre_churn_probability != null && result.post_churn_probability != null)\n            ? Math.max(0, result.pre_churn_probability - result.post_churn_probability)\n            : null;\n          const churnText = churnDrop !== null ? `${(churnDrop * 100).toFixed(1)}% churn drop` : 'Churn drop recorded';\n          const projectedRvi = formatELTVByMode(result.eltv_post_treatment ?? candidate.playgroundData.current_eltv ?? 0, 'quality');\n          toast({\n            title: `Treatment applied to ${employeeName}`,\n            description: `${churnText}  RVI ${projectedRvi}`,\n          });\n        } else {\n          const gain = result.treatment_effect_eltv ?? 0;\n          const roiPercent = (result.roi ?? 0) * 100;\n          toast({\n            title: `Treatment applied to ${employeeName}`,\n            description: `${formatCurrency(gain)} ELTV gain  ROI ${roiPercent.toFixed(1)}%`,\n          });\n        }\n      }\n\n      return result;\n    } catch (error: any) {\n      const message = error?.message || 'Failed to apply treatment.';\n\n      updateCandidateState(candidate.employee.hr_code, current => ({\n        ...current,\n        isApplying: false,\n        lastError: message,\n      }));\n\n      if (!silent) {\n        toast({\n          title: 'Error applying treatment',\n          description: message,\n          variant: 'destructive',\n        });\n      }\n\n      throw error;\n    }\n  }, [toast, updateCandidateState, setSelectedCandidates, isPerformanceMode]);\n\n  // Enhanced bulk treatment application leveraging shared helper\n  const applyBulkTreatment = useCallback(async () => {\n    const selectedCandidatesList = massTreatmentCandidates.filter(candidate =>\n      selectedCandidates.has(candidate.employee.hr_code)\n    );\n\n    if (selectedCandidatesList.length === 0) {\n      toast({\n        title: 'No Selection',\n        description: 'Please select employees to apply treatments to.',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    // Service availability check removed - using backend API\n\n    setIsApplyingBulkTreatment(true);\n    setBulkOperationCancelled(false);\n    bulkOperationCancelRef.current = false;\n    setBulkProgress({ completed: 0, total: selectedCandidatesList.length, successful: 0, failed: 0 });\n\n    let completed = 0;\n    let successful = 0;\n    const errors: Array<{ employee: string; error: string }> = [];\n\n    for (const candidate of selectedCandidatesList) {\n      if (bulkOperationCancelRef.current) {\n        setBulkOperationCancelled(true);\n        break;\n      }\n\n      const employeeName = candidate.employee.full_name || candidate.employee.name || candidate.employee.hr_code;\n\n      setBulkProgress({\n        completed,\n        total: selectedCandidatesList.length,\n        currentEmployee: ` ${employeeName}`,\n        successful,\n        failed: errors.length,\n      });\n\n      try {\n        await applyTreatmentToCandidate(candidate, { silent: true });\n        completed += 1;\n        successful += 1;\n        setBulkProgress({\n          completed,\n          total: selectedCandidatesList.length,\n          currentEmployee: ` ${employeeName}`,\n          successful,\n          failed: errors.length,\n        });\n      } catch (error: any) {\n        completed += 1;\n        const message = error?.message || 'Unknown error occurred';\n        errors.push({ employee: employeeName, error: message });\n        reportError(error, `Bulk Treatment - ${employeeName}`, {\n          employeeHrCode: candidate.employee.hr_code,\n          treatmentId: candidate.topTreatment?.id,\n        });\n        setBulkProgress({\n          completed,\n          total: selectedCandidatesList.length,\n          currentEmployee: ` ${employeeName}`,\n          successful,\n          failed: errors.length,\n        });\n      }\n\n      if (bulkOperationCancelRef.current) {\n        setBulkOperationCancelled(true);\n        break;\n      }\n    }\n\n    setIsApplyingBulkTreatment(false);\n    setBulkProgress(prev => ({ ...prev, currentEmployee: undefined }));\n\n    if (bulkOperationCancelRef.current) {\n      toast({\n        title: 'Bulk treatment cancelled',\n        description: `Completed ${successful} applications before cancellation.`,\n      });\n      return;\n    }\n\n    if (errors.length > 0) {\n      const failedPreview = errors.slice(0, 3).map(e => e.employee).join(', ');\n      toast({\n        title: 'Bulk treatment completed with issues',\n        description: `${successful} succeeded, ${errors.length} failed.${failedPreview ? ` Issues: ${failedPreview}${errors.length > 3 ? '' : ''}` : ''}`,\n        variant: 'destructive',\n        duration: 8000,\n      });\n    } else {\n      toast({\n        title: 'Bulk treatment applied',\n        description: `Successfully applied treatments to ${successful} employees.`,\n      });\n    }\n  }, [applyTreatmentToCandidate, massTreatmentCandidates, reportError, selectedCandidates, toast]);\n\n  // Function to cancel bulk treatment operation\n  const cancelBulkTreatment = useCallback(() => {\n    bulkOperationCancelRef.current = true;\n    setBulkOperationCancelled(true);\n    toast({\n      title: \"Cancelling Operation\",\n      description: \"Bulk treatment will stop after the current employee.\",\n      variant: \"default\",\n    });\n  }, [toast]);\n\n  // Add reasoning hooks for enhanced data\n  // const { fetchBatchReasoning, reasoningData, isLoading: isLoadingReasoning } = useBatchReasoning();\n  // const { reasoning: selectedEmployeeReasoning, isLoading: isLoadingSelectedReasoning } = useEmployeeReasoning(\n  //   selectedEmployee?.hr_code || null\n  // );\n\n  // Ref to track if loading is in progress\n  const isLoadingBaseEmployeesRef = useRef(false);\n\n  // State for base employee list\n  // const [employees, setEmployees] = useState<Employee[]>([]); // Will use globalCache.playgroundEmployees directly more\n\n  // State for selected employee and detailed data\n  const [selectedEmployeeData, setSelectedEmployeeData] = useState<PlaygroundEmployeeData | null>(null);\n\n  // State for treatments\n  const [selectedTreatment, setSelectedTreatment] = useState<TreatmentSuggestion | null>(null);\n  const [treatmentSuggestions, setTreatmentSuggestions] = useState<TreatmentSuggestion[]>([]);\n\n  // ELTV display mode\n  // removed eltvMode toggle; display is governed by Settings data mode\n\n  // State for simulation/application result\n  const [applyTreatmentResult, setApplyTreatmentResult] = useState<ApplyTreatmentResult | null>(null);\n\n  // Loading states\n  const [isLoadingEmployees, setIsLoadingEmployees] = useState(true); // For initial load from cache\n  const [isLoadingPlaygroundData, setIsLoadingPlaygroundData] = useState(false); // For selected employee's detailed data\n  const [isApplyingTreatment, setIsApplyingTreatment] = useState(false);\n\n  // UI State for Sidebar\n  const [error, setError] = useState<string | null>(null); // For data loading errors\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedDepartment, setSelectedDepartment] = useState<string>('');\n  const [selectedRiskLevel, setSelectedRiskLevel] = useState('');\n  const [selectedPosition, setSelectedPosition] = useState('');\n  const [sortBy, setSortBy] = useState<string>('risk'); // Made stateful for UI control\n  const [isSorting, setIsSorting] = useState(false); // Added\n\n  const [budget, setBudget] = useState<number | null>(null); // State for budget input\n\n  // Function to apply selected treatment\n  const applyTreatment = useCallback(async (treatment: TreatmentSuggestion) => {\n    if (!selectedEmployee) {\n      return;\n    }\n\n    const baselineSnapshot = clonePlaygroundEmployeeData(selectedEmployeeData);\n\n    setIsApplyingTreatment(true);\n    setSelectedTreatment(treatment);\n\n    try {\n      // Use API for simulation\n      const response = await api.post('/playground/simulate', {\n        employee_id: selectedEmployee.hr_code,\n        treatment_id: treatment.id\n      });\n      const result = response.data;\n\n      setApplyTreatmentResult(result);\n      if (result) {\n        setSelectedEmployeeData(prev => prev ? {\n          ...prev,\n          current_churn_probability: result.post_churn_probability ?? prev.current_churn_probability,\n          current_eltv: result.eltv_post_treatment ?? prev.current_eltv,\n          current_survival_probabilities: result.new_survival_probabilities ?? prev.current_survival_probabilities,\n        } : prev);\n\n        setSelectedEmployee(prev => prev ? {\n          ...prev,\n          churnProbability: result.post_churn_probability ?? prev.churnProbability,\n          currentELTV: result.eltv_post_treatment ?? prev.currentELTV,\n        } : prev);\n\n        if (baselineSnapshot) {\n          let scenarioAdded = false;\n          let scenarioLimitReached = false;\n\n          setScenarios(prev => {\n            const existingIndex = prev.findIndex(scenario =>\n              scenario.employeeId === selectedEmployee.hr_code && scenario.treatmentId === treatment.id\n            );\n\n            if (existingIndex !== -1) {\n              const updated = [...prev];\n              updated[existingIndex] = {\n                ...updated[existingIndex],\n                data: baselineSnapshot,\n                treatmentId: treatment.id,\n                treatmentResult: result,\n              };\n              return updated;\n            }\n\n            if (prev.length >= MAX_SCENARIOS) {\n              scenarioLimitReached = true;\n              return prev;\n            }\n\n            const baseName = treatment.name?.trim() || `Scenario ${nextScenarioId}`;\n            const duplicateCount = prev.filter(s => s.name === baseName || s.name.startsWith(`${baseName} (`)).length;\n            const scenarioName = duplicateCount === 0 ? baseName : `${baseName} (${duplicateCount + 1})`;\n\n            const newScenario: ScenarioData = {\n              id: generateScenarioId(nextScenarioId),\n              name: scenarioName,\n              color: SCENARIO_COLORS[(nextScenarioId - 1) % SCENARIO_COLORS.length],\n              employeeId: selectedEmployee.hr_code,\n              treatmentId: treatment.id,\n              data: baselineSnapshot,\n              treatmentResult: result,\n            };\n\n            scenarioAdded = true;\n            return [...prev, newScenario];\n          });\n\n          if (scenarioAdded) {\n            setNextScenarioId(prev => prev + 1);\n          } else if (scenarioLimitReached) {\n            toast({\n              title: 'Scenario limit reached',\n              description: `You can only keep up to ${MAX_SCENARIOS} scenarios at a time. Remove one before adding another.`,\n              variant: 'destructive',\n            });\n          }\n        }\n      }\n\n      toast({\n        title: \"Treatment Applied\",\n        description: `Successfully applied \"${treatment.name}\" to ${selectedEmployee.name}`,\n      });\n\n    } catch (error: any) {\n      setApplyTreatmentResult(null);\n\n      toast({\n        title: \"Error\",\n        description: `Failed to apply treatment: ${error.message}`,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsApplyingTreatment(false);\n    }\n  }, [selectedEmployee, selectedEmployeeData, toast, setScenarios, nextScenarioId, setNextScenarioId]);\n\n  // --- Sort Options (Consistent with AIAssistant) ---\n  const sortOptions = [\n    { id: 'risk', label: 'Risk Level' },\n    { id: 'name', label: 'Name' },\n    { id: 'department', label: 'Department' },\n    { id: 'eltv', label: 'Current ELTV' }\n  ];\n\n  // --- Handle Sort Change (Consistent with AIAssistant) ---\n  const handleSortChange = useCallback((value: string) => {\n    // Assuming globalCache.playgroundEmployees might be large\n    if (globalCache.playgroundEmployees && globalCache.playgroundEmployees.length > 500) {\n      setIsSorting(true);\n      setTimeout(() => {\n        setSortBy(value);\n        setIsSorting(false);\n      }, 0);\n    } else {\n      setSortBy(value);\n    }\n  }, [globalCache.playgroundEmployees]);\n\n\n  // Debounced search term for performance\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchTerm(searchTerm);\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n\n  // Base filtered data (before dropdown filters) for cascade filtering\n  const baseFilteredEmployees = useMemo(() => {\n    const employees = globalCache.playgroundEmployees;\n    if (!employees?.length) return [];\n\n    // Filter for active employees first\n    let filtered = employees.filter(emp => emp.status === 'Active');\n\n    // Apply search filter only\n    if (debouncedSearchTerm.trim()) {\n      const searchTermLower = debouncedSearchTerm.toLowerCase().trim();\n      filtered = filtered.filter(emp =>\n        emp.name.toLowerCase().includes(searchTermLower) ||\n        (emp.position || '').toLowerCase().includes(searchTermLower) ||\n        (emp.department || '').toLowerCase().includes(searchTermLower)\n      );\n    }\n\n    return filtered;\n  }, [globalCache.playgroundEmployees, debouncedSearchTerm]);\n\n  // Cascade filter options based on current selections\n  const availableDepartments = useMemo(() => {\n    let dataForDepts = baseFilteredEmployees;\n\n    // Apply other active filters except department\n    if (selectedPosition) {\n      dataForDepts = dataForDepts.filter(emp => (emp.position || 'N/A') === selectedPosition);\n    }\n    if (selectedRiskLevel) {\n      dataForDepts = dataForDepts.filter(emp => {\n        const probability = emp.churnProbability || 0;\n        const calculatedRiskLevel = getRiskLevel(probability);\n        return calculatedRiskLevel === selectedRiskLevel;\n      });\n    }\n\n    return Array.from(new Set(dataForDepts.map(emp => emp.department || 'N/A'))).sort();\n  }, [baseFilteredEmployees, selectedPosition, selectedRiskLevel, getRiskLevel]);\n\n  const availablePositions = useMemo(() => {\n    let dataForPositions = baseFilteredEmployees;\n\n    // Apply other active filters except position\n    if (selectedDepartment) {\n      dataForPositions = dataForPositions.filter(emp => (emp.department || 'N/A') === selectedDepartment);\n    }\n    if (selectedRiskLevel) {\n      dataForPositions = dataForPositions.filter(emp => {\n        const probability = emp.churnProbability || 0;\n        const calculatedRiskLevel = getRiskLevel(probability);\n        return calculatedRiskLevel === selectedRiskLevel;\n      });\n    }\n\n    return Array.from(new Set(dataForPositions.map(emp => emp.position || 'N/A'))).sort();\n  }, [baseFilteredEmployees, selectedDepartment, selectedRiskLevel, getRiskLevel]);\n\n  const availableRiskLevels = useMemo(() => {\n    let dataForRisk = baseFilteredEmployees;\n\n    // Apply other active filters except risk level\n    if (selectedDepartment) {\n      dataForRisk = dataForRisk.filter(emp => (emp.department || 'N/A') === selectedDepartment);\n    }\n    if (selectedPosition) {\n      dataForRisk = dataForRisk.filter(emp => (emp.position || 'N/A') === selectedPosition);\n    }\n\n    const riskLevels = dataForRisk.map(emp => {\n      const probability = emp.churnProbability || 0;\n      return getRiskLevel(probability);\n    });\n\n    return Array.from(new Set(riskLevels)).sort();\n  }, [baseFilteredEmployees, selectedDepartment, selectedPosition, getRiskLevel]);\n\n  // Final filtered data with all filters applied\n  const filteredEmployeesMemo = useMemo(() => {\n    let filtered = baseFilteredEmployees;\n\n    // Apply dropdown filters\n    if (selectedDepartment) {\n      filtered = filtered.filter(emp => (emp.department || 'N/A') === selectedDepartment);\n    }\n\n    if (selectedPosition) {\n      filtered = filtered.filter(emp => (emp.position || 'N/A') === selectedPosition);\n    }\n\n    if (selectedRiskLevel) {\n      filtered = filtered.filter(emp => {\n        const probability = emp.churnProbability || 0;\n        const calculatedRiskLevel = getRiskLevel(probability);\n        return calculatedRiskLevel === selectedRiskLevel;\n      });\n    }\n\n    return filtered;\n  }, [baseFilteredEmployees, selectedDepartment, selectedPosition, selectedRiskLevel, getRiskLevel]);\n\n  // Optimized sorting matching AI Assistant approach\n  const sortedEmployeesMemo = useMemo(() => {\n    if (!filteredEmployeesMemo.length) return [];\n\n    const sorted = [...filteredEmployeesMemo];\n\n    if (sortBy === 'risk') {\n      sorted.sort((a, b) => (b.churnProbability ?? 0) - (a.churnProbability ?? 0));\n    } else if (sortBy === 'name') {\n      sorted.sort((a, b) => a.name.localeCompare(b.name));\n    } else if (sortBy === 'department') {\n      sorted.sort((a, b) => (a.department || '').localeCompare(b.department || ''));\n    } else if (sortBy === 'eltv') {\n      sorted.sort((a, b) => (b.currentELTV ?? (b.churnProbability ?? 0)) - (a.currentELTV ?? (a.churnProbability ?? 0)));\n    }\n\n    return sorted;\n  }, [filteredEmployeesMemo, sortBy]);\n\n  // Debug logging for employee data\n  // Removed debug logging for production\n\n  // Stable employee selection - avoid dependency on selectedEmployee object\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState<number | null>(null);\n\n  // --- Employee Selection Logic --- (Moved earlier to be available for list renderers)\n  const handleEmployeeSelect = useCallback(async (employeeId: number, treatmentIdToSelect?: number) => {\n    if (isLoadingPlaygroundData || selectedEmployeeId === employeeId) return; // Prevent double-loading\n\n    // Find employee by ID from the current dataset\n    const employee = globalCache.playgroundEmployees?.find(emp => emp.id === employeeId);\n    if (!employee) return;\n\n    setIsLoadingPlaygroundData(true);\n    setError(null); // setError was previously removed, but error is used in JSX\n\n    setSelectedEmployeeId(employeeId);\n    setSelectedEmployee(employee);\n    setSelectedEmployeeData(null);\n\n    // API is always available\n\n    const maxRetries = 3;\n    let lastError = null;\n\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        const [playgroundData, suggestionsResult] = await Promise.all([\n          api.get(`/playground/data/${employee.hr_code}`).then(r => r.data),\n          api.get(`/playground/treatments/${employee.hr_code}`).then(r => r.data)\n        ]);\n\n        if (!playgroundData || !suggestionsResult) {\n          const errorMsg = \"Incomplete data received from backend.\";\n\n          if (attempt < maxRetries) {\n            await new Promise(resolve => setTimeout(resolve, 500 * attempt));\n            continue;\n          }\n          throw new Error(errorMsg);\n        }\n\n        setSelectedEmployeeData(playgroundData);\n        const suggestions: TreatmentSuggestion[] = suggestionsResult || [];\n        setTreatmentSuggestions(suggestions);\n\n        // Switch to scenario tab to show employee details\n        setActiveTab('scenario');\n\n        if (treatmentIdToSelect && suggestions.length > 0) {\n          const treatmentToSelect = suggestions.find(t => t.id === treatmentIdToSelect);\n          if (treatmentToSelect) {\n            await applyTreatment(treatmentToSelect);\n          }\n        }\n\n        toast({\n          title: \"Data loaded successfully\",\n          description: `Loaded risk analysis data for ${employee.name}.`,\n          variant: \"default\"\n        });\n\n        setIsLoadingPlaygroundData(false);\n        return;\n      } catch (err: any) {\n        lastError = err;\n\n        if (attempt < maxRetries) {\n          await new Promise(resolve => setTimeout(resolve, 600 * attempt));\n          continue;\n        }\n      }\n    }\n    setError(`Failed to load data for ${employee.name}: ${lastError?.message || 'Unknown error'}`);\n\n    toast({\n      title: \"Error loading data\",\n      description: `Failed to load data for ${employee.name}. Please try again.`,\n      variant: \"destructive\"\n    });\n\n    setTimeout(() => {\n      setSelectedEmployee(null);\n      setSelectedEmployeeId(null);\n    }, 2000);\n    setIsLoadingPlaygroundData(false);\n  }, [isLoadingPlaygroundData, selectedEmployeeId, globalCache.playgroundEmployees, toast, applyTreatment]);\n\n  // --- Employee List Rendering (Now defined after handleEmployeeSelect) ---\n  const ROW_HEIGHT = 95;\n\n  // Memoized employee row component matching AI Assistant\n  const EmployeeRow = memo(({\n    employee,\n    isSelected,\n    onClick,\n    style\n  }: {\n    employee: Employee;\n    isSelected: boolean;\n    onClick: () => void;\n    style?: React.CSSProperties;\n  }) => {\n    const riskScore = employee.churnProbability ?? 0;\n\n    return (\n      <motion.button\n        onClick={onClick}\n        style={style}\n        className={`\n          w-full p-3 rounded-lg text-left\n          transition-all duration-300\n          ${isSelected\n            ? 'bg-gradient-to-r from-emerald-50 to-transparent dark:from-emerald-900/30 dark:to-transparent border-emerald-200 dark:border-emerald-800'\n            : 'hover:bg-gray-50 dark:hover:bg-gray-800 border-transparent'\n          }\n          border relative group overflow-hidden\n          dark:bg-gray-800 dark:text-gray-100\n        `}\n        whileHover={{ scale: 1.02 }}\n        whileTap={{ scale: 0.98 }}\n        data-employee-id={employee.id}\n        data-component=\"employee-row\"\n      >\n        <div className=\"absolute inset-0 bg-gradient-to-r from-emerald-500/5 via-transparent to-transparent dark:from-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\n        <div className=\"relative z-10\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1 min-w-0\">\n              <h3 className=\"font-medium text-gray-900 dark:text-gray-100 truncate\">\n                {employee.name}\n              </h3>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 truncate\">\n                {employee.position}\n              </p>\n              <p className=\"text-xs text-gray-400 dark:text-gray-500 truncate\">\n                {employee.department}\n              </p>\n            </div>\n            <RiskIndicator riskScore={riskScore} size=\"sm\" showIcon={true} />\n          </div>\n        </div>\n      </motion.button>\n    );\n  });\n\n  const EmployeeRowRenderer = useCallback(({ index, style }: { index: number; style: React.CSSProperties }) => {\n    const employee = sortedEmployeesMemo[index];\n    if (!employee) return null;\n    return (\n      <div style={style}>\n        <EmployeeRow\n          key={employee.id}\n          employee={employee}\n          isSelected={selectedEmployeeId === employee.id}\n          onClick={() => handleEmployeeSelect(employee.id)}\n        />\n      </div>\n    );\n  }, [sortedEmployeesMemo, selectedEmployeeId, handleEmployeeSelect]);\n\n  const MemoizedEmployeeList = useMemo(() => (\n    <AutoSizer>\n      {({ height, width }) => (\n        <List\n          height={height}\n          width={width}\n          itemCount={sortedEmployeesMemo.length}\n          itemSize={ROW_HEIGHT}\n          overscanCount={5}\n          className=\"bg-transparent dark:bg-transparent\"\n        >\n          {EmployeeRowRenderer}\n        </List>\n      )}\n    </AutoSizer>\n  ), [sortedEmployeesMemo, selectedEmployeeId, EmployeeRowRenderer]);\n  // --- End Employee List Rendering ---\n\n  // --- Load Base Employee List ---\n  useEffect(() => {\n    if (!activeProject) {\n      setIsLoadingEmployees(false);\n      // setEmployees([]); // Removed, will derive from globalCache\n      setError(null);\n      return;\n    }\n\n    const loadBaseEmployeesFromCache = async () => {\n      if (isLoadingBaseEmployeesRef.current) {\n        return;\n      }\n      isLoadingBaseEmployeesRef.current = true;\n      setIsLoadingEmployees(true);\n      setError(null);\n      try {\n        // Use fetchPlaygroundData if it's specifically for playground, or fetchHomeData if it's the general one\n        // Assuming fetchHomeData populates playgroundEmployees or a similar field\n        if (!globalCache.playgroundEmployees || globalCache.playgroundEmployees.length === 0) {\n          await globalCache.fetchHomeData(activeProject?.id || null);\n        } else {\n          // Data already loaded\n        }\n      } catch (err) {\n        setError('Failed to load employee list. Please try again.');\n      } finally {\n        setIsLoadingEmployees(false);\n        isLoadingBaseEmployeesRef.current = false;\n      }\n    };\n\n    loadBaseEmployeesFromCache();\n  }, [activeProject, globalCache.fetchHomeData, globalCache.playgroundEmployees]); // Depend on playgroundEmployees from cache\n\n  useEffect(() => {\n    const state = location.state as { hrCode?: string; selectedTreatmentId?: number };\n    if (state?.hrCode && globalCache.playgroundEmployees && globalCache.playgroundEmployees.length > 0) {\n      const employeeToSelect = globalCache.playgroundEmployees.find(e => e.hr_code === state.hrCode);\n      if (employeeToSelect && employeeToSelect.id !== selectedEmployeeId) {\n        handleEmployeeSelect(employeeToSelect.id, state.selectedTreatmentId);\n      }\n    }\n  }, [location.state, globalCache.playgroundEmployees, handleEmployeeSelect, selectedEmployeeId]);\n\n  // No longer need to set local 'employees' state directly from globalCache.playgroundEmployees here,\n  // as 'filteredEmployees' and 'sortedEmployees' will derive directly from globalCache.playgroundEmployees.\n  // The filtering for 'Active' status is now within 'filteredEmployees' useMemo.\n\n\n\n  // --- Chart Data Transform ---\n  const transformSurvivalProbabilities = useCallback(() => {\n    if (!selectedEmployeeData) return [];\n\n    const months = Array.from({ length: 12 }, (_, i) => i + 1);\n    const baseSurvival = selectedEmployeeData.current_survival_probabilities;\n\n    // Use survival probabilities from treatment results\n    let modifiedSurvival = baseSurvival;\n    if (applyTreatmentResult?.new_survival_probabilities) {\n      modifiedSurvival = applyTreatmentResult.new_survival_probabilities;\n    }\n\n    return months.map(month => {\n      const monthKey = `month_${month}`;\n      const baselineProb = (baseSurvival?.[monthKey] ?? 0) * 100;\n      const newProb = (modifiedSurvival?.[monthKey] ?? baselineProb / 100) * 100;\n\n      return {\n        month,\n        \"Without Treatment\": baselineProb,\n        \"With Treatment\": newProb,\n      };\n    });\n  }, [selectedEmployeeData, applyTreatmentResult]);\n\n  // Memoized chart data transformation\n  const transformedChartData = useMemo(transformSurvivalProbabilities, [transformSurvivalProbabilities]);\n\n  // Chart config\n  // const chartConfig = {\n  //   colors: {\n  //     \"Without Treatment\": '#94a3b8',\n  //     \"With Treatment\": '#3b82f6',\n  //   }\n  // };\n\n  // --- UI Rendering ---\n\n  if (isLoadingEmployees) {\n    return (\n      <div className=\"h-full w-full flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"opacity-100\">\n          <Loader2 className=\"h-8 w-8 text-blue-500 animate-spin\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (!activeProject) {\n    return (\n      <div className=\"h-full flex flex-col items-center justify-center text-center p-6 bg-gray-50 dark:bg-gray-900\">\n        <FlaskConical className=\"mx-auto h-16 w-16 text-gray-400 dark:text-gray-600 mb-4\" />\n        <h2 className=\"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n          No Project Active\n        </h2>\n        <p className=\"text-gray-500 dark:text-gray-400\">\n          Please select or create a project to use the Playground.\n        </p>\n      </div>\n    );\n  }\n\n  if (!isModelReady) {\n    return <ModelTrainingRequired status={trainingStatus?.status} message={trainingStatus?.message} />;\n  }\n\n  return (\n    <div className=\"h-screen w-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden\">\n      <header className=\"flex-none bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 border-b border-gray-700/50 relative overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n          <div className=\"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] opacity-40\"></div>\n          <div className=\"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-500/50 to-transparent\"></div>\n        </div>\n        <div className=\"max-w-[1600px] mx-auto px-6 md:px-8 relative z-10\">\n          <div className=\"py-6 md:py-8\">\n            {/* Main flex container for title and badges */}\n            <div className=\"flex items-center gap-3 mb-3\">\n              <h1 className=\"text-2xl md:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200 animate-gradient\">\n                {localStorage.getItem('settings.dataMode') === 'performance' ? 'Retention Value Index (RVI) Playground' : 'ELTV Treatment Playground'}\n              </h1>\n              {/* Badges Group */}\n              <div className=\"flex items-center gap-2\">\n                {/* Atlas by ChurnVision Badge (Consistent Styling) */}\n                <span className=\"relative\">\n                  <span className=\"px-2.5 py-0.5 text-xs font-medium bg-teal-500/10 text-teal-300 rounded-full border border-teal-500/20 relative z-10 flex items-center gap-1\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-teal-400\">\n                      <path d=\"M21.2078 12.0117C21.6076 12.0053 21.9832 11.7346 21.9941 11.3333V6C21.9941 4.89543 21.101 4 20.0005 4H19.9057\" />\n                      <path d=\"M2.79222 11.9883C2.39235 11.9947 2.01681 12.2654 2.00586 12.6667V18C2.00586 19.1046 2.89903 20 3.99953 20H4.09431\" />\n                      <path d=\"M12 22C12.2106 22 12.3801 21.7531 12.3331 21.5451L11.0531 15.8311C11.0061 15.6231 10.79 15.4909 10.5742 15.5449L4.86949 17.2084C4.65367 17.2624 4.51911 17.5066 4.59327 17.7031L6.17929 21.6265C6.25346 21.823 6.49286 21.9735 6.70347 21.9275L12 20.5909L17.2965 21.9275C17.5071 21.9735 17.7465 21.823 17.8207 21.6265L19.4067 17.7031C19.4809 17.5066 19.3463 17.2624 19.1305 17.2084L13.4258 15.5449C13.21 15.4909 12.9939 15.6231 12.9469 15.8311L11.6669 21.5451C11.6199 21.7531 11.7894 22 12 22Z\" />\n                      <path d=\"M12 12L12 2M12 12L19 5M12 12L5 5\" />\n                    </svg>\n                    Atlas by ChurnVision\n                  </span>\n                  <div className=\"absolute inset-0 bg-teal-500/20 rounded-full blur-sm animate-pulse\"></div>\n                </span>\n\n                {/* Beta Badge (Consistent Styling - Green) */}\n                <span className=\"relative\">\n                  <span className=\"px-2.5 py-0.5 text-xs font-medium bg-emerald-500/10 text-emerald-300 rounded-full border border-emerald-500/20 relative z-10 flex items-center gap-1\">\n                    <span className=\"h-1.5 w-1.5 rounded-full bg-emerald-400 animate-ping absolute\"></span>\n                    <span className=\"h-1.5 w-1.5 rounded-full bg-emerald-400\"></span>\n                    Beta\n                  </span>\n                  <div className=\"absolute inset-0 bg-emerald-500/20 rounded-full blur-sm animate-pulse\"></div>\n                </span>\n              </div>\n            </div>\n            <p className=\"text-sm md:text-base text-gray-400 max-w-3xl mt-2\">\n              {localStorage.getItem('settings.dataMode') === 'performance'\n                ? 'Simulate retention scenarios. Select an employee, choose a treatment, and see the projected impact on Retention Value Index (RVI) and churn risk.'\n                : 'Simulate retention scenarios. Select an employee, choose a treatment, and see the projected impact on ELTV and churn risk.'}\n            </p>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"px-6 md:px-8 py-4\">\n        <TrainingReminderBanner />\n      </div>\n\n      <main className=\"flex-1 flex min-h-0\">\n        {/* Sidebar matching AI Assistant styling */}\n        <aside className=\"w-[340px] flex-none flex flex-col bg-white border-r border-gray-200 dark:bg-gray-900 dark:border-gray-700\">\n          <div className=\"flex-none p-4 border-b border-gray-100 dark:border-gray-800\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Team Members</h2>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              {sortedEmployeesMemo.length} employees found\n            </p>\n          </div>\n\n          <div className=\"flex-none p-4 border-b border-gray-100 dark:border-gray-800\">\n            {error && !isLoadingPlaygroundData && (\n              <div className=\"p-3 mb-3 bg-red-50 text-red-600 rounded-lg flex items-center gap-2 text-sm\">\n                <AlertTriangle className=\"w-4 h-4 flex-shrink-0\" />\n                <p>{error}</p>\n              </div>\n            )}\n\n            <div className=\"relative mb-3\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Search employees...\"\n                className=\"w-full pl-9 pr-4 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600\"\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3\">\n              <div>\n                {searchTerm.trim() ? (\n                  <>Found <span className=\"font-medium text-gray-700 dark:text-gray-200\">{sortedEmployeesMemo.length}</span> {sortedEmployeesMemo.length === 1 ? 'employee' : 'employees'}</>\n                ) : (\n                  <>{(globalCache.playgroundEmployees || []).length} total employees</>\n                )}\n              </div>\n            </div>\n\n            {/* Advanced Filters */}\n            <div className=\"space-y-2 mb-4\">\n              <select\n                value={sortBy}\n                onChange={e => handleSortChange(e.target.value)}\n                disabled={isSorting}\n                className={`w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600 ${isSorting ? 'opacity-50 cursor-wait' : ''}`}\n              >\n                {sortOptions.map(option => (\n                  <option key={option.id} value={option.id}>\n                    Sort by: {option.label} {isSorting && '(sorting...)'}\n                  </option>\n                ))}\n              </select>\n\n              <select\n                value={selectedDepartment}\n                onChange={e => setSelectedDepartment(e.target.value)}\n                className=\"w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600\"\n              >\n                <option value=\"\">All Departments ({availableDepartments.length})</option>\n                {availableDepartments.map(dept => (\n                  <option key={dept} value={dept}>\n                    {dept}\n                  </option>\n                ))}\n              </select>\n\n              <select\n                value={selectedRiskLevel}\n                onChange={e => setSelectedRiskLevel(e.target.value)}\n                className=\"w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600\"\n              >\n                <option value=\"\">All Risk Levels ({availableRiskLevels.length})</option>\n                {availableRiskLevels.map(level => (\n                  <option key={level} value={level}>\n                    {level} Risk\n                  </option>\n                ))}\n              </select>\n\n              <select\n                value={selectedPosition}\n                onChange={e => setSelectedPosition(e.target.value)}\n                className=\"w-full text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:focus:ring-emerald-600 dark:focus:border-emerald-600\"\n              >\n                <option value=\"\">All Positions ({availablePositions.length})</option>\n                {availablePositions.map(pos => (\n                  <option key={pos} value={pos}>\n                    {pos}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Quick Filter Chips */}\n            <div className=\"flex flex-wrap gap-1 mb-3\">\n              {(selectedDepartment || selectedRiskLevel || selectedPosition) && (\n                <button\n                  onClick={() => {\n                    setSelectedDepartment('');\n                    setSelectedRiskLevel('');\n                    setSelectedPosition('');\n                  }}\n                  className=\"px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 text-xs rounded-full hover:bg-red-200 dark:hover:bg-red-800/50 transition-colors\"\n                >\n                  Clear All\n                </button>\n              )}\n              {selectedDepartment && (\n                <span className=\"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 text-xs rounded-full\">\n                  Dept: {selectedDepartment}\n                </span>\n              )}\n              {selectedRiskLevel && (\n                <span className=\"px-2 py-1 bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300 text-xs rounded-full\">\n                  Risk: {selectedRiskLevel}\n                </span>\n              )}\n              {selectedPosition && (\n                <span className=\"px-2 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 text-xs rounded-full\">\n                  Pos: {selectedPosition}\n                </span>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex-1 overflow-auto p-3\">\n            {isLoadingEmployees ? (\n              <div className=\"space-y-2\">\n                {Array.from({ length: 5 }).map((_, i) => (\n                  <div key={i} className=\"p-4 rounded-lg border border-gray-100 dark:border-gray-800 animate-pulse h-[83px] bg-gray-100 dark:bg-gray-800\" />\n                ))}\n              </div>\n            ) : sortedEmployeesMemo.length === 0 ? (\n              <div className=\"text-center py-12 px-4\">\n                <Calculator className=\"h-12 w-12 text-gray-300 dark:text-gray-700 mx-auto mb-3\" />\n                <h3 className=\"text-gray-900 dark:text-gray-100 font-medium mb-1\">No employees found</h3>\n                <p className=\"text-gray-500 dark:text-gray-400 text-sm\">Try adjusting your search or filters</p>\n              </div>\n            ) : (\n              MemoizedEmployeeList\n            )}\n          </div>\n        </aside>\n\n        <div className=\"flex-1 flex flex-col min-w-0 bg-gray-100/50 dark:bg-gray-800/30\">\n          <div className=\"flex flex-col p-4 md:p-6 space-y-4 h-full\">\n            {isLoadingPlaygroundData ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400\">\n                <Loader2 className=\"w-8 h-8 animate-spin mb-3\" />\n                <p>Loading employee details...</p>\n              </div>\n            ) : error && !selectedEmployeeData ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center p-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg\">\n                <AlertTriangle className=\"w-12 h-12 text-red-500 dark:text-red-400 mb-4\" />\n                <h3 className=\"text-lg font-semibold text-red-800 dark:text-red-200 mb-2\">Error Loading Data</h3>\n                <p className=\"text-sm text-red-600 dark:text-red-300\">{error}</p>\n              </div>\n            ) : (\n              <div className=\"flex flex-col h-full space-y-4\">\n                {selectedEmployeeData ? (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 flex-shrink-0\">\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl p-3 shadow-sm relative overflow-hidden border border-gray-100 dark:border-gray-700 h-fit\">\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent opacity-50 dark:opacity-20\" />\n                      <div className=\"relative z-10\">\n                        <div className=\"flex justify-between items-start\">\n                          <div>\n                            <div className=\"flex items-center gap-1\">\n                              <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                {localStorage.getItem('settings.dataMode') === 'performance' ? 'Current RVI' : 'Current ELTV'}\n                              </h3>\n                              <InfoPopover\n                                title={localStorage.getItem('settings.dataMode') === 'performance' ? 'What is RVI?' : 'What is ELTV?'}\n                                content={\n                                  <>\n                                    {localStorage.getItem('settings.dataMode') === 'performance' ? (\n                                      <>\n                                        <p><strong>RVI (Retention Value Index)</strong> is a qualitative indicator (High/Medium/Low) derived from modeled retention value and churn risk signals.</p>\n                                        <p>It does not use salary in performance mode. Categories are computed from underlying ELTV ranks.</p>\n                                      </>\n                                    ) : (\n                                      <>\n                                        <p><strong>ELTV (Employee Lifetime Value)</strong> estimates the present value of expected contribution based on predicted retention over a fixed horizon with discounting, scaled by the employees salary.</p>\n                                        <p>Higher survival probabilities and salary yield higher ELTV.</p>\n                                      </>\n                                    )}\n                                  </>\n                                }\n                              >\n                                <Info className=\"w-3.5 h-3.5 text-gray-400 cursor-pointer\" />\n                              </InfoPopover>\n                            </div>\n                            <div className=\"mt-1 flex items-baseline gap-2\">\n                              <span className={cn(\n                                \"text-xl font-semibold\",\n                                localStorage.getItem('settings.dataMode') === 'performance'\n                                  ? getELTVCategoryClass(selectedEmployeeData.current_eltv)\n                                  : \"text-gray-900 dark:text-gray-100\"\n                              )}>\n                                {localStorage.getItem('settings.dataMode') === 'performance'\n                                  ? (selectedEmployeeData.current_eltv > 0 ? formatELTVByMode(selectedEmployeeData.current_eltv, 'quality') : 'N/A')\n                                  : formatELTVByMode(selectedEmployeeData.current_eltv, 'quantification')}\n                              </span>\n                            </div>\n                          </div>\n                          <Calculator className=\"w-5 h-5 text-gray-400\" />\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className={cn(\n                      \"rounded-xl p-3 shadow-sm relative overflow-hidden border h-fit\",\n                      applyTreatmentResult\n                        ? \"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-700\"\n                        : \"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700 opacity-60\"\n                    )}>\n                      {applyTreatmentResult &&\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-transparent opacity-50 dark:opacity-30\" />}\n                      <div className=\"relative z-10\">\n                        <div className=\"flex justify-between items-start\">\n                          <div>\n                            <div className=\"flex items-center gap-1\">\n                              <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                {localStorage.getItem('settings.dataMode') === 'performance' ? 'RVI Post-Treatment' : 'ELTV Post-Treatment'}\n                              </h3>\n                              <InfoPopover\n                                title={localStorage.getItem('settings.dataMode') === 'performance' ? 'RVI PostTreatment' : 'ELTV PostTreatment'}\n                                content={\n                                  <>\n                                    {localStorage.getItem('settings.dataMode') === 'performance' ? (\n                                      <>\n                                        <p>Shows expected <strong>RVI category</strong> after applying the selected treatment, reflecting improved retention without salary.</p>\n                                        <p>Categories are derived from updated ELTV ranks under the treatments predicted churn reduction.</p>\n                                      </>\n                                    ) : (\n                                      <>\n                                        <p>Projected <strong>ELTV</strong> using updated survival probabilities after treatment. Display does not subtract treatment cost; cost is shown separately in ROI.</p>\n                                        <p>Depends on survival curve shape, discounting, and the employees salary.</p>\n                                      </>\n                                    )}\n                                  </>\n                                }\n                              >\n                                <Info className=\"w-3.5 h-3.5 text-gray-400 cursor-pointer\" />\n                              </InfoPopover>\n                            </div>\n                            <div className=\"mt-1 flex items-baseline gap-2\">\n                              <CustomTooltip\n                                content={applyTreatmentResult\n                                  ? `Raw value: ${applyTreatmentResult.eltv_post_treatment}, Treatment ID: ${applyTreatmentResult.applied_treatment.id}, Treatment: ${applyTreatmentResult.applied_treatment.name}`\n                                  : \"No treatment applied\"\n                                }\n                                disabled={!applyTreatmentResult}\n                              >\n                                <span className={cn(\n                                  \"text-xl font-semibold cursor-help\",\n                                  applyTreatmentResult\n                                    ? (localStorage.getItem('settings.dataMode') === 'performance'\n                                      ? getELTVCategoryClass(applyTreatmentResult.eltv_post_treatment)\n                                      : \"text-blue-600 dark:text-blue-400\")\n                                    : \"text-gray-400 dark:text-gray-500\"\n                                )}>\n                                  {applyTreatmentResult\n                                    ? (localStorage.getItem('settings.dataMode') === 'performance'\n                                      ? formatELTVByMode(applyTreatmentResult.eltv_post_treatment, 'quality')\n                                      : formatELTVByMode(applyTreatmentResult.eltv_post_treatment, 'quantification'))\n                                    : (localStorage.getItem('settings.dataMode') === 'performance' ? 'Unknown' : '$ -.--')}\n                                </span>\n                              </CustomTooltip>\n                            </div>\n                          </div>\n                          <TrendingUp className={cn(\n                            \"w-5 h-5\",\n                            applyTreatmentResult\n                              ? \"text-blue-500\"\n                              : \"text-gray-400\"\n                          )} />\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Budget Input */}\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl p-3 shadow-sm border border-gray-100 dark:border-gray-700 col-span-1 sm:col-span-2 lg:col-span-2 h-fit\">\n                      <label htmlFor=\"budgetInput\" className=\"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">\n                        Budget Constraint (Optional)\n                      </label>\n                      <div className=\"relative mt-1 rounded-md shadow-sm\">\n                        <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\n                          <span className=\"text-gray-500 dark:text-gray-400 sm:text-sm\">%</span>\n                        </div>\n                        <input\n                          type=\"number\"\n                          name=\"budgetInput\"\n                          id=\"budgetInput\"\n                          className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 pl-3 pr-8 py-2 focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:text-gray-100\"\n                          placeholder=\"Max % of salary (e.g., 10)\"\n                          min=\"0\"\n                          max=\"100\"\n                          step=\"0.1\"\n                          value={budget ?? ''}\n                          onChange={(e) => {\n                            const val = e.target.value;\n                            setBudget(val === '' ? null : parseFloat(val));\n                          }}\n                        />\n                      </div>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        Percentage of employee's annual salary\n                      </p>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700\">\n                    <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2\">Playground Overview</h3>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Explore scenario planning, mass treatment, and tracking tools using the tabs below. Select an employee when you&rsquo;re ready to generate personalized insights and projections.\n                    </p>\n                  </div>\n                )}\n\n                {/* Tab Navigation */}\n                <div className=\"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg\">\n                  <button\n                    onClick={() => setActiveTab('scenario')}\n                    className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all ${activeTab === 'scenario'\n                      ? 'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm'\n                      : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n                      }`}\n                  >\n                    <GitCompare className=\"w-4 h-4\" />\n                    Scenario Comparison\n                  </button>\n                </div>\n\n                {/* Tab Content */}\n                {activeTab === 'scenario' ? (\n                  <ScenarioComparisonTab\n                    scenarios={scenarios}\n                    setScenarios={setScenarios}\n                    nextScenarioId={nextScenarioId}\n                    setNextScenarioId={setNextScenarioId}\n                    selectedEmployee={selectedEmployee}\n                    selectedEmployeeData={selectedEmployeeData}\n                    treatmentSuggestions={treatmentSuggestions}\n                    applyTreatment={applyTreatment}\n                    isApplyingTreatment={isApplyingTreatment}\n                    selectedTreatment={selectedTreatment}\n                    isPerformanceMode={isPerformanceMode}\n                    // Mode determined by Settings\n                    budget={budget}\n                    transformedChartData={transformedChartData}\n                  />\n                ) : activeTab === 'mass-treatment' ? (\n                  <MassTreatmentTab\n                    candidates={massTreatmentCandidates}\n                    setCandidates={setMassTreatmentCandidates}\n                    isLoading={isLoadingMassTreatment}\n                    setIsLoading={setIsLoadingMassTreatment}\n                    isPerformanceMode={isPerformanceMode}\n                    filters={massTreatmentFilters}\n                    setFilters={setMassTreatmentFilters}\n                    employees={sortedEmployeesMemo}\n                    getRiskLevel={getRiskLevel}\n                    toast={toast}\n                    handleEmployeeSelect={handleEmployeeSelect}\n                    setActiveTab={setActiveTab}\n                    selectedCandidates={selectedCandidates}\n                    setSelectedCandidates={setSelectedCandidates}\n                    isApplyingBulkTreatment={isApplyingBulkTreatment}\n                    bulkProgress={bulkProgress}\n                    applyBulkTreatment={applyBulkTreatment}\n                    applyCandidateTreatment={applyTreatmentToCandidate}\n                    bulkOperationCancelled={bulkOperationCancelled}\n                    cancelBulkTreatment={cancelBulkTreatment}\n                  />\n                ) : (\n                  <div className=\"space-y-6\">\n                    <TreatmentTracker\n                      selectedEmployee={selectedEmployee ? {\n                        hr_code: selectedEmployee.hr_code,\n                        name: selectedEmployee.name,\n                        churn_probability: selectedEmployee.churnProbability\n                      } : undefined}\n                      isVisible={true}\n                      hasDBConnection={hasDBConnection}\n                      isPerformanceMode={isPerformanceMode}\n                    />\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// -------------------------------------\n// Scenario Comparison Tab Component\n// -------------------------------------\nconst ScenarioComparisonTab = memo(({\n  scenarios,\n  setScenarios,\n  nextScenarioId,\n  setNextScenarioId,\n  selectedEmployee,\n  selectedEmployeeData,\n  treatmentSuggestions,\n  applyTreatment,\n  isApplyingTreatment,\n  selectedTreatment,\n  isPerformanceMode,\n\n  budget,\n  transformedChartData\n}: {\n  scenarios: ScenarioData[];\n  setScenarios: React.Dispatch<React.SetStateAction<ScenarioData[]>>;\n  nextScenarioId: number;\n  setNextScenarioId: React.Dispatch<React.SetStateAction<number>>;\n  selectedEmployee: Employee | null;\n  selectedEmployeeData: PlaygroundEmployeeData | null;\n  treatmentSuggestions: TreatmentSuggestion[];\n  applyTreatment: (treatment: TreatmentSuggestion) => Promise<void>;\n  isApplyingTreatment: boolean;\n  selectedTreatment: TreatmentSuggestion | null;\n  isPerformanceMode: boolean;\n\n  budget: number | null;\n  transformedChartData: any[];\n}) => {\n  const addScenario = useCallback(() => {\n    if (!selectedEmployee || !selectedEmployeeData || scenarios.length >= MAX_SCENARIOS) return;\n\n    const newScenario: ScenarioData = {\n      id: generateScenarioId(nextScenarioId),\n      name: `Scenario ${nextScenarioId}`,\n      color: SCENARIO_COLORS[(nextScenarioId - 1) % SCENARIO_COLORS.length],\n      employeeId: selectedEmployee.hr_code,\n      treatmentId: null,\n      data: selectedEmployeeData,\n      treatmentResult: null\n    };\n\n    setScenarios(prev => [...prev, newScenario]);\n    setNextScenarioId(prev => prev + 1);\n  }, [selectedEmployee, selectedEmployeeData, scenarios, nextScenarioId, setScenarios, setNextScenarioId]);\n\n  const removeScenario = useCallback((scenarioId: string) => {\n    setScenarios(prev => prev.filter(s => s.id !== scenarioId));\n  }, [setScenarios]);\n\n  const updateScenarioTreatment = useCallback(async (scenarioId: string, treatmentId: number | null) => {\n    const scenario = scenarios.find(s => s.id === scenarioId);\n    if (!scenario) return;\n\n    if (treatmentId === null) {\n      setScenarios(prev => prev.map(s =>\n        s.id === scenarioId\n          ? { ...s, treatmentId: null, treatmentResult: null }\n          : s\n      ));\n      return;\n    }\n\n    // Backend API call will be used instead\n\n    const previousTreatmentId = scenario.treatmentId;\n    const previousResult = scenario.treatmentResult;\n    const baselineSnapshot = clonePlaygroundEmployeeData(scenario.data);\n\n    setScenarios(prev => prev.map(s =>\n      s.id === scenarioId\n        ? { ...s, treatmentId, treatmentResult: null }\n        : s\n    ));\n\n    try {\n      const response = await api.post('/playground/simulate', {\n        employee_id: scenario.employeeId,\n        treatment_id: treatmentId\n      });\n\n      const result = response.data;\n\n      setScenarios(prev => prev.map(s =>\n        s.id === scenarioId\n          ? {\n            ...s,\n            data: baselineSnapshot ?? s.data,\n            treatmentId,\n            treatmentResult: result,\n          }\n          : s\n      ));\n    } catch (_error) {\n      setScenarios(prev => prev.map(s =>\n        s.id === scenarioId\n          ? {\n            ...s,\n            treatmentId: previousTreatmentId,\n            treatmentResult: previousResult,\n          }\n          : s\n      ));\n    }\n  }, [scenarios, setScenarios]);\n\n  // Transform scenarios data for multi-line chart\n  const scenarioChartData = useMemo(() => {\n    if (scenarios.length === 0) return transformedChartData;\n\n    const months = Array.from({ length: 12 }, (_, i) => i + 1);\n\n    return months.map(month => {\n      const monthKey = `month_${month}`;\n      const dataPoint: any = { month };\n\n      scenarios.forEach(scenario => {\n        if (scenario.data) {\n          const baselineProb = (scenario.data.current_survival_probabilities?.[monthKey] ?? 0) * 100;\n          const treatmentProb = scenario.treatmentResult\n            ? (scenario.treatmentResult.new_survival_probabilities?.[monthKey] ?? baselineProb / 100) * 100\n            : baselineProb;\n\n          dataPoint[scenario.name] = treatmentProb;\n        }\n      });\n\n      return dataPoint;\n    });\n  }, [scenarios, transformedChartData]);\n\n  // const scenarioChartConfig = useMemo(() => {\n  //   const colors: { [key: string]: string } = {};\n  //   scenarios.forEach(scenario => {\n  //     colors[scenario.name] = scenario.color;\n  //   });\n  //   return { colors };\n  // }, [scenarios]);\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 flex-1 min-h-0 overflow-hidden\">\n      <div className=\"lg:col-span-2 bg-white dark:bg-gray-800/80 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700/50 flex flex-col overflow-hidden h-full min-h-0\">\n        <div className=\"flex flex-col p-4 h-full min-h-0\">\n          {/* Chart Title and Controls */}\n          <div className=\"mb-3 pb-2 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n                Scenario Comparison - Retention Probability\n              </h3>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={addScenario}\n                  disabled={!selectedEmployee || scenarios.length >= MAX_SCENARIOS}\n                  title={!selectedEmployee ? 'Select an employee to add personalized scenarios' : scenarios.length >= MAX_SCENARIOS ? `Maximum of ${MAX_SCENARIOS} scenarios reached` : undefined}\n                  className=\"px-3 py-1 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1\"\n                >\n                  <GitCompare className=\"w-3 h-3\" />\n                  Add Scenario\n                </button>\n              </div>\n            </div>\n\n            {!selectedEmployeeData && (\n              <div className=\"mb-3 p-3 rounded-md bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-200 text-xs\">\n                Select an employee to compare baseline versus treated retention probabilities. Until then, the chart below will stay empty.\n              </div>\n            )}\n\n            {/* Scenario Management */}\n            {scenarios.length > 0 && (\n              <div className=\"space-y-2 mb-3\">\n                {scenarios.map((scenario) => (\n                  <div key={scenario.id} className=\"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg\">\n                    <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: scenario.color }}></div>\n                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{scenario.name}</span>\n                    <select\n                      value={scenario.treatmentId || ''}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        const treatmentId = value === '' ? null : parseInt(value, 10);\n                        updateScenarioTreatment(scenario.id, treatmentId);\n                      }}\n                      className=\"text-xs bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded px-2 py-1\"\n                    >\n                      <option value=\"\">No Treatment</option>\n                      {treatmentSuggestions.map(treatment => {\n                        const salaryBase = selectedEmployee?.salary || selectedEmployeeData?.current_features.employee_cost || 0;\n                        const costPercent = calculateCostPercentage(treatment.cost || 0, salaryBase);\n                        const hasCostShare = costPercent > 0;\n                        const optionLabel = isPerformanceMode\n                          ? `${treatment.name}${hasCostShare ? ` (${formatCostPercentage(costPercent)} of salary)` : ''}`\n                          : `${treatment.name} (${formatCurrency(treatment.cost || 0)})`;\n\n                        return (\n                          <option key={treatment.id} value={treatment.id}>\n                            {optionLabel}\n                          </option>\n                        );\n                      })}\n                    </select>\n                    <button\n                      onClick={() => removeScenario(scenario.id)}\n                      className=\"text-red-500 hover:text-red-700 ml-auto\"\n                    >\n                      \n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {selectedEmployeeData && (\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n                <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n                  <strong>Current Risk:</strong> {(selectedEmployeeData.current_churn_probability * 100).toFixed(1)}% annual churn probability\n                </p>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300 mt-1\">\n                  Compare different treatment scenarios side by side. Each line represents a different scenario with its applied treatment.\n                </p>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex-1\" style={{ height: '300px' }}>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart\n                data={scenarioChartData}\n                margin={{ top: 5, right: 20, left: 0, bottom: 20 }}\n              >\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                <XAxis\n                  dataKey=\"month\"\n                  label={{ value: 'Months from Now', position: 'bottom', dy: 5, style: { fontSize: 12, fill: '#6b7280' } }}\n                  type=\"number\"\n                  domain={[1, 12]}\n                  ticks={[1, 3, 6, 9, 12]}\n                  stroke=\"#6b7280\"\n                  tick={{ fontSize: 11 }}\n                  axisLine={{ stroke: \"#d1d5db\" }}\n                  tickLine={{ stroke: \"#d1d5db\" }}\n                />\n                <YAxis\n                  label={{ value: 'Retention Probability (%)', angle: -90, position: 'insideLeft', offset: -5, dx: -10, style: { fontSize: 12, fill: '#6b7280' } }}\n                  domain={[0, 100]}\n                  stroke=\"#6b7280\"\n                  tick={{ fontSize: 11 }}\n                  axisLine={{ stroke: \"#d1d5db\" }}\n                  tickLine={{ stroke: \"#d1d5db\" }}\n                  width={45}\n                />\n                <RechartsTooltip\n                  content={({ active, payload, label }) => {\n                    if (active && payload && payload.length) {\n                      return (\n                        <div className=\"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg text-xs max-w-xs\">\n                          <p className=\"font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                            {label} months from now\n                          </p>\n                          {payload.map((entry: any) => (\n                            <div key={entry.name} className=\"flex items-center gap-2 mb-1\">\n                              <span className=\"w-2 h-2 rounded-full\" style={{ backgroundColor: entry.color }} />\n                              <span className=\"text-gray-600 dark:text-gray-300\">{entry.name}:</span>\n                              <span className=\"font-medium text-gray-800 dark:text-gray-100\">{entry.value.toFixed(1)}%</span>\n                            </div>\n                          ))}\n                        </div>\n                      );\n                    }\n                    return null;\n                  }}\n                />\n                <Legend\n                  verticalAlign=\"top\"\n                  height={30}\n                  iconSize={8}\n                  wrapperStyle={{ fontSize: '12px', paddingTop: '5px' }}\n                  formatter={(value) => <span className=\"text-gray-600 dark:text-gray-300\">{value}</span>}\n                />\n\n                {scenarios.map((scenario) => (\n                  <Line\n                    key={scenario.id}\n                    type=\"monotone\"\n                    dataKey={scenario.name}\n                    stroke={scenario.color}\n                    strokeWidth={2}\n                    dot={false}\n                    activeDot={{ r: 5, strokeWidth: 1, fill: scenario.color }}\n                    name={scenario.name}\n                  />\n                ))}\n              </LineChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-white dark:bg-gray-800/80 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700/50 flex flex-col h-full min-h-0\">\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-800 flex-shrink-0\">\n          <h3 className=\"text-base font-medium text-gray-700 dark:text-gray-200\">\n            AI-Generated Treatments\n          </h3>\n        </div>\n\n        {/* Disclaimer removed; presentation is now governed by global data mode in Settings */}\n\n        {treatmentSuggestions.length > 0 ? (\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent dark:scrollbar-thumb-gray-600\" style={{ minHeight: '300px' }}>\n            {treatmentSuggestions\n              .filter(treatment => {\n                if (budget === null) return true;\n                const costPercentage = calculateCostPercentage(treatment.cost, selectedEmployeeData?.current_features.employee_cost || 0);\n                return costPercentage <= budget;\n              })\n              .slice(0, 6)\n              .map((treatment) => (\n                <TreatmentCard\n                  key={treatment.id}\n                  treatment={treatment}\n                  onSelect={applyTreatment}\n                  isSelected={selectedTreatment?.id === treatment.id}\n                  isLoading={isApplyingTreatment && selectedTreatment?.id === treatment.id}\n\n                  employeeSalary={selectedEmployeeData?.current_features.employee_cost || 0}\n                />\n              ))}\n          </div>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center text-center py-8 text-gray-500 dark:text-gray-400\">\n            <p>{selectedEmployeeData ? 'No treatment suggestions available for this employee.' : 'Select an employee to generate treatment suggestions.'}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n\n// -------------------------------------\n// Mass Treatment Tab Component\n// -------------------------------------\nconst MassTreatmentTab = memo(({\n  candidates,\n  setCandidates,\n  isLoading,\n  setIsLoading,\n  isPerformanceMode,\n  filters: _filters,\n  setFilters: _setFilters,\n  employees,\n  getRiskLevel,\n  toast,\n  handleEmployeeSelect,\n  setActiveTab: _setActiveTab,\n  selectedCandidates,\n  setSelectedCandidates,\n  isApplyingBulkTreatment,\n  bulkProgress,\n  applyBulkTreatment,\n  applyCandidateTreatment,\n  bulkOperationCancelled,\n  cancelBulkTreatment\n}: {\n  candidates: MassTreatmentCandidate[];\n  setCandidates: React.Dispatch<React.SetStateAction<MassTreatmentCandidate[]>>;\n  isLoading: boolean;\n  setIsLoading: React.Dispatch<React.SetStateAction<boolean>>;\n  isPerformanceMode: boolean;\n  filters: {\n    riskLevel: string;\n    department: string;\n    minELTVGain: number;\n  };\n  setFilters: React.Dispatch<React.SetStateAction<{\n    riskLevel: string;\n    department: string;\n    minELTVGain: number;\n  }>>;\n  employees: Employee[];\n  getRiskLevel: (probability: number) => string;\n  toast: any;\n  handleEmployeeSelect: (employeeId: number, treatmentIdToSelect?: number) => Promise<void>;\n  setActiveTab: React.Dispatch<React.SetStateAction<PlaygroundTab>>;\n  selectedCandidates: Set<string>;\n  setSelectedCandidates: React.Dispatch<React.SetStateAction<Set<string>>>;\n  isApplyingBulkTreatment: boolean;\n  bulkProgress: {\n    completed: number;\n    total: number;\n    currentEmployee?: string;\n    successful?: number;\n    failed?: number;\n  };\n  applyBulkTreatment: () => Promise<void>;\n  applyCandidateTreatment: (candidate: MassTreatmentCandidate, options?: { treatment?: TreatmentSuggestion | null }) => Promise<ApplyTreatmentResult | null>;\n  bulkOperationCancelled: boolean;\n  cancelBulkTreatment: () => void;\n}) => {\n  const analyzeTeamForTreatment = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      // Starting mass treatment analysis\n\n      // Step 1: Create a comprehensive scoring system for efficiency and criticality\n      const employeeScores = employees\n        .filter(emp => {\n          // Basic validation\n          const hasValidData = emp.hr_code && emp.name;\n          const hasReasonableSalary = (emp.salary || 0) >= 0;\n          return hasValidData && hasReasonableSalary;\n        })\n        .map(emp => {\n          const riskLevel = getRiskLevel(emp.churnProbability || 0);\n          const churnProb = emp.churnProbability || 0;\n          const salary = emp.salary || 0;\n          const tenure = emp.tenure || 0;\n\n          // Criticality Score (0-100): How critical is this employee to retain?\n          const criticalityScore = calculateCriticalityScore({\n            churnProbability: churnProb,\n            salary,\n            currentELTV: emp.currentELTV,\n            tenure,\n            riskLevel\n          });\n\n          // Efficiency Score (0-100): How efficient would treatment be?\n          const efficiencyScore = calculateEfficiencyScore({\n            churnProbability: churnProb,\n            salary,\n            tenure,\n            riskLevel\n          });\n\n          // Combined Priority Score (0-100)\n          const priorityScore = (criticalityScore * 0.6) + (efficiencyScore * 0.4);\n\n          return {\n            employee: emp,\n            criticalityScore,\n            efficiencyScore,\n            priorityScore,\n            riskLevel\n          };\n        })\n        .filter(score => score.priorityScore > 30) // Only consider employees with meaningful priority\n        .sort((a, b) => b.priorityScore - a.priorityScore)\n        .slice(0, Math.max(5, Math.floor(employees.length * 0.1))); // Top 10% of employees (minimum 5)\n\n      if (employeeScores.length === 0) {\n\n        toast({\n          title: \"No Critical Opportunities Found\",\n          description: \"No employees meet the criticality and efficiency criteria. Try adjusting the analysis parameters.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Process the scored employees and get their treatment data\n      const candidatePromises = employeeScores.map(async (scoredEmployee) => {\n        try {\n          const employee = scoredEmployee.employee;\n\n          const [playgroundData, treatmentSuggestions] = await Promise.all([\n            api.get(`/playground/data/${employee.hr_code}`).then(r => r.data),\n            api.get(`/playground/treatments/${employee.hr_code}`).then(r => r.data)\n          ]);\n\n          if (!playgroundData || !treatmentSuggestions) {\n            return null;\n          }\n\n          // Find the best treatment option\n          const suggestions = treatmentSuggestions.suggestions || [];\n          const topTreatment = suggestions.length > 0 ? suggestions[0] : null;\n          const potentialELTVGain = topTreatment ?\n            (topTreatment.projected_post_eltv || 0) - (playgroundData.current_eltv || 0) : 0;\n          const potentialChurnReduction = topTreatment ? Math.max(0, -(topTreatment.projected_churn_prob_change || 0)) : 0;\n          const projectedPostRviCategory = topTreatment ? formatELTVByMode(topTreatment.projected_post_eltv || 0, 'quality') : null;\n          const employeeSalaryReference = employee.salary || playgroundData.current_features.employee_cost || 0;\n          const costPercentage = topTreatment ? calculateCostPercentage(topTreatment.cost || 0, employeeSalaryReference) : 0;\n          const costPercentageText = costPercentage > 0 ? `Cost: ${formatCostPercentage(costPercentage)} of salary` : undefined;\n\n          const treatmentRationale = topTreatment ? (\n            isPerformanceMode\n              ? [\n                `Recommended: ${topTreatment.name}`,\n                `Estimated churn drop: ${(potentialChurnReduction * 100).toFixed(1)}%`,\n                projectedPostRviCategory ? `Projected RVI: ${projectedPostRviCategory}` : undefined,\n                costPercentageText,\n              ].filter(Boolean) as string[]\n              : [\n                `Recommended: ${topTreatment.name}`,\n                `Expected ELTV gain: ${formatCurrency(potentialELTVGain)}`,\n                `Cost: ${formatCurrency(topTreatment.cost || 0)}`\n              ]\n          ) : ['No treatment recommendations available'];\n\n          const candidate: MassTreatmentCandidate = {\n            employee,\n            playgroundData,\n            suggestedTreatments: suggestions,\n            topTreatment,\n            potentialELTVGain,\n            potentialChurnReduction,\n            projectedPostRviCategory,\n            riskLevel: scoredEmployee.riskLevel,\n            criticalityScore: scoredEmployee.criticalityScore,\n            efficiencyScore: scoredEmployee.efficiencyScore,\n            priorityScore: scoredEmployee.priorityScore,\n            selectionCriteria: [\n              `High priority score: ${scoredEmployee.priorityScore.toFixed(1)}`,\n              `Risk level: ${scoredEmployee.riskLevel}`,\n              `Churn probability: ${(scoredEmployee.employee.churnProbability * 100).toFixed(1)}%`,\n              ...(isPerformanceMode && potentialChurnReduction > 0\n                ? [`Potential churn drop: ${(potentialChurnReduction * 100).toFixed(1)}%`]\n                : []),\n              ...(isPerformanceMode && costPercentage > 0\n                ? [`Cost: ${formatCostPercentage(costPercentage)} of salary`]\n                : []),\n              ...(!isPerformanceMode && potentialELTVGain > 0\n                ? [`Expected ELTV gain: ${formatCurrency(potentialELTVGain)}`]\n                : []),\n            ],\n            treatmentRationale,\n            costPercentage,\n            employeeSalaryReference,\n            lastResult: null,\n            isApplying: false,\n            lastError: null,\n          };\n\n          return candidate;\n        }\n        catch (error) {\n          console.error('Error analyzing employee for mass treatment:', error);\n          return null;\n        }\n      });\n\n      const results = await Promise.all(candidatePromises);\n      const validCandidates = results.filter(candidate => candidate !== null) as MassTreatmentCandidate[];\n\n      setCandidates(validCandidates);\n      setSelectedCandidates(new Set(validCandidates.slice(0, Math.min(3, validCandidates.length)).map(c => c.employee.hr_code)));\n\n      toast({\n        title: \"Analysis Complete\",\n        description: `Found ${validCandidates.length} employees for potential treatment interventions.`,\n        variant: \"default\",\n      });\n    }\n    catch (error) {\n      // Error in analyzeTeamForTreatment\n    }\n    finally {\n      setIsLoading(false);\n    }\n  }, [employees, getRiskLevel, isPerformanceMode, setIsLoading, setSelectedCandidates, toast]);\n\n  const summaryMetrics = useMemo(() => {\n    let totalPotentialELTV = 0;\n    let selectedPotentialELTV = 0;\n    let totalPotentialChurn = 0;\n    let selectedPotentialChurn = 0;\n    let appliedCount = 0;\n    let realizedGainELTV = 0;\n    let realizedChurnDrop = 0;\n\n    candidates.forEach(candidate => {\n      const potentialGain = Math.max(0, candidate.potentialELTVGain || 0);\n      const potentialChurnDrop = Math.max(0, candidate.potentialChurnReduction || 0);\n\n      totalPotentialELTV += potentialGain;\n      totalPotentialChurn += potentialChurnDrop;\n\n      if (selectedCandidates.has(candidate.employee.hr_code)) {\n        selectedPotentialELTV += potentialGain;\n        selectedPotentialChurn += potentialChurnDrop;\n      }\n\n      if (candidate.lastResult) {\n        appliedCount += 1;\n        realizedGainELTV += candidate.lastResult.treatment_effect_eltv ?? 0;\n        const churnDrop = Math.max(0, (candidate.lastResult.pre_churn_probability ?? 0) - (candidate.lastResult.post_churn_probability ?? 0));\n        realizedChurnDrop += churnDrop;\n      }\n    });\n\n    return {\n      totalPotentialELTV,\n      selectedPotentialELTV,\n      totalPotentialChurn,\n      selectedPotentialChurn,\n      appliedCount,\n      realizedGainELTV,\n      realizedChurnDrop,\n    };\n  }, [candidates, selectedCandidates]);\n\n  const calculateCriticalityScore = (data: {\n    churnProbability: number;\n    salary: number;\n    currentELTV?: number;\n    tenure: number;\n    riskLevel: string;\n  }) => {\n    const { churnProbability, salary, currentELTV = 0, tenure } = data;\n\n    // Base criticality from churn probability (0-40 points)\n    const churnScore = churnProbability * 40;\n\n    // Salary impact (0-25 points) - higher salary = more critical\n    const salaryScore = Math.min((salary / 100000) * 25, 25);\n\n    // ELTV impact (0-20 points) - higher ELTV = more critical\n    const eltvScore = Math.min((currentELTV / 200000) * 20, 20);\n\n    // Tenure impact (0-15 points) - moderate tenure is most critical\n    const tenureScore = tenure >= 1 && tenure <= 5 ? 15 : tenure > 5 ? 10 : 5;\n\n    return Math.min(churnScore + salaryScore + eltvScore + tenureScore, 100);\n  }\n\n  // ------------------------------\n  // WhatIf Adjustments UI + Logic\n  // ------------------------------\n  const [whatIf, setWhatIf] = useState<WhatIfState>({ tenure: null, employee_cost: null });\n  const [whatIfResult, setWhatIfResult] = useState<null | {\n    post_churn_probability: number;\n    eltv_pre_treatment: number;\n    eltv_post_treatment: number;\n  }>(null);\n  const [whatIfLoading, setWhatIfLoading] = useState(false);\n\n  const applyWhatIf = useCallback(async (employee: Employee) => {\n    try {\n      setWhatIfLoading(true);\n      const changedFeatures: Record<string, number> = {};\n      if (typeof whatIf.tenure === 'number') changedFeatures.tenure = whatIf.tenure;\n      if (typeof whatIf.employee_cost === 'number') changedFeatures.employee_cost = whatIf.employee_cost;\n      const response = await api.post('/playground/manual-simulate', { employee_id: employee.hr_code, changed_features: changedFeatures });\n      const resp = response.data;\n      if (resp && typeof resp === 'object') {\n        const r: any = resp;\n        setWhatIfResult({\n          post_churn_probability: Number(r?.post_churn_probability ?? r?.postChurnProbability ?? 0),\n          eltv_pre_treatment: Number(r?.pre_eltv ?? r?.eltv_pre_treatment ?? employee.currentELTV ?? 0),\n          eltv_post_treatment: Number(r?.post_eltv ?? r?.eltv_post_treatment ?? 0)\n        });\n      }\n    } catch (e) {\n      console.error('WhatIf simulation failed', e);\n    } finally {\n      setWhatIfLoading(false);\n    }\n  }, [whatIf]);\n\n  const resetWhatIf = useCallback(() => {\n    setWhatIf({ tenure: null, employee_cost: null });\n    setWhatIfResult(null);\n  }, []);\n\n  const calculateEfficiencyScore = (data: {\n    churnProbability: number;\n    salary: number;\n    tenure: number;\n    riskLevel: string;\n  }) => {\n    const { churnProbability, tenure, riskLevel } = data;\n\n    // Treatment efficiency is higher for moderate risk (0-30 points)\n    let riskScore = 0;\n    if (riskLevel === 'Medium') riskScore = 30;\n    else if (riskLevel === 'High') riskScore = 20;\n    else if (riskLevel === 'Low') riskScore = 10;\n\n    // Tenure efficiency (0-25 points) - newer employees often respond better to treatment\n    const tenureScore = tenure <= 2 ? 25 : tenure <= 5 ? 20 : 15;\n\n    // Probability sweet spot (0-25 points) - 40-70% probability is most treatable\n    let probScore = 0;\n    if (churnProbability >= 0.4 && churnProbability <= 0.7) probScore = 25;\n    else if (churnProbability >= 0.3 && churnProbability <= 0.8) probScore = 20;\n    else probScore = 10;\n\n    // General treatability factor (0-20 points)\n    const treatabilityScore = 20;\n\n    return Math.min(riskScore + tenureScore + probScore + treatabilityScore, 100);\n  }\n\n  // Helper functions for selection\n  const toggleCandidate = useCallback((hrCode: string) => {\n    const newSelection = new Set(selectedCandidates);\n    if (newSelection.has(hrCode)) {\n      newSelection.delete(hrCode);\n    } else {\n      newSelection.add(hrCode);\n    }\n    setSelectedCandidates(newSelection);\n  }, [selectedCandidates, setSelectedCandidates]);\n\n  const selectAllCandidates = useCallback(() => {\n    const allHrCodes = candidates.map(c => c.employee.hr_code);\n    setSelectedCandidates(new Set(allHrCodes));\n  }, [candidates, setSelectedCandidates]);\n\n  const deselectAllCandidates = useCallback(() => {\n    setSelectedCandidates(new Set());\n  }, [setSelectedCandidates]);\n\n  const selectedCount = selectedCandidates.size;\n\n  // Template system state\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [templateName, setTemplateName] = useState('');\n  const [savedTemplates, setSavedTemplates] = useState<Array<{ id: string, name: string, criteria: any, createdAt: string }>>([]);\n\n  // Load templates on component mount\n  useEffect(() => {\n    const saved = localStorage.getItem('massTreatmentTemplates');\n    if (saved) {\n      try {\n        setSavedTemplates(JSON.parse(saved));\n      } catch (error) {\n        console.error('Failed to load templates:', error);\n      }\n    }\n  }, []);\n\n  // Save template\n  const saveTemplate = useCallback(() => {\n    if (!templateName.trim()) {\n      toast({\n        title: \"Template Name Required\",\n        description: \"Please enter a name for your template.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const newTemplate = {\n      id: Date.now().toString(),\n      name: templateName.trim(),\n      criteria: {\n        selectedEmployees: Array.from(selectedCandidates),\n        filters: _filters,\n        employeeCount: selectedCount,\n        totalCandidates: candidates.length\n      },\n      createdAt: new Date().toISOString()\n    };\n\n    const updatedTemplates = [...savedTemplates, newTemplate];\n    setSavedTemplates(updatedTemplates);\n    localStorage.setItem('massTreatmentTemplates', JSON.stringify(updatedTemplates));\n\n    setTemplateName('');\n    setShowTemplateModal(false);\n\n    toast({\n      title: \"Template Saved\",\n      description: `Template \"${newTemplate.name}\" saved successfully.`,\n    });\n  }, [templateName, selectedCandidates, _filters, selectedCount, candidates.length, savedTemplates, toast]);\n\n  // Load template\n  const loadTemplate = useCallback((template: any) => {\n    if (template.criteria.selectedEmployees) {\n      setSelectedCandidates(new Set(template.criteria.selectedEmployees));\n    }\n    if (template.criteria.filters) {\n      _setFilters(template.criteria.filters);\n    }\n\n    toast({\n      title: \"Template Loaded\",\n      description: `Template \"${template.name}\" loaded successfully.`,\n    });\n  }, [_setFilters, toast]);\n\n  // Delete template\n  const deleteTemplate = useCallback((templateId: string, templateName: string) => {\n    const updatedTemplates = savedTemplates.filter(t => t.id !== templateId);\n    setSavedTemplates(updatedTemplates);\n    localStorage.setItem('massTreatmentTemplates', JSON.stringify(updatedTemplates));\n\n    toast({\n      title: \"Template Deleted\",\n      description: `Template \"${templateName}\" deleted successfully.`,\n    });\n  }, [savedTemplates, toast]);\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n        <h3 className=\"text-lg font-semibold\">Mass Treatment Analysis</h3>\n        <p className=\"text-sm text-gray-500\">Identify and prioritize employees for retention efforts.</p>\n\n        {/* Enhanced Progress Bar for Bulk Operations */}\n        {isApplyingBulkTreatment && bulkProgress.total > 0 && (\n          <div className=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex items-center gap-2\">\n                  <Loader2 className=\"h-4 w-4 animate-spin text-blue-600\" />\n                  <span className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n                    {bulkOperationCancelled ? 'Cancelling...' : 'Applying Treatments'}\n                  </span>\n                </div>\n                <span className=\"text-sm text-blue-700 dark:text-blue-300\">\n                  ({bulkProgress.completed}/{bulkProgress.total})\n                </span>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">\n                  {Math.round((bulkProgress.completed / bulkProgress.total) * 100)}%\n                </span>\n                {!bulkOperationCancelled && (\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={cancelBulkTreatment}\n                    className=\"h-6 px-2 text-xs border-red-300 text-red-600 hover:bg-red-50 hover:text-red-700\"\n                  >\n                    Cancel\n                  </Button>\n                )}\n              </div>\n            </div>\n\n            {/* Progress Bar */}\n            <div className=\"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-3 mb-3\">\n              <div\n                className=\"bg-blue-600 dark:bg-blue-400 h-3 rounded-full transition-all duration-300 flex items-center justify-end pr-2\"\n                style={{ width: `${Math.max(8, (bulkProgress.completed / bulkProgress.total) * 100)}%` }}\n              >\n                {bulkProgress.completed > 0 && (\n                  <span className=\"text-xs text-white font-medium\">\n                    {Math.round((bulkProgress.completed / bulkProgress.total) * 100)}%\n                  </span>\n                )}\n              </div>\n            </div>\n\n            {/* Status Details */}\n            <div className=\"flex items-center justify-between text-xs\">\n              <div className=\"flex items-center gap-4\">\n                {(bulkProgress.successful ?? 0) > 0 && (\n                  <span className=\"text-green-600 dark:text-green-400 flex items-center gap-1\">\n                    <span className=\"w-2 h-2 bg-green-500 rounded-full\"></span>\n                    {bulkProgress.successful} successful\n                  </span>\n                )}\n                {(bulkProgress.failed ?? 0) > 0 && (\n                  <span className=\"text-red-600 dark:text-red-400 flex items-center gap-1\">\n                    <span className=\"w-2 h-2 bg-red-500 rounded-full\"></span>\n                    {bulkProgress.failed} failed\n                  </span>\n                )}\n              </div>\n              <div className=\"text-blue-700 dark:text-blue-300\">\n                {bulkProgress.currentEmployee && (\n                  <span>Current: {bulkProgress.currentEmployee}</span>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3\">\n          <div className=\"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-3\">\n            <div className=\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\">Candidates analyzed</div>\n            <div className=\"mt-1 text-2xl font-semibold text-gray-900 dark:text-gray-100\">{candidates.length}</div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">{summaryMetrics.appliedCount} already applied</div>\n          </div>\n          <div className=\"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-3\">\n            <div className=\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\">\n              {isPerformanceMode ? 'Potential churn reduction' : 'Potential ELTV gain'}\n            </div>\n            <div className=\"mt-1 text-2xl font-semibold text-emerald-600 dark:text-emerald-400\">\n              {isPerformanceMode\n                ? `${(summaryMetrics.totalPotentialChurn * 100).toFixed(1)}%`\n                : formatCurrency(summaryMetrics.totalPotentialELTV)}\n            </div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              Selected: {isPerformanceMode\n                ? `${(summaryMetrics.selectedPotentialChurn * 100).toFixed(1)}%`\n                : formatCurrency(summaryMetrics.selectedPotentialELTV)}\n            </div>\n          </div>\n          <div className=\"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-3\">\n            <div className=\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\">\n              {isPerformanceMode ? 'Realized churn drop' : 'Realized impact'}\n            </div>\n            <div className=\"mt-1 text-2xl font-semibold text-blue-600 dark:text-blue-400\">\n              {isPerformanceMode\n                ? `${(summaryMetrics.realizedChurnDrop * 100).toFixed(1)}%`\n                : formatCurrency(summaryMetrics.realizedGainELTV)}\n            </div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">{selectedCandidates.size} selected</div>\n          </div>\n        </div>\n\n        <div className=\"mt-4 flex flex-wrap items-center gap-3\">\n          <Button onClick={analyzeTeamForTreatment} disabled={isLoading || isApplyingBulkTreatment}>\n            {isLoading ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Zap className=\"mr-2 h-4 w-4\" />}\n            Analyze Team\n          </Button>\n\n          {/* Bulk Action Buttons */}\n          {candidates.length > 0 && (\n            <>\n              <Button\n                onClick={() => applyBulkTreatment()}\n                disabled={selectedCount === 0 || isApplyingBulkTreatment}\n                variant=\"default\"\n                className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n              >\n                {isApplyingBulkTreatment ? (\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                ) : (\n                  <Activity className=\"mr-2 h-4 w-4\" />\n                )}\n                Apply to Selected ({selectedCount})\n              </Button>\n\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={selectAllCandidates}\n                  variant=\"outline\"\n                  size=\"sm\"\n                >\n                  Select All\n                </Button>\n                <Button\n                  onClick={deselectAllCandidates}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  disabled={selectedCount === 0}\n                >\n                  Deselect All\n                </Button>\n              </div>\n\n              {/* Template System */}\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => setShowTemplateModal(true)}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  disabled={selectedCount === 0}\n                >\n                  Save Template\n                </Button>\n                {savedTemplates.length > 0 && (\n                  <div className=\"relative\">\n                    <select\n                      onChange={(e) => {\n                        if (e.target.value) {\n                          const template = savedTemplates.find(t => t.id === e.target.value);\n                          if (template) loadTemplate(template);\n                          e.target.value = '';\n                        }\n                      }}\n                      className=\"text-xs bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded px-2 py-1\"\n                      defaultValue=\"\"\n                    >\n                      <option value=\"\">Load Template ({savedTemplates.length})</option>\n                      {savedTemplates.map(template => (\n                        <option key={template.id} value={template.id}>\n                          {template.name} ({template.criteria.employeeCount} employees)\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {isLoading ? (\n          <div className=\"text-center py-12\">\n            <Loader2 className=\"mx-auto h-12 w-12 text-gray-400 animate-spin mb-4\" />\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">Analyzing employees...</h3>\n            <p className=\"text-sm text-gray-500\">This may take a few moments as we evaluate each employee for treatment opportunities.</p>\n          </div>\n        ) : candidates.length > 0 ? (\n          <div className=\"space-y-4\">\n            {candidates.map((candidate) => {\n              const isSelected = selectedCandidates.has(candidate.employee.hr_code);\n              const realizedChurnDrop = candidate.lastResult && candidate.lastResult.pre_churn_probability != null && candidate.lastResult.post_churn_probability != null\n                ? Math.max(0, candidate.lastResult.pre_churn_probability - candidate.lastResult.post_churn_probability)\n                : null;\n              const projectedRviCategory = candidate.projectedPostRviCategory || (candidate.lastResult ? formatELTVByMode(candidate.lastResult.eltv_post_treatment ?? candidate.playgroundData.current_eltv ?? 0, 'quality') : null);\n              const postChurnValue = candidate.lastResult ? `${(candidate.lastResult.post_churn_probability * 100).toFixed(1)}%` : 'N/A';\n              const costPercentageDisplay = candidate.costPercentage && candidate.costPercentage > 0\n                ? formatCostPercentage(candidate.costPercentage)\n                : null;\n              const costShareResult = candidate.lastResult\n                ? calculateCostPercentage(\n                  candidate.lastResult.treatment_cost ?? candidate.topTreatment?.cost ?? 0,\n                  candidate.employeeSalaryReference || candidate.employee.salary || candidate.playgroundData.current_features.employee_cost || 0\n                )\n                : candidate.costPercentage;\n              const costShareDisplay = costShareResult && costShareResult > 0 ? formatCostPercentage(costShareResult) : null;\n              const resultMetrics = candidate.lastResult\n                ? (isPerformanceMode\n                  ? [\n                    { label: 'Post-churn', value: postChurnValue },\n                    { label: 'Churn reduction', value: realizedChurnDrop !== null ? `${(realizedChurnDrop * 100).toFixed(1)}%` : 'N/A' },\n                    { label: 'Post RVI', value: projectedRviCategory ?? 'N/A' },\n                    { label: 'Cost share', value: costShareDisplay ?? 'N/A' },\n                  ]\n                  : [\n                    { label: 'Post-churn', value: postChurnValue },\n                    { label: 'ROI', value: `${((candidate.lastResult.roi ?? 0) * 100).toFixed(1)}%` },\n                    { label: 'New ELTV', value: formatCurrency(candidate.lastResult.eltv_post_treatment ?? 0) },\n                    { label: 'Treatment cost', value: formatCurrency(candidate.lastResult.treatment_cost ?? candidate.topTreatment?.cost ?? 0) },\n                  ])\n                : [];\n              return (\n                <div\n                  key={candidate.employee.id}\n                  className={cn(\n                    'p-4 rounded-lg shadow-sm border transition-all',\n                    isSelected\n                      ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-600'\n                      : 'bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700',\n                    candidate.lastResult ? 'border-emerald-300 dark:border-emerald-500/60 ring-1 ring-emerald-100 dark:ring-emerald-500/30' : '',\n                    candidate.isApplying ? 'opacity-90' : ''\n                  )}\n                >\n                  <div className=\"flex justify-between items-start gap-4 mb-3\">\n                    <div className=\"flex items-start gap-3\">\n                      <input\n                        type=\"checkbox\"\n                        checked={isSelected}\n                        onChange={() => toggleCandidate(candidate.employee.hr_code)}\n                        className=\"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\n                      />\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 flex-wrap\">\n                          <h4 className=\"font-semibold text-gray-900 dark:text-gray-100\">\n                            {candidate.employee.full_name || candidate.employee.name}\n                          </h4>\n                          {candidate.lastResult && (\n                            <span className=\"inline-flex items-center gap-1 rounded-full bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 px-2 py-0.5 text-xs font-medium\">\n                              <CheckCircle className=\"h-3 w-3\" /> Applied\n                            </span>\n                          )}\n                          {candidate.isApplying && (\n                            <span className=\"inline-flex items-center gap-1 text-xs text-blue-600 dark:text-blue-300\">\n                              <Loader2 className=\"h-3 w-3 animate-spin\" /> Applying\n                            </span>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                          {candidate.employee.position}  {candidate.employee.structure_name || candidate.employee.department}\n                        </p>\n                        <div className=\"flex flex-wrap items-center gap-3 mt-2 text-xs\">\n                          <span className={cn(\n                            'px-2 py-1 rounded-full',\n                            candidate.riskLevel === 'High'\n                              ? 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400'\n                              : candidate.riskLevel === 'Medium'\n                                ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400'\n                                : 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                          )}>\n                            {candidate.riskLevel} Risk\n                          </span>\n                          <span className=\"text-gray-500 dark:text-gray-400\">Priority {candidate.priorityScore?.toFixed(0) || 'N/A'}</span>\n                          {candidate.lastResult && (\n                            <span className=\"text-emerald-600 dark:text-emerald-300 font-medium\">\n                              {isPerformanceMode\n                                ? `${realizedChurnDrop !== null ? (realizedChurnDrop * 100).toFixed(1) : '0.0'}% churn drop`\n                                : `+${formatCurrency(candidate.lastResult.treatment_effect_eltv ?? 0)} impact`}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col items-end gap-2\">\n                      <Button\n                        size=\"sm\"\n                        disabled={!candidate.topTreatment || candidate.isApplying}\n                        className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n                        onClick={() => applyCandidateTreatment(candidate).catch(() => { })}\n                      >\n                        {candidate.isApplying ? <Loader2 className=\"h-3.5 w-3.5 animate-spin\" /> : 'Apply Recommended'}\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        disabled={candidate.isApplying}\n                        onClick={() => handleEmployeeSelect(candidate.employee.id, candidate.topTreatment?.id)}\n                      >\n                        View Details\n                      </Button>\n                    </div>\n                  </div>\n\n                  {candidate.topTreatment && (\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 mb-3\">\n                      <div className=\"flex items-center justify-between text-xs text-blue-700 dark:text-blue-300\">\n                        <h5 className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">Recommended Treatment</h5>\n                        {isPerformanceMode ? (\n                          <div className=\"flex flex-col items-end\">\n                            <span>Projected RVI {projectedRviCategory ?? 'N/A'}</span>\n                            {costPercentageDisplay && (\n                              <span className=\"text-[11px] text-blue-600/80 dark:text-blue-300/80\">\n                                Cost {costPercentageDisplay} of salary\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <span>Cost {formatCurrency(candidate.topTreatment.cost || 0)}</span>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-blue-800 dark:text-blue-200 mt-1\">{candidate.topTreatment.name}</p>\n                      {isPerformanceMode ? (\n                        <div className=\"text-xs text-blue-700 dark:text-blue-300 mt-1 space-y-1\">\n                          <div>Churn drop {(Math.max(0, candidate.potentialChurnReduction || 0) * 100).toFixed(1)}%</div>\n                          {costPercentageDisplay ? (\n                            <div>Cost share {costPercentageDisplay} of salary</div>\n                          ) : null}\n                          <div>Time to impact: {candidate.topTreatment.timeToEffect || 'N/A'}</div>\n                        </div>\n                      ) : (\n                        <div className=\"flex justify-between text-xs text-blue-700 dark:text-blue-300 mt-1\">\n                          <span>Expected Gain {formatCurrency(candidate.potentialELTVGain)}</span>\n                          <span>Time to impact: {candidate.topTreatment.timeToEffect || 'N/A'}</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {!candidate.topTreatment && (\n                    <div className=\"rounded-lg border border-dashed border-gray-200 dark:border-gray-700 p-3 mb-3 text-xs text-gray-600 dark:text-gray-400\">\n                      This employee does not currently have an AI-recommended treatment. Consider reviewing their profile manually.\n                    </div>\n                  )}\n\n                  {candidate.lastResult && (\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs text-gray-600 dark:text-gray-300 mb-3\">\n                      {resultMetrics.map((metric, idx) => (\n                        <div key={`${candidate.employee.hr_code}-metric-${idx}`}>\n                          <span className=\"font-medium text-gray-700 dark:text-gray-200\">{metric.label}</span>\n                          <div>{metric.value}</div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {candidate.selectionCriteria && candidate.selectionCriteria.length > 0 && (\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400\">\n                      <span className=\"font-medium\">Why selected:</span>\n                      <ul className=\"list-disc list-inside ml-2 mt-1 space-y-1\">\n                        {candidate.selectionCriteria.slice(0, isPerformanceMode ? 4 : 3).map((criteria, idx) => (\n                          <li key={idx}>{criteria}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n\n                  {candidate.lastError && (\n                    <div className=\"mt-3 text-sm text-red-600 dark:text-red-400 flex items-center gap-2\">\n                      <AlertTriangle className=\"h-4 w-4\" />\n                      {candidate.lastError}\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <Users className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100\">No candidates analyzed</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">Click \"Analyze Team\" to get started.</p>\n          </div>\n        )}\n      </div>\n\n      {/* Template Save Modal */}\n      {showTemplateModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n              Save Template\n            </h3>\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Template Name\n              </label>\n              <input\n                type=\"text\"\n                value={templateName}\n                onChange={(e) => setTemplateName(e.target.value)}\n                placeholder=\"e.g., High Risk Engineering Team\"\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100\"\n              />\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                This will save your current selection ({selectedCount} employees) and filters\n              </p>\n            </div>\n            <div className=\"flex gap-3\">\n              <Button onClick={saveTemplate} disabled={!templateName.trim()}>\n                Save Template\n              </Button>\n              <Button\n                onClick={() => {\n                  setShowTemplateModal(false);\n                  setTemplateName('');\n                }}\n                variant=\"outline\"\n              >\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n"],"names":["_extends","n","e","t","r","ownKeys","o","_objectSpread","_defineProperty","_toPropertyKey","i","_toPrimitive","SIZE","defaultLegendContentDefaultProps","Icon","_ref","data","iconType","inactiveColor","halfSize","sixthSize","thirdSize","color","preferredIcon","_data$payload","React.createElement","React.isValidElement","iconProps","React.cloneElement","Symbols","Items","props","payload","iconSize","layout","formatter","viewBox","itemStyle","svgStyle","entry","finalFormatter","className","clsx","finalValue","adaptEventsOfChild","Surface","DefaultLegendContent","outsideProps","resolveDefaultProps","align","finalStyle","useLegendPayload","useAppSelector","selectLegendPayload","_excluded","_objectWithoutProperties","_objectWithoutPropertiesLoose","defaultUniqBy","LegendContent","contextPayload","otherProps","finalPayload","getUniqPayload","contentProps","getDefaultPosition","style","margin","chartWidth","chartHeight","box","verticalAlign","hPos","vPos","LegendSettingsDispatcher","dispatch","useAppDispatch","useEffect","setLegendSettings","LegendSizeDispatcher","setLegendSize","getWidthOrHeight","height","width","maxWidth","isNumber","legendDefaultProps","Legend","legendPortalFromContext","useLegendPortal","useMargin","widthFromProps","heightFromProps","wrapperStyle","portalFromProps","lastBoundingBox","updateBoundingBox","useElementOffset","useChartWidth","useChartHeight","widthOrHeight","outerStyle","legendPortal","legendElement","createPortal","Dot","cx","cy","layerClass","svgPropertiesNoEvents","adaptEventHandlers","DotItem","option","dotProps","isValidElement","cloneElement","finalClassName","_ref2","points","shouldRenderDots","dot","Dots","_ref3","dotClassName","dataKey","baseProps","needClip","clipPathId","zIndex","DefaultZIndexes","clipDot","isClipDot","customDotProps","svgPropertiesAndEventsFromUnknown","dots","_entry$x","_entry$y","layerProps","ZIndexLayer","Layer","ActivePoint","point","childIndex","mainColor","activeDot","dotPropsTyped","svgPropertiesNoEventsFromUnknown","ActivePoints","itemDataKey","activeTooltipIndex","selectActiveTooltipIndex","activeDataPoints","useActiveTooltipDataPoints","activePoint","isNullish","selectXAxisWithScale","state","xAxisId","_yAxisId","isPanorama","selectAxisWithScale","selectXAxisTicks","selectTicksOfGraphicalItem","selectYAxisWithScale","_xAxisId","yAxisId","selectYAxisTicks","selectBandSize","createSelector","selectChartLayout","xAxis","yAxis","xAxisTicks","yAxisTicks","isCategoricalAxis","getBandSizeOfAxis","pickLineId","_state","_isPanorama","id","isLineSettings","item","selectSynchronisedLineSettings","selectUnfilteredCartesianItems","graphicalItems","x","selectLinePoints","selectChartDataWithIndexesIfNotInPanorama","lineSettings","bandSize","chartData","dataStartIndex","dataEndIndex","displayedData","computeLinePoints","getRadiusAndStrokeWidthFromDot","defaultR","defaultStrokeWidth","strokeWidth","realR","realStrokeWidth","_excluded2","_excluded3","computeLegendPayloadFromAreaData","name","stroke","legendType","hide","getTooltipNameProp","getTooltipEntrySettings","fill","unit","generateSimpleStrokeDasharray","totalLength","length","repeat","lines","count","linesUnit","result","getStrokeDasharray","lineLength","pre","next","remainLength","restLength","remainLines","sum","emptyLines","line","LineDotsWrapper","propsWithoutId","lineProps","LineLabelListProvider","showLabels","children","labelListEntries","useMemo","_point$x","_point$y","CartesianLabelListContextProvider","StaticCurve","pathRef","strokeDasharray","type","connectNulls","shape","others","curveProps","svgPropertiesAndEvents","React.Fragment","Shape","getTotalLength","mainCurve","CurveWithAnimation","_ref4","previousPointsRef","longestAnimatedLengthRef","isAnimationActive","animationBegin","animationDuration","animationEasing","animateNewValues","onAnimationEnd","onAnimationStart","prevPoints","animationId","useAnimationId","isAnimating","setIsAnimating","useState","handleAnimationEnd","useCallback","handleAnimationStart","startingPoint","JavascriptAnimate","lengthInterpolated","interpolate","curLength","currentStrokeDasharray","num","prevPointsDiffFactor","stepData","index","prevPointIndex","prev","LabelListFromLabelProp","RenderCurve","_ref5","useRef","errorBarDataPointFormatter","dataPoint","_dataPoint$x","_dataPoint$y","getValueByDataKey","LineWithState","Component","top","left","dotSize","GraphicalItemClipPath","SetErrorBarContext","defaultLineProps","Global","LineImpl","_resolveDefaultProps","label","everythingElse","useNeedsClip","plotArea","usePlotArea","useChartLayout","useIsPanorama","_ref6","value","_x","getCateCoordinateOfLine","_y","y","LineFn","RegisterGraphicalItemId","SetLegendPayload","SetTooltipEntrySettings","SetCartesianGraphicalItem","Line","React.memo","allowedTooltipTypes","LineChart","forwardRef","ref","CartesianChart","arrayTooltipSearcher","treatmentTrackingService","projectId","employeeId","api","testName","connectionDetails","TreatmentTracker","selectedEmployee","isVisible","hasDBConnection","isPerformanceMode","toast","useToast","isLoading","setIsLoading","activeTab","setActiveTab","employeeTreatments","setEmployeeTreatments","treatmentEffectiveness","setTreatmentEffectiveness","abTestResults","setAbTestResults","lastSyncTime","setLastSyncTime","isConnected","setIsConnected","upliftBasic","setUpliftBasic","upliftCuped","setUpliftCuped","activeProject","useProject","loadTreatmentData","apps","effectiveness","abTests","syncTime","basic","tr","error","syncWithHR","createABTest","created","jsxs","motion","jsx","Activity","Fragment","Wifi","WifiOff","Clock","Button","RefreshCw","Target","BarChart3","Users","tab","AnimatePresence","treatment","Award","acc","results","control","effect","idx","Database","useDynamicRiskRanges","config","setConfig","getCurrentRiskConfig","autoConfig","getAutoAdjustmentConfig","setError","subscribeToThresholdChanges","newConfig","handleAutoAdjust","employees","forceAdjust","autoAdjustThresholds","err","errorMessage","getDynamicRiskLevel","getDynamicRiskLevelWithStyles","getDynamicRiskDistribution","formatCurrency","convertELTVToCategory","eltv","formatELTVByMode","mode","category","getELTVCategoryClass","calculateCostPercentage","treatmentCost","employeeSalary","formatCostPercentage","percentage","CustomTooltip","content","position","disabled","show","setShow","triggerRef","coords","setCoords","transformClass","setTransformClass","showTooltipsContext","updatePosition","el","rect","onScroll","onResize","cn","InfoPopover","title","open","setOpen","panelRef","onClickOutside","onKeyDown","v","Info","TreatmentCard","memo","onSelect","isSelected","formatChangePercent","change","formatROI","roi","getRoiClass","isOngoingCost","Loader2","AlertTriangle","Bot","TrendingUp","MAX_SCENARIOS","SCENARIO_COLORS","clonePlaygroundEmployeeData","generateScenarioId","counter","suffix","Playground","reportError","useErrorReporting","globalCache","useGlobalDataCache","trainingStatus","hasReasoningData","emp","isModelReady","location","useLocation","getRiskLevel","setHasDBConnection","checkProjectData","employeeService","interval","scenarios","setScenarios","nextScenarioId","setNextScenarioId","massTreatmentCandidates","setMassTreatmentCandidates","isLoadingMassTreatment","setIsLoadingMassTreatment","massTreatmentFilters","setMassTreatmentFilters","selectedCandidates","setSelectedCandidates","isApplyingBulkTreatment","setIsApplyingBulkTreatment","bulkProgress","setBulkProgress","bulkOperationCancelled","setBulkOperationCancelled","bulkOperationCancelRef","setSelectedEmployee","updateCandidateState","hrCode","updater","candidate","applyTreatmentToCandidate","options","silent","employeeName","current","updatedPlayground","churnReduction","projectedRviCategory","salaryRef","updatedCostPercentage","churnDrop","churnText","projectedRvi","gain","roiPercent","message","applyBulkTreatment","selectedCandidatesList","completed","successful","errors","failedPreview","cancelBulkTreatment","isLoadingBaseEmployeesRef","selectedEmployeeData","setSelectedEmployeeData","selectedTreatment","setSelectedTreatment","treatmentSuggestions","setTreatmentSuggestions","applyTreatmentResult","setApplyTreatmentResult","isLoadingEmployees","setIsLoadingEmployees","isLoadingPlaygroundData","setIsLoadingPlaygroundData","isApplyingTreatment","setIsApplyingTreatment","searchTerm","setSearchTerm","selectedDepartment","setSelectedDepartment","selectedRiskLevel","setSelectedRiskLevel","selectedPosition","setSelectedPosition","sortBy","setSortBy","isSorting","setIsSorting","budget","setBudget","applyTreatment","baselineSnapshot","scenarioAdded","scenarioLimitReached","existingIndex","scenario","updated","baseName","duplicateCount","s","scenarioName","newScenario","sortOptions","handleSortChange","debouncedSearchTerm","setDebouncedSearchTerm","timer","baseFilteredEmployees","filtered","searchTermLower","availableDepartments","dataForDepts","probability","availablePositions","dataForPositions","availableRiskLevels","dataForRisk","riskLevels","filteredEmployeesMemo","sortedEmployeesMemo","sorted","a","b","selectedEmployeeId","setSelectedEmployeeId","handleEmployeeSelect","treatmentIdToSelect","employee","maxRetries","lastError","attempt","playgroundData","suggestionsResult","errorMsg","resolve","suggestions","treatmentToSelect","ROW_HEIGHT","EmployeeRow","onClick","riskScore","RiskIndicator","EmployeeRowRenderer","MemoizedEmployeeList","AutoSizer","List","employeeToSelect","transformSurvivalProbabilities","months","_","baseSurvival","modifiedSurvival","month","monthKey","baselineProb","newProb","transformedChartData","TrainingReminderBanner","Search","dept","level","pos","Calculator","val","GitCompare","ScenarioComparisonTab","MassTreatmentTab","ModelTrainingRequired","FlaskConical","addScenario","removeScenario","scenarioId","updateScenarioTreatment","treatmentId","previousTreatmentId","previousResult","scenarioChartData","treatmentProb","salaryBase","costPercent","hasCostShare","optionLabel","ResponsiveContainer","CartesianGrid","XAxis","YAxis","RechartsTooltip","active","candidates","setCandidates","_filters","_setFilters","_setActiveTab","applyCandidateTreatment","analyzeTeamForTreatment","employeeScores","hasValidData","hasReasonableSalary","riskLevel","churnProb","salary","tenure","criticalityScore","calculateCriticalityScore","efficiencyScore","calculateEfficiencyScore","priorityScore","score","candidatePromises","scoredEmployee","topTreatment","potentialELTVGain","potentialChurnReduction","projectedPostRviCategory","employeeSalaryReference","costPercentage","costPercentageText","treatmentRationale","validCandidates","c","summaryMetrics","totalPotentialELTV","selectedPotentialELTV","totalPotentialChurn","selectedPotentialChurn","appliedCount","realizedGainELTV","realizedChurnDrop","potentialGain","potentialChurnDrop","churnProbability","currentELTV","churnScore","salaryScore","eltvScore","tenureScore","whatIf","setWhatIf","whatIfResult","setWhatIfResult","whatIfLoading","setWhatIfLoading","changedFeatures","resp","probScore","toggleCandidate","newSelection","selectAllCandidates","allHrCodes","deselectAllCandidates","selectedCount","showTemplateModal","setShowTemplateModal","templateName","setTemplateName","savedTemplates","setSavedTemplates","saved","saveTemplate","newTemplate","updatedTemplates","loadTemplate","template","templateId","Zap","postChurnValue","costPercentageDisplay","costShareResult","costShareDisplay","resultMetrics","CheckCircle","metric","criteria"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}