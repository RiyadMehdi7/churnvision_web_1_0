const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-0abksWmx.js","assets/ui-DzcvAssw.js","assets/vendor-CfX-nNg5.js","assets/TrainingReminderBanner-BvYnbVKY.js","assets/CartesianChart-CIQiFx3T.js","assets/AIAssistant-BfG2X4Tt.js","assets/WindowScroller-D1vhakJR.js","assets/defineProperty-CzrzvwXk.js","assets/slicedToArray-w3y9pYby.js","assets/Playground-D73bkvHo.js","assets/Diagnostics-P6-RbaiJ.js"])))=>i.map(i=>d[i]);
import{t as uo,c as Ci,j as y,m as at,S as Wc,M as Xc,H as fo,B as gs,a as Kc,D as br,b as ns,L as _s,U as ho,d as Yc,E as po,e as Gc,A as zr,P as Zc,f as Jc,X as Br,g as Qc,h as Sn,i as eu,C as Tr,T as zn,k as ss,l as an,n as is,o as Ls,p as Ni,q as En,G as mo,Z as go,r as tu,s as un,u as bo,F as on,v as rn,w as Ar,x as Ur,y as ci,R as Mr,z as zt,I as na,J as ru,K as ui,N as Fs,O as Un,Q as Yr,V as Bs,W as sa,Y as nu,_ as di,$ as yo,a0 as su,a1 as Hr,a2 as ia,a3 as iu,a4 as au,a5 as ou,a6 as lu,a7 as cu,a8 as uu,a9 as du,aa as fu,ab as hu,ac as pu}from"./ui-DzcvAssw.js";import{b as mu,g as Ti,a as W,R as Ai,u as Tn,c as Xr,L as dn,d as lr,e as kt,f as Mi,h as gu,N as as,i as bu,j as yu,B as vu}from"./vendor-CfX-nNg5.js";(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))h(p);new MutationObserver(p=>{for(const c of p)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function e(p){const c={};return p.integrity&&(c.integrity=p.integrity),p.referrerPolicy&&(c.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?c.credentials="include":p.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(p){if(p.ep)return;p.ep=!0;const c=e(p);fetch(p.href,c)}})();var Hn={},aa;function xu(){if(aa)return Hn;aa=1;var S=mu();return Hn.createRoot=S.createRoot,Hn.hydrateRoot=S.hydrateRoot,Hn}var wu=xu();const _u=Ti(wu),ku="modulepreload",Su=function(S){return"/"+S},oa={},ks=function(_,e,h){let p=Promise.resolve();if(e&&e.length>0){let s=function(t){return Promise.all(t.map(n=>Promise.resolve(n).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),r=i?.nonce||i?.getAttribute("nonce");p=s(e.map(t=>{if(t=Su(t),t in oa)return;oa[t]=!0;const n=t.endsWith(".css"),l=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":ku,n||(a.as="script"),a.crossOrigin="",a.href=t,r&&a.setAttribute("nonce",r),document.head.appendChild(a),n)return new Promise((o,d)=>{a.addEventListener("load",o),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${t}`)))})}))}function c(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return p.then(s=>{for(const i of s||[])i.status==="rejected"&&c(i.reason);return _().catch(c)})};function la(...S){return uo(Ci(S))}const vo=W.createContext(void 0),Gr="system";function ju({children:S,defaultTheme:_="light",storageKey:e="churnvision-theme"}){const h=`${e}-source`,p=W.useCallback(()=>{if(typeof window>"u")return{theme:_,source:Gr};try{const a=localStorage.getItem(e),d=(localStorage.getItem(h)??Gr)==="user"?"user":Gr;return a==="light"||a==="dark"?d==="system"&&typeof window.matchMedia=="function"?{theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",source:"system"}:{theme:a,source:d}:typeof window.matchMedia=="function"?{theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":_,source:Gr}:{theme:_,source:Gr}}catch{return{theme:_,source:Gr}}},[_,h,e]),[c,s]=W.useState(()=>p()),i=W.useRef(c);W.useEffect(()=>{i.current=c},[c]);const r=W.useCallback(a=>{if(typeof document>"u")return;const o=document.documentElement;o.classList.remove("light","dark"),o.classList.add(a),o.style.colorScheme=a},[]);W.useEffect(()=>{r(c.theme)},[r,c.theme]),W.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(e,c.theme),localStorage.setItem(h,c.source)}catch{}},[h,e,c.source,c.theme]),W.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const a=window.matchMedia("(prefers-color-scheme: dark)"),o=f=>{i.current.source==="system"&&s({theme:f?"dark":"light",source:"system"})};o(a.matches);const d=f=>{o(f.matches)};return typeof a.addEventListener=="function"?a.addEventListener("change",d):typeof a.addListener=="function"&&a.addListener(d),()=>{typeof a.removeEventListener=="function"?a.removeEventListener("change",d):typeof a.removeListener=="function"&&a.removeListener(d)}},[]);const t=W.useCallback(a=>{s({theme:a,source:"user"})},[]),n=W.useCallback(()=>{s(a=>({theme:a.theme==="light"?"dark":"light",source:"user"}))},[]),l=W.useMemo(()=>({theme:c.theme,toggleTheme:n,setTheme:t}),[t,c.theme,n]);return y.jsx(vo.Provider,{value:l,children:S})}const Eu=()=>{const S=W.useContext(vo);if(S===void 0)throw new Error("useTheme must be used within a ThemeProvider");return S};function xo({className:S=""}){const{theme:_,toggleTheme:e}=Eu(),h=_==="dark"?"bg-surface-muted hover:bg-surface-elevated text-primary-foreground":"bg-surface-subtle hover:bg-surface-muted text-primary";return y.jsxs(at.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:`relative p-2 rounded-md border border-border transition-all duration-300 overflow-hidden focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background ${h} ${S}`,"aria-label":_==="dark"?"Switch to light mode":"Switch to dark mode",children:[y.jsx(at.div,{className:"absolute inset-0 z-0",initial:!1,animate:{backgroundColor:_==="dark"?"hsl(var(--surface-muted) / 0.85)":"hsl(var(--surface-subtle) / 0.85)"},transition:{duration:.3}}),y.jsx(at.div,{className:"relative z-10",initial:!1,animate:{rotate:_==="dark"?0:180,scale:[1,1.2,1]},transition:{rotate:{duration:.5,ease:[.4,0,.2,1]},scale:{duration:.5,times:[0,.5,1]}},children:y.jsx(Cu,{theme:_})}),y.jsx(at.div,{className:"absolute inset-0 rounded-md z-0",initial:!1,animate:{boxShadow:_==="dark"?"0 0 12px 2px hsl(var(--primary) / 0.3)":"0 0 12px 2px hsl(var(--primary) / 0.18)"},transition:{duration:.3}})]})}function Cu({theme:S}){return y.jsx("div",{className:"relative h-5 w-5 flex items-center justify-center",children:S==="dark"?y.jsx(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:y.jsx(Wc,{className:"h-5 w-5"})}):y.jsx(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},children:y.jsx(Xc,{className:"h-5 w-5"})})})}function wo(S,_){return function(){return S.apply(_,arguments)}}const{toString:Nu}=Object.prototype,{getPrototypeOf:Ri}=Object,{iterator:Ss,toStringTag:_o}=Symbol,js=(S=>_=>{const e=Nu.call(_);return S[e]||(S[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),dr=S=>(S=S.toLowerCase(),_=>js(_)===S),Es=S=>_=>typeof _===S,{isArray:hn}=Array,fn=Es("undefined");function An(S){return S!==null&&!fn(S)&&S.constructor!==null&&!fn(S.constructor)&&nr(S.constructor.isBuffer)&&S.constructor.isBuffer(S)}const ko=dr("ArrayBuffer");function Tu(S){let _;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?_=ArrayBuffer.isView(S):_=S&&S.buffer&&ko(S.buffer),_}const Au=Es("string"),nr=Es("function"),So=Es("number"),Mn=S=>S!==null&&typeof S=="object",Mu=S=>S===!0||S===!1,os=S=>{if(js(S)!=="object")return!1;const _=Ri(S);return(_===null||_===Object.prototype||Object.getPrototypeOf(_)===null)&&!(_o in S)&&!(Ss in S)},Ru=S=>{if(!Mn(S)||An(S))return!1;try{return Object.keys(S).length===0&&Object.getPrototypeOf(S)===Object.prototype}catch{return!1}},Ou=dr("Date"),Iu=dr("File"),Pu=dr("Blob"),Du=dr("FileList"),Lu=S=>Mn(S)&&nr(S.pipe),Fu=S=>{let _;return S&&(typeof FormData=="function"&&S instanceof FormData||nr(S.append)&&((_=js(S))==="formdata"||_==="object"&&nr(S.toString)&&S.toString()==="[object FormData]"))},Bu=dr("URLSearchParams"),[$u,zu,Uu,Hu]=["ReadableStream","Request","Response","Headers"].map(dr),Vu=S=>S.trim?S.trim():S.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rn(S,_,{allOwnKeys:e=!1}={}){if(S===null||typeof S>"u")return;let h,p;if(typeof S!="object"&&(S=[S]),hn(S))for(h=0,p=S.length;h<p;h++)_.call(null,S[h],h,S);else{if(An(S))return;const c=e?Object.getOwnPropertyNames(S):Object.keys(S),s=c.length;let i;for(h=0;h<s;h++)i=c[h],_.call(null,S[i],i,S)}}function jo(S,_){if(An(S))return null;_=_.toLowerCase();const e=Object.keys(S);let h=e.length,p;for(;h-- >0;)if(p=e[h],_===p.toLowerCase())return p;return null}const Fr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Eo=S=>!fn(S)&&S!==Fr;function fi(){const{caseless:S,skipUndefined:_}=Eo(this)&&this||{},e={},h=(p,c)=>{const s=S&&jo(e,c)||c;os(e[s])&&os(p)?e[s]=fi(e[s],p):os(p)?e[s]=fi({},p):hn(p)?e[s]=p.slice():(!_||!fn(p))&&(e[s]=p)};for(let p=0,c=arguments.length;p<c;p++)arguments[p]&&Rn(arguments[p],h);return e}const qu=(S,_,e,{allOwnKeys:h}={})=>(Rn(_,(p,c)=>{e&&nr(p)?S[c]=wo(p,e):S[c]=p},{allOwnKeys:h}),S),Wu=S=>(S.charCodeAt(0)===65279&&(S=S.slice(1)),S),Xu=(S,_,e,h)=>{S.prototype=Object.create(_.prototype,h),S.prototype.constructor=S,Object.defineProperty(S,"super",{value:_.prototype}),e&&Object.assign(S.prototype,e)},Ku=(S,_,e,h)=>{let p,c,s;const i={};if(_=_||{},S==null)return _;do{for(p=Object.getOwnPropertyNames(S),c=p.length;c-- >0;)s=p[c],(!h||h(s,S,_))&&!i[s]&&(_[s]=S[s],i[s]=!0);S=e!==!1&&Ri(S)}while(S&&(!e||e(S,_))&&S!==Object.prototype);return _},Yu=(S,_,e)=>{S=String(S),(e===void 0||e>S.length)&&(e=S.length),e-=_.length;const h=S.indexOf(_,e);return h!==-1&&h===e},Gu=S=>{if(!S)return null;if(hn(S))return S;let _=S.length;if(!So(_))return null;const e=new Array(_);for(;_-- >0;)e[_]=S[_];return e},Zu=(S=>_=>S&&_ instanceof S)(typeof Uint8Array<"u"&&Ri(Uint8Array)),Ju=(S,_)=>{const h=(S&&S[Ss]).call(S);let p;for(;(p=h.next())&&!p.done;){const c=p.value;_.call(S,c[0],c[1])}},Qu=(S,_)=>{let e;const h=[];for(;(e=S.exec(_))!==null;)h.push(e);return h},ed=dr("HTMLFormElement"),td=S=>S.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,h,p){return h.toUpperCase()+p}),ca=(({hasOwnProperty:S})=>(_,e)=>S.call(_,e))(Object.prototype),rd=dr("RegExp"),Co=(S,_)=>{const e=Object.getOwnPropertyDescriptors(S),h={};Rn(e,(p,c)=>{let s;(s=_(p,c,S))!==!1&&(h[c]=s||p)}),Object.defineProperties(S,h)},nd=S=>{Co(S,(_,e)=>{if(nr(S)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const h=S[e];if(nr(h)){if(_.enumerable=!1,"writable"in _){_.writable=!1;return}_.set||(_.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},sd=(S,_)=>{const e={},h=p=>{p.forEach(c=>{e[c]=!0})};return hn(S)?h(S):h(String(S).split(_)),e},id=()=>{},ad=(S,_)=>S!=null&&Number.isFinite(S=+S)?S:_;function od(S){return!!(S&&nr(S.append)&&S[_o]==="FormData"&&S[Ss])}const ld=S=>{const _=new Array(10),e=(h,p)=>{if(Mn(h)){if(_.indexOf(h)>=0)return;if(An(h))return h;if(!("toJSON"in h)){_[p]=h;const c=hn(h)?[]:{};return Rn(h,(s,i)=>{const r=e(s,p+1);!fn(r)&&(c[i]=r)}),_[p]=void 0,c}}return h};return e(S,0)},cd=dr("AsyncFunction"),ud=S=>S&&(Mn(S)||nr(S))&&nr(S.then)&&nr(S.catch),No=((S,_)=>S?setImmediate:_?((e,h)=>(Fr.addEventListener("message",({source:p,data:c})=>{p===Fr&&c===e&&h.length&&h.shift()()},!1),p=>{h.push(p),Fr.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",nr(Fr.postMessage)),dd=typeof queueMicrotask<"u"?queueMicrotask.bind(Fr):typeof process<"u"&&process.nextTick||No,fd=S=>S!=null&&nr(S[Ss]),me={isArray:hn,isArrayBuffer:ko,isBuffer:An,isFormData:Fu,isArrayBufferView:Tu,isString:Au,isNumber:So,isBoolean:Mu,isObject:Mn,isPlainObject:os,isEmptyObject:Ru,isReadableStream:$u,isRequest:zu,isResponse:Uu,isHeaders:Hu,isUndefined:fn,isDate:Ou,isFile:Iu,isBlob:Pu,isRegExp:rd,isFunction:nr,isStream:Lu,isURLSearchParams:Bu,isTypedArray:Zu,isFileList:Du,forEach:Rn,merge:fi,extend:qu,trim:Vu,stripBOM:Wu,inherits:Xu,toFlatObject:Ku,kindOf:js,kindOfTest:dr,endsWith:Yu,toArray:Gu,forEachEntry:Ju,matchAll:Qu,isHTMLForm:ed,hasOwnProperty:ca,hasOwnProp:ca,reduceDescriptors:Co,freezeMethods:nd,toObjectSet:sd,toCamelCase:td,noop:id,toFiniteNumber:ad,findKey:jo,global:Fr,isContextDefined:Eo,isSpecCompliantForm:od,toJSONObject:ld,isAsyncFn:cd,isThenable:ud,setImmediate:No,asap:dd,isIterable:fd};function ft(S,_,e,h,p){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=S,this.name="AxiosError",_&&(this.code=_),e&&(this.config=e),h&&(this.request=h),p&&(this.response=p,this.status=p.status?p.status:null)}me.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}});const To=ft.prototype,Ao={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(S=>{Ao[S]={value:S}});Object.defineProperties(ft,Ao);Object.defineProperty(To,"isAxiosError",{value:!0});ft.from=(S,_,e,h,p,c)=>{const s=Object.create(To);me.toFlatObject(S,s,function(n){return n!==Error.prototype},t=>t!=="isAxiosError");const i=S&&S.message?S.message:"Error",r=_==null&&S?S.code:_;return ft.call(s,i,r,e,h,p),S&&s.cause==null&&Object.defineProperty(s,"cause",{value:S,configurable:!0}),s.name=S&&S.name||"Error",c&&Object.assign(s,c),s};const hd=null;function hi(S){return me.isPlainObject(S)||me.isArray(S)}function Mo(S){return me.endsWith(S,"[]")?S.slice(0,-2):S}function ua(S,_,e){return S?S.concat(_).map(function(p,c){return p=Mo(p),!e&&c?"["+p+"]":p}).join(e?".":""):_}function pd(S){return me.isArray(S)&&!S.some(hi)}const md=me.toFlatObject(me,{},null,function(_){return/^is[A-Z]/.test(_)});function Cs(S,_,e){if(!me.isObject(S))throw new TypeError("target must be an object");_=_||new FormData,e=me.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,u){return!me.isUndefined(u[f])});const h=e.metaTokens,p=e.visitor||n,c=e.dots,s=e.indexes,r=(e.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(_);if(!me.isFunction(p))throw new TypeError("visitor must be a function");function t(d){if(d===null)return"";if(me.isDate(d))return d.toISOString();if(me.isBoolean(d))return d.toString();if(!r&&me.isBlob(d))throw new ft("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(d)||me.isTypedArray(d)?r&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function n(d,f,u){let g=d;if(d&&!u&&typeof d=="object"){if(me.endsWith(f,"{}"))f=h?f:f.slice(0,-2),d=JSON.stringify(d);else if(me.isArray(d)&&pd(d)||(me.isFileList(d)||me.endsWith(f,"[]"))&&(g=me.toArray(d)))return f=Mo(f),g.forEach(function(k,E){!(me.isUndefined(k)||k===null)&&_.append(s===!0?ua([f],E,c):s===null?f:f+"[]",t(k))}),!1}return hi(d)?!0:(_.append(ua(u,f,c),t(d)),!1)}const l=[],a=Object.assign(md,{defaultVisitor:n,convertValue:t,isVisitable:hi});function o(d,f){if(!me.isUndefined(d)){if(l.indexOf(d)!==-1)throw Error("Circular reference detected in "+f.join("."));l.push(d),me.forEach(d,function(g,m){(!(me.isUndefined(g)||g===null)&&p.call(_,g,me.isString(m)?m.trim():m,f,a))===!0&&o(g,f?f.concat(m):[m])}),l.pop()}}if(!me.isObject(S))throw new TypeError("data must be an object");return o(S),_}function da(S){const _={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(S).replace(/[!'()~]|%20|%00/g,function(h){return _[h]})}function Oi(S,_){this._pairs=[],S&&Cs(S,this,_)}const Ro=Oi.prototype;Ro.append=function(_,e){this._pairs.push([_,e])};Ro.toString=function(_){const e=_?function(h){return _.call(this,h,da)}:da;return this._pairs.map(function(p){return e(p[0])+"="+e(p[1])},"").join("&")};function gd(S){return encodeURIComponent(S).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Oo(S,_,e){if(!_)return S;const h=e&&e.encode||gd;me.isFunction(e)&&(e={serialize:e});const p=e&&e.serialize;let c;if(p?c=p(_,e):c=me.isURLSearchParams(_)?_.toString():new Oi(_,e).toString(h),c){const s=S.indexOf("#");s!==-1&&(S=S.slice(0,s)),S+=(S.indexOf("?")===-1?"?":"&")+c}return S}class fa{constructor(){this.handlers=[]}use(_,e,h){return this.handlers.push({fulfilled:_,rejected:e,synchronous:h?h.synchronous:!1,runWhen:h?h.runWhen:null}),this.handlers.length-1}eject(_){this.handlers[_]&&(this.handlers[_]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(_){me.forEach(this.handlers,function(h){h!==null&&_(h)})}}const Io={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bd=typeof URLSearchParams<"u"?URLSearchParams:Oi,yd=typeof FormData<"u"?FormData:null,vd=typeof Blob<"u"?Blob:null,xd={isBrowser:!0,classes:{URLSearchParams:bd,FormData:yd,Blob:vd},protocols:["http","https","file","blob","url","data"]},Ii=typeof window<"u"&&typeof document<"u",pi=typeof navigator=="object"&&navigator||void 0,wd=Ii&&(!pi||["ReactNative","NativeScript","NS"].indexOf(pi.product)<0),_d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kd=Ii&&window.location.href||"http://localhost",Sd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ii,hasStandardBrowserEnv:wd,hasStandardBrowserWebWorkerEnv:_d,navigator:pi,origin:kd},Symbol.toStringTag,{value:"Module"})),Kt={...Sd,...xd};function jd(S,_){return Cs(S,new Kt.classes.URLSearchParams,{visitor:function(e,h,p,c){return Kt.isNode&&me.isBuffer(e)?(this.append(h,e.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},..._})}function Ed(S){return me.matchAll(/\w+|\[(\w*)]/g,S).map(_=>_[0]==="[]"?"":_[1]||_[0])}function Cd(S){const _={},e=Object.keys(S);let h;const p=e.length;let c;for(h=0;h<p;h++)c=e[h],_[c]=S[c];return _}function Po(S){function _(e,h,p,c){let s=e[c++];if(s==="__proto__")return!0;const i=Number.isFinite(+s),r=c>=e.length;return s=!s&&me.isArray(p)?p.length:s,r?(me.hasOwnProp(p,s)?p[s]=[p[s],h]:p[s]=h,!i):((!p[s]||!me.isObject(p[s]))&&(p[s]=[]),_(e,h,p[s],c)&&me.isArray(p[s])&&(p[s]=Cd(p[s])),!i)}if(me.isFormData(S)&&me.isFunction(S.entries)){const e={};return me.forEachEntry(S,(h,p)=>{_(Ed(h),p,e,0)}),e}return null}function Nd(S,_,e){if(me.isString(S))try{return(_||JSON.parse)(S),me.trim(S)}catch(h){if(h.name!=="SyntaxError")throw h}return(e||JSON.stringify)(S)}const On={transitional:Io,adapter:["xhr","http","fetch"],transformRequest:[function(_,e){const h=e.getContentType()||"",p=h.indexOf("application/json")>-1,c=me.isObject(_);if(c&&me.isHTMLForm(_)&&(_=new FormData(_)),me.isFormData(_))return p?JSON.stringify(Po(_)):_;if(me.isArrayBuffer(_)||me.isBuffer(_)||me.isStream(_)||me.isFile(_)||me.isBlob(_)||me.isReadableStream(_))return _;if(me.isArrayBufferView(_))return _.buffer;if(me.isURLSearchParams(_))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),_.toString();let i;if(c){if(h.indexOf("application/x-www-form-urlencoded")>-1)return jd(_,this.formSerializer).toString();if((i=me.isFileList(_))||h.indexOf("multipart/form-data")>-1){const r=this.env&&this.env.FormData;return Cs(i?{"files[]":_}:_,r&&new r,this.formSerializer)}}return c||p?(e.setContentType("application/json",!1),Nd(_)):_}],transformResponse:[function(_){const e=this.transitional||On.transitional,h=e&&e.forcedJSONParsing,p=this.responseType==="json";if(me.isResponse(_)||me.isReadableStream(_))return _;if(_&&me.isString(_)&&(h&&!this.responseType||p)){const s=!(e&&e.silentJSONParsing)&&p;try{return JSON.parse(_,this.parseReviver)}catch(i){if(s)throw i.name==="SyntaxError"?ft.from(i,ft.ERR_BAD_RESPONSE,this,null,this.response):i}}return _}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kt.classes.FormData,Blob:Kt.classes.Blob},validateStatus:function(_){return _>=200&&_<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],S=>{On.headers[S]={}});const Td=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ad=S=>{const _={};let e,h,p;return S&&S.split(`
`).forEach(function(s){p=s.indexOf(":"),e=s.substring(0,p).trim().toLowerCase(),h=s.substring(p+1).trim(),!(!e||_[e]&&Td[e])&&(e==="set-cookie"?_[e]?_[e].push(h):_[e]=[h]:_[e]=_[e]?_[e]+", "+h:h)}),_},ha=Symbol("internals");function mn(S){return S&&String(S).trim().toLowerCase()}function ls(S){return S===!1||S==null?S:me.isArray(S)?S.map(ls):String(S)}function Md(S){const _=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let h;for(;h=e.exec(S);)_[h[1]]=h[2];return _}const Rd=S=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(S.trim());function $s(S,_,e,h,p){if(me.isFunction(h))return h.call(this,_,e);if(p&&(_=e),!!me.isString(_)){if(me.isString(h))return _.indexOf(h)!==-1;if(me.isRegExp(h))return h.test(_)}}function Od(S){return S.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(_,e,h)=>e.toUpperCase()+h)}function Id(S,_){const e=me.toCamelCase(" "+_);["get","set","has"].forEach(h=>{Object.defineProperty(S,h+e,{value:function(p,c,s){return this[h].call(this,_,p,c,s)},configurable:!0})})}let sr=class{constructor(_){_&&this.set(_)}set(_,e,h){const p=this;function c(i,r,t){const n=mn(r);if(!n)throw new Error("header name must be a non-empty string");const l=me.findKey(p,n);(!l||p[l]===void 0||t===!0||t===void 0&&p[l]!==!1)&&(p[l||r]=ls(i))}const s=(i,r)=>me.forEach(i,(t,n)=>c(t,n,r));if(me.isPlainObject(_)||_ instanceof this.constructor)s(_,e);else if(me.isString(_)&&(_=_.trim())&&!Rd(_))s(Ad(_),e);else if(me.isObject(_)&&me.isIterable(_)){let i={},r,t;for(const n of _){if(!me.isArray(n))throw TypeError("Object iterator must return a key-value pair");i[t=n[0]]=(r=i[t])?me.isArray(r)?[...r,n[1]]:[r,n[1]]:n[1]}s(i,e)}else _!=null&&c(e,_,h);return this}get(_,e){if(_=mn(_),_){const h=me.findKey(this,_);if(h){const p=this[h];if(!e)return p;if(e===!0)return Md(p);if(me.isFunction(e))return e.call(this,p,h);if(me.isRegExp(e))return e.exec(p);throw new TypeError("parser must be boolean|regexp|function")}}}has(_,e){if(_=mn(_),_){const h=me.findKey(this,_);return!!(h&&this[h]!==void 0&&(!e||$s(this,this[h],h,e)))}return!1}delete(_,e){const h=this;let p=!1;function c(s){if(s=mn(s),s){const i=me.findKey(h,s);i&&(!e||$s(h,h[i],i,e))&&(delete h[i],p=!0)}}return me.isArray(_)?_.forEach(c):c(_),p}clear(_){const e=Object.keys(this);let h=e.length,p=!1;for(;h--;){const c=e[h];(!_||$s(this,this[c],c,_,!0))&&(delete this[c],p=!0)}return p}normalize(_){const e=this,h={};return me.forEach(this,(p,c)=>{const s=me.findKey(h,c);if(s){e[s]=ls(p),delete e[c];return}const i=_?Od(c):String(c).trim();i!==c&&delete e[c],e[i]=ls(p),h[i]=!0}),this}concat(..._){return this.constructor.concat(this,..._)}toJSON(_){const e=Object.create(null);return me.forEach(this,(h,p)=>{h!=null&&h!==!1&&(e[p]=_&&me.isArray(h)?h.join(", "):h)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([_,e])=>_+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(_){return _ instanceof this?_:new this(_)}static concat(_,...e){const h=new this(_);return e.forEach(p=>h.set(p)),h}static accessor(_){const h=(this[ha]=this[ha]={accessors:{}}).accessors,p=this.prototype;function c(s){const i=mn(s);h[i]||(Id(p,s),h[i]=!0)}return me.isArray(_)?_.forEach(c):c(_),this}};sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(sr.prototype,({value:S},_)=>{let e=_[0].toUpperCase()+_.slice(1);return{get:()=>S,set(h){this[e]=h}}});me.freezeMethods(sr);function zs(S,_){const e=this||On,h=_||e,p=sr.from(h.headers);let c=h.data;return me.forEach(S,function(i){c=i.call(e,c,p.normalize(),_?_.status:void 0)}),p.normalize(),c}function Do(S){return!!(S&&S.__CANCEL__)}function pn(S,_,e){ft.call(this,S??"canceled",ft.ERR_CANCELED,_,e),this.name="CanceledError"}me.inherits(pn,ft,{__CANCEL__:!0});function Lo(S,_,e){const h=e.config.validateStatus;!e.status||!h||h(e.status)?S(e):_(new ft("Request failed with status code "+e.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Pd(S){const _=/^([-+\w]{1,25})(:?\/\/|:)/.exec(S);return _&&_[1]||""}function Dd(S,_){S=S||10;const e=new Array(S),h=new Array(S);let p=0,c=0,s;return _=_!==void 0?_:1e3,function(r){const t=Date.now(),n=h[c];s||(s=t),e[p]=r,h[p]=t;let l=c,a=0;for(;l!==p;)a+=e[l++],l=l%S;if(p=(p+1)%S,p===c&&(c=(c+1)%S),t-s<_)return;const o=n&&t-n;return o?Math.round(a*1e3/o):void 0}}function Ld(S,_){let e=0,h=1e3/_,p,c;const s=(t,n=Date.now())=>{e=n,p=null,c&&(clearTimeout(c),c=null),S(...t)};return[(...t)=>{const n=Date.now(),l=n-e;l>=h?s(t,n):(p=t,c||(c=setTimeout(()=>{c=null,s(p)},h-l)))},()=>p&&s(p)]}const bs=(S,_,e=3)=>{let h=0;const p=Dd(50,250);return Ld(c=>{const s=c.loaded,i=c.lengthComputable?c.total:void 0,r=s-h,t=p(r),n=s<=i;h=s;const l={loaded:s,total:i,progress:i?s/i:void 0,bytes:r,rate:t||void 0,estimated:t&&i&&n?(i-s)/t:void 0,event:c,lengthComputable:i!=null,[_?"download":"upload"]:!0};S(l)},e)},pa=(S,_)=>{const e=S!=null;return[h=>_[0]({lengthComputable:e,total:S,loaded:h}),_[1]]},ma=S=>(..._)=>me.asap(()=>S(..._)),Fd=Kt.hasStandardBrowserEnv?((S,_)=>e=>(e=new URL(e,Kt.origin),S.protocol===e.protocol&&S.host===e.host&&(_||S.port===e.port)))(new URL(Kt.origin),Kt.navigator&&/(msie|trident)/i.test(Kt.navigator.userAgent)):()=>!0,Bd=Kt.hasStandardBrowserEnv?{write(S,_,e,h,p,c,s){if(typeof document>"u")return;const i=[`${S}=${encodeURIComponent(_)}`];me.isNumber(e)&&i.push(`expires=${new Date(e).toUTCString()}`),me.isString(h)&&i.push(`path=${h}`),me.isString(p)&&i.push(`domain=${p}`),c===!0&&i.push("secure"),me.isString(s)&&i.push(`SameSite=${s}`),document.cookie=i.join("; ")},read(S){if(typeof document>"u")return null;const _=document.cookie.match(new RegExp("(?:^|; )"+S+"=([^;]*)"));return _?decodeURIComponent(_[1]):null},remove(S){this.write(S,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function $d(S){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(S)}function zd(S,_){return _?S.replace(/\/?\/$/,"")+"/"+_.replace(/^\/+/,""):S}function Fo(S,_,e){let h=!$d(_);return S&&(h||e==!1)?zd(S,_):_}const ga=S=>S instanceof sr?{...S}:S;function Vr(S,_){_=_||{};const e={};function h(t,n,l,a){return me.isPlainObject(t)&&me.isPlainObject(n)?me.merge.call({caseless:a},t,n):me.isPlainObject(n)?me.merge({},n):me.isArray(n)?n.slice():n}function p(t,n,l,a){if(me.isUndefined(n)){if(!me.isUndefined(t))return h(void 0,t,l,a)}else return h(t,n,l,a)}function c(t,n){if(!me.isUndefined(n))return h(void 0,n)}function s(t,n){if(me.isUndefined(n)){if(!me.isUndefined(t))return h(void 0,t)}else return h(void 0,n)}function i(t,n,l){if(l in _)return h(t,n);if(l in S)return h(void 0,t)}const r={url:c,method:c,data:c,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(t,n,l)=>p(ga(t),ga(n),l,!0)};return me.forEach(Object.keys({...S,..._}),function(n){const l=r[n]||p,a=l(S[n],_[n],n);me.isUndefined(a)&&l!==i||(e[n]=a)}),e}const Bo=S=>{const _=Vr({},S);let{data:e,withXSRFToken:h,xsrfHeaderName:p,xsrfCookieName:c,headers:s,auth:i}=_;if(_.headers=s=sr.from(s),_.url=Oo(Fo(_.baseURL,_.url,_.allowAbsoluteUrls),S.params,S.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),me.isFormData(e)){if(Kt.hasStandardBrowserEnv||Kt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(me.isFunction(e.getHeaders)){const r=e.getHeaders(),t=["content-type","content-length"];Object.entries(r).forEach(([n,l])=>{t.includes(n.toLowerCase())&&s.set(n,l)})}}if(Kt.hasStandardBrowserEnv&&(h&&me.isFunction(h)&&(h=h(_)),h||h!==!1&&Fd(_.url))){const r=p&&c&&Bd.read(c);r&&s.set(p,r)}return _},Ud=typeof XMLHttpRequest<"u",Hd=Ud&&function(S){return new Promise(function(e,h){const p=Bo(S);let c=p.data;const s=sr.from(p.headers).normalize();let{responseType:i,onUploadProgress:r,onDownloadProgress:t}=p,n,l,a,o,d;function f(){o&&o(),d&&d(),p.cancelToken&&p.cancelToken.unsubscribe(n),p.signal&&p.signal.removeEventListener("abort",n)}let u=new XMLHttpRequest;u.open(p.method.toUpperCase(),p.url,!0),u.timeout=p.timeout;function g(){if(!u)return;const k=sr.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),A={data:!i||i==="text"||i==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:k,config:S,request:u};Lo(function(z){e(z),f()},function(z){h(z),f()},A),u=null}"onloadend"in u?u.onloadend=g:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(g)},u.onabort=function(){u&&(h(new ft("Request aborted",ft.ECONNABORTED,S,u)),u=null)},u.onerror=function(E){const A=E&&E.message?E.message:"Network Error",L=new ft(A,ft.ERR_NETWORK,S,u);L.event=E||null,h(L),u=null},u.ontimeout=function(){let E=p.timeout?"timeout of "+p.timeout+"ms exceeded":"timeout exceeded";const A=p.transitional||Io;p.timeoutErrorMessage&&(E=p.timeoutErrorMessage),h(new ft(E,A.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,S,u)),u=null},c===void 0&&s.setContentType(null),"setRequestHeader"in u&&me.forEach(s.toJSON(),function(E,A){u.setRequestHeader(A,E)}),me.isUndefined(p.withCredentials)||(u.withCredentials=!!p.withCredentials),i&&i!=="json"&&(u.responseType=p.responseType),t&&([a,d]=bs(t,!0),u.addEventListener("progress",a)),r&&u.upload&&([l,o]=bs(r),u.upload.addEventListener("progress",l),u.upload.addEventListener("loadend",o)),(p.cancelToken||p.signal)&&(n=k=>{u&&(h(!k||k.type?new pn(null,S,u):k),u.abort(),u=null)},p.cancelToken&&p.cancelToken.subscribe(n),p.signal&&(p.signal.aborted?n():p.signal.addEventListener("abort",n)));const m=Pd(p.url);if(m&&Kt.protocols.indexOf(m)===-1){h(new ft("Unsupported protocol "+m+":",ft.ERR_BAD_REQUEST,S));return}u.send(c||null)})},Vd=(S,_)=>{const{length:e}=S=S?S.filter(Boolean):[];if(_||e){let h=new AbortController,p;const c=function(t){if(!p){p=!0,i();const n=t instanceof Error?t:this.reason;h.abort(n instanceof ft?n:new pn(n instanceof Error?n.message:n))}};let s=_&&setTimeout(()=>{s=null,c(new ft(`timeout ${_} of ms exceeded`,ft.ETIMEDOUT))},_);const i=()=>{S&&(s&&clearTimeout(s),s=null,S.forEach(t=>{t.unsubscribe?t.unsubscribe(c):t.removeEventListener("abort",c)}),S=null)};S.forEach(t=>t.addEventListener("abort",c));const{signal:r}=h;return r.unsubscribe=()=>me.asap(i),r}},qd=function*(S,_){let e=S.byteLength;if(e<_){yield S;return}let h=0,p;for(;h<e;)p=h+_,yield S.slice(h,p),h=p},Wd=async function*(S,_){for await(const e of Xd(S))yield*qd(e,_)},Xd=async function*(S){if(S[Symbol.asyncIterator]){yield*S;return}const _=S.getReader();try{for(;;){const{done:e,value:h}=await _.read();if(e)break;yield h}}finally{await _.cancel()}},ba=(S,_,e,h)=>{const p=Wd(S,_);let c=0,s,i=r=>{s||(s=!0,h&&h(r))};return new ReadableStream({async pull(r){try{const{done:t,value:n}=await p.next();if(t){i(),r.close();return}let l=n.byteLength;if(e){let a=c+=l;e(a)}r.enqueue(new Uint8Array(n))}catch(t){throw i(t),t}},cancel(r){return i(r),p.return()}},{highWaterMark:2})},ya=64*1024,{isFunction:Vn}=me,Kd=(({Request:S,Response:_})=>({Request:S,Response:_}))(me.global),{ReadableStream:va,TextEncoder:xa}=me.global,wa=(S,..._)=>{try{return!!S(..._)}catch{return!1}},Yd=S=>{S=me.merge.call({skipUndefined:!0},Kd,S);const{fetch:_,Request:e,Response:h}=S,p=_?Vn(_):typeof fetch=="function",c=Vn(e),s=Vn(h);if(!p)return!1;const i=p&&Vn(va),r=p&&(typeof xa=="function"?(d=>f=>d.encode(f))(new xa):async d=>new Uint8Array(await new e(d).arrayBuffer())),t=c&&i&&wa(()=>{let d=!1;const f=new e(Kt.origin,{body:new va,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!f}),n=s&&i&&wa(()=>me.isReadableStream(new h("").body)),l={stream:n&&(d=>d.body)};p&&["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!l[d]&&(l[d]=(f,u)=>{let g=f&&f[d];if(g)return g.call(f);throw new ft(`Response type '${d}' is not supported`,ft.ERR_NOT_SUPPORT,u)})});const a=async d=>{if(d==null)return 0;if(me.isBlob(d))return d.size;if(me.isSpecCompliantForm(d))return(await new e(Kt.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(me.isArrayBufferView(d)||me.isArrayBuffer(d))return d.byteLength;if(me.isURLSearchParams(d)&&(d=d+""),me.isString(d))return(await r(d)).byteLength},o=async(d,f)=>{const u=me.toFiniteNumber(d.getContentLength());return u??a(f)};return async d=>{let{url:f,method:u,data:g,signal:m,cancelToken:k,timeout:E,onDownloadProgress:A,onUploadProgress:L,responseType:z,headers:R,withCredentials:I="same-origin",fetchOptions:B}=Bo(d),H=_||fetch;z=z?(z+"").toLowerCase():"text";let $=Vd([m,k&&k.toAbortSignal()],E),C=null;const T=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let j;try{if(L&&t&&u!=="get"&&u!=="head"&&(j=await o(R,g))!==0){let P=new e(f,{method:"POST",body:g,duplex:"half"}),D;if(me.isFormData(g)&&(D=P.headers.get("content-type"))&&R.setContentType(D),P.body){const[V,q]=pa(j,bs(ma(L)));g=ba(P.body,ya,V,q)}}me.isString(I)||(I=I?"include":"omit");const b=c&&"credentials"in e.prototype,v={...B,signal:$,method:u.toUpperCase(),headers:R.normalize().toJSON(),body:g,duplex:"half",credentials:b?I:void 0};C=c&&new e(f,v);let x=await(c?H(C,B):H(f,v));const w=n&&(z==="stream"||z==="response");if(n&&(A||w&&T)){const P={};["status","statusText","headers"].forEach(G=>{P[G]=x[G]});const D=me.toFiniteNumber(x.headers.get("content-length")),[V,q]=A&&pa(D,bs(ma(A),!0))||[];x=new h(ba(x.body,ya,V,()=>{q&&q(),T&&T()}),P)}z=z||"text";let N=await l[me.findKey(l,z)||"text"](x,d);return!w&&T&&T(),await new Promise((P,D)=>{Lo(P,D,{data:N,headers:sr.from(x.headers),status:x.status,statusText:x.statusText,config:d,request:C})})}catch(b){throw T&&T(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,d,C),{cause:b.cause||b}):ft.from(b,b&&b.code,d,C)}}},Gd=new Map,$o=S=>{let _=S&&S.env||{};const{fetch:e,Request:h,Response:p}=_,c=[h,p,e];let s=c.length,i=s,r,t,n=Gd;for(;i--;)r=c[i],t=n.get(r),t===void 0&&n.set(r,t=i?new Map:Yd(_)),n=t;return t};$o();const Pi={http:hd,xhr:Hd,fetch:{get:$o}};me.forEach(Pi,(S,_)=>{if(S){try{Object.defineProperty(S,"name",{value:_})}catch{}Object.defineProperty(S,"adapterName",{value:_})}});const _a=S=>`- ${S}`,Zd=S=>me.isFunction(S)||S===null||S===!1;function Jd(S,_){S=me.isArray(S)?S:[S];const{length:e}=S;let h,p;const c={};for(let s=0;s<e;s++){h=S[s];let i;if(p=h,!Zd(h)&&(p=Pi[(i=String(h)).toLowerCase()],p===void 0))throw new ft(`Unknown adapter '${i}'`);if(p&&(me.isFunction(p)||(p=p.get(_))))break;c[i||"#"+s]=p}if(!p){const s=Object.entries(c).map(([r,t])=>`adapter ${r} `+(t===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(_a).join(`
`):" "+_a(s[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return p}const zo={getAdapter:Jd,adapters:Pi};function Us(S){if(S.cancelToken&&S.cancelToken.throwIfRequested(),S.signal&&S.signal.aborted)throw new pn(null,S)}function ka(S){return Us(S),S.headers=sr.from(S.headers),S.data=zs.call(S,S.transformRequest),["post","put","patch"].indexOf(S.method)!==-1&&S.headers.setContentType("application/x-www-form-urlencoded",!1),zo.getAdapter(S.adapter||On.adapter,S)(S).then(function(h){return Us(S),h.data=zs.call(S,S.transformResponse,h),h.headers=sr.from(h.headers),h},function(h){return Do(h)||(Us(S),h&&h.response&&(h.response.data=zs.call(S,S.transformResponse,h.response),h.response.headers=sr.from(h.response.headers))),Promise.reject(h)})}const Uo="1.13.2",Ns={};["object","boolean","number","function","string","symbol"].forEach((S,_)=>{Ns[S]=function(h){return typeof h===S||"a"+(_<1?"n ":" ")+S}});const Sa={};Ns.transitional=function(_,e,h){function p(c,s){return"[Axios v"+Uo+"] Transitional option '"+c+"'"+s+(h?". "+h:"")}return(c,s,i)=>{if(_===!1)throw new ft(p(s," has been removed"+(e?" in "+e:"")),ft.ERR_DEPRECATED);return e&&!Sa[s]&&(Sa[s]=!0,console.warn(p(s," has been deprecated since v"+e+" and will be removed in the near future"))),_?_(c,s,i):!0}};Ns.spelling=function(_){return(e,h)=>(console.warn(`${h} is likely a misspelling of ${_}`),!0)};function Qd(S,_,e){if(typeof S!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const h=Object.keys(S);let p=h.length;for(;p-- >0;){const c=h[p],s=_[c];if(s){const i=S[c],r=i===void 0||s(i,c,S);if(r!==!0)throw new ft("option "+c+" must be "+r,ft.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new ft("Unknown option "+c,ft.ERR_BAD_OPTION)}}const cs={assertOptions:Qd,validators:Ns},mr=cs.validators;let $r=class{constructor(_){this.defaults=_||{},this.interceptors={request:new fa,response:new fa}}async request(_,e){try{return await this._request(_,e)}catch(h){if(h instanceof Error){let p={};Error.captureStackTrace?Error.captureStackTrace(p):p=new Error;const c=p.stack?p.stack.replace(/^.+\n/,""):"";try{h.stack?c&&!String(h.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(h.stack+=`
`+c):h.stack=c}catch{}}throw h}}_request(_,e){typeof _=="string"?(e=e||{},e.url=_):e=_||{},e=Vr(this.defaults,e);const{transitional:h,paramsSerializer:p,headers:c}=e;h!==void 0&&cs.assertOptions(h,{silentJSONParsing:mr.transitional(mr.boolean),forcedJSONParsing:mr.transitional(mr.boolean),clarifyTimeoutError:mr.transitional(mr.boolean)},!1),p!=null&&(me.isFunction(p)?e.paramsSerializer={serialize:p}:cs.assertOptions(p,{encode:mr.function,serialize:mr.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),cs.assertOptions(e,{baseUrl:mr.spelling("baseURL"),withXsrfToken:mr.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=c&&me.merge(c.common,c[e.method]);c&&me.forEach(["delete","get","head","post","put","patch","common"],d=>{delete c[d]}),e.headers=sr.concat(s,c);const i=[];let r=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(r=r&&f.synchronous,i.unshift(f.fulfilled,f.rejected))});const t=[];this.interceptors.response.forEach(function(f){t.push(f.fulfilled,f.rejected)});let n,l=0,a;if(!r){const d=[ka.bind(this),void 0];for(d.unshift(...i),d.push(...t),a=d.length,n=Promise.resolve(e);l<a;)n=n.then(d[l++],d[l++]);return n}a=i.length;let o=e;for(;l<a;){const d=i[l++],f=i[l++];try{o=d(o)}catch(u){f.call(this,u);break}}try{n=ka.call(this,o)}catch(d){return Promise.reject(d)}for(l=0,a=t.length;l<a;)n=n.then(t[l++],t[l++]);return n}getUri(_){_=Vr(this.defaults,_);const e=Fo(_.baseURL,_.url,_.allowAbsoluteUrls);return Oo(e,_.params,_.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(_){$r.prototype[_]=function(e,h){return this.request(Vr(h||{},{method:_,url:e,data:(h||{}).data}))}});me.forEach(["post","put","patch"],function(_){function e(h){return function(c,s,i){return this.request(Vr(i||{},{method:_,headers:h?{"Content-Type":"multipart/form-data"}:{},url:c,data:s}))}}$r.prototype[_]=e(),$r.prototype[_+"Form"]=e(!0)});let ef=class Ho{constructor(_){if(typeof _!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(c){e=c});const h=this;this.promise.then(p=>{if(!h._listeners)return;let c=h._listeners.length;for(;c-- >0;)h._listeners[c](p);h._listeners=null}),this.promise.then=p=>{let c;const s=new Promise(i=>{h.subscribe(i),c=i}).then(p);return s.cancel=function(){h.unsubscribe(c)},s},_(function(c,s,i){h.reason||(h.reason=new pn(c,s,i),e(h.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(_){if(this.reason){_(this.reason);return}this._listeners?this._listeners.push(_):this._listeners=[_]}unsubscribe(_){if(!this._listeners)return;const e=this._listeners.indexOf(_);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const _=new AbortController,e=h=>{_.abort(h)};return this.subscribe(e),_.signal.unsubscribe=()=>this.unsubscribe(e),_.signal}static source(){let _;return{token:new Ho(function(p){_=p}),cancel:_}}};function tf(S){return function(e){return S.apply(null,e)}}function rf(S){return me.isObject(S)&&S.isAxiosError===!0}const mi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mi).forEach(([S,_])=>{mi[_]=S});function Vo(S){const _=new $r(S),e=wo($r.prototype.request,_);return me.extend(e,$r.prototype,_,{allOwnKeys:!0}),me.extend(e,_,null,{allOwnKeys:!0}),e.create=function(p){return Vo(Vr(S,p))},e}const Rt=Vo(On);Rt.Axios=$r;Rt.CanceledError=pn;Rt.CancelToken=ef;Rt.isCancel=Do;Rt.VERSION=Uo;Rt.toFormData=Cs;Rt.AxiosError=ft;Rt.Cancel=Rt.CanceledError;Rt.all=function(_){return Promise.all(_)};Rt.spread=tf;Rt.isAxiosError=rf;Rt.mergeConfig=Vr;Rt.AxiosHeaders=sr;Rt.formToJSON=S=>Po(me.isHTMLForm(S)?new FormData(S):S);Rt.getAdapter=zo.getAdapter;Rt.HttpStatusCode=mi;Rt.default=Rt;const{Axios:hg,AxiosError:pg,CanceledError:mg,isCancel:gg,CancelToken:bg,VERSION:yg,all:vg,Cancel:xg,isAxiosError:wg,spread:_g,toFormData:kg,AxiosHeaders:Sg,HttpStatusCode:jg,formToJSON:Eg,getAdapter:Cg,mergeConfig:Ng}=Rt,et=Rt.create({baseURL:"http://localhost:8000/api/v1",headers:{"Content-Type":"application/json"},withCredentials:!0});et.interceptors.request.use(S=>{const _=localStorage.getItem("access_token");return _&&(S.headers=S.headers||{},S.headers.Authorization=`Bearer ${_}`),S},S=>Promise.reject(S));et.interceptors.response.use(S=>S,async S=>{const _=S.config;if(S.response?.status===401&&!_._retry){_._retry=!0;try{const e=localStorage.getItem("refresh_token");if(e){const h=await Rt.post(`${et.defaults.baseURL}/auth/refresh`,{refresh_token:e}),{access_token:p,refresh_token:c}=h.data;return localStorage.setItem("access_token",p),c&&localStorage.setItem("refresh_token",c),_.headers.Authorization=`Bearer ${p}`,et.request(_)}}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(S)});const nf={starter:["home","data-management","settings"],pro:["home","data-management","settings","ai-assistant"],enterprise:["home","data-management","settings","ai-assistant","playground"]},qo=W.createContext(void 0),sf=({children:S})=>{const[_,e]=W.useState({status:"UNKNOWN",data:null}),[h,p]=W.useState(!0),[c,s]=W.useState(null),[i,r]=W.useState(null),[t,n]=W.useState("starter"),l=W.useCallback(k=>{if(!k)return"starter";if(k.tier){const E=k.tier.toLowerCase();if(["starter","pro","enterprise"].includes(E))return E}if(k.plan){const E=k.plan.toLowerCase();return E.includes("enterprise")||E.includes("corporate")?"enterprise":E.includes("advanced")||E.includes("pro")?"pro":"starter"}if(k.product){const E=k.product.toLowerCase();return E.includes("enterprise")||E.includes("corporate")?"enterprise":E.includes("advanced")||E.includes("pro")?"pro":"starter"}return"starter"},[]);W.useEffect(()=>{const k=l(_.data);n(k),localStorage.setItem("licenseTier",k)},[_.data,l]),W.useEffect(()=>{const k=localStorage.getItem("licenseTier");k&&["starter","pro","enterprise"].includes(k)&&n(k)},[]);const a=W.useCallback(k=>{n(k),localStorage.setItem("licenseTier",k)},[]),o=W.useCallback(k=>nf[t].includes(k),[t]);W.useEffect(()=>{let k=!0;return(async()=>{if(k){p(!0),s(null);try{const A=await et.get("/license/installation-id");if(k&&A.data?.installation_id){const L=A.data.installation_id;r(L),localStorage.setItem("installationId",L);const z=await et.get("/license/status",{params:{installation_id:L}});if(k&&z.data){const{status:R,tier:I,expires_at:B,grace_period_ends:H,is_licensed:$}=z.data;e({status:R||"UNLICENSED",data:{tier:I,expires_at:B,is_licensed:$}})}}}catch(A){k&&(console.error("Error fetching license data:",A),s(A.response?.data?.detail||A.message||"Could not load license information."),e({status:"ERROR",data:null}))}finally{k&&p(!1)}}})(),()=>{k=!1}},[]),W.useEffect(()=>{const k=E=>{const A=E.detail;e({status:"ACTIVE",data:A}),s(null),f()};return window.addEventListener("license:activated",k),()=>{window.removeEventListener("license:activated",k)}},[]);const d=W.useCallback(async k=>{if(!i)return s("Installation ID not available. Cannot activate license."),!1;p(!0),s(null);try{const A=(await et.post("/license/activate",{license_key:k,installation_id:i})).data;return A.success?(e({status:"ACTIVE",data:A.license_data}),s(null),p(!1),!0):(s(A.message||A.error||"Activation failed."),p(!1),!1)}catch(E){const A=E.response?.data?.detail||E.message||"An unexpected error occurred during activation.";return s(A),p(!1),!1}},[i]),f=W.useCallback(async()=>{if(!i){s("Installation ID not available. Cannot refresh status.");return}if(!h){p(!0),s(null);try{const k=await et.get("/license/status",{params:{installation_id:i}});if(k.data){const{status:E,tier:A,expires_at:L,grace_period_ends:z,is_licensed:R}=k.data;e({status:E||"UNLICENSED",data:{tier:A,expires_at:L,is_licensed:R}})}}catch(k){const E=k.response?.data?.detail||k.message||"Failed to refresh license status.";s(E)}finally{p(!1)}}},[i,h]),u=W.useMemo(()=>["ACTIVE","GRACE_PERIOD"].includes(_.status),[_.status]),g=W.useMemo(()=>_.data?.grace_period_ends||void 0,[_.data]),m=W.useMemo(()=>({licenseStatus:_.status,licenseData:_.data,isLoading:h,error:c,isLicensed:u,gracePeriodEnds:g,installationId:i,activateLicense:d,refreshStatus:f,licenseTier:t,hasAccess:o,setLicenseTier:a}),[_,h,c,u,g,i,d,f,t,o,a]);return y.jsx(qo.Provider,{value:m,children:S})},Ts=()=>{const S=W.useContext(qo);if(!S)throw new Error("useLicense must be used within a LicenseProvider");return S},Di=S=>({starter:"Starter",pro:"Professional",enterprise:"Enterprise"})[S],af=S=>({starter:"text-blue-600",pro:"text-purple-600",enterprise:"text-amber-600"})[S],of="http://localhost:8000",gn=`${of}/api/v1/auth`;class lf{TOKEN_KEY="churnvision_access_token";USER_KEY="churnvision_user";async login(_){try{const e=await Rt.post(`${gn}/login`,_),{access_token:h,token_type:p,expires_in:c,user:s}=e.data;return this.setAccessToken(h),this.setUser(s),{tokens:{accessToken:h,tokenType:p,expiresIn:c},user:s}}catch(e){throw Rt.isAxiosError(e)?new Error(e.response?.data?.detail||"Login failed"):e}}async register(_){try{return(await Rt.post(`${gn}/register`,{..._,is_active:_.is_active??!0})).data}catch(e){throw Rt.isAxiosError(e)?new Error(e.response?.data?.detail||"Registration failed"):e}}async logout(){try{const _=this.getAccessToken();_&&await Rt.post(`${gn}/logout`,{},{headers:{Authorization:`Bearer ${_}`}})}catch(_){console.error("Logout error:",_)}finally{this.clearAuth()}}async getCurrentUser(){const _=this.getAccessToken();if(!_)throw new Error("No access token found");try{const e=await Rt.get(`${gn}/me`,{headers:{Authorization:`Bearer ${_}`}});return this.setUser(e.data),e.data}catch(e){throw Rt.isAxiosError(e)&&e.response?.status===401&&this.clearAuth(),e}}async refreshToken(){const _=this.getAccessToken();if(!_)throw new Error("No access token found");try{const e=await Rt.post(`${gn}/refresh`,{},{headers:{Authorization:`Bearer ${_}`}});return this.setAccessToken(e.data.access_token),e.data.access_token}catch(e){throw this.clearAuth(),e}}setAccessToken(_){localStorage.setItem(this.TOKEN_KEY,_)}getAccessToken(){return localStorage.getItem(this.TOKEN_KEY)}setUser(_){localStorage.setItem(this.USER_KEY,JSON.stringify(_))}getUser(){const _=localStorage.getItem(this.USER_KEY);if(!_)return null;try{return JSON.parse(_)}catch{return null}}isAuthenticated(){return!!this.getAccessToken()}clearAuth(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_KEY)}getAuthHeader(){const _=this.getAccessToken();return _?{Authorization:`Bearer ${_}`}:{}}}const _r=new lf,Wo=W.createContext(void 0),In=()=>{const S=W.useContext(Wo);if(!S)throw new Error("useAuth must be used within an AuthProvider");return S},cf=({children:S})=>{const[_,e]=W.useState(null),[h,p]=W.useState(!0);W.useEffect(()=>{(async()=>{const l=_r.getAccessToken(),a=_r.getUser();if(l&&a)try{const o=await _r.getCurrentUser();e(o)}catch(o){console.error("Token validation failed:",o),_r.clearAuth(),e(null)}p(!1)})()},[]);const c=W.useCallback(async n=>{p(!0);try{const{user:l}=await _r.login(n);e(l)}catch(l){throw console.error("Login error:",l),l}finally{p(!1)}},[]),s=W.useCallback(async n=>{p(!0);try{await _r.register(n),await c({username:n.username,password:n.password})}catch(l){throw console.error("Registration error:",l),p(!1),l}},[c]),i=W.useCallback(async()=>{p(!0);try{await _r.logout(),e(null)}catch(n){console.error("Logout error:",n)}finally{p(!1)}},[]),r=W.useCallback(async()=>{try{const n=await _r.getCurrentUser();e(n)}catch(n){console.error("Refresh user error:",n),_r.clearAuth(),e(null)}},[]),t={user:_,isAuthenticated:!!_,isLoading:h,login:c,register:s,logout:i,refreshUser:r};return y.jsx(Wo.Provider,{value:t,children:S})};function ja(S,_){if(typeof S=="function")return S(_);S!=null&&(S.current=_)}function Pn(...S){return _=>{let e=!1;const h=S.map(p=>{const c=ja(p,_);return!e&&typeof c=="function"&&(e=!0),c});if(e)return()=>{for(let p=0;p<h.length;p++){const c=h[p];typeof c=="function"?c():ja(S[p],null)}}}}function er(...S){return W.useCallback(Pn(...S),S)}var uf=Symbol.for("react.lazy"),ys=Ai[" use ".trim().toString()];function df(S){return typeof S=="object"&&S!==null&&"then"in S}function Xo(S){return S!=null&&typeof S=="object"&&"$$typeof"in S&&S.$$typeof===uf&&"_payload"in S&&df(S._payload)}function Li(S){const _=hf(S),e=W.forwardRef((h,p)=>{let{children:c,...s}=h;Xo(c)&&typeof ys=="function"&&(c=ys(c._payload));const i=W.Children.toArray(c),r=i.find(mf);if(r){const t=r.props.children,n=i.map(l=>l===r?W.Children.count(t)>1?W.Children.only(null):W.isValidElement(t)?t.props.children:null:l);return y.jsx(_,{...s,ref:p,children:W.isValidElement(t)?W.cloneElement(t,void 0,n):null})}return y.jsx(_,{...s,ref:p,children:c})});return e.displayName=`${S}.Slot`,e}var ff=Li("Slot");function hf(S){const _=W.forwardRef((e,h)=>{let{children:p,...c}=e;if(Xo(p)&&typeof ys=="function"&&(p=ys(p._payload)),W.isValidElement(p)){const s=bf(p),i=gf(c,p.props);return p.type!==W.Fragment&&(i.ref=h?Pn(h,s):s),W.cloneElement(p,i)}return W.Children.count(p)>1?W.Children.only(null):null});return _.displayName=`${S}.SlotClone`,_}var pf=Symbol("radix.slottable");function mf(S){return W.isValidElement(S)&&typeof S.type=="function"&&"__radixId"in S.type&&S.type.__radixId===pf}function gf(S,_){const e={..._};for(const h in _){const p=S[h],c=_[h];/^on[A-Z]/.test(h)?p&&c?e[h]=(...i)=>{const r=c(...i);return p(...i),r}:p&&(e[h]=p):h==="style"?e[h]={...p,...c}:h==="className"&&(e[h]=[p,c].filter(Boolean).join(" "))}return{...S,...e}}function bf(S){let _=Object.getOwnPropertyDescriptor(S.props,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning;return e?S.ref:(_=Object.getOwnPropertyDescriptor(S,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning,e?S.props.ref:S.props.ref||S.ref)}const Ea=S=>typeof S=="boolean"?`${S}`:S===0?"0":S,Ca=Ci,Fi=(S,_)=>e=>{var h;if(_?.variants==null)return Ca(S,e?.class,e?.className);const{variants:p,defaultVariants:c}=_,s=Object.keys(p).map(t=>{const n=e?.[t],l=c?.[t];if(n===null)return null;const a=Ea(n)||Ea(l);return p[t][a]}),i=e&&Object.entries(e).reduce((t,n)=>{let[l,a]=n;return a===void 0||(t[l]=a),t},{}),r=_==null||(h=_.compoundVariants)===null||h===void 0?void 0:h.reduce((t,n)=>{let{class:l,className:a,...o}=n;return Object.entries(o).every(d=>{let[f,u]=d;return Array.isArray(u)?u.includes({...c,...i}[f]):{...c,...i}[f]===u})?[...t,l,a]:t},[]);return Ca(S,s,r,e?.class,e?.className)};function lt(...S){return uo(Ci(S))}const Bi=Fi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Et=W.forwardRef(({className:S,variant:_,size:e,asChild:h=!1,...p},c)=>{const s=h?ff:"button";return y.jsx(s,{className:lt(Bi({variant:_,size:e,className:S})),ref:c,...p})});Et.displayName="Button";const yf=[{name:"Home",href:"/",icon:fo,feature:"home"},{name:"AI Assistant",href:"/ai-assistant",icon:gs,feature:"ai-assistant"},{name:"Playground",href:"/playground",icon:Kc,feature:"playground"},{name:"Data Management",href:"/data-management",icon:br,feature:"data-management"},{name:"Settings",href:"/settings",icon:ns,feature:"settings"}];function vf(){const S=Tn(),_=Xr(),{hasAccess:e,licenseTier:h}=Ts(),{user:p,logout:c}=In(),[s,i]=W.useState(!1),r=yf.filter(n=>e(n.feature)),t=async()=>{await c(),_("/login")};return y.jsx("header",{className:"cv-surface-elevated sticky top-0 z-40 backdrop-blur transition-colors duration-300",children:y.jsx("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between items-center h-16",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsxs(dn,{to:"/",className:"flex-shrink-0 flex items-center",children:[y.jsx("svg",{className:"h-8 w-auto text-app-green"}),y.jsx("span",{className:"ml-2 text-xl font-bold text-foreground",children:"ChurnVision"})]}),y.jsx("nav",{className:"hidden md:ml-10 md:flex md:space-x-8",children:r.map(n=>{const l=e(n.feature);return y.jsxs(dn,{to:l?n.href:"#",className:la("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium relative transition-colors",l?S.pathname===n.href?"border-app-green text-foreground":"border-transparent text-neutral-muted hover:border-border hover:text-foreground":"border-transparent text-neutral-subtle cursor-not-allowed"),"aria-current":S.pathname===n.href?"page":void 0,onClick:l?void 0:a=>a.preventDefault(),children:[y.jsx(n.icon,{className:"mr-1 h-5 w-5","aria-hidden":"true"}),n.name,!l&&y.jsx(_s,{className:"ml-1 h-3 w-3","aria-hidden":"true"}),n.name==="Playground"&&l&&y.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-xs font-semibold bg-emerald-500/10 text-emerald-400 rounded-full border border-emerald-500/30",children:"Beta"})]},n.name)})})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("div",{className:la("px-2 py-1 text-xs font-medium rounded-md border border-border bg-surface-muted text-neutral",af(h)),children:Di(h)}),y.jsx(xo,{}),p&&y.jsxs("div",{className:"relative",children:[y.jsxs(Et,{variant:"ghost",size:"sm",onClick:()=>i(!s),className:"flex items-center space-x-2",children:[y.jsx(ho,{className:"h-4 w-4"}),y.jsx("span",{className:"hidden sm:inline",children:p.username})]}),s&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),y.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-surface-elevated border border-border z-20",children:y.jsxs("div",{className:"py-1",children:[y.jsxs("div",{className:"px-4 py-2 text-sm text-neutral-muted border-b border-border",children:[y.jsx("div",{className:"font-medium text-foreground",children:p.full_name||p.username}),y.jsx("div",{className:"text-xs",children:p.email})]}),y.jsxs("button",{onClick:t,className:"w-full text-left px-4 py-2 text-sm text-neutral hover:bg-surface-muted flex items-center space-x-2 transition-colors",children:[y.jsx(Yc,{className:"h-4 w-4"}),y.jsx("span",{children:"Logout"})]})]})})]})]})]})]})})})}function xf(){const S=new Date().getFullYear(),_="1.0.0",e=h=>{window.open(h,"_blank","noopener,noreferrer")};return y.jsx(at.footer,{className:"app-footer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:y.jsx("div",{className:"max-w-[1600px] mx-auto px-4",children:y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center py-2",children:[y.jsxs("div",{className:"mb-2 md:mb-0",children:[y.jsx("span",{className:"font-medium text-neutral",children:"ChurnVision"}),y.jsx("span",{className:"mx-2 text-neutral-subtle",children:"|"}),y.jsxs("span",{children:[" ",S," All rights reserved"]}),y.jsx("span",{className:"mx-2 text-neutral-subtle",children:"|"}),y.jsxs("span",{className:"text-xs text-neutral-muted",children:["v",_]})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("button",{onClick:()=>e("https://churnvision.tech"),className:"footer-link flex items-center gap-1","aria-label":"ChurnVision Website",children:[y.jsx(po,{size:16}),y.jsx("span",{className:"hidden sm:inline",children:"Website"})]}),y.jsxs("a",{href:"mailto:support@churnvision.tech",className:"footer-link flex items-center gap-1","aria-label":"Contact",children:[y.jsx(Gc,{size:16}),y.jsx("span",{className:"hidden sm:inline",children:"Contact"})]}),y.jsx(dn,{to:"/privacy",className:"footer-link",children:"Privacy"}),y.jsx(dn,{to:"/terms",className:"footer-link",children:"Terms"})]})]})})})}const Ko=W.memo(()=>y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-app-green/20 border-t-app-green rounded-full",style:{animation:"spin 1s linear infinite",willChange:"transform",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden"}}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{willChange:"transform",transform:"translate3d(0, 0, 0)"},children:y.jsx("div",{className:"w-8 h-8 border-4 border-app-green/40 border-t-app-green rounded-full",style:{animation:"spin 0.6s linear infinite reverse",willChange:"transform",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden"}})})]}));Ko.displayName="OptimizedSpinner";const As=W.memo(({isLoading:S,text:_="Loading..."})=>y.jsx(zr,{mode:"wait",children:S&&y.jsx(at.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(4px)",transition:{duration:.15,ease:[.25,.46,.45,.94]}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.1,ease:[.55,.06,.68,.19]}},className:"fixed inset-0 bg-white/80 z-50 flex items-center justify-center",style:{willChange:"opacity, backdrop-filter",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",contain:"layout style paint",isolation:"isolate"},children:y.jsxs(at.div,{initial:{opacity:0,y:20,scale:.9,rotateX:-10},animate:{opacity:1,y:0,scale:1,rotateX:0,transition:{delay:.05,duration:.2,ease:[.25,.46,.45,.94]}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.1,ease:[.55,.06,.68,.19]}},className:"text-center",style:{willChange:"transform, opacity",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",perspective:1e3,transformStyle:"preserve-3d"},children:[y.jsx(Ko,{}),y.jsx(at.p,{initial:{opacity:0,y:5},animate:{opacity:1,y:0,transition:{delay:.1,duration:.15,ease:[.25,.46,.45,.94]}},exit:{opacity:0,y:-5,transition:{duration:.1}},className:"mt-4 text-gray-600 font-medium",style:{willChange:"transform, opacity",transform:"translate3d(0, 0, 0)"},children:_})]})})}));As.displayName="LoadingOverlay";const wf=()=>({initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{ease:"easeOut",duration:.15}},exit:{opacity:0,y:-5,transition:{ease:"easeIn",duration:.1}}}),Ir=W.memo(({children:S,isLoading:_=!1,loadingText:e})=>{const h=wf();return y.jsxs("div",{className:"relative h-full w-full",style:{minHeight:"100%",contain:"layout style paint",isolation:"isolate"},children:[y.jsx(As,{isLoading:_,text:e}),y.jsx(at.div,{initial:"initial",animate:"enter",exit:"exit",variants:h,className:"w-full h-full overflow-auto",style:{opacity:_?.4:1,pointerEvents:_?"none":"auto",minHeight:"100%"},children:S})]})}),_f={duration:.4,ease:[.16,1,.3,1]},Yo=W.memo(({isVisible:S,versionLabel:_})=>y.jsx(zr,{children:S&&y.jsxs(at.div,{className:"app-launch-overlay",role:"status","aria-live":"polite",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:_f,children:[y.jsx("div",{className:"app-launch-backdrop","aria-hidden":"true"}),y.jsxs(at.div,{className:"app-launch-card",initial:{opacity:0,y:20,scale:.96},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.55,ease:[.34,1.56,.64,1]},children:[y.jsx(at.div,{className:"app-launch-logo",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05,duration:.35},children:"ChurnVision"}),y.jsx("p",{className:"app-launch-subtitle",children:"Initializing workspace"}),_&&y.jsx(at.span,{className:"app-launch-version",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.15,duration:.3},children:_}),y.jsx("div",{className:"app-launch-orb","aria-hidden":"true"}),y.jsx("div",{className:"app-launch-progress","aria-hidden":"true",children:y.jsx("div",{className:"app-launch-progress-glow"})})]})]})}));Yo.displayName="AppLaunchAnimation";const Na=S=>{let _;const e=new Set,h=(t,n)=>{const l=typeof t=="function"?t(_):t;if(!Object.is(l,_)){const a=_;_=n??(typeof l!="object"||l===null)?l:Object.assign({},_,l),e.forEach(o=>o(_,a))}},p=()=>_,i={setState:h,getState:p,getInitialState:()=>r,subscribe:t=>(e.add(t),()=>e.delete(t))},r=_=S(h,p,i);return i},kf=S=>S?Na(S):Na,Sf=S=>S;function jf(S,_=Sf){const e=lr.useSyncExternalStore(S.subscribe,lr.useCallback(()=>_(S.getState()),[S,_]),lr.useCallback(()=>_(S.getInitialState()),[S,_]));return lr.useDebugValue(e),e}const Ta=S=>{const _=kf(S),e=h=>jf(_,h);return Object.assign(e,_),e},Ef=S=>S?Ta(S):Ta;var xn=(S=>(S.High="High",S.Medium="Medium",S.Low="Low",S))(xn||{});const $i={highRisk:.7,mediumRisk:.4};let ur={current:$i,metadata:{lastUpdated:new Date().toISOString(),version:"1.0.0"}};const gi=new Set,bi=new Set;let gr=!1;function Ms(S,_=$i){const e=Math.max(0,Math.min(1,Number(S)||0));return e>_.highRisk?"High":e>_.mediumRisk?"Medium":"Low"}function Cf(S,_=$i){const e=Ms(S,_);return{High:{level:"High Risk",color:"text-red-600",bgColor:"bg-red-100",borderColor:"border-red-200",darkColor:"dark:text-red-400",darkBgColor:"dark:bg-red-900/30"},Medium:{level:"Medium Risk",color:"text-orange-600",bgColor:"bg-orange-100",borderColor:"border-orange-200",darkColor:"dark:text-orange-400",darkBgColor:"dark:bg-orange-900/30"},Low:{level:"Low Risk",color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-200",darkColor:"dark:text-green-400",darkBgColor:"dark:bg-green-900/30"}}[e]}function yi(S,_=ur.current){return S.reduce((e,h)=>{const p=h.churnProbability||0,c=Ms(p,_);return c==="High"?e.high++:c==="Medium"?e.medium++:e.low++,e},{high:0,medium:0,low:0})}function Tg(){return{...ur}}function Cn(){return{...ur.current}}function zi(S,_){try{const e={...ur.current,...S};if(e.mediumRisk>=e.highRisk)throw new Error("Medium risk threshold must be lower than high risk threshold");if(e.mediumRisk<0||e.highRisk>1)throw new Error("Thresholds must be between 0 and 1");return ur={...ur,current:e,metadata:{...ur.metadata,lastUpdated:new Date().toISOString(),updatedBy:_,version:"1.0.0"}},Tf(),!0}catch(e){return console.error("Failed to update risk thresholds:",e),!1}}function Nf(S){return gi.add(S),()=>{gi.delete(S)}}function Ag(S){return Ms(S,ur.current)}function Mg(S){return Cf(S,ur.current)}function Rg(S){return yi(S,ur.current)}function Tf(){gi.forEach(S=>{try{S({...ur})}catch(_){console.error("Error in threshold change listener:",_)}})}function Pr(S){bi.forEach(_=>{try{_(gr,S?{reason:S}:void 0)}catch(e){console.error("Error in calibration change listener:",e)}})}const Af={enabled:!0,targetDistribution:{high:15,medium:25,low:60},sensitivity:.3,minSampleSize:50,adjustmentInterval:24};let Lr={...Af};async function Og(S,_=!1){if(gr=!0,Pr(_?"forced":"scheduled"),!Lr.enabled&&!_)return gr=!1,Pr("disabled"),{adjusted:!1,reason:"Auto-adjustment disabled"};if(S.length<Lr.minSampleSize)return{adjusted:!1,reason:"Insufficient sample size"};try{const e=S.map(u=>u.churnProbability||0).filter(u=>u>=0&&u<=1).sort((u,g)=>g-u);if(e.length===0)return gr=!1,Pr("no-data"),{adjusted:!1,reason:"No valid probability data"};const h=e.length,p=Math.floor(h*Lr.targetDistribution.high/100),c=Math.floor(h*Lr.targetDistribution.medium/100),s=p>0?e[Math.min(p-1,e.length-1)]:.8,i=p+c<e.length?e[p+c-1]:.4,r=Cn(),t=Lr.sensitivity,n=r.highRisk+(s-r.highRisk)*t,l=r.mediumRisk+(i-r.mediumRisk)*t,a={highRisk:Math.max(.1,Math.min(.95,n)),mediumRisk:Math.max(.05,Math.min(n-.05,l))},o=Math.abs(a.highRisk-r.highRisk),d=Math.abs(a.mediumRisk-r.mediumRisk);return o<.02&&d<.02?(gr=!1,Pr("no-meaningful-change"),{adjusted:!1,reason:"No meaningful change required"}):zi(a,"auto-adjustment-system")?(console.log("Risk thresholds auto-adjusted:",{previous:r,new:a,sampleSize:h,targetDistribution:Lr.targetDistribution}),gr=!1,Pr("applied"),{adjusted:!0,newThresholds:a,reason:`Adjusted based on ${h} employees to achieve target distribution`}):(gr=!1,Pr("apply-failed"),{adjusted:!1,reason:"Failed to apply new thresholds"})}catch(e){return console.error("Auto-adjustment failed:",e),gr=!1,Pr("error"),{adjusted:!1,reason:"Auto-adjustment error"}}}function Go(){return{...Lr}}function Ig(S){bi.add(S);try{S(gr)}catch{}return()=>bi.delete(S)}function Pg(){return gr}async function Dg(S){if(S.length===0)return!1;const _=S.map(r=>r.churnProbability||0).filter(r=>r>=0&&r<=1).sort((r,t)=>r-t);if(_.length<10)return!1;const e=_.length,h=Go(),p=Math.floor(e*(1-h.targetDistribution.high/100)),c=Math.floor(e*(1-(h.targetDistribution.high+h.targetDistribution.medium)/100)),s={highRisk:Math.min(.9,Math.max(.5,_[p]||.7)),mediumRisk:Math.min(.7,Math.max(.2,_[c]||.4))},i=zi(s,"smart-initialization");return i&&console.log("Smart thresholds initialized:",s),i}function Lg(S){if(S.length===0)return null;const _=S.map(l=>l.churnProbability||0).filter(l=>l>=0&&l<=1);if(_.length===0)return null;const e=Cn(),h=_.length,p={high:Math.round(_.filter(l=>l>e.highRisk).length/h*100),medium:Math.round(_.filter(l=>l>e.mediumRisk&&l<=e.highRisk).length/h*100),low:Math.round(_.filter(l=>l<=e.mediumRisk).length/h*100)},c=Go(),s=[..._].sort((l,a)=>a-l),i=Math.floor(h*(c.targetDistribution.high/100)),r=Math.floor(h*((c.targetDistribution.high+c.targetDistribution.medium)/100)),t={highRisk:Math.min(.95,Math.max(.5,s[i]||.7)),mediumRisk:Math.min(.8,Math.max(.2,s[r]||.4))},n={high:Math.round(_.filter(l=>l>t.highRisk).length/h*100),medium:Math.round(_.filter(l=>l>t.mediumRisk&&l<=t.highRisk).length/h*100),low:Math.round(_.filter(l=>l<=t.mediumRisk).length/h*100)};return{currentDistribution:p,projectedDistribution:n,recommendedThresholds:t,currentThresholds:e,sampleSize:h,dataQuality:_.length/S.length}}function Mf(S,_,e){if(S===null)return null;const h=Math.pow(10,_-e)-Math.pow(10,-e);return S>h?h:Math.round(S*Math.pow(10,e))/Math.pow(10,e)}const Hs=S=>S?`churnvision-employees-cache-${S}`:"churnvision-employees-cache-offline",Rf=1440*60*1e3,Vs="churnvision-offline-employees";class Of{isOfflineMode=!1;currentProjectId=null;constructor(){this.isOfflineMode=!navigator.onLine,window.addEventListener("online",this.handleOnlineStatusChange),window.addEventListener("offline",this.handleOnlineStatusChange)}setActiveProjectId(_){this.currentProjectId=_,_&&console.log(`EmployeeService: Active project ID set to ${_}`)}handleOnlineStatusChange=()=>{this.isOfflineMode=!navigator.onLine,this.isOfflineMode||this.syncOfflineChanges()};async syncOfflineChanges(){try{const _=localStorage.getItem(Vs);if(_){const e=JSON.parse(_);console.log("Syncing offline changes:",e),localStorage.removeItem(Vs)}}catch(_){console.error("Error syncing offline changes:",_)}}async fetchEmployees(_,e=!1){if(this.isOfflineMode){const h=this.getFromCache(null);return h?(console.log("Using cached employee data in offline mode"),h):(console.log("No cached data available in offline mode."),[])}if(console.log(`Fetching employee data for project ${_}... (forceRefresh: ${e})`),!e){const h=this.getFromCache(_);if(h)return console.log("Using cached employee data from local storage for project:",_),h}try{console.log(`Fetching employee data via API for project ${_} with forceRefresh: ${e}`);const p=(await et.get("/employees")).data,c=Array.isArray(p)?p:Array.isArray(p?.rows)?p.rows:[];if(console.log("Successfully fetched employee data via API for project:",_,{count:c.length}),!c||c.length===0)return console.warn("No employee data received from the backend for project:",_),this.saveToCache(_,[]),[];let s=c;s=s.map(r=>{if(!r||typeof r!="object")return console.warn("Skipping invalid entry in fetched employee data:",r),null;let t=null;if(r.additional_data)try{const a=JSON.parse(r.additional_data);a&&typeof a.performance_rating_latest<"u"&&(t=Number(a.performance_rating_latest),isNaN(t)&&(t=null))}catch(a){console.error("Failed to parse additional_data for employee:",r.hr_code,r.additional_data,a)}const{additional_data:n,...l}=r;return{...l,additional_data:n,performance_rating_latest:t}}).filter(Boolean);const i=s;if(i.length>0){const r=i.map(t=>(!t.employee_cost&&t.salary&&(t.employee_cost=t.salary),t));return console.log(`Processed ${r.length} employees via API for project ${_}`),this.saveToCache(_,r),r}else return console.warn(`No employees found in the API response for project ${_}`),this.saveToCache(_,[]),[]}catch(h){return console.error(`Error fetching employee data for project ${_}:`,h),[]}}saveToCache(_,e){try{const h={timestamp:Date.now(),data:e};localStorage.setItem(Hs(_),JSON.stringify(h)),console.log(`Saved employees to cache with key: ${Hs(_)}`)}catch(h){console.error("Error saving employees to cache:",h)}}getFromCache(_){try{const e=Hs(_),h=localStorage.getItem(e);if(console.log(`Attempting to get from cache with key: ${e}`),!h)return null;const{timestamp:p,data:c}=JSON.parse(h);return Date.now()-p>Rf&&!this.isOfflineMode?null:c}catch(e){return console.error("Error retrieving employees from cache:",e),null}}async getEmployees(_,e=!1){if(!_&&!this.isOfflineMode)return console.warn("getEmployees called without projectId in online mode. Returning empty array."),[];_&&this.currentProjectId!==_&&this.setActiveProjectId(_);const h=this.isOfflineMode?_:_||this.currentProjectId;if(!h&&!this.isOfflineMode)return console.warn("getEmployees: No project ID available for online mode. Returning empty array."),[];try{console.log(`Fetching employees for project ${h}...`);const p=await this.fetchEmployees(h,e);if(!p||p.length===0)return console.warn("No employees found from API"),[];if(console.log(`Got ${p.length} employees from API`),p.every(i=>!i.resign_proba||i.resign_proba===0)){console.warn("WARNING: All employees have 0 churn probability. Generating deterministic probabilities.");for(let i=0;i<p.length;i++){const r=p[i],l=(parseInt(r.hr_code.replace(/\D/g,""))||i)%100/100*.8+.1;r.resign_proba=l}}console.log("Sample probabilities:");for(let i=0;i<Math.min(5,p.length);i++)console.log(`Employee ${p[i].hr_code}: ${p[i].resign_proba}`);const s=p.map(i=>this.transformEmployee(i)).filter(i=>i!==null);if(console.log(`Transformed ${s.length} employees`),s.length>0){const i=s.map(n=>n.churnProbability),r=i.reduce((n,l)=>n+l,0)/i.length,t=i.every(n=>n===0);console.log("Churn probability statistics:",{average:r,min:Math.min(...i),max:Math.max(...i),allZeros:t,nonZeroCount:i.filter(n=>n>0).length}),console.log("Sample transformed probabilities:");for(let n=0;n<Math.min(5,s.length);n++)console.log(`Employee ${s[n].name}: ${s[n].churnProbability}`)}return s}catch(p){return console.error("Error fetching employees:",p),[]}}transformEmployee(_){try{const e=_.full_name||_.name||`Employee ${_.hr_code||"Unknown"}`,h=_.hr_code||_.id||Math.random().toString(36).substr(2,9),p=localStorage.getItem("settings.dataMode")==="performance"?"performance":"wage",c=p==="wage"&&Number(_.employee_cost)||0,s=Number(_.tenure)||0;let i;if(_.additional_data)try{const I=typeof _.additional_data=="string"?_.additional_data:String(_.additional_data);i=JSON.parse(I)}catch(I){console.warn("Error parsing additional_data for employee",h,I)}const r=_.manager_id??(i&&typeof i.manager_id<"u"?String(i.manager_id):void 0),t=(()=>{if(!i)return;const I=[i.age,i.age_years,i.employee_age];for(const B of I){const H=Number(B);if(Number.isFinite(H)&&H>0&&H<120)return H}if(i.birth_year||i.birth_years){const B=Number(i.birth_year??i.birth_years),$=new Date().getFullYear()-B;if(Number.isFinite($)&&$>0&&$<120)return $}if(i.date_of_birth){const B=new Date(i.date_of_birth);if(!Number.isNaN(B.getTime())){const $=(Date.now()-B.getTime())/(1e3*60*60*24*365.25);if($>0&&$<120)return Math.floor($)}}})(),n=i?.work_location??i?.location??i?.office_location??i?.workspace,l=i?.remote_preference??i?.work_mode??i?.workstyle,a=(()=>{if(!i)return;const I=i.team_size??i.teamSize,B=Number(I);return Number.isFinite(B)?B:void 0})(),o=(()=>{if(!i)return;const I=i.peer_resignations_90d??i.peerResignations90d,B=Number(I);return Number.isFinite(B)?B:void 0})();let d=this.normalizeChurnProbability(_.reasoning_churn_risk??_.resign_proba);d===0&&(console.log(`Generating deterministic probability for employee ${h}`),d=(parseInt(String(h).replace(/\D/g,""))||Math.floor(Math.random()*100))%100/100*.8+.1),console.log(`Employee ${h} - Raw ML: ${_.resign_proba}, Combined Score: ${_.reasoning_churn_risk}, Final: ${d}`);const f=p==="wage"?c*12:0,u=_.performance_rating_latest,g=Number(u)||0,m=Math.max(1,Math.min(5,g)),k=_.shap_values?this.parseShapValues(_.shap_values):[];let E=0,A;if(_.reasoning_confidence?E=Number(_.reasoning_confidence)*100:_.confidence_score?E=Number(_.confidence_score):E=this.calculateConfidenceScore(_,k),_.uncertainty_range)try{const I=JSON.parse(_.uncertainty_range);Array.isArray(I)&&I.length===2&&(A=[Number(I[0]),Number(I[1])])}catch(I){console.warn("Error parsing uncertainty range:",I)}else A=this.calculateUncertaintyRange(d,E);let L=[];if(_.counterfactuals)try{if(Array.isArray(_.counterfactuals))L=_.counterfactuals;else{const I=JSON.parse(_.counterfactuals);Array.isArray(I)&&(L=I)}}catch(I){console.warn("Error parsing counterfactuals:",I),L=[]}const z=this.parseRiskFactors(_.shap_values),R=this.getRiskLevel(d);return{id:Number(h)||Math.floor(Math.random()*1e5),employee_id:String(h),name:e,position:_.position||"Unknown Position",department:_.structure_name||"Unknown Department",salary:c,tenure:s,performance:this.formatPerformance(m),riskLevel:R,churnProbability:d,currentELTV:f,factors:z,engagementScore:m,status:_.status||"Active",manager_id:r,shap_values:k,hr_code:String(h),full_name:e,structure_name:_.structure_name||"Unknown Department",resign_proba:d,confidenceScore:_.reasoning_confidence?Math.round(_.reasoning_confidence*100):70,uncertaintyRange:A,counterfactuals:L,reasoningChurnRisk:_.reasoning_churn_risk,reasoningStage:_.reasoning_stage,reasoningConfidence:_.reasoning_confidence,age:t,workLocation:n,remotePreference:l,teamSize:a,peerResignations90d:o,additionalAttributes:i}}catch(e){return console.error("Error transforming employee:",e),null}}formatFeatureName(_){return _.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}normalizeChurnProbability(_){if(_==null)return 0;const e=Number(_);return isNaN(e)?0:e>=0&&e<=1?e:e>1&&e<=100?e/100:Math.max(0,Math.min(1,e))}getRiskLevel(_){switch(Ms(_)){case"High":return xn.High;case"Medium":return xn.Medium;case"Low":return xn.Low;default:return xn.Low}}parseRiskFactors(_){return _?Object.entries(_).map(([e,h])=>({name:this.formatFeatureName(e),value:Number(h),impact:Number(h)>0?1:-1})).filter(e=>!isNaN(e.value)).sort((e,h)=>Math.abs(h.value)-Math.abs(e.value)).slice(0,5):[]}async getEmployeeDetails(_){const e=this.currentProjectId;if(!e)return console.warn("Cannot get employee details without an active project ID."),null;let h=this.getFromCache(e);if(h||(h=await this.fetchEmployees(e,!1)),!h||h.length===0)return console.warn("No employees found in the cache or fetched from API."),null;const p=h.find(s=>s.hr_code===_);if(!p)return console.warn(`Employee with ID ${_} not found in the fetched data.`),null;const c=this.normalizeChurnProbability(p.reasoning_churn_risk??p.resign_proba);return{id:parseInt(p.hr_code)||0,employee_id:p.hr_code,name:p.full_name||"Unknown",position:p.position||"Unknown",department:p.structure_name||"Unknown",salary:Mf(p.employee_cost,10,2)||0,tenure:Number(p.tenure||0),performance:p.performance_rating_latest?`${Number(p.performance_rating_latest).toFixed(1)}/5`:"N/A",riskLevel:this.getRiskLevel(c),churnProbability:c,currentELTV:Number(p.eltv_pre_treatment||0),factors:this.parseRiskFactors(p.shap_values),engagementScore:Number(p.engagement_score||0),status:p.status||"Active",shap_values:p.shap_values?Object.entries(p.shap_values).map(([s,i])=>({feature:s,value:Number(i)})):[],hr_code:p.hr_code,full_name:p.full_name||"Unknown",structure_name:p.structure_name||"Unknown",resign_proba:c,confidenceScore:p.reasoning_confidence?Math.round(p.reasoning_confidence*100):70,uncertaintyRange:void 0,counterfactuals:[],reasoningChurnRisk:p.reasoning_churn_risk,reasoningStage:p.reasoning_stage,reasoningConfidence:p.reasoning_confidence}}parseShapValues(_){return Object.entries(_).map(([e,h])=>({feature:this.formatFeatureName(e),value:Number(h)})).filter(e=>!isNaN(e.value)).sort((e,h)=>Math.abs(h.value)-Math.abs(e.value))}formatPerformance(_){return`${Math.max(1,Math.min(5,Number(_)||1)).toFixed(1)}/5`}calculateConfidenceScore(_,e){let h=70;const p=this.calculateDataCompleteness(_),c=e.length>0?Math.min(15,e.length*2):0,s=this.calculateProbabilityConfidence(_.resign_proba),i=Math.min(10,Number(_.tenure)*2),r=Math.max(0,Math.min(100,h+p+c+s+i));return Math.round(r)}calculateDataCompleteness(_){const e=["hr_code","full_name","position","structure_name","resign_proba","employee_cost","tenure","performance_rating_latest"],p=e.filter(c=>_[c]!==void 0&&_[c]!==null).length/e.length*100;return Math.round((p-50)/5)}calculateProbabilityConfidence(_){const e=this.normalizeChurnProbability(_),h=Math.abs(e-.5);return Math.round(h*30)}calculateUncertaintyRange(_,e){const h=(100-e)/100*.4;let p=Math.max(0,_-h),c=Math.min(1,_+h);return p=Math.round(p*100)/100,c=Math.round(c*100)/100,[p,c]}hasPendingOfflineChanges(){const _=localStorage.getItem(Vs);return _!==null&&JSON.parse(_).length>0}}const If=new Of;class Pf{async getEmployeeReasoning(_){try{const e=await et.post("/intelligent-chat/analyze-risk",null,{params:{hr_code:_}});if(e.data&&e.data.context&&e.data.context.reasoning)return e.data.context.reasoning;throw e.data&&e.data.analysis?new Error("Structured reasoning data not found in response"):new Error("Failed to get employee reasoning")}catch(e){throw console.error("Error getting employee reasoning:",e),new Error(e.message||"Failed to get employee reasoning")}}async refreshEmployeeReasoning(_){return this.getEmployeeReasoning(_)}async getBatchReasoning(_){try{const e=_.map(p=>this.getEmployeeReasoning(p).catch(()=>null));return(await Promise.all(e)).filter(Boolean)}catch(e){return console.error("Error getting batch reasoning:",e),[]}}async getReasoningSummary(_=100){try{const e=await et.get("/intelligent-chat/exit-patterns");if(e.data&&e.data.data){const h=e.data.data;return{total_employees:h.total_resignations||0,high_risk_count:0,medium_risk_count:0,low_risk_count:0,avg_confidence:0,top_risk_factors:[],stage_distribution:h.stages||{},recent_updates:0}}return{total_employees:0,high_risk_count:0,medium_risk_count:0,low_risk_count:0,avg_confidence:0,top_risk_factors:[],stage_distribution:{},recent_updates:0}}catch(e){return console.error("Error getting reasoning summary:",e),{total_employees:0,high_risk_count:0,medium_risk_count:0,low_risk_count:0,avg_confidence:0,top_risk_factors:[],stage_distribution:{},recent_updates:0}}}async invalidateEmployeeCache(_){console.log("invalidateEmployeeCache called (no-op for API)")}async invalidateAllCache(){console.log("invalidateAllCache called (no-op for API)")}async getAllRules(){return[]}async createRule(_){return console.warn("createRule not implemented in backend"),{ruleId:Math.floor(Math.random()*1e3)}}async updateRule(_,e){console.warn("updateRule not implemented in backend")}async deleteRule(_){console.warn("deleteRule not implemented in backend")}async testRule(_){return{condition_result:!1,original_score:0,adjusted_score:0,impact:0}}async getAllStages(){return[]}async createStage(_){return{stageId:Math.floor(Math.random()*1e3)}}async testStageInference(_){return{matched_stage:"Unknown",tenure_match:null,special_conditions:[],final_score:0,reasoning:[]}}async getLLMStatus(){return{isAvailable:!0,isReady:!0,modelPath:"remote-model",error:null}}async askLLMQuestion(_){try{const e=await et.post("/intelligent-chat/chat",{message:_.question,session_id:"reasoning-session"});if(e.data&&e.data.response)return e.data.response;throw new Error("No response from LLM")}catch(e){throw console.error("Error asking LLM question:",e),new Error(e.message||"Failed to ask LLM question")}}}const Nn=new Pf,Df=S=>S.filter(_=>_.status==="Active"||_.status===null||_.status===void 0||!_.termination_date),Aa=(S,_=!1)=>{if(_)return console.log(`Force refresh requested, skipping cache for ${S}`),null;try{const e=sessionStorage.getItem(S);if(!e)return null;const h=JSON.parse(e);return!h||!h.data||!h.timestamp?null:Date.now()-h.timestamp<180*1e3?h.data:(sessionStorage.removeItem(S),null)}catch{try{sessionStorage.removeItem(S)}catch{}return null}},qn=(S,_)=>{setTimeout(()=>{try{const e=JSON.stringify({data:_,timestamp:Date.now()});sessionStorage.setItem(S,e)}catch{try{const h=Date.now(),p=[];for(let c=0;c<sessionStorage.length;c++){const s=sessionStorage.key(c);if(s)try{const i=JSON.parse(sessionStorage.getItem(s)||"{}");i.timestamp&&h-i.timestamp>3600*1e3&&p.push(s)}catch{}}p.forEach(c=>sessionStorage.removeItem(c)),sessionStorage.setItem(S,JSON.stringify({data:_,timestamp:Date.now()}))}catch{console.warn("Storage quota exceeded, continuing without cache")}}},0)},Lf=()=>(console.log("[setupCacheResetListener] Setting up cache reset listener..."),()=>{}),nn=Ef((S,_)=>(Lf(),{homeEmployees:null,homeMetrics:null,aiAssistantEmployees:null,playgroundEmployees:null,playgroundTreatments:null,isLoadingHomeData:!1,isLoadingAIAssistantData:!1,isLoadingPlaygroundData:!1,trainingStatus:null,isTrainingComplete:!1,pollingIntervalId:null,isEnhancingWithReasoning:!1,reasoningEnhancementProgress:0,fetchHomeData:async(e,h=!1)=>{if(!e){console.log("[fetchHomeData] No projectId, resetting data."),S({homeEmployees:null,homeMetrics:null,isLoadingHomeData:!1});return}console.log(`[fetchHomeData] Triggered for projectId: ${e}. ForceRefresh: ${h}.`);const p=_().trainingStatus;if(!p||p.companyId!==e)try{_().fetchTrainingStatus(e)}catch(n){console.warn("[fetchHomeData] Failed to trigger training status fetch:",n)}let c=p?.status==="complete";const s=`home_employees_${e}`,i=`home_metrics_${e}`;if(h){console.log(`[fetchHomeData] Force refresh: clearing sessionStorage for projectId: ${e}`);try{sessionStorage.removeItem(s),sessionStorage.removeItem(i)}catch(n){console.warn("[fetchHomeData] Failed to clear sessionStorage:",n)}}if(!h&&_().homeEmployees&&_().homeEmployees.length>0&&_().homeMetrics){console.log(`[fetchHomeData] Using existing store cache for projectId: ${e}`);return}const r=Aa(s,h),t=Aa(i,h);if(r&&t&&!h){console.log(`[fetchHomeData] Using sessionStorage cache for projectId: ${e}`),S({homeEmployees:r,homeMetrics:t,aiAssistantEmployees:r,playgroundEmployees:r,isLoadingHomeData:!1,isLoadingAIAssistantData:!1,isLoadingPlaygroundData:!1});return}console.log(`[fetchHomeData] Setting isLoadingHomeData = true for projectId: ${e}`),S({isLoadingHomeData:!0});try{console.log(`[fetchHomeData] Fetching fresh data from employeeService for projectId: ${e}`);const n=await If.getEmployees(e,h);if(console.log(`[fetchHomeData] Received ${n?.length??0} employees for projectId: ${e}`),!n||n.length===0){console.log(`[fetchHomeData] No employee data returned for projectId: ${e}. Setting empty state.`),S({homeEmployees:[],homeMetrics:c?{total_employees:0,average_churn_probability:0,risk_levels:{high:0,medium:0,low:0}}:null,aiAssistantEmployees:[],playgroundEmployees:[],isLoadingHomeData:!1,isLoadingAIAssistantData:!1,isLoadingPlaygroundData:!1}),qn(s,[]),c?qn(i,{total_employees:0,average_churn_probability:0,risk_levels:{high:0,medium:0,low:0}}):sessionStorage.removeItem(i);return}console.log(`[fetchHomeData] Showing basic employee data immediately for ${n.length} employees`);const l=Df(n),a=l.some(m=>m&&typeof m.reasoningChurnRisk=="number");c=c||a;const o=l.length,d=c?l.filter(m=>m&&typeof m.churnProbability<"u"&&!isNaN(parseFloat(String(m.churnProbability)))):[];let f=null;if(c){let m=0;for(const A of d){const L=typeof A.churnProbability=="number"?A.churnProbability:parseFloat(String(A.churnProbability));m+=isNaN(L)?0:L}const k=d.length>0?m/d.length:0,E=yi(d);f={total_employees:o,average_churn_probability:k,risk_levels:E}}const u=l.map(m=>({...m,hasReasoningData:!1,tenure_years:m.tenure||0,churnProbability:c?m.reasoningChurnRisk??m.resign_proba??0:0,reasoningConfidence:c?m.reasoningConfidence:void 0,confidenceScore:c?m.confidenceScore:void 0}));S({homeEmployees:u,homeMetrics:f,aiAssistantEmployees:u,playgroundEmployees:u,isLoadingHomeData:!1,isLoadingAIAssistantData:!1,isLoadingPlaygroundData:!1}),console.log("[fetchHomeData] Basic data displayed. Starting reasoning enhancement in background..."),c&&S({isEnhancingWithReasoning:!0,reasoningEnhancementProgress:0}),(c?Ff(l,m=>{console.log(`[fetchHomeData] Background reasoning enhancement progress: ${m}%`),(m%20===0||m===100)&&S({reasoningEnhancementProgress:m})},{modelReady:c}):Promise.resolve(u)).then(m=>{console.log(`[fetchHomeData] Background reasoning enhancement completed for ${m.length} employees`);let k=f;if(c){const E=m.length>0?m.reduce((A,L)=>A+(L.churnProbability||0),0)/m.length:0;k={total_employees:m.length,average_churn_probability:E,risk_levels:yi(m)}}S(E=>({...E,homeEmployees:m,homeMetrics:k,aiAssistantEmployees:m,playgroundEmployees:m,isEnhancingWithReasoning:!1,reasoningEnhancementProgress:c?100:0})),qn(s,m),c&&k?qn(i,k):sessionStorage.removeItem(i),console.log("[fetchHomeData] Enhanced data cached and displayed")}).catch(m=>{console.warn("[fetchHomeData] Background reasoning enhancement failed:",m),S({isEnhancingWithReasoning:!1,reasoningEnhancementProgress:0})})}catch(n){console.error(`[fetchHomeData] Error fetching home data for projectId: ${e}:`,n),S({isLoadingHomeData:!1}),S({homeEmployees:null,homeMetrics:null,aiAssistantEmployees:null,playgroundEmployees:null})}},fetchAIAssistantData:async(e,h=!1)=>{if(!e){console.log("[fetchAIAssistantData] No projectId, resetting data."),S({aiAssistantEmployees:null,isLoadingAIAssistantData:!1});return}if(console.log(`[fetchAIAssistantData] Triggered for projectId: ${e}. ForceRefresh: ${h}.`),h){console.log("[fetchAIAssistantData] Redirecting to fetchHomeData for consistency."),await _().fetchHomeData(e,!0);return}_().aiAssistantEmployees?console.log("[fetchAIAssistantData] Using existing cached AI data."):(console.log("[fetchAIAssistantData] No cached AI data, calling fetchHomeData..."),await _().fetchHomeData(e,!1))},fetchPlaygroundData:async(e,h=!1)=>{if(!e){console.log("[fetchPlaygroundData] No projectId, resetting data."),S({playgroundEmployees:null,playgroundTreatments:null,isLoadingPlaygroundData:!1});return}if(console.log(`[fetchPlaygroundData] Triggered for projectId: ${e}. ForceRefresh: ${h}.`),h){console.log("[fetchPlaygroundData] Redirecting to fetchHomeData for employee consistency."),await _().fetchHomeData(e,!0);return}_().playgroundEmployees?console.log("[fetchPlaygroundData] Using existing cached playground employees."):(console.log("[fetchPlaygroundData] No cached playground employees, calling fetchHomeData..."),await _().fetchHomeData(e,!1))},resetCache:()=>{console.log("[DataCache] Resetting global cache..."),S({homeEmployees:null,homeMetrics:null,aiAssistantEmployees:null,playgroundEmployees:null,playgroundTreatments:null,isLoadingHomeData:!1,isLoadingAIAssistantData:!1,isLoadingPlaygroundData:!1});const e=["home_employees_","home_metrics_"],h=["churnvision-employees-cache-"];try{for(let p=0;p<sessionStorage.length;p++){const c=sessionStorage.key(p);c&&e.some(s=>c.startsWith(s))&&(sessionStorage.removeItem(c),console.log(`[DataCache] Removed sessionStorage item: ${c}`),p--)}}catch(p){console.warn("[DataCache] Error clearing sessionStorage:",p)}try{for(let p=0;p<localStorage.length;p++){const c=localStorage.key(p);c&&h.some(s=>c.startsWith(s))&&(localStorage.removeItem(c),console.log(`[DataCache] Removed localStorage item: ${c}`),p--)}}catch(p){console.warn("[DataCache] Error clearing localStorage:",p)}console.log("[DataCache] Global cache state reset. Known persistent storage items cleared.")},fetchTrainingStatus:async e=>{if(!e){console.log("[fetchTrainingStatus] No projectId, skipping status fetch.");return}try{try{const h=await et.get("/churn/model/metrics"),p=_().trainingStatus,c={status:"complete",progress:100,message:"Model trained successfully",companyId:e,startTime:h.data.last_trained?new Date(h.data.last_trained):void 0,endTime:h.data.last_trained?new Date(h.data.last_trained):void 0},s=p?.status!=="complete";S({trainingStatus:c,isTrainingComplete:s}),s&&(console.log(`[DataCache] Model training completed for projectId: ${e}. Forcing data refresh.`),setTimeout(()=>_().fetchHomeData(e,!0),100))}catch(h){h.response&&h.response.status===404?S({trainingStatus:{status:"idle",progress:0,message:"No model trained",companyId:e},isTrainingComplete:!1}):(console.error("[DataCache] Failed to get training status:",h),S({trainingStatus:{status:"error",progress:0,message:"Failed to fetch status",error:h.message,companyId:e},isTrainingComplete:!1}))}}catch(h){console.error(`[DataCache] Error fetching training status for projectId: ${e}:`,h)}},startPollingTrainingStatus:(e,h=5e3)=>{if(!e){console.log("[startPollingTrainingStatus] No projectId, cannot start polling.");return}_().stopPollingTrainingStatus(),console.log(`[DataCache] Starting training status polling for projectId: ${e} every ${h}ms`),_().fetchTrainingStatus(e);const p=setInterval(()=>{const c=_().trainingStatus?.status;c!=="complete"&&c!=="error"?_().fetchTrainingStatus(e):(console.log(`[DataCache] Training status for projectId ${e} is ${c}, stopping polling.`),_().stopPollingTrainingStatus())},h);S({pollingIntervalId:p})},stopPollingTrainingStatus:()=>{const e=_().pollingIntervalId;e&&(console.log("[DataCache] Stopping training status polling."),clearInterval(e),S({pollingIntervalId:null}))}})),Ff=async(S,_,e)=>{try{console.log(`Starting reasoning enhancement for ${S.length} employees`);const h=Date.now();if(S.length===0)return[];if(!e?.modelReady)return console.log("Skipping reasoning enhancement because the churn model is not trained."),_?.(100),S.map(l=>({...l,tenure_years:l.tenure||0,hasReasoningData:!1,churnProbability:0,reasoningConfidence:void 0,confidenceScore:void 0}));if(S.length<=50)try{const l=S.map(g=>g.hr_code);console.log(`Small dataset (${S.length} employees), processing all at once`),_?.(10);const a=await Nn.getBatchReasoning(l);_?.(80);const o=new Map(a.map(g=>[g.hr_code,g])),d=S.map(g=>{const m=o.get(g.hr_code);return{...g,tenure_years:g.tenure||0,reasoningChurnRisk:m?.churn_risk,hasReasoningData:!!m,churnProbability:m?.churn_risk??g.churnProbability??g.resign_proba??0,reasoningConfidence:m?.confidence_level,confidenceScore:m?.confidence_level?Math.round(m.confidence_level*100):g.confidenceScore}});_?.(100);const f=Date.now()-h,u=d.filter(g=>g.hasReasoningData).length;return console.log(`Enhanced ${d.length} employees with reasoning data in ${f}ms. ${u} have reasoning data.`),d}catch(l){return console.warn("Failed to get reasoning data for small dataset, falling back to original data:",l),_?.(100),S.map(a=>({...a,tenure_years:a.tenure||0,hasReasoningData:!1,churnProbability:a.churnProbability??a.resign_proba??0,reasoningConfidence:void 0,confidenceScore:a.confidenceScore}))}const p=S.map(l=>l.hr_code),c=50,s=[],i=[];for(let l=0;l<p.length;l+=c)i.push(p.slice(l,l+c));_?.(5);let r=0;for(let l=0;l<i.length;l++){const a=i[l];try{console.log(`Processing reasoning batch ${l+1}/${i.length} (${a.length} employees)`),l>0&&l%5===0&&await new Promise(m=>setTimeout(m,10));const d=await Nn.getBatchReasoning(a),f=new Map(d.map(m=>[m.hr_code,m])),g=S.filter(m=>a.includes(m.hr_code)).map(m=>{const k=f.get(m.hr_code);return{...m,tenure_years:m.tenure||0,reasoningChurnRisk:k?.churn_risk,hasReasoningData:!!k,churnProbability:k?.churn_risk??m.churnProbability??m.resign_proba??0,reasoningConfidence:k?.confidence_level,confidenceScore:k?.confidence_level?Math.round(k.confidence_level*100):m.confidenceScore}});s.push(...g)}catch(d){console.warn(`Failed to get reasoning data for batch ${l+1}:`,d);const u=S.filter(g=>a.includes(g.hr_code)).map(g=>({...g,tenure_years:g.tenure||0,hasReasoningData:!1,churnProbability:g.churnProbability??g.resign_proba??0,reasoningConfidence:void 0,confidenceScore:g.confidenceScore}));s.push(...u)}r++;const o=Math.min(95,5+r/i.length*90);(r%2===0||r===i.length)&&_?.(o)}_?.(100);const t=Date.now()-h,n=s.filter(l=>l.hasReasoningData).length;return console.log(`Enhanced ${s.length} employees with reasoning data in ${t}ms. ${n} have reasoning data.`),s}catch(h){return console.error("Error enhancing employees with reasoning:",h),_?.(100),S.map(p=>({...p,tenure_years:p.tenure||0,hasReasoningData:!1,churnProbability:p.churnProbability??p.resign_proba??0,reasoningConfidence:void 0,confidenceScore:p.confidenceScore}))}},bn="churnvision-onboarding-completed",qs="cv:onboarding-reset",Ws="cv:onboarding-complete";function Zo(){const[S,_]=W.useState(!1),[e,h]=W.useState(!0);return W.useEffect(()=>{const s=localStorage.getItem(bn);_(!s),h(!1);const i=()=>_(!0),r=()=>_(!1);window.addEventListener(qs,i),window.addEventListener(Ws,r);const t=n=>{if(n.key===bn){const l=localStorage.getItem(bn);_(!l)}};return window.addEventListener("storage",t),()=>{window.removeEventListener(qs,i),window.removeEventListener(Ws,r),window.removeEventListener("storage",t)}},[]),{showOnboarding:S,isLoading:e,completeOnboarding:()=>{localStorage.setItem(bn,"true"),_(!1),window.dispatchEvent(new Event(Ws))},resetOnboarding:()=>{localStorage.removeItem(bn),_(!0),window.dispatchEvent(new Event(qs))}}}const Bf=({isOpen:S,onClose:_,onComplete:e,currentMode:h,onModeChange:p,className:c})=>{const[s,i]=W.useState(0),[r,t]=W.useState(!1),[n,l]=W.useState(new Set),[a,o]=W.useState(!1),f=[{id:"welcome",title:"Welcome to ChurnVision",description:"Take a quick tour of the features that are available right now.",position:"center",action:"none",content:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx(eu,{className:"w-10 h-10 text-white"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Your Retention Command Center"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Well highlight how to prepare your data, monitor churn risk, simulate interventions, and collaborate with the Echo AI assistant."}),y.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[y.jsxs("span",{className:"flex items-center space-x-1",children:[y.jsx(Tr,{className:"w-4 h-4"}),y.jsx("span",{children:"~3 minutes"})]}),y.jsxs("span",{className:"flex items-center space-x-1",children:[y.jsx(zn,{className:"w-4 h-4"}),y.jsx("span",{children:"Product tour"})]})]})]})},{id:"data-readiness",title:"Prepare Your Data",description:"Upload and validate HR data before running predictions.",position:"center",action:"none",content:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[y.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:y.jsx(ss,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Centralized onboarding"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use the Data Management workspace to import CSV or Excel files, monitor upload progress, and store historical versions."})]})]}),y.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(an,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Validation checks"})," flag schema issues, missing columns, leakage risks, and empty datasets before training."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(is,{className:"w-4 h-4 text-blue-500 dark:text-blue-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Sample previews"})," let you inspect employee rows and confirm mappings prior to ingestion."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ls,{className:"w-4 h-4 text-amber-500 dark:text-amber-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Guided fixes"})," provide clear messaging so stakeholders know how to resolve each issue."]})]})]})]})},{id:"risk-overview",title:"Monitor Churn Risk",description:"Track key churn metrics and AI insights on the Home dashboard.",position:"center",action:"none",content:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[y.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg flex items-center justify-center",children:y.jsx(Ni,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Live risk monitoring"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The Home view surfaces risk distribution, dynamic thresholds, and autogenerated narrative commentary for your current dataset."})]})]}),y.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(En,{className:"w-4 h-4 text-purple-500 dark:text-purple-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"AI insights"})," summarise department trends, risk drivers, and recommended focus areas."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(zn,{className:"w-4 h-4 text-rose-500 dark:text-rose-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Dynamic thresholds"})," adapt automatically so teams share a consistent definition of high, medium, and low risk."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(is,{className:"w-4 h-4 text-slate-500 dark:text-slate-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Employee search"})," makes it easy to jump from overview metrics to individual profiles."]})]})]})]})},{id:"scenario-playground",title:"Experiment in the Playground",description:"Model treatments, compare scenarios, and forecast retention impact.",position:"center",action:"none",content:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[y.jsx("div",{className:"w-12 h-12 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg flex items-center justify-center",children:y.jsx(mo,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Interactive scenario planning"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select an employee to view current predictions, apply AI-recommended treatments, and track how survival curves shift over time."})]})]}),y.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(go,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Scenario comparison"})," charts baseline vs. post-treatment retention with automatic top-line metrics."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(is,{className:"w-4 h-4 text-teal-500 dark:text-teal-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Mass treatment mode"})," prioritizes cohorts, applies interventions in bulk, and reports aggregate ROI."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(an,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Leakage-safe simulations"})," reuse the validated model and respect the data diagnostics you completed earlier."]})]})]})]})},{id:"treatment-tracking",title:"Track Outcomes & ROI",description:"Follow up on applied treatments and measure impact over time.",position:"center",action:"none",content:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[y.jsx("div",{className:"w-12 h-12 bg-orange-50 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:y.jsx(tu,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Treatment tracker"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Review which actions were applied, how much value they generated, and which employees still need attention."})]})]}),y.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(un,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Outcome summaries"})," capture post-treatment churn probability, ELTV lift, and ROI for every intervention."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ls,{className:"w-4 h-4 text-amber-500 dark:text-amber-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Prioritized follow-ups"})," highlight employees still in queue and surface the highest value next steps."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(zn,{className:"w-4 h-4 text-rose-500 dark:text-rose-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Budget awareness"})," keeps track of treatment cost ceilings so teams stay within constraints."]})]})]})]})},{id:"ai-assistant",title:"Chat with Echo AI",description:"Use the built-in Echo assistant for guidance, explanations, and quick reports.",position:"center",action:"none",content:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[y.jsx("div",{className:"w-12 h-12 bg-sky-50 dark:bg-sky-900/20 rounded-lg flex items-center justify-center",children:y.jsx(gs,{className:"w-6 h-6 text-sky-600 dark:text-sky-400"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Echo assistant"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ask natural-language questions about churn metrics, treatments, and data quality. Echo replies with timestamps, intent labels, and confidence cues for transparency."})]})]}),y.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ls,{className:"w-4 h-4 text-amber-500 dark:text-amber-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Explainability"}),"request breakdowns of why an employee is high risk or how a metric was calculated."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(zn,{className:"w-4 h-4 text-rose-500 dark:text-rose-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Contextual prompts"})," keep track of recent treatments, validation results, and dashboard insights."]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(an,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-300 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Accuracy reminders"})," appear in the chat footer so end users know when to double-check responses."]})]})]})]})},{id:"completion",title:"You&rsquo;re Ready to Go",description:"Put your data, insights, and interventions to work.",position:"center",action:"none",content:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx(un,{className:"w-10 h-10 text-white"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Next Steps"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Start by validating your latest dataset, then monitor the Home dashboard, explore the Playground, and keep the Echo assistant handy for on-the-fly questions."}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-left",children:[y.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Helpful reminders"}),y.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[y.jsx("li",{children:" Re-run validation whenever a new file is uploaded."}),y.jsx("li",{children:" Use scenario snapshots to explain proposed interventions."}),y.jsx("li",{children:" Track applied treatments so ROI stays visible to stakeholders."}),y.jsx("li",{children:" Reference the chat disclaimer before you share AI-generated output."})]})]})]})}].filter(L=>!L.mode||L.mode===h);W.useEffect(()=>{if(!r||!S)return;const L=setTimeout(()=>{s<f.length-1?i(z=>z+1):t(!1)},5e3);return()=>clearTimeout(L)},[s,r,S,f.length]),W.useEffect(()=>{if(!S)return;const L=z=>{switch(z.key){case"ArrowRight":case" ":z.preventDefault(),u();break;case"ArrowLeft":z.preventDefault(),g();break;case"Escape":z.preventDefault(),o(!0);break}};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[S,s]);const u=W.useCallback(()=>{if(s<f.length-1){const L=f[s].id;l(z=>new Set([...z,L])),i(z=>z+1)}else m()},[s,f]),g=W.useCallback(()=>{s>0&&i(L=>L-1)},[s]),m=W.useCallback(()=>{localStorage.setItem("tutorial-completed","true"),localStorage.setItem("tutorial-completion-date",new Date().toISOString());const L=JSON.parse(localStorage.getItem("tutorial-usage")||"{}");L.completed=!0,L.completionDate=new Date().toISOString(),L.stepsCompleted=n.size,localStorage.setItem("tutorial-usage",JSON.stringify(L)),e()},[n.size,e]),k=W.useCallback(()=>{const L=JSON.parse(localStorage.getItem("tutorial-usage")||"{}");L.skipped=!0,L.skipDate=new Date().toISOString(),L.stepsCompleted=n.size,localStorage.setItem("tutorial-usage",JSON.stringify(L)),_()},[n.size,_]),E=f[s],A=(s+1)/f.length*100;return!S||!E?null:y.jsx(zr,{children:y.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[y.jsxs(at.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:lt("bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",c),children:[y.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Step ",s+1," of ",f.length]}),y.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 max-w-32",children:y.jsx(at.div,{className:"bg-blue-600 h-2 rounded-full",initial:{width:0},animate:{width:`${A}%`},transition:{duration:.3}})})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("button",{onClick:()=>t(!r),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded",title:r?"Pause":"Play",children:r?y.jsx(Zc,{className:"w-4 h-4"}):y.jsx(Jc,{className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>o(!0),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded",title:"Close Tutorial",children:y.jsx(Br,{className:"w-4 h-4"})})]})]})}),y.jsxs("div",{className:"px-6 py-8",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:E.title}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:E.description})]}),y.jsx("div",{className:"mb-8",children:E.content})]}),y.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("button",{onClick:g,disabled:s===0,className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[y.jsx(Qc,{className:"w-4 h-4"}),y.jsx("span",{children:"Previous"})]}),y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:"Skip Tutorial"}),y.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[y.jsx("span",{children:s===f.length-1?"Complete":"Next"}),s<f.length-1&&y.jsx(Sn,{className:"w-4 h-4"})]})]})]})})]}),y.jsx(zr,{children:a&&y.jsx(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Skip Tutorial?"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Are you sure you want to skip the tutorial? You can always access it later from the help menu."}),y.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[y.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:"Continue Tutorial"}),y.jsx("button",{onClick:k,className:"px-4 py-2 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Skip Tutorial"})]})]})})})]})})};function $f(){return y.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-white focus:text-gray-900 focus:shadow-lg focus:rounded-md",children:"Skip to main content"})}const Zr={DEBUG:0,INFO:1,WARN:2,ERROR:3};class zf{currentLevel;isDevelopment;constructor(){this.isDevelopment=!1,this.currentLevel=this.isDevelopment?Zr.DEBUG:Zr.INFO}shouldLog(_){return _>=this.currentLevel}formatMessage(_,e,h,p){const s=`[${new Date().toISOString()}] [${_}] [${e}]`;p?console.log(`${s} ${h}`,p):console.log(`${s} ${h}`)}debug(_,e,h){this.shouldLog(Zr.DEBUG)&&this.formatMessage("DEBUG",_,e,h)}info(_,e,h){this.shouldLog(Zr.INFO)&&this.formatMessage("INFO",_,e,h)}warn(_,e,h){this.shouldLog(Zr.WARN)&&this.formatMessage("WARN",_,e,h)}error(_,e,h){if(this.shouldLog(Zr.ERROR)){const c=`[${new Date().toISOString()}] [ERROR] [${_}]`;h instanceof Error?console.error(`${c} ${e}`,{message:h.message,stack:h.stack,name:h.name}):h?console.error(`${c} ${e}`,h):console.error(`${c} ${e}`)}}router={info:(_,e)=>this.info("Router",_,e),debug:(_,e)=>this.debug("Router",_,e),warn:(_,e)=>this.warn("Router",_,e),error:(_,e)=>this.error("Router",_,e)};serviceWorker={info:(_,e)=>this.info("ServiceWorker",_,e),debug:(_,e)=>this.debug("ServiceWorker",_,e),warn:(_,e)=>this.warn("ServiceWorker",_,e),error:(_,e)=>this.error("ServiceWorker",_,e)};project={info:(_,e)=>this.info("Project",_,e),debug:(_,e)=>this.debug("Project",_,e),warn:(_,e)=>this.warn("Project",_,e),error:(_,e)=>this.error("Project",_,e)};cache={info:(_,e)=>this.info("Cache",_,e),debug:(_,e)=>this.debug("Cache",_,e),warn:(_,e)=>this.warn("Cache",_,e),error:(_,e)=>this.error("Cache",_,e)};ui={info:(_,e)=>this.info("UI",_,e),debug:(_,e)=>this.debug("UI",_,e),warn:(_,e)=>this.warn("UI",_,e),error:(_,e)=>this.error("UI",_,e)}}const Xt=new zf,Jo=W.createContext(void 0);function Uf({children:S}){const[_,e]=W.useState(null),[h,p]=W.useState(!0),c=nn(t=>t.resetCache),s=async()=>{Xt.project.info("Attempting to refresh projects list...");try{const t=await et.get("/projects");Xt.project.info("Projects list refreshed successfully"),t.data.length>0&&!_&&e(t.data[0])}catch(t){Xt.project.error("Error refreshing projects list",t)}},i=t=>{e(t),t?localStorage.setItem("activeProjectId",t.id):(localStorage.removeItem("activeProjectId"),c())};W.useEffect(()=>{(async()=>{p(!0),Xt.project.info("Attempting to fetch initial active project...");try{const n=localStorage.getItem("activeProjectId");if(n)try{const l=await et.get(`/projects/${n}`);Xt.project.info("Setting initial active project",{projectName:l.data.name}),e(l.data)}catch{Xt.project.warn("Saved project not found, fetching all projects"),localStorage.removeItem("activeProjectId"),await s()}else await s()}catch(n){Xt.project.error("Error fetching initial active project:",n),e(null),c()}finally{Xt.project.info("Finished fetching initial project."),p(!1)}})()},[c]);const r=W.useMemo(()=>({activeProject:_,isLoadingProject:h,refreshProjects:s,setActiveProject:i}),[_,h]);return y.jsx(Jo.Provider,{value:r,children:S})}function Qo(){const S=W.useContext(Jo);if(S===void 0)throw new Error("useProject must be used within a ProjectProvider");return S}var us={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Hf=us.exports,Ma;function Vf(){return Ma||(Ma=1,function(S,_){((e,h)=>{S.exports=h()})(Hf,function e(){var h=typeof self<"u"?self:typeof window<"u"?window:h!==void 0?h:{},p,c=!h.document&&!!h.postMessage,s=h.IS_PAPA_WORKER||!1,i={},r=0,t={};function n(R){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(I){var B=A(I);B.chunkSize=parseInt(B.chunkSize),I.step||I.chunk||(B.chunkSize=null),this._handle=new f(B),(this._handle.streamer=this)._config=B}.call(this,R),this.parseChunk=function(I,B){var H=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<H){let C=this._config.newline;C||($=this._config.quoteChar||'"',C=this._handle.guessLineEndings(I,$)),I=[...I.split(C).slice(H)].join(C)}this.isFirstChunk&&z(this._config.beforeFirstChunk)&&($=this._config.beforeFirstChunk(I))!==void 0&&(I=$),this.isFirstChunk=!1,this._halted=!1;var H=this._partialLine+I,$=(this._partialLine="",this._handle.parse(H,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(I=$.meta.cursor,H=(this._finished||(this._partialLine=H.substring(I-this._baseIndex),this._baseIndex=I),$&&$.data&&(this._rowCount+=$.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)h.postMessage({results:$,workerId:t.WORKER_ID,finished:H});else if(z(this._config.chunk)&&!B){if(this._config.chunk($,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=$=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat($.data),this._completeResults.errors=this._completeResults.errors.concat($.errors),this._completeResults.meta=$.meta),this._completed||!H||!z(this._config.complete)||$&&$.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||$&&$.meta.paused||this._nextChunk(),$}this._halted=!0},this._sendError=function(I){z(this._config.error)?this._config.error(I):s&&this._config.error&&h.postMessage({workerId:t.WORKER_ID,error:I,finished:!1})}}function l(R){var I;(R=R||{}).chunkSize||(R.chunkSize=t.RemoteChunkSize),n.call(this,R),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(B){this._input=B,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(I=new XMLHttpRequest,this._config.withCredentials&&(I.withCredentials=this._config.withCredentials),c||(I.onload=L(this._chunkLoaded,this),I.onerror=L(this._chunkError,this)),I.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var B,H=this._config.downloadRequestHeaders;for(B in H)I.setRequestHeader(B,H[B])}var $;this._config.chunkSize&&($=this._start+this._config.chunkSize-1,I.setRequestHeader("Range","bytes="+this._start+"-"+$));try{I.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}c&&I.status===0&&this._chunkError()}},this._chunkLoaded=function(){I.readyState===4&&(I.status<200||400<=I.status?this._chunkError():(this._start+=this._config.chunkSize||I.responseText.length,this._finished=!this._config.chunkSize||this._start>=(B=>(B=B.getResponseHeader("Content-Range"))!==null?parseInt(B.substring(B.lastIndexOf("/")+1)):-1)(I),this.parseChunk(I.responseText)))},this._chunkError=function(B){B=I.statusText||B,this._sendError(new Error(B))}}function a(R){(R=R||{}).chunkSize||(R.chunkSize=t.LocalChunkSize),n.call(this,R);var I,B,H=typeof FileReader<"u";this.stream=function($){this._input=$,B=$.slice||$.webkitSlice||$.mozSlice,H?((I=new FileReader).onload=L(this._chunkLoaded,this),I.onerror=L(this._chunkError,this)):I=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var $=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),$=B.call($,this._start,C)),I.readAsText($,this._config.encoding));H||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function($){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk($.target.result)},this._chunkError=function(){this._sendError(I.error)}}function o(R){var I;n.call(this,R=R||{}),this.stream=function(B){return I=B,this._nextChunk()},this._nextChunk=function(){var B,H;if(!this._finished)return B=this._config.chunkSize,I=B?(H=I.substring(0,B),I.substring(B)):(H=I,""),this._finished=!I,this.parseChunk(H)}}function d(R){n.call(this,R=R||{});var I=[],B=!0,H=!1;this.pause=function(){n.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){n.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function($){this._input=$,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){H&&I.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),I.length?this.parseChunk(I.shift()):B=!0},this._streamData=L(function($){try{I.push(typeof $=="string"?$:$.toString(this._config.encoding)),B&&(B=!1,this._checkIsFinished(),this.parseChunk(I.shift()))}catch(C){this._streamError(C)}},this),this._streamError=L(function($){this._streamCleanUp(),this._sendError($)},this),this._streamEnd=L(function(){this._streamCleanUp(),H=!0,this._streamData("")},this),this._streamCleanUp=L(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(R){var I,B,H,$,C=Math.pow(2,53),T=-C,j=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,b=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,v=this,x=0,w=0,N=!1,P=!1,D=[],V={data:[],errors:[],meta:{}};function q(O){return R.skipEmptyLines==="greedy"?O.join("").trim()==="":O.length===1&&O[0].length===0}function G(){if(V&&H&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+t.DefaultDelimiter+"'"),H=!1),R.skipEmptyLines&&(V.data=V.data.filter(function(K){return!q(K)})),F()){let K=function(Q,Y){z(R.transformHeader)&&(Q=R.transformHeader(Q,Y)),D.push(Q)};if(V)if(Array.isArray(V.data[0])){for(var O=0;F()&&O<V.data.length;O++)V.data[O].forEach(K);V.data.splice(0,1)}else V.data.forEach(K)}function M(K,Q){for(var Y=R.header?{}:[],J=0;J<K.length;J++){var ae=J,ie=K[J],ie=((Z,ne)=>(re=>(R.dynamicTypingFunction&&R.dynamicTyping[re]===void 0&&(R.dynamicTyping[re]=R.dynamicTypingFunction(re)),(R.dynamicTyping[re]||R.dynamicTyping)===!0))(Z)?ne==="true"||ne==="TRUE"||ne!=="false"&&ne!=="FALSE"&&((re=>{if(j.test(re)&&(re=parseFloat(re),T<re&&re<C))return 1})(ne)?parseFloat(ne):b.test(ne)?new Date(ne):ne===""?null:ne):ne)(ae=R.header?J>=D.length?"__parsed_extra":D[J]:ae,ie=R.transform?R.transform(ie,ae):ie);ae==="__parsed_extra"?(Y[ae]=Y[ae]||[],Y[ae].push(ie)):Y[ae]=ie}return R.header&&(J>D.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+D.length+" fields but parsed "+J,w+Q):J<D.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+D.length+" fields but parsed "+J,w+Q)),Y}var U;V&&(R.header||R.dynamicTyping||R.transform)&&(U=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(M),U=V.data.length):V.data=M(V.data,0),R.header&&V.meta&&(V.meta.fields=D),w+=U)}function F(){return R.header&&D.length===0}function X(O,M,U,K){O={type:O,code:M,message:U},K!==void 0&&(O.row=K),V.errors.push(O)}z(R.step)&&($=R.step,R.step=function(O){V=O,F()?G():(G(),V.data.length!==0&&(x+=O.data.length,R.preview&&x>R.preview?B.abort():(V.data=V.data[0],$(V,v))))}),this.parse=function(O,M,U){var K=R.quoteChar||'"',K=(R.newline||(R.newline=this.guessLineEndings(O,K)),H=!1,R.delimiter?z(R.delimiter)&&(R.delimiter=R.delimiter(O),V.meta.delimiter=R.delimiter):((K=((Q,Y,J,ae,ie)=>{var Z,ne,re,ue;ie=ie||[",","	","|",";",t.RECORD_SEP,t.UNIT_SEP];for(var ce=0;ce<ie.length;ce++){for(var te,de=ie[ce],le=0,ve=0,we=0,Se=(re=void 0,new g({comments:ae,delimiter:de,newline:Y,preview:10}).parse(Q)),_e=0;_e<Se.data.length;_e++)J&&q(Se.data[_e])?we++:(te=Se.data[_e].length,ve+=te,re===void 0?re=te:0<te&&(le+=Math.abs(te-re),re=te));0<Se.data.length&&(ve/=Se.data.length-we),(ne===void 0||le<=ne)&&(ue===void 0||ue<ve)&&1.99<ve&&(ne=le,Z=de,ue=ve)}return{successful:!!(R.delimiter=Z),bestDelimiter:Z}})(O,R.newline,R.skipEmptyLines,R.comments,R.delimitersToGuess)).successful?R.delimiter=K.bestDelimiter:(H=!0,R.delimiter=t.DefaultDelimiter),V.meta.delimiter=R.delimiter),A(R));return R.preview&&R.header&&K.preview++,I=O,B=new g(K),V=B.parse(I,M,U),G(),N?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return N},this.pause=function(){N=!0,B.abort(),I=z(R.chunk)?"":I.substring(B.getCharIndex())},this.resume=function(){v.streamer._halted?(N=!1,v.streamer.parseChunk(I,!0)):setTimeout(v.resume,3)},this.aborted=function(){return P},this.abort=function(){P=!0,B.abort(),V.meta.aborted=!0,z(R.complete)&&R.complete(V),I=""},this.guessLineEndings=function(Q,K){Q=Q.substring(0,1048576);var K=new RegExp(u(K)+"([^]*?)"+u(K),"gm"),U=(Q=Q.replace(K,"")).split("\r"),K=Q.split(`
`),Q=1<K.length&&K[0].length<U[0].length;if(U.length===1||Q)return`
`;for(var Y=0,J=0;J<U.length;J++)U[J][0]===`
`&&Y++;return Y>=U.length/2?`\r
`:"\r"}}function u(R){return R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(R){var I=(R=R||{}).delimiter,B=R.newline,H=R.comments,$=R.step,C=R.preview,T=R.fastMode,j=null,b=!1,v=R.quoteChar==null?'"':R.quoteChar,x=v;if(R.escapeChar!==void 0&&(x=R.escapeChar),(typeof I!="string"||-1<t.BAD_DELIMITERS.indexOf(I))&&(I=","),H===I)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||-1<t.BAD_DELIMITERS.indexOf(H))&&(H=!1),B!==`
`&&B!=="\r"&&B!==`\r
`&&(B=`
`);var w=0,N=!1;this.parse=function(P,D,V){if(typeof P!="string")throw new Error("Input must be a string");var q=P.length,G=I.length,F=B.length,X=H.length,O=z($),M=[],U=[],K=[],Q=w=0;if(!P)return le();if(T||T!==!1&&P.indexOf(v)===-1){for(var Y=P.split(B),J=0;J<Y.length;J++){if(K=Y[J],w+=K.length,J!==Y.length-1)w+=B.length;else if(V)return le();if(!H||K.substring(0,X)!==H){if(O){if(M=[],ue(K.split(I)),ve(),N)return le()}else ue(K.split(I));if(C&&C<=J)return M=M.slice(0,C),le(!0)}}return le()}for(var ae=P.indexOf(I,w),ie=P.indexOf(B,w),Z=new RegExp(u(x)+u(v),"g"),ne=P.indexOf(v,w);;)if(P[w]===v)for(ne=w,w++;;){if((ne=P.indexOf(v,ne+1))===-1)return V||U.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:M.length,index:w}),te();if(ne===q-1)return te(P.substring(w,ne).replace(Z,v));if(v===x&&P[ne+1]===x)ne++;else if(v===x||ne===0||P[ne-1]!==x){ae!==-1&&ae<ne+1&&(ae=P.indexOf(I,ne+1));var re=ce((ie=ie!==-1&&ie<ne+1?P.indexOf(B,ne+1):ie)===-1?ae:Math.min(ae,ie));if(P.substr(ne+1+re,G)===I){K.push(P.substring(w,ne).replace(Z,v)),P[w=ne+1+re+G]!==v&&(ne=P.indexOf(v,w)),ae=P.indexOf(I,w),ie=P.indexOf(B,w);break}if(re=ce(ie),P.substring(ne+1+re,ne+1+re+F)===B){if(K.push(P.substring(w,ne).replace(Z,v)),de(ne+1+re+F),ae=P.indexOf(I,w),ne=P.indexOf(v,w),O&&(ve(),N))return le();if(C&&M.length>=C)return le(!0);break}U.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:M.length,index:w}),ne++}}else if(H&&K.length===0&&P.substring(w,w+X)===H){if(ie===-1)return le();w=ie+F,ie=P.indexOf(B,w),ae=P.indexOf(I,w)}else if(ae!==-1&&(ae<ie||ie===-1))K.push(P.substring(w,ae)),w=ae+G,ae=P.indexOf(I,w);else{if(ie===-1)break;if(K.push(P.substring(w,ie)),de(ie+F),O&&(ve(),N))return le();if(C&&M.length>=C)return le(!0)}return te();function ue(we){M.push(we),Q=w}function ce(we){var Se=0;return Se=we!==-1&&(we=P.substring(ne+1,we))&&we.trim()===""?we.length:Se}function te(we){return V||(we===void 0&&(we=P.substring(w)),K.push(we),w=q,ue(K),O&&ve()),le()}function de(we){w=we,ue(K),K=[],ie=P.indexOf(B,w)}function le(we){if(R.header&&!D&&M.length&&!b){var Se=M[0],_e=Object.create(null),Pe=new Set(Se);let Fe=!1;for(let Oe=0;Oe<Se.length;Oe++){let Me=Se[Oe];if(_e[Me=z(R.transformHeader)?R.transformHeader(Me,Oe):Me]){let Ee,je=_e[Me];for(;Ee=Me+"_"+je,je++,Pe.has(Ee););Pe.add(Ee),Se[Oe]=Ee,_e[Me]++,Fe=!0,(j=j===null?{}:j)[Ee]=Me}else _e[Me]=1,Se[Oe]=Me;Pe.add(Me)}Fe&&console.warn("Duplicate headers found and renamed."),b=!0}return{data:M,errors:U,meta:{delimiter:I,linebreak:B,aborted:N,truncated:!!we,cursor:Q+(D||0),renamedHeaders:j}}}function ve(){$(le()),M=[],U=[]}},this.abort=function(){N=!0},this.getCharIndex=function(){return w}}function m(R){var I=R.data,B=i[I.workerId],H=!1;if(I.error)B.userError(I.error,I.file);else if(I.results&&I.results.data){var $={abort:function(){H=!0,k(I.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:E,resume:E};if(z(B.userStep)){for(var C=0;C<I.results.data.length&&(B.userStep({data:I.results.data[C],errors:I.results.errors,meta:I.results.meta},$),!H);C++);delete I.results}else z(B.userChunk)&&(B.userChunk(I.results,$,I.file),delete I.results)}I.finished&&!H&&k(I.workerId,I.results)}function k(R,I){var B=i[R];z(B.userComplete)&&B.userComplete(I),B.terminate(),delete i[R]}function E(){throw new Error("Not implemented.")}function A(R){if(typeof R!="object"||R===null)return R;var I,B=Array.isArray(R)?[]:{};for(I in R)B[I]=A(R[I]);return B}function L(R,I){return function(){R.apply(I,arguments)}}function z(R){return typeof R=="function"}return t.parse=function(R,I){var B=(I=I||{}).dynamicTyping||!1;if(z(B)&&(I.dynamicTypingFunction=B,B={}),I.dynamicTyping=B,I.transform=!!z(I.transform)&&I.transform,!I.worker||!t.WORKERS_SUPPORTED)return B=null,t.NODE_STREAM_INPUT,typeof R=="string"?(R=(H=>H.charCodeAt(0)!==65279?H:H.slice(1))(R),B=new(I.download?l:o)(I)):R.readable===!0&&z(R.read)&&z(R.on)?B=new d(I):(h.File&&R instanceof File||R instanceof Object)&&(B=new a(I)),B.stream(R);(B=(()=>{var H;return!!t.WORKERS_SUPPORTED&&(H=(()=>{var $=h.URL||h.webkitURL||null,C=e.toString();return t.BLOB_URL||(t.BLOB_URL=$.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(H=new h.Worker(H)).onmessage=m,H.id=r++,i[H.id]=H)})()).userStep=I.step,B.userChunk=I.chunk,B.userComplete=I.complete,B.userError=I.error,I.step=z(I.step),I.chunk=z(I.chunk),I.complete=z(I.complete),I.error=z(I.error),delete I.worker,B.postMessage({input:R,config:I,workerId:B.id})},t.unparse=function(R,I){var B=!1,H=!0,$=",",C=`\r
`,T='"',j=T+T,b=!1,v=null,x=!1,w=((()=>{if(typeof I=="object"){if(typeof I.delimiter!="string"||t.BAD_DELIMITERS.filter(function(D){return I.delimiter.indexOf(D)!==-1}).length||($=I.delimiter),typeof I.quotes!="boolean"&&typeof I.quotes!="function"&&!Array.isArray(I.quotes)||(B=I.quotes),typeof I.skipEmptyLines!="boolean"&&typeof I.skipEmptyLines!="string"||(b=I.skipEmptyLines),typeof I.newline=="string"&&(C=I.newline),typeof I.quoteChar=="string"&&(T=I.quoteChar),typeof I.header=="boolean"&&(H=I.header),Array.isArray(I.columns)){if(I.columns.length===0)throw new Error("Option columns is empty");v=I.columns}I.escapeChar!==void 0&&(j=I.escapeChar+T),I.escapeFormulae instanceof RegExp?x=I.escapeFormulae:typeof I.escapeFormulae=="boolean"&&I.escapeFormulae&&(x=/^[=+\-@\t\r].*$/)}})(),new RegExp(u(T),"g"));if(typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(R)){if(!R.length||Array.isArray(R[0]))return N(null,R,b);if(typeof R[0]=="object")return N(v||Object.keys(R[0]),R,b)}else if(typeof R=="object")return typeof R.data=="string"&&(R.data=JSON.parse(R.data)),Array.isArray(R.data)&&(R.fields||(R.fields=R.meta&&R.meta.fields||v),R.fields||(R.fields=Array.isArray(R.data[0])?R.fields:typeof R.data[0]=="object"?Object.keys(R.data[0]):[]),Array.isArray(R.data[0])||typeof R.data[0]=="object"||(R.data=[R.data])),N(R.fields||[],R.data||[],b);throw new Error("Unable to serialize unrecognized input");function N(D,V,q){var G="",F=(typeof D=="string"&&(D=JSON.parse(D)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(D)&&0<D.length),X=!Array.isArray(V[0]);if(F&&H){for(var O=0;O<D.length;O++)0<O&&(G+=$),G+=P(D[O],O);0<V.length&&(G+=C)}for(var M=0;M<V.length;M++){var U=(F?D:V[M]).length,K=!1,Q=F?Object.keys(V[M]).length===0:V[M].length===0;if(q&&!F&&(K=q==="greedy"?V[M].join("").trim()==="":V[M].length===1&&V[M][0].length===0),q==="greedy"&&F){for(var Y=[],J=0;J<U;J++){var ae=X?D[J]:J;Y.push(V[M][ae])}K=Y.join("").trim()===""}if(!K){for(var ie=0;ie<U;ie++){0<ie&&!Q&&(G+=$);var Z=F&&X?D[ie]:ie;G+=P(V[M][Z],ie)}M<V.length-1&&(!q||0<U&&!Q)&&(G+=C)}}return G}function P(D,V){var q,G;return D==null?"":D.constructor===Date?JSON.stringify(D).slice(1,25):(G=!1,x&&typeof D=="string"&&x.test(D)&&(D="'"+D,G=!0),q=D.toString().replace(w,j),(G=G||B===!0||typeof B=="function"&&B(D,V)||Array.isArray(B)&&B[V]||((F,X)=>{for(var O=0;O<X.length;O++)if(-1<F.indexOf(X[O]))return!0;return!1})(q,t.BAD_DELIMITERS)||-1<q.indexOf($)||q.charAt(0)===" "||q.charAt(q.length-1)===" ")?T+q+T:q)}},t.RECORD_SEP="",t.UNIT_SEP="",t.BYTE_ORDER_MARK="\uFEFF",t.BAD_DELIMITERS=["\r",`
`,'"',t.BYTE_ORDER_MARK],t.WORKERS_SUPPORTED=!c&&!!h.Worker,t.NODE_STREAM_INPUT=1,t.LocalChunkSize=10485760,t.RemoteChunkSize=5242880,t.DefaultDelimiter=",",t.Parser=g,t.ParserHandle=f,t.NetworkStreamer=l,t.FileStreamer=a,t.StringStreamer=o,t.ReadableStreamStreamer=d,h.jQuery&&((p=h.jQuery).fn.parse=function(R){var I=R.config||{},B=[];return this.each(function(C){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&h.FileReader)||!this.files||this.files.length===0)return!0;for(var T=0;T<this.files.length;T++)B.push({file:this.files[T],inputElem:this,instanceConfig:p.extend({},I)})}),H(),this;function H(){if(B.length===0)z(R.complete)&&R.complete();else{var C,T,j,b,v=B[0];if(z(R.before)){var x=R.before(v.file,v.inputElem);if(typeof x=="object"){if(x.action==="abort")return C="AbortError",T=v.file,j=v.inputElem,b=x.reason,void(z(R.error)&&R.error({name:C},T,j,b));if(x.action==="skip")return void $();typeof x.config=="object"&&(v.instanceConfig=p.extend(v.instanceConfig,x.config))}else if(x==="skip")return void $()}var w=v.instanceConfig.complete;v.instanceConfig.complete=function(N){z(w)&&w(N,v.file,v.inputElem),$()},t.parse(v.file,v.instanceConfig)}}function $(){B.splice(0,1),H()}}),s&&(h.onmessage=function(R){R=R.data,t.WORKER_ID===void 0&&R&&(t.WORKER_ID=R.workerId),typeof R.input=="string"?h.postMessage({workerId:t.WORKER_ID,results:t.parse(R.input,R.config),finished:!0}):(h.File&&R.input instanceof File||R.input instanceof Object)&&(R=t.parse(R.input,R.config))&&h.postMessage({workerId:t.WORKER_ID,results:R,finished:!0})}),(l.prototype=Object.create(n.prototype)).constructor=l,(a.prototype=Object.create(n.prototype)).constructor=a,(o.prototype=Object.create(o.prototype)).constructor=o,(d.prototype=Object.create(n.prototype)).constructor=d,t})}(us)),us.exports}var vi=Vf();const qf=Ti(vi);function Wn(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xs={exports:{}};/*! ExcelJS 19-10-2023 */var Ra;function Wf(){return Ra||(Ra=1,function(S,_){(function(e){S.exports=e()})(function(){return function e(h,p,c){function s(t,n){if(!p[t]){if(!h[t]){var l=typeof Wn=="function"&&Wn;if(!n&&l)return l(t,!0);if(i)return i(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var o=p[t]={exports:{}};h[t][0].call(o.exports,function(d){return s(h[t][1][d]||d)},o,o.exports,e,h,p,c)}return p[t].exports}for(var i=typeof Wn=="function"&&Wn,r=0;r<c.length;r++)s(c[r]);return s}({1:[function(e,h,p){const c=e("fs"),s=e("fast-csv"),i=e("dayjs/plugin/customParseFormat"),r=e("dayjs/plugin/utc"),t=e("dayjs").extend(i).extend(r),n=e("../utils/stream-buf"),{fs:{exists:l}}=e("../utils/utils"),a={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};h.exports=class{constructor(o){this.workbook=o,this.worksheet=null}async readFile(o,d){if(d=d||{},!await l(o))throw new Error("File not found: "+o);const f=c.createReadStream(o),u=await this.read(f,d);return f.close(),u}read(o,d){return d=d||{},new Promise((f,u)=>{const g=this.workbook.addWorksheet(d.sheetName),m=d.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],k=d.map||function(A){if(A==="")return null;const L=Number(A);if(!Number.isNaN(L)&&L!==1/0)return L;const z=m.reduce((I,B)=>{if(I)return I;const H=t(A,B,!0);return H.isValid()?H:null},null);if(z)return new Date(z.valueOf());const R=a[A];return R!==void 0?R:A},E=s.parse(d.parserOptions).on("data",A=>{g.addRow(A.map(k))}).on("end",()=>{E.emit("worksheet",g)});E.on("worksheet",f).on("error",u),o.pipe(E)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(o,d){return new Promise((f,u)=>{d=d||{};const g=this.workbook.getWorksheet(d.sheetName||d.sheetId),m=s.format(d.formatterOptions);o.on("finish",()=>{f()}),m.on("error",u),m.pipe(o);const{dateFormat:k,dateUTC:E}=d,A=d.map||(R=>{if(R){if(R.text||R.hyperlink)return R.hyperlink||R.text||"";if(R.formula||R.result)return R.result||"";if(R instanceof Date)return k?E?t.utc(R).format(k):t(R).format(k):E?t.utc(R).format():t(R).format();if(R.error)return R.error;if(typeof R=="object")return JSON.stringify(R)}return R}),L=d.includeEmptyRows===void 0||d.includeEmptyRows;let z=1;g&&g.eachRow((R,I)=>{if(L)for(;z++<I-1;)m.write([]);const{values:B}=R;B.shift(),m.write(B.map(A)),z=I}),m.end()})}writeFile(o,d){const f={encoding:(d=d||{}).encoding||"utf8"},u=c.createWriteStream(o,f);return this.write(u,d)}async writeBuffer(o){const d=new n;return await this.write(d,o),d.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(e,h,p){const c=e("../utils/col-cache");class s{constructor(r,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=r,t)if(typeof t=="string"){const l=c.decodeAddress(t);this.nativeCol=l.col+n,this.nativeColOff=0,this.nativeRow=l.row+n,this.nativeRowOff=0}else t.nativeCol!==void 0?(this.nativeCol=t.nativeCol||0,this.nativeColOff=t.nativeColOff||0,this.nativeRow=t.nativeRow||0,this.nativeRowOff=t.nativeRowOff||0):t.col!==void 0?(this.col=t.col+n,this.row=t.row+n):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(r){return r instanceof s||r==null?r:new s(r)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(r){this.nativeCol=Math.floor(r),this.nativeColOff=Math.floor((r-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(r){this.nativeRow=Math.floor(r),this.nativeRowOff=Math.floor((r-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(r){this.nativeCol=r.nativeCol,this.nativeColOff=r.nativeColOff,this.nativeRow=r.nativeRow,this.nativeRowOff=r.nativeRowOff}}h.exports=s},{"../utils/col-cache":19}],3:[function(e,h,p){const c=e("../utils/col-cache"),s=e("../utils/under-dash"),i=e("./enums"),{slideFormula:r}=e("../utils/shared-formula"),t=e("./note");class n{constructor(o,d,f){if(!o||!d)throw new Error("A Cell needs a Row");this._row=o,this._column=d,c.validateAddress(f),this._address=f,this._value=l.create(n.Types.Null,this),this.style=this._mergeStyle(o.style,d.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(o){this.style.numFmt=o}get font(){return this.style.font}set font(o){this.style.font=o}get alignment(){return this.style.alignment}set alignment(o){this.style.alignment=o}get border(){return this.style.border}set border(o){this.style.border=o}get fill(){return this.style.fill}set fill(o){this.style.fill=o}get protection(){return this.style.protection}set protection(o){this.style.protection=o}_mergeStyle(o,d,f){const u=o&&o.numFmt||d&&d.numFmt;u&&(f.numFmt=u);const g=o&&o.font||d&&d.font;g&&(f.font=g);const m=o&&o.alignment||d&&d.alignment;m&&(f.alignment=m);const k=o&&o.border||d&&d.border;k&&(f.border=k);const E=o&&o.fill||d&&d.fill;E&&(f.fill=E);const A=o&&o.protection||d&&d.protection;return A&&(f.protection=A),f}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===n.Types.Merge}merge(o,d){this._value.release(),this._value=l.create(n.Types.Merge,this,o),d||(this.style=o.style)}unmerge(){this.type===n.Types.Merge&&(this._value.release(),this._value=l.create(n.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(o){return this._value.type===n.Types.Merge&&this._value.isMergedTo(o)}get master(){return this.type===n.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===n.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(o){this.type!==n.Types.Merge?(this._value.release(),this._value=l.create(l.getType(o),this,o)):this._value.master.value=o}get note(){return this._comment&&this._comment.note}set note(o){this._comment=new t(o)}get text(){return this._value.toString()}get html(){return s.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(o){this.type===n.Types.String&&(this._value=l.create(n.Types.Hyperlink,this,{text:this._value.value,hyperlink:o}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:o}=this._row;return{sheetName:o.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(o){this.names=[o]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(o){const{definedNames:d}=this.workbook;d.removeAllNames(this.fullAddress),o.forEach(f=>{d.addEx(this.fullAddress,f)})}addName(o){this.workbook.definedNames.addEx(this.fullAddress,o)}removeName(o){this.workbook.definedNames.removeEx(this.fullAddress,o)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(o){this._dataValidations.add(this.address,o)}get model(){const{model:o}=this._value;return o.style=this.style,this._comment&&(o.comment=this._comment.model),o}set model(o){if(this._value.release(),this._value=l.create(o.type,this),this._value.model=o,o.comment)switch(o.comment.type){case"note":this._comment=t.fromModel(o.comment)}o.style?this.style=o.style:this.style={}}}n.Types=i.ValueType;const l={getType:a=>a==null?n.Types.Null:a instanceof String||typeof a=="string"?n.Types.String:typeof a=="number"?n.Types.Number:typeof a=="boolean"?n.Types.Boolean:a instanceof Date?n.Types.Date:a.text&&a.hyperlink?n.Types.Hyperlink:a.formula||a.sharedFormula?n.Types.Formula:a.richText?n.Types.RichText:a.sharedString?n.Types.SharedString:a.error?n.Types.Error:n.Types.JSON,types:[{t:n.Types.Null,f:class{constructor(a){this.model={address:a.address,type:n.Types.Null}}get value(){return null}set value(a){}get type(){return n.Types.Null}get effectiveType(){return n.Types.Null}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return""}release(){}toString(){return""}}},{t:n.Types.Number,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.Number,value:o}}get value(){return this.model.value}set value(a){this.model.value=a}get type(){return n.Types.Number}get effectiveType(){return n.Types.Number}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.String,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.String,value:o}}get value(){return this.model.value}set value(a){this.model.value=a}get type(){return n.Types.String}get effectiveType(){return n.Types.String}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:n.Types.Date,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.Date,value:o}}get value(){return this.model.value}set value(a){this.model.value=a}get type(){return n.Types.Date}get effectiveType(){return n.Types.Date}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.Hyperlink,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.Hyperlink,text:o?o.text:void 0,hyperlink:o?o.hyperlink:void 0},o&&o.tooltip&&(this.model.tooltip=o.tooltip)}get value(){const a={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(a.tooltip=this.model.tooltip),a}set value(a){this.model={text:a.text,hyperlink:a.hyperlink},a.tooltip&&(this.model.tooltip=a.tooltip)}get text(){return this.model.text}set text(a){this.model.text=a}get hyperlink(){return this.model.hyperlink}set hyperlink(a){this.model.hyperlink=a}get type(){return n.Types.Hyperlink}get effectiveType(){return n.Types.Hyperlink}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:n.Types.Formula,f:class{constructor(a,o){this.cell=a,this.model={address:a.address,type:n.Types.Formula,shareType:o?o.shareType:void 0,ref:o?o.ref:void 0,formula:o?o.formula:void 0,sharedFormula:o?o.sharedFormula:void 0,result:o?o.result:void 0}}_copyModel(a){const o={},d=f=>{const u=a[f];u&&(o[f]=u)};return d("formula"),d("result"),d("ref"),d("shareType"),d("sharedFormula"),o}get value(){return this._copyModel(this.model)}set value(a){this.model=this._copyModel(a)}validate(a){switch(l.getType(a)){case n.Types.Null:case n.Types.String:case n.Types.Number:case n.Types.Date:break;case n.Types.Hyperlink:case n.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(a){this.model.formula=a}get formulaType(){return this.model.formula?i.FormulaType.Master:this.model.sharedFormula?i.FormulaType.Shared:i.FormulaType.None}get result(){return this.model.result}set result(a){this.model.result=a}get type(){return n.Types.Formula}get effectiveType(){const a=this.model.result;return a==null?i.ValueType.Null:a instanceof String||typeof a=="string"?i.ValueType.String:typeof a=="number"?i.ValueType.Number:a instanceof Date?i.ValueType.Date:a.text&&a.hyperlink?i.ValueType.Hyperlink:a.formula?i.ValueType.Formula:i.ValueType.Null}get address(){return this.model.address}set address(a){this.model.address=a}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:a}=this.cell,o=a.findCell(this.model.sharedFormula);this._translatedFormula=o&&r(o.formula,o.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:n.Types.Merge,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.Merge,master:o?o.address:void 0},this._master=o,o&&o.addMergeRef()}get value(){return this._master.value}set value(a){a instanceof n?(this._master&&this._master.releaseMergeRef(),a.addMergeRef(),this._master=a):this._master.value=a}isMergedTo(a){return a===this._master}get master(){return this._master}get type(){return n.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:n.Types.JSON,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.String,value:JSON.stringify(o),rawValue:o}}get value(){return this.model.rawValue}set value(a){this.model.rawValue=a,this.model.value=JSON.stringify(a)}get type(){return n.Types.String}get effectiveType(){return n.Types.String}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:n.Types.SharedString,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.SharedString,value:o}}get value(){return this.model.value}set value(a){this.model.value=a}get type(){return n.Types.SharedString}get effectiveType(){return n.Types.SharedString}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.RichText,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.String,value:o}}get value(){return this.model.value}set value(a){this.model.value=a}toString(){return this.model.value.richText.map(a=>a.text).join("")}get type(){return n.Types.RichText}get effectiveType(){return n.Types.RichText}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:n.Types.Boolean,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.Boolean,value:o}}get value(){return this.model.value}set value(a){this.model.value=a}get type(){return n.Types.Boolean}get effectiveType(){return n.Types.Boolean}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.Error,f:class{constructor(a,o){this.model={address:a.address,type:n.Types.Error,value:o}}get value(){return this.model.value}set value(a){this.model.value=a}get type(){return n.Types.Error}get effectiveType(){return n.Types.Error}get address(){return this.model.address}set address(a){this.model.address=a}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((a,o)=>(a[o.t]=o.f,a),[]),create(a,o,d){const f=this.types[a];if(!f)throw new Error("Could not create Value of type "+a);return new f(o,d)}};h.exports=n},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(e,h,p){const c=e("../utils/under-dash"),s=e("./enums"),i=e("../utils/col-cache");class r{constructor(n,l,a){this._worksheet=n,this._number=l,a!==!1&&(this.defn=a)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return i.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(n){n?(this.key=n.key,this.width=n.width!==void 0?n.width:9,this.outlineLevel=n.outlineLevel,n.style?this.style=n.style:this.style={},this.header=n.header,this._hidden=!!n.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(n){n!==void 0?(this._header=n,this.headers.forEach((l,a)=>{this._worksheet.getCell(a+1,this.number).value=l})):this._header=void 0}get key(){return this._key}set key(n){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=n,n&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(n){this._hidden=n}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(n){this._outlineLevel=n}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(n){return this.width===n.width&&this.hidden===n.hidden&&this.outlineLevel===n.outlineLevel&&c.isEqual(this.style,n.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const n=this.style;return!n||!(n.font||n.numFmt||n.alignment||n.border||n.fill||n.protection)}get headerCount(){return this.headers.length}eachCell(n,l){const a=this.number;l||(l=n,n=null),this._worksheet.eachRow(n,(o,d)=>{l(o.getCell(a),d)})}get values(){const n=[];return this.eachCell((l,a)=>{l&&l.type!==s.ValueType.Null&&(n[a]=l.value)}),n}set values(n){if(!n)return;const l=this.number;let a=0;n.hasOwnProperty("0")&&(a=1),n.forEach((o,d)=>{this._worksheet.getCell(d+a,l).value=o})}_applyStyle(n,l){return this.style[n]=l,this.eachCell(a=>{a[n]=l}),l}get numFmt(){return this.style.numFmt}set numFmt(n){this._applyStyle("numFmt",n)}get font(){return this.style.font}set font(n){this._applyStyle("font",n)}get alignment(){return this.style.alignment}set alignment(n){this._applyStyle("alignment",n)}get protection(){return this.style.protection}set protection(n){this._applyStyle("protection",n)}get border(){return this.style.border}set border(n){this._applyStyle("border",n)}get fill(){return this.style.fill}set fill(n){this._applyStyle("fill",n)}static toModel(n){const l=[];let a=null;return n&&n.forEach((o,d)=>{o.isDefault?a&&(a=null):a&&o.equivalentTo(a)?a.max=d+1:(a={min:d+1,max:d+1,width:o.width!==void 0?o.width:9,style:o.style,isCustomWidth:o.isCustomWidth,hidden:o.hidden,outlineLevel:o.outlineLevel,collapsed:o.collapsed},l.push(a))}),l.length?l:void 0}static fromModel(n,l){const a=[];let o=1,d=0;for(l=(l=l||[]).sort(function(f,u){return f.min-u.min});d<l.length;){const f=l[d++];for(;o<f.min;)a.push(new r(n,o++));for(;o<=f.max;)a.push(new r(n,o++,f))}return a.length?a:null}}h.exports=r},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(e,h,p){h.exports=class{constructor(c){this.model=c||{}}add(c,s){return this.model[c]=s}find(c){return this.model[c]}remove(c){this.model[c]=void 0}}},{}],6:[function(e,h,p){const c=e("../utils/under-dash"),s=e("../utils/col-cache"),i=e("../utils/cell-matrix"),r=e("./range"),t=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;h.exports=class{constructor(){this.matrixMap={}}getMatrix(n){return this.matrixMap[n]||(this.matrixMap[n]=new i)}add(n,l){const a=s.decodeEx(n);this.addEx(a,l)}addEx(n,l){const a=this.getMatrix(l);if(n.top)for(let o=n.left;o<=n.right;o++)for(let d=n.top;d<=n.bottom;d++){const f={sheetName:n.sheetName,address:s.n2l(o)+d,row:d,col:o};a.addCellEx(f)}else a.addCellEx(n)}remove(n,l){const a=s.decodeEx(n);this.removeEx(a,l)}removeEx(n,l){this.getMatrix(l).removeCellEx(n)}removeAllNames(n){c.each(this.matrixMap,l=>{l.removeCellEx(n)})}forEach(n){c.each(this.matrixMap,(l,a)=>{l.forEach(o=>{n(a,o)})})}getNames(n){return this.getNamesEx(s.decodeEx(n))}getNamesEx(n){return c.map(this.matrixMap,(l,a)=>l.findCellEx(n)&&a).filter(Boolean)}_explore(n,l){l.mark=!1;const{sheetName:a}=l,o=new r(l.row,l.col,l.row,l.col,a);let d,f;function u(m,k){const E=n.findCellAt(a,m,l.col);return!(!E||!E.mark)&&(o[k]=m,E.mark=!1,!0)}for(f=l.row-1;u(f,"top");f--);for(f=l.row+1;u(f,"bottom");f++);function g(m,k){const E=[];for(f=o.top;f<=o.bottom;f++){const A=n.findCellAt(a,f,m);if(!A||!A.mark)return!1;E.push(A)}o[k]=m;for(let A=0;A<E.length;A++)E[A].mark=!1;return!0}for(d=l.col-1;g(d,"left");d--);for(d=l.col+1;g(d,"right");d++);return o}getRanges(n,l){return(l=l||this.matrixMap[n])?(l.forEach(a=>{a.mark=!0}),{name:n,ranges:l.map(a=>a.mark&&this._explore(l,a)).filter(Boolean).map(a=>a.$shortRange)}):{name:n,ranges:[]}}normaliseMatrix(n,l){n.forEachInSheet(l,(a,o,d)=>{a&&(a.row===o&&a.col===d||(a.row=o,a.col=d,a.address=s.n2l(d)+o))})}spliceRows(n,l,a,o){c.each(this.matrixMap,d=>{d.spliceRows(n,l,a,o),this.normaliseMatrix(d,n)})}spliceColumns(n,l,a,o){c.each(this.matrixMap,d=>{d.spliceColumns(n,l,a,o),this.normaliseMatrix(d,n)})}get model(){return c.map(this.matrixMap,(n,l)=>this.getRanges(l,n)).filter(n=>n.ranges.length)}set model(n){const l=this.matrixMap={};n.forEach(a=>{const o=l[a.name]=new i;a.ranges.forEach(d=>{t.test(d.split("!").pop()||"")&&o.addCell(d)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(e,h,p){h.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(e,h,p){const c=e("../utils/col-cache"),s=e("./anchor");h.exports=class{constructor(i,r){this.worksheet=i,this.model=r}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(i){let{type:r,imageId:t,range:n,hyperlinks:l}=i;if(this.type=r,this.imageId=t,r==="image")if(typeof n=="string"){const a=c.decode(n);this.range={tl:new s(this.worksheet,{col:a.left,row:a.top},-1),br:new s(this.worksheet,{col:a.right,row:a.bottom},0),editAs:"oneCell"}}else this.range={tl:new s(this.worksheet,n.tl,0),br:n.br&&new s(this.worksheet,n.br,0),ext:n.ext,editAs:n.editAs,hyperlinks:l||n.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(e,h,p){const c=e("../utils/under-dash");class s{constructor(r){this.note=r}get model(){let r=null;switch(typeof this.note){case"string":r={type:"note",note:{texts:[{text:this.note}]}};break;default:r={type:"note",note:this.note}}return c.deepMerge({},s.DEFAULT_CONFIGS,r)}set model(r){const{note:t}=r,{texts:n}=t;n.length===1&&Object.keys(n[0]).length===1?this.note=n[0].text:this.note=t}static fromModel(r){const t=new s;return t.model=r,t}}s.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},h.exports=s},{"../utils/under-dash":26}],10:[function(e,h,p){const c=e("../utils/col-cache");class s{constructor(){this.decode(arguments)}setTLBR(r,t,n,l,a){if(arguments.length<4){const o=c.decodeAddress(r),d=c.decodeAddress(t);this.model={top:Math.min(o.row,d.row),left:Math.min(o.col,d.col),bottom:Math.max(o.row,d.row),right:Math.max(o.col,d.col),sheetName:n},this.setTLBR(o.row,o.col,d.row,d.col,a)}else this.model={top:Math.min(r,n),left:Math.min(t,l),bottom:Math.max(r,n),right:Math.max(t,l),sheetName:a}}decode(r){switch(r.length){case 5:this.setTLBR(r[0],r[1],r[2],r[3],r[4]);break;case 4:this.setTLBR(r[0],r[1],r[2],r[3]);break;case 3:this.setTLBR(r[0],r[1],r[2]);break;case 2:this.setTLBR(r[0],r[1]);break;case 1:{const t=r[0];if(t instanceof s)this.model={top:t.model.top,left:t.model.left,bottom:t.model.bottom,right:t.model.right,sheetName:t.sheetName};else if(t instanceof Array)this.decode(t);else if(t.top&&t.left&&t.bottom&&t.right)this.model={top:t.top,left:t.left,bottom:t.bottom,right:t.right,sheetName:t.sheetName};else{const n=c.decodeEx(t);n.top?this.model={top:n.top,left:n.left,bottom:n.bottom,right:n.right,sheetName:n.sheetName}:this.model={top:n.row,left:n.col,bottom:n.row,right:n.col,sheetName:n.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+r.length)}}get top(){return this.model.top||1}set top(r){this.model.top=r}get left(){return this.model.left||1}set left(r){this.model.left=r}get bottom(){return this.model.bottom||1}set bottom(r){this.model.bottom=r}get right(){return this.model.right||1}set right(r){this.model.right=r}get sheetName(){return this.model.sheetName}set sheetName(r){this.model.sheetName=r}get _serialisedSheetName(){const{sheetName:r}=this.model;return r?/^[a-zA-Z0-9]*$/.test(r)?r+"!":`'${r}'!`:""}expand(r,t,n,l){(!this.model.top||r<this.top)&&(this.top=r),(!this.model.left||t<this.left)&&(this.left=t),(!this.model.bottom||n>this.bottom)&&(this.bottom=n),(!this.model.right||l>this.right)&&(this.right=l)}expandRow(r){if(r){const{dimensions:t,number:n}=r;t&&this.expand(n,t.min,n,t.max)}}expandToAddress(r){const t=c.decodeEx(r);this.expand(t.row,t.col,t.row,t.col)}get tl(){return c.n2l(this.left)+this.top}get $t$l(){return`$${c.n2l(this.left)}$${this.top}`}get br(){return c.n2l(this.right)+this.bottom}get $b$r(){return`$${c.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(r){return(!r.sheetName||!this.sheetName||r.sheetName===this.sheetName)&&!(r.bottom<this.top)&&!(r.top>this.bottom)&&!(r.right<this.left)&&!(r.left>this.right)}contains(r){const t=c.decodeEx(r);return this.containsEx(t)}containsEx(r){return(!r.sheetName||!this.sheetName||r.sheetName===this.sheetName)&&r.row>=this.top&&r.row<=this.bottom&&r.col>=this.left&&r.col<=this.right}forEachAddress(r){for(let t=this.left;t<=this.right;t++)for(let n=this.top;n<=this.bottom;n++)r(c.encodeAddress(n,t),n,t)}}h.exports=s},{"../utils/col-cache":19}],11:[function(e,h,p){const c=e("../utils/under-dash"),s=e("./enums"),i=e("../utils/col-cache"),r=e("./cell");h.exports=class{constructor(t,n){this._worksheet=t,this._number=n,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(t){return this._cells[t-1]}getCellEx(t){let n=this._cells[t.col-1];if(!n){const l=this._worksheet.getColumn(t.col);n=new r(this,l,t.address),this._cells[t.col-1]=n}return n}getCell(t){if(typeof t=="string"){const n=this._worksheet.getColumnKey(t);t=n?n.number:i.l2n(t)}return this._cells[t-1]||this.getCellEx({address:i.encodeAddress(this._number,t),row:this._number,col:t})}splice(t,n){const l=t+n;for(var a=arguments.length,o=new Array(a>2?a-2:0),d=2;d<a;d++)o[d-2]=arguments[d];const f=o.length-n,u=this._cells.length;let g,m,k;if(f<0)for(g=t+o.length;g<=u;g++)k=this._cells[g-1],m=this._cells[g-f-1],m?(k=this.getCell(g),k.value=m.value,k.style=m.style,k._comment=m._comment):k&&(k.value=null,k.style={},k._comment=void 0);else if(f>0)for(g=u;g>=l;g--)m=this._cells[g-1],m?(k=this.getCell(g+f),k.value=m.value,k.style=m.style,k._comment=m._comment):this._cells[g+f-1]=void 0;for(g=0;g<o.length;g++)k=this.getCell(t+g),k.value=o[g],k.style={},k._comment=void 0}eachCell(t,n){if(n||(n=t,t=null),t&&t.includeEmpty){const l=this._cells.length;for(let a=1;a<=l;a++)n(this.getCell(a),a)}else this._cells.forEach((l,a)=>{l&&l.type!==s.ValueType.Null&&n(l,a+1)})}addPageBreak(t,n){const l=this._worksheet,a=Math.max(0,t-1)||0,o=Math.max(0,n-1)||16838,d={id:this._number,max:o,man:1};a&&(d.min=a),l.rowBreaks.push(d)}get values(){const t=[];return this._cells.forEach(n=>{n&&n.type!==s.ValueType.Null&&(t[n.col]=n.value)}),t}set values(t){if(this._cells=[],t)if(t instanceof Array){let n=0;t.hasOwnProperty("0")&&(n=1),t.forEach((l,a)=>{l!==void 0&&(this.getCellEx({address:i.encodeAddress(this._number,a+n),row:this._number,col:a+n}).value=l)})}else this._worksheet.eachColumnKey((n,l)=>{t[l]!==void 0&&(this.getCellEx({address:i.encodeAddress(this._number,n.number),row:this._number,col:n.number}).value=t[l])})}get hasValues(){return c.some(this._cells,t=>t&&t.type!==s.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let t=0;return this.eachCell(()=>{t++}),t}get dimensions(){let t=0,n=0;return this._cells.forEach(l=>{l&&l.type!==s.ValueType.Null&&((!t||t>l.col)&&(t=l.col),n<l.col&&(n=l.col))}),t>0?{min:t,max:n}:null}_applyStyle(t,n){return this.style[t]=n,this._cells.forEach(l=>{l&&(l[t]=n)}),n}get numFmt(){return this.style.numFmt}set numFmt(t){this._applyStyle("numFmt",t)}get font(){return this.style.font}set font(t){this._applyStyle("font",t)}get alignment(){return this.style.alignment}set alignment(t){this._applyStyle("alignment",t)}get protection(){return this.style.protection}set protection(t){this._applyStyle("protection",t)}get border(){return this.style.border}set border(t){this._applyStyle("border",t)}get fill(){return this.style.fill}set fill(t){this._applyStyle("fill",t)}get hidden(){return!!this._hidden}set hidden(t){this._hidden=t}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(t){this._outlineLevel=t}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const t=[];let n=0,l=0;return this._cells.forEach(a=>{if(a){const o=a.model;o&&((!n||n>a.col)&&(n=a.col),l<a.col&&(l=a.col),t.push(o))}}),this.height||t.length?{cells:t,number:this.number,min:n,max:l,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(t){if(t.number!==this._number)throw new Error("Invalid row number in model");let n;this._cells=[],t.cells.forEach(l=>{switch(l.type){case r.Types.Merge:break;default:{let a;if(l.address)a=i.decodeAddress(l.address);else if(n){const{row:o}=n,d=n.col+1;a={row:o,col:d,address:i.encodeAddress(o,d),$col$row:`$${i.n2l(d)}$${o}`}}n=a,this.getCellEx(a).model=l;break}}}),t.height?this.height=t.height:delete this.height,this.hidden=t.hidden,this.outlineLevel=t.outlineLevel||0,this.style=t.style&&JSON.parse(JSON.stringify(t.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(e,h,p){const c=e("../utils/col-cache");class s{constructor(r,t,n){this.table=r,this.column=t,this.index=n}_set(r,t){this.table.cacheState(),this.column[r]=t}get name(){return this.column.name}set name(r){this._set("name",r)}get filterButton(){return this.column.filterButton}set filterButton(r){this.column.filterButton=r}get style(){return this.column.style}set style(r){this.column.style=r}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(r){this._set("totalsRowLabel",r)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(r){this._set("totalsRowFunction",r)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(r){this._set("totalsRowResult",r)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(r){this._set("totalsRowFormula",r)}}h.exports=class{constructor(i,r){this.worksheet=i,r&&(this.table=r,this.validate(),this.store())}getFormula(i){switch(i.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${i.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${i.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${i.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${i.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${i.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${i.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${i.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${i.name}])`;case"custom":return i.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+i.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:i}=this,r=(f,u,g)=>{f[u]===void 0&&(f[u]=g)};r(i,"headerRow",!0),r(i,"totalsRow",!1),r(i,"style",{}),r(i.style,"theme","TableStyleMedium2"),r(i.style,"showFirstColumn",!1),r(i.style,"showLastColumn",!1),r(i.style,"showRowStripes",!1),r(i.style,"showColumnStripes",!1);const t=(f,u)=>{if(!f)throw new Error(u)};t(i.ref,"Table must have ref"),t(i.columns,"Table must have column definitions"),t(i.rows,"Table must have row definitions"),i.tl=c.decodeAddress(i.ref);const{row:n,col:l}=i.tl;t(n>0,"Table must be on valid row"),t(l>0,"Table must be on valid col");const{width:a,filterHeight:o,tableHeight:d}=this;i.autoFilterRef=c.encode(n,l,n+o-1,l+a-1),i.tableRef=c.encode(n,l,n+d-1,l+a-1),i.columns.forEach((f,u)=>{t(f.name,`Column ${u} must have a name`),u===0?r(f,"totalsRowLabel","Total"):(r(f,"totalsRowFunction","none"),f.totalsRowFormula=this.getFormula(f))})}store(){const i=(o,d)=>{d&&Object.keys(d).forEach(f=>{o[f]=d[f]})},{worksheet:r,table:t}=this,{row:n,col:l}=t.tl;let a=0;if(t.headerRow){const o=r.getRow(n+a++);t.columns.forEach((d,f)=>{const{style:u,name:g}=d,m=o.getCell(l+f);m.value=g,i(m,u)})}if(t.rows.forEach(o=>{const d=r.getRow(n+a++);o.forEach((f,u)=>{const g=d.getCell(l+u);g.value=f,i(g,t.columns[u].style)})}),t.totalsRow){const o=r.getRow(n+a++);t.columns.forEach((d,f)=>{const u=o.getCell(l+f);if(f===0)u.value=d.totalsRowLabel;else{const g=this.getFormula(d);u.value=g?{formula:d.totalsRowFormula,result:d.totalsRowResult}:null}i(u,d.style)})}}load(i){const{table:r}=this,{row:t,col:n}=r.tl;let l=0;if(r.headerRow){const a=i.getRow(t+l++);r.columns.forEach((o,d)=>{a.getCell(n+d).value=o.name})}if(r.rows.forEach(a=>{const o=i.getRow(t+l++);a.forEach((d,f)=>{o.getCell(n+f).value=d})}),r.totalsRow){const a=i.getRow(t+l++);r.columns.forEach((o,d)=>{const f=a.getCell(n+d);d===0?f.value=o.totalsRowLabel:this.getFormula(o)&&(f.value={formula:o.totalsRowFormula,result:o.totalsRowResult})})}}get model(){return this.table}set model(i){this.table=i}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const i=c.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let r=0;r<this._cache.tableHeight;r++){const t=this.worksheet.getRow(i.row+r);for(let n=0;n<this._cache.width;n++)t.getCell(i.col+n).value=null}else{for(let r=this.tableHeight;r<this._cache.tableHeight;r++){const t=this.worksheet.getRow(i.row+r);for(let n=0;n<this._cache.width;n++)t.getCell(i.col+n).value=null}for(let r=0;r<this.tableHeight;r++){const t=this.worksheet.getRow(i.row+r);for(let n=this.width;n<this._cache.width;n++)t.getCell(i.col+n).value=null}}this.store()}addRow(i,r){this.cacheState(),r===void 0?this.table.rows.push(i):this.table.rows.splice(r,0,i)}removeRows(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(i,r)}getColumn(i){const r=this.table.columns[i];return new s(this,r,i)}addColumn(i,r,t){this.cacheState(),t===void 0?(this.table.columns.push(i),this.table.rows.forEach((n,l)=>{n.push(r[l])})):(this.table.columns.splice(t,0,i),this.table.rows.forEach((n,l)=>{n.splice(t,0,r[l])}))}removeColumns(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(i,r),this.table.rows.forEach(t=>{t.splice(i,r)})}_assign(i,r,t){this.cacheState(),i[r]=t}get ref(){return this.table.ref}set ref(i){this._assign(this.table,"ref",i)}get name(){return this.table.name}set name(i){this.table.name=i}get displayName(){return this.table.displyName||this.table.name}set displayNamename(i){this.table.displayName=i}get headerRow(){return this.table.headerRow}set headerRow(i){this._assign(this.table,"headerRow",i)}get totalsRow(){return this.table.totalsRow}set totalsRow(i){this._assign(this.table,"totalsRow",i)}get theme(){return this.table.style.name}set theme(i){this.table.style.name=i}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(i){this.table.style.showFirstColumn=i}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(i){this.table.style.showLastColumn=i}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(i){this.table.style.showRowStripes=i}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(i){this.table.style.showColumnStripes=i}}},{"../utils/col-cache":19}],13:[function(e,h,p){const c=e("./worksheet"),s=e("./defined-names"),i=e("../xlsx/xlsx"),r=e("../csv/csv");h.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new s}get xlsx(){return this._xlsx||(this._xlsx=new i(this)),this._xlsx}get csv(){return this._csv||(this._csv=new r(this)),this._csv}get nextId(){for(let t=1;t<this._worksheets.length;t++)if(!this._worksheets[t])return t;return this._worksheets.length||1}addWorksheet(t,n){const l=this.nextId;n&&(typeof n=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),n={properties:{tabColor:{argb:n}}}):(n.argb||n.theme||n.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),n={properties:{tabColor:n}}));const a=this._worksheets.reduce((f,u)=>(u&&u.orderNo)>f?u.orderNo:f,0),o=Object.assign({},n,{id:l,name:t,orderNo:a+1,workbook:this}),d=new c(o);return this._worksheets[l]=d,d}removeWorksheetEx(t){delete this._worksheets[t.id]}removeWorksheet(t){const n=this.getWorksheet(t);n&&n.destroy()}getWorksheet(t){return t===void 0?this._worksheets.find(Boolean):typeof t=="number"?this._worksheets[t]:typeof t=="string"?this._worksheets.find(n=>n&&n.name===t):void 0}get worksheets(){return this._worksheets.slice(1).sort((t,n)=>t.orderNo-n.orderNo).filter(Boolean)}eachSheet(t){this.worksheets.forEach(n=>{t(n,n.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(t){const n=this.media.length;return this.media.push(Object.assign({},t,{type:"image"})),n}getImage(t){return this.media[t]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(t=>t.model),sheets:this.worksheets.map(t=>t.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(t){this.creator=t.creator,this.lastModifiedBy=t.lastModifiedBy,this.lastPrinted=t.lastPrinted,this.created=t.created,this.modified=t.modified,this.company=t.company,this.manager=t.manager,this.title=t.title,this.subject=t.subject,this.keywords=t.keywords,this.category=t.category,this.description=t.description,this.language=t.language,this.revision=t.revision,this.contentStatus=t.contentStatus,this.properties=t.properties,this.calcProperties=t.calcProperties,this._worksheets=[],t.worksheets.forEach(n=>{const{id:l,name:a,state:o}=n,d=t.sheets&&t.sheets.findIndex(f=>f.id===l);(this._worksheets[l]=new c({id:l,name:a,orderNo:d,state:o,workbook:this})).model=n}),this._definedNames.model=t.definedNames,this.views=t.views,this._themes=t.themes,this.media=t.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(e,h,p){const c=e("../utils/under-dash"),s=e("../utils/col-cache"),i=e("./range"),r=e("./row"),t=e("./column"),n=e("./enums"),l=e("./image"),a=e("./table"),o=e("./data-validations"),d=e("../utils/encryptor"),{copyStyle:f}=e("../utils/copy-style");h.exports=class{constructor(u){u=u||{},this._workbook=u.workbook,this.id=u.id,this.orderNo=u.orderNo,this.name=u.name,this.state=u.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},u.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!u.pageSetup||!u.pageSetup.fitToWidth&&!u.pageSetup.fitToHeight||u.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},u.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},u.headerFooter),this.dataValidations=new o,this.views=u.views||[],this.autoFilter=u.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(u){if(u===void 0&&(u="sheet"+this.id),this._name!==u){if(typeof u!="string")throw new Error("The name has to be a string.");if(u==="")throw new Error("The name can't be empty.");if(u==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(u))throw new Error(`Worksheet name ${u} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(u))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+u);if(u&&u.length>31&&(console.warn(`Worksheet name ${u} exceeds 31 chars. This will be truncated`),u=u.substring(0,31)),this._workbook._worksheets.find(g=>g&&g.name.toLowerCase()===u.toLowerCase()))throw new Error("Worksheet name already exists: "+u);this._name=u}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const u=new i;return this._rows.forEach(g=>{if(g){const m=g.dimensions;m&&u.expand(g.number,m.min,g.number,m.max)}}),u}get columns(){return this._columns}set columns(u){this._headerRowCount=u.reduce((k,E)=>{const A=(E.header?1:E.headers&&E.headers.length)||0;return Math.max(k,A)},0);let g=1;const m=this._columns=[];u.forEach(k=>{const E=new t(this,g++,!1);m.push(E),E.defn=k})}getColumnKey(u){return this._keys[u]}setColumnKey(u,g){this._keys[u]=g}deleteColumnKey(u){delete this._keys[u]}eachColumnKey(u){c.each(this._keys,u)}getColumn(u){if(typeof u=="string"){const g=this._keys[u];if(g)return g;u=s.l2n(u)}if(this._columns||(this._columns=[]),u>this._columns.length){let g=this._columns.length+1;for(;g<=u;)this._columns.push(new t(this,g++))}return this._columns[u-1]}spliceColumns(u,g){const m=this._rows.length;for(var k=arguments.length,E=new Array(k>2?k-2:0),A=2;A<k;A++)E[A-2]=arguments[A];if(E.length>0)for(let I=0;I<m;I++){const B=[u,g];E.forEach($=>{B.push($[I]||null)});const H=this.getRow(I+1);H.splice.apply(H,B)}else this._rows.forEach(I=>{I&&I.splice(u,g)});const L=E.length-g,z=u+g,R=this._columns.length;if(L<0)for(let I=u+E.length;I<=R;I++)this.getColumn(I).defn=this.getColumn(I-L).defn;else if(L>0)for(let I=R;I>=z;I--)this.getColumn(I+L).defn=this.getColumn(I).defn;for(let I=u;I<u+E.length;I++)this.getColumn(I).defn=null;this.workbook.definedNames.spliceColumns(this.name,u,g,E.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let u=0;return this.eachRow(g=>{u=Math.max(u,g.cellCount)}),u}get actualColumnCount(){const u=[];let g=0;return this.eachRow(m=>{m.eachCell(k=>{let{col:E}=k;u[E]||(u[E]=!0,g++)})}),g}_commitRow(){}get _lastRowNumber(){const u=this._rows;let g=u.length;for(;g>0&&u[g-1]===void 0;)g--;return g}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(u){return this._rows[u-1]}findRows(u,g){return this._rows.slice(u-1,u-1+g)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let u=0;return this.eachRow(()=>{u++}),u}getRow(u){let g=this._rows[u-1];return g||(g=this._rows[u-1]=new r(this,u)),g}getRows(u,g){if(g<1)return;const m=[];for(let k=u;k<u+g;k++)m.push(this.getRow(k));return m}addRow(u){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const m=this._nextRow,k=this.getRow(m);return k.values=u,this._setStyleOption(m,g[0]==="i"?g:"n"),k}addRows(u){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const m=[];return u.forEach(k=>{m.push(this.addRow(k,g))}),m}insertRow(u,g){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(u,0,g),this._setStyleOption(u,m),this.getRow(u)}insertRows(u,g){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(u,0,...g),m!=="n")for(let k=0;k<g.length;k++)m[0]==="o"&&this.findRow(g.length+u+k)!==void 0?this._copyStyle(g.length+u+k,u+k,m[1]==="+"):m[0]==="i"&&this.findRow(u-1)!==void 0&&this._copyStyle(u-1,u+k,m[1]==="+");return this.getRows(u,g.length)}_setStyleOption(u){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";g[0]==="o"&&this.findRow(u+1)!==void 0?this._copyStyle(u+1,u,g[1]==="+"):g[0]==="i"&&this.findRow(u-1)!==void 0&&this._copyStyle(u-1,u,g[1]==="+")}_copyStyle(u,g){let m=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const k=this.getRow(u),E=this.getRow(g);E.style=f(k.style),k.eachCell({includeEmpty:m},(A,L)=>{E.getCell(L).style=f(A.style)}),E.height=k.height}duplicateRow(u,g){let m=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const k=this._rows[u-1],E=new Array(g).fill(k.values);this.spliceRows(u+1,m?0:g,...E);for(let A=0;A<g;A++){const L=this._rows[u+A];L.style=k.style,L.height=k.height,k.eachCell({includeEmpty:!0},(z,R)=>{L.getCell(R).style=z.style})}}spliceRows(u,g){const m=u+g;for(var k=arguments.length,E=new Array(k>2?k-2:0),A=2;A<k;A++)E[A-2]=arguments[A];const L=E.length,z=L-g,R=this._rows.length;let I,B;if(z<0)for(u===R&&(this._rows[R-1]=void 0),I=m;I<=R;I++)if(B=this._rows[I-1],B){const H=this.getRow(I+z);H.values=B.values,H.style=B.style,H.height=B.height,B.eachCell({includeEmpty:!0},($,C)=>{H.getCell(C).style=$.style}),this._rows[I-1]=void 0}else this._rows[I+z-1]=void 0;else if(z>0)for(I=R;I>=m;I--)if(B=this._rows[I-1],B){const H=this.getRow(I+z);H.values=B.values,H.style=B.style,H.height=B.height,B.eachCell({includeEmpty:!0},($,C)=>{if(H.getCell(C).style=$.style,$._value.constructor.name==="MergeValue"){const T=this.getRow($._row._number+L).getCell(C),j=$._value._master,b=this.getRow(j._row._number+L).getCell(j._column._number);T.merge(b)}})}else this._rows[I+z-1]=void 0;for(I=0;I<L;I++){const H=this.getRow(u+I);H.style={},H.values=E[I]}this.workbook.definedNames.spliceRows(this.name,u,g,L)}eachRow(u,g){if(g||(g=u,u=void 0),u&&u.includeEmpty){const m=this._rows.length;for(let k=1;k<=m;k++)g(this.getRow(k),k)}else this._rows.forEach(m=>{m&&m.hasValues&&g(m,m.number)})}getSheetValues(){const u=[];return this._rows.forEach(g=>{g&&(u[g.number]=g.values)}),u}findCell(u,g){const m=s.getAddress(u,g),k=this._rows[m.row-1];return k?k.findCell(m.col):void 0}getCell(u,g){const m=s.getAddress(u,g);return this.getRow(m.row).getCellEx(m)}mergeCells(){for(var u=arguments.length,g=new Array(u),m=0;m<u;m++)g[m]=arguments[m];const k=new i(g);this._mergeCellsInternal(k)}mergeCellsWithoutStyle(){for(var u=arguments.length,g=new Array(u),m=0;m<u;m++)g[m]=arguments[m];const k=new i(g);this._mergeCellsInternal(k,!0)}_mergeCellsInternal(u,g){c.each(this._merges,k=>{if(k.intersects(u))throw new Error("Cannot merge already merged cells")});const m=this.getCell(u.top,u.left);for(let k=u.top;k<=u.bottom;k++)for(let E=u.left;E<=u.right;E++)(k>u.top||E>u.left)&&this.getCell(k,E).merge(m,g);this._merges[m.address]=u}_unMergeMaster(u){const g=this._merges[u.address];if(g){for(let m=g.top;m<=g.bottom;m++)for(let k=g.left;k<=g.right;k++)this.getCell(m,k).unmerge();delete this._merges[u.address]}}get hasMerges(){return c.some(this._merges,Boolean)}unMergeCells(){for(var u=arguments.length,g=new Array(u),m=0;m<u;m++)g[m]=arguments[m];const k=new i(g);for(let E=k.top;E<=k.bottom;E++)for(let A=k.left;A<=k.right;A++){const L=this.findCell(E,A);L&&(L.type===n.ValueType.Merge?this._unMergeMaster(L.master):this._merges[L.address]&&this._unMergeMaster(L))}}fillFormula(u,g,m){let k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const E=s.decode(u),{top:A,left:L,bottom:z,right:R}=E,I=R-L+1,B=s.encodeAddress(A,L),H=k==="shared";let $;$=typeof m=="function"?m:Array.isArray(m)?Array.isArray(m[0])?(T,j)=>m[T-A][j-L]:(T,j)=>m[(T-A)*I+(j-L)]:()=>{};let C=!0;for(let T=A;T<=z;T++)for(let j=L;j<=R;j++)C?(this.getCell(T,j).value={shareType:k,formula:g,ref:u,result:$(T,j)},C=!1):this.getCell(T,j).value=H?{sharedFormula:B,result:$(T,j)}:$(T,j)}addImage(u,g){const m={type:"image",imageId:u,range:g};this._media.push(new l(this,m))}getImages(){return this._media.filter(u=>u.type==="image")}addBackgroundImage(u){const g={type:"background",imageId:u};this._media.push(new l(this,g))}getBackgroundImageId(){const u=this._media.find(g=>g.type==="background");return u&&u.imageId}protect(u,g){return new Promise(m=>{this.sheetProtection={sheet:!0},g&&"spinCount"in g&&(g.spinCount=Number.isFinite(g.spinCount)?Math.round(Math.max(0,g.spinCount)):1e5),u&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=d.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=g&&"spinCount"in g?g.spinCount:1e5,this.sheetProtection.hashValue=d.convertPasswordToHash(u,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),g&&(this.sheetProtection=Object.assign(this.sheetProtection,g),!u&&"spinCount"in g&&delete this.sheetProtection.spinCount),m()})}unprotect(){this.sheetProtection=null}addTable(u){const g=new a(this,u);return this.tables[u.name]=g,g}getTable(u){return this.tables[u]}removeTable(u){delete this.tables[u]}getTables(){return Object.values(this.tables)}addConditionalFormatting(u){this.conditionalFormattings.push(u)}removeConditionalFormatting(u){typeof u=="number"?this.conditionalFormattings.splice(u,1):this.conditionalFormattings=u instanceof Function?this.conditionalFormattings.filter(u):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(u){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=u}get model(){const u={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(k=>k.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(k=>k.model),conditionalFormattings:this.conditionalFormattings};u.cols=t.toModel(this.columns);const g=u.rows=[],m=u.dimensions=new i;return this._rows.forEach(k=>{const E=k&&k.model;E&&(m.expand(E.number,E.min,E.number,E.max),g.push(E))}),u.merges=[],c.each(this._merges,k=>{u.merges.push(k.range)}),u}_parseRows(u){this._rows=[],u.rows.forEach(g=>{const m=new r(this,g.number);this._rows[m.number-1]=m,m.model=g})}_parseMergeCells(u){c.each(u.mergeCells,g=>{this.mergeCellsWithoutStyle(g)})}set model(u){this.name=u.name,this._columns=t.fromModel(this,u.cols),this._parseRows(u),this._parseMergeCells(u),this.dataValidations=new o(u.dataValidations),this.properties=u.properties,this.pageSetup=u.pageSetup,this.headerFooter=u.headerFooter,this.views=u.views,this.autoFilter=u.autoFilter,this._media=u.media.map(g=>new l(this,g)),this.sheetProtection=u.sheetProtection,this.tables=u.tables.reduce((g,m)=>{const k=new a;return k.model=m,g[m.name]=k,g},{}),this.conditionalFormattings=u.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(e,h,p){e("core-js/modules/es.promise"),e("core-js/modules/es.promise.finally"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.values"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.async-iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.find"),e("core-js/modules/es.string.from-code-point"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.number.is-nan"),e("regenerator-runtime/runtime");const c={Workbook:e("./doc/workbook")},s=e("./doc/enums");Object.keys(s).forEach(i=>{c[i]=s[i]}),h.exports=c},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(e,h,p){const c=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");p.bufferToString=function(s){return typeof s=="string"?s:c?c.decode(s):s.toString()}},{}],17:[function(e,h,p){const c=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:s}=e("buffer");p.stringToBuffer=function(i){return typeof i!="string"?i:c?s.from(c.encode(i).buffer):s.from(i)}},{buffer:220}],18:[function(e,h,p){const c=e("./under-dash"),s=e("./col-cache");h.exports=class{constructor(i){this.template=i,this.sheets={}}addCell(i){this.addCellEx(s.decodeEx(i))}getCell(i){return this.findCellEx(s.decodeEx(i),!0)}findCell(i){return this.findCellEx(s.decodeEx(i),!1)}findCellAt(i,r,t){const n=this.sheets[i],l=n&&n[r];return l&&l[t]}addCellEx(i){if(i.top)for(let r=i.top;r<=i.bottom;r++)for(let t=i.left;t<=i.right;t++)this.getCellAt(i.sheetName,r,t);else this.findCellEx(i,!0)}getCellEx(i){return this.findCellEx(i,!0)}findCellEx(i,r){const t=this.findSheet(i,r),n=this.findSheetRow(t,i,r);return this.findRowCell(n,i,r)}getCellAt(i,r,t){const n=this.sheets[i]||(this.sheets[i]=[]),l=n[r]||(n[r]=[]);return l[t]||(l[t]={sheetName:i,address:s.n2l(t)+r,row:r,col:t})}removeCellEx(i){const r=this.findSheet(i);if(!r)return;const t=this.findSheetRow(r,i);t&&delete t[i.col]}forEachInSheet(i,r){const t=this.sheets[i];t&&t.forEach((n,l)=>{n&&n.forEach((a,o)=>{a&&r(a,l,o)})})}forEach(i){c.each(this.sheets,(r,t)=>{this.forEachInSheet(t,i)})}map(i){const r=[];return this.forEach(t=>{r.push(i(t))}),r}findSheet(i,r){const t=i.sheetName;return this.sheets[t]?this.sheets[t]:r?this.sheets[t]=[]:void 0}findSheetRow(i,r,t){const{row:n}=r;return i&&i[n]?i[n]:t?i[n]=[]:void 0}findRowCell(i,r,t){const{col:n}=r;return i&&i[n]?i[n]:t?i[n]=this.template?Object.assign(r,JSON.parse(JSON.stringify(this.template))):r:void 0}spliceRows(i,r,t,n){const l=this.sheets[i];if(l){const a=[];for(let o=0;o<n;o++)a.push([]);l.splice(r,t,...a)}}spliceColumns(i,r,t,n){const l=this.sheets[i];if(l){const a=[];for(let o=0;o<n;o++)a.push(null);c.each(l,o=>{o.splice(r,t,...a)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(e,h,p){const c=/^[A-Z]+\d+$/,s={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:i=>i<=26?1:i<=676?2:3,_fill(i){let r,t,n,l,a,o=1;if(i>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&i>=1){for(;o<=26;)r=this._dictionary[o-1],this._n2l[o]=r,this._l2n[r]=o,o++;this._l2nFill=1}if(this._l2nFill<2&&i>=2){for(o=27;o<=702;)t=o-27,n=t%26,l=Math.floor(t/26),r=this._dictionary[l]+this._dictionary[n],this._n2l[o]=r,this._l2n[r]=o,o++;this._l2nFill=2}if(this._l2nFill<3&&i>=3){for(o=703;o<=16384;)t=o-703,n=t%26,l=Math.floor(t/26)%26,a=Math.floor(t/676),r=this._dictionary[a]+this._dictionary[l]+this._dictionary[n],this._n2l[o]=r,this._l2n[r]=o,o++;this._l2nFill=3}},l2n(i){if(this._l2n[i]||this._fill(i.length),!this._l2n[i])throw new Error("Out of bounds. Invalid column letter: "+i);return this._l2n[i]},n2l(i){if(i<1||i>16384)throw new Error(i+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[i]||this._fill(this._level(i)),this._n2l[i]},_hash:{},validateAddress(i){if(!c.test(i))throw new Error("Invalid Address: "+i);return!0},decodeAddress(i){const r=i.length<5&&this._hash[i];if(r)return r;let t=!1,n="",l=0,a=!1,o="",d=0;for(let u,g=0;g<i.length;g++)if(u=i.charCodeAt(g),!a&&u>=65&&u<=90)t=!0,n+=i[g],l=26*l+u-64;else if(u>=48&&u<=57)a=!0,o+=i[g],d=10*d+u-48;else if(a&&t&&u!==36)break;if(t){if(l>16384)throw new Error("Out of bounds. Invalid column letter: "+n)}else l=void 0;a||(d=void 0);const f={address:i=n+o,col:l,row:d,$col$row:`$${n}$${o}`};return l<=100&&d<=100&&(this._hash[i]=f,this._hash[f.$col$row]=f),f},getAddress(i,r){if(r){const t=this.n2l(r)+i;return this.decodeAddress(t)}return this.decodeAddress(i)},decode(i){const r=i.split(":");if(r.length===2){const t=this.decodeAddress(r[0]),n=this.decodeAddress(r[1]),l={top:Math.min(t.row,n.row),left:Math.min(t.col,n.col),bottom:Math.max(t.row,n.row),right:Math.max(t.col,n.col)};return l.tl=this.n2l(l.left)+l.top,l.br=this.n2l(l.right)+l.bottom,l.dimensions=`${l.tl}:${l.br}`,l}return this.decodeAddress(i)},decodeEx(i){const r=i.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),t=r[1]||r[2],n=r[3],l=n.split(":");if(l.length>1){let o=this.decodeAddress(l[0]),d=this.decodeAddress(l[1]);const f=Math.min(o.row,d.row),u=Math.min(o.col,d.col),g=Math.max(o.row,d.row),m=Math.max(o.col,d.col);return o=this.n2l(u)+f,d=this.n2l(m)+g,{top:f,left:u,bottom:g,right:m,sheetName:t,tl:{address:o,col:u,row:f,$col$row:`$${this.n2l(u)}$${f}`,sheetName:t},br:{address:d,col:m,row:g,$col$row:`$${this.n2l(m)}$${g}`,sheetName:t},dimensions:`${o}:${d}`}}if(n.startsWith("#"))return t?{sheetName:t,error:n}:{error:n};const a=this.decodeAddress(n);return t?{sheetName:t,...a}:a},encodeAddress:(i,r)=>s.n2l(r)+i,encode(){switch(arguments.length){case 2:return s.encodeAddress(arguments[0],arguments[1]);case 4:return`${s.encodeAddress(arguments[0],arguments[1])}:${s.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(i,r){const[t,n,,l,a]=i,[o,d]=r;return o>=t&&o<=l&&d>=n&&d<=a}};h.exports=s},{}],20:[function(e,h,p){const c=(i,r)=>({...i,...r.reduce((t,n)=>(i[n]&&(t[n]={...i[n]}),t),{})}),s=function(i,r,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];i[t]&&(r[t]=c(i[t],n))};p.copyStyle=i=>{if(!i)return i;if(r=i,Object.keys(r).length===0)return{};var r;const t={...i};return s(i,t,"font",["color"]),s(i,t,"alignment"),s(i,t,"protection"),i.border&&(s(i,t,"border"),s(i.border,t.border,"top",["color"]),s(i.border,t.border,"left",["color"]),s(i.border,t.border,"bottom",["color"]),s(i.border,t.border,"right",["color"]),s(i.border,t.border,"diagonal",["color"])),i.fill&&(s(i,t,"fill",["fgColor","bgColor","center"]),i.fill.stops&&(t.fill.stops=i.fill.stops.map(n=>c(n,["color"])))),t}},{}],21:[function(e,h,p){(function(c){(function(){const s=e("crypto"),i={hash(r){const t=s.createHash(r);for(var n=arguments.length,l=new Array(n>1?n-1:0),a=1;a<n;a++)l[a-1]=arguments[a];return t.update(c.concat(l)),t.digest()},convertPasswordToHash(r,t,n,l){if(t=t.toLowerCase(),s.getHashes().indexOf(t)<0)throw new Error(`Hash algorithm '${t}' not supported!`);const a=c.from(r,"utf16le");let o=this.hash(t,c.from(n,"base64"),a);for(let d=0;d<l;d++){const f=c.alloc(4);f.writeUInt32LE(d,0),o=this.hash(t,o,f)}return o.toString("base64")},randomBytes:r=>s.randomBytes(r)};h.exports=i}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(e,h,p){const{SaxesParser:c}=e("saxes"),{PassThrough:s}=e("readable-stream"),{bufferToString:i}=e("./browser-buffer-decode");h.exports=async function*(r){r.pipe&&!r[Symbol.asyncIterator]&&(r=r.pipe(new s));const t=new c;let n;t.on("error",a=>{n=a});let l=[];t.on("opentag",a=>l.push({eventType:"opentag",value:a})),t.on("text",a=>l.push({eventType:"text",value:a})),t.on("closetag",a=>l.push({eventType:"closetag",value:a}));for await(const a of r){if(t.write(i(a)),n)throw n;yield l,l=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(e,h,p){const c=e("./col-cache"),s=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,i=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;h.exports={slideFormula:function(r,t,n){const l=c.decode(t),a=c.decode(n);return r.replace(s,(o,d,f,u,g)=>{if(g)return o;const m=i.exec(u);if(m){const k=m[1],E=m[2].toUpperCase(),A=m[3],L=m[4];if(E.length>3||E.length===3&&E>"XFD")return o;let z=c.l2n(E),R=parseInt(L,10);return k||(z+=a.col-l.col),A||(R+=a.row-l.row),(d||"")+(k||"")+c.n2l(z)+(A||"")+R}return o})}}},{"./col-cache":19}],24:[function(e,h,p){(function(c,s){(function(){const i=e("readable-stream"),r=e("./utils"),t=e("./string-buf");class n{constructor(u,g){this._data=u,this._encoding=g}get length(){return this.toBuffer().length}copy(u,g,m,k){return this.toBuffer().copy(u,g,m,k)}toBuffer(){return this._buffer||(this._buffer=s.from(this._data,this._encoding)),this._buffer}}class l{constructor(u){this._data=u}get length(){return this._data.length}copy(u,g,m,k){return this._data._buf.copy(u,g,m,k)}toBuffer(){return this._data.toBuffer()}}class a{constructor(u){this._data=u}get length(){return this._data.length}copy(u,g,m,k){this._data.copy(u,g,m,k)}toBuffer(){return this._data}}class o{constructor(u){this.size=u,this.buffer=s.alloc(u),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const u=s.alloc(this.iWrite-this.iRead);return this.buffer.copy(u,0,this.iRead,this.iWrite),u}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(u){let g;return u===0?null:u===void 0||u>=this.length?(g=this.toBuffer(),this.iRead=this.iWrite,g):(g=s.alloc(u),this.buffer.copy(g,0,this.iRead,u),this.iRead+=u,g)}write(u,g,m){const k=Math.min(m,this.size-this.iWrite);return u.copy(this.buffer,this.iWrite,g,g+k),this.iWrite+=k,k}}const d=function(f){f=f||{},this.bufSize=f.bufSize||1048576,this.buffers=[],this.batch=f.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};r.inherits(d,i.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return s.concat(this.buffers.map(f=>f.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const u=this.buffers[this.buffers.length-1];if(!u.full)return u}const f=new o(this.bufSize);return this.buffers.push(f),f},async _pipe(f){await Promise.all(this.pipes.map(function(u){return new Promise(g=>{u.write(f.toBuffer(),()=>{g()})})}))},_writeToBuffers(f){let u=0;const g=f.length;for(;u<g;)u+=this._getWritableBuffer().write(f,u,g-u)},async write(f,u,g){let m;if(u instanceof Function&&(g=u,u="utf8"),g=g||r.nop,f instanceof t)m=new l(f);else if(f instanceof s)m=new a(f);else{if(!(typeof f=="string"||f instanceof String||f instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");m=new n(f,u)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(m);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(m),c.nextTick(g)):(await this._pipe(m),g());else this.paused||this.emit("data",m.toBuffer()),this._writeToBuffers(m),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(f,u,g){const m=k=>{k?g(k):(this._flush(),this.pipes.forEach(E=>{E.end()}),this.emit("finish"))};f?this.write(f,u,m):m()},read(f){let u;if(f){for(u=[];f&&this.buffers.length&&!this.buffers[0].eod;){const g=this.buffers[0],m=g.read(f);f-=m.length,u.push(m),g.eod&&g.full&&this.buffers.shift()}return s.concat(u)}return u=this.buffers.map(g=>g.toBuffer()).filter(Boolean),this.buffers=[],s.concat(u)},setEncoding(f){this.encoding=f},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(f){this.pipes.push(f),!this.paused&&this.buffers.length&&this.end()},unpipe(f){this.pipes=this.pipes.filter(u=>u!==f)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),h.exports=d}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(e,h,p){(function(c){(function(){h.exports=class{constructor(s){this._buf=c.alloc(s&&s.size||16384),this._encoding=s&&s.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=c.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(s){s=s||0,this._buffer=void 0,this._inPos=s}_grow(s){let i=2*this._buf.length;for(;i<s;)i*=2;const r=c.alloc(i);this._buf.copy(r,0),this._buf=r}addText(s){this._buffer=void 0;let i=this._inPos+this._buf.write(s,this._inPos,this._encoding);for(;i>=this._buf.length-4;)this._grow(this._inPos+s.length),i=this._inPos+this._buf.write(s,this._inPos,this._encoding);this._inPos=i}addStringBuf(s){s.length&&(this._buffer=void 0,this.length+s.length>this.capacity&&this._grow(this.length+s.length),s._buf.copy(this._buf,this._inPos,0,s.length),this._inPos+=s.length)}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],26:[function(e,h,p){const{toString:c}=Object.prototype,s=/["&<>]/,i={each:function(r,t){r&&(Array.isArray(r)?r.forEach(t):Object.keys(r).forEach(n=>{t(r[n],n)}))},some:function(r,t){return!!r&&(Array.isArray(r)?r.some(t):Object.keys(r).some(n=>t(r[n],n)))},every:function(r,t){return!r||(Array.isArray(r)?r.every(t):Object.keys(r).every(n=>t(r[n],n)))},map:function(r,t){return r?Array.isArray(r)?r.map(t):Object.keys(r).map(n=>t(r[n],n)):[]},keyBy:(r,t)=>r.reduce((n,l)=>(n[l[t]]=l,n),{}),isEqual:function(r,t){const n=typeof r,l=typeof t,a=Array.isArray(r),o=Array.isArray(t);let d;if(n!==l)return!1;switch(typeof r){case"object":if(a||o)return!(!a||!o)&&r.length===t.length&&r.every((f,u)=>{const g=t[u];return i.isEqual(f,g)});if(r===null||t===null)return r===t;if(d=Object.keys(r),Object.keys(t).length!==d.length)return!1;for(const f of d)if(!t.hasOwnProperty(f))return!1;return i.every(r,(f,u)=>{const g=t[u];return i.isEqual(f,g)});default:return r===t}},escapeHtml(r){const t=s.exec(r);if(!t)return r;let n="",l="",a=0,o=t.index;for(;o<r.length;o++){switch(r.charAt(o)){case'"':l="&quot;";break;case"&":l="&amp;";break;case"'":l="&apos;";break;case"<":l="&lt;";break;case">":l="&gt;";break;default:continue}a!==o&&(n+=r.substring(a,o)),a=o+1,n+=l}return a!==o?n+r.substring(a,o):n},strcmp:(r,t)=>r<t?-1:r>t?1:0,isUndefined:r=>c.call(r)==="[object Undefined]",isObject:r=>c.call(r)==="[object Object]",deepMerge(){const r=arguments[0]||{},{length:t}=arguments;let n,l,a;function o(d,f){n=r[f],a=Array.isArray(d),i.isObject(d)||a?(a?(a=!1,l=n&&Array.isArray(n)?n:[]):l=n&&i.isObject(n)?n:{},r[f]=i.deepMerge(l,d)):i.isUndefined(d)||(r[f]=d)}for(let d=0;d<t;d++)i.each(arguments[d],o);return r}};h.exports=i},{}],27:[function(e,h,p){(function(c,s){(function(){const i=e("fs"),r=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,t={nop(){},promiseImmediate:n=>new Promise(l=>{c.setImmediate?s(()=>{l(n)}):setTimeout(()=>{l(n)},1)}),inherits:function(n,l,a,o){n.super_=l,o||(o=a,a=null),a&&Object.keys(a).forEach(f=>{Object.defineProperty(n,f,Object.getOwnPropertyDescriptor(a,f))});const d={constructor:{value:n,enumerable:!1,writable:!1,configurable:!0}};o&&Object.keys(o).forEach(f=>{d[f]=Object.getOwnPropertyDescriptor(o,f)}),n.prototype=Object.create(l.prototype,d)},dateToExcel:(n,l)=>25569+n.getTime()/864e5-(l?1462:0),excelToDate(n,l){const a=Math.round(24*(n-25569+(l?1462:0))*3600*1e3);return new Date(a)},parsePath(n){const l=n.lastIndexOf("/");return{path:n.substring(0,l),name:n.substring(l+1)}},getRelsPath(n){const l=t.parsePath(n);return`${l.path}/_rels/${l.name}.rels`},xmlEncode(n){const l=r.exec(n);if(!l)return n;let a="",o="",d=0,f=l.index;for(;f<n.length;f++){const u=n.charCodeAt(f);switch(u){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&apos;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;case 127:o="";break;default:if(u<=31&&(u<=8||u>=11&&u!==13)){o="";break}continue}d!==f&&(a+=n.substring(d,f)),d=f+1,o&&(a+=o)}return d!==f?a+n.substring(d,f):a},xmlDecode:n=>n.replace(/&([a-z]*);/g,l=>{switch(l){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return l}}),validInt(n){const l=parseInt(n,10);return Number.isNaN(l)?0:l},isDateFmt(n){return n?(n=(n=n.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:n=>new Promise(l=>{i.access(n,i.constants.F_OK,a=>{l(!a)})})},toIsoDateString:n=>n.toIsoString().subsstr(0,10),parseBoolean:n=>n===!0||n==="true"||n===1||n==="1"};h.exports=t}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{fs:216,timers:523}],28:[function(e,h,p){const c=e("./under-dash"),s=e("./utils");function i(n,l,a){n.push(` ${l}="${s.xmlEncode(a.toString())}"`)}function r(n,l){if(l){const a=[];c.each(l,(o,d)=>{o!==void 0&&i(a,d,o)}),n.push(a.join(""))}}class t{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(l){const a=this._xml;a.push("<?xml"),r(a,l),a.push(`?>
`)}openNode(l,a){const o=this.tos,d=this._xml;o&&this.open&&d.push(">"),this._stack.push(l),d.push("<"),d.push(l),r(d,a),this.leaf=!0,this.open=!0}addAttribute(l,a){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");a!==void 0&&i(this._xml,l,a)}addAttributes(l){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");r(this._xml,l)}writeText(l){const a=this._xml;this.open&&(a.push(">"),this.open=!1),this.leaf=!1,a.push(s.xmlEncode(l.toString()))}writeXml(l){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(l)}closeNode(){const l=this._stack.pop(),a=this._xml;this.leaf?a.push("/>"):(a.push("</"),a.push(l),a.push(">")),this.open=!1,this.leaf=!1}leafNode(l,a,o){this.openNode(l,a),o!==void 0&&this.writeText(o),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const l=this._rollbacks.pop();this._xml.length>l.xml&&this._xml.splice(l.xml,this._xml.length-l.xml),this._stack.length>l.stack&&this._stack.splice(l.stack,this._stack.length-l.stack),this.leaf=l.leaf,this.open=l.open}get xml(){return this.closeAll(),this._xml.join("")}}t.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},h.exports=t},{"./under-dash":26,"./utils":27}],29:[function(e,h,p){(function(c){(function(){const s=e("events"),i=e("jszip"),r=e("./stream-buf"),{stringToBuffer:t}=e("./browser-buffer-encode");class n extends s.EventEmitter{constructor(a){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},a),this.zip=new i,this.stream=new r}append(a,o){o.hasOwnProperty("base64")&&o.base64?this.zip.file(o.name,a,{base64:!0}):(c.browser&&typeof a=="string"&&(a=t(a)),this.zip.file(o.name,a))}async finalize(){const a=await this.zip.generateAsync(this.options);this.stream.end(a),this.emit("finish")}read(a){return this.stream.read(a)}setEncoding(a){return this.stream.setEncoding(a)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(a,o){return this.stream.pipe(a,o)}unpipe(a){return this.stream.unpipe(a)}unshift(a){return this.stream.unshift(a)}wrap(a){return this.stream.wrap(a)}}h.exports={ZipWriter:n}}).call(this)}).call(this,e("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(e,h,p){h.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(e,h,p){h.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(e,h,p){const c=e("../../utils/parse-sax"),s=e("../../utils/xml-stream");class i{prepare(){}render(){}parseOpen(t){}parseText(t){}parseClose(t){}reconcile(t,n){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(t=>{t instanceof i?t.reset():t.xform&&t.xform.reset()})}mergeModel(t){this.model=Object.assign(this.model||{},t)}async parse(t){for await(const n of t)for(const{eventType:l,value:a}of n)if(l==="opentag")this.parseOpen(a);else if(l==="text")this.parseText(a);else if(l==="closetag"&&!this.parseClose(a.name))return this.model;return this.model}async parseStream(t){return this.parse(c(t))}get xml(){return this.toXml(this.model)}toXml(t){const n=new s;return this.render(n,t),n.xml}static toAttribute(t,n){let l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(t===void 0){if(l)return n}else if(l||t!==n)return t.toString()}static toStringAttribute(t,n){let l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return i.toAttribute(t,n,l)}static toStringValue(t,n){return t===void 0?n:t}static toBoolAttribute(t,n){let l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(t===void 0){if(l)return n}else if(l||t!==n)return t?"1":"0"}static toBoolValue(t,n){return t===void 0?n:t==="1"}static toIntAttribute(t,n){let l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return i.toAttribute(t,n,l)}static toIntValue(t,n){return t===void 0?n:parseInt(t,10)}static toFloatAttribute(t,n){let l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return i.toAttribute(t,n,l)}static toFloatValue(t,n){return t===void 0?n:parseFloat(t)}}h.exports=i},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(e,h,p){const c=e("../base-xform"),s=e("../../../utils/col-cache");function i(t){try{return s.decodeEx(t),!0}catch{return!1}}function r(t){const n=[];let l=!1,a="";return t.split(",").forEach(o=>{if(!o)return;const d=(o.match(/'/g)||[]).length;if(!d)return void(l?a+=o+",":i(o)&&n.push(o));const f=d%2==0;!l&&f&&i(o)?n.push(o):l&&!f?(l=!1,i(a+o)&&n.push(a+o),a=""):(l=!0,a+=o+",")}),n}h.exports=class extends c{render(t,n){t.openNode("definedName",{name:n.name,localSheetId:n.localSheetId}),t.writeText(n.ranges.join(",")),t.closeNode()}parseOpen(t){switch(t.name){case"definedName":return this._parsedName=t.attributes.name,this._parsedLocalSheetId=t.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(t){this._parsedText.push(t)}parseClose(){return this.model={name:this._parsedName,ranges:r(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(e,h,p){const c=e("../../../utils/utils"),s=e("../base-xform");h.exports=class extends s{render(i,r){i.leafNode("sheet",{sheetId:r.id,name:r.name,state:r.state,"r:id":r.rId})}parseOpen(i){return i.name==="sheet"&&(this.model={name:c.xmlDecode(i.attributes.name),id:parseInt(i.attributes.sheetId,10),state:i.attributes.state,rId:i.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{render(s,i){s.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:i.fullCalcOnLoad?1:void 0})}parseOpen(s){return s.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{render(s,i){s.leafNode("workbookPr",{date1904:i.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(s){return s.name==="workbookPr"&&(this.model={date1904:s.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{render(s,i){const r={xWindow:i.x||0,yWindow:i.y||0,windowWidth:i.width||12e3,windowHeight:i.height||24e3,firstSheet:i.firstSheet,activeTab:i.activeTab};i.visibility&&i.visibility!=="visible"&&(r.visibility=i.visibility),s.leafNode("workbookView",r)}parseOpen(s){if(s.name==="workbookView"){const i=this.model={},r=function(n,l,a){const o=l!==void 0?i[n]=l:a;o!==void 0&&(i[n]=o)},t=function(n,l,a){const o=l!==void 0?i[n]=parseInt(l,10):a;o!==void 0&&(i[n]=o)};return t("x",s.attributes.xWindow,0),t("y",s.attributes.yWindow,0),t("width",s.attributes.windowWidth,25e3),t("height",s.attributes.windowHeight,1e4),r("visibility",s.attributes.visibility,"visible"),t("activeTab",s.attributes.activeTab,void 0),t("firstSheet",s.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),i=e("../../../utils/xml-stream"),r=e("../base-xform"),t=e("../static-xform"),n=e("../list-xform"),l=e("./defined-name-xform"),a=e("./sheet-xform"),o=e("./workbook-view-xform"),d=e("./workbook-properties-xform"),f=e("./workbook-calc-properties-xform");class u extends r{constructor(){super(),this.map={fileVersion:u.STATIC_XFORMS.fileVersion,workbookPr:new d,bookViews:new n({tag:"bookViews",count:!1,childXform:new o}),sheets:new n({tag:"sheets",count:!1,childXform:new a}),definedNames:new n({tag:"definedNames",count:!1,childXform:new l}),calcPr:new f}}prepare(m){m.sheets=m.worksheets;const k=[];let E=0;m.sheets.forEach(A=>{if(A.pageSetup&&A.pageSetup.printArea&&A.pageSetup.printArea.split("&&").forEach(L=>{const z=L.split(":"),R={name:"_xlnm.Print_Area",ranges:[`'${A.name}'!$${z[0]}:$${z[1]}`],localSheetId:E};k.push(R)}),A.pageSetup&&(A.pageSetup.printTitlesRow||A.pageSetup.printTitlesColumn)){const L=[];if(A.pageSetup.printTitlesColumn){const R=A.pageSetup.printTitlesColumn.split(":");L.push(`'${A.name}'!$${R[0]}:$${R[1]}`)}if(A.pageSetup.printTitlesRow){const R=A.pageSetup.printTitlesRow.split(":");L.push(`'${A.name}'!$${R[0]}:$${R[1]}`)}const z={name:"_xlnm.Print_Titles",ranges:L,localSheetId:E};k.push(z)}E++}),k.length&&(m.definedNames=m.definedNames.concat(k)),(m.media||[]).forEach((A,L)=>{A.name=A.type+(L+1)})}render(m,k){m.openXml(i.StdDocAttributes),m.openNode("workbook",u.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(m),this.map.workbookPr.render(m,k.properties),this.map.bookViews.render(m,k.views),this.map.sheets.render(m,k.sheets),this.map.definedNames.render(m,k.definedNames),this.map.calcPr.render(m,k.calcProperties),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;switch(m.name){case"workbook":return!0;default:return this.parser=this.map[m.name],this.parser&&this.parser.parseOpen(m),!0}}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser)return this.parser.parseClose(m)||(this.parser=void 0),!0;switch(m){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(m){const k=(m.workbookRels||[]).reduce((R,I)=>(R[I.Id]=I,R),{}),E=[];let A,L=0;(m.sheets||[]).forEach(R=>{const I=k[R.rId];I&&(A=m.worksheetHash["xl/"+I.Target.replace(/^(\s|\/xl\/)+/,"")],A&&(A.name=R.name,A.id=R.id,A.state=R.state,E[L++]=A))});const z=[];c.each(m.definedNames,R=>{if(R.name==="_xlnm.Print_Area"){if(A=E[R.localSheetId],A){A.pageSetup||(A.pageSetup={});const I=s.decodeEx(R.ranges[0]);A.pageSetup.printArea=A.pageSetup.printArea?`${A.pageSetup.printArea}&&${I.dimensions}`:I.dimensions}}else if(R.name==="_xlnm.Print_Titles"){if(A=E[R.localSheetId],A){A.pageSetup||(A.pageSetup={});const I=R.ranges.join(","),B=/\$/g,H=/\$\d+:\$\d+/,$=I.match(H);if($&&$.length){const j=$[0];A.pageSetup.printTitlesRow=j.replace(B,"")}const C=/\$[A-Z]+:\$[A-Z]+/,T=I.match(C);if(T&&T.length){const j=T[0];A.pageSetup.printTitlesColumn=j.replace(B,"")}}}else z.push(R)}),m.definedNames=z,m.media.forEach((R,I)=>{R.index=I})}}u.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},u.STATIC_XFORMS={fileVersion:new t({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},h.exports=u},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(e,h,p){const c=e("../strings/rich-text-xform"),s=e("../../../utils/utils"),i=e("../base-xform"),r=h.exports=function(t){this.model=t};s.inherits(r,i,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new c),this._richTextXform},render(t,n){n=n||this.model,t.openNode("comment",{ref:n.ref,authorId:0}),t.openNode("text"),n&&n.note&&n.note.texts&&n.note.texts.forEach(l=>{this.richTextXform.render(t,l)}),t.closeNode(),t.closeNode()},parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case"comment":return this.model={type:"note",note:{texts:[]},...t.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(t),!0;default:return!1}},parseText(t){this.parser&&this.parser.parseText(t)},parseClose(t){switch(t){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(t),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../../../utils/utils"),i=e("../base-xform"),r=e("./comment-xform"),t=h.exports=function(){this.map={comment:new r}};s.inherits(t,i,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(n,l){l=l||this.model,n.openXml(c.StdDocAttributes),n.openNode("comments",t.COMMENTS_ATTRIBUTES),n.openNode("authors"),n.leafNode("author",null,"Author"),n.closeNode(),n.openNode("commentList"),l.comments.forEach(a=>{this.map.comment.render(n,a)}),n.closeNode(),n.closeNode()},parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(n),!0;default:return!1}},parseText(n){this.parser&&this.parser.parseText(n)},parseClose(n){switch(n){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(n),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(e,h,p){const c=e("../../base-xform");h.exports=class extends c{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,i,r){(i===r[2]||this.tag==="x:SizeWithCells"&&i===r[1])&&s.leafNode(this.tag)}parseOpen(s){switch(s.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(e,h,p){const c=e("../../base-xform");h.exports=class extends c{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,i){s.leafNode(this.tag,null,i)}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"x:Anchor"}getAnchorRect(s){const i=Math.floor(s.left),r=Math.floor(68*(s.left-i)),t=Math.floor(s.top),n=Math.floor(18*(s.top-t)),l=Math.floor(s.right),a=Math.floor(68*(s.right-l)),o=Math.floor(s.bottom);return[i,r,t,n,l,a,o,Math.floor(18*(s.bottom-o))]}getDefaultRect(s){const i=s.col,r=Math.max(s.row-2,0);return[i,6,r,14,i+2,2,r+4,16]}render(s,i){const r=i.anchor?this.getAnchorRect(i.anchor):this.getDefaultRect(i.refAddress);s.leafNode("x:Anchor",null,r.join(", "))}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../base-xform":32}],44:[function(e,h,p){const c=e("../base-xform"),s=e("./vml-anchor-xform"),i=e("./style/vml-protection-xform"),r=e("./style/vml-position-xform"),t=["twoCells","oneCells","absolute"];h.exports=class extends c{constructor(){super(),this.map={"x:Anchor":new s,"x:Locked":new i({tag:"x:Locked"}),"x:LockText":new i({tag:"x:LockText"}),"x:SizeWithCells":new r({tag:"x:SizeWithCells"}),"x:MoveWithCells":new r({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(n,l){const{protection:a,editAs:o}=l.note;n.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(n,o,t),this.map["x:SizeWithCells"].render(n,o,t),this.map["x:Anchor"].render(n,l),this.map["x:Locked"].render(n,a.locked),n.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(n,a.lockText),n.leafNode("x:Row",null,l.refAddress.row-1),n.leafNode("x:Column",null,l.refAddress.col-1),n.closeNode()}parseOpen(n){switch(n.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const n=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),l=Object.keys(n).length;this.model.editAs=t[l],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("./vml-shape-xform");class r extends s{constructor(){super(),this.map={"v:shape":new i}}get tag(){return"xml"}render(n,l){n.openXml(c.StdDocAttributes),n.openNode(this.tag,r.DRAWING_ATTRIBUTES),n.openNode("o:shapelayout",{"v:ext":"edit"}),n.leafNode("o:idmap",{"v:ext":"edit",data:1}),n.closeNode(),n.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),n.leafNode("v:stroke",{joinstyle:"miter"}),n.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),n.closeNode(),l.comments.forEach((a,o)=>{this.map["v:shape"].render(n,a,o)}),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(n){case this.tag:return!1;default:return!0}}reconcile(n,l){n.anchors.forEach(a=>{a.br?this.map["xdr:twoCellAnchor"].reconcile(a,l):this.map["xdr:oneCellAnchor"].reconcile(a,l)})}}r.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},h.exports=r},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(e,h,p){const c=e("../base-xform"),s=e("./vml-textbox-xform"),i=e("./vml-client-data-xform");class r extends c{constructor(){super(),this.map={"v:textbox":new s,"x:ClientData":new i}}get tag(){return"v:shape"}render(n,l,a){n.openNode("v:shape",r.V_SHAPE_ATTRIBUTES(l,a)),n.leafNode("v:fill",{color2:"infoBackground [80]"}),n.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),n.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(n,l),this.map["x:ClientData"].render(n,l),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:this.reset(),this.model={margins:{insetmode:n.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}r.V_SHAPE_ATTRIBUTES=(t,n)=>({id:"_x0000_s"+(1025+n),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":t.note.margins&&t.note.margins.insetmode}),h.exports=r},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"v:textbox"}conversionUnit(s,i,r){return`${parseFloat(s)*i.toFixed(2)}${r}`}reverseConversionUnit(s){return(s||"").split(",").map(i=>Number(parseFloat(this.conversionUnit(parseFloat(i),.1,"")).toFixed(2)))}render(s,i){const r={style:"mso-direction-alt:auto"};if(i&&i.note){let{inset:t}=i.note&&i.note.margins;Array.isArray(t)&&(t=t.map(n=>this.conversionUnit(n,10,"mm")).join(",")),t&&(r.inset=t)}s.openNode("v:textbox",r),s.leafNode("div",{style:"text-align:left"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:return this.model={inset:this.reverseConversionUnit(s.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(e,h,p){const c=e("./base-xform");h.exports=class extends c{createNewModel(s){return{}}parseOpen(s){return this.parser=this.parser||this.map[s.name],this.parser?(this.parser.parseOpen(s),!0):s.name===this.tag&&(this.model=this.createNewModel(s),!0)}parseText(s){this.parser&&this.parser.parseText(s)}onParserClose(s,i){this.model[s]=i.model}parseClose(s){return this.parser?(this.parser.parseClose(s)||(this.onParserClose(s,this.parser),this.parser=void 0),!0):s!==this.tag}}},{"./base-xform":32}],49:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{render(s,i){s.openNode("HeadingPairs"),s.openNode("vt:vector",{size:2,baseType:"variant"}),s.openNode("vt:variant"),s.leafNode("vt:lpstr",void 0,"Worksheets"),s.closeNode(),s.openNode("vt:variant"),s.leafNode("vt:i4",void 0,i.length),s.closeNode(),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="HeadingPairs"}parseText(){}parseClose(s){return s!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{render(s,i){s.openNode("TitlesOfParts"),s.openNode("vt:vector",{size:i.length,baseType:"lpstr"}),i.forEach(r=>{s.leafNode("vt:lpstr",void 0,r.name)}),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="TitlesOfParts"}parseText(){}parseClose(s){return s!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("../simple/string-xform"),r=e("./app-heading-pairs-xform"),t=e("./app-titles-of-parts-xform");class n extends s{constructor(){super(),this.map={Company:new i({tag:"Company"}),Manager:new i({tag:"Manager"}),HeadingPairs:new r,TitleOfParts:new t}}render(a,o){a.openXml(c.StdDocAttributes),a.openNode("Properties",n.PROPERTY_ATTRIBUTES),a.leafNode("Application",void 0,"Microsoft Excel"),a.leafNode("DocSecurity",void 0,"0"),a.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(a,o.worksheets),this.map.TitleOfParts.render(a,o.worksheets),this.map.Company.render(a,o.company||""),this.map.Manager.render(a,o.manager),a.leafNode("LinksUpToDate",void 0,"false"),a.leafNode("SharedDoc",void 0,"false"),a.leafNode("HyperlinksChanged",void 0,"false"),a.leafNode("AppVersion",void 0,"16.0300"),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"Properties":return!0;default:return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}n.DateFormat=function(l){return l.toISOString().replace(/[.]\d{3,6}/,"")},n.DateAttrs={"xsi:type":"dcterms:W3CDTF"},n.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},h.exports=n},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../base-xform");class i extends s{render(t,n){t.openXml(c.StdDocAttributes),t.openNode("Types",i.PROPERTY_ATTRIBUTES);const l={};(n.media||[]).forEach(a=>{if(a.type==="image"){const o=a.extension;l[o]||(l[o]=!0,t.leafNode("Default",{Extension:o,ContentType:"image/"+o}))}}),t.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),t.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),t.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),n.worksheets.forEach(a=>{const o=`/xl/worksheets/sheet${a.id}.xml`;t.leafNode("Override",{PartName:o,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),t.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),t.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),n.sharedStrings&&n.sharedStrings.count&&t.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),n.tables&&n.tables.forEach(a=>{t.leafNode("Override",{PartName:"/xl/tables/"+a.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),n.drawings&&n.drawings.forEach(a=>{t.leafNode("Override",{PartName:`/xl/drawings/${a.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),n.commentRefs&&(t.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),n.commentRefs.forEach(a=>{let{commentName:o}=a;t.leafNode("Override",{PartName:`/xl/${o}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),t.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),t.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),t.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}i.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},h.exports=i},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("../simple/date-xform"),r=e("../simple/string-xform"),t=e("../simple/integer-xform");class n extends s{constructor(){super(),this.map={"dc:creator":new r({tag:"dc:creator"}),"dc:title":new r({tag:"dc:title"}),"dc:subject":new r({tag:"dc:subject"}),"dc:description":new r({tag:"dc:description"}),"dc:identifier":new r({tag:"dc:identifier"}),"dc:language":new r({tag:"dc:language"}),"cp:keywords":new r({tag:"cp:keywords"}),"cp:category":new r({tag:"cp:category"}),"cp:lastModifiedBy":new r({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new i({tag:"cp:lastPrinted",format:n.DateFormat}),"cp:revision":new t({tag:"cp:revision"}),"cp:version":new r({tag:"cp:version"}),"cp:contentStatus":new r({tag:"cp:contentStatus"}),"cp:contentType":new r({tag:"cp:contentType"}),"dcterms:created":new i({tag:"dcterms:created",attrs:n.DateAttrs,format:n.DateFormat}),"dcterms:modified":new i({tag:"dcterms:modified",attrs:n.DateAttrs,format:n.DateFormat})}}render(a,o){a.openXml(c.StdDocAttributes),a.openNode("cp:coreProperties",n.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(a,o.creator),this.map["dc:title"].render(a,o.title),this.map["dc:subject"].render(a,o.subject),this.map["dc:description"].render(a,o.description),this.map["dc:identifier"].render(a,o.identifier),this.map["dc:language"].render(a,o.language),this.map["cp:keywords"].render(a,o.keywords),this.map["cp:category"].render(a,o.category),this.map["cp:lastModifiedBy"].render(a,o.lastModifiedBy),this.map["cp:lastPrinted"].render(a,o.lastPrinted),this.map["cp:revision"].render(a,o.revision),this.map["cp:version"].render(a,o.version),this.map["cp:contentStatus"].render(a,o.contentStatus),this.map["cp:contentType"].render(a,o.contentType),this.map["dcterms:created"].render(a,o.created),this.map["dcterms:modified"].render(a,o.modified),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[a.name],this.parser)return this.parser.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+a)}}}n.DateFormat=function(l){return l.toISOString().replace(/[.]\d{3}/,"")},n.DateAttrs={"xsi:type":"dcterms:W3CDTF"},n.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},h.exports=n},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{render(s,i){s.leafNode("Relationship",i)}parseOpen(s){switch(s.name){case"Relationship":return this.model=s.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("./relationship-xform");class r extends s{constructor(){super(),this.map={Relationship:new i}}render(n,l){l=l||this._values,n.openXml(c.StdDocAttributes),n.openNode("Relationships",r.RELATIONSHIPS_ATTRIBUTES),l.forEach(a=>{this.map.Relationship.render(n,a)}),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[n.name],this.parser)return this.parser.parseOpen(n),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(n))}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(n){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+n)}}}r.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},h.exports=r},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset(),this.model={range:{editAs:s.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}reconcilePicture(s,i){if(s&&s.rId){const r=i.rels[s.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(r){const t=r[1],n=i.mediaIndex[t];return i.media[n]}}}}},{"../base-xform":32}],57:[function(e,h,p){const c=e("../base-xform"),s=e("./blip-xform");h.exports=class extends c{constructor(){super(),this.map={"a:blip":new s}}get tag(){return"xdr:blipFill"}render(i,r){i.openNode(this.tag),this.map["a:blip"].render(i,r),i.openNode("a:stretch"),i.leafNode("a:fillRect"),i.closeNode(),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case this.tag:this.reset();break;default:this.parser=this.map[i.name],this.parser&&this.parser.parseOpen(i)}return!0}parseText(){}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.parser=void 0),!0;switch(i){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"a:blip"}render(s,i){s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":i.rId,cstate:"print"})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"xdr:cNvPicPr"}render(s){s.openNode(this.tag),s.leafNode("a:picLocks",{noChangeAspect:"1"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(e,h,p){const c=e("../base-xform"),s=e("./hlink-click-xform"),i=e("./ext-lst-xform");h.exports=class extends c{constructor(){super(),this.map={"a:hlinkClick":new s,"a:extLst":new i}}get tag(){return"xdr:cNvPr"}render(r,t){r.openNode(this.tag,{id:t.index,name:"Picture "+t.index}),this.map["a:hlinkClick"].render(r,t),this.map["a:extLst"].render(r,t),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset();break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(){}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.parser=void 0),!0;switch(r){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(e,h,p){const c=e("../base-xform"),s=e("../simple/integer-xform");h.exports=class extends c{constructor(i){super(),this.tag=i.tag,this.map={"xdr:col":new s({tag:"xdr:col",zero:!0}),"xdr:colOff":new s({tag:"xdr:colOff",zero:!0}),"xdr:row":new s({tag:"xdr:row",zero:!0}),"xdr:rowOff":new s({tag:"xdr:rowOff",zero:!0})}}render(i,r){i.openNode(this.tag),this.map["xdr:col"].render(i,r.nativeCol),this.map["xdr:colOff"].render(i,r.nativeColOff),this.map["xdr:row"].render(i,r.nativeRow),this.map["xdr:rowOff"].render(i,r.nativeRowOff),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case this.tag:this.reset();break;default:this.parser=this.map[i.name],this.parser&&this.parser.parseOpen(i)}return!0}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.parser=void 0),!0;switch(i){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(e,h,p){const c=e("../../../utils/col-cache"),s=e("../../../utils/xml-stream"),i=e("../base-xform"),r=e("./two-cell-anchor-xform"),t=e("./one-cell-anchor-xform");class n extends i{constructor(){super(),this.map={"xdr:twoCellAnchor":new r,"xdr:oneCellAnchor":new t}}prepare(a){a.anchors.forEach((o,d)=>{o.anchorType=function(f){return(typeof f.range=="string"?c.decode(f.range):f.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(o),this.map[o.anchorType].prepare(o,{index:d})})}get tag(){return"xdr:wsDr"}render(a,o){a.openXml(s.StdDocAttributes),a.openNode(this.tag,n.DRAWING_ATTRIBUTES),o.anchors.forEach(d=>{this.map[d.anchorType].render(a,d)}),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(a){case this.tag:return!1;default:return!0}}reconcile(a,o){a.anchors.forEach(d=>{d.br?this.map["xdr:twoCellAnchor"].reconcile(d,o):this.map["xdr:oneCellAnchor"].reconcile(d,o)})}}n.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},h.exports=n},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"a:extLst"}render(s){s.openNode(this.tag),s.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),s.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),s.closeNode(),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{constructor(s){super(),this.tag=s.tag,this.map={}}render(s,i){s.openNode(this.tag);const r=Math.floor(9525*i.width),t=Math.floor(9525*i.height);s.addAttribute("cx",r),s.addAttribute("cy",t),s.closeNode()}parseOpen(s){return s.name===this.tag&&(this.model={width:parseInt(s.attributes.cx||"0",10)/9525,height:parseInt(s.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"a:hlinkClick"}render(s,i){i.hyperlinks&&i.hyperlinks.rId&&s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":i.hyperlinks.rId,tooltip:i.hyperlinks.tooltip})}parseOpen(s){switch(s.name){case this.tag:return this.model={hyperlinks:{rId:s.attributes["r:id"],tooltip:s.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(e,h,p){const c=e("../base-xform"),s=e("./c-nv-pr-xform"),i=e("./c-nv-pic-pr-xform");h.exports=class extends c{constructor(){super(),this.map={"xdr:cNvPr":new s,"xdr:cNvPicPr":new i}}get tag(){return"xdr:nvPicPr"}render(r,t){r.openNode(this.tag),this.map["xdr:cNvPr"].render(r,t),this.map["xdr:cNvPicPr"].render(r,t),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset();break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(){}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.parser=void 0),!0;switch(r){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(e,h,p){const c=e("./base-cell-anchor-xform"),s=e("../static-xform"),i=e("./cell-position-xform"),r=e("./ext-xform"),t=e("./pic-xform");h.exports=class extends c{constructor(){super(),this.map={"xdr:from":new i({tag:"xdr:from"}),"xdr:ext":new r({tag:"xdr:ext"}),"xdr:pic":new t,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(n,l){this.map["xdr:pic"].prepare(n.picture,l)}render(n,l){n.openNode(this.tag,{editAs:l.range.editAs||"oneCell"}),this.map["xdr:from"].render(n,l.range.tl),this.map["xdr:ext"].render(n,l.range.ext),this.map["xdr:pic"].render(n,l.picture),this.map["xdr:clientData"].render(n,{}),n.closeNode()}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(n,l){n.medium=this.reconcilePicture(n.picture,l)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(e,h,p){const c=e("../base-xform"),s=e("../static-xform"),i=e("./blip-fill-xform"),r=e("./nv-pic-pr-xform"),t=e("./sp-pr");h.exports=class extends c{constructor(){super(),this.map={"xdr:nvPicPr":new r,"xdr:blipFill":new i,"xdr:spPr":new s(t)}}get tag(){return"xdr:pic"}prepare(n,l){n.index=l.index+1}render(n,l){n.openNode(this.tag),this.map["xdr:nvPicPr"].render(n,l),this.map["xdr:blipFill"].render(n,l),this.map["xdr:spPr"].render(n,l),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:this.reset();break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(){}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(e,h,p){h.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(e,h,p){const c=e("./base-cell-anchor-xform"),s=e("../static-xform"),i=e("./cell-position-xform"),r=e("./pic-xform");h.exports=class extends c{constructor(){super(),this.map={"xdr:from":new i({tag:"xdr:from"}),"xdr:to":new i({tag:"xdr:to"}),"xdr:pic":new r,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(t,n){this.map["xdr:pic"].prepare(t.picture,n)}render(t,n){t.openNode(this.tag,{editAs:n.range.editAs||"oneCell"}),this.map["xdr:from"].render(t,n.range.tl),this.map["xdr:to"].render(t,n.range.br),this.map["xdr:pic"].render(t,n.picture),this.map["xdr:clientData"].render(t,{}),t.closeNode()}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;switch(t){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(t,n){t.medium=this.reconcilePicture(t.picture,n)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(e,h,p){const c=e("./base-xform");h.exports=class extends c{constructor(s){super(),this.tag=s.tag,this.always=!!s.always,this.count=s.count,this.empty=s.empty,this.$count=s.$count||"count",this.$=s.$,this.childXform=s.childXform,this.maxItems=s.maxItems}prepare(s,i){const{childXform:r}=this;s&&s.forEach((t,n)=>{i.index=n,r.prepare(t,i)})}render(s,i){if(this.always||i&&i.length){s.openNode(this.tag,this.$),this.count&&s.addAttribute(this.$count,i&&i.length||0);const{childXform:r}=this;(i||[]).forEach((t,n)=>{r.render(s,t,n)}),s.closeNode()}else this.empty&&s.leafNode(this.tag)}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(s)&&(this.parser=this.childXform,!0)}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser){if(!this.parser.parseClose(s)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(s,i){if(s){const{childXform:r}=this;s.forEach(t=>{r.reconcile(t,i)})}}}},{"./base-xform":32}],72:[function(e,h,p){const c=e("../../../utils/col-cache"),s=e("../base-xform");h.exports=class extends s{get tag(){return"autoFilter"}render(i,r){if(r)if(typeof r=="string")i.leafNode("autoFilter",{ref:r});else{const t=function(a){return typeof a=="string"?a:c.getAddress(a.row,a.column).address},n=t(r.from),l=t(r.to);n&&l&&i.leafNode("autoFilter",{ref:`${n}:${l}`})}}parseOpen(i){i.name==="autoFilter"&&(this.model=i.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(e,h,p){const c=e("../../../utils/utils"),s=e("../base-xform"),i=e("../../../doc/range"),r=e("../../../doc/enums"),t=e("../strings/rich-text-xform");function n(l){if(l==null)return r.ValueType.Null;if(l instanceof String||typeof l=="string")return r.ValueType.String;if(typeof l=="number")return r.ValueType.Number;if(typeof l=="boolean")return r.ValueType.Boolean;if(l instanceof Date)return r.ValueType.Date;if(l.text&&l.hyperlink)return r.ValueType.Hyperlink;if(l.formula)return r.ValueType.Formula;if(l.error)return r.ValueType.Error;throw new Error("I could not understand type of value")}h.exports=class extends s{constructor(){super(),this.richTextXForm=new t}get tag(){return"c"}prepare(l,a){const o=a.styles.addStyleModel(l.style||{},function(d){switch(d.type){case r.ValueType.Formula:return n(d.result);default:return d.type}}(l));switch(o&&(l.styleId=o),l.comment&&a.comments.push({...l.comment,ref:l.address}),l.type){case r.ValueType.String:case r.ValueType.RichText:a.sharedStrings&&(l.ssId=a.sharedStrings.add(l.value));break;case r.ValueType.Date:a.date1904&&(l.date1904=!0);break;case r.ValueType.Hyperlink:a.sharedStrings&&l.text!==void 0&&l.text!==null&&(l.ssId=a.sharedStrings.add(l.text)),a.hyperlinks.push({address:l.address,target:l.hyperlink,tooltip:l.tooltip});break;case r.ValueType.Merge:a.merges.add(l);break;case r.ValueType.Formula:if(a.date1904&&(l.date1904=!0),l.shareType==="shared"&&(l.si=a.siFormulae++),l.formula)a.formulae[l.address]=l;else if(l.sharedFormula){const d=a.formulae[l.sharedFormula];if(!d)throw new Error("Shared Formula master must exist above and or left of clone for cell "+l.address);d.si===void 0?(d.shareType="shared",d.si=a.siFormulae++,d.range=new i(d.address,l.address)):d.range&&d.range.expandToAddress(l.address),l.si=d.si}}}renderFormula(l,a){let o=null;switch(a.shareType){case"shared":o={t:"shared",ref:a.ref||a.range.range,si:a.si};break;case"array":o={t:"array",ref:a.ref};break;default:a.si!==void 0&&(o={t:"shared",si:a.si})}switch(n(a.result)){case r.ValueType.Null:l.leafNode("f",o,a.formula);break;case r.ValueType.String:l.addAttribute("t","str"),l.leafNode("f",o,a.formula),l.leafNode("v",null,a.result);break;case r.ValueType.Number:l.leafNode("f",o,a.formula),l.leafNode("v",null,a.result);break;case r.ValueType.Boolean:l.addAttribute("t","b"),l.leafNode("f",o,a.formula),l.leafNode("v",null,a.result?1:0);break;case r.ValueType.Error:l.addAttribute("t","e"),l.leafNode("f",o,a.formula),l.leafNode("v",null,a.result.error);break;case r.ValueType.Date:l.leafNode("f",o,a.formula),l.leafNode("v",null,c.dateToExcel(a.result,a.date1904));break;default:throw new Error("I could not understand type of value")}}render(l,a){if(a.type!==r.ValueType.Null||a.styleId){switch(l.openNode("c"),l.addAttribute("r",a.address),a.styleId&&l.addAttribute("s",a.styleId),a.type){case r.ValueType.Null:break;case r.ValueType.Number:l.leafNode("v",null,a.value);break;case r.ValueType.Boolean:l.addAttribute("t","b"),l.leafNode("v",null,a.value?"1":"0");break;case r.ValueType.Error:l.addAttribute("t","e"),l.leafNode("v",null,a.value.error);break;case r.ValueType.String:case r.ValueType.RichText:a.ssId!==void 0?(l.addAttribute("t","s"),l.leafNode("v",null,a.ssId)):a.value&&a.value.richText?(l.addAttribute("t","inlineStr"),l.openNode("is"),a.value.richText.forEach(o=>{this.richTextXForm.render(l,o)}),l.closeNode("is")):(l.addAttribute("t","str"),l.leafNode("v",null,a.value));break;case r.ValueType.Date:l.leafNode("v",null,c.dateToExcel(a.value,a.date1904));break;case r.ValueType.Hyperlink:a.ssId!==void 0?(l.addAttribute("t","s"),l.leafNode("v",null,a.ssId)):(l.addAttribute("t","str"),l.leafNode("v",null,a.text));break;case r.ValueType.Formula:this.renderFormula(l,a);break;case r.ValueType.Merge:}l.closeNode()}}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"c":return this.model={address:l.attributes.r},this.t=l.attributes.t,l.attributes.s&&(this.model.styleId=parseInt(l.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=l.attributes.si,this.model.shareType=l.attributes.t,this.model.ref=l.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){if(this.parser)this.parser.parseText(l);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+l:l;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+l:l:this.model.value=this.model.value?this.model.value+l:l}}parseClose(l){switch(l){case"c":{const{model:a}=this;if(a.formula||a.shareType)a.type=r.ValueType.Formula,a.value&&(this.t==="str"?a.result=c.xmlDecode(a.value):this.t==="b"?a.result=parseInt(a.value,10)!==0:this.t==="e"?a.result={error:a.value}:a.result=parseFloat(a.value),a.value=void 0);else if(a.value!==void 0)switch(this.t){case"s":a.type=r.ValueType.String,a.value=parseInt(a.value,10);break;case"str":a.type=r.ValueType.String,a.value=c.xmlDecode(a.value);break;case"inlineStr":a.type=r.ValueType.String;break;case"b":a.type=r.ValueType.Boolean,a.value=parseInt(a.value,10)!==0;break;case"e":a.type=r.ValueType.Error,a.value={error:a.value};break;default:a.type=r.ValueType.Number,a.value=parseFloat(a.value)}else a.styleId?a.type=r.ValueType.Null:a.type=r.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(l),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(l),!0)}}reconcile(l,a){const o=l.styleId&&a.styles&&a.styles.getStyleModel(l.styleId);switch(o&&(l.style=o),l.styleId!==void 0&&(l.styleId=void 0),l.type){case r.ValueType.String:typeof l.value=="number"&&a.sharedStrings&&(l.value=a.sharedStrings.getString(l.value)),l.value.richText&&(l.type=r.ValueType.RichText);break;case r.ValueType.Number:o&&c.isDateFmt(o.numFmt)&&(l.type=r.ValueType.Date,l.value=c.excelToDate(l.value,a.date1904));break;case r.ValueType.Formula:l.result!==void 0&&o&&c.isDateFmt(o.numFmt)&&(l.result=c.excelToDate(l.result,a.date1904)),l.shareType==="shared"&&(l.ref?a.formulae[l.si]=l.address:(l.sharedFormula=a.formulae[l.si],delete l.shareType),delete l.si)}const d=a.hyperlinkMap[l.address];d&&(l.type===r.ValueType.Formula?(l.text=l.result,l.result=void 0):(l.text=l.value,l.value=void 0),l.type=r.ValueType.Hyperlink,l.hyperlink=d);const f=a.commentsMap&&a.commentsMap[l.address];f&&(l.comment=f)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(e,h,p){const c=e("../../base-xform");h.exports=class extends c{get tag(){return"x14:cfIcon"}render(s,i){s.leafNode(this.tag,{iconSet:i.iconSet,iconId:i.iconId})}parseOpen(s){let{attributes:i}=s;this.model={iconSet:i.iconSet,iconId:c.toIntValue(i.iconId)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],75:[function(e,h,p){const{v4:c}=e("uuid"),s=e("../../base-xform"),i=e("../../composite-xform"),r=e("./databar-ext-xform"),t=e("./icon-set-ext-xform"),n={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class l extends i{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new r,"x14:iconSet":this.iconSetXform=new t}}get tag(){return"x14:cfRule"}static isExt(o){return o.type==="dataBar"?r.isExt(o):!(o.type!=="iconSet"||!o.custom&&!n[o.iconSet])}prepare(o){l.isExt(o)&&(o.x14Id=`{${c()}}`.toUpperCase())}render(o,d){if(l.isExt(d))switch(d.type){case"dataBar":this.renderDataBar(o,d);break;case"iconSet":this.renderIconSet(o,d)}}renderDataBar(o,d){o.openNode(this.tag,{type:"dataBar",id:d.x14Id}),this.databarXform.render(o,d),o.closeNode()}renderIconSet(o,d){o.openNode(this.tag,{type:"iconSet",priority:d.priority,id:d.x14Id||`{${c()}}`}),this.iconSetXform.render(o,d),o.closeNode()}createNewModel(o){let{attributes:d}=o;return{type:d.type,x14Id:d.id,priority:s.toIntValue(d.priority)}}onParserClose(o,d){Object.assign(this.model,d.model)}}h.exports=l},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(e,h,p){const c=e("../../composite-xform"),s=e("./f-ext-xform");h.exports=class extends c{constructor(){super(),this.map={"xm:f":this.fExtXform=new s}}get tag(){return"x14:cfvo"}render(i,r){i.openNode(this.tag,{type:r.type}),r.value!==void 0&&this.fExtXform.render(i,r.value),i.closeNode()}createNewModel(i){return{type:i.attributes.type}}onParserClose(i,r){switch(i){case"xm:f":this.model.value=r.model?parseFloat(r.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(e,h,p){const c=e("../../composite-xform"),s=e("./sqref-ext-xform"),i=e("./cf-rule-ext-xform");h.exports=class extends c{constructor(){super(),this.map={"xm:sqref":this.sqRef=new s,"x14:cfRule":this.cfRule=new i}}get tag(){return"x14:conditionalFormatting"}prepare(r,t){r.rules.forEach(n=>{this.cfRule.prepare(n,t)})}render(r,t){t.rules.some(i.isExt)&&(r.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),t.rules.filter(i.isExt).forEach(n=>this.cfRule.render(r,n)),this.sqRef.render(r,t.ref),r.closeNode())}createNewModel(){return{rules:[]}}onParserClose(r,t){switch(r){case"xm:sqref":this.model.ref=t.model;break;case"x14:cfRule":this.model.rules.push(t.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(e,h,p){const c=e("../../composite-xform"),s=e("./cf-rule-ext-xform"),i=e("./conditional-formatting-ext-xform");h.exports=class extends c{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new i}}get tag(){return"x14:conditionalFormattings"}hasContent(r){return r.hasExtContent===void 0&&(r.hasExtContent=r.some(t=>t.rules.some(s.isExt))),r.hasExtContent}prepare(r,t){r.forEach(n=>{this.cfXform.prepare(n,t)})}render(r,t){this.hasContent(t)&&(r.openNode(this.tag),t.forEach(n=>this.cfXform.render(r,n)),r.closeNode())}createNewModel(){return[]}onParserClose(r,t){this.model.push(t.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(e,h,p){const c=e("../../base-xform"),s=e("../../composite-xform"),i=e("../../style/color-xform"),r=e("./cfvo-ext-xform");h.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new r,"x14:borderColor":this.borderColorXform=new i("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new i("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new i("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new i("x14:axisColor")}}static isExt(t){return!t.gradient}get tag(){return"x14:dataBar"}render(t,n){t.openNode(this.tag,{minLength:c.toIntAttribute(n.minLength,0,!0),maxLength:c.toIntAttribute(n.maxLength,100,!0),border:c.toBoolAttribute(n.border,!1),gradient:c.toBoolAttribute(n.gradient,!0),negativeBarColorSameAsPositive:c.toBoolAttribute(n.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:c.toBoolAttribute(n.negativeBarBorderColorSameAsPositive,!0),axisPosition:c.toAttribute(n.axisPosition,"auto"),direction:c.toAttribute(n.direction,"leftToRight")}),n.cfvo.forEach(l=>{this.cfvoXform.render(t,l)}),this.borderColorXform.render(t,n.borderColor),this.negativeBorderColorXform.render(t,n.negativeBorderColor),this.negativeFillColorXform.render(t,n.negativeFillColor),this.axisColorXform.render(t,n.axisColor),t.closeNode()}createNewModel(t){let{attributes:n}=t;return{cfvo:[],minLength:c.toIntValue(n.minLength,0),maxLength:c.toIntValue(n.maxLength,100),border:c.toBoolValue(n.border,!1),gradient:c.toBoolValue(n.gradient,!0),negativeBarColorSameAsPositive:c.toBoolValue(n.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:c.toBoolValue(n.negativeBarBorderColorSameAsPositive,!0),axisPosition:c.toStringValue(n.axisPosition,"auto"),direction:c.toStringValue(n.direction,"leftToRight")}}onParserClose(t,n){const[,l]=t.split(":");switch(l){case"cfvo":this.model.cfvo.push(n.model);break;default:this.model[l]=n.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(e,h,p){const c=e("../../base-xform");h.exports=class extends c{get tag(){return"xm:f"}render(s,i){s.leafNode(this.tag,null,i)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],81:[function(e,h,p){const c=e("../../base-xform"),s=e("../../composite-xform"),i=e("./cfvo-ext-xform"),r=e("./cf-icon-ext-xform");h.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new i,"x14:cfIcon":this.cfIconXform=new r}}get tag(){return"x14:iconSet"}render(t,n){t.openNode(this.tag,{iconSet:c.toStringAttribute(n.iconSet),reverse:c.toBoolAttribute(n.reverse,!1),showValue:c.toBoolAttribute(n.showValue,!0),custom:c.toBoolAttribute(n.icons,!1)}),n.cfvo.forEach(l=>{this.cfvoXform.render(t,l)}),n.icons&&n.icons.forEach((l,a)=>{l.iconId=a,this.cfIconXform.render(t,l)}),t.closeNode()}createNewModel(t){let{attributes:n}=t;return{cfvo:[],iconSet:c.toStringValue(n.iconSet,"3TrafficLights"),reverse:c.toBoolValue(n.reverse,!1),showValue:c.toBoolValue(n.showValue,!0)}}onParserClose(t,n){const[,l]=t.split(":");switch(l){case"cfvo":this.model.cfvo.push(n.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(n.model);break;default:this.model[l]=n.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(e,h,p){const c=e("../../base-xform");h.exports=class extends c{get tag(){return"xm:sqref"}render(s,i){s.leafNode(this.tag,null,i)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],83:[function(e,h,p){const c=e("../../base-xform"),s=e("../../composite-xform"),i=e("../../../../doc/range"),r=e("./databar-xform"),t=e("./ext-lst-ref-xform"),n=e("./formula-xform"),l=e("./color-scale-xform"),a=e("./icon-set-xform"),o={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},d=u=>{const{type:g,operator:m}=u;switch(g){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:g};default:return{type:g,operator:m}}};class f extends s{constructor(){super(),this.map={dataBar:this.databarXform=new r,extLst:this.extLstRefXform=new t,formula:this.formulaXform=new n,colorScale:this.colorScaleXform=new l,iconSet:this.iconSetXform=new a}}get tag(){return"cfRule"}static isPrimitive(g){return g.type!=="iconSet"||!g.custom&&!o[g.iconSet]}render(g,m){switch(m.type){case"expression":this.renderExpression(g,m);break;case"cellIs":this.renderCellIs(g,m);break;case"top10":this.renderTop10(g,m);break;case"aboveAverage":this.renderAboveAverage(g,m);break;case"dataBar":this.renderDataBar(g,m);break;case"colorScale":this.renderColorScale(g,m);break;case"iconSet":this.renderIconSet(g,m);break;case"containsText":this.renderText(g,m);break;case"timePeriod":this.renderTimePeriod(g,m)}}renderExpression(g,m){g.openNode(this.tag,{type:"expression",dxfId:m.dxfId,priority:m.priority}),this.formulaXform.render(g,m.formulae[0]),g.closeNode()}renderCellIs(g,m){g.openNode(this.tag,{type:"cellIs",dxfId:m.dxfId,priority:m.priority,operator:m.operator}),m.formulae.forEach(k=>{this.formulaXform.render(g,k)}),g.closeNode()}renderTop10(g,m){g.leafNode(this.tag,{type:"top10",dxfId:m.dxfId,priority:m.priority,percent:c.toBoolAttribute(m.percent,!1),bottom:c.toBoolAttribute(m.bottom,!1),rank:c.toIntValue(m.rank,10,!0)})}renderAboveAverage(g,m){g.leafNode(this.tag,{type:"aboveAverage",dxfId:m.dxfId,priority:m.priority,aboveAverage:c.toBoolAttribute(m.aboveAverage,!0)})}renderDataBar(g,m){g.openNode(this.tag,{type:"dataBar",priority:m.priority}),this.databarXform.render(g,m),this.extLstRefXform.render(g,m),g.closeNode()}renderColorScale(g,m){g.openNode(this.tag,{type:"colorScale",priority:m.priority}),this.colorScaleXform.render(g,m),g.closeNode()}renderIconSet(g,m){f.isPrimitive(m)&&(g.openNode(this.tag,{type:"iconSet",priority:m.priority}),this.iconSetXform.render(g,m),g.closeNode())}renderText(g,m){g.openNode(this.tag,{type:m.operator,dxfId:m.dxfId,priority:m.priority,operator:c.toStringAttribute(m.operator,"containsText")});const k=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const A=new i(E.ref),{tl:L}=A;switch(E.operator){case"containsText":return`NOT(ISERROR(SEARCH("${E.text}",${L})))`;case"containsBlanks":return`LEN(TRIM(${L}))=0`;case"notContainsBlanks":return`LEN(TRIM(${L}))>0`;case"containsErrors":return`ISERROR(${L})`;case"notContainsErrors":return`NOT(ISERROR(${L}))`;default:return}})(m);k&&this.formulaXform.render(g,k),g.closeNode()}renderTimePeriod(g,m){g.openNode(this.tag,{type:"timePeriod",dxfId:m.dxfId,priority:m.priority,timePeriod:m.timePeriod});const k=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const A=new i(E.ref),{tl:L}=A;switch(E.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${L},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${L},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${L},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${L},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${L},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${L},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${L},1)=TODAY()-1`;case"today":return`FLOOR(${L},1)=TODAY()`;case"tomorrow":return`FLOOR(${L},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${L},1)<=6,FLOOR(${L},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${L})=MONTH(EDATE(TODAY(),0-1)),YEAR(${L})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${L})=MONTH(TODAY()),YEAR(${L})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${L})=MONTH(EDATE(TODAY(),0+1)),YEAR(${L})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(m);k&&this.formulaXform.render(g,k),g.closeNode()}createNewModel(g){let{attributes:m}=g;return{...d(m),dxfId:c.toIntValue(m.dxfId),priority:c.toIntValue(m.priority),timePeriod:m.timePeriod,percent:c.toBoolValue(m.percent),bottom:c.toBoolValue(m.bottom),rank:c.toIntValue(m.rank),aboveAverage:c.toBoolValue(m.aboveAverage)}}onParserClose(g,m){switch(g){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,m.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(m.model)}}}h.exports=f},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(e,h,p){const c=e("../../base-xform");h.exports=class extends c{get tag(){return"cfvo"}render(s,i){s.leafNode(this.tag,{type:i.type,val:i.value})}parseOpen(s){this.model={type:s.attributes.type,value:c.toFloatValue(s.attributes.val)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],85:[function(e,h,p){const c=e("../../composite-xform"),s=e("../../style/color-xform"),i=e("./cfvo-xform");h.exports=class extends c{constructor(){super(),this.map={cfvo:this.cfvoXform=new i,color:this.colorXform=new s}}get tag(){return"colorScale"}render(r,t){r.openNode(this.tag),t.cfvo.forEach(n=>{this.cfvoXform.render(r,n)}),t.color.forEach(n=>{this.colorXform.render(r,n)}),r.closeNode()}createNewModel(r){return{cfvo:[],color:[]}}onParserClose(r,t){this.model[r].push(t.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(e,h,p){const c=e("../../composite-xform"),s=e("./cf-rule-xform");h.exports=class extends c{constructor(){super(),this.map={cfRule:new s}}get tag(){return"conditionalFormatting"}render(i,r){r.rules.some(s.isPrimitive)&&(i.openNode(this.tag,{sqref:r.ref}),r.rules.forEach(t=>{s.isPrimitive(t)&&(t.ref=r.ref,this.map.cfRule.render(i,t))}),i.closeNode())}createNewModel(i){let{attributes:r}=i;return{ref:r.sqref,rules:[]}}onParserClose(i,r){this.model.rules.push(r.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(e,h,p){const c=e("../../base-xform"),s=e("./conditional-formatting-xform");h.exports=class extends c{constructor(){super(),this.cfXform=new s}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(i,r){let t=i.reduce((n,l)=>Math.max(n,...l.rules.map(a=>a.priority||0)),1);i.forEach(n=>{n.rules.forEach(l=>{l.priority||(l.priority=t++),l.style&&(l.dxfId=r.styles.addDxfStyle(l.style))})})}render(i,r){r.forEach(t=>{this.cfXform.render(i,t)})}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(i),!0;default:return!1}}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){return!!this.parser&&(!!this.parser.parseClose(i)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(i,r){i.forEach(t=>{t.rules.forEach(n=>{n.dxfId!==void 0&&(n.style=r.styles.getDxfStyle(n.dxfId),delete n.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(e,h,p){const c=e("../../composite-xform"),s=e("../../style/color-xform"),i=e("./cfvo-xform");h.exports=class extends c{constructor(){super(),this.map={cfvo:this.cfvoXform=new i,color:this.colorXform=new s}}get tag(){return"dataBar"}render(r,t){r.openNode(this.tag),t.cfvo.forEach(n=>{this.cfvoXform.render(r,n)}),this.colorXform.render(r,t.color),r.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(r,t){switch(r){case"cfvo":this.model.cfvo.push(t.model);break;case"color":this.model.color=t.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(e,h,p){const c=e("../../base-xform"),s=e("../../composite-xform");class i extends c{get tag(){return"x14:id"}render(n,l){n.leafNode(this.tag,null,l)}parseOpen(){this.model=""}parseText(n){this.model+=n}parseClose(n){return n!==this.tag}}class r extends s{constructor(){super(),this.map={"x14:id":this.idXform=new i}}get tag(){return"ext"}render(n,l){n.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(n,l.x14Id),n.closeNode()}createNewModel(){return{}}onParserClose(n,l){this.model.x14Id=l.model}}h.exports=class extends s{constructor(){super(),this.map={ext:new r}}get tag(){return"extLst"}render(t,n){t.openNode(this.tag),this.map.ext.render(t,n),t.closeNode()}createNewModel(){return{}}onParserClose(t,n){Object.assign(this.model,n.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(e,h,p){const c=e("../../base-xform");h.exports=class extends c{get tag(){return"formula"}render(s,i){s.leafNode(this.tag,null,i)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],91:[function(e,h,p){const c=e("../../base-xform"),s=e("../../composite-xform"),i=e("./cfvo-xform");h.exports=class extends s{constructor(){super(),this.map={cfvo:this.cfvoXform=new i}}get tag(){return"iconSet"}render(r,t){r.openNode(this.tag,{iconSet:c.toStringAttribute(t.iconSet,"3TrafficLights"),reverse:c.toBoolAttribute(t.reverse,!1),showValue:c.toBoolAttribute(t.showValue,!0)}),t.cfvo.forEach(n=>{this.cfvoXform.render(r,n)}),r.closeNode()}createNewModel(r){let{attributes:t}=r;return{iconSet:c.toStringValue(t.iconSet,"3TrafficLights"),reverse:c.toBoolValue(t.reverse),showValue:c.toBoolValue(t.showValue),cfvo:[]}}onParserClose(r,t){this.model[r].push(t.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(e,h,p){const c=e("../../../utils/utils"),s=e("../base-xform");h.exports=class extends s{get tag(){return"col"}prepare(i,r){const t=r.styles.addStyleModel(i.style||{});t&&(i.styleId=t)}render(i,r){i.openNode("col"),i.addAttribute("min",r.min),i.addAttribute("max",r.max),r.width&&i.addAttribute("width",r.width),r.styleId&&i.addAttribute("style",r.styleId),r.hidden&&i.addAttribute("hidden","1"),r.bestFit&&i.addAttribute("bestFit","1"),r.outlineLevel&&i.addAttribute("outlineLevel",r.outlineLevel),r.collapsed&&i.addAttribute("collapsed","1"),i.addAttribute("customWidth","1"),i.closeNode()}parseOpen(i){if(i.name==="col"){const r=this.model={min:parseInt(i.attributes.min||"0",10),max:parseInt(i.attributes.max||"0",10),width:i.attributes.width===void 0?void 0:parseFloat(i.attributes.width||"0")};return i.attributes.style&&(r.styleId=parseInt(i.attributes.style,10)),c.parseBoolean(i.attributes.hidden)&&(r.hidden=!0),c.parseBoolean(i.attributes.bestFit)&&(r.bestFit=!0),i.attributes.outlineLevel&&(r.outlineLevel=parseInt(i.attributes.outlineLevel,10)),c.parseBoolean(i.attributes.collapsed)&&(r.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(i,r){i.styleId&&(i.style=r.styles.getStyleModel(i.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../../../utils/utils"),i=e("../../../utils/col-cache"),r=e("../base-xform"),t=e("../../../doc/range");function n(a,o,d,f){const u=o[d];u!==void 0?a[d]=u:f!==void 0&&(a[d]=f)}function l(a,o,d,f){const u=o[d];u!==void 0&&(a[d]=s.parseBoolean(u))}h.exports=class extends r{get tag(){return"dataValidations"}render(a,o){const d=function(f){const u=c.map(f,(k,E)=>({address:E,dataValidation:k,marked:!1})).sort((k,E)=>c.strcmp(k.address,E.address)),g=c.keyBy(u,"address"),m=(k,E,A)=>{for(let L=0;L<E;L++){const z=i.encodeAddress(k.row+L,A);if(!f[z]||!c.isEqual(f[k.address],f[z]))return!1}return!0};return u.map(k=>{if(!k.marked){const E=i.decodeEx(k.address);if(E.dimensions)return g[E.dimensions].marked=!0,{...k.dataValidation,sqref:k.address};let A=1,L=i.encodeAddress(E.row+A,E.col);for(;f[L]&&c.isEqual(k.dataValidation,f[L]);)A++,L=i.encodeAddress(E.row+A,E.col);let z=1;for(;m(E,A,E.col+z);)z++;for(let R=0;R<A;R++)for(let I=0;I<z;I++)L=i.encodeAddress(E.row+R,E.col+I),g[L].marked=!0;if(A>1||z>1){const R=E.row+(A-1),I=E.col+(z-1);return{...k.dataValidation,sqref:`${k.address}:${i.encodeAddress(R,I)}`}}return{...k.dataValidation,sqref:k.address}}return null}).filter(Boolean)}(o);d.length&&(a.openNode("dataValidations",{count:d.length}),d.forEach(f=>{a.openNode("dataValidation"),f.type!=="any"&&(a.addAttribute("type",f.type),f.operator&&f.type!=="list"&&f.operator!=="between"&&a.addAttribute("operator",f.operator),f.allowBlank&&a.addAttribute("allowBlank","1")),f.showInputMessage&&a.addAttribute("showInputMessage","1"),f.promptTitle&&a.addAttribute("promptTitle",f.promptTitle),f.prompt&&a.addAttribute("prompt",f.prompt),f.showErrorMessage&&a.addAttribute("showErrorMessage","1"),f.errorStyle&&a.addAttribute("errorStyle",f.errorStyle),f.errorTitle&&a.addAttribute("errorTitle",f.errorTitle),f.error&&a.addAttribute("error",f.error),a.addAttribute("sqref",f.sqref),(f.formulae||[]).forEach((u,g)=>{a.openNode("formula"+(g+1)),f.type==="date"?a.writeText(s.dateToExcel(new Date(u))):a.writeText(u),a.closeNode()}),a.closeNode()}),a.closeNode())}parseOpen(a){switch(a.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=a.attributes.sqref;const o={type:a.attributes.type||"any",formulae:[]};switch(a.attributes.type&&l(o,a.attributes,"allowBlank"),l(o,a.attributes,"showInputMessage"),l(o,a.attributes,"showErrorMessage"),o.type){case"any":case"list":case"custom":break;default:n(o,a.attributes,"operator","between")}return n(o,a.attributes,"promptTitle"),n(o,a.attributes,"prompt"),n(o,a.attributes,"errorStyle"),n(o,a.attributes,"errorTitle"),n(o,a.attributes,"error"),this._dataValidation=o,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(a){this._formula&&this._formula.push(a)}parseClose(a){switch(a){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(o=>{o.includes(":")?new t(o).forEachAddress(d=>{this.model[d]=this._dataValidation}):this.model[o]=this._dataValidation}),!0;case"formula1":case"formula2":{let o=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":o=parseInt(o,10);break;case"decimal":o=parseFloat(o);break;case"date":o=s.excelToDate(parseFloat(o))}return this._dataValidation.formulae.push(o),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"dimension"}render(s,i){i&&s.leafNode("dimension",{ref:i})}parseOpen(s){return s.name==="dimension"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"drawing"}render(s,i){i&&s.leafNode(this.tag,{"r:id":i.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(e,h,p){const c=e("../composite-xform"),s=e("./cf-ext/conditional-formattings-ext-xform");class i extends c{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new s}}get tag(){return"ext"}hasContent(t){return this.conditionalFormattings.hasContent(t.conditionalFormattings)}prepare(t,n){this.conditionalFormattings.prepare(t.conditionalFormattings,n)}render(t,n){t.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(t,n.conditionalFormattings),t.closeNode()}createNewModel(){return{}}onParserClose(t,n){this.model[t]=n.model}}h.exports=class extends c{constructor(){super(),this.map={ext:this.ext=new i}}get tag(){return"extLst"}prepare(r,t){this.ext.prepare(r,t)}hasContent(r){return this.ext.hasContent(r)}render(r,t){this.hasContent(t)&&(r.openNode("extLst"),this.ext.render(r,t),r.closeNode())}createNewModel(){return{}}onParserClose(r,t){Object.assign(this.model,t.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"headerFooter"}render(s,i){if(i){s.addRollback();let r=!1;s.openNode("headerFooter"),i.differentFirst&&(s.addAttribute("differentFirst","1"),r=!0),i.differentOddEven&&(s.addAttribute("differentOddEven","1"),r=!0),i.oddHeader&&typeof i.oddHeader=="string"&&(s.leafNode("oddHeader",null,i.oddHeader),r=!0),i.oddFooter&&typeof i.oddFooter=="string"&&(s.leafNode("oddFooter",null,i.oddFooter),r=!0),i.evenHeader&&typeof i.evenHeader=="string"&&(s.leafNode("evenHeader",null,i.evenHeader),r=!0),i.evenFooter&&typeof i.evenFooter=="string"&&(s.leafNode("evenFooter",null,i.evenFooter),r=!0),i.firstHeader&&typeof i.firstHeader=="string"&&(s.leafNode("firstHeader",null,i.firstHeader),r=!0),i.firstFooter&&typeof i.firstFooter=="string"&&(s.leafNode("firstFooter",null,i.firstFooter),r=!0),r?(s.closeNode(),s.commit()):s.rollback()}}parseOpen(s){switch(s.name){case"headerFooter":return this.model={},s.attributes.differentFirst&&(this.model.differentFirst=parseInt(s.attributes.differentFirst,0)===1),s.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(s.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(s){switch(this.currentNode){case"oddHeader":this.model.oddHeader=s;break;case"oddFooter":this.model.oddFooter=s;break;case"evenHeader":this.model.evenHeader=s;break;case"evenFooter":this.model.evenFooter=s;break;case"firstHeader":this.model.firstHeader=s;break;case"firstFooter":this.model.firstFooter=s}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"hyperlink"}render(s,i){this.isInternalLink(i)?s.leafNode("hyperlink",{ref:i.address,"r:id":i.rId,tooltip:i.tooltip,location:i.target}):s.leafNode("hyperlink",{ref:i.address,"r:id":i.rId,tooltip:i.tooltip})}parseOpen(s){return s.name==="hyperlink"&&(this.model={address:s.attributes.ref,rId:s.attributes["r:id"],tooltip:s.attributes.tooltip},s.attributes.location&&(this.model.target=s.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(s){return s.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(s.target)}}},{"../base-xform":32}],99:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"mergeCell"}render(s,i){s.leafNode("mergeCell",{ref:i})}parseOpen(s){return s.name==="mergeCell"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../../../doc/range"),i=e("../../../utils/col-cache"),r=e("../../../doc/enums");h.exports=class{constructor(){this.merges={}}add(t){if(this.merges[t.master])this.merges[t.master].expandToAddress(t.address);else{const n=`${t.master}:${t.address}`;this.merges[t.master]=new s(n)}}get mergeCells(){return c.map(this.merges,t=>t.range)}reconcile(t,n){c.each(t,l=>{const a=i.decode(l);for(let o=a.top;o<=a.bottom;o++){const d=n[o-1];for(let f=a.left;f<=a.right;f++){const u=d.cells[f-1];u?u.type===r.ValueType.Merge&&(u.master=a.tl):d.cells[f]={type:r.ValueType.Null,address:i.encodeAddress(o,f)}}}})}getMasterAddress(t){const n=this.hash[t];return n&&n.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(e,h,p){const c=e("../base-xform"),s=i=>i!==void 0;h.exports=class extends c{get tag(){return"outlinePr"}render(i,r){return!(!r||!s(r.summaryBelow)&&!s(r.summaryRight))&&(i.leafNode(this.tag,{summaryBelow:s(r.summaryBelow)?Number(r.summaryBelow):void 0,summaryRight:s(r.summaryRight)?Number(r.summaryRight):void 0}),!0)}parseOpen(i){return i.name===this.tag&&(this.model={summaryBelow:s(i.attributes.summaryBelow)?!!Number(i.attributes.summaryBelow):void 0,summaryRight:s(i.attributes.summaryRight)?!!Number(i.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"brk"}render(s,i){s.leafNode("brk",i)}parseOpen(s){return s.name==="brk"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../base-xform");h.exports=class extends s{get tag(){return"pageMargins"}render(i,r){if(r){const t={left:r.left,right:r.right,top:r.top,bottom:r.bottom,header:r.header,footer:r.footer};c.some(t,n=>n!==void 0)&&i.leafNode(this.tag,t)}}parseOpen(i){switch(i.name){case this.tag:return this.model={left:parseFloat(i.attributes.left||.7),right:parseFloat(i.attributes.right||.7),top:parseFloat(i.attributes.top||.75),bottom:parseFloat(i.attributes.bottom||.75),header:parseFloat(i.attributes.header||.3),footer:parseFloat(i.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"pageSetUpPr"}render(s,i){return!(!i||!i.fitToPage)&&(s.leafNode(this.tag,{fitToPage:i.fitToPage?"1":void 0}),!0)}parseOpen(s){return s.name===this.tag&&(this.model={fitToPage:s.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../base-xform");function i(l){return l?"1":void 0}function r(l){switch(l){case"overThenDown":return l;default:return}}function t(l){switch(l){case"atEnd":case"asDisplyed":return l;default:return}}function n(l){switch(l){case"dash":case"blank":case"NA":return l;default:return}}h.exports=class extends s{get tag(){return"pageSetup"}render(l,a){if(a){const o={paperSize:a.paperSize,orientation:a.orientation,horizontalDpi:a.horizontalDpi,verticalDpi:a.verticalDpi,pageOrder:r(a.pageOrder),blackAndWhite:i(a.blackAndWhite),draft:i(a.draft),cellComments:t(a.cellComments),errors:n(a.errors),scale:a.scale,fitToWidth:a.fitToWidth,fitToHeight:a.fitToHeight,firstPageNumber:a.firstPageNumber,useFirstPageNumber:i(a.firstPageNumber),usePrinterDefaults:i(a.usePrinterDefaults),copies:a.copies};c.some(o,d=>d!==void 0)&&l.leafNode(this.tag,o)}}parseOpen(l){switch(l.name){case this.tag:return this.model={paperSize:(a=l.attributes.paperSize,a!==void 0?parseInt(a,10):void 0),orientation:l.attributes.orientation||"portrait",horizontalDpi:parseInt(l.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(l.attributes.verticalDpi||"4294967295",10),pageOrder:l.attributes.pageOrder||"downThenOver",blackAndWhite:l.attributes.blackAndWhite==="1",draft:l.attributes.draft==="1",cellComments:l.attributes.cellComments||"None",errors:l.attributes.errors||"displayed",scale:parseInt(l.attributes.scale||"100",10),fitToWidth:parseInt(l.attributes.fitToWidth||"1",10),fitToHeight:parseInt(l.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(l.attributes.firstPageNumber||"1",10),useFirstPageNumber:l.attributes.useFirstPageNumber==="1",usePrinterDefaults:l.attributes.usePrinterDefaults==="1",copies:parseInt(l.attributes.copies||"1",10)},!0;default:return!1}var a}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"picture"}render(s,i){i&&s.leafNode(this.tag,{"r:id":i.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../base-xform");function i(r){return r?"1":void 0}h.exports=class extends s{get tag(){return"printOptions"}render(r,t){if(t){const n={headings:i(t.showRowColHeaders),gridLines:i(t.showGridLines),horizontalCentered:i(t.horizontalCentered),verticalCentered:i(t.verticalCentered)};c.some(n,l=>l!==void 0)&&r.leafNode(this.tag,n)}}parseOpen(r){switch(r.name){case this.tag:return this.model={showRowColHeaders:r.attributes.headings==="1",showGridLines:r.attributes.gridLines==="1",horizontalCentered:r.attributes.horizontalCentered==="1",verticalCentered:r.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(e,h,p){const c=e("./page-breaks-xform"),s=e("../list-xform");h.exports=class extends s{constructor(){super({tag:"rowBreaks",count:!0,childXform:new c})}render(i,r){if(r&&r.length){i.openNode(this.tag,this.$),this.count&&(i.addAttribute(this.$count,r.length),i.addAttribute("manualBreakCount",r.length));const{childXform:t}=this;r.forEach(n=>{t.render(i,n)}),i.closeNode()}else this.empty&&i.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(e,h,p){const c=e("../base-xform"),s=e("../../../utils/utils"),i=e("./cell-xform");h.exports=class extends c{constructor(r){super(),this.maxItems=r&&r.maxItems,this.map={c:new i}}get tag(){return"row"}prepare(r,t){const n=t.styles.addStyleModel(r.style);n&&(r.styleId=n);const l=this.map.c;r.cells.forEach(a=>{l.prepare(a,t)})}render(r,t,n){r.openNode("row"),r.addAttribute("r",t.number),t.height&&(r.addAttribute("ht",t.height),r.addAttribute("customHeight","1")),t.hidden&&r.addAttribute("hidden","1"),t.min>0&&t.max>0&&t.min<=t.max&&r.addAttribute("spans",`${t.min}:${t.max}`),t.styleId&&(r.addAttribute("s",t.styleId),r.addAttribute("customFormat","1")),r.addAttribute("x14ac:dyDescent","0.25"),t.outlineLevel&&r.addAttribute("outlineLevel",t.outlineLevel),t.collapsed&&r.addAttribute("collapsed","1");const l=this.map.c;t.cells.forEach(a=>{l.render(r,a,n)}),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;if(r.name==="row"){this.numRowsSeen+=1;const t=r.attributes.spans?r.attributes.spans.split(":").map(l=>parseInt(l,10)):[void 0,void 0],n=this.model={number:parseInt(r.attributes.r,10),min:t[0],max:t[1],cells:[]};return r.attributes.s&&(n.styleId=parseInt(r.attributes.s,10)),s.parseBoolean(r.attributes.hidden)&&(n.hidden=!0),s.parseBoolean(r.attributes.bestFit)&&(n.bestFit=!0),r.attributes.ht&&(n.height=parseFloat(r.attributes.ht)),r.attributes.outlineLevel&&(n.outlineLevel=parseInt(r.attributes.outlineLevel,10)),s.parseBoolean(r.attributes.collapsed)&&(n.collapsed=!0),!0}return this.parser=this.map[r.name],!!this.parser&&(this.parser.parseOpen(r),!0)}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(r,t){r.style=r.styleId?t.styles.getStyleModel(r.styleId):{},r.styleId!==void 0&&(r.styleId=void 0);const n=this.map.c;r.cells.forEach(l=>{n.reconcile(l,t)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../base-xform");h.exports=class extends s{get tag(){return"sheetFormatPr"}render(i,r){if(r){const t={defaultRowHeight:r.defaultRowHeight,outlineLevelRow:r.outlineLevelRow,outlineLevelCol:r.outlineLevelCol,"x14ac:dyDescent":r.dyDescent};r.defaultColWidth&&(t.defaultColWidth=r.defaultColWidth),r.defaultRowHeight&&r.defaultRowHeight===15||(t.customHeight="1"),c.some(t,n=>n!==void 0)&&i.leafNode("sheetFormatPr",t)}}parseOpen(i){return i.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(i.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(i.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(i.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(i.attributes.outlineLevelCol||"0",10)},i.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(i.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(e,h,p){const c=e("../base-xform"),s=e("../style/color-xform"),i=e("./page-setup-properties-xform"),r=e("./outline-properties-xform");h.exports=class extends c{constructor(){super(),this.map={tabColor:new s("tabColor"),pageSetUpPr:new i,outlinePr:new r}}get tag(){return"sheetPr"}render(t,n){if(n){t.addRollback(),t.openNode("sheetPr");let l=!1;l=this.map.tabColor.render(t,n.tabColor)||l,l=this.map.pageSetUpPr.render(t,n.pageSetup)||l,l=this.map.outlinePr.render(t,n.outlineProperties)||l,l?(t.closeNode(),t.commit()):t.rollback()}}parseOpen(t){return this.parser?(this.parser.parseOpen(t),!0):t.name===this.tag?(this.reset(),!0):!!this.map[t.name]&&(this.parser=this.map[t.name],this.parser.parseOpen(t),!0)}parseText(t){return!!this.parser&&(this.parser.parseText(t),!0)}parseClose(t){return this.parser?(this.parser.parseClose(t)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../base-xform");function i(t,n){return t?n:void 0}function r(t,n){return t===n||void 0}h.exports=class extends s{get tag(){return"sheetProtection"}render(t,n){if(n){const l={sheet:i(n.sheet,"1"),selectLockedCells:n.selectLockedCells===!1?"1":void 0,selectUnlockedCells:n.selectUnlockedCells===!1?"1":void 0,formatCells:i(n.formatCells,"0"),formatColumns:i(n.formatColumns,"0"),formatRows:i(n.formatRows,"0"),insertColumns:i(n.insertColumns,"0"),insertRows:i(n.insertRows,"0"),insertHyperlinks:i(n.insertHyperlinks,"0"),deleteColumns:i(n.deleteColumns,"0"),deleteRows:i(n.deleteRows,"0"),sort:i(n.sort,"0"),autoFilter:i(n.autoFilter,"0"),pivotTables:i(n.pivotTables,"0")};n.sheet&&(l.algorithmName=n.algorithmName,l.hashValue=n.hashValue,l.saltValue=n.saltValue,l.spinCount=n.spinCount,l.objects=i(n.objects===!1,"1"),l.scenarios=i(n.scenarios===!1,"1")),c.some(l,a=>a!==void 0)&&t.leafNode(this.tag,l)}}parseOpen(t){switch(t.name){case this.tag:return this.model={sheet:r(t.attributes.sheet,"1"),objects:t.attributes.objects!=="1"&&void 0,scenarios:t.attributes.scenarios!=="1"&&void 0,selectLockedCells:t.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:t.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:r(t.attributes.formatCells,"0"),formatColumns:r(t.attributes.formatColumns,"0"),formatRows:r(t.attributes.formatRows,"0"),insertColumns:r(t.attributes.insertColumns,"0"),insertRows:r(t.attributes.insertRows,"0"),insertHyperlinks:r(t.attributes.insertHyperlinks,"0"),deleteColumns:r(t.attributes.deleteColumns,"0"),deleteRows:r(t.attributes.deleteRows,"0"),sort:r(t.attributes.sort,"0"),autoFilter:r(t.attributes.autoFilter,"0"),pivotTables:r(t.attributes.pivotTables,"0")},t.attributes.algorithmName&&(this.model.algorithmName=t.attributes.algorithmName,this.model.hashValue=t.attributes.hashValue,this.model.saltValue=t.attributes.saltValue,this.model.spinCount=parseInt(t.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(e,h,p){const c=e("../../../utils/col-cache"),s=e("../base-xform"),i={frozen:"frozen",frozenSplit:"frozen",split:"split"};h.exports=class extends s{get tag(){return"sheetView"}prepare(r){switch(r.state){case"frozen":case"split":break;default:r.state="normal"}}render(r,t){r.openNode("sheetView",{workbookViewId:t.workbookViewId||0});const n=function(f,u,g){g&&r.addAttribute(f,u)};let l,a,o,d;switch(n("rightToLeft","1",t.rightToLeft===!0),n("tabSelected","1",t.tabSelected),n("showRuler","0",t.showRuler===!1),n("showRowColHeaders","0",t.showRowColHeaders===!1),n("showGridLines","0",t.showGridLines===!1),n("zoomScale",t.zoomScale,t.zoomScale),n("zoomScaleNormal",t.zoomScaleNormal,t.zoomScaleNormal),n("view",t.style,t.style),t.state){case"frozen":a=t.xSplit||0,o=t.ySplit||0,l=t.topLeftCell||c.getAddress(o+1,a+1).address,d=(t.xSplit&&t.ySplit?"bottomRight":t.xSplit&&"topRight")||"bottomLeft",r.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:l,activePane:d,state:"frozen"}),r.leafNode("selection",{pane:d,activeCell:t.activeCell,sqref:t.activeCell});break;case"split":t.activePane==="topLeft"&&(t.activePane=void 0),r.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:t.topLeftCell,activePane:t.activePane}),r.leafNode("selection",{pane:t.activePane,activeCell:t.activeCell,sqref:t.activeCell});break;case"normal":t.activeCell&&r.leafNode("selection",{activeCell:t.activeCell,sqref:t.activeCell})}r.closeNode()}parseOpen(r){switch(r.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(r.attributes.workbookViewId,10),rightToLeft:r.attributes.rightToLeft==="1",tabSelected:r.attributes.tabSelected==="1",showRuler:r.attributes.showRuler!=="0",showRowColHeaders:r.attributes.showRowColHeaders!=="0",showGridLines:r.attributes.showGridLines!=="0",zoomScale:parseInt(r.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(r.attributes.zoomScaleNormal||"100",10),style:r.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(r.attributes.xSplit||"0",10),ySplit:parseInt(r.attributes.ySplit||"0",10),topLeftCell:r.attributes.topLeftCell,activePane:r.attributes.activePane||"topLeft",state:r.attributes.state},!0;case"selection":{const t=r.attributes.pane||"topLeft";return this.selections[t]={pane:t,activeCell:r.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(r){let t,n;switch(r){case"sheetView":return this.sheetView&&this.pane?(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:i[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(t.activePane=this.pane.activePane),n=this.selections[this.pane.activePane],n&&n.activeCell&&(t.activeCell=n.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)):(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},n=this.selections.topLeft,n&&n.activeCell&&(t.activeCell=n.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"tablePart"}render(s,i){i&&s.leafNode(this.tag,{"r:id":i.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),i=e("../../../utils/xml-stream"),r=e("../../rel-type"),t=e("./merges"),n=e("../base-xform"),l=e("../list-xform"),a=e("./row-xform"),o=e("./col-xform"),d=e("./dimension-xform"),f=e("./hyperlink-xform"),u=e("./merge-cell-xform"),g=e("./data-validations-xform"),m=e("./sheet-properties-xform"),k=e("./sheet-format-properties-xform"),E=e("./sheet-view-xform"),A=e("./sheet-protection-xform"),L=e("./page-margins-xform"),z=e("./page-setup-xform"),R=e("./print-options-xform"),I=e("./auto-filter-xform"),B=e("./picture-xform"),H=e("./drawing-xform"),$=e("./table-part-xform"),C=e("./row-breaks-xform"),T=e("./header-footer-xform"),j=e("./cf/conditional-formattings-xform"),b=e("./ext-lst-xform"),v=(w,N)=>{if(!N||!N.length)return w;if(!w||!w.length)return N;const P={},D={};return w.forEach(V=>{P[V.ref]=V,V.rules.forEach(q=>{const{x14Id:G}=q;G&&(D[G]=q)})}),N.forEach(V=>{V.rules.forEach(q=>{const G=D[q.x14Id];G?((F,X)=>{Object.keys(X).forEach(O=>{const M=F[O],U=X[O];M===void 0&&U!==void 0&&(F[O]=U)})})(G,q):P[V.ref]?P[V.ref].rules.push(q):w.push({ref:V.ref,rules:[q]})})}),w};class x extends n{constructor(N){super();const{maxRows:P,maxCols:D,ignoreNodes:V}=N||{};this.ignoreNodes=V||[],this.map={sheetPr:new m,dimension:new d,sheetViews:new l({tag:"sheetViews",count:!1,childXform:new E}),sheetFormatPr:new k,cols:new l({tag:"cols",count:!1,childXform:new o}),sheetData:new l({tag:"sheetData",count:!1,empty:!0,childXform:new a({maxItems:D}),maxItems:P}),autoFilter:new I,mergeCells:new l({tag:"mergeCells",count:!0,childXform:new u}),rowBreaks:new C,hyperlinks:new l({tag:"hyperlinks",count:!1,childXform:new f}),pageMargins:new L,dataValidations:new g,pageSetup:new z,headerFooter:new T,printOptions:new R,picture:new B,drawing:new H,sheetProtection:new A,tableParts:new l({tag:"tableParts",count:!0,childXform:new $}),conditionalFormatting:new j,extLst:new b}}prepare(N,P){P.merges=new t,N.hyperlinks=P.hyperlinks=[],N.comments=P.comments=[],P.formulae={},P.siFormulae=0,this.map.cols.prepare(N.cols,P),this.map.sheetData.prepare(N.rows,P),this.map.conditionalFormatting.prepare(N.conditionalFormattings,P),N.mergeCells=P.merges.mergeCells;const D=N.rels=[];function V(F){return"rId"+(F.length+1)}if(N.hyperlinks.forEach(F=>{const X=V(D);F.rId=X,D.push({Id:X,Type:r.Hyperlink,Target:F.target,TargetMode:"External"})}),N.comments.length>0){const F={Id:V(D),Type:r.Comments,Target:`../comments${N.id}.xml`};D.push(F);const X={Id:V(D),Type:r.VmlDrawing,Target:`../drawings/vmlDrawing${N.id}.vml`};D.push(X),N.comments.forEach(O=>{O.refAddress=s.decodeAddress(O.ref)}),P.commentRefs.push({commentName:"comments"+N.id,vmlDrawing:"vmlDrawing"+N.id})}const q=[];let G;N.media.forEach(F=>{if(F.type==="background"){const X=V(D);G=P.media[F.imageId],D.push({Id:X,Type:r.Image,Target:`../media/${G.name}.${G.extension}`}),N.background={rId:X},N.image=P.media[F.imageId]}else if(F.type==="image"){let{drawing:X}=N;G=P.media[F.imageId],X||(X=N.drawing={rId:V(D),name:"drawing"+ ++P.drawingsCount,anchors:[],rels:[]},P.drawings.push(X),D.push({Id:X.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${X.name}.xml`}));let O=this.preImageId===F.imageId?q[F.imageId]:q[X.rels.length];O||(O=V(X.rels),q[X.rels.length]=O,X.rels.push({Id:O,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${G.name}.${G.extension}`}));const M={picture:{rId:O},range:F.range};if(F.hyperlinks&&F.hyperlinks.hyperlink){const U=V(X.rels);q[X.rels.length]=U,M.picture.hyperlinks={tooltip:F.hyperlinks.tooltip,rId:U},X.rels.push({Id:U,Type:r.Hyperlink,Target:F.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=F.imageId,X.anchors.push(M)}}),N.tables.forEach(F=>{const X=V(D);F.rId=X,D.push({Id:X,Type:r.Table,Target:"../tables/"+F.target}),F.columns.forEach(O=>{const{style:M}=O;M&&(O.dxfId=P.styles.addDxfStyle(M))})}),this.map.extLst.prepare(N,P)}render(N,P){N.openXml(i.StdDocAttributes),N.openNode("worksheet",x.WORKSHEET_ATTRIBUTES);const D=P.properties?{defaultRowHeight:P.properties.defaultRowHeight,dyDescent:P.properties.dyDescent,outlineLevelCol:P.properties.outlineLevelCol,outlineLevelRow:P.properties.outlineLevelRow}:void 0;P.properties&&P.properties.defaultColWidth&&(D.defaultColWidth=P.properties.defaultColWidth);const V={outlineProperties:P.properties&&P.properties.outlineProperties,tabColor:P.properties&&P.properties.tabColor,pageSetup:P.pageSetup&&P.pageSetup.fitToPage?{fitToPage:P.pageSetup.fitToPage}:void 0},q=P.pageSetup&&P.pageSetup.margins,G={showRowColHeaders:P.pageSetup&&P.pageSetup.showRowColHeaders,showGridLines:P.pageSetup&&P.pageSetup.showGridLines,horizontalCentered:P.pageSetup&&P.pageSetup.horizontalCentered,verticalCentered:P.pageSetup&&P.pageSetup.verticalCentered},F=P.sheetProtection;this.map.sheetPr.render(N,V),this.map.dimension.render(N,P.dimensions),this.map.sheetViews.render(N,P.views),this.map.sheetFormatPr.render(N,D),this.map.cols.render(N,P.cols),this.map.sheetData.render(N,P.rows),this.map.sheetProtection.render(N,F),this.map.autoFilter.render(N,P.autoFilter),this.map.mergeCells.render(N,P.mergeCells),this.map.conditionalFormatting.render(N,P.conditionalFormattings),this.map.dataValidations.render(N,P.dataValidations),this.map.hyperlinks.render(N,P.hyperlinks),this.map.printOptions.render(N,G),this.map.pageMargins.render(N,q),this.map.pageSetup.render(N,P.pageSetup),this.map.headerFooter.render(N,P.headerFooter),this.map.rowBreaks.render(N,P.rowBreaks),this.map.drawing.render(N,P.drawing),this.map.picture.render(N,P.background),this.map.tableParts.render(N,P.tables),this.map.extLst.render(N,P),P.rels&&P.rels.forEach(X=>{X.Type===r.VmlDrawing&&N.leafNode("legacyDrawing",{"r:id":X.Id})}),N.closeNode()}parseOpen(N){return this.parser?(this.parser.parseOpen(N),!0):N.name==="worksheet"?(c.each(this.map,P=>{P.reset()}),!0):(this.map[N.name]&&!this.ignoreNodes.includes(N.name)&&(this.parser=this.map[N.name],this.parser.parseOpen(N)),!0)}parseText(N){this.parser&&this.parser.parseText(N)}parseClose(N){if(this.parser)return this.parser.parseClose(N)||(this.parser=void 0),!0;switch(N){case"worksheet":{const P=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(P.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(P.outlineProperties=this.map.sheetPr.model.outlineProperties);const D={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},V=Object.assign(D,this.map.pageSetup.model,this.map.printOptions.model),q=v(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:P,views:this.map.sheetViews.model,pageSetup:V,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:q},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(N,P){const D=(N.relationships||[]).reduce((q,G)=>{if(q[G.Id]=G,G.Type===r.Comments&&(N.comments=P.comments[G.Target].comments),G.Type===r.VmlDrawing&&N.comments&&N.comments.length){const F=P.vmlDrawings[G.Target].comments;N.comments.forEach((X,O)=>{X.note=Object.assign({},X.note,F[O])})}return q},{});if(P.commentsMap=(N.comments||[]).reduce((q,G)=>(G.ref&&(q[G.ref]=G),q),{}),P.hyperlinkMap=(N.hyperlinks||[]).reduce((q,G)=>(G.rId&&(q[G.address]=D[G.rId].Target),q),{}),P.formulae={},N.rows=N.rows&&N.rows.filter(Boolean)||[],N.rows.forEach(q=>{q.cells=q.cells&&q.cells.filter(Boolean)||[]}),this.map.cols.reconcile(N.cols,P),this.map.sheetData.reconcile(N.rows,P),this.map.conditionalFormatting.reconcile(N.conditionalFormattings,P),N.media=[],N.drawing){const q=D[N.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(q){const G=q[1];P.drawings[G].anchors.forEach(F=>{if(F.medium){const X={type:"image",imageId:F.medium.index,range:F.range,hyperlinks:F.picture.hyperlinks};N.media.push(X)}})}}const V=N.background&&D[N.background.rId];if(V){const q=V.Target.split("/media/")[1],G=P.mediaIndex&&P.mediaIndex[q];G!==void 0&&N.media.push({type:"background",imageId:G})}N.tables=(N.tables||[]).map(q=>{const G=D[q.rId];return P.tables[G.Target]}),delete N.relationships,delete N.hyperlinks,delete N.comments}}x.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},h.exports=x},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{constructor(s){super(),this.tag=s.tag,this.attr=s.attr}render(s,i){i&&(s.openNode(this.tag),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this._format=s.format||function(i){try{return Number.isNaN(i.getTime())?"":i.toISOString()}catch{return""}},this._parse=s.parse||function(i){return new Date(i)}}render(s,i){i&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,this._format(i)):s.writeText(this._format(i)),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=this._parse(s.attributes[this.attr]):this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this.zero=s.zero}render(s,i){(i||this.zero)&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,i):s.writeText(i),s.closeNode())}parseOpen(s){return s.name===this.tag&&(this.attr?this.model=parseInt(s.attributes[this.attr],10):this.text=[],!0)}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs}render(s,i){i!==void 0&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,i):s.writeText(i),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=s.attributes[this.attr]:this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(e,h,p){const c=e("./base-xform"),s=e("../../utils/xml-stream");h.exports=class extends c{constructor(i){super(),this._model=i}render(i){if(!this._xml){const r=new s;(function t(n,l){n.openNode(l.tag,l.$),l.c&&l.c.forEach(a=>{t(n,a)}),l.t&&n.writeText(l.t),n.closeNode()})(r,this._model),this._xml=r.xml}i.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(i){switch(i){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(e,h,p){const c=e("./text-xform"),s=e("./rich-text-xform"),i=e("../base-xform");h.exports=class extends i{constructor(){super(),this.map={r:new s,t:new c}}get tag(){return"rPh"}render(r,t){if(r.openNode(this.tag,{sb:t.sb||0,eb:t.eb||0}),t&&t.hasOwnProperty("richText")&&t.richText){const{r:n}=this.map;t.richText.forEach(l=>{n.render(r,l)})}else t&&this.map.t.render(r,t.text);r.closeNode()}parseOpen(r){const{name:t}=r;return this.parser?(this.parser.parseOpen(r),!0):t===this.tag?(this.model={sb:parseInt(r.attributes.sb,10),eb:parseInt(r.attributes.eb,10)},!0):(this.parser=this.map[t],!!this.parser&&(this.parser.parseOpen(r),!0))}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)){switch(r){case"r":{let t=this.model.richText;t||(t=this.model.richText=[]),t.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(e,h,p){const c=e("./text-xform"),s=e("../style/font-xform"),i=e("../base-xform");class r extends i{constructor(n){super(),this.model=n}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new c)}get fontXform(){return this._fontXform||(this._fontXform=new s(r.FONT_OPTIONS))}render(n,l){l=l||this.model,n.openNode("r"),l.font&&this.fontXform.render(n,l.font),this.textXform.render(n,l.text),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(n),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(n),!0;default:return!1}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){switch(n){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(n),!0}}}r.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},h.exports=r},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(e,h,p){const c=e("./text-xform"),s=e("./rich-text-xform"),i=e("./phonetic-text-xform"),r=e("../base-xform");h.exports=class extends r{constructor(t){super(),this.model=t,this.map={r:new s,t:new c,rPh:new i}}get tag(){return"si"}render(t,n){t.openNode(this.tag),n&&n.hasOwnProperty("richText")&&n.richText?n.richText.length?n.richText.forEach(l=>{this.map.r.render(t,l)}):this.map.t.render(t,""):n!=null&&this.map.t.render(t,n),t.closeNode()}parseOpen(t){const{name:n}=t;return this.parser?(this.parser.parseOpen(t),!0):n===this.tag?(this.model={},!0):(this.parser=this.map[n],!!this.parser&&(this.parser.parseOpen(t),!0))}parseText(t){this.parser&&this.parser.parseText(t)}parseClose(t){if(this.parser){if(!this.parser.parseClose(t)){switch(t){case"r":{let n=this.model.richText;n||(n=this.model.richText=[]),n.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(t){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("./shared-string-xform");h.exports=class extends s{constructor(r){super(),this.model=r||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new i)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(r){return this.model.values[r]}add(r){return r.richText?this.addRichText(r):this.addText(r)}addText(r){let t=this.hash[r];return t===void 0&&(t=this.hash[r]=this.model.values.length,this.model.values.push(r)),this.model.count++,t}addRichText(r){const t=this.sharedStringXform.toXml(r);let n=this.rich[t];return n===void 0&&(n=this.rich[t]=this.model.values.length,this.model.values.push(r)),this.model.count++,n}render(r,t){t=t||this._values,r.openXml(c.StdDocAttributes),r.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.count,uniqueCount:t.values.length});const n=this.sharedStringXform;t.values.forEach(l=>{n.render(r,l)}),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(r),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(r))}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(r){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+r)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"t"}render(s,i){s.openNode("t"),/^\s|\n|\s$/.test(i)&&s.addAttribute("xml:space","preserve"),s.writeText(i),s.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(s,i)=>String.fromCharCode(parseInt(i,16)))}parseOpen(s){switch(s.name){case"t":return this._text=[],!0;default:return!1}}parseText(s){this._text.push(s)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(e,h,p){const c=e("../../../doc/enums"),s=e("../../../utils/utils"),i=e("../base-xform"),r={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((n,l)=>(n[l]=!0,n),{}),horizontal(n){return this.horizontalValues[n]?n:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((n,l)=>(n[l]=!0,n),{}),vertical(n){return n==="middle"?"center":this.verticalValues[n]?n:void 0},wrapText:n=>!!n||void 0,shrinkToFit:n=>!!n||void 0,textRotation(n){switch(n){case"vertical":return n;default:return(n=s.validInt(n))>=-90&&n<=90?n:void 0}},indent:n=>(n=s.validInt(n),Math.max(0,n)),readingOrder(n){switch(n){case"ltr":return c.ReadingOrder.LeftToRight;case"rtl":return c.ReadingOrder.RightToLeft;default:return}}},t={toXml(n){if(n=r.textRotation(n)){if(n==="vertical")return 255;const l=Math.round(n);if(l>=0&&l<=90)return l;if(l<0&&l>=-90)return 90-l}},toModel(n){const l=s.validInt(n);if(l!==void 0){if(l===255)return"vertical";if(l>=0&&l<=90)return l;if(l>90&&l<=180)return 90-l}}};h.exports=class extends i{get tag(){return"alignment"}render(n,l){n.addRollback(),n.openNode("alignment");let a=!1;function o(d,f){f&&(n.addAttribute(d,f),a=!0)}o("horizontal",r.horizontal(l.horizontal)),o("vertical",r.vertical(l.vertical)),o("wrapText",!!r.wrapText(l.wrapText)&&"1"),o("shrinkToFit",!!r.shrinkToFit(l.shrinkToFit)&&"1"),o("indent",r.indent(l.indent)),o("textRotation",t.toXml(l.textRotation)),o("readingOrder",r.readingOrder(l.readingOrder)),n.closeNode(),a?n.commit():n.rollback()}parseOpen(n){const l={};let a=!1;function o(d,f,u){d&&(l[f]=u,a=!0)}o(n.attributes.horizontal,"horizontal",n.attributes.horizontal),o(n.attributes.vertical,"vertical",n.attributes.vertical==="center"?"middle":n.attributes.vertical),o(n.attributes.wrapText,"wrapText",s.parseBoolean(n.attributes.wrapText)),o(n.attributes.shrinkToFit,"shrinkToFit",s.parseBoolean(n.attributes.shrinkToFit)),o(n.attributes.indent,"indent",parseInt(n.attributes.indent,10)),o(n.attributes.textRotation,"textRotation",t.toModel(n.attributes.textRotation)),o(n.attributes.readingOrder,"readingOrder",n.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=a?l:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(e,h,p){const c=e("../base-xform"),s=e("../../../utils/utils"),i=e("./color-xform");class r extends c{constructor(n){super(),this.name=n,this.map={color:new i}}get tag(){return this.name}render(n,l,a){const o=l&&l.color||a||this.defaultColor;n.openNode(this.name),l&&l.style&&(n.addAttribute("style",l.style),o&&this.map.color.render(n,o)),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.name:{const{style:l}=n.attributes;return this.model=l?{style:l}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(n),!0;default:return!1}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){return this.parser?(this.parser.parseClose(n)||(this.parser=void 0),!0):(n===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(n){return r.validStyleValues[n]}}r.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((t,n)=>(t[n]=!0,t),{}),h.exports=class extends c{constructor(){super(),this.map={top:new r("top"),left:new r("left"),bottom:new r("bottom"),right:new r("right"),diagonal:new r("diagonal")}}render(t,n){const{color:l}=n;function a(o,d){o&&!o.color&&n.color&&(o={...o,color:n.color}),d.render(t,o,l)}t.openNode("border"),n.diagonal&&n.diagonal.style&&(n.diagonal.up&&t.addAttribute("diagonalUp","1"),n.diagonal.down&&t.addAttribute("diagonalDown","1")),a(n.left,this.map.left),a(n.right,this.map.right),a(n.top,this.map.top),a(n.bottom,this.map.bottom),a(n.diagonal,this.map.diagonal),t.closeNode()}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case"border":return this.reset(),this.diagonalUp=s.parseBoolean(t.attributes.diagonalUp),this.diagonalDown=s.parseBoolean(t.attributes.diagonalDown),!0;default:return this.parser=this.map[t.name],!!this.parser&&(this.parser.parseOpen(t),!0)}}parseText(t){this.parser&&this.parser.parseText(t)}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;if(t==="border"){const n=this.model={},l=function(a,o,d){o&&(d&&Object.assign(o,d),n[a]=o)};l("left",this.map.left.model),l("right",this.map.right.model),l("top",this.map.top.model),l("bottom",this.map.bottom.model),l("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{constructor(s){super(),this.name=s||"color"}get tag(){return this.name}render(s,i){return!!i&&(s.openNode(this.name),i.argb?s.addAttribute("rgb",i.argb):i.theme!==void 0?(s.addAttribute("theme",i.theme),i.tint!==void 0&&s.addAttribute("tint",i.tint)):i.indexed!==void 0?s.addAttribute("indexed",i.indexed):s.addAttribute("auto","1"),s.closeNode(),!0)}parseOpen(s){return s.name===this.name&&(s.attributes.rgb?this.model={argb:s.attributes.rgb}:s.attributes.theme?(this.model={theme:parseInt(s.attributes.theme,10)},s.attributes.tint&&(this.model.tint=parseFloat(s.attributes.tint))):s.attributes.indexed?this.model={indexed:parseInt(s.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(e,h,p){const c=e("../base-xform"),s=e("./alignment-xform"),i=e("./border-xform"),r=e("./fill-xform"),t=e("./font-xform"),n=e("./numfmt-xform"),l=e("./protection-xform");h.exports=class extends c{constructor(){super(),this.map={alignment:new s,border:new i,fill:new r,font:new t,numFmt:new n,protection:new l}}get tag(){return"dxf"}render(a,o){if(a.openNode(this.tag),o.font&&this.map.font.render(a,o.font),o.numFmt&&o.numFmtId){const d={id:o.numFmtId,formatCode:o.numFmt};this.map.numFmt.render(a,d)}o.fill&&this.map.fill.render(a,o.fill),o.alignment&&this.map.alignment.render(a,o.alignment),o.border&&this.map.border.render(a,o.border),o.protection&&this.map.protection.render(a,o.protection),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a),!0}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.parser=void 0),!0):a!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(e,h,p){const c=e("../base-xform"),s=e("./color-xform");class i extends c{constructor(){super(),this.map={color:new s}}get tag(){return"stop"}render(a,o){a.openNode("stop"),a.addAttribute("position",o.position),this.map.color.render(a,o.color),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"stop":return this.model={position:parseFloat(a.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(a),!0;default:return!1}}parseText(){}parseClose(a){return!!this.parser&&(this.parser.parseClose(a)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class r extends c{constructor(){super(),this.map={fgColor:new s("fgColor"),bgColor:new s("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(a,o){a.openNode("patternFill"),a.addAttribute("patternType",o.pattern),o.fgColor&&this.map.fgColor.render(a,o.fgColor),o.bgColor&&this.map.bgColor.render(a,o.bgColor),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"patternFill":return this.model={type:"pattern",pattern:a.attributes.patternType},!0;default:return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return!!this.parser&&(this.parser.parseClose(a)||(this.parser.model&&(this.model[a]=this.parser.model),this.parser=void 0),!0)}}class t extends c{constructor(){super(),this.map={stop:new i}}get name(){return"gradient"}get tag(){return"gradientFill"}render(a,o){switch(a.openNode("gradientFill"),o.gradient){case"angle":a.addAttribute("degree",o.degree);break;case"path":a.addAttribute("type","path"),o.center.left&&(a.addAttribute("left",o.center.left),o.center.right===void 0&&a.addAttribute("right",o.center.left)),o.center.right&&a.addAttribute("right",o.center.right),o.center.top&&(a.addAttribute("top",o.center.top),o.center.bottom===void 0&&a.addAttribute("bottom",o.center.top)),o.center.bottom&&a.addAttribute("bottom",o.center.bottom)}const d=this.map.stop;o.stops.forEach(f=>{d.render(a,f)}),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"gradientFill":{const o=this.model={stops:[]};return a.attributes.degree?(o.gradient="angle",o.degree=parseInt(a.attributes.degree,10)):a.attributes.type==="path"&&(o.gradient="path",o.center={left:a.attributes.left?parseFloat(a.attributes.left):0,top:a.attributes.top?parseFloat(a.attributes.top):0},a.attributes.right!==a.attributes.left&&(o.center.right=a.attributes.right?parseFloat(a.attributes.right):0),a.attributes.bottom!==a.attributes.top&&(o.center.bottom=a.attributes.bottom?parseFloat(a.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(a),!0;default:return!1}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return!!this.parser&&(this.parser.parseClose(a)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class n extends c{constructor(){super(),this.map={patternFill:new r,gradientFill:new t}}get tag(){return"fill"}render(a,o){switch(a.addRollback(),a.openNode("fill"),o.type){case"pattern":this.map.patternFill.render(a,o);break;case"gradient":this.map.gradientFill.render(a,o);break;default:return void a.rollback()}a.closeNode(),a.commit()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"fill":return this.model={},!0;default:return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return!!this.parser&&(this.parser.parseClose(a)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(a){return n.validPatternValues[a]}}n.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((l,a)=>(l[a]=!0,l),{}),n.StopXform=i,n.PatternFillXform=r,n.GradientFillXform=t,h.exports=n},{"../base-xform":32,"./color-xform":128}],131:[function(e,h,p){const c=e("./color-xform"),s=e("../simple/boolean-xform"),i=e("../simple/integer-xform"),r=e("../simple/string-xform"),t=e("./underline-xform"),n=e("../../../utils/under-dash"),l=e("../base-xform");class a extends l{constructor(d){super(),this.options=d||a.OPTIONS,this.map={b:{prop:"bold",xform:new s({tag:"b",attr:"val"})},i:{prop:"italic",xform:new s({tag:"i",attr:"val"})},u:{prop:"underline",xform:new t},charset:{prop:"charset",xform:new i({tag:"charset",attr:"val"})},color:{prop:"color",xform:new c},condense:{prop:"condense",xform:new s({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new s({tag:"extend",attr:"val"})},family:{prop:"family",xform:new i({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new s({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new r({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new r({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new s({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new s({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new i({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new r({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(d,f){const{map:u}=this;d.openNode(this.options.tagName),n.each(this.map,(g,m)=>{u[m].xform.render(d,f[g.prop])}),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;if(this.map[d.name])return this.parser=this.map[d.name].xform,this.parser.parseOpen(d);switch(d.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser&&!this.parser.parseClose(d)){const f=this.map[d];return this.parser.model&&(this.model[f.prop]=this.parser.model),this.parser=void 0,!0}switch(d){case this.options.tagName:return!1;default:return!0}}}a.OPTIONS={tagName:"font",fontNameTag:"name"},h.exports=a},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(e,h,p){const c=e("../../../utils/under-dash"),s=e("../../defaultnumformats"),i=e("../base-xform"),r=function(){const n={};return c.each(s,(l,a)=>{l.f&&(n[l.f]=parseInt(a,10))}),n}();class t extends i{constructor(l,a){super(),this.id=l,this.formatCode=a}get tag(){return"numFmt"}render(l,a){l.leafNode("numFmt",{numFmtId:a.id,formatCode:a.formatCode})}parseOpen(l){switch(l.name){case"numFmt":return this.model={id:parseInt(l.attributes.numFmtId,10),formatCode:l.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}t.getDefaultFmtId=function(n){return r[n]},t.getDefaultFmtCode=function(n){return s[n]&&s[n].f},h.exports=t},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(e,h,p){const c=e("../base-xform"),s={boolean:(i,r)=>i===void 0?r:i};h.exports=class extends c{get tag(){return"protection"}render(i,r){i.addRollback(),i.openNode("protection");let t=!1;function n(l,a){a!==void 0&&(i.addAttribute(l,a),t=!0)}n("locked",s.boolean(r.locked,!0)?void 0:"0"),n("hidden",s.boolean(r.hidden,!1)?"1":void 0),i.closeNode(),t?i.commit():i.rollback()}parseOpen(i){const r={locked:i.attributes.locked!=="0",hidden:i.attributes.hidden==="1"},t=!r.locked||r.hidden;this.model=t?r:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(e,h,p){const c=e("../base-xform"),s=e("./alignment-xform"),i=e("./protection-xform");h.exports=class extends c{constructor(r){super(),this.xfId=!(!r||!r.xfId),this.map={alignment:new s,protection:new i}}get tag(){return"xf"}render(r,t){r.openNode("xf",{numFmtId:t.numFmtId||0,fontId:t.fontId||0,fillId:t.fillId||0,borderId:t.borderId||0}),this.xfId&&r.addAttribute("xfId",t.xfId||0),t.numFmtId&&r.addAttribute("applyNumberFormat","1"),t.fontId&&r.addAttribute("applyFont","1"),t.fillId&&r.addAttribute("applyFill","1"),t.borderId&&r.addAttribute("applyBorder","1"),t.alignment&&r.addAttribute("applyAlignment","1"),t.protection&&r.addAttribute("applyProtection","1"),t.alignment&&this.map.alignment.render(r,t.alignment),t.protection&&this.map.protection.render(r,t.protection),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case"xf":return this.model={numFmtId:parseInt(r.attributes.numFmtId,10),fontId:parseInt(r.attributes.fontId,10),fillId:parseInt(r.attributes.fillId,10),borderId:parseInt(r.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(r.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(r),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(r),!0;default:return!1}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){return this.parser?(this.parser.parseClose(r)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):r!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(e,h,p){const c=e("../../../doc/enums"),s=e("../../../utils/xml-stream"),i=e("../base-xform"),r=e("../static-xform"),t=e("../list-xform"),n=e("./font-xform"),l=e("./fill-xform"),a=e("./border-xform"),o=e("./numfmt-xform"),d=e("./style-xform"),f=e("./dxf-xform");class u extends i{constructor(m){super(),this.map={numFmts:new t({tag:"numFmts",count:!0,childXform:new o}),fonts:new t({tag:"fonts",count:!0,childXform:new n,$:{"x14ac:knownFonts":1}}),fills:new t({tag:"fills",count:!0,childXform:new l}),borders:new t({tag:"borders",count:!0,childXform:new a}),cellStyleXfs:new t({tag:"cellStyleXfs",count:!0,childXform:new d}),cellXfs:new t({tag:"cellXfs",count:!0,childXform:new d({xfId:!0})}),dxfs:new t({tag:"dxfs",always:!0,count:!0,childXform:new f}),numFmt:new o,font:new n,fill:new l,border:new a,style:new d({xfId:!0}),cellStyles:u.STATIC_XFORMS.cellStyles,tableStyles:u.STATIC_XFORMS.tableStyles,extLst:u.STATIC_XFORMS.extLst},m&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(m,k){k=k||this.model,m.openXml(s.StdDocAttributes),m.openNode("styleSheet",u.STYLESHEET_ATTRIBUTES),this.index?(k.numFmts&&k.numFmts.length&&(m.openNode("numFmts",{count:k.numFmts.length}),k.numFmts.forEach(E=>{m.writeXml(E)}),m.closeNode()),k.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),m.openNode("fonts",{count:k.fonts.length,"x14ac:knownFonts":1}),k.fonts.forEach(E=>{m.writeXml(E)}),m.closeNode(),m.openNode("fills",{count:k.fills.length}),k.fills.forEach(E=>{m.writeXml(E)}),m.closeNode(),m.openNode("borders",{count:k.borders.length}),k.borders.forEach(E=>{m.writeXml(E)}),m.closeNode(),this.map.cellStyleXfs.render(m,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),m.openNode("cellXfs",{count:k.styles.length}),k.styles.forEach(E=>{m.writeXml(E)}),m.closeNode()):(this.map.numFmts.render(m,k.numFmts),this.map.fonts.render(m,k.fonts),this.map.fills.render(m,k.fills),this.map.borders.render(m,k.borders),this.map.cellStyleXfs.render(m,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(m,k.styles)),u.STATIC_XFORMS.cellStyles.render(m),this.map.dxfs.render(m,k.dxfs),u.STATIC_XFORMS.tableStyles.render(m),u.STATIC_XFORMS.extLst.render(m),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;switch(m.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[m.name],this.parser&&this.parser.parseOpen(m),!0}}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser)return this.parser.parseClose(m)||(this.parser=void 0),!0;switch(m){case"styleSheet":{this.model={};const k=(E,A)=>{A.model&&A.model.length&&(this.model[E]=A.model)};if(k("numFmts",this.map.numFmts),k("fonts",this.map.fonts),k("fills",this.map.fills),k("borders",this.map.borders),k("styles",this.map.cellXfs),k("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const E=this.index.numFmt;this.model.numFmts.forEach(A=>{E[A.id]=A.formatCode})}return!1}default:return!0}}addStyleModel(m,k){if(!m)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(m))return this.weakMap.get(m);const E={};if(k=k||c.ValueType.Number,m.numFmt)E.numFmtId=this._addNumFmtStr(m.numFmt);else switch(k){case c.ValueType.Number:E.numFmtId=this._addNumFmtStr("General");break;case c.ValueType.Date:E.numFmtId=this._addNumFmtStr("mm-dd-yy")}m.font&&(E.fontId=this._addFont(m.font)),m.border&&(E.borderId=this._addBorder(m.border)),m.fill&&(E.fillId=this._addFill(m.fill)),m.alignment&&(E.alignment=m.alignment),m.protection&&(E.protection=m.protection);const A=this._addStyle(E);return this.weakMap&&this.weakMap.set(m,A),A}getStyleModel(m){const k=this.model.styles[m];if(!k)return null;let E=this.index.model[m];if(E)return E;if(E=this.index.model[m]={},k.numFmtId){const L=this.index.numFmt[k.numFmtId]||o.getDefaultFmtCode(k.numFmtId);L&&(E.numFmt=L)}function A(L,z,R){if(R||R===0){const I=z[R];I&&(E[L]=I)}}return A("font",this.model.fonts,k.fontId),A("border",this.model.borders,k.borderId),A("fill",this.model.fills,k.fillId),k.alignment&&(E.alignment=k.alignment),k.protection&&(E.protection=k.protection),E}addDxfStyle(m){return m.numFmt&&(m.numFmtId=this._addNumFmtStr(m.numFmt)),this.model.dxfs.push(m),this.model.dxfs.length-1}getDxfStyle(m){return this.model.dxfs[m]}_addStyle(m){const k=this.map.style.toXml(m);let E=this.index.style[k];return E===void 0&&(E=this.index.style[k]=this.model.styles.length,this.model.styles.push(k)),E}_addNumFmtStr(m){let k=o.getDefaultFmtId(m);if(k!==void 0||(k=this.index.numFmt[m],k!==void 0))return k;k=this.index.numFmt[m]=164+this.model.numFmts.length;const E=this.map.numFmt.toXml({id:k,formatCode:m});return this.model.numFmts.push(E),k}_addFont(m){const k=this.map.font.toXml(m);let E=this.index.font[k];return E===void 0&&(E=this.index.font[k]=this.model.fonts.length,this.model.fonts.push(k)),E}_addBorder(m){const k=this.map.border.toXml(m);let E=this.index.border[k];return E===void 0&&(E=this.index.border[k]=this.model.borders.length,this.model.borders.push(k)),E}_addFill(m){const k=this.map.fill.toXml(m);let E=this.index.fill[k];return E===void 0&&(E=this.index.fill[k]=this.model.fills.length,this.model.fills.push(k)),E}}u.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},u.STATIC_XFORMS={cellStyles:new r({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new r({tag:"dxfs",$:{count:0}}),tableStyles:new r({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new r({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},u.Mock=class extends u{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(g){return g.autodrain(),Promise.resolve()}addStyleModel(g,m){switch(m){case c.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const g={numFmtId:o.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(g)}return this._dateStyleId}getStyleModel(){return{}}},h.exports=u},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(e,h,p){const c=e("../base-xform");class s extends c{constructor(r){super(),this.model=r}get tag(){return"u"}render(r,t){if((t=t||this.model)===!0)r.leafNode("u");else{const n=s.Attributes[t];n&&r.leafNode("u",n)}}parseOpen(r){r.name==="u"&&(this.model=r.attributes.val||!0)}parseText(){}parseClose(){return!1}}s.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},h.exports=s},{"../base-xform":32}],137:[function(e,h,p){const c=e("../base-xform"),s=e("./filter-column-xform");h.exports=class extends c{constructor(){super(),this.map={filterColumn:new s}}get tag(){return"autoFilter"}prepare(i){i.columns.forEach((r,t)=>{this.map.filterColumn.prepare(r,{index:t})})}render(i,r){return i.openNode(this.tag,{ref:r.autoFilterRef}),r.columns.forEach(t=>{this.map.filterColumn.render(i,t)}),i.closeNode(),!0}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case this.tag:return this.model={autoFilterRef:i.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[i.name],this.parser)return this.parseOpen(i),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(i))}}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(i){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+i)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"customFilter"}render(s,i){s.leafNode(this.tag,{val:i.val,operator:i.operator})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val,operator:s.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(e,h,p){const c=e("../base-xform"),s=e("../list-xform"),i=e("./custom-filter-xform"),r=e("./filter-xform");h.exports=class extends c{constructor(){super(),this.map={customFilters:new s({tag:"customFilters",count:!1,empty:!0,childXform:new i}),filters:new s({tag:"filters",count:!1,empty:!0,childXform:new r})}}get tag(){return"filterColumn"}prepare(t,n){t.colId=n.index.toString()}render(t,n){return n.customFilters?(t.openNode(this.tag,{colId:n.colId,hiddenButton:n.filterButton?"0":"1"}),this.map.customFilters.render(t,n.customFilters),t.closeNode(),!0):(t.leafNode(this.tag,{colId:n.colId,hiddenButton:n.filterButton?"0":"1"}),!0)}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;const{attributes:n}=t;switch(t.name){case this.tag:return this.model={filterButton:n.hiddenButton==="0"},!0;default:if(this.parser=this.map[t.name],this.parser)return this.parseOpen(t),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(t))}}parseText(){}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;switch(t){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"filter"}render(s,i){s.leafNode(this.tag,{val:i.val})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"tableColumn"}prepare(s,i){s.id=i.index+1}render(s,i){return s.leafNode(this.tag,{id:i.id.toString(),name:i.name,totalsRowLabel:i.totalsRowLabel,totalsRowFunction:i.totalsRowFunction,dxfId:i.dxfId}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:i}=s;return this.model={name:i.name,totalsRowLabel:i.totalsRowLabel,totalsRowFunction:i.totalsRowFunction,dxfId:i.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(e,h,p){const c=e("../base-xform");h.exports=class extends c{get tag(){return"tableStyleInfo"}render(s,i){return s.leafNode(this.tag,{name:i.theme?i.theme:void 0,showFirstColumn:i.showFirstColumn?"1":"0",showLastColumn:i.showLastColumn?"1":"0",showRowStripes:i.showRowStripes?"1":"0",showColumnStripes:i.showColumnStripes?"1":"0"}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:i}=s;return this.model={theme:i.name?i.name:null,showFirstColumn:i.showFirstColumn==="1",showLastColumn:i.showLastColumn==="1",showRowStripes:i.showRowStripes==="1",showColumnStripes:i.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(e,h,p){const c=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("../list-xform"),r=e("./auto-filter-xform"),t=e("./table-column-xform"),n=e("./table-style-info-xform");class l extends s{constructor(){super(),this.map={autoFilter:new r,tableColumns:new i({tag:"tableColumns",count:!0,empty:!0,childXform:new t}),tableStyleInfo:new n}}prepare(o,d){this.map.autoFilter.prepare(o),this.map.tableColumns.prepare(o.columns,d)}get tag(){return"table"}render(o,d){o.openXml(c.StdDocAttributes),o.openNode(this.tag,{...l.TABLE_ATTRIBUTES,id:d.id,name:d.name,displayName:d.displayName||d.name,ref:d.tableRef,totalsRowCount:d.totalsRow?"1":void 0,totalsRowShown:d.totalsRow?void 0:"1",headerRowCount:d.headerRow?"1":"0"}),this.map.autoFilter.render(o,d),this.map.tableColumns.render(o,d.columns),this.map.tableStyleInfo.render(o,d.style),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;const{name:d,attributes:f}=o;switch(d){case this.tag:this.reset(),this.model={name:f.name,displayName:f.displayName||f.name,tableRef:f.ref,totalsRow:f.totalsRowCount==="1",headerRow:f.headerRowCount==="1"};break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((d,f)=>{this.model.columns[f].filterButton=d.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(o,d){o.columns.forEach(f=>{f.dxfId!==void 0&&(f.style=d.styles.getDxfStyle(f.dxfId))})}}l.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},h.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(e,h,p){(function(c,s){(function(){const i=e("fs"),r=e("jszip"),{PassThrough:t}=e("readable-stream"),n=e("../utils/zip-stream"),l=e("../utils/stream-buf"),a=e("../utils/utils"),o=e("../utils/xml-stream"),{bufferToString:d}=e("../utils/browser-buffer-decode"),f=e("./xform/style/styles-xform"),u=e("./xform/core/core-xform"),g=e("./xform/strings/shared-strings-xform"),m=e("./xform/core/relationships-xform"),k=e("./xform/core/content-types-xform"),E=e("./xform/core/app-xform"),A=e("./xform/book/workbook-xform"),L=e("./xform/sheet/worksheet-xform"),z=e("./xform/drawing/drawing-xform"),R=e("./xform/table/table-xform"),I=e("./xform/comment/comments-xform"),B=e("./xform/comment/vml-notes-xform"),H=e("./xml/theme1");class ${constructor(T){this.workbook=T}async readFile(T,j){if(!await a.fs.exists(T))throw new Error("File not found: "+T);const b=i.createReadStream(T);try{const v=await this.read(b,j);return b.close(),v}catch(v){throw b.close(),v}}parseRels(T){return new m().parseStream(T)}parseWorkbook(T){return new A().parseStream(T)}parseSharedStrings(T){return new g().parseStream(T)}reconcile(T,j){const b=new A,v=new L(j),x=new z,w=new R;b.reconcile(T);const N={media:T.media,mediaIndex:T.mediaIndex};Object.keys(T.drawings).forEach(V=>{const q=T.drawings[V],G=T.drawingRels[V];G&&(N.rels=G.reduce((F,X)=>(F[X.Id]=X,F),{}),(q.anchors||[]).forEach(F=>{const X=F.picture&&F.picture.hyperlinks;X&&N.rels[X.rId]&&(X.hyperlink=N.rels[X.rId].Target,delete X.rId)}),x.reconcile(q,N))});const P={styles:T.styles};Object.values(T.tables).forEach(V=>{w.reconcile(V,P)});const D={styles:T.styles,sharedStrings:T.sharedStrings,media:T.media,mediaIndex:T.mediaIndex,date1904:T.properties&&T.properties.date1904,drawings:T.drawings,comments:T.comments,tables:T.tables,vmlDrawings:T.vmlDrawings};T.worksheets.forEach(V=>{V.relationships=T.worksheetRels[V.sheetNo],v.reconcile(V,D)}),delete T.worksheetHash,delete T.worksheetRels,delete T.globalRels,delete T.sharedStrings,delete T.workbookRels,delete T.sheetDefs,delete T.styles,delete T.mediaIndex,delete T.drawings,delete T.drawingRels,delete T.vmlDrawings}async _processWorksheetEntry(T,j,b,v,x){const w=new L(v),N=await w.parseStream(T);N.sheetNo=b,j.worksheetHash[x]=N,j.worksheets.push(N)}async _processCommentEntry(T,j,b){const v=new I,x=await v.parseStream(T);j.comments[`../${b}.xml`]=x}async _processTableEntry(T,j,b){const v=new R,x=await v.parseStream(T);j.tables[`../tables/${b}.xml`]=x}async _processWorksheetRelsEntry(T,j,b){const v=new m,x=await v.parseStream(T);j.worksheetRels[b]=x}async _processMediaEntry(T,j,b){const v=b.lastIndexOf(".");if(v>=1){const x=b.substr(v+1),w=b.substr(0,v);await new Promise((N,P)=>{const D=new l;D.on("finish",()=>{j.mediaIndex[b]=j.media.length,j.mediaIndex[w]=j.media.length;const V={type:"image",name:w,extension:x,buffer:D.toBuffer()};j.media.push(V),N()}),T.on("error",V=>{P(V)}),T.pipe(D)})}}async _processDrawingEntry(T,j,b){const v=new z,x=await v.parseStream(T);j.drawings[b]=x}async _processDrawingRelsEntry(T,j,b){const v=new m,x=await v.parseStream(T);j.drawingRels[b]=x}async _processVmlDrawingEntry(T,j,b){const v=new B,x=await v.parseStream(T);j.vmlDrawings[`../drawings/${b}.vml`]=x}async _processThemeEntry(T,j,b){await new Promise((v,x)=>{const w=new l;T.on("error",x),w.on("error",x),w.on("finish",()=>{j.themes[b]=w.read().toString(),v()}),T.pipe(w)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(T,j){!T[Symbol.asyncIterator]&&T.pipe&&(T=T.pipe(new t));const b=[];for await(const v of T)b.push(v);return this.load(s.concat(b),j)}async load(T,j){let b;b=j&&j.base64?s.from(T.toString(),"base64"):T;const v={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},x=await r.loadAsync(b);for(const w of Object.values(x.files))if(!w.dir){let N,P=w.name;if(P[0]==="/"&&(P=P.substr(1)),P.match(/xl\/media\//)||P.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))N=new t,N.write(await w.async("nodebuffer"));else{let D;N=new t({writableObjectMode:!0,readableObjectMode:!0}),D=c.browser?d(await w.async("nodebuffer")):await w.async("string");const V=16384;for(let q=0;q<D.length;q+=V)N.write(D.substring(q,q+V))}switch(N.end(),P){case"_rels/.rels":v.globalRels=await this.parseRels(N);break;case"xl/workbook.xml":{const D=await this.parseWorkbook(N);v.sheets=D.sheets,v.definedNames=D.definedNames,v.views=D.views,v.properties=D.properties,v.calcProperties=D.calcProperties;break}case"xl/_rels/workbook.xml.rels":v.workbookRels=await this.parseRels(N);break;case"xl/sharedStrings.xml":v.sharedStrings=new g,await v.sharedStrings.parseStream(N);break;case"xl/styles.xml":v.styles=new f,await v.styles.parseStream(N);break;case"docProps/app.xml":{const D=new E,V=await D.parseStream(N);v.company=V.company,v.manager=V.manager;break}case"docProps/core.xml":{const D=new u,V=await D.parseStream(N);Object.assign(v,V);break}default:{let D=P.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(D){await this._processWorksheetEntry(N,v,D[1],j,P);break}if(D=P.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),D){await this._processWorksheetRelsEntry(N,v,D[1]);break}if(D=P.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),D){await this._processThemeEntry(N,v,D[1]);break}if(D=P.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),D){await this._processMediaEntry(N,v,D[1]);break}if(D=P.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),D){await this._processDrawingEntry(N,v,D[1]);break}if(D=P.match(/xl\/(comments\d+)[.]xml/),D){await this._processCommentEntry(N,v,D[1]);break}if(D=P.match(/xl\/tables\/(table\d+)[.]xml/),D){await this._processTableEntry(N,v,D[1]);break}if(D=P.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),D){await this._processDrawingRelsEntry(N,v,D[1]);break}if(D=P.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),D){await this._processVmlDrawingEntry(N,v,D[1]);break}}}}return this.reconcile(v,j),this.workbook.model=v,this.workbook}async addMedia(T,j){await Promise.all(j.media.map(async b=>{if(b.type==="image"){const v=`xl/media/${b.name}.${b.extension}`;if(b.filename){const x=await function(w,N){return new Promise((P,D)=>{i.readFile(w,N,(V,q)=>{V?D(V):P(q)})})}(b.filename);return T.append(x,{name:v})}if(b.buffer)return T.append(b.buffer,{name:v});if(b.base64){const x=b.base64,w=x.substring(x.indexOf(",")+1);return T.append(w,{name:v,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(T,j){const b=new z,v=new m;j.worksheets.forEach(x=>{const{drawing:w}=x;if(w){b.prepare(w,{});let N=b.toXml(w);T.append(N,{name:`xl/drawings/${w.name}.xml`}),N=v.toXml(w.rels),T.append(N,{name:`xl/drawings/_rels/${w.name}.xml.rels`})}})}addTables(T,j){const b=new R;j.worksheets.forEach(v=>{const{tables:x}=v;x.forEach(w=>{b.prepare(w,{});const N=b.toXml(w);T.append(N,{name:"xl/tables/"+w.target})})})}async addContentTypes(T,j){const b=new k().toXml(j);T.append(b,{name:"[Content_Types].xml"})}async addApp(T,j){const b=new E().toXml(j);T.append(b,{name:"docProps/app.xml"})}async addCore(T,j){const b=new u;T.append(b.toXml(j),{name:"docProps/core.xml"})}async addThemes(T,j){const b=j.themes||{theme1:H};Object.keys(b).forEach(v=>{const x=b[v],w=`xl/theme/${v}.xml`;T.append(x,{name:w})})}async addOfficeRels(T){const j=new m().toXml([{Id:"rId1",Type:$.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:$.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:$.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);T.append(j,{name:"_rels/.rels"})}async addWorkbookRels(T,j){let b=1;const v=[{Id:"rId"+b++,Type:$.RelType.Styles,Target:"styles.xml"},{Id:"rId"+b++,Type:$.RelType.Theme,Target:"theme/theme1.xml"}];j.sharedStrings.count&&v.push({Id:"rId"+b++,Type:$.RelType.SharedStrings,Target:"sharedStrings.xml"}),j.worksheets.forEach(w=>{w.rId="rId"+b++,v.push({Id:w.rId,Type:$.RelType.Worksheet,Target:`worksheets/sheet${w.id}.xml`})});const x=new m().toXml(v);T.append(x,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(T,j){j.sharedStrings&&j.sharedStrings.count&&T.append(j.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(T,j){const{xml:b}=j.styles;b&&T.append(b,{name:"xl/styles.xml"})}async addWorkbook(T,j){const b=new A;T.append(b.toXml(j),{name:"xl/workbook.xml"})}async addWorksheets(T,j){const b=new L,v=new m,x=new I,w=new B;j.worksheets.forEach(N=>{let P=new o;b.render(P,N),T.append(P.xml,{name:`xl/worksheets/sheet${N.id}.xml`}),N.rels&&N.rels.length&&(P=new o,v.render(P,N.rels),T.append(P.xml,{name:`xl/worksheets/_rels/sheet${N.id}.xml.rels`})),N.comments.length>0&&(P=new o,x.render(P,N),T.append(P.xml,{name:`xl/comments${N.id}.xml`}),P=new o,w.render(P,N),T.append(P.xml,{name:`xl/drawings/vmlDrawing${N.id}.vml`}))})}_finalize(T){return new Promise((j,b)=>{T.on("finish",()=>{j(this)}),T.on("error",b),T.finalize()})}prepareModel(T,j){T.creator=T.creator||"ExcelJS",T.lastModifiedBy=T.lastModifiedBy||"ExcelJS",T.created=T.created||new Date,T.modified=T.modified||new Date,T.useSharedStrings=j.useSharedStrings===void 0||j.useSharedStrings,T.useStyles=j.useStyles===void 0||j.useStyles,T.sharedStrings=new g,T.styles=T.useStyles?new f(!0):new f.Mock;const b=new A,v=new L;b.prepare(T);const x={sharedStrings:T.sharedStrings,styles:T.styles,date1904:T.properties.date1904,drawingsCount:0,media:T.media};x.drawings=T.drawings=[],x.commentRefs=T.commentRefs=[];let w=0;T.tables=[],T.worksheets.forEach(N=>{N.tables.forEach(P=>{w++,P.target=`table${w}.xml`,P.id=w,T.tables.push(P)}),v.prepare(N,x)})}async write(T,j){j=j||{};const{model:b}=this.workbook,v=new n.ZipWriter(j.zip);return v.pipe(T),this.prepareModel(b,j),await this.addContentTypes(v,b),await this.addOfficeRels(v,b),await this.addWorkbookRels(v,b),await this.addWorksheets(v,b),await this.addSharedStrings(v,b),await this.addDrawings(v,b),await this.addTables(v,b),await Promise.all([this.addThemes(v,b),this.addStyles(v,b)]),await this.addMedia(v,b),await Promise.all([this.addApp(v,b),this.addCore(v,b)]),await this.addWorkbook(v,b),this._finalize(v)}writeFile(T,j){const b=i.createWriteStream(T);return new Promise((v,x)=>{b.on("finish",()=>{v()}),b.on("error",w=>{x(w)}),this.write(b,j).then(()=>{b.end()}).catch(w=>{x(w)})})}async writeBuffer(T){const j=new l;return await this.write(j,T),j.read()}}$.RelType=e("./rel-type"),h.exports=$}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(e,h,p){h.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(e,h,p){(function(c){(function(){Object.defineProperty(p,"__esModule",{value:!0}),p.CsvFormatterStream=void 0;const s=e("stream"),i=e("./formatter");class r extends s.Transform{constructor(n){super({writableObjectMode:n.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=n,this.rowFormatter=new i.RowFormatter(n),this.hasWrittenBOM=!n.writeBOM}transform(n){return this.rowFormatter.rowTransform=n,this}_transform(n,l,a){let o=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(n,(d,f)=>d?(o=!0,a(d)):(f&&f.forEach(u=>{this.push(c.from(u,"utf8"))}),o=!0,a()))}catch(d){if(o)throw d;a(d)}}_flush(n){this.rowFormatter.finish((l,a)=>l?n(l):(a&&a.forEach(o=>{this.push(c.from(o,"utf8"))}),n()))}}p.CsvFormatterStream=r}).call(this)}).call(this,e("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.FormatterOptions=void 0,p.FormatterOptions=class{constructor(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var s;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,c||{}),c?.quoteHeaders===void 0&&(this.quoteHeaders=this.quoteColumns),c?.quote===!0?this.quote='"':c?.quote===!1&&(this.quote=""),typeof c?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((s=c.writeHeaders)===null||s===void 0||s),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(e,h,p){var c=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(p,"__esModule",{value:!0}),p.FieldFormatter=void 0;const s=c(e("lodash.isboolean")),i=c(e("lodash.isnil")),r=c(e("lodash.escaperegexp"));p.FieldFormatter=class{constructor(t){this._headers=null,this.formatterOptions=t,t.headers!==null&&(this.headers=t.headers),this.REPLACE_REGEXP=new RegExp(t.quote,"g");const n=`[${t.delimiter}${r.default(t.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(n)}set headers(t){this._headers=t}shouldQuote(t,n){const l=n?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return s.default(l)?l:Array.isArray(l)?l[t]:this._headers!==null&&l[this._headers[t]]}format(t,n,l){const a=(""+(i.default(t)?"":t)).replace(/\0/g,""),{formatterOptions:o}=this;return o.quote!==""&&a.indexOf(o.quote)!==-1?this.quoteField(a.replace(this.REPLACE_REGEXP,o.escapedQuote)):a.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(n,l)?this.quoteField(a):a}quoteField(t){const{quote:n}=this.formatterOptions;return`${n}${t}${n}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(e,h,p){var c=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(p,"__esModule",{value:!0}),p.RowFormatter=void 0;const s=c(e("lodash.isfunction")),i=c(e("lodash.isequal")),r=e("./FieldFormatter"),t=e("../types");class n{constructor(a){this.rowCount=0,this.formatterOptions=a,this.fieldFormatter=new r.FieldFormatter(a),this.headers=a.headers,this.shouldWriteHeaders=a.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),a.transform&&(this.rowTransform=a.transform)}static isRowHashArray(a){return!!Array.isArray(a)&&Array.isArray(a[0])&&a[0].length===2}static isRowArray(a){return Array.isArray(a)&&!this.isRowHashArray(a)}static gatherHeaders(a){return n.isRowHashArray(a)?a.map(o=>o[0]):Array.isArray(a)?a:Object.keys(a)}static createTransform(a){return t.isSyncTransform(a)?(o,d)=>{let f=null;try{f=a(o)}catch(u){return d(u)}return d(null,f)}:(o,d)=>{a(o,d)}}set rowTransform(a){if(!s.default(a))throw new TypeError("The transform should be a function");this._rowTransform=n.createTransform(a)}format(a,o){this.callTransformer(a,(d,f)=>{if(d)return o(d);if(!a)return o(null);const u=[];if(f){const{shouldFormatColumns:g,headers:m}=this.checkHeaders(f);if(this.shouldWriteHeaders&&m&&!this.hasWrittenHeaders&&(u.push(this.formatColumns(m,!0)),this.hasWrittenHeaders=!0),g){const k=this.gatherColumns(f);u.push(this.formatColumns(k,!1))}}return o(null,u)})}finish(a){const o=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return a(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));o.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&o.push(this.formatterOptions.rowDelimiter),a(null,o)}checkHeaders(a){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const o=n.gatherHeaders(a);return this.headers=o,this.fieldFormatter.headers=o,this.shouldWriteHeaders?{shouldFormatColumns:!i.default(o,a),headers:o}:{shouldFormatColumns:!0,headers:null}}gatherColumns(a){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(a)?n.isRowHashArray(a)?this.headers.map((o,d)=>{const f=a[d];return f?f[1]:""}):n.isRowArray(a)&&!this.shouldWriteHeaders?a:this.headers.map((o,d)=>a[d]):this.headers.map(o=>a[o])}callTransformer(a,o){return this._rowTransform?this._rowTransform(a,o):o(null,a)}formatColumns(a,o){const d=a.map((u,g)=>this.fieldFormatter.format(u,g,o)).join(this.formatterOptions.delimiter),{rowCount:f}=this;return this.rowCount+=1,f?[this.formatterOptions.rowDelimiter,d].join(""):d}}p.RowFormatter=n},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.FieldFormatter=p.RowFormatter=void 0;var c=e("./RowFormatter");Object.defineProperty(p,"RowFormatter",{enumerable:!0,get:function(){return c.RowFormatter}});var s=e("./FieldFormatter");Object.defineProperty(p,"FieldFormatter",{enumerable:!0,get:function(){return s.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(e,h,p){(function(c){(function(){var s=Object.create?function(g,m,k,E){E===void 0&&(E=k),Object.defineProperty(g,E,{enumerable:!0,get:function(){return m[k]}})}:function(g,m,k,E){E===void 0&&(E=k),g[E]=m[k]},i=Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m},r=function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var k in g)k!=="default"&&Object.prototype.hasOwnProperty.call(g,k)&&s(m,g,k);return i(m,g),m},t=function(g,m){for(var k in g)k==="default"||Object.prototype.hasOwnProperty.call(m,k)||s(m,g,k)};Object.defineProperty(p,"__esModule",{value:!0}),p.writeToPath=p.writeToString=p.writeToBuffer=p.writeToStream=p.write=p.format=p.FormatterOptions=p.CsvFormatterStream=void 0;const n=e("util"),l=e("stream"),a=r(e("fs")),o=e("./FormatterOptions"),d=e("./CsvFormatterStream");t(e("./types"),p);var f=e("./CsvFormatterStream");Object.defineProperty(p,"CsvFormatterStream",{enumerable:!0,get:function(){return f.CsvFormatterStream}});var u=e("./FormatterOptions");Object.defineProperty(p,"FormatterOptions",{enumerable:!0,get:function(){return u.FormatterOptions}}),p.format=g=>new d.CsvFormatterStream(new o.FormatterOptions(g)),p.write=(g,m)=>{const k=p.format(m),E=n.promisify((A,L)=>{k.write(A,void 0,L)});return g.reduce((A,L)=>A.then(()=>E(L)),Promise.resolve()).then(()=>k.end()).catch(A=>{k.emit("error",A)}),k},p.writeToStream=(g,m,k)=>p.write(m,k).pipe(g),p.writeToBuffer=function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const k=[],E=new l.Writable({write(A,L,z){k.push(A),z()}});return new Promise((A,L)=>{E.on("error",L).on("finish",()=>A(c.concat(k))),p.write(g,m).pipe(E)})},p.writeToString=(g,m)=>p.writeToBuffer(g,m).then(k=>k.toString()),p.writeToPath=(g,m,k)=>{const E=a.createWriteStream(g,{encoding:"utf8"});return p.write(m,k).pipe(E)}}).call(this)}).call(this,e("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.isSyncTransform=void 0,p.isSyncTransform=c=>c.length===1},{}],153:[function(e,h,p){(function(c){(function(){Object.defineProperty(p,"__esModule",{value:!0}),p.CsvParserStream=void 0;const s=e("string_decoder"),i=e("stream"),r=e("./transforms"),t=e("./parser");class n extends i.Transform{constructor(a){super({objectMode:a.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=a,this.parser=new t.Parser(a),this.headerTransformer=new r.HeaderTransformer(a),this.decoder=new s.StringDecoder(a.encoding),this.rowTransformerValidator=new r.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(a){return this.rowTransformerValidator.rowTransform=a,this}validate(a){return this.rowTransformerValidator.rowValidator=a,this}emit(a){if(a==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var o=arguments.length,d=new Array(o>1?o-1:0),f=1;f<o;f++)d[f-1]=arguments[f];return super.emit(a,...d)}_transform(a,o,d){if(this.hasHitRowLimit)return d();const f=n.wrapDoneCallback(d);try{const{lines:u}=this,g=u+this.decoder.write(a),m=this.parse(g,!0);return this.processRows(m,f)}catch(u){return f(u)}}_flush(a){const o=n.wrapDoneCallback(a);if(this.hasHitRowLimit)return o();try{const d=this.lines+this.decoder.end(),f=this.parse(d,!1);return this.processRows(f,o)}catch(d){return o(d)}}parse(a,o){if(!a)return[];const{line:d,rows:f}=this.parser.parse(a,o);return this.lines=d,f}processRows(a,o){const d=a.length,f=u=>{const g=E=>E?o(E):u%100!=0?f(u+1):void c(()=>f(u+1));if(this.checkAndEmitHeaders(),u>=d||this.hasHitRowLimit)return o();if(this.parsedLineCount+=1,this.shouldSkipLine)return g();const m=a[u];this.rowCount+=1,this.parsedRowCount+=1;const k=this.rowCount;return this.transformRow(m,(E,A)=>{if(E)return this.rowCount-=1,g(E);if(!A)return g(new Error("expected transform result"));if(A.isValid){if(A.row)return this.pushRow(A.row,g)}else this.emit("data-invalid",A.row,k,A.reason);return g()})};f(0)}transformRow(a,o){try{this.headerTransformer.transform(a,(d,f)=>d?o(d):f?f.isValid?f.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(f.row,o):this.skipRow(o):(this.rowCount-=1,this.parsedRowCount-=1,o(null,{row:null,isValid:!0})):this.shouldEmitRows?o(null,{isValid:!1,row:a}):this.skipRow(o):o(new Error("Expected result from header transform")))}catch(d){o(d)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(a){return this.rowCount-=1,a(null,{row:null,isValid:!0})}pushRow(a,o){try{this.parserOptions.objectMode?this.push(a):this.push(JSON.stringify(a)),o()}catch(d){o(d)}}static wrapDoneCallback(a){let o=!1;return function(d){if(d){if(o)throw d;return o=!0,void a(d)}for(var f=arguments.length,u=new Array(f>1?f-1:0),g=1;g<f;g++)u[g-1]=arguments[g];a(...u)}}}p.CsvParserStream=n}).call(this)}).call(this,e("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(e,h,p){var c=function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(p,"__esModule",{value:!0}),p.ParserOptions=void 0;const s=c(e("lodash.escaperegexp")),i=c(e("lodash.isnil"));p.ParserOptions=class{constructor(r){var t;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,r||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=s.default(this.delimiter),this.escapeChar=(t=this.escape)!==null&&t!==void 0?t:this.quote,this.supportsComments=!i.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(e,h,p){var c=Object.create?function(f,u,g,m){m===void 0&&(m=g),Object.defineProperty(f,m,{enumerable:!0,get:function(){return u[g]}})}:function(f,u,g,m){m===void 0&&(m=g),f[m]=u[g]},s=Object.create?function(f,u){Object.defineProperty(f,"default",{enumerable:!0,value:u})}:function(f,u){f.default=u},i=function(f){if(f&&f.__esModule)return f;var u={};if(f!=null)for(var g in f)g!=="default"&&Object.prototype.hasOwnProperty.call(f,g)&&c(u,f,g);return s(u,f),u},r=function(f,u){for(var g in f)g==="default"||Object.prototype.hasOwnProperty.call(u,g)||c(u,f,g)};Object.defineProperty(p,"__esModule",{value:!0}),p.parseString=p.parseFile=p.parseStream=p.parse=p.ParserOptions=p.CsvParserStream=void 0;const t=i(e("fs")),n=e("stream"),l=e("./ParserOptions"),a=e("./CsvParserStream");r(e("./types"),p);var o=e("./CsvParserStream");Object.defineProperty(p,"CsvParserStream",{enumerable:!0,get:function(){return o.CsvParserStream}});var d=e("./ParserOptions");Object.defineProperty(p,"ParserOptions",{enumerable:!0,get:function(){return d.ParserOptions}}),p.parse=f=>new a.CsvParserStream(new l.ParserOptions(f)),p.parseStream=(f,u)=>f.pipe(new a.CsvParserStream(new l.ParserOptions(u))),p.parseFile=function(f){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.createReadStream(f).pipe(new a.CsvParserStream(new l.ParserOptions(u)))},p.parseString=(f,u)=>{const g=new n.Readable;return g.push(f),g.push(null),g.pipe(new a.CsvParserStream(new l.ParserOptions(u)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.Parser=void 0;const c=e("./Scanner"),s=e("./RowParser"),i=e("./Token");class r{constructor(n){this.parserOptions=n,this.rowParser=new s.RowParser(this.parserOptions)}static removeBOM(n){return n&&n.charCodeAt(0)===65279?n.slice(1):n}parse(n,l){const a=new c.Scanner({line:r.removeBOM(n),parserOptions:this.parserOptions,hasMoreData:l});return this.parserOptions.supportsComments?this.parseWithComments(a):this.parseWithoutComments(a)}parseWithoutComments(n){const l=[];let a=!0;for(;a;)a=this.parseRow(n,l);return{line:n.line,rows:l}}parseWithComments(n){const{parserOptions:l}=this,a=[];for(let o=n.nextCharacterToken;o!==null;o=n.nextCharacterToken)if(i.Token.isTokenComment(o,l)){if(n.advancePastLine()===null)return{line:n.lineFromCursor,rows:a};if(!n.hasMoreCharacters)return{line:n.lineFromCursor,rows:a};n.truncateToCursor()}else if(!this.parseRow(n,a))break;return{line:n.line,rows:a}}parseRow(n,l){if(!n.nextNonSpaceToken)return!1;const a=this.rowParser.parse(n);return a!==null&&(this.parserOptions.ignoreEmpty&&s.RowParser.isEmptyRow(a)||l.push(a),!0)}}p.Parser=r},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.RowParser=void 0;const c=e("./column"),s=e("./Token");p.RowParser=class{constructor(i){this.parserOptions=i,this.columnParser=new c.ColumnParser(i)}static isEmptyRow(i){return i.join("").replace(/\s+/g,"")===""}parse(i){const{parserOptions:r}=this,{hasMoreData:t}=i,n=i,l=[];let a=this.getStartToken(n,l);for(;a;){if(s.Token.isTokenRowDelimiter(a))return n.advancePastToken(a),!n.hasMoreCharacters&&s.Token.isTokenCarriageReturn(a,r)&&t?null:(n.truncateToCursor(),l);if(!this.shouldSkipColumnParse(n,a,l)){const o=this.columnParser.parse(n);if(o===null)return null;l.push(o)}a=n.nextNonSpaceToken}return t?null:(n.truncateToCursor(),l)}getStartToken(i,r){const t=i.nextNonSpaceToken;return t!==null&&s.Token.isTokenDelimiter(t,this.parserOptions)?(r.push(""),i.nextNonSpaceToken):t}shouldSkipColumnParse(i,r,t){const{parserOptions:n}=this;if(s.Token.isTokenDelimiter(r,n)){i.advancePastToken(r);const l=i.nextCharacterToken;if(!i.hasMoreCharacters||l!==null&&s.Token.isTokenRowDelimiter(l)||l!==null&&s.Token.isTokenDelimiter(l,n))return t.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.Scanner=void 0;const c=e("./Token"),s=/((?:\r\n)|\n|\r)/;p.Scanner=class{constructor(i){this.cursor=0,this.line=i.line,this.lineLength=this.line.length,this.parserOptions=i.parserOptions,this.hasMoreData=i.hasMoreData,this.cursor=i.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:i}=this,r=this.parserOptions.NEXT_TOKEN_REGEXP;if(i.search(r)===-1)return null;const t=r.exec(i);if(t==null)return null;const n=t[1],l=this.cursor+(t.index||0);return new c.Token({token:n,startCursor:l,endCursor:l+n.length-1})}get nextCharacterToken(){const{cursor:i,lineLength:r}=this;return r<=i?null:new c.Token({token:this.line[i],startCursor:i,endCursor:i})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const i=s.exec(this.lineFromCursor);return i?(this.cursor+=(i.index||0)+i[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(i){return this.cursor=i,this}advanceToToken(i){return this.cursor=i.startCursor,this}advancePastToken(i){return this.cursor=i.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.Token=void 0,p.Token=class{constructor(c){this.token=c.token,this.startCursor=c.startCursor,this.endCursor=c.endCursor}static isTokenRowDelimiter(c){const s=c.token;return s==="\r"||s===`
`||s===`\r
`}static isTokenCarriageReturn(c,s){return c.token===s.carriageReturn}static isTokenComment(c,s){return s.supportsComments&&!!c&&c.token===s.comment}static isTokenEscapeCharacter(c,s){return c.token===s.escapeChar}static isTokenQuote(c,s){return c.token===s.quote}static isTokenDelimiter(c,s){return c.token===s.delimiter}}},{}],160:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.ColumnFormatter=void 0,p.ColumnFormatter=class{constructor(c){c.trim?this.format=s=>s.trim():c.ltrim?this.format=s=>s.trimLeft():c.rtrim?this.format=s=>s.trimRight():this.format=s=>s}}},{}],161:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.ColumnParser=void 0;const c=e("./NonQuotedColumnParser"),s=e("./QuotedColumnParser"),i=e("../Token");p.ColumnParser=class{constructor(r){this.parserOptions=r,this.quotedColumnParser=new s.QuotedColumnParser(r),this.nonQuotedColumnParser=new c.NonQuotedColumnParser(r)}parse(r){const{nextNonSpaceToken:t}=r;return t!==null&&i.Token.isTokenQuote(t,this.parserOptions)?(r.advanceToToken(t),this.quotedColumnParser.parse(r)):this.nonQuotedColumnParser.parse(r)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.NonQuotedColumnParser=void 0;const c=e("./ColumnFormatter"),s=e("../Token");p.NonQuotedColumnParser=class{constructor(i){this.parserOptions=i,this.columnFormatter=new c.ColumnFormatter(i)}parse(i){if(!i.hasMoreCharacters)return null;const{parserOptions:r}=this,t=[];let n=i.nextCharacterToken;for(;n&&!s.Token.isTokenDelimiter(n,r)&&!s.Token.isTokenRowDelimiter(n);n=i.nextCharacterToken)t.push(n.token),i.advancePastToken(n);return this.columnFormatter.format(t.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.QuotedColumnParser=void 0;const c=e("./ColumnFormatter"),s=e("../Token");p.QuotedColumnParser=class{constructor(i){this.parserOptions=i,this.columnFormatter=new c.ColumnFormatter(i)}parse(i){if(!i.hasMoreCharacters)return null;const r=i.cursor,{foundClosingQuote:t,col:n}=this.gatherDataBetweenQuotes(i);if(!t){if(i.advanceTo(r),!i.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${i.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(i),n}gatherDataBetweenQuotes(i){const{parserOptions:r}=this;let t=!1,n=!1;const l=[];let a=i.nextCharacterToken;for(;!n&&a!==null;a=i.nextCharacterToken){const o=s.Token.isTokenQuote(a,r);if(!t&&o)t=!0;else if(t)if(s.Token.isTokenEscapeCharacter(a,r)){i.advancePastToken(a);const d=i.nextCharacterToken;d!==null&&(s.Token.isTokenQuote(d,r)||s.Token.isTokenEscapeCharacter(d,r))?(l.push(d.token),a=d):o?n=!0:l.push(a.token)}else o?n=!0:l.push(a.token);i.advancePastToken(a)}return{col:this.columnFormatter.format(l.join("")),foundClosingQuote:n}}checkForMalformedColumn(i){const{parserOptions:r}=this,{nextNonSpaceToken:t}=i;if(t){const n=s.Token.isTokenDelimiter(t,r),l=s.Token.isTokenRowDelimiter(t);if(!n&&!l){const a=i.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${r.escapedDelimiter}' OR new line got: '${t.token}'. at '${a}`)}i.advanceToToken(t)}else i.hasMoreData||i.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.ColumnFormatter=p.QuotedColumnParser=p.NonQuotedColumnParser=p.ColumnParser=void 0;var c=e("./ColumnParser");Object.defineProperty(p,"ColumnParser",{enumerable:!0,get:function(){return c.ColumnParser}});var s=e("./NonQuotedColumnParser");Object.defineProperty(p,"NonQuotedColumnParser",{enumerable:!0,get:function(){return s.NonQuotedColumnParser}});var i=e("./QuotedColumnParser");Object.defineProperty(p,"QuotedColumnParser",{enumerable:!0,get:function(){return i.QuotedColumnParser}});var r=e("./ColumnFormatter");Object.defineProperty(p,"ColumnFormatter",{enumerable:!0,get:function(){return r.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.QuotedColumnParser=p.NonQuotedColumnParser=p.ColumnParser=p.Token=p.Scanner=p.RowParser=p.Parser=void 0;var c=e("./Parser");Object.defineProperty(p,"Parser",{enumerable:!0,get:function(){return c.Parser}});var s=e("./RowParser");Object.defineProperty(p,"RowParser",{enumerable:!0,get:function(){return s.RowParser}});var i=e("./Scanner");Object.defineProperty(p,"Scanner",{enumerable:!0,get:function(){return i.Scanner}});var r=e("./Token");Object.defineProperty(p,"Token",{enumerable:!0,get:function(){return r.Token}});var t=e("./column");Object.defineProperty(p,"ColumnParser",{enumerable:!0,get:function(){return t.ColumnParser}}),Object.defineProperty(p,"NonQuotedColumnParser",{enumerable:!0,get:function(){return t.NonQuotedColumnParser}}),Object.defineProperty(p,"QuotedColumnParser",{enumerable:!0,get:function(){return t.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(e,h,p){var c=function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(p,"__esModule",{value:!0}),p.HeaderTransformer=void 0;const s=c(e("lodash.isundefined")),i=c(e("lodash.isfunction")),r=c(e("lodash.uniq")),t=c(e("lodash.groupby"));p.HeaderTransformer=class{constructor(n){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=n,n.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(n.headers)?this.setHeaders(n.headers):i.default(n.headers)&&(this.headersTransform=n.headers)}transform(n,l){return this.shouldMapRow(n)?l(null,this.processRow(n)):l(null,{row:null,isValid:!0})}shouldMapRow(n){const{parserOptions:l}=this;if(!this.headersTransform&&l.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(n)){if(this.headersTransform)this.setHeaders(this.headersTransform(n));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(n)}return!1}return!0}processRow(n){if(!this.headers)return{row:n,isValid:!0};const{parserOptions:l}=this;if(!l.discardUnmappedColumns&&n.length>this.headersLength){if(!l.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${n.length}`);return{row:n,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${n.length}`}}return l.strictColumnHandling&&n.length<this.headersLength?{row:n,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${n.length}`}:{row:this.mapHeaders(n),isValid:!0}}mapHeaders(n){const l={},{headers:a,headersLength:o}=this;for(let d=0;d<o;d+=1){const f=a[d];if(!s.default(f)){const u=n[d];s.default(u)?l[f]="":l[f]=u}}return l}setHeaders(n){var l;const a=n.filter(o=>!!o);if(r.default(a).length!==a.length){const o=t.default(a),d=Object.keys(o).filter(f=>o[f].length>1);throw new Error("Duplicate headers found "+JSON.stringify(d))}this.headers=n,this.receivedHeaders=!0,this.headersLength=((l=this.headers)===null||l===void 0?void 0:l.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(e,h,p){var c=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(p,"__esModule",{value:!0}),p.RowTransformerValidator=void 0;const s=c(e("lodash.isfunction")),i=e("../types");class r{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(n){return i.isSyncTransform(n)?(l,a)=>{let o=null;try{o=n(l)}catch(d){return a(d)}return a(null,o)}:n}static createValidator(n){return i.isSyncValidate(n)?(l,a)=>{a(null,{row:l,isValid:n(l)})}:(l,a)=>{n(l,(o,d,f)=>o?a(o):a(null,d?{row:l,isValid:d,reason:f}:{row:l,isValid:!1,reason:f}))}}set rowTransform(n){if(!s.default(n))throw new TypeError("The transform should be a function");this._rowTransform=r.createTransform(n)}set rowValidator(n){if(!s.default(n))throw new TypeError("The validate should be a function");this._rowValidator=r.createValidator(n)}transformAndValidate(n,l){return this.callTransformer(n,(a,o)=>a?l(a):o?this.callValidator(o,(d,f)=>d?l(d):f&&!f.isValid?l(null,{row:o,isValid:!1,reason:f.reason}):l(null,{row:o,isValid:!0})):l(null,{row:null,isValid:!0}))}callTransformer(n,l){return this._rowTransform?this._rowTransform(n,l):l(null,n)}callValidator(n,l){return this._rowValidator?this._rowValidator(n,l):l(null,{row:n,isValid:!0})}}p.RowTransformerValidator=r},{"../types":169,"lodash.isfunction":446}],168:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.HeaderTransformer=p.RowTransformerValidator=void 0;var c=e("./RowTransformerValidator");Object.defineProperty(p,"RowTransformerValidator",{enumerable:!0,get:function(){return c.RowTransformerValidator}});var s=e("./HeaderTransformer");Object.defineProperty(p,"HeaderTransformer",{enumerable:!0,get:function(){return s.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.isSyncValidate=p.isSyncTransform=void 0,p.isSyncTransform=c=>c.length===1,p.isSyncValidate=c=>c.length===1},{}],170:[function(e,h,p){const c=p;c.bignum=e("bn.js"),c.define=e("./asn1/api").define,c.base=e("./asn1/base"),c.constants=e("./asn1/constants"),c.decoders=e("./asn1/decoders"),c.encoders=e("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(e,h,p){const c=e("./encoders"),s=e("./decoders"),i=e("inherits");function r(t,n){this.name=t,this.body=n,this.decoders={},this.encoders={}}p.define=function(t,n){return new r(t,n)},r.prototype._createNamed=function(t){const n=this.name;function l(a){this._initNamed(a,n)}return i(l,t),l.prototype._initNamed=function(a,o){t.call(this,a,o)},new l(this)},r.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(s[t])),this.decoders[t]},r.prototype.decode=function(t,n,l){return this._getDecoder(n).decode(t,l)},r.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(c[t])),this.encoders[t]},r.prototype.encode=function(t,n,l){return this._getEncoder(n).encode(t,l)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(e,h,p){const c=e("inherits"),s=e("../base/reporter").Reporter,i=e("safer-buffer").Buffer;function r(n,l){s.call(this,l),i.isBuffer(n)?(this.base=n,this.offset=0,this.length=n.length):this.error("Input not Buffer")}function t(n,l){if(Array.isArray(n))this.length=0,this.value=n.map(function(a){return t.isEncoderBuffer(a)||(a=new t(a,l)),this.length+=a.length,a},this);else if(typeof n=="number"){if(!(0<=n&&n<=255))return l.error("non-byte EncoderBuffer value");this.value=n,this.length=1}else if(typeof n=="string")this.value=n,this.length=i.byteLength(n);else{if(!i.isBuffer(n))return l.error("Unsupported type: "+typeof n);this.value=n,this.length=n.length}}c(r,s),p.DecoderBuffer=r,r.isDecoderBuffer=function(n){return n instanceof r?!0:typeof n=="object"&&i.isBuffer(n.base)&&n.constructor.name==="DecoderBuffer"&&typeof n.offset=="number"&&typeof n.length=="number"&&typeof n.save=="function"&&typeof n.restore=="function"&&typeof n.isEmpty=="function"&&typeof n.readUInt8=="function"&&typeof n.skip=="function"&&typeof n.raw=="function"},r.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},r.prototype.restore=function(n){const l=new r(this.base);return l.offset=n.offset,l.length=this.offset,this.offset=n.offset,s.prototype.restore.call(this,n.reporter),l},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(n){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(n||"DecoderBuffer overrun")},r.prototype.skip=function(n,l){if(!(this.offset+n<=this.length))return this.error(l||"DecoderBuffer overrun");const a=new r(this.base);return a._reporterState=this._reporterState,a.offset=this.offset,a.length=this.offset+n,this.offset+=n,a},r.prototype.raw=function(n){return this.base.slice(n?n.offset:this.offset,this.length)},p.EncoderBuffer=t,t.isEncoderBuffer=function(n){return n instanceof t?!0:typeof n=="object"&&n.constructor.name==="EncoderBuffer"&&typeof n.length=="number"&&typeof n.join=="function"},t.prototype.join=function(n,l){return n||(n=i.alloc(this.length)),l||(l=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(a){a.join(n,l),l+=a.length}):(typeof this.value=="number"?n[l]=this.value:typeof this.value=="string"?n.write(this.value,l):i.isBuffer(this.value)&&this.value.copy(n,l),l+=this.length)),n}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(e,h,p){const c=p;c.Reporter=e("./reporter").Reporter,c.DecoderBuffer=e("./buffer").DecoderBuffer,c.EncoderBuffer=e("./buffer").EncoderBuffer,c.Node=e("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(e,h,p){const c=e("../base/reporter").Reporter,s=e("../base/buffer").EncoderBuffer,i=e("../base/buffer").DecoderBuffer,r=e("minimalistic-assert"),t=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],n=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(t);function l(o,d,f){const u={};this._baseState=u,u.name=f,u.enc=o,u.parent=d||null,u.children=null,u.tag=null,u.args=null,u.reverseArgs=null,u.choice=null,u.optional=!1,u.any=!1,u.obj=!1,u.use=null,u.useDecoder=null,u.key=null,u.default=null,u.explicit=null,u.implicit=null,u.contains=null,u.parent||(u.children=[],this._wrap())}h.exports=l;const a=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const o=this._baseState,d={};a.forEach(function(u){d[u]=o[u]});const f=new this.constructor(d.parent);return f._baseState=d,f},l.prototype._wrap=function(){const o=this._baseState;n.forEach(function(d){this[d]=function(){const f=new this.constructor(this);return o.children.push(f),f[d].apply(f,arguments)}},this)},l.prototype._init=function(o){const d=this._baseState;r(d.parent===null),o.call(this),d.children=d.children.filter(function(f){return f._baseState.parent===this},this),r.equal(d.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(o){const d=this._baseState,f=o.filter(function(u){return u instanceof this.constructor},this);o=o.filter(function(u){return!(u instanceof this.constructor)},this),f.length!==0&&(r(d.children===null),d.children=f,f.forEach(function(u){u._baseState.parent=this},this)),o.length!==0&&(r(d.args===null),d.args=o,d.reverseArgs=o.map(function(u){if(typeof u!="object"||u.constructor!==Object)return u;const g={};return Object.keys(u).forEach(function(m){m==(0|m)&&(m|=0);const k=u[m];g[k]=m}),g}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(o){l.prototype[o]=function(){const d=this._baseState;throw new Error(o+" not implemented for encoding: "+d.enc)}}),t.forEach(function(o){l.prototype[o]=function(){const d=this._baseState,f=Array.prototype.slice.call(arguments);return r(d.tag===null),d.tag=o,this._useArgs(f),this}}),l.prototype.use=function(o){r(o);const d=this._baseState;return r(d.use===null),d.use=o,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(o){const d=this._baseState;return r(d.default===null),d.default=o,d.optional=!0,this},l.prototype.explicit=function(o){const d=this._baseState;return r(d.explicit===null&&d.implicit===null),d.explicit=o,this},l.prototype.implicit=function(o){const d=this._baseState;return r(d.explicit===null&&d.implicit===null),d.implicit=o,this},l.prototype.obj=function(){const o=this._baseState,d=Array.prototype.slice.call(arguments);return o.obj=!0,d.length!==0&&this._useArgs(d),this},l.prototype.key=function(o){const d=this._baseState;return r(d.key===null),d.key=o,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(o){const d=this._baseState;return r(d.choice===null),d.choice=o,this._useArgs(Object.keys(o).map(function(f){return o[f]})),this},l.prototype.contains=function(o){const d=this._baseState;return r(d.use===null),d.contains=o,this},l.prototype._decode=function(o,d){const f=this._baseState;if(f.parent===null)return o.wrapResult(f.children[0]._decode(o,d));let u,g=f.default,m=!0,k=null;if(f.key!==null&&(k=o.enterKey(f.key)),f.optional){let E=null;if(f.explicit!==null?E=f.explicit:f.implicit!==null?E=f.implicit:f.tag!==null&&(E=f.tag),E!==null||f.any){if(m=this._peekTag(o,E,f.any),o.isError(m))return m}else{const A=o.save();try{f.choice===null?this._decodeGeneric(f.tag,o,d):this._decodeChoice(o,d),m=!0}catch{m=!1}o.restore(A)}}if(f.obj&&m&&(u=o.enterObject()),m){if(f.explicit!==null){const A=this._decodeTag(o,f.explicit);if(o.isError(A))return A;o=A}const E=o.offset;if(f.use===null&&f.choice===null){let A;f.any&&(A=o.save());const L=this._decodeTag(o,f.implicit!==null?f.implicit:f.tag,f.any);if(o.isError(L))return L;f.any?g=o.raw(A):o=L}if(d&&d.track&&f.tag!==null&&d.track(o.path(),E,o.length,"tagged"),d&&d.track&&f.tag!==null&&d.track(o.path(),o.offset,o.length,"content"),f.any||(g=f.choice===null?this._decodeGeneric(f.tag,o,d):this._decodeChoice(o,d)),o.isError(g))return g;if(f.any||f.choice!==null||f.children===null||f.children.forEach(function(A){A._decode(o,d)}),f.contains&&(f.tag==="octstr"||f.tag==="bitstr")){const A=new i(g);g=this._getUse(f.contains,o._reporterState.obj)._decode(A,d)}}return f.obj&&m&&(g=o.leaveObject(u)),f.key===null||g===null&&m!==!0?k!==null&&o.exitKey(k):o.leaveKey(k,f.key,g),g},l.prototype._decodeGeneric=function(o,d,f){const u=this._baseState;return o==="seq"||o==="set"?null:o==="seqof"||o==="setof"?this._decodeList(d,o,u.args[0],f):/str$/.test(o)?this._decodeStr(d,o,f):o==="objid"&&u.args?this._decodeObjid(d,u.args[0],u.args[1],f):o==="objid"?this._decodeObjid(d,null,null,f):o==="gentime"||o==="utctime"?this._decodeTime(d,o,f):o==="null_"?this._decodeNull(d,f):o==="bool"?this._decodeBool(d,f):o==="objDesc"?this._decodeStr(d,o,f):o==="int"||o==="enum"?this._decodeInt(d,u.args&&u.args[0],f):u.use!==null?this._getUse(u.use,d._reporterState.obj)._decode(d,f):d.error("unknown tag: "+o)},l.prototype._getUse=function(o,d){const f=this._baseState;return f.useDecoder=this._use(o,d),r(f.useDecoder._baseState.parent===null),f.useDecoder=f.useDecoder._baseState.children[0],f.implicit!==f.useDecoder._baseState.implicit&&(f.useDecoder=f.useDecoder.clone(),f.useDecoder._baseState.implicit=f.implicit),f.useDecoder},l.prototype._decodeChoice=function(o,d){const f=this._baseState;let u=null,g=!1;return Object.keys(f.choice).some(function(m){const k=o.save(),E=f.choice[m];try{const A=E._decode(o,d);if(o.isError(A))return!1;u={type:m,value:A},g=!0}catch{return o.restore(k),!1}return!0},this),g?u:o.error("Choice not matched")},l.prototype._createEncoderBuffer=function(o){return new s(o,this.reporter)},l.prototype._encode=function(o,d,f){const u=this._baseState;if(u.default!==null&&u.default===o)return;const g=this._encodeValue(o,d,f);return g===void 0||this._skipDefault(g,d,f)?void 0:g},l.prototype._encodeValue=function(o,d,f){const u=this._baseState;if(u.parent===null)return u.children[0]._encode(o,d||new c);let g=null;if(this.reporter=d,u.optional&&o===void 0){if(u.default===null)return;o=u.default}let m=null,k=!1;if(u.any)g=this._createEncoderBuffer(o);else if(u.choice)g=this._encodeChoice(o,d);else if(u.contains)m=this._getUse(u.contains,f)._encode(o,d),k=!0;else if(u.children)m=u.children.map(function(E){if(E._baseState.tag==="null_")return E._encode(null,d,o);if(E._baseState.key===null)return d.error("Child should have a key");const A=d.enterKey(E._baseState.key);if(typeof o!="object")return d.error("Child expected, but input is not object");const L=E._encode(o[E._baseState.key],d,o);return d.leaveKey(A),L},this).filter(function(E){return E}),m=this._createEncoderBuffer(m);else if(u.tag==="seqof"||u.tag==="setof"){if(!u.args||u.args.length!==1)return d.error("Too many args for : "+u.tag);if(!Array.isArray(o))return d.error("seqof/setof, but data is not Array");const E=this.clone();E._baseState.implicit=null,m=this._createEncoderBuffer(o.map(function(A){const L=this._baseState;return this._getUse(L.args[0],o)._encode(A,d)},E))}else u.use!==null?g=this._getUse(u.use,f)._encode(o,d):(m=this._encodePrimitive(u.tag,o),k=!0);if(!u.any&&u.choice===null){const E=u.implicit!==null?u.implicit:u.tag,A=u.implicit===null?"universal":"context";E===null?u.use===null&&d.error("Tag could be omitted only for .use()"):u.use===null&&(g=this._encodeComposite(E,k,A,m))}return u.explicit!==null&&(g=this._encodeComposite(u.explicit,!1,"context",g)),g},l.prototype._encodeChoice=function(o,d){const f=this._baseState,u=f.choice[o.type];return u||r(!1,o.type+" not found in "+JSON.stringify(Object.keys(f.choice))),u._encode(o.value,d)},l.prototype._encodePrimitive=function(o,d){const f=this._baseState;if(/str$/.test(o))return this._encodeStr(d,o);if(o==="objid"&&f.args)return this._encodeObjid(d,f.reverseArgs[0],f.args[1]);if(o==="objid")return this._encodeObjid(d,null,null);if(o==="gentime"||o==="utctime")return this._encodeTime(d,o);if(o==="null_")return this._encodeNull();if(o==="int"||o==="enum")return this._encodeInt(d,f.args&&f.reverseArgs[0]);if(o==="bool")return this._encodeBool(d);if(o==="objDesc")return this._encodeStr(d,o);throw new Error("Unsupported tag: "+o)},l.prototype._isNumstr=function(o){return/^[0-9 ]*$/.test(o)},l.prototype._isPrintstr=function(o){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(o)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(e,h,p){const c=e("inherits");function s(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}function i(r,t){this.path=r,this.rethrow(t)}p.Reporter=s,s.prototype.isError=function(r){return r instanceof i},s.prototype.save=function(){const r=this._reporterState;return{obj:r.obj,pathLen:r.path.length}},s.prototype.restore=function(r){const t=this._reporterState;t.obj=r.obj,t.path=t.path.slice(0,r.pathLen)},s.prototype.enterKey=function(r){return this._reporterState.path.push(r)},s.prototype.exitKey=function(r){const t=this._reporterState;t.path=t.path.slice(0,r-1)},s.prototype.leaveKey=function(r,t,n){const l=this._reporterState;this.exitKey(r),l.obj!==null&&(l.obj[t]=n)},s.prototype.path=function(){return this._reporterState.path.join("/")},s.prototype.enterObject=function(){const r=this._reporterState,t=r.obj;return r.obj={},t},s.prototype.leaveObject=function(r){const t=this._reporterState,n=t.obj;return t.obj=r,n},s.prototype.error=function(r){let t;const n=this._reporterState,l=r instanceof i;if(t=l?r:new i(n.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),r.message||r,r.stack),!n.options.partial)throw t;return l||n.errors.push(t),t},s.prototype.wrapResult=function(r){const t=this._reporterState;return t.options.partial?{result:this.isError(r)?null:r,errors:t.errors}:r},c(i,Error),i.prototype.rethrow=function(r){if(this.message=r+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},{inherits:440}],176:[function(e,h,p){function c(s){const i={};return Object.keys(s).forEach(function(r){(0|r)==r&&(r|=0);const t=s[r];i[t]=r}),i}p.tagClass={0:"universal",1:"application",2:"context",3:"private"},p.tagClassByName=c(p.tagClass),p.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},p.tagByName=c(p.tag)},{}],177:[function(e,h,p){const c=p;c._reverse=function(s){const i={};return Object.keys(s).forEach(function(r){(0|r)==r&&(r|=0);const t=s[r];i[t]=r}),i},c.der=e("./der")},{"./der":176}],178:[function(e,h,p){const c=e("inherits"),s=e("bn.js"),i=e("../base/buffer").DecoderBuffer,r=e("../base/node"),t=e("../constants/der");function n(d){this.enc="der",this.name=d.name,this.entity=d,this.tree=new l,this.tree._init(d.body)}function l(d){r.call(this,"der",d)}function a(d,f){let u=d.readUInt8(f);if(d.isError(u))return u;const g=t.tagClass[u>>6],m=(32&u)==0;if((31&u)==31){let k=u;for(u=0;(128&k)==128;){if(k=d.readUInt8(f),d.isError(k))return k;u<<=7,u|=127&k}}else u&=31;return{cls:g,primitive:m,tag:u,tagStr:t.tag[u]}}function o(d,f,u){let g=d.readUInt8(u);if(d.isError(g))return g;if(!f&&g===128)return null;if((128&g)==0)return g;const m=127&g;if(m>4)return d.error("length octect is too long");g=0;for(let k=0;k<m;k++){g<<=8;const E=d.readUInt8(u);if(d.isError(E))return E;g|=E}return g}h.exports=n,n.prototype.decode=function(d,f){return i.isDecoderBuffer(d)||(d=new i(d,f)),this.tree._decode(d,f)},c(l,r),l.prototype._peekTag=function(d,f,u){if(d.isEmpty())return!1;const g=d.save(),m=a(d,'Failed to peek tag: "'+f+'"');return d.isError(m)?m:(d.restore(g),m.tag===f||m.tagStr===f||m.tagStr+"of"===f||u)},l.prototype._decodeTag=function(d,f,u){const g=a(d,'Failed to decode tag of "'+f+'"');if(d.isError(g))return g;let m=o(d,g.primitive,'Failed to get length of "'+f+'"');if(d.isError(m))return m;if(!u&&g.tag!==f&&g.tagStr!==f&&g.tagStr+"of"!==f)return d.error('Failed to match tag: "'+f+'"');if(g.primitive||m!==null)return d.skip(m,'Failed to match body of: "'+f+'"');const k=d.save(),E=this._skipUntilEnd(d,'Failed to skip indefinite length body: "'+this.tag+'"');return d.isError(E)?E:(m=d.offset-k.offset,d.restore(k),d.skip(m,'Failed to match body of: "'+f+'"'))},l.prototype._skipUntilEnd=function(d,f){for(;;){const u=a(d,f);if(d.isError(u))return u;const g=o(d,u.primitive,f);if(d.isError(g))return g;let m;if(m=u.primitive||g!==null?d.skip(g):this._skipUntilEnd(d,f),d.isError(m))return m;if(u.tagStr==="end")break}},l.prototype._decodeList=function(d,f,u,g){const m=[];for(;!d.isEmpty();){const k=this._peekTag(d,"end");if(d.isError(k))return k;const E=u.decode(d,"der",g);if(d.isError(E)&&k)break;m.push(E)}return m},l.prototype._decodeStr=function(d,f){if(f==="bitstr"){const u=d.readUInt8();return d.isError(u)?u:{unused:u,data:d.raw()}}if(f==="bmpstr"){const u=d.raw();if(u.length%2==1)return d.error("Decoding of string type: bmpstr length mismatch");let g="";for(let m=0;m<u.length/2;m++)g+=String.fromCharCode(u.readUInt16BE(2*m));return g}if(f==="numstr"){const u=d.raw().toString("ascii");return this._isNumstr(u)?u:d.error("Decoding of string type: numstr unsupported characters")}if(f==="octstr"||f==="objDesc")return d.raw();if(f==="printstr"){const u=d.raw().toString("ascii");return this._isPrintstr(u)?u:d.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(f)?d.raw().toString():d.error("Decoding of string type: "+f+" unsupported")},l.prototype._decodeObjid=function(d,f,u){let g;const m=[];let k=0,E=0;for(;!d.isEmpty();)E=d.readUInt8(),k<<=7,k|=127&E,(128&E)==0&&(m.push(k),k=0);128&E&&m.push(k);const A=m[0]/40|0,L=m[0]%40;if(g=u?m:[A,L].concat(m.slice(1)),f){let z=f[g.join(" ")];z===void 0&&(z=f[g.join(".")]),z!==void 0&&(g=z)}return g},l.prototype._decodeTime=function(d,f){const u=d.raw().toString();let g,m,k,E,A,L;if(f==="gentime")g=0|u.slice(0,4),m=0|u.slice(4,6),k=0|u.slice(6,8),E=0|u.slice(8,10),A=0|u.slice(10,12),L=0|u.slice(12,14);else{if(f!=="utctime")return d.error("Decoding "+f+" time is not supported yet");g=0|u.slice(0,2),m=0|u.slice(2,4),k=0|u.slice(4,6),E=0|u.slice(6,8),A=0|u.slice(8,10),L=0|u.slice(10,12),g=g<70?2e3+g:1900+g}return Date.UTC(g,m-1,k,E,A,L,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(d){const f=d.readUInt8();return d.isError(f)?f:f!==0},l.prototype._decodeInt=function(d,f){const u=d.raw();let g=new s(u);return f&&(g=f[g.toString(10)]||g),g},l.prototype._use=function(d,f){return typeof d=="function"&&(d=d(f)),d._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(e,h,p){const c=p;c.der=e("./der"),c.pem=e("./pem")},{"./der":178,"./pem":180}],180:[function(e,h,p){const c=e("inherits"),s=e("safer-buffer").Buffer,i=e("./der");function r(t){i.call(this,t),this.enc="pem"}c(r,i),h.exports=r,r.prototype.decode=function(t,n){const l=t.toString().split(/[\r\n]+/g),a=n.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let d=-1,f=-1;for(let m=0;m<l.length;m++){const k=l[m].match(o);if(k!==null&&k[2]===a){if(d!==-1){if(k[1]!=="END")break;f=m;break}if(k[1]!=="BEGIN")break;d=m}}if(d===-1||f===-1)throw new Error("PEM section not found for: "+a);const u=l.slice(d+1,f).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const g=s.from(u,"base64");return i.prototype.decode.call(this,g,n)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(e,h,p){const c=e("inherits"),s=e("safer-buffer").Buffer,i=e("../base/node"),r=e("../constants/der");function t(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new n,this.tree._init(a.body)}function n(a){i.call(this,"der",a)}function l(a){return a<10?"0"+a:a}h.exports=t,t.prototype.encode=function(a,o){return this.tree._encode(a,o).join()},c(n,i),n.prototype._encodeComposite=function(a,o,d,f){const u=function(k,E,A,L){let z;if(k==="seqof"?k="seq":k==="setof"&&(k="set"),r.tagByName.hasOwnProperty(k))z=r.tagByName[k];else{if(typeof k!="number"||(0|k)!==k)return L.error("Unknown tag: "+k);z=k}return z>=31?L.error("Multi-octet tag encoding unsupported"):(E||(z|=32),z|=r.tagClassByName[A||"universal"]<<6,z)}(a,o,d,this.reporter);if(f.length<128){const k=s.alloc(2);return k[0]=u,k[1]=f.length,this._createEncoderBuffer([k,f])}let g=1;for(let k=f.length;k>=256;k>>=8)g++;const m=s.alloc(2+g);m[0]=u,m[1]=128|g;for(let k=1+g,E=f.length;E>0;k--,E>>=8)m[k]=255&E;return this._createEncoderBuffer([m,f])},n.prototype._encodeStr=function(a,o){if(o==="bitstr")return this._createEncoderBuffer([0|a.unused,a.data]);if(o==="bmpstr"){const d=s.alloc(2*a.length);for(let f=0;f<a.length;f++)d.writeUInt16BE(a.charCodeAt(f),2*f);return this._createEncoderBuffer(d)}return o==="numstr"?this._isNumstr(a)?this._createEncoderBuffer(a):this.reporter.error("Encoding of string type: numstr supports only digits and space"):o==="printstr"?this._isPrintstr(a)?this._createEncoderBuffer(a):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(o)||o==="objDesc"?this._createEncoderBuffer(a):this.reporter.error("Encoding of string type: "+o+" unsupported")},n.prototype._encodeObjid=function(a,o,d){if(typeof a=="string"){if(!o)return this.reporter.error("string objid given, but no values map found");if(!o.hasOwnProperty(a))return this.reporter.error("objid not found in values map");a=o[a].split(/[\s.]+/g);for(let m=0;m<a.length;m++)a[m]|=0}else if(Array.isArray(a)){a=a.slice();for(let m=0;m<a.length;m++)a[m]|=0}if(!Array.isArray(a))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(a));if(!d){if(a[1]>=40)return this.reporter.error("Second objid identifier OOB");a.splice(0,2,40*a[0]+a[1])}let f=0;for(let m=0;m<a.length;m++){let k=a[m];for(f++;k>=128;k>>=7)f++}const u=s.alloc(f);let g=u.length-1;for(let m=a.length-1;m>=0;m--){let k=a[m];for(u[g--]=127&k;(k>>=7)>0;)u[g--]=128|127&k}return this._createEncoderBuffer(u)},n.prototype._encodeTime=function(a,o){let d;const f=new Date(a);return o==="gentime"?d=[l(f.getUTCFullYear()),l(f.getUTCMonth()+1),l(f.getUTCDate()),l(f.getUTCHours()),l(f.getUTCMinutes()),l(f.getUTCSeconds()),"Z"].join(""):o==="utctime"?d=[l(f.getUTCFullYear()%100),l(f.getUTCMonth()+1),l(f.getUTCDate()),l(f.getUTCHours()),l(f.getUTCMinutes()),l(f.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+o+" time is not supported yet"),this._encodeStr(d,"octstr")},n.prototype._encodeNull=function(){return this._createEncoderBuffer("")},n.prototype._encodeInt=function(a,o){if(typeof a=="string"){if(!o)return this.reporter.error("String int or enum given, but no values map");if(!o.hasOwnProperty(a))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(a));a=o[a]}if(typeof a!="number"&&!s.isBuffer(a)){const u=a.toArray();!a.sign&&128&u[0]&&u.unshift(0),a=s.from(u)}if(s.isBuffer(a)){let u=a.length;a.length===0&&u++;const g=s.alloc(u);return a.copy(g),a.length===0&&(g[0]=0),this._createEncoderBuffer(g)}if(a<128)return this._createEncoderBuffer(a);if(a<256)return this._createEncoderBuffer([0,a]);let d=1;for(let u=a;u>=256;u>>=8)d++;const f=new Array(d);for(let u=f.length-1;u>=0;u--)f[u]=255&a,a>>=8;return 128&f[0]&&f.unshift(0),this._createEncoderBuffer(s.from(f))},n.prototype._encodeBool=function(a){return this._createEncoderBuffer(a?255:0)},n.prototype._use=function(a,o){return typeof a=="function"&&(a=a(o)),a._getEncoder("der").tree},n.prototype._skipDefault=function(a,o,d){const f=this._baseState;let u;if(f.default===null)return!1;const g=a.join();if(f.defaultBuffer===void 0&&(f.defaultBuffer=this._encodeValue(f.default,o,d).join()),g.length!==f.defaultBuffer.length)return!1;for(u=0;u<g.length;u++)if(g[u]!==f.defaultBuffer[u])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(e,h,p){const c=p;c.der=e("./der"),c.pem=e("./pem")},{"./der":181,"./pem":183}],183:[function(e,h,p){const c=e("inherits"),s=e("./der");function i(r){s.call(this,r),this.enc="pem"}c(i,s),h.exports=i,i.prototype.encode=function(r,t){const n=s.prototype.encode.call(this,r).toString("base64"),l=["-----BEGIN "+t.label+"-----"];for(let a=0;a<n.length;a+=64)l.push(n.slice(a,a+64));return l.push("-----END "+t.label+"-----"),l.join(`
`)}},{"./der":181,inherits:440}],184:[function(e,h,p){(function(c,s){function i(C,T){if(!C)throw new Error(T||"Assertion failed")}function r(C,T){C.super_=T;var j=function(){};j.prototype=T.prototype,C.prototype=new j,C.prototype.constructor=C}function t(C,T,j){if(t.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&(T!=="le"&&T!=="be"||(j=T,T=10),this._init(C||0,T||10,j||"be"))}var n;typeof c=="object"?c.exports=t:(void 0).BN=t,t.BN=t,t.wordSize=26;try{n=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function l(C,T){var j=C.charCodeAt(T);return j>=65&&j<=70?j-55:j>=97&&j<=102?j-87:j-48&15}function a(C,T,j){var b=l(C,j);return j-1>=T&&(b|=l(C,j-1)<<4),b}function o(C,T,j,b){for(var v=0,x=Math.min(C.length,j),w=T;w<x;w++){var N=C.charCodeAt(w)-48;v*=b,v+=N>=49?N-49+10:N>=17?N-17+10:N}return v}t.isBN=function(C){return C instanceof t||C!==null&&typeof C=="object"&&C.constructor.wordSize===t.wordSize&&Array.isArray(C.words)},t.max=function(C,T){return C.cmp(T)>0?C:T},t.min=function(C,T){return C.cmp(T)<0?C:T},t.prototype._init=function(C,T,j){if(typeof C=="number")return this._initNumber(C,T,j);if(typeof C=="object")return this._initArray(C,T,j);T==="hex"&&(T=16),i(T===(0|T)&&T>=2&&T<=36);var b=0;(C=C.toString().replace(/\s+/g,""))[0]==="-"&&(b++,this.negative=1),b<C.length&&(T===16?this._parseHex(C,b,j):(this._parseBase(C,T,b),j==="le"&&this._initArray(this.toArray(),T,j)))},t.prototype._initNumber=function(C,T,j){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(i(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),j==="le"&&this._initArray(this.toArray(),T,j)},t.prototype._initArray=function(C,T,j){if(i(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var v,x,w=0;if(j==="be")for(b=C.length-1,v=0;b>=0;b-=3)x=C[b]|C[b-1]<<8|C[b-2]<<16,this.words[v]|=x<<w&67108863,this.words[v+1]=x>>>26-w&67108863,(w+=24)>=26&&(w-=26,v++);else if(j==="le")for(b=0,v=0;b<C.length;b+=3)x=C[b]|C[b+1]<<8|C[b+2]<<16,this.words[v]|=x<<w&67108863,this.words[v+1]=x>>>26-w&67108863,(w+=24)>=26&&(w-=26,v++);return this.strip()},t.prototype._parseHex=function(C,T,j){this.length=Math.ceil((C.length-T)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var v,x=0,w=0;if(j==="be")for(b=C.length-1;b>=T;b-=2)v=a(C,T,b)<<x,this.words[w]|=67108863&v,x>=18?(x-=18,w+=1,this.words[w]|=v>>>26):x+=8;else for(b=(C.length-T)%2==0?T+1:T;b<C.length;b+=2)v=a(C,T,b)<<x,this.words[w]|=67108863&v,x>=18?(x-=18,w+=1,this.words[w]|=v>>>26):x+=8;this.strip()},t.prototype._parseBase=function(C,T,j){this.words=[0],this.length=1;for(var b=0,v=1;v<=67108863;v*=T)b++;b--,v=v/T|0;for(var x=C.length-j,w=x%b,N=Math.min(x,x-w)+j,P=0,D=j;D<N;D+=b)P=o(C,D,D+b,T),this.imuln(v),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P);if(w!==0){var V=1;for(P=o(C,D,C.length,T),D=0;D<w;D++)V*=T;this.imuln(V),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P)}this.strip()},t.prototype.copy=function(C){C.words=new Array(this.length);for(var T=0;T<this.length;T++)C.words[T]=this.words[T];C.length=this.length,C.negative=this.negative,C.red=this.red},t.prototype.clone=function(){var C=new t(null);return this.copy(C),C},t.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(C,T,j){j.negative=T.negative^C.negative;var b=C.length+T.length|0;j.length=b,b=b-1|0;var v=0|C.words[0],x=0|T.words[0],w=v*x,N=67108863&w,P=w/67108864|0;j.words[0]=N;for(var D=1;D<b;D++){for(var V=P>>>26,q=67108863&P,G=Math.min(D,T.length-1),F=Math.max(0,D-C.length+1);F<=G;F++){var X=D-F|0;V+=(w=(v=0|C.words[X])*(x=0|T.words[F])+q)/67108864|0,q=67108863&w}j.words[D]=0|q,P=0|V}return P!==0?j.words[D]=0|P:j.length--,j.strip()}t.prototype.toString=function(C,T){var j;if(T=0|T||1,(C=C||10)===16||C==="hex"){j="";for(var b=0,v=0,x=0;x<this.length;x++){var w=this.words[x],N=(16777215&(w<<b|v)).toString(16);j=(v=w>>>24-b&16777215)!==0||x!==this.length-1?d[6-N.length]+N+j:N+j,(b+=2)>=26&&(b-=26,x--)}for(v!==0&&(j=v.toString(16)+j);j.length%T!=0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}if(C===(0|C)&&C>=2&&C<=36){var P=f[C],D=u[C];j="";var V=this.clone();for(V.negative=0;!V.isZero();){var q=V.modn(D).toString(C);j=(V=V.idivn(D)).isZero()?q+j:d[P-q.length]+q+j}for(this.isZero()&&(j="0"+j);j.length%T!=0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}i(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=67108864*this.words[1]:this.length===3&&this.words[2]===1?C+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(C,T){return i(n!==void 0),this.toArrayLike(n,C,T)},t.prototype.toArray=function(C,T){return this.toArrayLike(Array,C,T)},t.prototype.toArrayLike=function(C,T,j){var b=this.byteLength(),v=j||Math.max(1,b);i(b<=v,"byte array longer than desired length"),i(v>0,"Requested array length <= 0"),this.strip();var x,w,N=T==="le",P=new C(v),D=this.clone();if(N){for(w=0;!D.isZero();w++)x=D.andln(255),D.iushrn(8),P[w]=x;for(;w<v;w++)P[w]=0}else{for(w=0;w<v-b;w++)P[w]=0;for(w=0;!D.isZero();w++)x=D.andln(255),D.iushrn(8),P[v-w-1]=x}return P},Math.clz32?t.prototype._countBits=function(C){return 32-Math.clz32(C)}:t.prototype._countBits=function(C){var T=C,j=0;return T>=4096&&(j+=13,T>>>=13),T>=64&&(j+=7,T>>>=7),T>=8&&(j+=4,T>>>=4),T>=2&&(j+=2,T>>>=2),j+T},t.prototype._zeroBits=function(C){if(C===0)return 26;var T=C,j=0;return(8191&T)==0&&(j+=13,T>>>=13),(127&T)==0&&(j+=7,T>>>=7),(15&T)==0&&(j+=4,T>>>=4),(3&T)==0&&(j+=2,T>>>=2),(1&T)==0&&j++,j},t.prototype.bitLength=function(){var C=this.words[this.length-1],T=this._countBits(C);return 26*(this.length-1)+T},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,T=0;T<this.length;T++){var j=this._zeroBits(this.words[T]);if(C+=j,j!==26)break}return C},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},t.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var T=0;T<C.length;T++)this.words[T]=this.words[T]|C.words[T];return this.strip()},t.prototype.ior=function(C){return i((this.negative|C.negative)==0),this.iuor(C)},t.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},t.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},t.prototype.iuand=function(C){var T;T=this.length>C.length?C:this;for(var j=0;j<T.length;j++)this.words[j]=this.words[j]&C.words[j];return this.length=T.length,this.strip()},t.prototype.iand=function(C){return i((this.negative|C.negative)==0),this.iuand(C)},t.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},t.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},t.prototype.iuxor=function(C){var T,j;this.length>C.length?(T=this,j=C):(T=C,j=this);for(var b=0;b<j.length;b++)this.words[b]=T.words[b]^j.words[b];if(this!==T)for(;b<T.length;b++)this.words[b]=T.words[b];return this.length=T.length,this.strip()},t.prototype.ixor=function(C){return i((this.negative|C.negative)==0),this.iuxor(C)},t.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},t.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},t.prototype.inotn=function(C){i(typeof C=="number"&&C>=0);var T=0|Math.ceil(C/26),j=C%26;this._expand(T),j>0&&T--;for(var b=0;b<T;b++)this.words[b]=67108863&~this.words[b];return j>0&&(this.words[b]=~this.words[b]&67108863>>26-j),this.strip()},t.prototype.notn=function(C){return this.clone().inotn(C)},t.prototype.setn=function(C,T){i(typeof C=="number"&&C>=0);var j=C/26|0,b=C%26;return this._expand(j+1),this.words[j]=T?this.words[j]|1<<b:this.words[j]&~(1<<b),this.strip()},t.prototype.iadd=function(C){var T,j,b;if(this.negative!==0&&C.negative===0)return this.negative=0,T=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,T=this.isub(C),C.negative=1,T._normSign();this.length>C.length?(j=this,b=C):(j=C,b=this);for(var v=0,x=0;x<b.length;x++)T=(0|j.words[x])+(0|b.words[x])+v,this.words[x]=67108863&T,v=T>>>26;for(;v!==0&&x<j.length;x++)T=(0|j.words[x])+v,this.words[x]=67108863&T,v=T>>>26;if(this.length=j.length,v!==0)this.words[this.length]=v,this.length++;else if(j!==this)for(;x<j.length;x++)this.words[x]=j.words[x];return this},t.prototype.add=function(C){var T;return C.negative!==0&&this.negative===0?(C.negative=0,T=this.sub(C),C.negative^=1,T):C.negative===0&&this.negative!==0?(this.negative=0,T=C.sub(this),this.negative=1,T):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},t.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var T=this.iadd(C);return C.negative=1,T._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var j,b,v=this.cmp(C);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;v>0?(j=this,b=C):(j=C,b=this);for(var x=0,w=0;w<b.length;w++)x=(T=(0|j.words[w])-(0|b.words[w])+x)>>26,this.words[w]=67108863&T;for(;x!==0&&w<j.length;w++)x=(T=(0|j.words[w])+x)>>26,this.words[w]=67108863&T;if(x===0&&w<j.length&&j!==this)for(;w<j.length;w++)this.words[w]=j.words[w];return this.length=Math.max(this.length,w),j!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(C){return this.clone().isub(C)};var m=function(C,T,j){var b,v,x,w=C.words,N=T.words,P=j.words,D=0,V=0|w[0],q=8191&V,G=V>>>13,F=0|w[1],X=8191&F,O=F>>>13,M=0|w[2],U=8191&M,K=M>>>13,Q=0|w[3],Y=8191&Q,J=Q>>>13,ae=0|w[4],ie=8191&ae,Z=ae>>>13,ne=0|w[5],re=8191&ne,ue=ne>>>13,ce=0|w[6],te=8191&ce,de=ce>>>13,le=0|w[7],ve=8191&le,we=le>>>13,Se=0|w[8],_e=8191&Se,Pe=Se>>>13,Fe=0|w[9],Oe=8191&Fe,Me=Fe>>>13,Ee=0|N[0],je=8191&Ee,Ie=Ee>>>13,$e=0|N[1],De=8191&$e,Ze=$e>>>13,vt=0|N[2],Ve=8191&vt,xt=vt>>>13,ht=0|N[3],nt=8191&ht,St=ht>>>13,pt=0|N[4],qe=8191&pt,gt=pt>>>13,bt=0|N[5],Ye=8191&bt,mt=bt>>>13,At=0|N[6],tt=8191&At,oe=At>>>13,he=0|N[7],be=8191&he,Ne=he>>>13,ze=0|N[8],Ae=8191&ze,Je=ze>>>13,Ke=0|N[9],Be=8191&Ke,Qe=Ke>>>13;j.negative=C.negative^T.negative,j.length=19;var rt=(D+(b=Math.imul(q,je))|0)+((8191&(v=(v=Math.imul(q,Ie))+Math.imul(G,je)|0))<<13)|0;D=((x=Math.imul(G,Ie))+(v>>>13)|0)+(rt>>>26)|0,rt&=67108863,b=Math.imul(X,je),v=(v=Math.imul(X,Ie))+Math.imul(O,je)|0,x=Math.imul(O,Ie);var ct=(D+(b=b+Math.imul(q,De)|0)|0)+((8191&(v=(v=v+Math.imul(q,Ze)|0)+Math.imul(G,De)|0))<<13)|0;D=((x=x+Math.imul(G,Ze)|0)+(v>>>13)|0)+(ct>>>26)|0,ct&=67108863,b=Math.imul(U,je),v=(v=Math.imul(U,Ie))+Math.imul(K,je)|0,x=Math.imul(K,Ie),b=b+Math.imul(X,De)|0,v=(v=v+Math.imul(X,Ze)|0)+Math.imul(O,De)|0,x=x+Math.imul(O,Ze)|0;var Dt=(D+(b=b+Math.imul(q,Ve)|0)|0)+((8191&(v=(v=v+Math.imul(q,xt)|0)+Math.imul(G,Ve)|0))<<13)|0;D=((x=x+Math.imul(G,xt)|0)+(v>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,b=Math.imul(Y,je),v=(v=Math.imul(Y,Ie))+Math.imul(J,je)|0,x=Math.imul(J,Ie),b=b+Math.imul(U,De)|0,v=(v=v+Math.imul(U,Ze)|0)+Math.imul(K,De)|0,x=x+Math.imul(K,Ze)|0,b=b+Math.imul(X,Ve)|0,v=(v=v+Math.imul(X,xt)|0)+Math.imul(O,Ve)|0,x=x+Math.imul(O,xt)|0;var Ot=(D+(b=b+Math.imul(q,nt)|0)|0)+((8191&(v=(v=v+Math.imul(q,St)|0)+Math.imul(G,nt)|0))<<13)|0;D=((x=x+Math.imul(G,St)|0)+(v>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,b=Math.imul(ie,je),v=(v=Math.imul(ie,Ie))+Math.imul(Z,je)|0,x=Math.imul(Z,Ie),b=b+Math.imul(Y,De)|0,v=(v=v+Math.imul(Y,Ze)|0)+Math.imul(J,De)|0,x=x+Math.imul(J,Ze)|0,b=b+Math.imul(U,Ve)|0,v=(v=v+Math.imul(U,xt)|0)+Math.imul(K,Ve)|0,x=x+Math.imul(K,xt)|0,b=b+Math.imul(X,nt)|0,v=(v=v+Math.imul(X,St)|0)+Math.imul(O,nt)|0,x=x+Math.imul(O,St)|0;var jt=(D+(b=b+Math.imul(q,qe)|0)|0)+((8191&(v=(v=v+Math.imul(q,gt)|0)+Math.imul(G,qe)|0))<<13)|0;D=((x=x+Math.imul(G,gt)|0)+(v>>>13)|0)+(jt>>>26)|0,jt&=67108863,b=Math.imul(re,je),v=(v=Math.imul(re,Ie))+Math.imul(ue,je)|0,x=Math.imul(ue,Ie),b=b+Math.imul(ie,De)|0,v=(v=v+Math.imul(ie,Ze)|0)+Math.imul(Z,De)|0,x=x+Math.imul(Z,Ze)|0,b=b+Math.imul(Y,Ve)|0,v=(v=v+Math.imul(Y,xt)|0)+Math.imul(J,Ve)|0,x=x+Math.imul(J,xt)|0,b=b+Math.imul(U,nt)|0,v=(v=v+Math.imul(U,St)|0)+Math.imul(K,nt)|0,x=x+Math.imul(K,St)|0,b=b+Math.imul(X,qe)|0,v=(v=v+Math.imul(X,gt)|0)+Math.imul(O,qe)|0,x=x+Math.imul(O,gt)|0;var Lt=(D+(b=b+Math.imul(q,Ye)|0)|0)+((8191&(v=(v=v+Math.imul(q,mt)|0)+Math.imul(G,Ye)|0))<<13)|0;D=((x=x+Math.imul(G,mt)|0)+(v>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,b=Math.imul(te,je),v=(v=Math.imul(te,Ie))+Math.imul(de,je)|0,x=Math.imul(de,Ie),b=b+Math.imul(re,De)|0,v=(v=v+Math.imul(re,Ze)|0)+Math.imul(ue,De)|0,x=x+Math.imul(ue,Ze)|0,b=b+Math.imul(ie,Ve)|0,v=(v=v+Math.imul(ie,xt)|0)+Math.imul(Z,Ve)|0,x=x+Math.imul(Z,xt)|0,b=b+Math.imul(Y,nt)|0,v=(v=v+Math.imul(Y,St)|0)+Math.imul(J,nt)|0,x=x+Math.imul(J,St)|0,b=b+Math.imul(U,qe)|0,v=(v=v+Math.imul(U,gt)|0)+Math.imul(K,qe)|0,x=x+Math.imul(K,gt)|0,b=b+Math.imul(X,Ye)|0,v=(v=v+Math.imul(X,mt)|0)+Math.imul(O,Ye)|0,x=x+Math.imul(O,mt)|0;var Ut=(D+(b=b+Math.imul(q,tt)|0)|0)+((8191&(v=(v=v+Math.imul(q,oe)|0)+Math.imul(G,tt)|0))<<13)|0;D=((x=x+Math.imul(G,oe)|0)+(v>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,b=Math.imul(ve,je),v=(v=Math.imul(ve,Ie))+Math.imul(we,je)|0,x=Math.imul(we,Ie),b=b+Math.imul(te,De)|0,v=(v=v+Math.imul(te,Ze)|0)+Math.imul(de,De)|0,x=x+Math.imul(de,Ze)|0,b=b+Math.imul(re,Ve)|0,v=(v=v+Math.imul(re,xt)|0)+Math.imul(ue,Ve)|0,x=x+Math.imul(ue,xt)|0,b=b+Math.imul(ie,nt)|0,v=(v=v+Math.imul(ie,St)|0)+Math.imul(Z,nt)|0,x=x+Math.imul(Z,St)|0,b=b+Math.imul(Y,qe)|0,v=(v=v+Math.imul(Y,gt)|0)+Math.imul(J,qe)|0,x=x+Math.imul(J,gt)|0,b=b+Math.imul(U,Ye)|0,v=(v=v+Math.imul(U,mt)|0)+Math.imul(K,Ye)|0,x=x+Math.imul(K,mt)|0,b=b+Math.imul(X,tt)|0,v=(v=v+Math.imul(X,oe)|0)+Math.imul(O,tt)|0,x=x+Math.imul(O,oe)|0;var se=(D+(b=b+Math.imul(q,be)|0)|0)+((8191&(v=(v=v+Math.imul(q,Ne)|0)+Math.imul(G,be)|0))<<13)|0;D=((x=x+Math.imul(G,Ne)|0)+(v>>>13)|0)+(se>>>26)|0,se&=67108863,b=Math.imul(_e,je),v=(v=Math.imul(_e,Ie))+Math.imul(Pe,je)|0,x=Math.imul(Pe,Ie),b=b+Math.imul(ve,De)|0,v=(v=v+Math.imul(ve,Ze)|0)+Math.imul(we,De)|0,x=x+Math.imul(we,Ze)|0,b=b+Math.imul(te,Ve)|0,v=(v=v+Math.imul(te,xt)|0)+Math.imul(de,Ve)|0,x=x+Math.imul(de,xt)|0,b=b+Math.imul(re,nt)|0,v=(v=v+Math.imul(re,St)|0)+Math.imul(ue,nt)|0,x=x+Math.imul(ue,St)|0,b=b+Math.imul(ie,qe)|0,v=(v=v+Math.imul(ie,gt)|0)+Math.imul(Z,qe)|0,x=x+Math.imul(Z,gt)|0,b=b+Math.imul(Y,Ye)|0,v=(v=v+Math.imul(Y,mt)|0)+Math.imul(J,Ye)|0,x=x+Math.imul(J,mt)|0,b=b+Math.imul(U,tt)|0,v=(v=v+Math.imul(U,oe)|0)+Math.imul(K,tt)|0,x=x+Math.imul(K,oe)|0,b=b+Math.imul(X,be)|0,v=(v=v+Math.imul(X,Ne)|0)+Math.imul(O,be)|0,x=x+Math.imul(O,Ne)|0;var pe=(D+(b=b+Math.imul(q,Ae)|0)|0)+((8191&(v=(v=v+Math.imul(q,Je)|0)+Math.imul(G,Ae)|0))<<13)|0;D=((x=x+Math.imul(G,Je)|0)+(v>>>13)|0)+(pe>>>26)|0,pe&=67108863,b=Math.imul(Oe,je),v=(v=Math.imul(Oe,Ie))+Math.imul(Me,je)|0,x=Math.imul(Me,Ie),b=b+Math.imul(_e,De)|0,v=(v=v+Math.imul(_e,Ze)|0)+Math.imul(Pe,De)|0,x=x+Math.imul(Pe,Ze)|0,b=b+Math.imul(ve,Ve)|0,v=(v=v+Math.imul(ve,xt)|0)+Math.imul(we,Ve)|0,x=x+Math.imul(we,xt)|0,b=b+Math.imul(te,nt)|0,v=(v=v+Math.imul(te,St)|0)+Math.imul(de,nt)|0,x=x+Math.imul(de,St)|0,b=b+Math.imul(re,qe)|0,v=(v=v+Math.imul(re,gt)|0)+Math.imul(ue,qe)|0,x=x+Math.imul(ue,gt)|0,b=b+Math.imul(ie,Ye)|0,v=(v=v+Math.imul(ie,mt)|0)+Math.imul(Z,Ye)|0,x=x+Math.imul(Z,mt)|0,b=b+Math.imul(Y,tt)|0,v=(v=v+Math.imul(Y,oe)|0)+Math.imul(J,tt)|0,x=x+Math.imul(J,oe)|0,b=b+Math.imul(U,be)|0,v=(v=v+Math.imul(U,Ne)|0)+Math.imul(K,be)|0,x=x+Math.imul(K,Ne)|0,b=b+Math.imul(X,Ae)|0,v=(v=v+Math.imul(X,Je)|0)+Math.imul(O,Ae)|0,x=x+Math.imul(O,Je)|0;var xe=(D+(b=b+Math.imul(q,Be)|0)|0)+((8191&(v=(v=v+Math.imul(q,Qe)|0)+Math.imul(G,Be)|0))<<13)|0;D=((x=x+Math.imul(G,Qe)|0)+(v>>>13)|0)+(xe>>>26)|0,xe&=67108863,b=Math.imul(Oe,De),v=(v=Math.imul(Oe,Ze))+Math.imul(Me,De)|0,x=Math.imul(Me,Ze),b=b+Math.imul(_e,Ve)|0,v=(v=v+Math.imul(_e,xt)|0)+Math.imul(Pe,Ve)|0,x=x+Math.imul(Pe,xt)|0,b=b+Math.imul(ve,nt)|0,v=(v=v+Math.imul(ve,St)|0)+Math.imul(we,nt)|0,x=x+Math.imul(we,St)|0,b=b+Math.imul(te,qe)|0,v=(v=v+Math.imul(te,gt)|0)+Math.imul(de,qe)|0,x=x+Math.imul(de,gt)|0,b=b+Math.imul(re,Ye)|0,v=(v=v+Math.imul(re,mt)|0)+Math.imul(ue,Ye)|0,x=x+Math.imul(ue,mt)|0,b=b+Math.imul(ie,tt)|0,v=(v=v+Math.imul(ie,oe)|0)+Math.imul(Z,tt)|0,x=x+Math.imul(Z,oe)|0,b=b+Math.imul(Y,be)|0,v=(v=v+Math.imul(Y,Ne)|0)+Math.imul(J,be)|0,x=x+Math.imul(J,Ne)|0,b=b+Math.imul(U,Ae)|0,v=(v=v+Math.imul(U,Je)|0)+Math.imul(K,Ae)|0,x=x+Math.imul(K,Je)|0;var ke=(D+(b=b+Math.imul(X,Be)|0)|0)+((8191&(v=(v=v+Math.imul(X,Qe)|0)+Math.imul(O,Be)|0))<<13)|0;D=((x=x+Math.imul(O,Qe)|0)+(v>>>13)|0)+(ke>>>26)|0,ke&=67108863,b=Math.imul(Oe,Ve),v=(v=Math.imul(Oe,xt))+Math.imul(Me,Ve)|0,x=Math.imul(Me,xt),b=b+Math.imul(_e,nt)|0,v=(v=v+Math.imul(_e,St)|0)+Math.imul(Pe,nt)|0,x=x+Math.imul(Pe,St)|0,b=b+Math.imul(ve,qe)|0,v=(v=v+Math.imul(ve,gt)|0)+Math.imul(we,qe)|0,x=x+Math.imul(we,gt)|0,b=b+Math.imul(te,Ye)|0,v=(v=v+Math.imul(te,mt)|0)+Math.imul(de,Ye)|0,x=x+Math.imul(de,mt)|0,b=b+Math.imul(re,tt)|0,v=(v=v+Math.imul(re,oe)|0)+Math.imul(ue,tt)|0,x=x+Math.imul(ue,oe)|0,b=b+Math.imul(ie,be)|0,v=(v=v+Math.imul(ie,Ne)|0)+Math.imul(Z,be)|0,x=x+Math.imul(Z,Ne)|0,b=b+Math.imul(Y,Ae)|0,v=(v=v+Math.imul(Y,Je)|0)+Math.imul(J,Ae)|0,x=x+Math.imul(J,Je)|0;var Le=(D+(b=b+Math.imul(U,Be)|0)|0)+((8191&(v=(v=v+Math.imul(U,Qe)|0)+Math.imul(K,Be)|0))<<13)|0;D=((x=x+Math.imul(K,Qe)|0)+(v>>>13)|0)+(Le>>>26)|0,Le&=67108863,b=Math.imul(Oe,nt),v=(v=Math.imul(Oe,St))+Math.imul(Me,nt)|0,x=Math.imul(Me,St),b=b+Math.imul(_e,qe)|0,v=(v=v+Math.imul(_e,gt)|0)+Math.imul(Pe,qe)|0,x=x+Math.imul(Pe,gt)|0,b=b+Math.imul(ve,Ye)|0,v=(v=v+Math.imul(ve,mt)|0)+Math.imul(we,Ye)|0,x=x+Math.imul(we,mt)|0,b=b+Math.imul(te,tt)|0,v=(v=v+Math.imul(te,oe)|0)+Math.imul(de,tt)|0,x=x+Math.imul(de,oe)|0,b=b+Math.imul(re,be)|0,v=(v=v+Math.imul(re,Ne)|0)+Math.imul(ue,be)|0,x=x+Math.imul(ue,Ne)|0,b=b+Math.imul(ie,Ae)|0,v=(v=v+Math.imul(ie,Je)|0)+Math.imul(Z,Ae)|0,x=x+Math.imul(Z,Je)|0;var Ce=(D+(b=b+Math.imul(Y,Be)|0)|0)+((8191&(v=(v=v+Math.imul(Y,Qe)|0)+Math.imul(J,Be)|0))<<13)|0;D=((x=x+Math.imul(J,Qe)|0)+(v>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,b=Math.imul(Oe,qe),v=(v=Math.imul(Oe,gt))+Math.imul(Me,qe)|0,x=Math.imul(Me,gt),b=b+Math.imul(_e,Ye)|0,v=(v=v+Math.imul(_e,mt)|0)+Math.imul(Pe,Ye)|0,x=x+Math.imul(Pe,mt)|0,b=b+Math.imul(ve,tt)|0,v=(v=v+Math.imul(ve,oe)|0)+Math.imul(we,tt)|0,x=x+Math.imul(we,oe)|0,b=b+Math.imul(te,be)|0,v=(v=v+Math.imul(te,Ne)|0)+Math.imul(de,be)|0,x=x+Math.imul(de,Ne)|0,b=b+Math.imul(re,Ae)|0,v=(v=v+Math.imul(re,Je)|0)+Math.imul(ue,Ae)|0,x=x+Math.imul(ue,Je)|0;var Te=(D+(b=b+Math.imul(ie,Be)|0)|0)+((8191&(v=(v=v+Math.imul(ie,Qe)|0)+Math.imul(Z,Be)|0))<<13)|0;D=((x=x+Math.imul(Z,Qe)|0)+(v>>>13)|0)+(Te>>>26)|0,Te&=67108863,b=Math.imul(Oe,Ye),v=(v=Math.imul(Oe,mt))+Math.imul(Me,Ye)|0,x=Math.imul(Me,mt),b=b+Math.imul(_e,tt)|0,v=(v=v+Math.imul(_e,oe)|0)+Math.imul(Pe,tt)|0,x=x+Math.imul(Pe,oe)|0,b=b+Math.imul(ve,be)|0,v=(v=v+Math.imul(ve,Ne)|0)+Math.imul(we,be)|0,x=x+Math.imul(we,Ne)|0,b=b+Math.imul(te,Ae)|0,v=(v=v+Math.imul(te,Je)|0)+Math.imul(de,Ae)|0,x=x+Math.imul(de,Je)|0;var yt=(D+(b=b+Math.imul(re,Be)|0)|0)+((8191&(v=(v=v+Math.imul(re,Qe)|0)+Math.imul(ue,Be)|0))<<13)|0;D=((x=x+Math.imul(ue,Qe)|0)+(v>>>13)|0)+(yt>>>26)|0,yt&=67108863,b=Math.imul(Oe,tt),v=(v=Math.imul(Oe,oe))+Math.imul(Me,tt)|0,x=Math.imul(Me,oe),b=b+Math.imul(_e,be)|0,v=(v=v+Math.imul(_e,Ne)|0)+Math.imul(Pe,be)|0,x=x+Math.imul(Pe,Ne)|0,b=b+Math.imul(ve,Ae)|0,v=(v=v+Math.imul(ve,Je)|0)+Math.imul(we,Ae)|0,x=x+Math.imul(we,Je)|0;var ot=(D+(b=b+Math.imul(te,Be)|0)|0)+((8191&(v=(v=v+Math.imul(te,Qe)|0)+Math.imul(de,Be)|0))<<13)|0;D=((x=x+Math.imul(de,Qe)|0)+(v>>>13)|0)+(ot>>>26)|0,ot&=67108863,b=Math.imul(Oe,be),v=(v=Math.imul(Oe,Ne))+Math.imul(Me,be)|0,x=Math.imul(Me,Ne),b=b+Math.imul(_e,Ae)|0,v=(v=v+Math.imul(_e,Je)|0)+Math.imul(Pe,Ae)|0,x=x+Math.imul(Pe,Je)|0;var ut=(D+(b=b+Math.imul(ve,Be)|0)|0)+((8191&(v=(v=v+Math.imul(ve,Qe)|0)+Math.imul(we,Be)|0))<<13)|0;D=((x=x+Math.imul(we,Qe)|0)+(v>>>13)|0)+(ut>>>26)|0,ut&=67108863,b=Math.imul(Oe,Ae),v=(v=Math.imul(Oe,Je))+Math.imul(Me,Ae)|0,x=Math.imul(Me,Je);var He=(D+(b=b+Math.imul(_e,Be)|0)|0)+((8191&(v=(v=v+Math.imul(_e,Qe)|0)+Math.imul(Pe,Be)|0))<<13)|0;D=((x=x+Math.imul(Pe,Qe)|0)+(v>>>13)|0)+(He>>>26)|0,He&=67108863;var Ct=(D+(b=Math.imul(Oe,Be))|0)+((8191&(v=(v=Math.imul(Oe,Qe))+Math.imul(Me,Be)|0))<<13)|0;return D=((x=Math.imul(Me,Qe))+(v>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,P[0]=rt,P[1]=ct,P[2]=Dt,P[3]=Ot,P[4]=jt,P[5]=Lt,P[6]=Ut,P[7]=se,P[8]=pe,P[9]=xe,P[10]=ke,P[11]=Le,P[12]=Ce,P[13]=Te,P[14]=yt,P[15]=ot,P[16]=ut,P[17]=He,P[18]=Ct,D!==0&&(P[19]=D,j.length++),j};function k(C,T,j){return new E().mulp(C,T,j)}function E(C,T){this.x=C,this.y=T}Math.imul||(m=g),t.prototype.mulTo=function(C,T){var j=this.length+C.length;return this.length===10&&C.length===10?m(this,C,T):j<63?g(this,C,T):j<1024?function(b,v,x){x.negative=v.negative^b.negative,x.length=b.length+v.length;for(var w=0,N=0,P=0;P<x.length-1;P++){var D=N;N=0;for(var V=67108863&w,q=Math.min(P,v.length-1),G=Math.max(0,P-b.length+1);G<=q;G++){var F=P-G,X=(0|b.words[F])*(0|v.words[G]),O=67108863&X;V=67108863&(O=O+V|0),N+=(D=(D=D+(X/67108864|0)|0)+(O>>>26)|0)>>>26,D&=67108863}x.words[P]=V,w=D,D=N}return w!==0?x.words[P]=w:x.length--,x.strip()}(this,C,T):k(this,C,T)},E.prototype.makeRBT=function(C){for(var T=new Array(C),j=t.prototype._countBits(C)-1,b=0;b<C;b++)T[b]=this.revBin(b,j,C);return T},E.prototype.revBin=function(C,T,j){if(C===0||C===j-1)return C;for(var b=0,v=0;v<T;v++)b|=(1&C)<<T-v-1,C>>=1;return b},E.prototype.permute=function(C,T,j,b,v,x){for(var w=0;w<x;w++)b[w]=T[C[w]],v[w]=j[C[w]]},E.prototype.transform=function(C,T,j,b,v,x){this.permute(x,C,T,j,b,v);for(var w=1;w<v;w<<=1)for(var N=w<<1,P=Math.cos(2*Math.PI/N),D=Math.sin(2*Math.PI/N),V=0;V<v;V+=N)for(var q=P,G=D,F=0;F<w;F++){var X=j[V+F],O=b[V+F],M=j[V+F+w],U=b[V+F+w],K=q*M-G*U;U=q*U+G*M,M=K,j[V+F]=X+M,b[V+F]=O+U,j[V+F+w]=X-M,b[V+F+w]=O-U,F!==N&&(K=P*q-D*G,G=P*G+D*q,q=K)}},E.prototype.guessLen13b=function(C,T){var j=1|Math.max(T,C),b=1&j,v=0;for(j=j/2|0;j;j>>>=1)v++;return 1<<v+1+b},E.prototype.conjugate=function(C,T,j){if(!(j<=1))for(var b=0;b<j/2;b++){var v=C[b];C[b]=C[j-b-1],C[j-b-1]=v,v=T[b],T[b]=-T[j-b-1],T[j-b-1]=-v}},E.prototype.normalize13b=function(C,T){for(var j=0,b=0;b<T/2;b++){var v=8192*Math.round(C[2*b+1]/T)+Math.round(C[2*b]/T)+j;C[b]=67108863&v,j=v<67108864?0:v/67108864|0}return C},E.prototype.convert13b=function(C,T,j,b){for(var v=0,x=0;x<T;x++)v+=0|C[x],j[2*x]=8191&v,v>>>=13,j[2*x+1]=8191&v,v>>>=13;for(x=2*T;x<b;++x)j[x]=0;i(v===0),i((-8192&v)==0)},E.prototype.stub=function(C){for(var T=new Array(C),j=0;j<C;j++)T[j]=0;return T},E.prototype.mulp=function(C,T,j){var b=2*this.guessLen13b(C.length,T.length),v=this.makeRBT(b),x=this.stub(b),w=new Array(b),N=new Array(b),P=new Array(b),D=new Array(b),V=new Array(b),q=new Array(b),G=j.words;G.length=b,this.convert13b(C.words,C.length,w,b),this.convert13b(T.words,T.length,D,b),this.transform(w,x,N,P,b,v),this.transform(D,x,V,q,b,v);for(var F=0;F<b;F++){var X=N[F]*V[F]-P[F]*q[F];P[F]=N[F]*q[F]+P[F]*V[F],N[F]=X}return this.conjugate(N,P,b),this.transform(N,P,G,x,b,v),this.conjugate(G,x,b),this.normalize13b(G,b),j.negative=C.negative^T.negative,j.length=C.length+T.length,j.strip()},t.prototype.mul=function(C){var T=new t(null);return T.words=new Array(this.length+C.length),this.mulTo(C,T)},t.prototype.mulf=function(C){var T=new t(null);return T.words=new Array(this.length+C.length),k(this,C,T)},t.prototype.imul=function(C){return this.clone().mulTo(C,this)},t.prototype.imuln=function(C){i(typeof C=="number"),i(C<67108864);for(var T=0,j=0;j<this.length;j++){var b=(0|this.words[j])*C,v=(67108863&b)+(67108863&T);T>>=26,T+=b/67108864|0,T+=v>>>26,this.words[j]=67108863&v}return T!==0&&(this.words[j]=T,this.length++),this},t.prototype.muln=function(C){return this.clone().imuln(C)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(C){var T=function(x){for(var w=new Array(x.bitLength()),N=0;N<w.length;N++){var P=N/26|0,D=N%26;w[N]=(x.words[P]&1<<D)>>>D}return w}(C);if(T.length===0)return new t(1);for(var j=this,b=0;b<T.length&&T[b]===0;b++,j=j.sqr());if(++b<T.length)for(var v=j.sqr();b<T.length;b++,v=v.sqr())T[b]!==0&&(j=j.mul(v));return j},t.prototype.iushln=function(C){i(typeof C=="number"&&C>=0);var T,j=C%26,b=(C-j)/26,v=67108863>>>26-j<<26-j;if(j!==0){var x=0;for(T=0;T<this.length;T++){var w=this.words[T]&v,N=(0|this.words[T])-w<<j;this.words[T]=N|x,x=w>>>26-j}x&&(this.words[T]=x,this.length++)}if(b!==0){for(T=this.length-1;T>=0;T--)this.words[T+b]=this.words[T];for(T=0;T<b;T++)this.words[T]=0;this.length+=b}return this.strip()},t.prototype.ishln=function(C){return i(this.negative===0),this.iushln(C)},t.prototype.iushrn=function(C,T,j){var b;i(typeof C=="number"&&C>=0),b=T?(T-T%26)/26:0;var v=C%26,x=Math.min((C-v)/26,this.length),w=67108863^67108863>>>v<<v,N=j;if(b-=x,b=Math.max(0,b),N){for(var P=0;P<x;P++)N.words[P]=this.words[P];N.length=x}if(x!==0)if(this.length>x)for(this.length-=x,P=0;P<this.length;P++)this.words[P]=this.words[P+x];else this.words[0]=0,this.length=1;var D=0;for(P=this.length-1;P>=0&&(D!==0||P>=b);P--){var V=0|this.words[P];this.words[P]=D<<26-v|V>>>v,D=V&w}return N&&D!==0&&(N.words[N.length++]=D),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(C,T,j){return i(this.negative===0),this.iushrn(C,T,j)},t.prototype.shln=function(C){return this.clone().ishln(C)},t.prototype.ushln=function(C){return this.clone().iushln(C)},t.prototype.shrn=function(C){return this.clone().ishrn(C)},t.prototype.ushrn=function(C){return this.clone().iushrn(C)},t.prototype.testn=function(C){i(typeof C=="number"&&C>=0);var T=C%26,j=(C-T)/26,b=1<<T;return!(this.length<=j)&&!!(this.words[j]&b)},t.prototype.imaskn=function(C){i(typeof C=="number"&&C>=0);var T=C%26,j=(C-T)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(T!==0&&j++,this.length=Math.min(j,this.length),T!==0){var b=67108863^67108863>>>T<<T;this.words[this.length-1]&=b}return this.strip()},t.prototype.maskn=function(C){return this.clone().imaskn(C)},t.prototype.iaddn=function(C){return i(typeof C=="number"),i(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(0|this.words[0])<C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},t.prototype._iaddn=function(C){this.words[0]+=C;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},t.prototype.isubn=function(C){if(i(typeof C=="number"),i(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this.strip()},t.prototype.addn=function(C){return this.clone().iaddn(C)},t.prototype.subn=function(C){return this.clone().isubn(C)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(C,T,j){var b,v,x=C.length+j;this._expand(x);var w=0;for(b=0;b<C.length;b++){v=(0|this.words[b+j])+w;var N=(0|C.words[b])*T;w=((v-=67108863&N)>>26)-(N/67108864|0),this.words[b+j]=67108863&v}for(;b<this.length-j;b++)w=(v=(0|this.words[b+j])+w)>>26,this.words[b+j]=67108863&v;if(w===0)return this.strip();for(i(w===-1),w=0,b=0;b<this.length;b++)w=(v=-(0|this.words[b])+w)>>26,this.words[b]=67108863&v;return this.negative=1,this.strip()},t.prototype._wordDiv=function(C,T){var j=(this.length,C.length),b=this.clone(),v=C,x=0|v.words[v.length-1];(j=26-this._countBits(x))!==0&&(v=v.ushln(j),b.iushln(j),x=0|v.words[v.length-1]);var w,N=b.length-v.length;if(T!=="mod"){(w=new t(null)).length=N+1,w.words=new Array(w.length);for(var P=0;P<w.length;P++)w.words[P]=0}var D=b.clone()._ishlnsubmul(v,1,N);D.negative===0&&(b=D,w&&(w.words[N]=1));for(var V=N-1;V>=0;V--){var q=67108864*(0|b.words[v.length+V])+(0|b.words[v.length+V-1]);for(q=Math.min(q/x|0,67108863),b._ishlnsubmul(v,q,V);b.negative!==0;)q--,b.negative=0,b._ishlnsubmul(v,1,V),b.isZero()||(b.negative^=1);w&&(w.words[V]=q)}return w&&w.strip(),b.strip(),T!=="div"&&j!==0&&b.iushrn(j),{div:w||null,mod:b}},t.prototype.divmod=function(C,T,j){return i(!C.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:this.negative!==0&&C.negative===0?(x=this.neg().divmod(C,T),T!=="mod"&&(b=x.div.neg()),T!=="div"&&(v=x.mod.neg(),j&&v.negative!==0&&v.iadd(C)),{div:b,mod:v}):this.negative===0&&C.negative!==0?(x=this.divmod(C.neg(),T),T!=="mod"&&(b=x.div.neg()),{div:b,mod:x.mod}):(this.negative&C.negative)!=0?(x=this.neg().divmod(C.neg(),T),T!=="div"&&(v=x.mod.neg(),j&&v.negative!==0&&v.isub(C)),{div:x.div,mod:v}):C.length>this.length||this.cmp(C)<0?{div:new t(0),mod:this}:C.length===1?T==="div"?{div:this.divn(C.words[0]),mod:null}:T==="mod"?{div:null,mod:new t(this.modn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new t(this.modn(C.words[0]))}:this._wordDiv(C,T);var b,v,x},t.prototype.div=function(C){return this.divmod(C,"div",!1).div},t.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},t.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},t.prototype.divRound=function(C){var T=this.divmod(C);if(T.mod.isZero())return T.div;var j=T.div.negative!==0?T.mod.isub(C):T.mod,b=C.ushrn(1),v=C.andln(1),x=j.cmp(b);return x<0||v===1&&x===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},t.prototype.modn=function(C){i(C<=67108863);for(var T=(1<<26)%C,j=0,b=this.length-1;b>=0;b--)j=(T*j+(0|this.words[b]))%C;return j},t.prototype.idivn=function(C){i(C<=67108863);for(var T=0,j=this.length-1;j>=0;j--){var b=(0|this.words[j])+67108864*T;this.words[j]=b/C|0,T=b%C}return this.strip()},t.prototype.divn=function(C){return this.clone().idivn(C)},t.prototype.egcd=function(C){i(C.negative===0),i(!C.isZero());var T=this,j=C.clone();T=T.negative!==0?T.umod(C):T.clone();for(var b=new t(1),v=new t(0),x=new t(0),w=new t(1),N=0;T.isEven()&&j.isEven();)T.iushrn(1),j.iushrn(1),++N;for(var P=j.clone(),D=T.clone();!T.isZero();){for(var V=0,q=1;(T.words[0]&q)==0&&V<26;++V,q<<=1);if(V>0)for(T.iushrn(V);V-- >0;)(b.isOdd()||v.isOdd())&&(b.iadd(P),v.isub(D)),b.iushrn(1),v.iushrn(1);for(var G=0,F=1;(j.words[0]&F)==0&&G<26;++G,F<<=1);if(G>0)for(j.iushrn(G);G-- >0;)(x.isOdd()||w.isOdd())&&(x.iadd(P),w.isub(D)),x.iushrn(1),w.iushrn(1);T.cmp(j)>=0?(T.isub(j),b.isub(x),v.isub(w)):(j.isub(T),x.isub(b),w.isub(v))}return{a:x,b:w,gcd:j.iushln(N)}},t.prototype._invmp=function(C){i(C.negative===0),i(!C.isZero());var T=this,j=C.clone();T=T.negative!==0?T.umod(C):T.clone();for(var b,v=new t(1),x=new t(0),w=j.clone();T.cmpn(1)>0&&j.cmpn(1)>0;){for(var N=0,P=1;(T.words[0]&P)==0&&N<26;++N,P<<=1);if(N>0)for(T.iushrn(N);N-- >0;)v.isOdd()&&v.iadd(w),v.iushrn(1);for(var D=0,V=1;(j.words[0]&V)==0&&D<26;++D,V<<=1);if(D>0)for(j.iushrn(D);D-- >0;)x.isOdd()&&x.iadd(w),x.iushrn(1);T.cmp(j)>=0?(T.isub(j),v.isub(x)):(j.isub(T),x.isub(v))}return(b=T.cmpn(1)===0?v:x).cmpn(0)<0&&b.iadd(C),b},t.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var T=this.clone(),j=C.clone();T.negative=0,j.negative=0;for(var b=0;T.isEven()&&j.isEven();b++)T.iushrn(1),j.iushrn(1);for(;;){for(;T.isEven();)T.iushrn(1);for(;j.isEven();)j.iushrn(1);var v=T.cmp(j);if(v<0){var x=T;T=j,j=x}else if(v===0||j.cmpn(1)===0)break;T.isub(j)}return j.iushln(b)},t.prototype.invm=function(C){return this.egcd(C).a.umod(C)},t.prototype.isEven=function(){return(1&this.words[0])==0},t.prototype.isOdd=function(){return(1&this.words[0])==1},t.prototype.andln=function(C){return this.words[0]&C},t.prototype.bincn=function(C){i(typeof C=="number");var T=C%26,j=(C-T)/26,b=1<<T;if(this.length<=j)return this._expand(j+1),this.words[j]|=b,this;for(var v=b,x=j;v!==0&&x<this.length;x++){var w=0|this.words[x];v=(w+=v)>>>26,w&=67108863,this.words[x]=w}return v!==0&&(this.words[x]=v,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(C){var T,j=C<0;if(this.negative!==0&&!j)return-1;if(this.negative===0&&j)return 1;if(this.strip(),this.length>1)T=1;else{j&&(C=-C),i(C<=67108863,"Number is too big");var b=0|this.words[0];T=b===C?0:b<C?-1:1}return this.negative!==0?0|-T:T},t.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var T=this.ucmp(C);return this.negative!==0?0|-T:T},t.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var T=0,j=this.length-1;j>=0;j--){var b=0|this.words[j],v=0|C.words[j];if(b!==v){b<v?T=-1:b>v&&(T=1);break}}return T},t.prototype.gtn=function(C){return this.cmpn(C)===1},t.prototype.gt=function(C){return this.cmp(C)===1},t.prototype.gten=function(C){return this.cmpn(C)>=0},t.prototype.gte=function(C){return this.cmp(C)>=0},t.prototype.ltn=function(C){return this.cmpn(C)===-1},t.prototype.lt=function(C){return this.cmp(C)===-1},t.prototype.lten=function(C){return this.cmpn(C)<=0},t.prototype.lte=function(C){return this.cmp(C)<=0},t.prototype.eqn=function(C){return this.cmpn(C)===0},t.prototype.eq=function(C){return this.cmp(C)===0},t.red=function(C){return new H(C)},t.prototype.toRed=function(C){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},t.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(C){return this.red=C,this},t.prototype.forceRed=function(C){return i(!this.red,"Already a number in reduction context"),this._forceRed(C)},t.prototype.redAdd=function(C){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},t.prototype.redIAdd=function(C){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},t.prototype.redSub=function(C){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},t.prototype.redISub=function(C){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},t.prototype.redShl=function(C){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},t.prototype.redMul=function(C){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},t.prototype.redIMul=function(C){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},t.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(C){return i(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var A={k256:null,p224:null,p192:null,p25519:null};function L(C,T){this.name=C,this.p=new t(T,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function z(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function R(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function H(C){if(typeof C=="string"){var T=t._prime(C);this.m=T.p,this.prime=T}else i(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function $(C){H.call(this,C),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}L.prototype._tmp=function(){var C=new t(null);return C.words=new Array(Math.ceil(this.n/13)),C},L.prototype.ireduce=function(C){var T,j=C;do this.split(j,this.tmp),T=(j=(j=this.imulK(j)).iadd(this.tmp)).bitLength();while(T>this.n);var b=T<this.n?-1:j.ucmp(this.p);return b===0?(j.words[0]=0,j.length=1):b>0?j.isub(this.p):j.strip!==void 0?j.strip():j._strip(),j},L.prototype.split=function(C,T){C.iushrn(this.n,0,T)},L.prototype.imulK=function(C){return C.imul(this.k)},r(z,L),z.prototype.split=function(C,T){for(var j=Math.min(C.length,9),b=0;b<j;b++)T.words[b]=C.words[b];if(T.length=j,C.length<=9)return C.words[0]=0,void(C.length=1);var v=C.words[9];for(T.words[T.length++]=4194303&v,b=10;b<C.length;b++){var x=0|C.words[b];C.words[b-10]=(4194303&x)<<4|v>>>22,v=x}v>>>=22,C.words[b-10]=v,v===0&&C.length>10?C.length-=10:C.length-=9},z.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var T=0,j=0;j<C.length;j++){var b=0|C.words[j];T+=977*b,C.words[j]=67108863&T,T=64*b+(T/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C},r(R,L),r(I,L),r(B,L),B.prototype.imulK=function(C){for(var T=0,j=0;j<C.length;j++){var b=19*(0|C.words[j])+T,v=67108863&b;b>>>=26,C.words[j]=v,T=b}return T!==0&&(C.words[C.length++]=T),C},t._prime=function(C){if(A[C])return A[C];var T;if(C==="k256")T=new z;else if(C==="p224")T=new R;else if(C==="p192")T=new I;else{if(C!=="p25519")throw new Error("Unknown prime "+C);T=new B}return A[C]=T,T},H.prototype._verify1=function(C){i(C.negative===0,"red works only with positives"),i(C.red,"red works only with red numbers")},H.prototype._verify2=function(C,T){i((C.negative|T.negative)==0,"red works only with positives"),i(C.red&&C.red===T.red,"red works only with red numbers")},H.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):C.umod(this.m)._forceRed(this)},H.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},H.prototype.add=function(C,T){this._verify2(C,T);var j=C.add(T);return j.cmp(this.m)>=0&&j.isub(this.m),j._forceRed(this)},H.prototype.iadd=function(C,T){this._verify2(C,T);var j=C.iadd(T);return j.cmp(this.m)>=0&&j.isub(this.m),j},H.prototype.sub=function(C,T){this._verify2(C,T);var j=C.sub(T);return j.cmpn(0)<0&&j.iadd(this.m),j._forceRed(this)},H.prototype.isub=function(C,T){this._verify2(C,T);var j=C.isub(T);return j.cmpn(0)<0&&j.iadd(this.m),j},H.prototype.shl=function(C,T){return this._verify1(C),this.imod(C.ushln(T))},H.prototype.imul=function(C,T){return this._verify2(C,T),this.imod(C.imul(T))},H.prototype.mul=function(C,T){return this._verify2(C,T),this.imod(C.mul(T))},H.prototype.isqr=function(C){return this.imul(C,C.clone())},H.prototype.sqr=function(C){return this.mul(C,C)},H.prototype.sqrt=function(C){if(C.isZero())return C.clone();var T=this.m.andln(3);if(i(T%2==1),T===3){var j=this.m.add(new t(1)).iushrn(2);return this.pow(C,j)}for(var b=this.m.subn(1),v=0;!b.isZero()&&b.andln(1)===0;)v++,b.iushrn(1);i(!b.isZero());var x=new t(1).toRed(this),w=x.redNeg(),N=this.m.subn(1).iushrn(1),P=this.m.bitLength();for(P=new t(2*P*P).toRed(this);this.pow(P,N).cmp(w)!==0;)P.redIAdd(w);for(var D=this.pow(P,b),V=this.pow(C,b.addn(1).iushrn(1)),q=this.pow(C,b),G=v;q.cmp(x)!==0;){for(var F=q,X=0;F.cmp(x)!==0;X++)F=F.redSqr();i(X<G);var O=this.pow(D,new t(1).iushln(G-X-1));V=V.redMul(O),D=O.redSqr(),q=q.redMul(D),G=X}return V},H.prototype.invm=function(C){var T=C._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},H.prototype.pow=function(C,T){if(T.isZero())return new t(1).toRed(this);if(T.cmpn(1)===0)return C.clone();var j=new Array(16);j[0]=new t(1).toRed(this),j[1]=C;for(var b=2;b<j.length;b++)j[b]=this.mul(j[b-1],C);var v=j[0],x=0,w=0,N=T.bitLength()%26;for(N===0&&(N=26),b=T.length-1;b>=0;b--){for(var P=T.words[b],D=N-1;D>=0;D--){var V=P>>D&1;v!==j[0]&&(v=this.sqr(v)),V!==0||x!==0?(x<<=1,x|=V,(++w===4||b===0&&D===0)&&(v=this.mul(v,j[x]),w=0,x=0)):w=0}N=26}return v},H.prototype.convertTo=function(C){var T=C.umod(this.m);return T===C?T.clone():T},H.prototype.convertFrom=function(C){var T=C.clone();return T.red=null,T},t.mont=function(C){return new $(C)},r($,H),$.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},$.prototype.convertFrom=function(C){var T=this.imod(C.mul(this.rinv));return T.red=null,T},$.prototype.imul=function(C,T){if(C.isZero()||T.isZero())return C.words[0]=0,C.length=1,C;var j=C.imul(T),b=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=j.isub(b).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},$.prototype.mul=function(C,T){if(C.isZero()||T.isZero())return new t(0)._forceRed(this);var j=C.mul(T),b=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=j.isub(b).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},$.prototype.invm=function(C){return this.imod(C._invmp(this.m).mul(this.r2))._forceRed(this)}})(h===void 0||h)},{buffer:188}],185:[function(e,h,p){p.byteLength=function(o){var d=l(o),f=d[0],u=d[1];return 3*(f+u)/4-u},p.toByteArray=function(o){var d,f,u=l(o),g=u[0],m=u[1],k=new i(function(L,z,R){return 3*(z+R)/4-R}(0,g,m)),E=0,A=m>0?g-4:g;for(f=0;f<A;f+=4)d=s[o.charCodeAt(f)]<<18|s[o.charCodeAt(f+1)]<<12|s[o.charCodeAt(f+2)]<<6|s[o.charCodeAt(f+3)],k[E++]=d>>16&255,k[E++]=d>>8&255,k[E++]=255&d;return m===2&&(d=s[o.charCodeAt(f)]<<2|s[o.charCodeAt(f+1)]>>4,k[E++]=255&d),m===1&&(d=s[o.charCodeAt(f)]<<10|s[o.charCodeAt(f+1)]<<4|s[o.charCodeAt(f+2)]>>2,k[E++]=d>>8&255,k[E++]=255&d),k},p.fromByteArray=function(o){for(var d,f=o.length,u=f%3,g=[],m=0,k=f-u;m<k;m+=16383)g.push(a(o,m,m+16383>k?k:m+16383));return u===1?(d=o[f-1],g.push(c[d>>2]+c[d<<4&63]+"==")):u===2&&(d=(o[f-2]<<8)+o[f-1],g.push(c[d>>10]+c[d>>4&63]+c[d<<2&63]+"=")),g.join("")};for(var c=[],s=[],i=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=r.length;t<n;++t)c[t]=r[t],s[r.charCodeAt(t)]=t;function l(o){var d=o.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=o.indexOf("=");return f===-1&&(f=d),[f,f===d?0:4-f%4]}function a(o,d,f){for(var u,g,m=[],k=d;k<f;k+=3)u=(o[k]<<16&16711680)+(o[k+1]<<8&65280)+(255&o[k+2]),m.push(c[(g=u)>>18&63]+c[g>>12&63]+c[g>>6&63]+c[63&g]);return m.join("")}s[45]=62,s[95]=63},{}],186:[function(e,h,p){(function(c,s){function i(j,b){if(!j)throw new Error(b||"Assertion failed")}function r(j,b){j.super_=b;var v=function(){};v.prototype=b.prototype,j.prototype=new v,j.prototype.constructor=j}function t(j,b,v){if(t.isBN(j))return j;this.negative=0,this.words=null,this.length=0,this.red=null,j!==null&&(b!=="le"&&b!=="be"||(v=b,b=10),this._init(j||0,b||10,v||"be"))}var n;typeof c=="object"?c.exports=t:(void 0).BN=t,t.BN=t,t.wordSize=26;try{n=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function l(j,b){var v=j.charCodeAt(b);return v>=48&&v<=57?v-48:v>=65&&v<=70?v-55:v>=97&&v<=102?v-87:void i(!1,"Invalid character in "+j)}function a(j,b,v){var x=l(j,v);return v-1>=b&&(x|=l(j,v-1)<<4),x}function o(j,b,v,x){for(var w=0,N=0,P=Math.min(j.length,v),D=b;D<P;D++){var V=j.charCodeAt(D)-48;w*=x,N=V>=49?V-49+10:V>=17?V-17+10:V,i(V>=0&&N<x,"Invalid character"),w+=N}return w}function d(j,b){j.words=b.words,j.length=b.length,j.negative=b.negative,j.red=b.red}if(t.isBN=function(j){return j instanceof t||j!==null&&typeof j=="object"&&j.constructor.wordSize===t.wordSize&&Array.isArray(j.words)},t.max=function(j,b){return j.cmp(b)>0?j:b},t.min=function(j,b){return j.cmp(b)<0?j:b},t.prototype._init=function(j,b,v){if(typeof j=="number")return this._initNumber(j,b,v);if(typeof j=="object")return this._initArray(j,b,v);b==="hex"&&(b=16),i(b===(0|b)&&b>=2&&b<=36);var x=0;(j=j.toString().replace(/\s+/g,""))[0]==="-"&&(x++,this.negative=1),x<j.length&&(b===16?this._parseHex(j,x,v):(this._parseBase(j,b,x),v==="le"&&this._initArray(this.toArray(),b,v)))},t.prototype._initNumber=function(j,b,v){j<0&&(this.negative=1,j=-j),j<67108864?(this.words=[67108863&j],this.length=1):j<4503599627370496?(this.words=[67108863&j,j/67108864&67108863],this.length=2):(i(j<9007199254740992),this.words=[67108863&j,j/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),b,v)},t.prototype._initArray=function(j,b,v){if(i(typeof j.length=="number"),j.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(j.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var w,N,P=0;if(v==="be")for(x=j.length-1,w=0;x>=0;x-=3)N=j[x]|j[x-1]<<8|j[x-2]<<16,this.words[w]|=N<<P&67108863,this.words[w+1]=N>>>26-P&67108863,(P+=24)>=26&&(P-=26,w++);else if(v==="le")for(x=0,w=0;x<j.length;x+=3)N=j[x]|j[x+1]<<8|j[x+2]<<16,this.words[w]|=N<<P&67108863,this.words[w+1]=N>>>26-P&67108863,(P+=24)>=26&&(P-=26,w++);return this._strip()},t.prototype._parseHex=function(j,b,v){this.length=Math.ceil((j.length-b)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var w,N=0,P=0;if(v==="be")for(x=j.length-1;x>=b;x-=2)w=a(j,b,x)<<N,this.words[P]|=67108863&w,N>=18?(N-=18,P+=1,this.words[P]|=w>>>26):N+=8;else for(x=(j.length-b)%2==0?b+1:b;x<j.length;x+=2)w=a(j,b,x)<<N,this.words[P]|=67108863&w,N>=18?(N-=18,P+=1,this.words[P]|=w>>>26):N+=8;this._strip()},t.prototype._parseBase=function(j,b,v){this.words=[0],this.length=1;for(var x=0,w=1;w<=67108863;w*=b)x++;x--,w=w/b|0;for(var N=j.length-v,P=N%x,D=Math.min(N,N-P)+v,V=0,q=v;q<D;q+=x)V=o(j,q,q+x,b),this.imuln(w),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(P!==0){var G=1;for(V=o(j,q,j.length,b),q=0;q<P;q++)G*=b;this.imuln(G),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this._strip()},t.prototype.copy=function(j){j.words=new Array(this.length);for(var b=0;b<this.length;b++)j.words[b]=this.words[b];j.length=this.length,j.negative=this.negative,j.red=this.red},t.prototype._move=function(j){d(j,this)},t.prototype.clone=function(){var j=new t(null);return this.copy(j),j},t.prototype._expand=function(j){for(;this.length<j;)this.words[this.length++]=0;return this},t.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{t.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{t.prototype.inspect=f}else t.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(j,b){var v;if(b=0|b||1,(j=j||10)===16||j==="hex"){v="";for(var x=0,w=0,N=0;N<this.length;N++){var P=this.words[N],D=(16777215&(P<<x|w)).toString(16);w=P>>>24-x&16777215,(x+=2)>=26&&(x-=26,N--),v=w!==0||N!==this.length-1?u[6-D.length]+D+v:D+v}for(w!==0&&(v=w.toString(16)+v);v.length%b!=0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(j===(0|j)&&j>=2&&j<=36){var V=g[j],q=m[j];v="";var G=this.clone();for(G.negative=0;!G.isZero();){var F=G.modrn(q).toString(j);v=(G=G.idivn(q)).isZero()?F+v:u[V-F.length]+F+v}for(this.isZero()&&(v="0"+v);v.length%b!=0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}i(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var j=this.words[0];return this.length===2?j+=67108864*this.words[1]:this.length===3&&this.words[2]===1?j+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-j:j},t.prototype.toJSON=function(){return this.toString(16,2)},n&&(t.prototype.toBuffer=function(j,b){return this.toArrayLike(n,j,b)}),t.prototype.toArray=function(j,b){return this.toArrayLike(Array,j,b)};function k(j,b,v){v.negative=b.negative^j.negative;var x=j.length+b.length|0;v.length=x,x=x-1|0;var w=0|j.words[0],N=0|b.words[0],P=w*N,D=67108863&P,V=P/67108864|0;v.words[0]=D;for(var q=1;q<x;q++){for(var G=V>>>26,F=67108863&V,X=Math.min(q,b.length-1),O=Math.max(0,q-j.length+1);O<=X;O++){var M=q-O|0;G+=(P=(w=0|j.words[M])*(N=0|b.words[O])+F)/67108864|0,F=67108863&P}v.words[q]=0|F,V=0|G}return V!==0?v.words[q]=0|V:v.length--,v._strip()}t.prototype.toArrayLike=function(j,b,v){this._strip();var x=this.byteLength(),w=v||Math.max(1,x);i(x<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0");var N=function(P,D){return P.allocUnsafe?P.allocUnsafe(D):new P(D)}(j,w);return this["_toArrayLike"+(b==="le"?"LE":"BE")](N,x),N},t.prototype._toArrayLikeLE=function(j,b){for(var v=0,x=0,w=0,N=0;w<this.length;w++){var P=this.words[w]<<N|x;j[v++]=255&P,v<j.length&&(j[v++]=P>>8&255),v<j.length&&(j[v++]=P>>16&255),N===6?(v<j.length&&(j[v++]=P>>24&255),x=0,N=0):(x=P>>>24,N+=2)}if(v<j.length)for(j[v++]=x;v<j.length;)j[v++]=0},t.prototype._toArrayLikeBE=function(j,b){for(var v=j.length-1,x=0,w=0,N=0;w<this.length;w++){var P=this.words[w]<<N|x;j[v--]=255&P,v>=0&&(j[v--]=P>>8&255),v>=0&&(j[v--]=P>>16&255),N===6?(v>=0&&(j[v--]=P>>24&255),x=0,N=0):(x=P>>>24,N+=2)}if(v>=0)for(j[v--]=x;v>=0;)j[v--]=0},Math.clz32?t.prototype._countBits=function(j){return 32-Math.clz32(j)}:t.prototype._countBits=function(j){var b=j,v=0;return b>=4096&&(v+=13,b>>>=13),b>=64&&(v+=7,b>>>=7),b>=8&&(v+=4,b>>>=4),b>=2&&(v+=2,b>>>=2),v+b},t.prototype._zeroBits=function(j){if(j===0)return 26;var b=j,v=0;return(8191&b)==0&&(v+=13,b>>>=13),(127&b)==0&&(v+=7,b>>>=7),(15&b)==0&&(v+=4,b>>>=4),(3&b)==0&&(v+=2,b>>>=2),(1&b)==0&&v++,v},t.prototype.bitLength=function(){var j=this.words[this.length-1],b=this._countBits(j);return 26*(this.length-1)+b},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var j=0,b=0;b<this.length;b++){var v=this._zeroBits(this.words[b]);if(j+=v,v!==26)break}return j},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(j){return this.negative!==0?this.abs().inotn(j).iaddn(1):this.clone()},t.prototype.fromTwos=function(j){return this.testn(j-1)?this.notn(j).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(j){for(;this.length<j.length;)this.words[this.length++]=0;for(var b=0;b<j.length;b++)this.words[b]=this.words[b]|j.words[b];return this._strip()},t.prototype.ior=function(j){return i((this.negative|j.negative)==0),this.iuor(j)},t.prototype.or=function(j){return this.length>j.length?this.clone().ior(j):j.clone().ior(this)},t.prototype.uor=function(j){return this.length>j.length?this.clone().iuor(j):j.clone().iuor(this)},t.prototype.iuand=function(j){var b;b=this.length>j.length?j:this;for(var v=0;v<b.length;v++)this.words[v]=this.words[v]&j.words[v];return this.length=b.length,this._strip()},t.prototype.iand=function(j){return i((this.negative|j.negative)==0),this.iuand(j)},t.prototype.and=function(j){return this.length>j.length?this.clone().iand(j):j.clone().iand(this)},t.prototype.uand=function(j){return this.length>j.length?this.clone().iuand(j):j.clone().iuand(this)},t.prototype.iuxor=function(j){var b,v;this.length>j.length?(b=this,v=j):(b=j,v=this);for(var x=0;x<v.length;x++)this.words[x]=b.words[x]^v.words[x];if(this!==b)for(;x<b.length;x++)this.words[x]=b.words[x];return this.length=b.length,this._strip()},t.prototype.ixor=function(j){return i((this.negative|j.negative)==0),this.iuxor(j)},t.prototype.xor=function(j){return this.length>j.length?this.clone().ixor(j):j.clone().ixor(this)},t.prototype.uxor=function(j){return this.length>j.length?this.clone().iuxor(j):j.clone().iuxor(this)},t.prototype.inotn=function(j){i(typeof j=="number"&&j>=0);var b=0|Math.ceil(j/26),v=j%26;this._expand(b),v>0&&b--;for(var x=0;x<b;x++)this.words[x]=67108863&~this.words[x];return v>0&&(this.words[x]=~this.words[x]&67108863>>26-v),this._strip()},t.prototype.notn=function(j){return this.clone().inotn(j)},t.prototype.setn=function(j,b){i(typeof j=="number"&&j>=0);var v=j/26|0,x=j%26;return this._expand(v+1),this.words[v]=b?this.words[v]|1<<x:this.words[v]&~(1<<x),this._strip()},t.prototype.iadd=function(j){var b,v,x;if(this.negative!==0&&j.negative===0)return this.negative=0,b=this.isub(j),this.negative^=1,this._normSign();if(this.negative===0&&j.negative!==0)return j.negative=0,b=this.isub(j),j.negative=1,b._normSign();this.length>j.length?(v=this,x=j):(v=j,x=this);for(var w=0,N=0;N<x.length;N++)b=(0|v.words[N])+(0|x.words[N])+w,this.words[N]=67108863&b,w=b>>>26;for(;w!==0&&N<v.length;N++)b=(0|v.words[N])+w,this.words[N]=67108863&b,w=b>>>26;if(this.length=v.length,w!==0)this.words[this.length]=w,this.length++;else if(v!==this)for(;N<v.length;N++)this.words[N]=v.words[N];return this},t.prototype.add=function(j){var b;return j.negative!==0&&this.negative===0?(j.negative=0,b=this.sub(j),j.negative^=1,b):j.negative===0&&this.negative!==0?(this.negative=0,b=j.sub(this),this.negative=1,b):this.length>j.length?this.clone().iadd(j):j.clone().iadd(this)},t.prototype.isub=function(j){if(j.negative!==0){j.negative=0;var b=this.iadd(j);return j.negative=1,b._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(j),this.negative=1,this._normSign();var v,x,w=this.cmp(j);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;w>0?(v=this,x=j):(v=j,x=this);for(var N=0,P=0;P<x.length;P++)N=(b=(0|v.words[P])-(0|x.words[P])+N)>>26,this.words[P]=67108863&b;for(;N!==0&&P<v.length;P++)N=(b=(0|v.words[P])+N)>>26,this.words[P]=67108863&b;if(N===0&&P<v.length&&v!==this)for(;P<v.length;P++)this.words[P]=v.words[P];return this.length=Math.max(this.length,P),v!==this&&(this.negative=1),this._strip()},t.prototype.sub=function(j){return this.clone().isub(j)};var E=function(j,b,v){var x,w,N,P=j.words,D=b.words,V=v.words,q=0,G=0|P[0],F=8191&G,X=G>>>13,O=0|P[1],M=8191&O,U=O>>>13,K=0|P[2],Q=8191&K,Y=K>>>13,J=0|P[3],ae=8191&J,ie=J>>>13,Z=0|P[4],ne=8191&Z,re=Z>>>13,ue=0|P[5],ce=8191&ue,te=ue>>>13,de=0|P[6],le=8191&de,ve=de>>>13,we=0|P[7],Se=8191&we,_e=we>>>13,Pe=0|P[8],Fe=8191&Pe,Oe=Pe>>>13,Me=0|P[9],Ee=8191&Me,je=Me>>>13,Ie=0|D[0],$e=8191&Ie,De=Ie>>>13,Ze=0|D[1],vt=8191&Ze,Ve=Ze>>>13,xt=0|D[2],ht=8191&xt,nt=xt>>>13,St=0|D[3],pt=8191&St,qe=St>>>13,gt=0|D[4],bt=8191&gt,Ye=gt>>>13,mt=0|D[5],At=8191&mt,tt=mt>>>13,oe=0|D[6],he=8191&oe,be=oe>>>13,Ne=0|D[7],ze=8191&Ne,Ae=Ne>>>13,Je=0|D[8],Ke=8191&Je,Be=Je>>>13,Qe=0|D[9],rt=8191&Qe,ct=Qe>>>13;v.negative=j.negative^b.negative,v.length=19;var Dt=(q+(x=Math.imul(F,$e))|0)+((8191&(w=(w=Math.imul(F,De))+Math.imul(X,$e)|0))<<13)|0;q=((N=Math.imul(X,De))+(w>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,x=Math.imul(M,$e),w=(w=Math.imul(M,De))+Math.imul(U,$e)|0,N=Math.imul(U,De);var Ot=(q+(x=x+Math.imul(F,vt)|0)|0)+((8191&(w=(w=w+Math.imul(F,Ve)|0)+Math.imul(X,vt)|0))<<13)|0;q=((N=N+Math.imul(X,Ve)|0)+(w>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,x=Math.imul(Q,$e),w=(w=Math.imul(Q,De))+Math.imul(Y,$e)|0,N=Math.imul(Y,De),x=x+Math.imul(M,vt)|0,w=(w=w+Math.imul(M,Ve)|0)+Math.imul(U,vt)|0,N=N+Math.imul(U,Ve)|0;var jt=(q+(x=x+Math.imul(F,ht)|0)|0)+((8191&(w=(w=w+Math.imul(F,nt)|0)+Math.imul(X,ht)|0))<<13)|0;q=((N=N+Math.imul(X,nt)|0)+(w>>>13)|0)+(jt>>>26)|0,jt&=67108863,x=Math.imul(ae,$e),w=(w=Math.imul(ae,De))+Math.imul(ie,$e)|0,N=Math.imul(ie,De),x=x+Math.imul(Q,vt)|0,w=(w=w+Math.imul(Q,Ve)|0)+Math.imul(Y,vt)|0,N=N+Math.imul(Y,Ve)|0,x=x+Math.imul(M,ht)|0,w=(w=w+Math.imul(M,nt)|0)+Math.imul(U,ht)|0,N=N+Math.imul(U,nt)|0;var Lt=(q+(x=x+Math.imul(F,pt)|0)|0)+((8191&(w=(w=w+Math.imul(F,qe)|0)+Math.imul(X,pt)|0))<<13)|0;q=((N=N+Math.imul(X,qe)|0)+(w>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,x=Math.imul(ne,$e),w=(w=Math.imul(ne,De))+Math.imul(re,$e)|0,N=Math.imul(re,De),x=x+Math.imul(ae,vt)|0,w=(w=w+Math.imul(ae,Ve)|0)+Math.imul(ie,vt)|0,N=N+Math.imul(ie,Ve)|0,x=x+Math.imul(Q,ht)|0,w=(w=w+Math.imul(Q,nt)|0)+Math.imul(Y,ht)|0,N=N+Math.imul(Y,nt)|0,x=x+Math.imul(M,pt)|0,w=(w=w+Math.imul(M,qe)|0)+Math.imul(U,pt)|0,N=N+Math.imul(U,qe)|0;var Ut=(q+(x=x+Math.imul(F,bt)|0)|0)+((8191&(w=(w=w+Math.imul(F,Ye)|0)+Math.imul(X,bt)|0))<<13)|0;q=((N=N+Math.imul(X,Ye)|0)+(w>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,x=Math.imul(ce,$e),w=(w=Math.imul(ce,De))+Math.imul(te,$e)|0,N=Math.imul(te,De),x=x+Math.imul(ne,vt)|0,w=(w=w+Math.imul(ne,Ve)|0)+Math.imul(re,vt)|0,N=N+Math.imul(re,Ve)|0,x=x+Math.imul(ae,ht)|0,w=(w=w+Math.imul(ae,nt)|0)+Math.imul(ie,ht)|0,N=N+Math.imul(ie,nt)|0,x=x+Math.imul(Q,pt)|0,w=(w=w+Math.imul(Q,qe)|0)+Math.imul(Y,pt)|0,N=N+Math.imul(Y,qe)|0,x=x+Math.imul(M,bt)|0,w=(w=w+Math.imul(M,Ye)|0)+Math.imul(U,bt)|0,N=N+Math.imul(U,Ye)|0;var se=(q+(x=x+Math.imul(F,At)|0)|0)+((8191&(w=(w=w+Math.imul(F,tt)|0)+Math.imul(X,At)|0))<<13)|0;q=((N=N+Math.imul(X,tt)|0)+(w>>>13)|0)+(se>>>26)|0,se&=67108863,x=Math.imul(le,$e),w=(w=Math.imul(le,De))+Math.imul(ve,$e)|0,N=Math.imul(ve,De),x=x+Math.imul(ce,vt)|0,w=(w=w+Math.imul(ce,Ve)|0)+Math.imul(te,vt)|0,N=N+Math.imul(te,Ve)|0,x=x+Math.imul(ne,ht)|0,w=(w=w+Math.imul(ne,nt)|0)+Math.imul(re,ht)|0,N=N+Math.imul(re,nt)|0,x=x+Math.imul(ae,pt)|0,w=(w=w+Math.imul(ae,qe)|0)+Math.imul(ie,pt)|0,N=N+Math.imul(ie,qe)|0,x=x+Math.imul(Q,bt)|0,w=(w=w+Math.imul(Q,Ye)|0)+Math.imul(Y,bt)|0,N=N+Math.imul(Y,Ye)|0,x=x+Math.imul(M,At)|0,w=(w=w+Math.imul(M,tt)|0)+Math.imul(U,At)|0,N=N+Math.imul(U,tt)|0;var pe=(q+(x=x+Math.imul(F,he)|0)|0)+((8191&(w=(w=w+Math.imul(F,be)|0)+Math.imul(X,he)|0))<<13)|0;q=((N=N+Math.imul(X,be)|0)+(w>>>13)|0)+(pe>>>26)|0,pe&=67108863,x=Math.imul(Se,$e),w=(w=Math.imul(Se,De))+Math.imul(_e,$e)|0,N=Math.imul(_e,De),x=x+Math.imul(le,vt)|0,w=(w=w+Math.imul(le,Ve)|0)+Math.imul(ve,vt)|0,N=N+Math.imul(ve,Ve)|0,x=x+Math.imul(ce,ht)|0,w=(w=w+Math.imul(ce,nt)|0)+Math.imul(te,ht)|0,N=N+Math.imul(te,nt)|0,x=x+Math.imul(ne,pt)|0,w=(w=w+Math.imul(ne,qe)|0)+Math.imul(re,pt)|0,N=N+Math.imul(re,qe)|0,x=x+Math.imul(ae,bt)|0,w=(w=w+Math.imul(ae,Ye)|0)+Math.imul(ie,bt)|0,N=N+Math.imul(ie,Ye)|0,x=x+Math.imul(Q,At)|0,w=(w=w+Math.imul(Q,tt)|0)+Math.imul(Y,At)|0,N=N+Math.imul(Y,tt)|0,x=x+Math.imul(M,he)|0,w=(w=w+Math.imul(M,be)|0)+Math.imul(U,he)|0,N=N+Math.imul(U,be)|0;var xe=(q+(x=x+Math.imul(F,ze)|0)|0)+((8191&(w=(w=w+Math.imul(F,Ae)|0)+Math.imul(X,ze)|0))<<13)|0;q=((N=N+Math.imul(X,Ae)|0)+(w>>>13)|0)+(xe>>>26)|0,xe&=67108863,x=Math.imul(Fe,$e),w=(w=Math.imul(Fe,De))+Math.imul(Oe,$e)|0,N=Math.imul(Oe,De),x=x+Math.imul(Se,vt)|0,w=(w=w+Math.imul(Se,Ve)|0)+Math.imul(_e,vt)|0,N=N+Math.imul(_e,Ve)|0,x=x+Math.imul(le,ht)|0,w=(w=w+Math.imul(le,nt)|0)+Math.imul(ve,ht)|0,N=N+Math.imul(ve,nt)|0,x=x+Math.imul(ce,pt)|0,w=(w=w+Math.imul(ce,qe)|0)+Math.imul(te,pt)|0,N=N+Math.imul(te,qe)|0,x=x+Math.imul(ne,bt)|0,w=(w=w+Math.imul(ne,Ye)|0)+Math.imul(re,bt)|0,N=N+Math.imul(re,Ye)|0,x=x+Math.imul(ae,At)|0,w=(w=w+Math.imul(ae,tt)|0)+Math.imul(ie,At)|0,N=N+Math.imul(ie,tt)|0,x=x+Math.imul(Q,he)|0,w=(w=w+Math.imul(Q,be)|0)+Math.imul(Y,he)|0,N=N+Math.imul(Y,be)|0,x=x+Math.imul(M,ze)|0,w=(w=w+Math.imul(M,Ae)|0)+Math.imul(U,ze)|0,N=N+Math.imul(U,Ae)|0;var ke=(q+(x=x+Math.imul(F,Ke)|0)|0)+((8191&(w=(w=w+Math.imul(F,Be)|0)+Math.imul(X,Ke)|0))<<13)|0;q=((N=N+Math.imul(X,Be)|0)+(w>>>13)|0)+(ke>>>26)|0,ke&=67108863,x=Math.imul(Ee,$e),w=(w=Math.imul(Ee,De))+Math.imul(je,$e)|0,N=Math.imul(je,De),x=x+Math.imul(Fe,vt)|0,w=(w=w+Math.imul(Fe,Ve)|0)+Math.imul(Oe,vt)|0,N=N+Math.imul(Oe,Ve)|0,x=x+Math.imul(Se,ht)|0,w=(w=w+Math.imul(Se,nt)|0)+Math.imul(_e,ht)|0,N=N+Math.imul(_e,nt)|0,x=x+Math.imul(le,pt)|0,w=(w=w+Math.imul(le,qe)|0)+Math.imul(ve,pt)|0,N=N+Math.imul(ve,qe)|0,x=x+Math.imul(ce,bt)|0,w=(w=w+Math.imul(ce,Ye)|0)+Math.imul(te,bt)|0,N=N+Math.imul(te,Ye)|0,x=x+Math.imul(ne,At)|0,w=(w=w+Math.imul(ne,tt)|0)+Math.imul(re,At)|0,N=N+Math.imul(re,tt)|0,x=x+Math.imul(ae,he)|0,w=(w=w+Math.imul(ae,be)|0)+Math.imul(ie,he)|0,N=N+Math.imul(ie,be)|0,x=x+Math.imul(Q,ze)|0,w=(w=w+Math.imul(Q,Ae)|0)+Math.imul(Y,ze)|0,N=N+Math.imul(Y,Ae)|0,x=x+Math.imul(M,Ke)|0,w=(w=w+Math.imul(M,Be)|0)+Math.imul(U,Ke)|0,N=N+Math.imul(U,Be)|0;var Le=(q+(x=x+Math.imul(F,rt)|0)|0)+((8191&(w=(w=w+Math.imul(F,ct)|0)+Math.imul(X,rt)|0))<<13)|0;q=((N=N+Math.imul(X,ct)|0)+(w>>>13)|0)+(Le>>>26)|0,Le&=67108863,x=Math.imul(Ee,vt),w=(w=Math.imul(Ee,Ve))+Math.imul(je,vt)|0,N=Math.imul(je,Ve),x=x+Math.imul(Fe,ht)|0,w=(w=w+Math.imul(Fe,nt)|0)+Math.imul(Oe,ht)|0,N=N+Math.imul(Oe,nt)|0,x=x+Math.imul(Se,pt)|0,w=(w=w+Math.imul(Se,qe)|0)+Math.imul(_e,pt)|0,N=N+Math.imul(_e,qe)|0,x=x+Math.imul(le,bt)|0,w=(w=w+Math.imul(le,Ye)|0)+Math.imul(ve,bt)|0,N=N+Math.imul(ve,Ye)|0,x=x+Math.imul(ce,At)|0,w=(w=w+Math.imul(ce,tt)|0)+Math.imul(te,At)|0,N=N+Math.imul(te,tt)|0,x=x+Math.imul(ne,he)|0,w=(w=w+Math.imul(ne,be)|0)+Math.imul(re,he)|0,N=N+Math.imul(re,be)|0,x=x+Math.imul(ae,ze)|0,w=(w=w+Math.imul(ae,Ae)|0)+Math.imul(ie,ze)|0,N=N+Math.imul(ie,Ae)|0,x=x+Math.imul(Q,Ke)|0,w=(w=w+Math.imul(Q,Be)|0)+Math.imul(Y,Ke)|0,N=N+Math.imul(Y,Be)|0;var Ce=(q+(x=x+Math.imul(M,rt)|0)|0)+((8191&(w=(w=w+Math.imul(M,ct)|0)+Math.imul(U,rt)|0))<<13)|0;q=((N=N+Math.imul(U,ct)|0)+(w>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,x=Math.imul(Ee,ht),w=(w=Math.imul(Ee,nt))+Math.imul(je,ht)|0,N=Math.imul(je,nt),x=x+Math.imul(Fe,pt)|0,w=(w=w+Math.imul(Fe,qe)|0)+Math.imul(Oe,pt)|0,N=N+Math.imul(Oe,qe)|0,x=x+Math.imul(Se,bt)|0,w=(w=w+Math.imul(Se,Ye)|0)+Math.imul(_e,bt)|0,N=N+Math.imul(_e,Ye)|0,x=x+Math.imul(le,At)|0,w=(w=w+Math.imul(le,tt)|0)+Math.imul(ve,At)|0,N=N+Math.imul(ve,tt)|0,x=x+Math.imul(ce,he)|0,w=(w=w+Math.imul(ce,be)|0)+Math.imul(te,he)|0,N=N+Math.imul(te,be)|0,x=x+Math.imul(ne,ze)|0,w=(w=w+Math.imul(ne,Ae)|0)+Math.imul(re,ze)|0,N=N+Math.imul(re,Ae)|0,x=x+Math.imul(ae,Ke)|0,w=(w=w+Math.imul(ae,Be)|0)+Math.imul(ie,Ke)|0,N=N+Math.imul(ie,Be)|0;var Te=(q+(x=x+Math.imul(Q,rt)|0)|0)+((8191&(w=(w=w+Math.imul(Q,ct)|0)+Math.imul(Y,rt)|0))<<13)|0;q=((N=N+Math.imul(Y,ct)|0)+(w>>>13)|0)+(Te>>>26)|0,Te&=67108863,x=Math.imul(Ee,pt),w=(w=Math.imul(Ee,qe))+Math.imul(je,pt)|0,N=Math.imul(je,qe),x=x+Math.imul(Fe,bt)|0,w=(w=w+Math.imul(Fe,Ye)|0)+Math.imul(Oe,bt)|0,N=N+Math.imul(Oe,Ye)|0,x=x+Math.imul(Se,At)|0,w=(w=w+Math.imul(Se,tt)|0)+Math.imul(_e,At)|0,N=N+Math.imul(_e,tt)|0,x=x+Math.imul(le,he)|0,w=(w=w+Math.imul(le,be)|0)+Math.imul(ve,he)|0,N=N+Math.imul(ve,be)|0,x=x+Math.imul(ce,ze)|0,w=(w=w+Math.imul(ce,Ae)|0)+Math.imul(te,ze)|0,N=N+Math.imul(te,Ae)|0,x=x+Math.imul(ne,Ke)|0,w=(w=w+Math.imul(ne,Be)|0)+Math.imul(re,Ke)|0,N=N+Math.imul(re,Be)|0;var yt=(q+(x=x+Math.imul(ae,rt)|0)|0)+((8191&(w=(w=w+Math.imul(ae,ct)|0)+Math.imul(ie,rt)|0))<<13)|0;q=((N=N+Math.imul(ie,ct)|0)+(w>>>13)|0)+(yt>>>26)|0,yt&=67108863,x=Math.imul(Ee,bt),w=(w=Math.imul(Ee,Ye))+Math.imul(je,bt)|0,N=Math.imul(je,Ye),x=x+Math.imul(Fe,At)|0,w=(w=w+Math.imul(Fe,tt)|0)+Math.imul(Oe,At)|0,N=N+Math.imul(Oe,tt)|0,x=x+Math.imul(Se,he)|0,w=(w=w+Math.imul(Se,be)|0)+Math.imul(_e,he)|0,N=N+Math.imul(_e,be)|0,x=x+Math.imul(le,ze)|0,w=(w=w+Math.imul(le,Ae)|0)+Math.imul(ve,ze)|0,N=N+Math.imul(ve,Ae)|0,x=x+Math.imul(ce,Ke)|0,w=(w=w+Math.imul(ce,Be)|0)+Math.imul(te,Ke)|0,N=N+Math.imul(te,Be)|0;var ot=(q+(x=x+Math.imul(ne,rt)|0)|0)+((8191&(w=(w=w+Math.imul(ne,ct)|0)+Math.imul(re,rt)|0))<<13)|0;q=((N=N+Math.imul(re,ct)|0)+(w>>>13)|0)+(ot>>>26)|0,ot&=67108863,x=Math.imul(Ee,At),w=(w=Math.imul(Ee,tt))+Math.imul(je,At)|0,N=Math.imul(je,tt),x=x+Math.imul(Fe,he)|0,w=(w=w+Math.imul(Fe,be)|0)+Math.imul(Oe,he)|0,N=N+Math.imul(Oe,be)|0,x=x+Math.imul(Se,ze)|0,w=(w=w+Math.imul(Se,Ae)|0)+Math.imul(_e,ze)|0,N=N+Math.imul(_e,Ae)|0,x=x+Math.imul(le,Ke)|0,w=(w=w+Math.imul(le,Be)|0)+Math.imul(ve,Ke)|0,N=N+Math.imul(ve,Be)|0;var ut=(q+(x=x+Math.imul(ce,rt)|0)|0)+((8191&(w=(w=w+Math.imul(ce,ct)|0)+Math.imul(te,rt)|0))<<13)|0;q=((N=N+Math.imul(te,ct)|0)+(w>>>13)|0)+(ut>>>26)|0,ut&=67108863,x=Math.imul(Ee,he),w=(w=Math.imul(Ee,be))+Math.imul(je,he)|0,N=Math.imul(je,be),x=x+Math.imul(Fe,ze)|0,w=(w=w+Math.imul(Fe,Ae)|0)+Math.imul(Oe,ze)|0,N=N+Math.imul(Oe,Ae)|0,x=x+Math.imul(Se,Ke)|0,w=(w=w+Math.imul(Se,Be)|0)+Math.imul(_e,Ke)|0,N=N+Math.imul(_e,Be)|0;var He=(q+(x=x+Math.imul(le,rt)|0)|0)+((8191&(w=(w=w+Math.imul(le,ct)|0)+Math.imul(ve,rt)|0))<<13)|0;q=((N=N+Math.imul(ve,ct)|0)+(w>>>13)|0)+(He>>>26)|0,He&=67108863,x=Math.imul(Ee,ze),w=(w=Math.imul(Ee,Ae))+Math.imul(je,ze)|0,N=Math.imul(je,Ae),x=x+Math.imul(Fe,Ke)|0,w=(w=w+Math.imul(Fe,Be)|0)+Math.imul(Oe,Ke)|0,N=N+Math.imul(Oe,Be)|0;var Ct=(q+(x=x+Math.imul(Se,rt)|0)|0)+((8191&(w=(w=w+Math.imul(Se,ct)|0)+Math.imul(_e,rt)|0))<<13)|0;q=((N=N+Math.imul(_e,ct)|0)+(w>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,x=Math.imul(Ee,Ke),w=(w=Math.imul(Ee,Be))+Math.imul(je,Ke)|0,N=Math.imul(je,Be);var Nt=(q+(x=x+Math.imul(Fe,rt)|0)|0)+((8191&(w=(w=w+Math.imul(Fe,ct)|0)+Math.imul(Oe,rt)|0))<<13)|0;q=((N=N+Math.imul(Oe,ct)|0)+(w>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Mt=(q+(x=Math.imul(Ee,rt))|0)+((8191&(w=(w=Math.imul(Ee,ct))+Math.imul(je,rt)|0))<<13)|0;return q=((N=Math.imul(je,ct))+(w>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,V[0]=Dt,V[1]=Ot,V[2]=jt,V[3]=Lt,V[4]=Ut,V[5]=se,V[6]=pe,V[7]=xe,V[8]=ke,V[9]=Le,V[10]=Ce,V[11]=Te,V[12]=yt,V[13]=ot,V[14]=ut,V[15]=He,V[16]=Ct,V[17]=Nt,V[18]=Mt,q!==0&&(V[19]=q,v.length++),v};function A(j,b,v){v.negative=b.negative^j.negative,v.length=j.length+b.length;for(var x=0,w=0,N=0;N<v.length-1;N++){var P=w;w=0;for(var D=67108863&x,V=Math.min(N,b.length-1),q=Math.max(0,N-j.length+1);q<=V;q++){var G=N-q,F=(0|j.words[G])*(0|b.words[q]),X=67108863&F;D=67108863&(X=X+D|0),w+=(P=(P=P+(F/67108864|0)|0)+(X>>>26)|0)>>>26,P&=67108863}v.words[N]=D,x=P,P=w}return x!==0?v.words[N]=x:v.length--,v._strip()}function L(j,b,v){return A(j,b,v)}Math.imul||(E=k),t.prototype.mulTo=function(j,b){var v=this.length+j.length;return this.length===10&&j.length===10?E(this,j,b):v<63?k(this,j,b):v<1024?A(this,j,b):L(this,j,b)},t.prototype.mul=function(j){var b=new t(null);return b.words=new Array(this.length+j.length),this.mulTo(j,b)},t.prototype.mulf=function(j){var b=new t(null);return b.words=new Array(this.length+j.length),L(this,j,b)},t.prototype.imul=function(j){return this.clone().mulTo(j,this)},t.prototype.imuln=function(j){var b=j<0;b&&(j=-j),i(typeof j=="number"),i(j<67108864);for(var v=0,x=0;x<this.length;x++){var w=(0|this.words[x])*j,N=(67108863&w)+(67108863&v);v>>=26,v+=w/67108864|0,v+=N>>>26,this.words[x]=67108863&N}return v!==0&&(this.words[x]=v,this.length++),b?this.ineg():this},t.prototype.muln=function(j){return this.clone().imuln(j)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(j){var b=function(N){for(var P=new Array(N.bitLength()),D=0;D<P.length;D++){var V=D/26|0,q=D%26;P[D]=N.words[V]>>>q&1}return P}(j);if(b.length===0)return new t(1);for(var v=this,x=0;x<b.length&&b[x]===0;x++,v=v.sqr());if(++x<b.length)for(var w=v.sqr();x<b.length;x++,w=w.sqr())b[x]!==0&&(v=v.mul(w));return v},t.prototype.iushln=function(j){i(typeof j=="number"&&j>=0);var b,v=j%26,x=(j-v)/26,w=67108863>>>26-v<<26-v;if(v!==0){var N=0;for(b=0;b<this.length;b++){var P=this.words[b]&w,D=(0|this.words[b])-P<<v;this.words[b]=D|N,N=P>>>26-v}N&&(this.words[b]=N,this.length++)}if(x!==0){for(b=this.length-1;b>=0;b--)this.words[b+x]=this.words[b];for(b=0;b<x;b++)this.words[b]=0;this.length+=x}return this._strip()},t.prototype.ishln=function(j){return i(this.negative===0),this.iushln(j)},t.prototype.iushrn=function(j,b,v){var x;i(typeof j=="number"&&j>=0),x=b?(b-b%26)/26:0;var w=j%26,N=Math.min((j-w)/26,this.length),P=67108863^67108863>>>w<<w,D=v;if(x-=N,x=Math.max(0,x),D){for(var V=0;V<N;V++)D.words[V]=this.words[V];D.length=N}if(N!==0)if(this.length>N)for(this.length-=N,V=0;V<this.length;V++)this.words[V]=this.words[V+N];else this.words[0]=0,this.length=1;var q=0;for(V=this.length-1;V>=0&&(q!==0||V>=x);V--){var G=0|this.words[V];this.words[V]=q<<26-w|G>>>w,q=G&P}return D&&q!==0&&(D.words[D.length++]=q),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},t.prototype.ishrn=function(j,b,v){return i(this.negative===0),this.iushrn(j,b,v)},t.prototype.shln=function(j){return this.clone().ishln(j)},t.prototype.ushln=function(j){return this.clone().iushln(j)},t.prototype.shrn=function(j){return this.clone().ishrn(j)},t.prototype.ushrn=function(j){return this.clone().iushrn(j)},t.prototype.testn=function(j){i(typeof j=="number"&&j>=0);var b=j%26,v=(j-b)/26,x=1<<b;return!(this.length<=v)&&!!(this.words[v]&x)},t.prototype.imaskn=function(j){i(typeof j=="number"&&j>=0);var b=j%26,v=(j-b)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(b!==0&&v++,this.length=Math.min(v,this.length),b!==0){var x=67108863^67108863>>>b<<b;this.words[this.length-1]&=x}return this._strip()},t.prototype.maskn=function(j){return this.clone().imaskn(j)},t.prototype.iaddn=function(j){return i(typeof j=="number"),i(j<67108864),j<0?this.isubn(-j):this.negative!==0?this.length===1&&(0|this.words[0])<=j?(this.words[0]=j-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(j),this.negative=1,this):this._iaddn(j)},t.prototype._iaddn=function(j){this.words[0]+=j;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},t.prototype.isubn=function(j){if(i(typeof j=="number"),i(j<67108864),j<0)return this.iaddn(-j);if(this.negative!==0)return this.negative=0,this.iaddn(j),this.negative=1,this;if(this.words[0]-=j,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},t.prototype.addn=function(j){return this.clone().iaddn(j)},t.prototype.subn=function(j){return this.clone().isubn(j)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(j,b,v){var x,w,N=j.length+v;this._expand(N);var P=0;for(x=0;x<j.length;x++){w=(0|this.words[x+v])+P;var D=(0|j.words[x])*b;P=((w-=67108863&D)>>26)-(D/67108864|0),this.words[x+v]=67108863&w}for(;x<this.length-v;x++)P=(w=(0|this.words[x+v])+P)>>26,this.words[x+v]=67108863&w;if(P===0)return this._strip();for(i(P===-1),P=0,x=0;x<this.length;x++)P=(w=-(0|this.words[x])+P)>>26,this.words[x]=67108863&w;return this.negative=1,this._strip()},t.prototype._wordDiv=function(j,b){var v=(this.length,j.length),x=this.clone(),w=j,N=0|w.words[w.length-1];(v=26-this._countBits(N))!==0&&(w=w.ushln(v),x.iushln(v),N=0|w.words[w.length-1]);var P,D=x.length-w.length;if(b!=="mod"){(P=new t(null)).length=D+1,P.words=new Array(P.length);for(var V=0;V<P.length;V++)P.words[V]=0}var q=x.clone()._ishlnsubmul(w,1,D);q.negative===0&&(x=q,P&&(P.words[D]=1));for(var G=D-1;G>=0;G--){var F=67108864*(0|x.words[w.length+G])+(0|x.words[w.length+G-1]);for(F=Math.min(F/N|0,67108863),x._ishlnsubmul(w,F,G);x.negative!==0;)F--,x.negative=0,x._ishlnsubmul(w,1,G),x.isZero()||(x.negative^=1);P&&(P.words[G]=F)}return P&&P._strip(),x._strip(),b!=="div"&&v!==0&&x.iushrn(v),{div:P||null,mod:x}},t.prototype.divmod=function(j,b,v){return i(!j.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:this.negative!==0&&j.negative===0?(N=this.neg().divmod(j,b),b!=="mod"&&(x=N.div.neg()),b!=="div"&&(w=N.mod.neg(),v&&w.negative!==0&&w.iadd(j)),{div:x,mod:w}):this.negative===0&&j.negative!==0?(N=this.divmod(j.neg(),b),b!=="mod"&&(x=N.div.neg()),{div:x,mod:N.mod}):(this.negative&j.negative)!=0?(N=this.neg().divmod(j.neg(),b),b!=="div"&&(w=N.mod.neg(),v&&w.negative!==0&&w.isub(j)),{div:N.div,mod:w}):j.length>this.length||this.cmp(j)<0?{div:new t(0),mod:this}:j.length===1?b==="div"?{div:this.divn(j.words[0]),mod:null}:b==="mod"?{div:null,mod:new t(this.modrn(j.words[0]))}:{div:this.divn(j.words[0]),mod:new t(this.modrn(j.words[0]))}:this._wordDiv(j,b);var x,w,N},t.prototype.div=function(j){return this.divmod(j,"div",!1).div},t.prototype.mod=function(j){return this.divmod(j,"mod",!1).mod},t.prototype.umod=function(j){return this.divmod(j,"mod",!0).mod},t.prototype.divRound=function(j){var b=this.divmod(j);if(b.mod.isZero())return b.div;var v=b.div.negative!==0?b.mod.isub(j):b.mod,x=j.ushrn(1),w=j.andln(1),N=v.cmp(x);return N<0||w===1&&N===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},t.prototype.modrn=function(j){var b=j<0;b&&(j=-j),i(j<=67108863);for(var v=(1<<26)%j,x=0,w=this.length-1;w>=0;w--)x=(v*x+(0|this.words[w]))%j;return b?-x:x},t.prototype.modn=function(j){return this.modrn(j)},t.prototype.idivn=function(j){var b=j<0;b&&(j=-j),i(j<=67108863);for(var v=0,x=this.length-1;x>=0;x--){var w=(0|this.words[x])+67108864*v;this.words[x]=w/j|0,v=w%j}return this._strip(),b?this.ineg():this},t.prototype.divn=function(j){return this.clone().idivn(j)},t.prototype.egcd=function(j){i(j.negative===0),i(!j.isZero());var b=this,v=j.clone();b=b.negative!==0?b.umod(j):b.clone();for(var x=new t(1),w=new t(0),N=new t(0),P=new t(1),D=0;b.isEven()&&v.isEven();)b.iushrn(1),v.iushrn(1),++D;for(var V=v.clone(),q=b.clone();!b.isZero();){for(var G=0,F=1;(b.words[0]&F)==0&&G<26;++G,F<<=1);if(G>0)for(b.iushrn(G);G-- >0;)(x.isOdd()||w.isOdd())&&(x.iadd(V),w.isub(q)),x.iushrn(1),w.iushrn(1);for(var X=0,O=1;(v.words[0]&O)==0&&X<26;++X,O<<=1);if(X>0)for(v.iushrn(X);X-- >0;)(N.isOdd()||P.isOdd())&&(N.iadd(V),P.isub(q)),N.iushrn(1),P.iushrn(1);b.cmp(v)>=0?(b.isub(v),x.isub(N),w.isub(P)):(v.isub(b),N.isub(x),P.isub(w))}return{a:N,b:P,gcd:v.iushln(D)}},t.prototype._invmp=function(j){i(j.negative===0),i(!j.isZero());var b=this,v=j.clone();b=b.negative!==0?b.umod(j):b.clone();for(var x,w=new t(1),N=new t(0),P=v.clone();b.cmpn(1)>0&&v.cmpn(1)>0;){for(var D=0,V=1;(b.words[0]&V)==0&&D<26;++D,V<<=1);if(D>0)for(b.iushrn(D);D-- >0;)w.isOdd()&&w.iadd(P),w.iushrn(1);for(var q=0,G=1;(v.words[0]&G)==0&&q<26;++q,G<<=1);if(q>0)for(v.iushrn(q);q-- >0;)N.isOdd()&&N.iadd(P),N.iushrn(1);b.cmp(v)>=0?(b.isub(v),w.isub(N)):(v.isub(b),N.isub(w))}return(x=b.cmpn(1)===0?w:N).cmpn(0)<0&&x.iadd(j),x},t.prototype.gcd=function(j){if(this.isZero())return j.abs();if(j.isZero())return this.abs();var b=this.clone(),v=j.clone();b.negative=0,v.negative=0;for(var x=0;b.isEven()&&v.isEven();x++)b.iushrn(1),v.iushrn(1);for(;;){for(;b.isEven();)b.iushrn(1);for(;v.isEven();)v.iushrn(1);var w=b.cmp(v);if(w<0){var N=b;b=v,v=N}else if(w===0||v.cmpn(1)===0)break;b.isub(v)}return v.iushln(x)},t.prototype.invm=function(j){return this.egcd(j).a.umod(j)},t.prototype.isEven=function(){return(1&this.words[0])==0},t.prototype.isOdd=function(){return(1&this.words[0])==1},t.prototype.andln=function(j){return this.words[0]&j},t.prototype.bincn=function(j){i(typeof j=="number");var b=j%26,v=(j-b)/26,x=1<<b;if(this.length<=v)return this._expand(v+1),this.words[v]|=x,this;for(var w=x,N=v;w!==0&&N<this.length;N++){var P=0|this.words[N];w=(P+=w)>>>26,P&=67108863,this.words[N]=P}return w!==0&&(this.words[N]=w,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(j){var b,v=j<0;if(this.negative!==0&&!v)return-1;if(this.negative===0&&v)return 1;if(this._strip(),this.length>1)b=1;else{v&&(j=-j),i(j<=67108863,"Number is too big");var x=0|this.words[0];b=x===j?0:x<j?-1:1}return this.negative!==0?0|-b:b},t.prototype.cmp=function(j){if(this.negative!==0&&j.negative===0)return-1;if(this.negative===0&&j.negative!==0)return 1;var b=this.ucmp(j);return this.negative!==0?0|-b:b},t.prototype.ucmp=function(j){if(this.length>j.length)return 1;if(this.length<j.length)return-1;for(var b=0,v=this.length-1;v>=0;v--){var x=0|this.words[v],w=0|j.words[v];if(x!==w){x<w?b=-1:x>w&&(b=1);break}}return b},t.prototype.gtn=function(j){return this.cmpn(j)===1},t.prototype.gt=function(j){return this.cmp(j)===1},t.prototype.gten=function(j){return this.cmpn(j)>=0},t.prototype.gte=function(j){return this.cmp(j)>=0},t.prototype.ltn=function(j){return this.cmpn(j)===-1},t.prototype.lt=function(j){return this.cmp(j)===-1},t.prototype.lten=function(j){return this.cmpn(j)<=0},t.prototype.lte=function(j){return this.cmp(j)<=0},t.prototype.eqn=function(j){return this.cmpn(j)===0},t.prototype.eq=function(j){return this.cmp(j)===0},t.red=function(j){return new C(j)},t.prototype.toRed=function(j){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),j.convertTo(this)._forceRed(j)},t.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(j){return this.red=j,this},t.prototype.forceRed=function(j){return i(!this.red,"Already a number in reduction context"),this._forceRed(j)},t.prototype.redAdd=function(j){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,j)},t.prototype.redIAdd=function(j){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,j)},t.prototype.redSub=function(j){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,j)},t.prototype.redISub=function(j){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,j)},t.prototype.redShl=function(j){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,j)},t.prototype.redMul=function(j){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.mul(this,j)},t.prototype.redIMul=function(j){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.imul(this,j)},t.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(j){return i(this.red&&!j.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,j)};var z={k256:null,p224:null,p192:null,p25519:null};function R(j,b){this.name=j,this.p=new t(b,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function B(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function H(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function $(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(j){if(typeof j=="string"){var b=t._prime(j);this.m=b.p,this.prime=b}else i(j.gtn(1),"modulus must be greater than 1"),this.m=j,this.prime=null}function T(j){C.call(this,j),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}R.prototype._tmp=function(){var j=new t(null);return j.words=new Array(Math.ceil(this.n/13)),j},R.prototype.ireduce=function(j){var b,v=j;do this.split(v,this.tmp),b=(v=(v=this.imulK(v)).iadd(this.tmp)).bitLength();while(b>this.n);var x=b<this.n?-1:v.ucmp(this.p);return x===0?(v.words[0]=0,v.length=1):x>0?v.isub(this.p):v.strip!==void 0?v.strip():v._strip(),v},R.prototype.split=function(j,b){j.iushrn(this.n,0,b)},R.prototype.imulK=function(j){return j.imul(this.k)},r(I,R),I.prototype.split=function(j,b){for(var v=Math.min(j.length,9),x=0;x<v;x++)b.words[x]=j.words[x];if(b.length=v,j.length<=9)return j.words[0]=0,void(j.length=1);var w=j.words[9];for(b.words[b.length++]=4194303&w,x=10;x<j.length;x++){var N=0|j.words[x];j.words[x-10]=(4194303&N)<<4|w>>>22,w=N}w>>>=22,j.words[x-10]=w,w===0&&j.length>10?j.length-=10:j.length-=9},I.prototype.imulK=function(j){j.words[j.length]=0,j.words[j.length+1]=0,j.length+=2;for(var b=0,v=0;v<j.length;v++){var x=0|j.words[v];b+=977*x,j.words[v]=67108863&b,b=64*x+(b/67108864|0)}return j.words[j.length-1]===0&&(j.length--,j.words[j.length-1]===0&&j.length--),j},r(B,R),r(H,R),r($,R),$.prototype.imulK=function(j){for(var b=0,v=0;v<j.length;v++){var x=19*(0|j.words[v])+b,w=67108863&x;x>>>=26,j.words[v]=w,b=x}return b!==0&&(j.words[j.length++]=b),j},t._prime=function(j){if(z[j])return z[j];var b;if(j==="k256")b=new I;else if(j==="p224")b=new B;else if(j==="p192")b=new H;else{if(j!=="p25519")throw new Error("Unknown prime "+j);b=new $}return z[j]=b,b},C.prototype._verify1=function(j){i(j.negative===0,"red works only with positives"),i(j.red,"red works only with red numbers")},C.prototype._verify2=function(j,b){i((j.negative|b.negative)==0,"red works only with positives"),i(j.red&&j.red===b.red,"red works only with red numbers")},C.prototype.imod=function(j){return this.prime?this.prime.ireduce(j)._forceRed(this):(d(j,j.umod(this.m)._forceRed(this)),j)},C.prototype.neg=function(j){return j.isZero()?j.clone():this.m.sub(j)._forceRed(this)},C.prototype.add=function(j,b){this._verify2(j,b);var v=j.add(b);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},C.prototype.iadd=function(j,b){this._verify2(j,b);var v=j.iadd(b);return v.cmp(this.m)>=0&&v.isub(this.m),v},C.prototype.sub=function(j,b){this._verify2(j,b);var v=j.sub(b);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},C.prototype.isub=function(j,b){this._verify2(j,b);var v=j.isub(b);return v.cmpn(0)<0&&v.iadd(this.m),v},C.prototype.shl=function(j,b){return this._verify1(j),this.imod(j.ushln(b))},C.prototype.imul=function(j,b){return this._verify2(j,b),this.imod(j.imul(b))},C.prototype.mul=function(j,b){return this._verify2(j,b),this.imod(j.mul(b))},C.prototype.isqr=function(j){return this.imul(j,j.clone())},C.prototype.sqr=function(j){return this.mul(j,j)},C.prototype.sqrt=function(j){if(j.isZero())return j.clone();var b=this.m.andln(3);if(i(b%2==1),b===3){var v=this.m.add(new t(1)).iushrn(2);return this.pow(j,v)}for(var x=this.m.subn(1),w=0;!x.isZero()&&x.andln(1)===0;)w++,x.iushrn(1);i(!x.isZero());var N=new t(1).toRed(this),P=N.redNeg(),D=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new t(2*V*V).toRed(this);this.pow(V,D).cmp(P)!==0;)V.redIAdd(P);for(var q=this.pow(V,x),G=this.pow(j,x.addn(1).iushrn(1)),F=this.pow(j,x),X=w;F.cmp(N)!==0;){for(var O=F,M=0;O.cmp(N)!==0;M++)O=O.redSqr();i(M<X);var U=this.pow(q,new t(1).iushln(X-M-1));G=G.redMul(U),q=U.redSqr(),F=F.redMul(q),X=M}return G},C.prototype.invm=function(j){var b=j._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},C.prototype.pow=function(j,b){if(b.isZero())return new t(1).toRed(this);if(b.cmpn(1)===0)return j.clone();var v=new Array(16);v[0]=new t(1).toRed(this),v[1]=j;for(var x=2;x<v.length;x++)v[x]=this.mul(v[x-1],j);var w=v[0],N=0,P=0,D=b.bitLength()%26;for(D===0&&(D=26),x=b.length-1;x>=0;x--){for(var V=b.words[x],q=D-1;q>=0;q--){var G=V>>q&1;w!==v[0]&&(w=this.sqr(w)),G!==0||N!==0?(N<<=1,N|=G,(++P===4||x===0&&q===0)&&(w=this.mul(w,v[N]),P=0,N=0)):P=0}D=26}return w},C.prototype.convertTo=function(j){var b=j.umod(this.m);return b===j?b.clone():b},C.prototype.convertFrom=function(j){var b=j.clone();return b.red=null,b},t.mont=function(j){return new T(j)},r(T,C),T.prototype.convertTo=function(j){return this.imod(j.ushln(this.shift))},T.prototype.convertFrom=function(j){var b=this.imod(j.mul(this.rinv));return b.red=null,b},T.prototype.imul=function(j,b){if(j.isZero()||b.isZero())return j.words[0]=0,j.length=1,j;var v=j.imul(b),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=v.isub(x).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},T.prototype.mul=function(j,b){if(j.isZero()||b.isZero())return new t(0)._forceRed(this);var v=j.mul(b),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=v.isub(x).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},T.prototype.invm=function(j){return this.imod(j._invmp(this.m).mul(this.r2))._forceRed(this)}})(h===void 0||h)},{buffer:188}],187:[function(e,h,p){var c;function s(r){this.rand=r}if(h.exports=function(r){return c||(c=new s(null)),c.generate(r)},h.exports.Rand=s,s.prototype.generate=function(r){return this._rand(r)},s.prototype._rand=function(r){if(this.rand.getBytes)return this.rand.getBytes(r);for(var t=new Uint8Array(r),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},typeof self=="object")self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(r){var t=new Uint8Array(r);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(r){var t=new Uint8Array(r);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var i=e("crypto");if(typeof i.randomBytes!="function")throw new Error("Not supported");s.prototype._rand=function(r){return i.randomBytes(r)}}catch{}},{crypto:188}],188:[function(e,h,p){},{}],189:[function(e,h,p){var c=e("safe-buffer").Buffer;function s(a){c.isBuffer(a)||(a=c.from(a));for(var o=a.length/4|0,d=new Array(o),f=0;f<o;f++)d[f]=a.readUInt32BE(4*f);return d}function i(a){for(;0<a.length;a++)a[0]=0}function r(a,o,d,f,u){for(var g,m,k,E,A=d[0],L=d[1],z=d[2],R=d[3],I=a[0]^o[0],B=a[1]^o[1],H=a[2]^o[2],$=a[3]^o[3],C=4,T=1;T<u;T++)g=A[I>>>24]^L[B>>>16&255]^z[H>>>8&255]^R[255&$]^o[C++],m=A[B>>>24]^L[H>>>16&255]^z[$>>>8&255]^R[255&I]^o[C++],k=A[H>>>24]^L[$>>>16&255]^z[I>>>8&255]^R[255&B]^o[C++],E=A[$>>>24]^L[I>>>16&255]^z[B>>>8&255]^R[255&H]^o[C++],I=g,B=m,H=k,$=E;return g=(f[I>>>24]<<24|f[B>>>16&255]<<16|f[H>>>8&255]<<8|f[255&$])^o[C++],m=(f[B>>>24]<<24|f[H>>>16&255]<<16|f[$>>>8&255]<<8|f[255&I])^o[C++],k=(f[H>>>24]<<24|f[$>>>16&255]<<16|f[I>>>8&255]<<8|f[255&B])^o[C++],E=(f[$>>>24]<<24|f[I>>>16&255]<<16|f[B>>>8&255]<<8|f[255&H])^o[C++],[g>>>=0,m>>>=0,k>>>=0,E>>>=0]}var t=[0,1,2,4,8,16,32,64,128,27,54],n=function(){for(var a=new Array(256),o=0;o<256;o++)a[o]=o<128?o<<1:o<<1^283;for(var d=[],f=[],u=[[],[],[],[]],g=[[],[],[],[]],m=0,k=0,E=0;E<256;++E){var A=k^k<<1^k<<2^k<<3^k<<4;A=A>>>8^255&A^99,d[m]=A,f[A]=m;var L=a[m],z=a[L],R=a[z],I=257*a[A]^16843008*A;u[0][m]=I<<24|I>>>8,u[1][m]=I<<16|I>>>16,u[2][m]=I<<8|I>>>24,u[3][m]=I,I=16843009*R^65537*z^257*L^16843008*m,g[0][A]=I<<24|I>>>8,g[1][A]=I<<16|I>>>16,g[2][A]=I<<8|I>>>24,g[3][A]=I,m===0?m=k=1:(m=L^a[a[a[R^L]]],k^=a[a[k]])}return{SBOX:d,INV_SBOX:f,SUB_MIX:u,INV_SUB_MIX:g}}();function l(a){this._key=s(a),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var a=this._key,o=a.length,d=o+6,f=4*(d+1),u=[],g=0;g<o;g++)u[g]=a[g];for(g=o;g<f;g++){var m=u[g-1];g%o==0?(m=m<<8|m>>>24,m=n.SBOX[m>>>24]<<24|n.SBOX[m>>>16&255]<<16|n.SBOX[m>>>8&255]<<8|n.SBOX[255&m],m^=t[g/o|0]<<24):o>6&&g%o==4&&(m=n.SBOX[m>>>24]<<24|n.SBOX[m>>>16&255]<<16|n.SBOX[m>>>8&255]<<8|n.SBOX[255&m]),u[g]=u[g-o]^m}for(var k=[],E=0;E<f;E++){var A=f-E,L=u[A-(E%4?0:4)];k[E]=E<4||A<=4?L:n.INV_SUB_MIX[0][n.SBOX[L>>>24]]^n.INV_SUB_MIX[1][n.SBOX[L>>>16&255]]^n.INV_SUB_MIX[2][n.SBOX[L>>>8&255]]^n.INV_SUB_MIX[3][n.SBOX[255&L]]}this._nRounds=d,this._keySchedule=u,this._invKeySchedule=k},l.prototype.encryptBlockRaw=function(a){return r(a=s(a),this._keySchedule,n.SUB_MIX,n.SBOX,this._nRounds)},l.prototype.encryptBlock=function(a){var o=this.encryptBlockRaw(a),d=c.allocUnsafe(16);return d.writeUInt32BE(o[0],0),d.writeUInt32BE(o[1],4),d.writeUInt32BE(o[2],8),d.writeUInt32BE(o[3],12),d},l.prototype.decryptBlock=function(a){var o=(a=s(a))[1];a[1]=a[3],a[3]=o;var d=r(a,this._invKeySchedule,n.INV_SUB_MIX,n.INV_SBOX,this._nRounds),f=c.allocUnsafe(16);return f.writeUInt32BE(d[0],0),f.writeUInt32BE(d[3],4),f.writeUInt32BE(d[2],8),f.writeUInt32BE(d[1],12),f},l.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},h.exports.AES=l},{"safe-buffer":494}],190:[function(e,h,p){var c=e("./aes"),s=e("safe-buffer").Buffer,i=e("cipher-base"),r=e("inherits"),t=e("./ghash"),n=e("buffer-xor"),l=e("./incr32");function a(o,d,f,u){i.call(this);var g=s.alloc(4,0);this._cipher=new c.AES(d);var m=this._cipher.encryptBlock(g);this._ghash=new t(m),f=function(k,E,A){if(E.length===12)return k._finID=s.concat([E,s.from([0,0,0,1])]),s.concat([E,s.from([0,0,0,2])]);var L=new t(A),z=E.length,R=z%16;L.update(E),R&&(R=16-R,L.update(s.alloc(R,0))),L.update(s.alloc(8,0));var I=8*z,B=s.alloc(8);B.writeUIntBE(I,0,8),L.update(B),k._finID=L.state;var H=s.from(k._finID);return l(H),H}(this,f,m),this._prev=s.from(f),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=u,this._alen=0,this._len=0,this._mode=o,this._authTag=null,this._called=!1}r(a,i),a.prototype._update=function(o){if(!this._called&&this._alen){var d=16-this._alen%16;d<16&&(d=s.alloc(d,0),this._ghash.update(d))}this._called=!0;var f=this._mode.encrypt(this,o);return this._decrypt?this._ghash.update(o):this._ghash.update(f),this._len+=o.length,f},a.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var o=n(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(d,f){var u=0;d.length!==f.length&&u++;for(var g=Math.min(d.length,f.length),m=0;m<g;++m)u+=d[m]^f[m];return u}(o,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=o,this._cipher.scrub()},a.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},a.prototype.setAuthTag=function(o){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=o},a.prototype.setAAD=function(o){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(o),this._alen+=o.length},h.exports=a},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(e,h,p){var c=e("./encrypter"),s=e("./decrypter"),i=e("./modes/list.json");p.createCipher=p.Cipher=c.createCipher,p.createCipheriv=p.Cipheriv=c.createCipheriv,p.createDecipher=p.Decipher=s.createDecipher,p.createDecipheriv=p.Decipheriv=s.createDecipheriv,p.listCiphers=p.getCiphers=function(){return Object.keys(i)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(e,h,p){var c=e("./authCipher"),s=e("safe-buffer").Buffer,i=e("./modes"),r=e("./streamCipher"),t=e("cipher-base"),n=e("./aes"),l=e("evp_bytestokey");function a(f,u,g){t.call(this),this._cache=new o,this._last=void 0,this._cipher=new n.AES(u),this._prev=s.from(g),this._mode=f,this._autopadding=!0}function o(){this.cache=s.allocUnsafe(0)}function d(f,u,g){var m=i[f.toLowerCase()];if(!m)throw new TypeError("invalid suite type");if(typeof g=="string"&&(g=s.from(g)),m.mode!=="GCM"&&g.length!==m.iv)throw new TypeError("invalid iv length "+g.length);if(typeof u=="string"&&(u=s.from(u)),u.length!==m.key/8)throw new TypeError("invalid key length "+u.length);return m.type==="stream"?new r(m.module,u,g,!0):m.type==="auth"?new c(m.module,u,g,!0):new a(m.module,u,g)}e("inherits")(a,t),a.prototype._update=function(f){var u,g;this._cache.add(f);for(var m=[];u=this._cache.get(this._autopadding);)g=this._mode.decrypt(this,u),m.push(g);return s.concat(m)},a.prototype._final=function(){var f=this._cache.flush();if(this._autopadding)return function(u){var g=u[15];if(g<1||g>16)throw new Error("unable to decrypt data");for(var m=-1;++m<g;)if(u[m+(16-g)]!==g)throw new Error("unable to decrypt data");if(g!==16)return u.slice(0,16-g)}(this._mode.decrypt(this,f));if(f)throw new Error("data not multiple of block length")},a.prototype.setAutoPadding=function(f){return this._autopadding=!!f,this},o.prototype.add=function(f){this.cache=s.concat([this.cache,f])},o.prototype.get=function(f){var u;if(f){if(this.cache.length>16)return u=this.cache.slice(0,16),this.cache=this.cache.slice(16),u}else if(this.cache.length>=16)return u=this.cache.slice(0,16),this.cache=this.cache.slice(16),u;return null},o.prototype.flush=function(){if(this.cache.length)return this.cache},p.createDecipher=function(f,u){var g=i[f.toLowerCase()];if(!g)throw new TypeError("invalid suite type");var m=l(u,!1,g.key,g.iv);return d(f,m.key,m.iv)},p.createDecipheriv=d},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(e,h,p){var c=e("./modes"),s=e("./authCipher"),i=e("safe-buffer").Buffer,r=e("./streamCipher"),t=e("cipher-base"),n=e("./aes"),l=e("evp_bytestokey");function a(u,g,m){t.call(this),this._cache=new d,this._cipher=new n.AES(g),this._prev=i.from(m),this._mode=u,this._autopadding=!0}e("inherits")(a,t),a.prototype._update=function(u){var g,m;this._cache.add(u);for(var k=[];g=this._cache.get();)m=this._mode.encrypt(this,g),k.push(m);return i.concat(k)};var o=i.alloc(16,16);function d(){this.cache=i.allocUnsafe(0)}function f(u,g,m){var k=c[u.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if(typeof g=="string"&&(g=i.from(g)),g.length!==k.key/8)throw new TypeError("invalid key length "+g.length);if(typeof m=="string"&&(m=i.from(m)),k.mode!=="GCM"&&m.length!==k.iv)throw new TypeError("invalid iv length "+m.length);return k.type==="stream"?new r(k.module,g,m):k.type==="auth"?new s(k.module,g,m):new a(k.module,g,m)}a.prototype._final=function(){var u=this._cache.flush();if(this._autopadding)return u=this._mode.encrypt(this,u),this._cipher.scrub(),u;if(!u.equals(o))throw this._cipher.scrub(),new Error("data not multiple of block length")},a.prototype.setAutoPadding=function(u){return this._autopadding=!!u,this},d.prototype.add=function(u){this.cache=i.concat([this.cache,u])},d.prototype.get=function(){if(this.cache.length>15){var u=this.cache.slice(0,16);return this.cache=this.cache.slice(16),u}return null},d.prototype.flush=function(){for(var u=16-this.cache.length,g=i.allocUnsafe(u),m=-1;++m<u;)g.writeUInt8(u,m);return i.concat([this.cache,g])},p.createCipheriv=f,p.createCipher=function(u,g){var m=c[u.toLowerCase()];if(!m)throw new TypeError("invalid suite type");var k=l(g,!1,m.key,m.iv);return f(u,k.key,k.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(e,h,p){var c=e("safe-buffer").Buffer,s=c.alloc(16,0);function i(t){var n=c.allocUnsafe(16);return n.writeUInt32BE(t[0]>>>0,0),n.writeUInt32BE(t[1]>>>0,4),n.writeUInt32BE(t[2]>>>0,8),n.writeUInt32BE(t[3]>>>0,12),n}function r(t){this.h=t,this.state=c.alloc(16,0),this.cache=c.allocUnsafe(0)}r.prototype.ghash=function(t){for(var n=-1;++n<t.length;)this.state[n]^=t[n];this._multiply()},r.prototype._multiply=function(){for(var t,n,l,a=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],o=[0,0,0,0],d=-1;++d<128;){for((this.state[~~(d/8)]&1<<7-d%8)!=0&&(o[0]^=a[0],o[1]^=a[1],o[2]^=a[2],o[3]^=a[3]),l=(1&a[3])!=0,n=3;n>0;n--)a[n]=a[n]>>>1|(1&a[n-1])<<31;a[0]=a[0]>>>1,l&&(a[0]=a[0]^225<<24)}this.state=i(o)},r.prototype.update=function(t){var n;for(this.cache=c.concat([this.cache,t]);this.cache.length>=16;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},r.prototype.final=function(t,n){return this.cache.length&&this.ghash(c.concat([this.cache,s],16)),this.ghash(i([0,t,0,n])),this.state},h.exports=r},{"safe-buffer":494}],195:[function(e,h,p){h.exports=function(c){for(var s,i=c.length;i--;){if((s=c.readUInt8(i))!==255){s++,c.writeUInt8(s,i);break}c.writeUInt8(0,i)}}},{}],196:[function(e,h,p){var c=e("buffer-xor");p.encrypt=function(s,i){var r=c(i,s._prev);return s._prev=s._cipher.encryptBlock(r),s._prev},p.decrypt=function(s,i){var r=s._prev;s._prev=i;var t=s._cipher.decryptBlock(i);return c(t,r)}},{"buffer-xor":219}],197:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("buffer-xor");function i(r,t,n){var l=t.length,a=s(t,r._cache);return r._cache=r._cache.slice(l),r._prev=c.concat([r._prev,n?t:a]),a}p.encrypt=function(r,t,n){for(var l,a=c.allocUnsafe(0);t.length;){if(r._cache.length===0&&(r._cache=r._cipher.encryptBlock(r._prev),r._prev=c.allocUnsafe(0)),!(r._cache.length<=t.length)){a=c.concat([a,i(r,t,n)]);break}l=r._cache.length,a=c.concat([a,i(r,t.slice(0,l),n)]),t=t.slice(l)}return a}},{"buffer-xor":219,"safe-buffer":494}],198:[function(e,h,p){var c=e("safe-buffer").Buffer;function s(r,t,n){for(var l,a,o=-1,d=0;++o<8;)l=t&1<<7-o?128:0,d+=(128&(a=r._cipher.encryptBlock(r._prev)[0]^l))>>o%8,r._prev=i(r._prev,n?l:a);return d}function i(r,t){var n=r.length,l=-1,a=c.allocUnsafe(r.length);for(r=c.concat([r,c.from([t])]);++l<n;)a[l]=r[l]<<1|r[l+1]>>7;return a}p.encrypt=function(r,t,n){for(var l=t.length,a=c.allocUnsafe(l),o=-1;++o<l;)a[o]=s(r,t[o],n);return a}},{"safe-buffer":494}],199:[function(e,h,p){var c=e("safe-buffer").Buffer;function s(i,r,t){var n=i._cipher.encryptBlock(i._prev)[0]^r;return i._prev=c.concat([i._prev.slice(1),c.from([t?r:n])]),n}p.encrypt=function(i,r,t){for(var n=r.length,l=c.allocUnsafe(n),a=-1;++a<n;)l[a]=s(i,r[a],t);return l}},{"safe-buffer":494}],200:[function(e,h,p){var c=e("buffer-xor"),s=e("safe-buffer").Buffer,i=e("../incr32");function r(t){var n=t._cipher.encryptBlockRaw(t._prev);return i(t._prev),n}p.encrypt=function(t,n){var l=Math.ceil(n.length/16),a=t._cache.length;t._cache=s.concat([t._cache,s.allocUnsafe(16*l)]);for(var o=0;o<l;o++){var d=r(t),f=a+16*o;t._cache.writeUInt32BE(d[0],f+0),t._cache.writeUInt32BE(d[1],f+4),t._cache.writeUInt32BE(d[2],f+8),t._cache.writeUInt32BE(d[3],f+12)}var u=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),c(n,u)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(e,h,p){p.encrypt=function(c,s){return c._cipher.encryptBlock(s)},p.decrypt=function(c,s){return c._cipher.decryptBlock(s)}},{}],202:[function(e,h,p){var c={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},s=e("./list.json");for(var i in s)s[i].module=c[s[i].mode];h.exports=s},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(e,h,p){h.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(e,h,p){(function(c){(function(){var s=e("buffer-xor");function i(r){return r._prev=r._cipher.encryptBlock(r._prev),r._prev}p.encrypt=function(r,t){for(;r._cache.length<t.length;)r._cache=c.concat([r._cache,i(r)]);var n=r._cache.slice(0,t.length);return r._cache=r._cache.slice(t.length),s(t,n)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(e,h,p){var c=e("./aes"),s=e("safe-buffer").Buffer,i=e("cipher-base");function r(t,n,l,a){i.call(this),this._cipher=new c.AES(n),this._prev=s.from(l),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=a,this._mode=t}e("inherits")(r,i),r.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()},h.exports=r},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(e,h,p){var c=e("browserify-des"),s=e("browserify-aes/browser"),i=e("browserify-aes/modes"),r=e("browserify-des/modes"),t=e("evp_bytestokey");function n(a,o,d){if(a=a.toLowerCase(),i[a])return s.createCipheriv(a,o,d);if(r[a])return new c({key:o,iv:d,mode:a});throw new TypeError("invalid suite type")}function l(a,o,d){if(a=a.toLowerCase(),i[a])return s.createDecipheriv(a,o,d);if(r[a])return new c({key:o,iv:d,mode:a,decrypt:!0});throw new TypeError("invalid suite type")}p.createCipher=p.Cipher=function(a,o){var d,f;if(a=a.toLowerCase(),i[a])d=i[a].key,f=i[a].iv;else{if(!r[a])throw new TypeError("invalid suite type");d=8*r[a].key,f=r[a].iv}var u=t(o,!1,d,f);return n(a,u.key,u.iv)},p.createCipheriv=p.Cipheriv=n,p.createDecipher=p.Decipher=function(a,o){var d,f;if(a=a.toLowerCase(),i[a])d=i[a].key,f=i[a].iv;else{if(!r[a])throw new TypeError("invalid suite type");d=8*r[a].key,f=r[a].iv}var u=t(o,!1,d,f);return l(a,u.key,u.iv)},p.createDecipheriv=p.Decipheriv=l,p.listCiphers=p.getCiphers=function(){return Object.keys(r).concat(s.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(e,h,p){var c=e("cipher-base"),s=e("des.js"),i=e("inherits"),r=e("safe-buffer").Buffer,t={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};function n(l){c.call(this);var a,o=l.mode.toLowerCase(),d=t[o];a=l.decrypt?"decrypt":"encrypt";var f=l.key;r.isBuffer(f)||(f=r.from(f)),o!=="des-ede"&&o!=="des-ede-cbc"||(f=r.concat([f,f.slice(0,8)]));var u=l.iv;r.isBuffer(u)||(u=r.from(u)),this._des=d.create({key:f,iv:u,type:a})}t.des=t["des-cbc"],t.des3=t["des-ede3-cbc"],h.exports=n,i(n,c),n.prototype._update=function(l){return r.from(this._des.update(l))},n.prototype._final=function(){return r.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(e,h,p){p["des-ecb"]={key:8,iv:0},p["des-cbc"]=p.des={key:8,iv:8},p["des-ede3-cbc"]=p.des3={key:24,iv:8},p["des-ede3"]={key:24,iv:0},p["des-ede-cbc"]={key:16,iv:8},p["des-ede"]={key:16,iv:0}},{}],209:[function(e,h,p){(function(c){(function(){var s=e("bn.js"),i=e("randombytes");function r(n){var l,a=n.modulus.byteLength();do l=new s(i(a));while(l.cmp(n.modulus)>=0||!l.umod(n.prime1)||!l.umod(n.prime2));return l}function t(n,l){var a=function(z){var R=r(z);return{blinder:R.toRed(s.mont(z.modulus)).redPow(new s(z.publicExponent)).fromRed(),unblinder:R.invm(z.modulus)}}(l),o=l.modulus.byteLength(),d=new s(n).mul(a.blinder).umod(l.modulus),f=d.toRed(s.mont(l.prime1)),u=d.toRed(s.mont(l.prime2)),g=l.coefficient,m=l.prime1,k=l.prime2,E=f.redPow(l.exponent1).fromRed(),A=u.redPow(l.exponent2).fromRed(),L=E.isub(A).imul(g).umod(m).imul(k);return A.iadd(L).imul(a.unblinder).umod(l.modulus).toArrayLike(c,"be",o)}t.getr=r,h.exports=t}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(e,h,p){h.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(e,h,p){h.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(e,h,p){h.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("create-hash"),i=e("readable-stream"),r=e("inherits"),t=e("./sign"),n=e("./verify"),l=e("./algorithms.json");function a(u){i.Writable.call(this);var g=l[u];if(!g)throw new Error("Unknown message digest");this._hashType=g.hash,this._hash=s(g.hash),this._tag=g.id,this._signType=g.sign}function o(u){i.Writable.call(this);var g=l[u];if(!g)throw new Error("Unknown message digest");this._hash=s(g.hash),this._tag=g.id,this._signType=g.sign}function d(u){return new a(u)}function f(u){return new o(u)}Object.keys(l).forEach(function(u){l[u].id=c.from(l[u].id,"hex"),l[u.toLowerCase()]=l[u]}),r(a,i.Writable),a.prototype._write=function(u,g,m){this._hash.update(u),m()},a.prototype.update=function(u,g){return typeof u=="string"&&(u=c.from(u,g)),this._hash.update(u),this},a.prototype.sign=function(u,g){this.end();var m=this._hash.digest(),k=t(m,u,this._hashType,this._signType,this._tag);return g?k.toString(g):k},r(o,i.Writable),o.prototype._write=function(u,g,m){this._hash.update(u),m()},o.prototype.update=function(u,g){return typeof u=="string"&&(u=c.from(u,g)),this._hash.update(u),this},o.prototype.verify=function(u,g,m){typeof g=="string"&&(g=c.from(g,m)),this.end();var k=this._hash.digest();return n(g,k,u,this._signType,this._tag)},h.exports={Sign:d,Verify:f,createSign:d,createVerify:f}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("create-hmac"),i=e("browserify-rsa"),r=e("elliptic").ec,t=e("bn.js"),n=e("parse-asn1"),l=e("./curves.json");function a(u,g,m,k){if((u=c.from(u.toArray())).length<g.byteLength()){var E=c.alloc(g.byteLength()-u.length);u=c.concat([E,u])}var A=m.length,L=function(I,B){I=(I=o(I,B)).mod(B);var H=c.from(I.toArray());if(H.length<B.byteLength()){var $=c.alloc(B.byteLength()-H.length);H=c.concat([$,H])}return H}(m,g),z=c.alloc(A);z.fill(1);var R=c.alloc(A);return R=s(k,R).update(z).update(c.from([0])).update(u).update(L).digest(),z=s(k,R).update(z).digest(),{k:R=s(k,R).update(z).update(c.from([1])).update(u).update(L).digest(),v:z=s(k,R).update(z).digest()}}function o(u,g){var m=new t(u),k=(u.length<<3)-g.bitLength();return k>0&&m.ishrn(k),m}function d(u,g,m){var k,E;do{for(k=c.alloc(0);8*k.length<u.bitLength();)g.v=s(m,g.k).update(g.v).digest(),k=c.concat([k,g.v]);E=o(k,u),g.k=s(m,g.k).update(g.v).update(c.from([0])).digest(),g.v=s(m,g.k).update(g.v).digest()}while(E.cmp(u)!==-1);return E}function f(u,g,m,k){return u.toRed(t.mont(m)).redPow(g).fromRed().mod(k)}h.exports=function(u,g,m,k,E){var A=n(g);if(A.curve){if(k!=="ecdsa"&&k!=="ecdsa/rsa")throw new Error("wrong private key type");return function(I,B){var H=l[B.curve.join(".")];if(!H)throw new Error("unknown curve "+B.curve.join("."));var $=new r(H).keyFromPrivate(B.privateKey).sign(I);return c.from($.toDER())}(u,A)}if(A.type==="dsa"){if(k!=="dsa")throw new Error("wrong private key type");return function(I,B,H){for(var $,C=B.params.priv_key,T=B.params.p,j=B.params.q,b=B.params.g,v=new t(0),x=o(I,j).mod(j),w=!1,N=a(C,j,I,H);w===!1;)$=d(j,N,H),v=f(b,$,T,j),(w=$.invm(j).imul(x.add(C.mul(v))).mod(j)).cmpn(0)===0&&(w=!1,v=new t(0));return function(P,D){P=P.toArray(),D=D.toArray(),128&P[0]&&(P=[0].concat(P)),128&D[0]&&(D=[0].concat(D));var V=[48,P.length+D.length+4,2,P.length];return V=V.concat(P,[2,D.length],D),c.from(V)}(v,w)}(u,A,m)}if(k!=="rsa"&&k!=="ecdsa/rsa")throw new Error("wrong private key type");u=c.concat([E,u]);for(var L=A.modulus.byteLength(),z=[0,1];u.length+z.length+1<L;)z.push(255);z.push(0);for(var R=-1;++R<u.length;)z.push(u[R]);return i(z,A)},h.exports.getKey=a,h.exports.makeKey=d},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("bn.js"),i=e("elliptic").ec,r=e("parse-asn1"),t=e("./curves.json");function n(l,a){if(l.cmpn(0)<=0)throw new Error("invalid sig");if(l.cmp(a)>=a)throw new Error("invalid sig")}h.exports=function(l,a,o,d,f){var u=r(o);if(u.type==="ec"){if(d!=="ecdsa"&&d!=="ecdsa/rsa")throw new Error("wrong public key type");return function(z,R,I){var B=t[I.data.algorithm.curve.join(".")];if(!B)throw new Error("unknown curve "+I.data.algorithm.curve.join("."));var H=new i(B),$=I.data.subjectPrivateKey.data;return H.verify(R,z,$)}(l,a,u)}if(u.type==="dsa"){if(d!=="dsa")throw new Error("wrong public key type");return function(z,R,I){var B=I.data.p,H=I.data.q,$=I.data.g,C=I.data.pub_key,T=r.signature.decode(z,"der"),j=T.s,b=T.r;n(j,H),n(b,H);var v=s.mont(B),x=j.invm(H);return $.toRed(v).redPow(new s(R).mul(x).mod(H)).fromRed().mul(C.toRed(v).redPow(b.mul(x).mod(H)).fromRed()).mod(B).mod(H).cmp(b)===0}(l,a,u)}if(d!=="rsa"&&d!=="ecdsa/rsa")throw new Error("wrong public key type");a=c.concat([f,a]);for(var g=u.modulus.byteLength(),m=[1],k=0;a.length+m.length+2<g;)m.push(255),k++;m.push(0);for(var E=-1;++E<a.length;)m.push(a[E]);m=c.from(m);var A=s.mont(u.modulus);l=(l=new s(l).toRed(A)).redPow(new s(u.publicExponent)),l=c.from(l.fromRed().toArray());var L=k<8?1:0;for(g=Math.min(l.length,m.length),l.length!==m.length&&(L=1),E=-1;++E<g;)L|=l[E]^m[E];return L===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(e,h,p){},{}],217:[function(e,h,p){var c=e("buffer"),s=c.Buffer;function i(t,n){for(var l in t)n[l]=t[l]}function r(t,n,l){return s(t,n,l)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?h.exports=c:(i(c,p),p.Buffer=r),i(s,r),r.from=function(t,n,l){if(typeof t=="number")throw new TypeError("Argument must not be a number");return s(t,n,l)},r.alloc=function(t,n,l){if(typeof t!="number")throw new TypeError("Argument must be a number");var a=s(t);return n!==void 0?typeof l=="string"?a.fill(n,l):a.fill(n):a.fill(0),a},r.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(t)}},{buffer:220}],218:[function(e,h,p){var c=e("safe-buffer").Buffer,s=c.isEncoding||function(u){switch((u=""+u)&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(u){var g;switch(this.encoding=function(m){var k=function(E){if(!E)return"utf8";for(var A;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(A)return;E=(""+E).toLowerCase(),A=!0}}(m);if(typeof k!="string"&&(c.isEncoding===s||!s(m)))throw new Error("Unknown encoding: "+m);return k||m}(u),this.encoding){case"utf16le":this.text=n,this.end=l,g=4;break;case"utf8":this.fillLast=t,g=4;break;case"base64":this.text=a,this.end=o,g=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(g)}function r(u){return u<=127?0:u>>5==6?2:u>>4==14?3:u>>3==30?4:u>>6==2?-1:-2}function t(u){var g=this.lastTotal-this.lastNeed,m=function(k,E,A){if((192&E[0])!=128)return k.lastNeed=0,"";if(k.lastNeed>1&&E.length>1){if((192&E[1])!=128)return k.lastNeed=1,"";if(k.lastNeed>2&&E.length>2&&(192&E[2])!=128)return k.lastNeed=2,""}}(this,u);return m!==void 0?m:this.lastNeed<=u.length?(u.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(u.copy(this.lastChar,g,0,u.length),void(this.lastNeed-=u.length))}function n(u,g){if((u.length-g)%2==0){var m=u.toString("utf16le",g);if(m){var k=m.charCodeAt(m.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",g,u.length-1)}function l(u){var g=u&&u.length?this.write(u):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,m)}return g}function a(u,g){var m=(u.length-g)%3;return m===0?u.toString("base64",g):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",g,u.length-m))}function o(u){var g=u&&u.length?this.write(u):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function d(u){return u.toString(this.encoding)}function f(u){return u&&u.length?this.write(u):""}p.StringDecoder=i,i.prototype.write=function(u){if(u.length===0)return"";var g,m;if(this.lastNeed){if((g=this.fillLast(u))===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<u.length?g?g+this.text(u,m):this.text(u,m):g||""},i.prototype.end=function(u){var g=u&&u.length?this.write(u):"";return this.lastNeed?g+"":g},i.prototype.text=function(u,g){var m=function(E,A,L){var z=A.length-1;if(z<L)return 0;var R=r(A[z]);return R>=0?(R>0&&(E.lastNeed=R-1),R):--z<L||R===-2?0:(R=r(A[z]))>=0?(R>0&&(E.lastNeed=R-2),R):--z<L||R===-2?0:(R=r(A[z]))>=0?(R>0&&(R===2?R=0:E.lastNeed=R-3),R):0}(this,u,g);if(!this.lastNeed)return u.toString("utf8",g);this.lastTotal=m;var k=u.length-(m-this.lastNeed);return u.copy(this.lastChar,0,k),u.toString("utf8",g,k)},i.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length}},{"safe-buffer":217}],219:[function(e,h,p){(function(c){(function(){h.exports=function(s,i){for(var r=Math.min(s.length,i.length),t=new c(r),n=0;n<r;++n)t[n]=s[n]^i[n];return t}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],220:[function(e,h,p){(function(c){(function(){var s=e("base64-js"),i=e("ieee754");p.Buffer=t,p.SlowBuffer=function(O){return+O!=O&&(O=0),t.alloc(+O)},p.INSPECT_MAX_BYTES=50;function r(O){if(O>2147483647)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return M.__proto__=t.prototype,M}function t(O,M,U){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return a(O)}return n(O,M,U)}function n(O,M,U){if(typeof O=="string")return function(Y,J){if(typeof J=="string"&&J!==""||(J="utf8"),!t.isEncoding(J))throw new TypeError("Unknown encoding: "+J);var ae=0|f(Y,J),ie=r(ae),Z=ie.write(Y,J);return Z!==ae&&(ie=ie.slice(0,Z)),ie}(O,M);if(ArrayBuffer.isView(O))return o(O);if(O==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(F(O,ArrayBuffer)||O&&F(O.buffer,ArrayBuffer))return function(Y,J,ae){if(J<0||Y.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<J+(ae||0))throw new RangeError('"length" is outside of buffer bounds');var ie;return ie=J===void 0&&ae===void 0?new Uint8Array(Y):ae===void 0?new Uint8Array(Y,J):new Uint8Array(Y,J,ae),ie.__proto__=t.prototype,ie}(O,M,U);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return t.from(K,M,U);var Q=function(Y){if(t.isBuffer(Y)){var J=0|d(Y.length),ae=r(J);return ae.length===0||Y.copy(ae,0,0,J),ae}if(Y.length!==void 0)return typeof Y.length!="number"||X(Y.length)?r(0):o(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return o(Y.data)}(O);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return t.from(O[Symbol.toPrimitive]("string"),M,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function l(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function a(O){return l(O),r(O<0?0:0|d(O))}function o(O){for(var M=O.length<0?0:0|d(O.length),U=r(M),K=0;K<M;K+=1)U[K]=255&O[K];return U}function d(O){if(O>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|O}function f(O,M){if(t.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||F(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var U=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&U===0)return 0;for(var Q=!1;;)switch(M){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return V(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return q(O).length;default:if(Q)return K?-1:V(O).length;M=(""+M).toLowerCase(),Q=!0}}function u(O,M,U){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return T(this,M,U);case"utf8":case"utf-8":return H(this,M,U);case"ascii":return $(this,M,U);case"latin1":case"binary":return C(this,M,U);case"base64":return B(this,M,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,M,U);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function g(O,M,U){var K=O[M];O[M]=O[U],O[U]=K}function m(O,M,U,K,Q){if(O.length===0)return-1;if(typeof U=="string"?(K=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),X(U=+U)&&(U=Q?0:O.length-1),U<0&&(U=O.length+U),U>=O.length){if(Q)return-1;U=O.length-1}else if(U<0){if(!Q)return-1;U=0}if(typeof M=="string"&&(M=t.from(M,K)),t.isBuffer(M))return M.length===0?-1:k(O,M,U,K,Q);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(O,M,U):Uint8Array.prototype.lastIndexOf.call(O,M,U):k(O,[M],U,K,Q);throw new TypeError("val must be string, number or Buffer")}function k(O,M,U,K,Q){var Y,J=1,ae=O.length,ie=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;J=2,ae/=2,ie/=2,U/=2}function Z(ce,te){return J===1?ce[te]:ce.readUInt16BE(te*J)}if(Q){var ne=-1;for(Y=U;Y<ae;Y++)if(Z(O,Y)===Z(M,ne===-1?0:Y-ne)){if(ne===-1&&(ne=Y),Y-ne+1===ie)return ne*J}else ne!==-1&&(Y-=Y-ne),ne=-1}else for(U+ie>ae&&(U=ae-ie),Y=U;Y>=0;Y--){for(var re=!0,ue=0;ue<ie;ue++)if(Z(O,Y+ue)!==Z(M,ue)){re=!1;break}if(re)return Y}return-1}function E(O,M,U,K){U=Number(U)||0;var Q=O.length-U;K?(K=Number(K))>Q&&(K=Q):K=Q;var Y=M.length;K>Y/2&&(K=Y/2);for(var J=0;J<K;++J){var ae=parseInt(M.substr(2*J,2),16);if(X(ae))return J;O[U+J]=ae}return J}function A(O,M,U,K){return G(V(M,O.length-U),O,U,K)}function L(O,M,U,K){return G(function(Q){for(var Y=[],J=0;J<Q.length;++J)Y.push(255&Q.charCodeAt(J));return Y}(M),O,U,K)}function z(O,M,U,K){return L(O,M,U,K)}function R(O,M,U,K){return G(q(M),O,U,K)}function I(O,M,U,K){return G(function(Q,Y){for(var J,ae,ie,Z=[],ne=0;ne<Q.length&&!((Y-=2)<0);++ne)J=Q.charCodeAt(ne),ae=J>>8,ie=J%256,Z.push(ie),Z.push(ae);return Z}(M,O.length-U),O,U,K)}function B(O,M,U){return M===0&&U===O.length?s.fromByteArray(O):s.fromByteArray(O.slice(M,U))}function H(O,M,U){U=Math.min(O.length,U);for(var K=[],Q=M;Q<U;){var Y,J,ae,ie,Z=O[Q],ne=null,re=Z>239?4:Z>223?3:Z>191?2:1;if(Q+re<=U)switch(re){case 1:Z<128&&(ne=Z);break;case 2:(192&(Y=O[Q+1]))==128&&(ie=(31&Z)<<6|63&Y)>127&&(ne=ie);break;case 3:Y=O[Q+1],J=O[Q+2],(192&Y)==128&&(192&J)==128&&(ie=(15&Z)<<12|(63&Y)<<6|63&J)>2047&&(ie<55296||ie>57343)&&(ne=ie);break;case 4:Y=O[Q+1],J=O[Q+2],ae=O[Q+3],(192&Y)==128&&(192&J)==128&&(192&ae)==128&&(ie=(15&Z)<<18|(63&Y)<<12|(63&J)<<6|63&ae)>65535&&ie<1114112&&(ne=ie)}ne===null?(ne=65533,re=1):ne>65535&&(ne-=65536,K.push(ne>>>10&1023|55296),ne=56320|1023&ne),K.push(ne),Q+=re}return function(ue){var ce=ue.length;if(ce<=4096)return String.fromCharCode.apply(String,ue);for(var te="",de=0;de<ce;)te+=String.fromCharCode.apply(String,ue.slice(de,de+=4096));return te}(K)}p.kMaxLength=2147483647,t.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1);return O.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},O.foo()===42}catch{return!1}}(),t.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(O,M,U){return n(O,M,U)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(O,M,U){return function(K,Q,Y){return l(K),K<=0?r(K):Q!==void 0?typeof Y=="string"?r(K).fill(Q,Y):r(K).fill(Q):r(K)}(O,M,U)},t.allocUnsafe=function(O){return a(O)},t.allocUnsafeSlow=function(O){return a(O)},t.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==t.prototype},t.compare=function(O,M){if(F(O,Uint8Array)&&(O=t.from(O,O.offset,O.byteLength)),F(M,Uint8Array)&&(M=t.from(M,M.offset,M.byteLength)),!t.isBuffer(O)||!t.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var U=O.length,K=M.length,Q=0,Y=Math.min(U,K);Q<Y;++Q)if(O[Q]!==M[Q]){U=O[Q],K=M[Q];break}return U<K?-1:K<U?1:0},t.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return t.alloc(0);var U;if(M===void 0)for(M=0,U=0;U<O.length;++U)M+=O[U].length;var K=t.allocUnsafe(M),Q=0;for(U=0;U<O.length;++U){var Y=O[U];if(F(Y,Uint8Array)&&(Y=t.from(Y)),!t.isBuffer(Y))throw new TypeError('"list" argument must be an Array of Buffers');Y.copy(K,Q),Q+=Y.length}return K},t.byteLength=f,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)g(this,M,M+1);return this},t.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)g(this,M,M+3),g(this,M+1,M+2);return this},t.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)g(this,M,M+7),g(this,M+1,M+6),g(this,M+2,M+5),g(this,M+3,M+4);return this},t.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?H(this,0,O):u.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(O){if(!t.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||t.compare(this,O)===0},t.prototype.inspect=function(){var O="",M=p.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},t.prototype.compare=function(O,M,U,K,Q){if(F(O,Uint8Array)&&(O=t.from(O,O.offset,O.byteLength)),!t.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),U===void 0&&(U=O?O.length:0),K===void 0&&(K=0),Q===void 0&&(Q=this.length),M<0||U>O.length||K<0||Q>this.length)throw new RangeError("out of range index");if(K>=Q&&M>=U)return 0;if(K>=Q)return-1;if(M>=U)return 1;if(this===O)return 0;for(var Y=(Q>>>=0)-(K>>>=0),J=(U>>>=0)-(M>>>=0),ae=Math.min(Y,J),ie=this.slice(K,Q),Z=O.slice(M,U),ne=0;ne<ae;++ne)if(ie[ne]!==Z[ne]){Y=ie[ne],J=Z[ne];break}return Y<J?-1:J<Y?1:0},t.prototype.includes=function(O,M,U){return this.indexOf(O,M,U)!==-1},t.prototype.indexOf=function(O,M,U){return m(this,O,M,U,!0)},t.prototype.lastIndexOf=function(O,M,U){return m(this,O,M,U,!1)},t.prototype.write=function(O,M,U,K){if(M===void 0)K="utf8",U=this.length,M=0;else if(U===void 0&&typeof M=="string")K=M,U=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(U)?(U>>>=0,K===void 0&&(K="utf8")):(K=U,U=void 0)}var Q=this.length-M;if((U===void 0||U>Q)&&(U=Q),O.length>0&&(U<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var Y=!1;;)switch(K){case"hex":return E(this,O,M,U);case"utf8":case"utf-8":return A(this,O,M,U);case"ascii":return L(this,O,M,U);case"latin1":case"binary":return z(this,O,M,U);case"base64":return R(this,O,M,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,O,M,U);default:if(Y)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),Y=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(O,M,U){var K="";U=Math.min(O.length,U);for(var Q=M;Q<U;++Q)K+=String.fromCharCode(127&O[Q]);return K}function C(O,M,U){var K="";U=Math.min(O.length,U);for(var Q=M;Q<U;++Q)K+=String.fromCharCode(O[Q]);return K}function T(O,M,U){var K=O.length;(!M||M<0)&&(M=0),(!U||U<0||U>K)&&(U=K);for(var Q="",Y=M;Y<U;++Y)Q+=D(O[Y]);return Q}function j(O,M,U){for(var K=O.slice(M,U),Q="",Y=0;Y<K.length;Y+=2)Q+=String.fromCharCode(K[Y]+256*K[Y+1]);return Q}function b(O,M,U){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>U)throw new RangeError("Trying to access beyond buffer length")}function v(O,M,U,K,Q,Y){if(!t.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>Q||M<Y)throw new RangeError('"value" argument is out of bounds');if(U+K>O.length)throw new RangeError("Index out of range")}function x(O,M,U,K,Q,Y){if(U+K>O.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function w(O,M,U,K,Q){return M=+M,U>>>=0,Q||x(O,0,U,4),i.write(O,M,U,K,23,4),U+4}function N(O,M,U,K,Q){return M=+M,U>>>=0,Q||x(O,0,U,8),i.write(O,M,U,K,52,8),U+8}t.prototype.slice=function(O,M){var U=this.length;(O=~~O)<0?(O+=U)<0&&(O=0):O>U&&(O=U),(M=M===void 0?U:~~M)<0?(M+=U)<0&&(M=0):M>U&&(M=U),M<O&&(M=O);var K=this.subarray(O,M);return K.__proto__=t.prototype,K},t.prototype.readUIntLE=function(O,M,U){O>>>=0,M>>>=0,U||b(O,M,this.length);for(var K=this[O],Q=1,Y=0;++Y<M&&(Q*=256);)K+=this[O+Y]*Q;return K},t.prototype.readUIntBE=function(O,M,U){O>>>=0,M>>>=0,U||b(O,M,this.length);for(var K=this[O+--M],Q=1;M>0&&(Q*=256);)K+=this[O+--M]*Q;return K},t.prototype.readUInt8=function(O,M){return O>>>=0,M||b(O,1,this.length),this[O]},t.prototype.readUInt16LE=function(O,M){return O>>>=0,M||b(O,2,this.length),this[O]|this[O+1]<<8},t.prototype.readUInt16BE=function(O,M){return O>>>=0,M||b(O,2,this.length),this[O]<<8|this[O+1]},t.prototype.readUInt32LE=function(O,M){return O>>>=0,M||b(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},t.prototype.readUInt32BE=function(O,M){return O>>>=0,M||b(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},t.prototype.readIntLE=function(O,M,U){O>>>=0,M>>>=0,U||b(O,M,this.length);for(var K=this[O],Q=1,Y=0;++Y<M&&(Q*=256);)K+=this[O+Y]*Q;return K>=(Q*=128)&&(K-=Math.pow(2,8*M)),K},t.prototype.readIntBE=function(O,M,U){O>>>=0,M>>>=0,U||b(O,M,this.length);for(var K=M,Q=1,Y=this[O+--K];K>0&&(Q*=256);)Y+=this[O+--K]*Q;return Y>=(Q*=128)&&(Y-=Math.pow(2,8*M)),Y},t.prototype.readInt8=function(O,M){return O>>>=0,M||b(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},t.prototype.readInt16LE=function(O,M){O>>>=0,M||b(O,2,this.length);var U=this[O]|this[O+1]<<8;return 32768&U?4294901760|U:U},t.prototype.readInt16BE=function(O,M){O>>>=0,M||b(O,2,this.length);var U=this[O+1]|this[O]<<8;return 32768&U?4294901760|U:U},t.prototype.readInt32LE=function(O,M){return O>>>=0,M||b(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},t.prototype.readInt32BE=function(O,M){return O>>>=0,M||b(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},t.prototype.readFloatLE=function(O,M){return O>>>=0,M||b(O,4,this.length),i.read(this,O,!0,23,4)},t.prototype.readFloatBE=function(O,M){return O>>>=0,M||b(O,4,this.length),i.read(this,O,!1,23,4)},t.prototype.readDoubleLE=function(O,M){return O>>>=0,M||b(O,8,this.length),i.read(this,O,!0,52,8)},t.prototype.readDoubleBE=function(O,M){return O>>>=0,M||b(O,8,this.length),i.read(this,O,!1,52,8)},t.prototype.writeUIntLE=function(O,M,U,K){O=+O,M>>>=0,U>>>=0,K||v(this,O,M,U,Math.pow(2,8*U)-1,0);var Q=1,Y=0;for(this[M]=255&O;++Y<U&&(Q*=256);)this[M+Y]=O/Q&255;return M+U},t.prototype.writeUIntBE=function(O,M,U,K){O=+O,M>>>=0,U>>>=0,K||v(this,O,M,U,Math.pow(2,8*U)-1,0);var Q=U-1,Y=1;for(this[M+Q]=255&O;--Q>=0&&(Y*=256);)this[M+Q]=O/Y&255;return M+U},t.prototype.writeUInt8=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,1,255,0),this[M]=255&O,M+1},t.prototype.writeUInt16LE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},t.prototype.writeUInt16BE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},t.prototype.writeUInt32LE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},t.prototype.writeUInt32BE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},t.prototype.writeIntLE=function(O,M,U,K){if(O=+O,M>>>=0,!K){var Q=Math.pow(2,8*U-1);v(this,O,M,U,Q-1,-Q)}var Y=0,J=1,ae=0;for(this[M]=255&O;++Y<U&&(J*=256);)O<0&&ae===0&&this[M+Y-1]!==0&&(ae=1),this[M+Y]=(O/J>>0)-ae&255;return M+U},t.prototype.writeIntBE=function(O,M,U,K){if(O=+O,M>>>=0,!K){var Q=Math.pow(2,8*U-1);v(this,O,M,U,Q-1,-Q)}var Y=U-1,J=1,ae=0;for(this[M+Y]=255&O;--Y>=0&&(J*=256);)O<0&&ae===0&&this[M+Y+1]!==0&&(ae=1),this[M+Y]=(O/J>>0)-ae&255;return M+U},t.prototype.writeInt8=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},t.prototype.writeInt16LE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},t.prototype.writeInt16BE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},t.prototype.writeInt32LE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},t.prototype.writeInt32BE=function(O,M,U){return O=+O,M>>>=0,U||v(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},t.prototype.writeFloatLE=function(O,M,U){return w(this,O,M,!0,U)},t.prototype.writeFloatBE=function(O,M,U){return w(this,O,M,!1,U)},t.prototype.writeDoubleLE=function(O,M,U){return N(this,O,M,!0,U)},t.prototype.writeDoubleBE=function(O,M,U){return N(this,O,M,!1,U)},t.prototype.copy=function(O,M,U,K){if(!t.isBuffer(O))throw new TypeError("argument should be a Buffer");if(U||(U=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<U&&(K=U),K===U||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-U&&(K=O.length-M+U);var Q=K-U;if(this===O&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(M,U,K);else if(this===O&&U<M&&M<K)for(var Y=Q-1;Y>=0;--Y)O[Y+M]=this[Y+U];else Uint8Array.prototype.set.call(O,this.subarray(U,K),M);return Q},t.prototype.fill=function(O,M,U,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,U=this.length):typeof U=="string"&&(K=U,U=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!t.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var Q=O.charCodeAt(0);(K==="utf8"&&Q<128||K==="latin1")&&(O=Q)}}else typeof O=="number"&&(O&=255);if(M<0||this.length<M||this.length<U)throw new RangeError("Out of range index");if(U<=M)return this;var Y;if(M>>>=0,U=U===void 0?this.length:U>>>0,O||(O=0),typeof O=="number")for(Y=M;Y<U;++Y)this[Y]=O;else{var J=t.isBuffer(O)?O:t.from(O,K),ae=J.length;if(ae===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(Y=0;Y<U-M;++Y)this[Y+M]=J[Y%ae]}return this};var P=/[^+/0-9A-Za-z-_]/g;function D(O){return O<16?"0"+O.toString(16):O.toString(16)}function V(O,M){var U;M=M||1/0;for(var K=O.length,Q=null,Y=[],J=0;J<K;++J){if((U=O.charCodeAt(J))>55295&&U<57344){if(!Q){if(U>56319){(M-=3)>-1&&Y.push(239,191,189);continue}if(J+1===K){(M-=3)>-1&&Y.push(239,191,189);continue}Q=U;continue}if(U<56320){(M-=3)>-1&&Y.push(239,191,189),Q=U;continue}U=65536+(Q-55296<<10|U-56320)}else Q&&(M-=3)>-1&&Y.push(239,191,189);if(Q=null,U<128){if((M-=1)<0)break;Y.push(U)}else if(U<2048){if((M-=2)<0)break;Y.push(U>>6|192,63&U|128)}else if(U<65536){if((M-=3)<0)break;Y.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;Y.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return Y}function q(O){return s.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function G(O,M,U,K){for(var Q=0;Q<K&&!(Q+U>=M.length||Q>=O.length);++Q)M[Q+U]=O[Q];return Q}function F(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function X(O){return O!=O}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("stream").Transform,i=e("string_decoder").StringDecoder;function r(t){s.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(r,s),r.prototype.update=function(t,n,l){typeof t=="string"&&(t=c.from(t,n));var a=this._update(t);return this.hashMode?this:(l&&(a=this._toString(a,l)),a)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(t,n,l){var a;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(o){a=o}finally{l(a)}},r.prototype._flush=function(t){var n;try{this.push(this.__final())}catch(l){n=l}t(n)},r.prototype._finalOrDigest=function(t){var n=this.__final()||c.alloc(0);return t&&(n=this._toString(n,t,!0)),n},r.prototype._toString=function(t,n,l){if(this._decoder||(this._decoder=new i(n),this._encoding=n),this._encoding!==n)throw new Error("can't switch encodings");var a=this._decoder.write(t);return l&&(a+=this._decoder.end()),a},h.exports=r},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(e,h,p){var c=e("../internals/is-callable"),s=e("../internals/try-to-string"),i=TypeError;h.exports=function(r){if(c(r))return r;throw new i(s(r)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(e,h,p){var c=e("../internals/is-constructor"),s=e("../internals/try-to-string"),i=TypeError;h.exports=function(r){if(c(r))return r;throw new i(s(r)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(e,h,p){var c=e("../internals/is-callable"),s=String,i=TypeError;h.exports=function(r){if(typeof r=="object"||c(r))return r;throw new i("Can't set "+s(r)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(e,h,p){var c=e("../internals/well-known-symbol"),s=e("../internals/object-create"),i=e("../internals/object-define-property").f,r=c("unscopables"),t=Array.prototype;t[r]===void 0&&i(t,r,{configurable:!0,value:s(null)}),h.exports=function(n){t[r][n]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(e,h,p){var c=e("../internals/object-is-prototype-of"),s=TypeError;h.exports=function(i,r){if(c(r,i))return i;throw new s("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(e,h,p){var c=e("../internals/is-object"),s=String,i=TypeError;h.exports=function(r){if(c(r))return r;throw new i(s(r)+" is not an object")}},{"../internals/is-object":289}],228:[function(e,h,p){var c=e("../internals/to-indexed-object"),s=e("../internals/to-absolute-index"),i=e("../internals/length-of-array-like"),r=function(t){return function(n,l,a){var o,d=c(n),f=i(d),u=s(a,f);if(t&&l!=l){for(;f>u;)if((o=d[u++])!=o)return!0}else for(;f>u;u++)if((t||u in d)&&d[u]===l)return t||u||0;return!t&&-1}};h.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(e,h,p){var c=e("../internals/function-bind-context"),s=e("../internals/function-uncurry-this"),i=e("../internals/indexed-object"),r=e("../internals/to-object"),t=e("../internals/length-of-array-like"),n=e("../internals/array-species-create"),l=s([].push),a=function(o){var d=o===1,f=o===2,u=o===3,g=o===4,m=o===6,k=o===7,E=o===5||m;return function(A,L,z,R){for(var I,B,H=r(A),$=i(H),C=c(L,z),T=t($),j=0,b=R||n,v=d?b(A,T):f||k?b(A,0):void 0;T>j;j++)if((E||j in $)&&(B=C(I=$[j],j,H),o))if(d)v[j]=B;else if(B)switch(o){case 3:return!0;case 5:return I;case 6:return j;case 2:l(v,I)}else switch(o){case 4:return!1;case 7:l(v,I)}return m?-1:u||g?g:v}};h.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(e,h,p){var c=e("../internals/to-absolute-index"),s=e("../internals/length-of-array-like"),i=e("../internals/create-property"),r=Array,t=Math.max;h.exports=function(n,l,a){for(var o=s(n),d=c(l,o),f=c(a===void 0?o:a,o),u=r(t(f-d,0)),g=0;d<f;d++,g++)i(u,g,n[d]);return u.length=g,u}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(e,h,p){var c=e("../internals/function-uncurry-this");h.exports=c([].slice)},{"../internals/function-uncurry-this":268}],232:[function(e,h,p){var c=e("../internals/is-array"),s=e("../internals/is-constructor"),i=e("../internals/is-object"),r=e("../internals/well-known-symbol")("species"),t=Array;h.exports=function(n){var l;return c(n)&&(l=n.constructor,(s(l)&&(l===t||c(l.prototype))||i(l)&&(l=l[r])===null)&&(l=void 0)),l===void 0?t:l}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(e,h,p){var c=e("../internals/array-species-constructor");h.exports=function(s,i){return new(c(s))(i===0?0:i)}},{"../internals/array-species-constructor":232}],234:[function(e,h,p){var c=e("../internals/well-known-symbol")("iterator"),s=!1;try{var i=0,r={next:function(){return{done:!!i++}},return:function(){s=!0}};r[c]=function(){return this},Array.from(r,function(){throw 2})}catch{}h.exports=function(t,n){try{if(!n&&!s)return!1}catch{return!1}var l=!1;try{var a={};a[c]=function(){return{next:function(){return{done:l=!0}}}},t(a)}catch{}return l}},{"../internals/well-known-symbol":357}],235:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=c({}.toString),i=c("".slice);h.exports=function(r){return i(s(r),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(e,h,p){var c=e("../internals/to-string-tag-support"),s=e("../internals/is-callable"),i=e("../internals/classof-raw"),r=e("../internals/well-known-symbol")("toStringTag"),t=Object,n=i(function(){return arguments}())==="Arguments";h.exports=c?i:function(l){var a,o,d;return l===void 0?"Undefined":l===null?"Null":typeof(o=function(f,u){try{return f[u]}catch{}}(a=t(l),r))=="string"?o:n?i(a):(d=i(a))==="Object"&&s(a.callee)?"Arguments":d}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(e,h,p){var c=e("../internals/has-own-property"),s=e("../internals/own-keys"),i=e("../internals/object-get-own-property-descriptor"),r=e("../internals/object-define-property");h.exports=function(t,n,l){for(var a=s(n),o=r.f,d=i.f,f=0;f<a.length;f++){var u=a[f];c(t,u)||l&&c(l,u)||o(t,u,d(n,u))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(e,h,p){var c=e("../internals/well-known-symbol")("match");h.exports=function(s){var i=/./;try{"/./"[s](i)}catch{try{return i[c]=!1,"/./"[s](i)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(e,h,p){var c=e("../internals/fails");h.exports=!c(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},{"../internals/fails":260}],240:[function(e,h,p){h.exports=function(c,s){return{value:c,done:s}}},{}],241:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");h.exports=c?function(r,t,n){return s.f(r,t,i(1,n))}:function(r,t,n){return r[t]=n,r}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(e,h,p){h.exports=function(c,s){return{enumerable:!(1&c),configurable:!(2&c),writable:!(4&c),value:s}}},{}],243:[function(e,h,p){var c=e("../internals/to-property-key"),s=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");h.exports=function(r,t,n){var l=c(t);l in r?s.f(r,l,i(0,n)):r[l]=n}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(e,h,p){var c=e("../internals/make-built-in"),s=e("../internals/object-define-property");h.exports=function(i,r,t){return t.get&&c(t.get,r,{getter:!0}),t.set&&c(t.set,r,{setter:!0}),s.f(i,r,t)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(e,h,p){var c=e("../internals/is-callable"),s=e("../internals/object-define-property"),i=e("../internals/make-built-in"),r=e("../internals/define-global-property");h.exports=function(t,n,l,a){a||(a={});var o=a.enumerable,d=a.name!==void 0?a.name:n;if(c(l)&&i(l,d,a),a.global)o?t[n]=l:r(n,l);else{try{a.unsafe?t[n]&&(o=!0):delete t[n]}catch{}o?t[n]=l:s.f(t,n,{value:l,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(e,h,p){var c=e("../internals/global"),s=Object.defineProperty;h.exports=function(i,r){try{s(c,i,{value:r,configurable:!0,writable:!0})}catch{c[i]=r}return r}},{"../internals/global":274}],247:[function(e,h,p){var c=e("../internals/fails");h.exports=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(e,h,p){var c=typeof document=="object"&&document.all,s=c===void 0&&c!==void 0;h.exports={all:c,IS_HTMLDDA:s}},{}],249:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/is-object"),i=c.document,r=s(i)&&s(i.createElement);h.exports=function(t){return r?i.createElement(t):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(e,h,p){var c=e("../internals/engine-is-deno"),s=e("../internals/engine-is-node");h.exports=!c&&!s&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(e,h,p){h.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(e,h,p){var c=e("../internals/engine-user-agent");h.exports=/ipad|iphone|ipod/i.test(c)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(e,h,p){var c=e("../internals/engine-user-agent");h.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(c)},{"../internals/engine-user-agent":256}],254:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/classof-raw");h.exports=s(c.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(e,h,p){var c=e("../internals/engine-user-agent");h.exports=/web0s(?!.*chrome)/i.test(c)},{"../internals/engine-user-agent":256}],256:[function(e,h,p){h.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(e,h,p){var c,s,i=e("../internals/global"),r=e("../internals/engine-user-agent"),t=i.process,n=i.Deno,l=t&&t.versions||n&&n.version,a=l&&l.v8;a&&(s=(c=a.split("."))[0]>0&&c[0]<4?1:+(c[0]+c[1])),!s&&r&&(!(c=r.match(/Edge\/(\d+)/))||c[1]>=74)&&(c=r.match(/Chrome\/(\d+)/))&&(s=+c[1]),h.exports=s},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(e,h,p){h.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/create-non-enumerable-property"),r=e("../internals/define-built-in"),t=e("../internals/define-global-property"),n=e("../internals/copy-constructor-properties"),l=e("../internals/is-forced");h.exports=function(a,o){var d,f,u,g,m,k=a.target,E=a.global,A=a.stat;if(d=E?c:A?c[k]||t(k,{}):(c[k]||{}).prototype)for(f in o){if(g=o[f],u=a.dontCallGetSet?(m=s(d,f))&&m.value:d[f],!l(E?f:k+(A?".":"#")+f,a.forced)&&u!==void 0){if(typeof g==typeof u)continue;n(g,u)}(a.sham||u&&u.sham)&&i(g,"sham",!0),r(d,f,g,a)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(e,h,p){h.exports=function(c){try{return!!c()}catch{return!0}}},{}],261:[function(e,h,p){var c=e("../internals/function-bind-native"),s=Function.prototype,i=s.apply,r=s.call;h.exports=typeof Reflect=="object"&&Reflect.apply||(c?r.bind(i):function(){return r.apply(i,arguments)})},{"../internals/function-bind-native":263}],262:[function(e,h,p){var c=e("../internals/function-uncurry-this-clause"),s=e("../internals/a-callable"),i=e("../internals/function-bind-native"),r=c(c.bind);h.exports=function(t,n){return s(t),n===void 0?t:i?r(t,n):function(){return t.apply(n,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(e,h,p){var c=e("../internals/fails");h.exports=!c(function(){var s=function(){}.bind();return typeof s!="function"||s.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(e,h,p){var c=e("../internals/function-bind-native"),s=Function.prototype.call;h.exports=c?s.bind(s):function(){return s.apply(s,arguments)}},{"../internals/function-bind-native":263}],265:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/has-own-property"),i=Function.prototype,r=c&&Object.getOwnPropertyDescriptor,t=s(i,"name"),n=t&&function(){}.name==="something",l=t&&(!c||c&&r(i,"name").configurable);h.exports={EXISTS:t,PROPER:n,CONFIGURABLE:l}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/a-callable");h.exports=function(i,r,t){try{return c(s(Object.getOwnPropertyDescriptor(i,r)[t]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(e,h,p){var c=e("../internals/classof-raw"),s=e("../internals/function-uncurry-this");h.exports=function(i){if(c(i)==="Function")return s(i)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(e,h,p){var c=e("../internals/function-bind-native"),s=Function.prototype,i=s.call,r=c&&s.bind.bind(i,i);h.exports=c?r:function(t){return function(){return i.apply(t,arguments)}}},{"../internals/function-bind-native":263}],269:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/is-callable"),i=function(r){return s(r)?r:void 0};h.exports=function(r,t){return arguments.length<2?i(c[r]):c[r]&&c[r][t]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(e,h,p){var c=e("../internals/classof"),s=e("../internals/get-method"),i=e("../internals/is-null-or-undefined"),r=e("../internals/iterators"),t=e("../internals/well-known-symbol")("iterator");h.exports=function(n){if(!i(n))return s(n,t)||s(n,"@@iterator")||r[c(n)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(e,h,p){var c=e("../internals/function-call"),s=e("../internals/a-callable"),i=e("../internals/an-object"),r=e("../internals/try-to-string"),t=e("../internals/get-iterator-method"),n=TypeError;h.exports=function(l,a){var o=arguments.length<2?t(l):a;if(s(o))return i(c(o,l));throw new n(r(l)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/is-array"),i=e("../internals/is-callable"),r=e("../internals/classof-raw"),t=e("../internals/to-string"),n=c([].push);h.exports=function(l){if(i(l))return l;if(s(l)){for(var a=l.length,o=[],d=0;d<a;d++){var f=l[d];typeof f=="string"?n(o,f):typeof f!="number"&&r(f)!=="Number"&&r(f)!=="String"||n(o,t(f))}var u=o.length,g=!0;return function(m,k){if(g)return g=!1,k;if(s(this))return k;for(var E=0;E<u;E++)if(o[E]===m)return k}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(e,h,p){var c=e("../internals/a-callable"),s=e("../internals/is-null-or-undefined");h.exports=function(i,r){var t=i[r];return s(t)?void 0:c(t)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(e,h,p){(function(c){(function(){var s=function(i){return i&&i.Math===Math&&i};h.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof c=="object"&&c)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/to-object"),i=c({}.hasOwnProperty);h.exports=Object.hasOwn||function(r,t){return i(s(r),t)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(e,h,p){h.exports={}},{}],277:[function(e,h,p){h.exports=function(c,s){try{arguments.length===1?console.error(c):console.error(c,s)}catch{}}},{}],278:[function(e,h,p){var c=e("../internals/get-built-in");h.exports=c("document","documentElement")},{"../internals/get-built-in":269}],279:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/fails"),i=e("../internals/document-create-element");h.exports=!c&&!s(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/fails"),i=e("../internals/classof-raw"),r=Object,t=c("".split);h.exports=s(function(){return!r("z").propertyIsEnumerable(0)})?function(n){return i(n)==="String"?t(n,""):r(n)}:r},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/is-callable"),i=e("../internals/shared-store"),r=c(Function.toString);s(i.inspectSource)||(i.inspectSource=function(t){return r(t)}),h.exports=i.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(e,h,p){var c,s,i,r=e("../internals/weak-map-basic-detection"),t=e("../internals/global"),n=e("../internals/is-object"),l=e("../internals/create-non-enumerable-property"),a=e("../internals/has-own-property"),o=e("../internals/shared-store"),d=e("../internals/shared-key"),f=e("../internals/hidden-keys"),u=t.TypeError,g=t.WeakMap;if(r||o.state){var m=o.state||(o.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,c=function(E,A){if(m.has(E))throw new u("Object already initialized");return A.facade=E,m.set(E,A),A},s=function(E){return m.get(E)||{}},i=function(E){return m.has(E)}}else{var k=d("state");f[k]=!0,c=function(E,A){if(a(E,k))throw new u("Object already initialized");return A.facade=E,l(E,k,A),A},s=function(E){return a(E,k)?E[k]:{}},i=function(E){return a(E,k)}}h.exports={set:c,get:s,has:i,enforce:function(E){return i(E)?s(E):c(E,{})},getterFor:function(E){return function(A){var L;if(!n(A)||(L=s(A)).type!==E)throw new u("Incompatible receiver, "+E+" required");return L}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(e,h,p){var c=e("../internals/well-known-symbol"),s=e("../internals/iterators"),i=c("iterator"),r=Array.prototype;h.exports=function(t){return t!==void 0&&(s.Array===t||r[i]===t)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(e,h,p){var c=e("../internals/classof-raw");h.exports=Array.isArray||function(s){return c(s)==="Array"}},{"../internals/classof-raw":235}],285:[function(e,h,p){var c=e("../internals/document-all"),s=c.all;h.exports=c.IS_HTMLDDA?function(i){return typeof i=="function"||i===s}:function(i){return typeof i=="function"}},{"../internals/document-all":248}],286:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/fails"),i=e("../internals/is-callable"),r=e("../internals/classof"),t=e("../internals/get-built-in"),n=e("../internals/inspect-source"),l=function(){},a=[],o=t("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=c(d.exec),u=!d.test(l),g=function(k){if(!i(k))return!1;try{return o(l,a,k),!0}catch{return!1}},m=function(k){if(!i(k))return!1;switch(r(k)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!f(d,n(k))}catch{return!0}};m.sham=!0,h.exports=!o||s(function(){var k;return g(g.call)||!g(Object)||!g(function(){k=!0})||k})?m:g},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(e,h,p){var c=e("../internals/fails"),s=e("../internals/is-callable"),i=/#|\.prototype\./,r=function(o,d){var f=n[t(o)];return f===a||f!==l&&(s(d)?c(d):!!d)},t=r.normalize=function(o){return String(o).replace(i,".").toLowerCase()},n=r.data={},l=r.NATIVE="N",a=r.POLYFILL="P";h.exports=r},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(e,h,p){h.exports=function(c){return c==null}},{}],289:[function(e,h,p){var c=e("../internals/is-callable"),s=e("../internals/document-all"),i=s.all;h.exports=s.IS_HTMLDDA?function(r){return typeof r=="object"?r!==null:c(r)||r===i}:function(r){return typeof r=="object"?r!==null:c(r)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(e,h,p){h.exports=!1},{}],291:[function(e,h,p){var c=e("../internals/is-object"),s=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("match");h.exports=function(r){var t;return c(r)&&((t=r[i])!==void 0?!!t:s(r)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(e,h,p){var c=e("../internals/get-built-in"),s=e("../internals/is-callable"),i=e("../internals/object-is-prototype-of"),r=e("../internals/use-symbol-as-uid"),t=Object;h.exports=r?function(n){return typeof n=="symbol"}:function(n){var l=c("Symbol");return s(l)&&i(l.prototype,t(n))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(e,h,p){var c=e("../internals/function-bind-context"),s=e("../internals/function-call"),i=e("../internals/an-object"),r=e("../internals/try-to-string"),t=e("../internals/is-array-iterator-method"),n=e("../internals/length-of-array-like"),l=e("../internals/object-is-prototype-of"),a=e("../internals/get-iterator"),o=e("../internals/get-iterator-method"),d=e("../internals/iterator-close"),f=TypeError,u=function(m,k){this.stopped=m,this.result=k},g=u.prototype;h.exports=function(m,k,E){var A,L,z,R,I,B,H,$=E&&E.that,C=!(!E||!E.AS_ENTRIES),T=!(!E||!E.IS_RECORD),j=!(!E||!E.IS_ITERATOR),b=!(!E||!E.INTERRUPTED),v=c(k,$),x=function(N){return A&&d(A,"normal",N),new u(!0,N)},w=function(N){return C?(i(N),b?v(N[0],N[1],x):v(N[0],N[1])):b?v(N,x):v(N)};if(T)A=m.iterator;else if(j)A=m;else{if(!(L=o(m)))throw new f(r(m)+" is not iterable");if(t(L)){for(z=0,R=n(m);R>z;z++)if((I=w(m[z]))&&l(g,I))return I;return new u(!1)}A=a(m,L)}for(B=T?m.next:A.next;!(H=s(B,A)).done;){try{I=w(H.value)}catch(N){d(A,"throw",N)}if(typeof I=="object"&&I&&l(g,I))return I}return new u(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(e,h,p){var c=e("../internals/function-call"),s=e("../internals/an-object"),i=e("../internals/get-method");h.exports=function(r,t,n){var l,a;s(r);try{if(!(l=i(r,"return"))){if(t==="throw")throw n;return n}l=c(l,r)}catch(o){a=!0,l=o}if(t==="throw")throw n;if(a)throw l;return s(l),n}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(e,h,p){var c=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),i=e("../internals/create-property-descriptor"),r=e("../internals/set-to-string-tag"),t=e("../internals/iterators"),n=function(){return this};h.exports=function(l,a,o,d){var f=a+" Iterator";return l.prototype=s(c,{next:i(+!d,o)}),r(l,f,!1,!0),t[f]=n,l}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/is-pure"),r=e("../internals/function-name"),t=e("../internals/is-callable"),n=e("../internals/iterator-create-constructor"),l=e("../internals/object-get-prototype-of"),a=e("../internals/object-set-prototype-of"),o=e("../internals/set-to-string-tag"),d=e("../internals/create-non-enumerable-property"),f=e("../internals/define-built-in"),u=e("../internals/well-known-symbol"),g=e("../internals/iterators"),m=e("../internals/iterators-core"),k=r.PROPER,E=r.CONFIGURABLE,A=m.IteratorPrototype,L=m.BUGGY_SAFARI_ITERATORS,z=u("iterator"),R=function(){return this};h.exports=function(I,B,H,$,C,T,j){n(H,B,$);var b,v,x,w=function(F){if(F===C&&q)return q;if(!L&&F&&F in D)return D[F];switch(F){case"keys":case"values":case"entries":return function(){return new H(this,F)}}return function(){return new H(this)}},N=B+" Iterator",P=!1,D=I.prototype,V=D[z]||D["@@iterator"]||C&&D[C],q=!L&&V||w(C),G=B==="Array"&&D.entries||V;if(G&&(b=l(G.call(new I)))!==Object.prototype&&b.next&&(i||l(b)===A||(a?a(b,A):t(b[z])||f(b,z,R)),o(b,N,!0,!0),i&&(g[N]=R)),k&&C==="values"&&V&&V.name!=="values"&&(!i&&E?d(D,"name","values"):(P=!0,q=function(){return s(V,this)})),C)if(v={values:w("values"),keys:T?q:w("keys"),entries:w("entries")},j)for(x in v)(L||P||!(x in D))&&f(D,x,v[x]);else c({target:B,proto:!0,forced:L||P},v);return i&&!j||D[z]===q||f(D,z,q,{name:C}),g[B]=q,v}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(e,h,p){var c,s,i,r=e("../internals/fails"),t=e("../internals/is-callable"),n=e("../internals/is-object"),l=e("../internals/object-create"),a=e("../internals/object-get-prototype-of"),o=e("../internals/define-built-in"),d=e("../internals/well-known-symbol"),f=e("../internals/is-pure"),u=d("iterator"),g=!1;[].keys&&("next"in(i=[].keys())?(s=a(a(i)))!==Object.prototype&&(c=s):g=!0),!n(c)||r(function(){var m={};return c[u].call(m)!==m})?c={}:f&&(c=l(c)),t(c[u])||o(c,u,function(){return this}),h.exports={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:g}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(e,h,p){arguments[4][276][0].apply(p,arguments)},{dup:276}],299:[function(e,h,p){var c=e("../internals/to-length");h.exports=function(s){return c(s.length)}},{"../internals/to-length":343}],300:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/fails"),i=e("../internals/is-callable"),r=e("../internals/has-own-property"),t=e("../internals/descriptors"),n=e("../internals/function-name").CONFIGURABLE,l=e("../internals/inspect-source"),a=e("../internals/internal-state"),o=a.enforce,d=a.get,f=String,u=Object.defineProperty,g=c("".slice),m=c("".replace),k=c([].join),E=t&&!s(function(){return u(function(){},"length",{value:8}).length!==8}),A=String(String).split("String"),L=h.exports=function(z,R,I){g(f(R),0,7)==="Symbol("&&(R="["+m(f(R),/^Symbol\(([^)]*)\)/,"$1")+"]"),I&&I.getter&&(R="get "+R),I&&I.setter&&(R="set "+R),(!r(z,"name")||n&&z.name!==R)&&(t?u(z,"name",{value:R,configurable:!0}):z.name=R),E&&I&&r(I,"arity")&&z.length!==I.arity&&u(z,"length",{value:I.arity});try{I&&r(I,"constructor")&&I.constructor?t&&u(z,"prototype",{writable:!1}):z.prototype&&(z.prototype=void 0)}catch{}var B=o(z);return r(B,"source")||(B.source=k(A,typeof R=="string"?R:"")),z};Function.prototype.toString=L(function(){return i(this)&&d(this).source||l(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(e,h,p){var c=Math.ceil,s=Math.floor;h.exports=Math.trunc||function(i){var r=+i;return(r>0?s:c)(r)}},{}],302:[function(e,h,p){var c,s,i,r,t,n=e("../internals/global"),l=e("../internals/function-bind-context"),a=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/task").set,d=e("../internals/queue"),f=e("../internals/engine-is-ios"),u=e("../internals/engine-is-ios-pebble"),g=e("../internals/engine-is-webos-webkit"),m=e("../internals/engine-is-node"),k=n.MutationObserver||n.WebKitMutationObserver,E=n.document,A=n.process,L=n.Promise,z=a(n,"queueMicrotask"),R=z&&z.value;if(!R){var I=new d,B=function(){var H,$;for(m&&(H=A.domain)&&H.exit();$=I.get();)try{$()}catch(C){throw I.head&&c(),C}H&&H.enter()};f||m||g||!k||!E?!u&&L&&L.resolve?((r=L.resolve(void 0)).constructor=L,t=l(r.then,r),c=function(){t(B)}):m?c=function(){A.nextTick(B)}:(o=l(o,n),c=function(){o(B)}):(s=!0,i=E.createTextNode(""),new k(B).observe(i,{characterData:!0}),c=function(){i.data=s=!s}),R=function(H){I.head||c(),I.add(H)}}h.exports=R},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(e,h,p){var c=e("../internals/a-callable"),s=TypeError,i=function(r){var t,n;this.promise=new r(function(l,a){if(t!==void 0||n!==void 0)throw new s("Bad Promise constructor");t=l,n=a}),this.resolve=c(t),this.reject=c(n)};h.exports.f=function(r){return new i(r)}},{"../internals/a-callable":222}],304:[function(e,h,p){var c=e("../internals/is-regexp"),s=TypeError;h.exports=function(i){if(c(i))throw new s("The method doesn't accept regular expressions");return i}},{"../internals/is-regexp":291}],305:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/function-uncurry-this"),i=e("../internals/function-call"),r=e("../internals/fails"),t=e("../internals/object-keys"),n=e("../internals/object-get-own-property-symbols"),l=e("../internals/object-property-is-enumerable"),a=e("../internals/to-object"),o=e("../internals/indexed-object"),d=Object.assign,f=Object.defineProperty,u=s([].concat);h.exports=!d||r(function(){if(c&&d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var g={},m={},k=Symbol("assign detection");return g[k]=7,"abcdefghijklmnopqrst".split("").forEach(function(E){m[E]=E}),d({},g)[k]!==7||t(d({},m)).join("")!=="abcdefghijklmnopqrst"})?function(g,m){for(var k=a(g),E=arguments.length,A=1,L=n.f,z=l.f;E>A;)for(var R,I=o(arguments[A++]),B=L?u(t(I),L(I)):t(I),H=B.length,$=0;H>$;)R=B[$++],c&&!i(z,I,R)||(k[R]=I[R]);return k}:d},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(e,h,p){var c,s=e("../internals/an-object"),i=e("../internals/object-define-properties"),r=e("../internals/enum-bug-keys"),t=e("../internals/hidden-keys"),n=e("../internals/html"),l=e("../internals/document-create-element"),a=e("../internals/shared-key"),o=a("IE_PROTO"),d=function(){},f=function(m){return"<script>"+m+"<\/script>"},u=function(m){m.write(f("")),m.close();var k=m.parentWindow.Object;return m=null,k},g=function(){try{c=new ActiveXObject("htmlfile")}catch{}var m,k;g=typeof document<"u"?document.domain&&c?u(c):((k=l("iframe")).style.display="none",n.appendChild(k),k.src="javascript:",(m=k.contentWindow.document).open(),m.write(f("document.F=Object")),m.close(),m.F):u(c);for(var E=r.length;E--;)delete g.prototype[r[E]];return g()};t[o]=!0,h.exports=Object.create||function(m,k){var E;return m!==null?(d.prototype=s(m),E=new d,d.prototype=null,E[o]=m):E=g(),k===void 0?E:i.f(E,k)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/v8-prototype-define-bug"),i=e("../internals/object-define-property"),r=e("../internals/an-object"),t=e("../internals/to-indexed-object"),n=e("../internals/object-keys");p.f=c&&!s?Object.defineProperties:function(l,a){r(l);for(var o,d=t(a),f=n(a),u=f.length,g=0;u>g;)i.f(l,o=f[g++],d[o]);return l}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/ie8-dom-define"),i=e("../internals/v8-prototype-define-bug"),r=e("../internals/an-object"),t=e("../internals/to-property-key"),n=TypeError,l=Object.defineProperty,a=Object.getOwnPropertyDescriptor;p.f=c?i?function(o,d,f){if(r(o),d=t(d),r(f),typeof o=="function"&&d==="prototype"&&"value"in f&&"writable"in f&&!f.writable){var u=a(o,d);u&&u.writable&&(o[d]=f.value,f={configurable:"configurable"in f?f.configurable:u.configurable,enumerable:"enumerable"in f?f.enumerable:u.enumerable,writable:!1})}return l(o,d,f)}:l:function(o,d,f){if(r(o),d=t(d),r(f),s)try{return l(o,d,f)}catch{}if("get"in f||"set"in f)throw new n("Accessors not supported");return"value"in f&&(o[d]=f.value),o}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/function-call"),i=e("../internals/object-property-is-enumerable"),r=e("../internals/create-property-descriptor"),t=e("../internals/to-indexed-object"),n=e("../internals/to-property-key"),l=e("../internals/has-own-property"),a=e("../internals/ie8-dom-define"),o=Object.getOwnPropertyDescriptor;p.f=c?o:function(d,f){if(d=t(d),f=n(f),a)try{return o(d,f)}catch{}if(l(d,f))return r(!s(i.f,d,f),d[f])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(e,h,p){var c=e("../internals/classof-raw"),s=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-names").f,r=e("../internals/array-slice-simple"),t=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];h.exports.f=function(n){return t&&c(n)==="Window"?function(l){try{return i(l)}catch{return r(t)}}(n):i(s(n))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(e,h,p){var c=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys").concat("length","prototype");p.f=Object.getOwnPropertyNames||function(i){return c(i,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(e,h,p){p.f=Object.getOwnPropertySymbols},{}],313:[function(e,h,p){var c=e("../internals/has-own-property"),s=e("../internals/is-callable"),i=e("../internals/to-object"),r=e("../internals/shared-key"),t=e("../internals/correct-prototype-getter"),n=r("IE_PROTO"),l=Object,a=l.prototype;h.exports=t?l.getPrototypeOf:function(o){var d=i(o);if(c(d,n))return d[n];var f=d.constructor;return s(f)&&d instanceof f?f.prototype:d instanceof l?a:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(e,h,p){var c=e("../internals/function-uncurry-this");h.exports=c({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=e("../internals/has-own-property"),i=e("../internals/to-indexed-object"),r=e("../internals/array-includes").indexOf,t=e("../internals/hidden-keys"),n=c([].push);h.exports=function(l,a){var o,d=i(l),f=0,u=[];for(o in d)!s(t,o)&&s(d,o)&&n(u,o);for(;a.length>f;)s(d,o=a[f++])&&(~r(u,o)||n(u,o));return u}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(e,h,p){var c=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys");h.exports=Object.keys||function(i){return c(i,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(e,h,p){var c={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!c.call({1:2},1);p.f=i?function(r){var t=s(this,r);return!!t&&t.enumerable}:c},{}],318:[function(e,h,p){var c=e("../internals/function-uncurry-this-accessor"),s=e("../internals/an-object"),i=e("../internals/a-possible-prototype");h.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,t=!1,n={};try{(r=c(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch{}return function(l,a){return s(l),i(a),t?r(l,a):l.__proto__=a,l}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/fails"),i=e("../internals/function-uncurry-this"),r=e("../internals/object-get-prototype-of"),t=e("../internals/object-keys"),n=e("../internals/to-indexed-object"),l=i(e("../internals/object-property-is-enumerable").f),a=i([].push),o=c&&s(function(){var f=Object.create(null);return f[2]=2,!l(f,2)}),d=function(f){return function(u){for(var g,m=n(u),k=t(m),E=o&&r(m)===null,A=k.length,L=0,z=[];A>L;)g=k[L++],c&&!(E?g in m:l(m,g))||a(z,f?[g,m[g]]:m[g]);return z}};h.exports={entries:d(!0),values:d(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(e,h,p){var c=e("../internals/function-call"),s=e("../internals/is-callable"),i=e("../internals/is-object"),r=TypeError;h.exports=function(t,n){var l,a;if(n==="string"&&s(l=t.toString)&&!i(a=c(l,t))||s(l=t.valueOf)&&!i(a=c(l,t))||n!=="string"&&s(l=t.toString)&&!i(a=c(l,t)))return a;throw new r("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(e,h,p){var c=e("../internals/get-built-in"),s=e("../internals/function-uncurry-this"),i=e("../internals/object-get-own-property-names"),r=e("../internals/object-get-own-property-symbols"),t=e("../internals/an-object"),n=s([].concat);h.exports=c("Reflect","ownKeys")||function(l){var a=i.f(t(l)),o=r.f;return o?n(a,o(l)):a}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(e,h,p){var c=e("../internals/global");h.exports=c},{"../internals/global":274}],323:[function(e,h,p){h.exports=function(c){try{return{error:!1,value:c()}}catch(s){return{error:!0,value:s}}}},{}],324:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/promise-native-constructor"),i=e("../internals/is-callable"),r=e("../internals/is-forced"),t=e("../internals/inspect-source"),n=e("../internals/well-known-symbol"),l=e("../internals/engine-is-browser"),a=e("../internals/engine-is-deno"),o=e("../internals/is-pure"),d=e("../internals/engine-v8-version"),f=s&&s.prototype,u=n("species"),g=!1,m=i(c.PromiseRejectionEvent),k=r("Promise",function(){var E=t(s),A=E!==String(s);if(!A&&d===66||o&&(!f.catch||!f.finally))return!0;if(!d||d<51||!/native code/.test(E)){var L=new s(function(R){R(1)}),z=function(R){R(function(){},function(){})};if((L.constructor={})[u]=z,!(g=L.then(function(){})instanceof z))return!0}return!A&&(l||a)&&!m});h.exports={CONSTRUCTOR:k,REJECTION_EVENT:m,SUBCLASSING:g}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(e,h,p){var c=e("../internals/global");h.exports=c.Promise},{"../internals/global":274}],326:[function(e,h,p){var c=e("../internals/an-object"),s=e("../internals/is-object"),i=e("../internals/new-promise-capability");h.exports=function(r,t){if(c(r),s(t)&&t.constructor===r)return t;var n=i.f(r);return(0,n.resolve)(t),n.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(e,h,p){var c=e("../internals/promise-native-constructor"),s=e("../internals/check-correctness-of-iteration"),i=e("../internals/promise-constructor-detection").CONSTRUCTOR;h.exports=i||!s(function(r){c.all(r).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(e,h,p){var c=function(){this.head=null,this.tail=null};c.prototype={add:function(s){var i={item:s,next:null},r=this.tail;r?r.next=i:this.head=i,this.tail=i},get:function(){var s=this.head;if(s)return(this.head=s.next)===null&&(this.tail=null),s.item}},h.exports=c},{}],329:[function(e,h,p){var c=e("../internals/is-null-or-undefined"),s=TypeError;h.exports=function(i){if(c(i))throw new s("Can't call method on "+i);return i}},{"../internals/is-null-or-undefined":288}],330:[function(e,h,p){var c=e("../internals/get-built-in"),s=e("../internals/define-built-in-accessor"),i=e("../internals/well-known-symbol"),r=e("../internals/descriptors"),t=i("species");h.exports=function(n){var l=c(n);r&&l&&!l[t]&&s(l,t,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(e,h,p){var c=e("../internals/object-define-property").f,s=e("../internals/has-own-property"),i=e("../internals/well-known-symbol")("toStringTag");h.exports=function(r,t,n){r&&!n&&(r=r.prototype),r&&!s(r,i)&&c(r,i,{configurable:!0,value:t})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(e,h,p){var c=e("../internals/shared"),s=e("../internals/uid"),i=c("keys");h.exports=function(r){return i[r]||(i[r]=s(r))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/define-global-property"),i=c["__core-js_shared__"]||s("__core-js_shared__",{});h.exports=i},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(e,h,p){var c=e("../internals/is-pure"),s=e("../internals/shared-store");(h.exports=function(i,r){return s[i]||(s[i]=r!==void 0?r:{})})("versions",[]).push({version:"3.33.0",mode:c?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(e,h,p){var c=e("../internals/an-object"),s=e("../internals/a-constructor"),i=e("../internals/is-null-or-undefined"),r=e("../internals/well-known-symbol")("species");h.exports=function(t,n){var l,a=c(t).constructor;return a===void 0||i(l=c(a)[r])?n:s(l)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(e,h,p){var c=e("../internals/engine-v8-version"),s=e("../internals/fails"),i=e("../internals/global").String;h.exports=!!Object.getOwnPropertySymbols&&!s(function(){var r=Symbol("symbol detection");return!i(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&c&&c<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(e,h,p){var c=e("../internals/function-call"),s=e("../internals/get-built-in"),i=e("../internals/well-known-symbol"),r=e("../internals/define-built-in");h.exports=function(){var t=s("Symbol"),n=t&&t.prototype,l=n&&n.valueOf,a=i("toPrimitive");n&&!n[a]&&r(n,a,function(o){return c(l,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(e,h,p){var c=e("../internals/symbol-constructor-detection");h.exports=c&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(e,h,p){var c,s,i,r,t=e("../internals/global"),n=e("../internals/function-apply"),l=e("../internals/function-bind-context"),a=e("../internals/is-callable"),o=e("../internals/has-own-property"),d=e("../internals/fails"),f=e("../internals/html"),u=e("../internals/array-slice"),g=e("../internals/document-create-element"),m=e("../internals/validate-arguments-length"),k=e("../internals/engine-is-ios"),E=e("../internals/engine-is-node"),A=t.setImmediate,L=t.clearImmediate,z=t.process,R=t.Dispatch,I=t.Function,B=t.MessageChannel,H=t.String,$=0,C={};d(function(){c=t.location});var T=function(x){if(o(C,x)){var w=C[x];delete C[x],w()}},j=function(x){return function(){T(x)}},b=function(x){T(x.data)},v=function(x){t.postMessage(H(x),c.protocol+"//"+c.host)};A&&L||(A=function(x){m(arguments.length,1);var w=a(x)?x:I(x),N=u(arguments,1);return C[++$]=function(){n(w,void 0,N)},s($),$},L=function(x){delete C[x]},E?s=function(x){z.nextTick(j(x))}:R&&R.now?s=function(x){R.now(j(x))}:B&&!k?(r=(i=new B).port2,i.port1.onmessage=b,s=l(r.postMessage,r)):t.addEventListener&&a(t.postMessage)&&!t.importScripts&&c&&c.protocol!=="file:"&&!d(v)?(s=v,t.addEventListener("message",b,!1)):s="onreadystatechange"in g("script")?function(x){f.appendChild(g("script")).onreadystatechange=function(){f.removeChild(this),T(x)}}:function(x){setTimeout(j(x),0)}),h.exports={set:A,clear:L}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(e,h,p){var c=e("../internals/to-integer-or-infinity"),s=Math.max,i=Math.min;h.exports=function(r,t){var n=c(r);return n<0?s(n+t,0):i(n,t)}},{"../internals/to-integer-or-infinity":342}],341:[function(e,h,p){var c=e("../internals/indexed-object"),s=e("../internals/require-object-coercible");h.exports=function(i){return c(s(i))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(e,h,p){var c=e("../internals/math-trunc");h.exports=function(s){var i=+s;return i!=i||i===0?0:c(i)}},{"../internals/math-trunc":301}],343:[function(e,h,p){var c=e("../internals/to-integer-or-infinity"),s=Math.min;h.exports=function(i){return i>0?s(c(i),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(e,h,p){var c=e("../internals/require-object-coercible"),s=Object;h.exports=function(i){return s(c(i))}},{"../internals/require-object-coercible":329}],345:[function(e,h,p){var c=e("../internals/function-call"),s=e("../internals/is-object"),i=e("../internals/is-symbol"),r=e("../internals/get-method"),t=e("../internals/ordinary-to-primitive"),n=e("../internals/well-known-symbol"),l=TypeError,a=n("toPrimitive");h.exports=function(o,d){if(!s(o)||i(o))return o;var f,u=r(o,a);if(u){if(d===void 0&&(d="default"),f=c(u,o,d),!s(f)||i(f))return f;throw new l("Can't convert object to primitive value")}return d===void 0&&(d="number"),t(o,d)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(e,h,p){var c=e("../internals/to-primitive"),s=e("../internals/is-symbol");h.exports=function(i){var r=c(i,"string");return s(r)?r:r+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(e,h,p){var c={};c[e("../internals/well-known-symbol")("toStringTag")]="z",h.exports=String(c)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(e,h,p){var c=e("../internals/classof"),s=String;h.exports=function(i){if(c(i)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return s(i)}},{"../internals/classof":236}],349:[function(e,h,p){var c=String;h.exports=function(s){try{return c(s)}catch{return"Object"}}},{}],350:[function(e,h,p){var c=e("../internals/function-uncurry-this"),s=0,i=Math.random(),r=c(1 .toString);h.exports=function(t){return"Symbol("+(t===void 0?"":t)+")_"+r(++s+i,36)}},{"../internals/function-uncurry-this":268}],351:[function(e,h,p){var c=e("../internals/symbol-constructor-detection");h.exports=c&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(e,h,p){var c=e("../internals/descriptors"),s=e("../internals/fails");h.exports=c&&s(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(e,h,p){var c=TypeError;h.exports=function(s,i){if(s<i)throw new c("Not enough arguments");return s}},{}],354:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/is-callable"),i=c.WeakMap;h.exports=s(i)&&/native code/.test(String(i))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(e,h,p){var c=e("../internals/path"),s=e("../internals/has-own-property"),i=e("../internals/well-known-symbol-wrapped"),r=e("../internals/object-define-property").f;h.exports=function(t){var n=c.Symbol||(c.Symbol={});s(n,t)||r(n,t,{value:i.f(t)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(e,h,p){var c=e("../internals/well-known-symbol");p.f=c},{"../internals/well-known-symbol":357}],357:[function(e,h,p){var c=e("../internals/global"),s=e("../internals/shared"),i=e("../internals/has-own-property"),r=e("../internals/uid"),t=e("../internals/symbol-constructor-detection"),n=e("../internals/use-symbol-as-uid"),l=c.Symbol,a=s("wks"),o=n?l.for||l:l&&l.withoutSetter||r;h.exports=function(d){return i(a,d)||(a[d]=t&&i(l,d)?l[d]:o("Symbol."+d)),a[d]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/array-iteration").findIndex,i=e("../internals/add-to-unscopables"),r=!0;"findIndex"in[]&&Array(1).findIndex(function(){r=!1}),c({target:"Array",proto:!0,forced:r},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/array-iteration").find,i=e("../internals/add-to-unscopables"),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),c({target:"Array",proto:!0,forced:r},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/array-includes").includes,i=e("../internals/fails"),r=e("../internals/add-to-unscopables");c({target:"Array",proto:!0,forced:i(function(){return!Array(1).includes()})},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(e,h,p){var c=e("../internals/to-indexed-object"),s=e("../internals/add-to-unscopables"),i=e("../internals/iterators"),r=e("../internals/internal-state"),t=e("../internals/object-define-property").f,n=e("../internals/iterator-define"),l=e("../internals/create-iter-result-object"),a=e("../internals/is-pure"),o=e("../internals/descriptors"),d=r.set,f=r.getterFor("Array Iterator");h.exports=n(Array,"Array",function(g,m){d(this,{type:"Array Iterator",target:c(g),index:0,kind:m})},function(){var g=f(this),m=g.target,k=g.kind,E=g.index++;if(!m||E>=m.length)return g.target=void 0,l(void 0,!0);switch(k){case"keys":return l(E,!1);case"values":return l(m[E],!1)}return l([E,m[E]],!1)},"values");var u=i.Arguments=i.Array;if(s("keys"),s("values"),s("entries"),!a&&o&&u.name!=="values")try{t(u,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/get-built-in"),i=e("../internals/function-apply"),r=e("../internals/function-call"),t=e("../internals/function-uncurry-this"),n=e("../internals/fails"),l=e("../internals/is-callable"),a=e("../internals/is-symbol"),o=e("../internals/array-slice"),d=e("../internals/get-json-replacer-function"),f=e("../internals/symbol-constructor-detection"),u=String,g=s("JSON","stringify"),m=t(/./.exec),k=t("".charAt),E=t("".charCodeAt),A=t("".replace),L=t(1 .toString),z=/[\uD800-\uDFFF]/g,R=/^[\uD800-\uDBFF]$/,I=/^[\uDC00-\uDFFF]$/,B=!f||n(function(){var T=s("Symbol")("stringify detection");return g([T])!=="[null]"||g({a:T})!=="{}"||g(Object(T))!=="{}"}),H=n(function(){return g("\uDF06\uD834")!=='"\\udf06\\ud834"'||g("\uDEAD")!=='"\\udead"'}),$=function(T,j){var b=o(arguments),v=d(j);if(l(v)||T!==void 0&&!a(T))return b[1]=function(x,w){if(l(v)&&(w=r(v,this,u(x),w)),!a(w))return w},i(g,null,b)},C=function(T,j,b){var v=k(b,j-1),x=k(b,j+1);return m(R,T)&&!m(I,x)||m(I,T)&&!m(R,v)?"\\u"+L(E(T,0),16):T};g&&c({target:"JSON",stat:!0,arity:3,forced:B||H},{stringify:function(T,j,b){var v=o(arguments),x=i(B?$:g,null,v);return H&&typeof x=="string"?A(x,z,C):x}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(e,h,p){e("../internals/export")({target:"Number",stat:!0},{isNaN:function(c){return c!=c}})},{"../internals/export":259}],364:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/object-assign");c({target:"Object",stat:!0,arity:2,forced:Object.assign!==s},{assign:s})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/symbol-constructor-detection"),i=e("../internals/fails"),r=e("../internals/object-get-own-property-symbols"),t=e("../internals/to-object");c({target:"Object",stat:!0,forced:!s||i(function(){r.f(1)})},{getOwnPropertySymbols:function(n){var l=r.f;return l?l(t(n)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/to-object"),i=e("../internals/object-keys");c({target:"Object",stat:!0,forced:e("../internals/fails")(function(){i(1)})},{keys:function(r){return i(s(r))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/object-to-array").values;c({target:"Object",stat:!0},{values:function(i){return s(i)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/a-callable"),r=e("../internals/new-promise-capability"),t=e("../internals/perform"),n=e("../internals/iterate");c({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{all:function(l){var a=this,o=r.f(a),d=o.resolve,f=o.reject,u=t(function(){var g=i(a.resolve),m=[],k=0,E=1;n(l,function(A){var L=k++,z=!1;E++,s(g,a,A).then(function(R){z||(z=!0,m[L]=R,--E||d(m))},f)}),--E||d(m)});return u.error&&f(u.value),o.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/is-pure"),i=e("../internals/promise-constructor-detection").CONSTRUCTOR,r=e("../internals/promise-native-constructor"),t=e("../internals/get-built-in"),n=e("../internals/is-callable"),l=e("../internals/define-built-in"),a=r&&r.prototype;if(c({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(d){return this.then(void 0,d)}}),!s&&n(r)){var o=t("Promise").prototype.catch;a.catch!==o&&l(a,"catch",o,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(e,h,p){var c,s,i,r=e("../internals/export"),t=e("../internals/is-pure"),n=e("../internals/engine-is-node"),l=e("../internals/global"),a=e("../internals/function-call"),o=e("../internals/define-built-in"),d=e("../internals/object-set-prototype-of"),f=e("../internals/set-to-string-tag"),u=e("../internals/set-species"),g=e("../internals/a-callable"),m=e("../internals/is-callable"),k=e("../internals/is-object"),E=e("../internals/an-instance"),A=e("../internals/species-constructor"),L=e("../internals/task").set,z=e("../internals/microtask"),R=e("../internals/host-report-errors"),I=e("../internals/perform"),B=e("../internals/queue"),H=e("../internals/internal-state"),$=e("../internals/promise-native-constructor"),C=e("../internals/promise-constructor-detection"),T=e("../internals/new-promise-capability"),j=C.CONSTRUCTOR,b=C.REJECTION_EVENT,v=C.SUBCLASSING,x=H.getterFor("Promise"),w=H.set,N=$&&$.prototype,P=$,D=N,V=l.TypeError,q=l.document,G=l.process,F=T.f,X=F,O=!!(q&&q.createEvent&&l.dispatchEvent),M=function(re){var ue;return!(!k(re)||!m(ue=re.then))&&ue},U=function(re,ue){var ce,te,de,le=ue.value,ve=ue.state===1,we=ve?re.ok:re.fail,Se=re.resolve,_e=re.reject,Pe=re.domain;try{we?(ve||(ue.rejection===2&&ae(ue),ue.rejection=1),we===!0?ce=le:(Pe&&Pe.enter(),ce=we(le),Pe&&(Pe.exit(),de=!0)),ce===re.promise?_e(new V("Promise-chain cycle")):(te=M(ce))?a(te,ce,Se,_e):Se(ce)):_e(le)}catch(Fe){Pe&&!de&&Pe.exit(),_e(Fe)}},K=function(re,ue){re.notified||(re.notified=!0,z(function(){for(var ce,te=re.reactions;ce=te.get();)U(ce,re);re.notified=!1,ue&&!re.rejection&&Y(re)}))},Q=function(re,ue,ce){var te,de;O?((te=q.createEvent("Event")).promise=ue,te.reason=ce,te.initEvent(re,!1,!0),l.dispatchEvent(te)):te={promise:ue,reason:ce},!b&&(de=l["on"+re])?de(te):re==="unhandledrejection"&&R("Unhandled promise rejection",ce)},Y=function(re){a(L,l,function(){var ue,ce=re.facade,te=re.value;if(J(re)&&(ue=I(function(){n?G.emit("unhandledRejection",te,ce):Q("unhandledrejection",ce,te)}),re.rejection=n||J(re)?2:1,ue.error))throw ue.value})},J=function(re){return re.rejection!==1&&!re.parent},ae=function(re){a(L,l,function(){var ue=re.facade;n?G.emit("rejectionHandled",ue):Q("rejectionhandled",ue,re.value)})},ie=function(re,ue,ce){return function(te){re(ue,te,ce)}},Z=function(re,ue,ce){re.done||(re.done=!0,ce&&(re=ce),re.value=ue,re.state=2,K(re,!0))},ne=function(re,ue,ce){if(!re.done){re.done=!0,ce&&(re=ce);try{if(re.facade===ue)throw new V("Promise can't be resolved itself");var te=M(ue);te?z(function(){var de={done:!1};try{a(te,ue,ie(ne,de,re),ie(Z,de,re))}catch(le){Z(de,le,re)}}):(re.value=ue,re.state=1,K(re,!1))}catch(de){Z({done:!1},de,re)}}};if(j&&(D=(P=function(re){E(this,D),g(re),a(c,this);var ue=x(this);try{re(ie(ne,ue),ie(Z,ue))}catch(ce){Z(ue,ce)}}).prototype,(c=function(re){w(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new B,rejection:!1,state:0,value:void 0})}).prototype=o(D,"then",function(re,ue){var ce=x(this),te=F(A(this,P));return ce.parent=!0,te.ok=!m(re)||re,te.fail=m(ue)&&ue,te.domain=n?G.domain:void 0,ce.state===0?ce.reactions.add(te):z(function(){U(te,ce)}),te.promise}),s=function(){var re=new c,ue=x(re);this.promise=re,this.resolve=ie(ne,ue),this.reject=ie(Z,ue)},T.f=F=function(re){return re===P||re===void 0?new s(re):X(re)},!t&&m($)&&N!==Object.prototype)){i=N.then,v||o(N,"then",function(re,ue){var ce=this;return new P(function(te,de){a(i,ce,te,de)}).then(re,ue)},{unsafe:!0});try{delete N.constructor}catch{}d&&d(N,D)}r({global:!0,constructor:!0,wrap:!0,forced:j},{Promise:P}),f(P,"Promise",!1,!0),u("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/is-pure"),i=e("../internals/promise-native-constructor"),r=e("../internals/fails"),t=e("../internals/get-built-in"),n=e("../internals/is-callable"),l=e("../internals/species-constructor"),a=e("../internals/promise-resolve"),o=e("../internals/define-built-in"),d=i&&i.prototype;if(c({target:"Promise",proto:!0,real:!0,forced:!!i&&r(function(){d.finally.call({then:function(){}},function(){})})},{finally:function(u){var g=l(this,t("Promise")),m=n(u);return this.then(m?function(k){return a(g,u()).then(function(){return k})}:u,m?function(k){return a(g,u()).then(function(){throw k})}:u)}}),!s&&n(i)){var f=t("Promise").prototype.finally;d.finally!==f&&o(d,"finally",f,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(e,h,p){e("../modules/es.promise.constructor"),e("../modules/es.promise.all"),e("../modules/es.promise.catch"),e("../modules/es.promise.race"),e("../modules/es.promise.reject"),e("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/a-callable"),r=e("../internals/new-promise-capability"),t=e("../internals/perform"),n=e("../internals/iterate");c({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{race:function(l){var a=this,o=r.f(a),d=o.reject,f=t(function(){var u=i(a.resolve);n(l,function(g){s(u,a,g).then(o.resolve,d)})});return f.error&&d(f.value),o.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/new-promise-capability");c({target:"Promise",stat:!0,forced:e("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(r){var t=i.f(this);return s(t.reject,void 0,r),t.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/get-built-in"),i=e("../internals/is-pure"),r=e("../internals/promise-native-constructor"),t=e("../internals/promise-constructor-detection").CONSTRUCTOR,n=e("../internals/promise-resolve"),l=s("Promise"),a=i&&!t;c({target:"Promise",stat:!0,forced:i||t},{resolve:function(o){return n(a&&this===l?r:this,o)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/function-uncurry-this"),i=e("../internals/to-absolute-index"),r=RangeError,t=String.fromCharCode,n=String.fromCodePoint,l=s([].join);c({target:"String",stat:!0,arity:1,forced:!!n&&n.length!==1},{fromCodePoint:function(a){for(var o,d=[],f=arguments.length,u=0;f>u;){if(o=+arguments[u++],i(o,1114111)!==o)throw new r(o+" is not a valid code point");d[u]=o<65536?t(o):t(55296+((o-=65536)>>10),o%1024+56320)}return l(d,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/function-uncurry-this"),i=e("../internals/not-a-regexp"),r=e("../internals/require-object-coercible"),t=e("../internals/to-string"),n=e("../internals/correct-is-regexp-logic"),l=s("".indexOf);c({target:"String",proto:!0,forced:!n("includes")},{includes:function(a){return!!~l(t(r(this)),t(i(a)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(e,h,p){e("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/global"),i=e("../internals/function-call"),r=e("../internals/function-uncurry-this"),t=e("../internals/is-pure"),n=e("../internals/descriptors"),l=e("../internals/symbol-constructor-detection"),a=e("../internals/fails"),o=e("../internals/has-own-property"),d=e("../internals/object-is-prototype-of"),f=e("../internals/an-object"),u=e("../internals/to-indexed-object"),g=e("../internals/to-property-key"),m=e("../internals/to-string"),k=e("../internals/create-property-descriptor"),E=e("../internals/object-create"),A=e("../internals/object-keys"),L=e("../internals/object-get-own-property-names"),z=e("../internals/object-get-own-property-names-external"),R=e("../internals/object-get-own-property-symbols"),I=e("../internals/object-get-own-property-descriptor"),B=e("../internals/object-define-property"),H=e("../internals/object-define-properties"),$=e("../internals/object-property-is-enumerable"),C=e("../internals/define-built-in"),T=e("../internals/define-built-in-accessor"),j=e("../internals/shared"),b=e("../internals/shared-key"),v=e("../internals/hidden-keys"),x=e("../internals/uid"),w=e("../internals/well-known-symbol"),N=e("../internals/well-known-symbol-wrapped"),P=e("../internals/well-known-symbol-define"),D=e("../internals/symbol-define-to-primitive"),V=e("../internals/set-to-string-tag"),q=e("../internals/internal-state"),G=e("../internals/array-iteration").forEach,F=b("hidden"),X=q.set,O=q.getterFor("Symbol"),M=Object.prototype,U=s.Symbol,K=U&&U.prototype,Q=s.RangeError,Y=s.TypeError,J=s.QObject,ae=I.f,ie=B.f,Z=z.f,ne=$.f,re=r([].push),ue=j("symbols"),ce=j("op-symbols"),te=j("wks"),de=!J||!J.prototype||!J.prototype.findChild,le=function(Ee,je,Ie){var $e=ae(M,je);$e&&delete M[je],ie(Ee,je,Ie),$e&&Ee!==M&&ie(M,je,$e)},ve=n&&a(function(){return E(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a!==7})?le:ie,we=function(Ee,je){var Ie=ue[Ee]=E(K);return X(Ie,{type:"Symbol",tag:Ee,description:je}),n||(Ie.description=je),Ie},Se=function(Ee,je,Ie){Ee===M&&Se(ce,je,Ie),f(Ee);var $e=g(je);return f(Ie),o(ue,$e)?(Ie.enumerable?(o(Ee,F)&&Ee[F][$e]&&(Ee[F][$e]=!1),Ie=E(Ie,{enumerable:k(0,!1)})):(o(Ee,F)||ie(Ee,F,k(1,{})),Ee[F][$e]=!0),ve(Ee,$e,Ie)):ie(Ee,$e,Ie)},_e=function(Ee,je){f(Ee);var Ie=u(je),$e=A(Ie).concat(Me(Ie));return G($e,function(De){n&&!i(Pe,Ie,De)||Se(Ee,De,Ie[De])}),Ee},Pe=function(Ee){var je=g(Ee),Ie=i(ne,this,je);return!(this===M&&o(ue,je)&&!o(ce,je))&&(!(Ie||!o(this,je)||!o(ue,je)||o(this,F)&&this[F][je])||Ie)},Fe=function(Ee,je){var Ie=u(Ee),$e=g(je);if(Ie!==M||!o(ue,$e)||o(ce,$e)){var De=ae(Ie,$e);return!De||!o(ue,$e)||o(Ie,F)&&Ie[F][$e]||(De.enumerable=!0),De}},Oe=function(Ee){var je=Z(u(Ee)),Ie=[];return G(je,function($e){o(ue,$e)||o(v,$e)||re(Ie,$e)}),Ie},Me=function(Ee){var je=Ee===M,Ie=Z(je?ce:u(Ee)),$e=[];return G(Ie,function(De){!o(ue,De)||je&&!o(M,De)||re($e,ue[De])}),$e};l||(C(K=(U=function(){if(d(K,this))throw new Y("Symbol is not a constructor");var Ee=arguments.length&&arguments[0]!==void 0?m(arguments[0]):void 0,je=x(Ee),Ie=function($e){this===M&&i(Ie,ce,$e),o(this,F)&&o(this[F],je)&&(this[F][je]=!1);var De=k(1,$e);try{ve(this,je,De)}catch(Ze){if(!(Ze instanceof Q))throw Ze;le(this,je,De)}};return n&&de&&ve(M,je,{configurable:!0,set:Ie}),we(je,Ee)}).prototype,"toString",function(){return O(this).tag}),C(U,"withoutSetter",function(Ee){return we(x(Ee),Ee)}),$.f=Pe,B.f=Se,H.f=_e,I.f=Fe,L.f=z.f=Oe,R.f=Me,N.f=function(Ee){return we(w(Ee),Ee)},n&&(T(K,"description",{configurable:!0,get:function(){return O(this).description}}),t||C(M,"propertyIsEnumerable",Pe,{unsafe:!0}))),c({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:U}),G(A(te),function(Ee){P(Ee)}),c({target:"Symbol",stat:!0,forced:!l},{useSetter:function(){de=!0},useSimple:function(){de=!1}}),c({target:"Object",stat:!0,forced:!l,sham:!n},{create:function(Ee,je){return je===void 0?E(Ee):_e(E(Ee),je)},defineProperty:Se,defineProperties:_e,getOwnPropertyDescriptor:Fe}),c({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:Oe}),D(),V(U,"Symbol"),v[F]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/get-built-in"),i=e("../internals/has-own-property"),r=e("../internals/to-string"),t=e("../internals/shared"),n=e("../internals/symbol-registry-detection"),l=t("string-to-symbol-registry"),a=t("symbol-to-string-registry");c({target:"Symbol",stat:!0,forced:!n},{for:function(o){var d=r(o);if(i(l,d))return l[d];var f=s("Symbol")(d);return l[d]=f,a[f]=d,f}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(e,h,p){e("../modules/es.symbol.constructor"),e("../modules/es.symbol.for"),e("../modules/es.symbol.key-for"),e("../modules/es.json.stringify"),e("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(e,h,p){var c=e("../internals/export"),s=e("../internals/has-own-property"),i=e("../internals/is-symbol"),r=e("../internals/try-to-string"),t=e("../internals/shared"),n=e("../internals/symbol-registry-detection"),l=t("symbol-to-string-registry");c({target:"Symbol",stat:!0,forced:!n},{keyFor:function(a){if(!i(a))throw new TypeError(r(a)+" is not a symbol");if(s(l,a))return l[a]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(e,h,p){function c(s){return Object.prototype.toString.call(s)}p.isArray=function(s){return Array.isArray?Array.isArray(s):c(s)==="[object Array]"},p.isBoolean=function(s){return typeof s=="boolean"},p.isNull=function(s){return s===null},p.isNullOrUndefined=function(s){return s==null},p.isNumber=function(s){return typeof s=="number"},p.isString=function(s){return typeof s=="string"},p.isSymbol=function(s){return typeof s=="symbol"},p.isUndefined=function(s){return s===void 0},p.isRegExp=function(s){return c(s)==="[object RegExp]"},p.isObject=function(s){return typeof s=="object"&&s!==null},p.isDate=function(s){return c(s)==="[object Date]"},p.isError=function(s){return c(s)==="[object Error]"||s instanceof Error},p.isFunction=function(s){return typeof s=="function"},p.isPrimitive=function(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||s===void 0},p.isBuffer=e("buffer").Buffer.isBuffer},{buffer:220}],384:[function(e,h,p){(function(c){(function(){var s=e("elliptic"),i=e("bn.js");h.exports=function(l){return new t(l)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function t(l){this.curveType=r[l],this.curveType||(this.curveType={name:l}),this.curve=new s.ec(this.curveType.name),this.keys=void 0}function n(l,a,o){Array.isArray(l)||(l=l.toArray());var d=new c(l);if(o&&d.length<o){var f=new c(o-d.length);f.fill(0),d=c.concat([f,d])}return a?d.toString(a):d}r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1,t.prototype.generateKeys=function(l,a){return this.keys=this.curve.genKeyPair(),this.getPublicKey(l,a)},t.prototype.computeSecret=function(l,a,o){return a=a||"utf8",c.isBuffer(l)||(l=new c(l,a)),n(this.curve.keyFromPublic(l).getPublic().mul(this.keys.getPrivate()).getX(),o,this.curveType.byteLength)},t.prototype.getPublicKey=function(l,a){var o=this.keys.getPublic(a==="compressed",!0);return a==="hybrid"&&(o[o.length-1]%2?o[0]=7:o[0]=6),n(o,l)},t.prototype.getPrivateKey=function(l){return n(this.keys.getPrivate(),l)},t.prototype.setPublicKey=function(l,a){return a=a||"utf8",c.isBuffer(l)||(l=new c(l,a)),this.keys._importPublic(l),this},t.prototype.setPrivateKey=function(l,a){a=a||"utf8",c.isBuffer(l)||(l=new c(l,a));var o=new i(l);return o=o.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(o),this}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(e,h,p){arguments[4][184][0].apply(p,arguments)},{buffer:188,dup:184}],386:[function(e,h,p){var c=e("inherits"),s=e("md5.js"),i=e("ripemd160"),r=e("sha.js"),t=e("cipher-base");function n(l){t.call(this,"digest"),this._hash=l}c(n,t),n.prototype._update=function(l){this._hash.update(l)},n.prototype._final=function(){return this._hash.digest()},h.exports=function(l){return(l=l.toLowerCase())==="md5"?new s:l==="rmd160"||l==="ripemd160"?new i:new n(r(l))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(e,h,p){var c=e("md5.js");h.exports=function(s){return new c().update(s).digest()}},{"md5.js":450}],388:[function(e,h,p){var c=e("inherits"),s=e("./legacy"),i=e("cipher-base"),r=e("safe-buffer").Buffer,t=e("create-hash/md5"),n=e("ripemd160"),l=e("sha.js"),a=r.alloc(128);function o(d,f){i.call(this,"digest"),typeof f=="string"&&(f=r.from(f));var u=d==="sha512"||d==="sha384"?128:64;this._alg=d,this._key=f,f.length>u?f=(d==="rmd160"?new n:l(d)).update(f).digest():f.length<u&&(f=r.concat([f,a],u));for(var g=this._ipad=r.allocUnsafe(u),m=this._opad=r.allocUnsafe(u),k=0;k<u;k++)g[k]=54^f[k],m[k]=92^f[k];this._hash=d==="rmd160"?new n:l(d),this._hash.update(g)}c(o,i),o.prototype._update=function(d){this._hash.update(d)},o.prototype._final=function(){var d=this._hash.digest();return(this._alg==="rmd160"?new n:l(this._alg)).update(this._opad).update(d).digest()},h.exports=function(d,f){return(d=d.toLowerCase())==="rmd160"||d==="ripemd160"?new o("rmd160",f):d==="md5"?new s(t,f):new o(d,f)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(e,h,p){var c=e("inherits"),s=e("safe-buffer").Buffer,i=e("cipher-base"),r=s.alloc(128);function t(n,l){i.call(this,"digest"),typeof l=="string"&&(l=s.from(l)),this._alg=n,this._key=l,l.length>64?l=n(l):l.length<64&&(l=s.concat([l,r],64));for(var a=this._ipad=s.allocUnsafe(64),o=this._opad=s.allocUnsafe(64),d=0;d<64;d++)a[d]=54^l[d],o[d]=92^l[d];this._hash=[a]}c(t,i),t.prototype._update=function(n){this._hash.push(n)},t.prototype._final=function(){var n=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,n]))},h.exports=t},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(e,h,p){p.randomBytes=p.rng=p.pseudoRandomBytes=p.prng=e("randombytes"),p.createHash=p.Hash=e("create-hash"),p.createHmac=p.Hmac=e("create-hmac");var c=e("browserify-sign/algos"),s=Object.keys(c),i=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(s);p.getHashes=function(){return i};var r=e("pbkdf2");p.pbkdf2=r.pbkdf2,p.pbkdf2Sync=r.pbkdf2Sync;var t=e("browserify-cipher");p.Cipher=t.Cipher,p.createCipher=t.createCipher,p.Cipheriv=t.Cipheriv,p.createCipheriv=t.createCipheriv,p.Decipher=t.Decipher,p.createDecipher=t.createDecipher,p.Decipheriv=t.Decipheriv,p.createDecipheriv=t.createDecipheriv,p.getCiphers=t.getCiphers,p.listCiphers=t.listCiphers;var n=e("diffie-hellman");p.DiffieHellmanGroup=n.DiffieHellmanGroup,p.createDiffieHellmanGroup=n.createDiffieHellmanGroup,p.getDiffieHellman=n.getDiffieHellman,p.createDiffieHellman=n.createDiffieHellman,p.DiffieHellman=n.DiffieHellman;var l=e("browserify-sign");p.createSign=l.createSign,p.Sign=l.Sign,p.createVerify=l.createVerify,p.Verify=l.Verify,p.createECDH=e("create-ecdh");var a=e("public-encrypt");p.publicEncrypt=a.publicEncrypt,p.privateEncrypt=a.privateEncrypt,p.publicDecrypt=a.publicDecrypt,p.privateDecrypt=a.privateDecrypt;var o=e("randomfill");p.randomFill=o.randomFill,p.randomFillSync=o.randomFillSync,p.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},p.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(e,h,p){(function(c,s){typeof p=="object"&&h!==void 0?h.exports=s():(c=typeof globalThis<"u"?globalThis:c||self).dayjs=s()})(void 0,function(){var c=6e4,s=36e5,i="millisecond",r="second",t="minute",n="hour",l="day",a="week",o="month",d="quarter",f="year",u="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(b){var v=["th","st","nd","rd"],x=b%100;return"["+b+(v[(x-20)%10]||v[x]||v[0])+"]"}},A=function(b,v,x){var w=String(b);return!w||w.length>=v?b:""+Array(v+1-w.length).join(x)+b},L={s:A,z:function(b){var v=-b.utcOffset(),x=Math.abs(v),w=Math.floor(x/60),N=x%60;return(v<=0?"+":"-")+A(w,2,"0")+":"+A(N,2,"0")},m:function b(v,x){if(v.date()<x.date())return-b(x,v);var w=12*(x.year()-v.year())+(x.month()-v.month()),N=v.clone().add(w,o),P=x-N<0,D=v.clone().add(w+(P?-1:1),o);return+(-(w+(x-N)/(P?N-D:D-N))||0)},a:function(b){return b<0?Math.ceil(b)||0:Math.floor(b)},p:function(b){return{M:o,y:f,w:a,d:l,D:u,h:n,m:t,s:r,ms:i,Q:d}[b]||String(b||"").toLowerCase().replace(/s$/,"")},u:function(b){return b===void 0}},z="en",R={};R[z]=E;var I="$isDayjsObject",B=function(b){return b instanceof T||!(!b||!b[I])},H=function b(v,x,w){var N;if(!v)return z;if(typeof v=="string"){var P=v.toLowerCase();R[P]&&(N=P),x&&(R[P]=x,N=P);var D=v.split("-");if(!N&&D.length>1)return b(D[0])}else{var V=v.name;R[V]=v,N=V}return!w&&N&&(z=N),N||!w&&z},$=function(b,v){if(B(b))return b.clone();var x=typeof v=="object"?v:{};return x.date=b,x.args=arguments,new T(x)},C=L;C.l=H,C.i=B,C.w=function(b,v){return $(b,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var T=function(){function b(x){this.$L=H(x.locale,null,!0),this.parse(x),this.$x=this.$x||x.x||{},this[I]=!0}var v=b.prototype;return v.parse=function(x){this.$d=function(w){var N=w.date,P=w.utc;if(N===null)return new Date(NaN);if(C.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var D=N.match(m);if(D){var V=D[2]-1||0,q=(D[7]||"0").substring(0,3);return P?new Date(Date.UTC(D[1],V,D[3]||1,D[4]||0,D[5]||0,D[6]||0,q)):new Date(D[1],V,D[3]||1,D[4]||0,D[5]||0,D[6]||0,q)}}return new Date(N)}(x),this.init()},v.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},v.$utils=function(){return C},v.isValid=function(){return this.$d.toString()!==g},v.isSame=function(x,w){var N=$(x);return this.startOf(w)<=N&&N<=this.endOf(w)},v.isAfter=function(x,w){return $(x)<this.startOf(w)},v.isBefore=function(x,w){return this.endOf(w)<$(x)},v.$g=function(x,w,N){return C.u(x)?this[w]:this.set(N,x)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(x,w){var N=this,P=!!C.u(w)||w,D=C.p(x),V=function(K,Q){var Y=C.w(N.$u?Date.UTC(N.$y,Q,K):new Date(N.$y,Q,K),N);return P?Y:Y.endOf(l)},q=function(K,Q){return C.w(N.toDate()[K].apply(N.toDate("s"),(P?[0,0,0,0]:[23,59,59,999]).slice(Q)),N)},G=this.$W,F=this.$M,X=this.$D,O="set"+(this.$u?"UTC":"");switch(D){case f:return P?V(1,0):V(31,11);case o:return P?V(1,F):V(0,F+1);case a:var M=this.$locale().weekStart||0,U=(G<M?G+7:G)-M;return V(P?X-U:X+(6-U),F);case l:case u:return q(O+"Hours",0);case n:return q(O+"Minutes",1);case t:return q(O+"Seconds",2);case r:return q(O+"Milliseconds",3);default:return this.clone()}},v.endOf=function(x){return this.startOf(x,!1)},v.$set=function(x,w){var N,P=C.p(x),D="set"+(this.$u?"UTC":""),V=(N={},N[l]=D+"Date",N[u]=D+"Date",N[o]=D+"Month",N[f]=D+"FullYear",N[n]=D+"Hours",N[t]=D+"Minutes",N[r]=D+"Seconds",N[i]=D+"Milliseconds",N)[P],q=P===l?this.$D+(w-this.$W):w;if(P===o||P===f){var G=this.clone().set(u,1);G.$d[V](q),G.init(),this.$d=G.set(u,Math.min(this.$D,G.daysInMonth())).$d}else V&&this.$d[V](q);return this.init(),this},v.set=function(x,w){return this.clone().$set(x,w)},v.get=function(x){return this[C.p(x)]()},v.add=function(x,w){var N,P=this;x=Number(x);var D=C.p(w),V=function(F){var X=$(P);return C.w(X.date(X.date()+Math.round(F*x)),P)};if(D===o)return this.set(o,this.$M+x);if(D===f)return this.set(f,this.$y+x);if(D===l)return V(1);if(D===a)return V(7);var q=(N={},N[t]=c,N[n]=s,N[r]=1e3,N)[D]||1,G=this.$d.getTime()+x*q;return C.w(G,this)},v.subtract=function(x,w){return this.add(-1*x,w)},v.format=function(x){var w=this,N=this.$locale();if(!this.isValid())return N.invalidDate||g;var P=x||"YYYY-MM-DDTHH:mm:ssZ",D=C.z(this),V=this.$H,q=this.$m,G=this.$M,F=N.weekdays,X=N.months,O=N.meridiem,M=function(Q,Y,J,ae){return Q&&(Q[Y]||Q(w,P))||J[Y].slice(0,ae)},U=function(Q){return C.s(V%12||12,Q,"0")},K=O||function(Q,Y,J){var ae=Q<12?"AM":"PM";return J?ae.toLowerCase():ae};return P.replace(k,function(Q,Y){return Y||function(J){switch(J){case"YY":return String(w.$y).slice(-2);case"YYYY":return C.s(w.$y,4,"0");case"M":return G+1;case"MM":return C.s(G+1,2,"0");case"MMM":return M(N.monthsShort,G,X,3);case"MMMM":return M(X,G);case"D":return w.$D;case"DD":return C.s(w.$D,2,"0");case"d":return String(w.$W);case"dd":return M(N.weekdaysMin,w.$W,F,2);case"ddd":return M(N.weekdaysShort,w.$W,F,3);case"dddd":return F[w.$W];case"H":return String(V);case"HH":return C.s(V,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return K(V,q,!0);case"A":return K(V,q,!1);case"m":return String(q);case"mm":return C.s(q,2,"0");case"s":return String(w.$s);case"ss":return C.s(w.$s,2,"0");case"SSS":return C.s(w.$ms,3,"0");case"Z":return D}return null}(Q)||D.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(x,w,N){var P,D=this,V=C.p(w),q=$(x),G=(q.utcOffset()-this.utcOffset())*c,F=this-q,X=function(){return C.m(D,q)};switch(V){case f:P=X()/12;break;case o:P=X();break;case d:P=X()/3;break;case a:P=(F-G)/6048e5;break;case l:P=(F-G)/864e5;break;case n:P=F/s;break;case t:P=F/c;break;case r:P=F/1e3;break;default:P=F}return N?P:C.a(P)},v.daysInMonth=function(){return this.endOf(o).$D},v.$locale=function(){return R[this.$L]},v.locale=function(x,w){if(!x)return this.$L;var N=this.clone(),P=H(x,w,!0);return P&&(N.$L=P),N},v.clone=function(){return C.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},b}(),j=T.prototype;return $.prototype=j,[["$ms",i],["$s",r],["$m",t],["$H",n],["$W",l],["$M",o],["$y",f],["$D",u]].forEach(function(b){j[b[1]]=function(v){return this.$g(v,b[0],b[1])}}),$.extend=function(b,v){return b.$i||(b(v,T,$),b.$i=!0),$},$.locale=H,$.isDayjs=B,$.unix=function(b){return $(1e3*b)},$.en=R[z],$.Ls=R,$.p={},$})},{}],392:[function(e,h,p){(function(c,s){typeof p=="object"&&h!==void 0?h.exports=s():(c=typeof globalThis<"u"?globalThis:c||self).dayjs_plugin_customParseFormat=s()})(void 0,function(){var c={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,r=/\d\d?/,t=/\d*[^-_:/,()\s\d]+/,n={},l=function(m){return(m=+m)+(m>68?1900:2e3)},a=function(m){return function(k){this[m]=+k}},o=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(k){if(!k||k==="Z")return 0;var E=k.match(/([+-]|\d\d)/g),A=60*E[1]+(+E[2]||0);return A===0?0:E[0]==="+"?-A:A}(m)}],d=function(m){var k=n[m];return k&&(k.indexOf?k:k.s.concat(k.f))},f=function(m,k){var E,A=n.meridiem;if(A){for(var L=1;L<=24;L+=1)if(m.indexOf(A(L,0,k))>-1){E=L>12;break}}else E=m===(k?"pm":"PM");return E},u={A:[t,function(m){this.afternoon=f(m,!1)}],a:[t,function(m){this.afternoon=f(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[r,a("seconds")],ss:[r,a("seconds")],m:[r,a("minutes")],mm:[r,a("minutes")],H:[r,a("hours")],h:[r,a("hours")],HH:[r,a("hours")],hh:[r,a("hours")],D:[r,a("day")],DD:[i,a("day")],Do:[t,function(m){var k=n.ordinal,E=m.match(/\d+/);if(this.day=E[0],k)for(var A=1;A<=31;A+=1)k(A).replace(/\[|\]/g,"")===m&&(this.day=A)}],M:[r,a("month")],MM:[i,a("month")],MMM:[t,function(m){var k=d("months"),E=(d("monthsShort")||k.map(function(A){return A.slice(0,3)})).indexOf(m)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[t,function(m){var k=d("months").indexOf(m)+1;if(k<1)throw new Error;this.month=k%12||k}],Y:[/[+-]?\d+/,a("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,a("year")],Z:o,ZZ:o};function g(m){var k,E;k=m,E=n&&n.formats;for(var A=(m=k.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function($,C,T){var j=T&&T.toUpperCase();return C||E[T]||c[T]||E[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(b,v,x){return v||x.slice(1)})})).match(s),L=A.length,z=0;z<L;z+=1){var R=A[z],I=u[R],B=I&&I[0],H=I&&I[1];A[z]=H?{regex:B,parser:H}:R.replace(/^\[|\]$/g,"")}return function($){for(var C={},T=0,j=0;T<L;T+=1){var b=A[T];if(typeof b=="string")j+=b.length;else{var v=b.regex,x=b.parser,w=$.slice(j),N=v.exec(w)[0];x.call(C,N),$=$.replace(N,"")}}return function(P){var D=P.afternoon;if(D!==void 0){var V=P.hours;D?V<12&&(P.hours+=12):V===12&&(P.hours=0),delete P.afternoon}}(C),C}}return function(m,k,E){E.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var A=k.prototype,L=A.parse;A.parse=function(z){var R=z.date,I=z.utc,B=z.args;this.$u=I;var H=B[1];if(typeof H=="string"){var $=B[2]===!0,C=B[3]===!0,T=$||C,j=B[2];C&&(j=B[2]),n=this.$locale(),!$&&j&&(n=E.Ls[j]),this.$d=function(w,N,P){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*w);var D=g(N)(w),V=D.year,q=D.month,G=D.day,F=D.hours,X=D.minutes,O=D.seconds,M=D.milliseconds,U=D.zone,K=new Date,Q=G||(V||q?1:K.getDate()),Y=V||K.getFullYear(),J=0;V&&!q||(J=q>0?q-1:K.getMonth());var ae=F||0,ie=X||0,Z=O||0,ne=M||0;return U?new Date(Date.UTC(Y,J,Q,ae,ie,Z,ne+60*U.offset*1e3)):P?new Date(Date.UTC(Y,J,Q,ae,ie,Z,ne)):new Date(Y,J,Q,ae,ie,Z,ne)}catch{return new Date("")}}(R,H,I),this.init(),j&&j!==!0&&(this.$L=this.locale(j).$L),T&&R!=this.format(H)&&(this.$d=new Date("")),n={}}else if(H instanceof Array)for(var b=H.length,v=1;v<=b;v+=1){B[1]=H[v-1];var x=E.apply(this,B);if(x.isValid()){this.$d=x.$d,this.$L=x.$L,this.init();break}v===b&&(this.$d=new Date(""))}else L.call(this,z)}}})},{}],393:[function(e,h,p){(function(c,s){typeof p=="object"&&h!==void 0?h.exports=s():(c=typeof globalThis<"u"?globalThis:c||self).dayjs_plugin_utc=s()})(void 0,function(){var c="minute",s=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(r,t,n){var l=t.prototype;n.utc=function(m){var k={date:m,utc:!0,args:arguments};return new t(k)},l.utc=function(m){var k=n(this.toDate(),{locale:this.$L,utc:!0});return m?k.add(this.utcOffset(),c):k},l.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var a=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),a.call(this,m)};var o=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else o.call(this)};var d=l.utcOffset;l.utcOffset=function(m,k){var E=this.$utils().u;if(E(m))return this.$u?0:E(this.$offset)?d.call(this):this.$offset;if(typeof m=="string"&&(m=function(R){R===void 0&&(R="");var I=R.match(s);if(!I)return null;var B=(""+I[0]).match(i)||["-",0,0],H=B[0],$=60*+B[1]+ +B[2];return $===0?0:H==="+"?$:-$}(m))===null)return this;var A=Math.abs(m)<=16?60*m:m,L=this;if(k)return L.$offset=A,L.$u=m===0,L;if(m!==0){var z=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(L=this.local().add(A+z,c)).$offset=A,L.$x.$localOffset=z}else L=this.utc();return L};var f=l.format;l.format=function(m){var k=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,k)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var u=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var g=l.diff;l.diff=function(m,k,E){if(m&&this.$u===m.$u)return g.call(this,m,k,E);var A=this.local(),L=n(m).local();return g.call(A,L,k,E)}}})},{}],394:[function(e,h,p){p.utils=e("./des/utils"),p.Cipher=e("./des/cipher"),p.DES=e("./des/des"),p.CBC=e("./des/cbc"),p.EDE=e("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(e,h,p){var c=e("minimalistic-assert"),s=e("inherits"),i={};function r(t){c.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var n=0;n<this.iv.length;n++)this.iv[n]=t[n]}p.instantiate=function(t){function n(d){t.call(this,d),this._cbcInit()}s(n,t);for(var l=Object.keys(i),a=0;a<l.length;a++){var o=l[a];n.prototype[o]=i[o]}return n.create=function(d){return new n(d)},n},i._cbcInit=function(){var t=new r(this.options.iv);this._cbcState=t},i._update=function(t,n,l,a){var o=this._cbcState,d=this.constructor.super_.prototype,f=o.iv;if(this.type==="encrypt"){for(var u=0;u<this.blockSize;u++)f[u]^=t[n+u];for(d._update.call(this,f,0,l,a),u=0;u<this.blockSize;u++)f[u]=l[a+u]}else{for(d._update.call(this,t,n,l,a),u=0;u<this.blockSize;u++)l[a+u]^=f[u];for(u=0;u<this.blockSize;u++)f[u]=t[n+u]}}},{inherits:440,"minimalistic-assert":453}],396:[function(e,h,p){var c=e("minimalistic-assert");function s(i){this.options=i,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=i.padding!==!1}h.exports=s,s.prototype._init=function(){},s.prototype.update=function(i){return i.length===0?[]:this.type==="decrypt"?this._updateDecrypt(i):this._updateEncrypt(i)},s.prototype._buffer=function(i,r){for(var t=Math.min(this.buffer.length-this.bufferOff,i.length-r),n=0;n<t;n++)this.buffer[this.bufferOff+n]=i[r+n];return this.bufferOff+=t,t},s.prototype._flushBuffer=function(i,r){return this._update(this.buffer,0,i,r),this.bufferOff=0,this.blockSize},s.prototype._updateEncrypt=function(i){var r=0,t=0,n=(this.bufferOff+i.length)/this.blockSize|0,l=new Array(n*this.blockSize);this.bufferOff!==0&&(r+=this._buffer(i,r),this.bufferOff===this.buffer.length&&(t+=this._flushBuffer(l,t)));for(var a=i.length-(i.length-r)%this.blockSize;r<a;r+=this.blockSize)this._update(i,r,l,t),t+=this.blockSize;for(;r<i.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=i[r];return l},s.prototype._updateDecrypt=function(i){for(var r=0,t=0,n=Math.ceil((this.bufferOff+i.length)/this.blockSize)-1,l=new Array(n*this.blockSize);n>0;n--)r+=this._buffer(i,r),t+=this._flushBuffer(l,t);return r+=this._buffer(i,r),l},s.prototype.final=function(i){var r,t;return i&&(r=this.update(i)),t=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),r?r.concat(t):t},s.prototype._pad=function(i,r){if(r===0)return!1;for(;r<i.length;)i[r++]=0;return!0},s.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var i=new Array(this.blockSize);return this._update(this.buffer,0,i,0),i},s.prototype._unpad=function(i){return i},s.prototype._finalDecrypt=function(){c.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var i=new Array(this.blockSize);return this._flushBuffer(i,0),this._unpad(i)}},{"minimalistic-assert":453}],397:[function(e,h,p){var c=e("minimalistic-assert"),s=e("inherits"),i=e("./utils"),r=e("./cipher");function t(){this.tmp=new Array(2),this.keys=null}function n(a){r.call(this,a);var o=new t;this._desState=o,this.deriveKeys(o,a.key)}s(n,r),h.exports=n,n.create=function(a){return new n(a)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];n.prototype.deriveKeys=function(a,o){a.keys=new Array(32),c.equal(o.length,this.blockSize,"Invalid key length");var d=i.readUInt32BE(o,0),f=i.readUInt32BE(o,4);i.pc1(d,f,a.tmp,0),d=a.tmp[0],f=a.tmp[1];for(var u=0;u<a.keys.length;u+=2){var g=l[u>>>1];d=i.r28shl(d,g),f=i.r28shl(f,g),i.pc2(d,f,a.keys,u)}},n.prototype._update=function(a,o,d,f){var u=this._desState,g=i.readUInt32BE(a,o),m=i.readUInt32BE(a,o+4);i.ip(g,m,u.tmp,0),g=u.tmp[0],m=u.tmp[1],this.type==="encrypt"?this._encrypt(u,g,m,u.tmp,0):this._decrypt(u,g,m,u.tmp,0),g=u.tmp[0],m=u.tmp[1],i.writeUInt32BE(d,g,f),i.writeUInt32BE(d,m,f+4)},n.prototype._pad=function(a,o){if(this.padding===!1)return!1;for(var d=a.length-o,f=o;f<a.length;f++)a[f]=d;return!0},n.prototype._unpad=function(a){if(this.padding===!1)return a;for(var o=a[a.length-1],d=a.length-o;d<a.length;d++)c.equal(a[d],o);return a.slice(0,a.length-o)},n.prototype._encrypt=function(a,o,d,f,u){for(var g=o,m=d,k=0;k<a.keys.length;k+=2){var E=a.keys[k],A=a.keys[k+1];i.expand(m,a.tmp,0),E^=a.tmp[0],A^=a.tmp[1];var L=i.substitute(E,A),z=m;m=(g^i.permute(L))>>>0,g=z}i.rip(m,g,f,u)},n.prototype._decrypt=function(a,o,d,f,u){for(var g=d,m=o,k=a.keys.length-2;k>=0;k-=2){var E=a.keys[k],A=a.keys[k+1];i.expand(g,a.tmp,0),E^=a.tmp[0],A^=a.tmp[1];var L=i.substitute(E,A),z=g;g=(m^i.permute(L))>>>0,m=z}i.rip(g,m,f,u)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(e,h,p){var c=e("minimalistic-assert"),s=e("inherits"),i=e("./cipher"),r=e("./des");function t(l,a){c.equal(a.length,24,"Invalid key length");var o=a.slice(0,8),d=a.slice(8,16),f=a.slice(16,24);this.ciphers=l==="encrypt"?[r.create({type:"encrypt",key:o}),r.create({type:"decrypt",key:d}),r.create({type:"encrypt",key:f})]:[r.create({type:"decrypt",key:f}),r.create({type:"encrypt",key:d}),r.create({type:"decrypt",key:o})]}function n(l){i.call(this,l);var a=new t(this.type,this.options.key);this._edeState=a}s(n,i),h.exports=n,n.create=function(l){return new n(l)},n.prototype._update=function(l,a,o,d){var f=this._edeState;f.ciphers[0]._update(l,a,o,d),f.ciphers[1]._update(o,d,o,d),f.ciphers[2]._update(o,d,o,d)},n.prototype._pad=r.prototype._pad,n.prototype._unpad=r.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(e,h,p){p.readUInt32BE=function(r,t){return(r[0+t]<<24|r[1+t]<<16|r[2+t]<<8|r[3+t])>>>0},p.writeUInt32BE=function(r,t,n){r[0+n]=t>>>24,r[1+n]=t>>>16&255,r[2+n]=t>>>8&255,r[3+n]=255&t},p.ip=function(r,t,n,l){for(var a=0,o=0,d=6;d>=0;d-=2){for(var f=0;f<=24;f+=8)a<<=1,a|=t>>>f+d&1;for(f=0;f<=24;f+=8)a<<=1,a|=r>>>f+d&1}for(d=6;d>=0;d-=2){for(f=1;f<=25;f+=8)o<<=1,o|=t>>>f+d&1;for(f=1;f<=25;f+=8)o<<=1,o|=r>>>f+d&1}n[l+0]=a>>>0,n[l+1]=o>>>0},p.rip=function(r,t,n,l){for(var a=0,o=0,d=0;d<4;d++)for(var f=24;f>=0;f-=8)a<<=1,a|=t>>>f+d&1,a<<=1,a|=r>>>f+d&1;for(d=4;d<8;d++)for(f=24;f>=0;f-=8)o<<=1,o|=t>>>f+d&1,o<<=1,o|=r>>>f+d&1;n[l+0]=a>>>0,n[l+1]=o>>>0},p.pc1=function(r,t,n,l){for(var a=0,o=0,d=7;d>=5;d--){for(var f=0;f<=24;f+=8)a<<=1,a|=t>>f+d&1;for(f=0;f<=24;f+=8)a<<=1,a|=r>>f+d&1}for(f=0;f<=24;f+=8)a<<=1,a|=t>>f+d&1;for(d=1;d<=3;d++){for(f=0;f<=24;f+=8)o<<=1,o|=t>>f+d&1;for(f=0;f<=24;f+=8)o<<=1,o|=r>>f+d&1}for(f=0;f<=24;f+=8)o<<=1,o|=r>>f+d&1;n[l+0]=a>>>0,n[l+1]=o>>>0},p.r28shl=function(r,t){return r<<t&268435455|r>>>28-t};var c=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];p.pc2=function(r,t,n,l){for(var a=0,o=0,d=c.length>>>1,f=0;f<d;f++)a<<=1,a|=r>>>c[f]&1;for(f=d;f<c.length;f++)o<<=1,o|=t>>>c[f]&1;n[l+0]=a>>>0,n[l+1]=o>>>0},p.expand=function(r,t,n){var l=0,a=0;l=(1&r)<<5|r>>>27;for(var o=23;o>=15;o-=4)l<<=6,l|=r>>>o&63;for(o=11;o>=3;o-=4)a|=r>>>o&63,a<<=6;a|=(31&r)<<1|r>>>31,t[n+0]=l>>>0,t[n+1]=a>>>0};var s=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];p.substitute=function(r,t){for(var n=0,l=0;l<4;l++)n<<=4,n|=s[64*l+(r>>>18-6*l&63)];for(l=0;l<4;l++)n<<=4,n|=s[256+64*l+(t>>>18-6*l&63)];return n>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];p.permute=function(r){for(var t=0,n=0;n<i.length;n++)t<<=1,t|=r>>>i[n]&1;return t>>>0},p.padSplit=function(r,t,n){for(var l=r.toString(2);l.length<t;)l="0"+l;for(var a=[],o=0;o<t;o+=n)a.push(l.slice(o,o+n));return a.join(" ")}},{}],400:[function(e,h,p){(function(c){(function(){var s=e("./lib/generatePrime"),i=e("./lib/primes.json"),r=e("./lib/dh"),t={binary:!0,hex:!0,base64:!0};p.DiffieHellmanGroup=p.createDiffieHellmanGroup=p.getDiffieHellman=function(n){var l=new c(i[n].prime,"hex"),a=new c(i[n].gen,"hex");return new r(l,a)},p.createDiffieHellman=p.DiffieHellman=function n(l,a,o,d){return c.isBuffer(a)||t[a]===void 0?n(l,"binary",a,o):(a=a||"binary",d=d||"binary",o=o||new c([2]),c.isBuffer(o)||(o=new c(o,d)),typeof l=="number"?new r(s(l,o),o,!0):(c.isBuffer(l)||(l=new c(l,a)),new r(l,o,!0)))}}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(e,h,p){(function(c){(function(){var s=e("bn.js"),i=new(e("miller-rabin")),r=new s(24),t=new s(11),n=new s(10),l=new s(3),a=new s(7),o=e("./generatePrime"),d=e("randombytes");function f(E,A){return A=A||"utf8",c.isBuffer(E)||(E=new c(E,A)),this._pub=new s(E),this}function u(E,A){return A=A||"utf8",c.isBuffer(E)||(E=new c(E,A)),this._priv=new s(E),this}h.exports=m;var g={};function m(E,A,L){this.setGenerator(A),this.__prime=new s(E),this._prime=s.mont(this.__prime),this._primeLen=E.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,L?(this.setPublicKey=f,this.setPrivateKey=u):this._primeCode=8}function k(E,A){var L=new c(E.toArray());return A?L.toString(A):L}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(E,A){var L=A.toString("hex"),z=[L,E.toString(16)].join("_");if(z in g)return g[z];var R,I=0;if(E.isEven()||!o.simpleSieve||!o.fermatTest(E)||!i.test(E))return I+=1,I+=L==="02"||L==="05"?8:4,g[z]=I,I;switch(i.test(E.shrn(1))||(I+=2),L){case"02":E.mod(r).cmp(t)&&(I+=8);break;case"05":(R=E.mod(n)).cmp(l)&&R.cmp(a)&&(I+=8);break;default:I+=4}return g[z]=I,I}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new s(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(E){var A=(E=(E=new s(E)).toRed(this._prime)).redPow(this._priv).fromRed(),L=new c(A.toArray()),z=this.getPrime();if(L.length<z.length){var R=new c(z.length-L.length);R.fill(0),L=c.concat([R,L])}return L},m.prototype.getPublicKey=function(E){return k(this._pub,E)},m.prototype.getPrivateKey=function(E){return k(this._priv,E)},m.prototype.getPrime=function(E){return k(this.__prime,E)},m.prototype.getGenerator=function(E){return k(this._gen,E)},m.prototype.setGenerator=function(E,A){return A=A||"utf8",c.isBuffer(E)||(E=new c(E,A)),this.__gen=E,this._gen=new s(E),this}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(e,h,p){var c=e("randombytes");h.exports=E,E.simpleSieve=m,E.fermatTest=k;var s=e("bn.js"),i=new s(24),r=new(e("miller-rabin")),t=new s(1),n=new s(2),l=new s(5),a=(new s(16),new s(8),new s(10)),o=new s(3),d=(new s(7),new s(11)),f=new s(4),u=(new s(12),null);function g(){if(u!==null)return u;var A=[];A[0]=2;for(var L=1,z=3;z<1048576;z+=2){for(var R=Math.ceil(Math.sqrt(z)),I=0;I<L&&A[I]<=R&&z%A[I]!=0;I++);L!==I&&A[I]<=R||(A[L++]=z)}return u=A,A}function m(A){for(var L=g(),z=0;z<L.length;z++)if(A.modn(L[z])===0)return A.cmpn(L[z])===0;return!0}function k(A){var L=s.mont(A);return n.toRed(L).redPow(A.subn(1)).fromRed().cmpn(1)===0}function E(A,L){if(A<16)return new s(L===2||L===5?[140,123]:[140,39]);var z,R;for(L=new s(L);;){for(z=new s(c(Math.ceil(A/8)));z.bitLength()>A;)z.ishrn(1);if(z.isEven()&&z.iadd(t),z.testn(1)||z.iadd(n),L.cmp(n)){if(!L.cmp(l))for(;z.mod(a).cmp(o);)z.iadd(f)}else for(;z.mod(i).cmp(d);)z.iadd(f);if(m(R=z.shrn(1))&&m(z)&&k(R)&&k(z)&&r.test(R)&&r.test(z))return z}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(e,h,p){h.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(e,h,p){arguments[4][184][0].apply(p,arguments)},{buffer:188,dup:184}],405:[function(e,h,p){var c=p;c.version=e("../package.json").version,c.utils=e("./elliptic/utils"),c.rand=e("brorand"),c.curve=e("./elliptic/curve"),c.curves=e("./elliptic/curves"),c.ec=e("./elliptic/ec"),c.eddsa=e("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(e,h,p){var c=e("bn.js"),s=e("../utils"),i=s.getNAF,r=s.getJSF,t=s.assert;function n(a,o){this.type=a,this.p=new c(o.p,16),this.red=o.prime?c.red(o.prime):c.mont(this.p),this.zero=new c(0).toRed(this.red),this.one=new c(1).toRed(this.red),this.two=new c(2).toRed(this.red),this.n=o.n&&new c(o.n,16),this.g=o.g&&this.pointFromJSON(o.g,o.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var d=this.n&&this.p.div(this.n);!d||d.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(a,o){this.curve=a,this.type=o,this.precomputed=null}h.exports=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(a,o){t(a.precomputed);var d=a._getDoubles(),f=i(o,1,this._bitLength),u=(1<<d.step+1)-(d.step%2==0?2:1);u/=3;var g,m,k=[];for(g=0;g<f.length;g+=d.step){m=0;for(var E=g+d.step-1;E>=g;E--)m=(m<<1)+f[E];k.push(m)}for(var A=this.jpoint(null,null,null),L=this.jpoint(null,null,null),z=u;z>0;z--){for(g=0;g<k.length;g++)(m=k[g])===z?L=L.mixedAdd(d.points[g]):m===-z&&(L=L.mixedAdd(d.points[g].neg()));A=A.add(L)}return A.toP()},n.prototype._wnafMul=function(a,o){var d=4,f=a._getNAFPoints(d);d=f.wnd;for(var u=f.points,g=i(o,d,this._bitLength),m=this.jpoint(null,null,null),k=g.length-1;k>=0;k--){for(var E=0;k>=0&&g[k]===0;k--)E++;if(k>=0&&E++,m=m.dblp(E),k<0)break;var A=g[k];t(A!==0),m=a.type==="affine"?A>0?m.mixedAdd(u[A-1>>1]):m.mixedAdd(u[-A-1>>1].neg()):A>0?m.add(u[A-1>>1]):m.add(u[-A-1>>1].neg())}return a.type==="affine"?m.toP():m},n.prototype._wnafMulAdd=function(a,o,d,f,u){var g,m,k,E=this._wnafT1,A=this._wnafT2,L=this._wnafT3,z=0;for(g=0;g<f;g++){var R=(k=o[g])._getNAFPoints(a);E[g]=R.wnd,A[g]=R.points}for(g=f-1;g>=1;g-=2){var I=g-1,B=g;if(E[I]===1&&E[B]===1){var H=[o[I],null,null,o[B]];o[I].y.cmp(o[B].y)===0?(H[1]=o[I].add(o[B]),H[2]=o[I].toJ().mixedAdd(o[B].neg())):o[I].y.cmp(o[B].y.redNeg())===0?(H[1]=o[I].toJ().mixedAdd(o[B]),H[2]=o[I].add(o[B].neg())):(H[1]=o[I].toJ().mixedAdd(o[B]),H[2]=o[I].toJ().mixedAdd(o[B].neg()));var $=[-3,-1,-5,-7,0,7,5,1,3],C=r(d[I],d[B]);for(z=Math.max(C[0].length,z),L[I]=new Array(z),L[B]=new Array(z),m=0;m<z;m++){var T=0|C[0][m],j=0|C[1][m];L[I][m]=$[3*(T+1)+(j+1)],L[B][m]=0,A[I]=H}}else L[I]=i(d[I],E[I],this._bitLength),L[B]=i(d[B],E[B],this._bitLength),z=Math.max(L[I].length,z),z=Math.max(L[B].length,z)}var b=this.jpoint(null,null,null),v=this._wnafT4;for(g=z;g>=0;g--){for(var x=0;g>=0;){var w=!0;for(m=0;m<f;m++)v[m]=0|L[m][g],v[m]!==0&&(w=!1);if(!w)break;x++,g--}if(g>=0&&x++,b=b.dblp(x),g<0)break;for(m=0;m<f;m++){var N=v[m];N!==0&&(N>0?k=A[m][N-1>>1]:N<0&&(k=A[m][-N-1>>1].neg()),b=k.type==="affine"?b.mixedAdd(k):b.add(k))}}for(g=0;g<f;g++)A[g]=null;return u?b:b.toP()},n.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},n.prototype.decodePoint=function(a,o){a=s.toArray(a,o);var d=this.p.byteLength();if((a[0]===4||a[0]===6||a[0]===7)&&a.length-1==2*d)return a[0]===6?t(a[a.length-1]%2==0):a[0]===7&&t(a[a.length-1]%2==1),this.point(a.slice(1,1+d),a.slice(1+d,1+2*d));if((a[0]===2||a[0]===3)&&a.length-1===d)return this.pointFromX(a.slice(1,1+d),a[0]===3);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(a){return this.encode(a,!0)},l.prototype._encode=function(a){var o=this.curve.p.byteLength(),d=this.getX().toArray("be",o);return a?[this.getY().isEven()?2:3].concat(d):[4].concat(d,this.getY().toArray("be",o))},l.prototype.encode=function(a,o){return s.encode(this._encode(o),a)},l.prototype.precompute=function(a){if(this.precomputed)return this;var o={doubles:null,naf:null,beta:null};return o.naf=this._getNAFPoints(8),o.doubles=this._getDoubles(4,a),o.beta=this._getBeta(),this.precomputed=o,this},l.prototype._hasDoubles=function(a){if(!this.precomputed)return!1;var o=this.precomputed.doubles;return!!o&&o.points.length>=Math.ceil((a.bitLength()+1)/o.step)},l.prototype._getDoubles=function(a,o){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var d=[this],f=this,u=0;u<o;u+=a){for(var g=0;g<a;g++)f=f.dbl();d.push(f)}return{step:a,points:d}},l.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var o=[this],d=(1<<a)-1,f=d===1?null:this.dbl(),u=1;u<d;u++)o[u]=o[u-1].add(f);return{wnd:a,points:o}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(a){for(var o=this,d=0;d<a;d++)o=o.dbl();return o}},{"../utils":419,"bn.js":420}],407:[function(e,h,p){var c=e("../utils"),s=e("bn.js"),i=e("inherits"),r=e("./base"),t=c.assert;function n(a){this.twisted=(0|a.a)!=1,this.mOneA=this.twisted&&(0|a.a)==-1,this.extended=this.mOneA,r.call(this,"edwards",a),this.a=new s(a.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),t(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|a.c)==1}function l(a,o,d,f,u){r.BasePoint.call(this,a,"projective"),o===null&&d===null&&f===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(o,16),this.y=new s(d,16),this.z=f?new s(f,16):this.curve.one,this.t=u&&new s(u,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(n,r),h.exports=n,n.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)},n.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)},n.prototype.jpoint=function(a,o,d,f){return this.point(a,o,d,f)},n.prototype.pointFromX=function(a,o){(a=new s(a,16)).red||(a=a.toRed(this.red));var d=a.redSqr(),f=this.c2.redSub(this.a.redMul(d)),u=this.one.redSub(this.c2.redMul(this.d).redMul(d)),g=f.redMul(u.redInvm()),m=g.redSqrt();if(m.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var k=m.fromRed().isOdd();return(o&&!k||!o&&k)&&(m=m.redNeg()),this.point(a,m)},n.prototype.pointFromY=function(a,o){(a=new s(a,16)).red||(a=a.toRed(this.red));var d=a.redSqr(),f=d.redSub(this.c2),u=d.redMul(this.d).redMul(this.c2).redSub(this.a),g=f.redMul(u.redInvm());if(g.cmp(this.zero)===0){if(o)throw new Error("invalid point");return this.point(this.zero,a)}var m=g.redSqrt();if(m.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");return m.fromRed().isOdd()!==o&&(m=m.redNeg()),this.point(m,a)},n.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();var o=a.x.redSqr(),d=a.y.redSqr(),f=o.redMul(this.a).redAdd(d),u=this.c2.redMul(this.one.redAdd(this.d.redMul(o).redMul(d)));return f.cmp(u)===0},i(l,r.BasePoint),n.prototype.pointFromJSON=function(a){return l.fromJSON(this,a)},n.prototype.point=function(a,o,d,f){return new l(this,a,o,d,f)},l.fromJSON=function(a,o){return new l(a,o[0],o[1],o[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},l.prototype._extDbl=function(){var a=this.x.redSqr(),o=this.y.redSqr(),d=this.z.redSqr();d=d.redIAdd(d);var f=this.curve._mulA(a),u=this.x.redAdd(this.y).redSqr().redISub(a).redISub(o),g=f.redAdd(o),m=g.redSub(d),k=f.redSub(o),E=u.redMul(m),A=g.redMul(k),L=u.redMul(k),z=m.redMul(g);return this.curve.point(E,A,z,L)},l.prototype._projDbl=function(){var a,o,d,f,u,g,m=this.x.redAdd(this.y).redSqr(),k=this.x.redSqr(),E=this.y.redSqr();if(this.curve.twisted){var A=(f=this.curve._mulA(k)).redAdd(E);this.zOne?(a=m.redSub(k).redSub(E).redMul(A.redSub(this.curve.two)),o=A.redMul(f.redSub(E)),d=A.redSqr().redSub(A).redSub(A)):(u=this.z.redSqr(),g=A.redSub(u).redISub(u),a=m.redSub(k).redISub(E).redMul(g),o=A.redMul(f.redSub(E)),d=A.redMul(g))}else f=k.redAdd(E),u=this.curve._mulC(this.z).redSqr(),g=f.redSub(u).redSub(u),a=this.curve._mulC(m.redISub(f)).redMul(g),o=this.curve._mulC(f).redMul(k.redISub(E)),d=f.redMul(g);return this.curve.point(a,o,d)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(a){var o=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),d=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),f=this.t.redMul(this.curve.dd).redMul(a.t),u=this.z.redMul(a.z.redAdd(a.z)),g=d.redSub(o),m=u.redSub(f),k=u.redAdd(f),E=d.redAdd(o),A=g.redMul(m),L=k.redMul(E),z=g.redMul(E),R=m.redMul(k);return this.curve.point(A,L,R,z)},l.prototype._projAdd=function(a){var o,d,f=this.z.redMul(a.z),u=f.redSqr(),g=this.x.redMul(a.x),m=this.y.redMul(a.y),k=this.curve.d.redMul(g).redMul(m),E=u.redSub(k),A=u.redAdd(k),L=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(g).redISub(m),z=f.redMul(E).redMul(L);return this.curve.twisted?(o=f.redMul(A).redMul(m.redSub(this.curve._mulA(g))),d=E.redMul(A)):(o=f.redMul(A).redMul(m.redSub(g)),d=this.curve._mulC(E).redMul(A)),this.curve.point(z,o,d)},l.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)},l.prototype.mul=function(a){return this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)},l.prototype.mulAdd=function(a,o,d){return this.curve._wnafMulAdd(1,[this,o],[a,d],2,!1)},l.prototype.jmulAdd=function(a,o,d){return this.curve._wnafMulAdd(1,[this,o],[a,d],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(a){return this===a||this.getX().cmp(a.getX())===0&&this.getY().cmp(a.getY())===0},l.prototype.eqXToP=function(a){var o=a.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(o)===0)return!0;for(var d=a.clone(),f=this.curve.redN.redMul(this.z);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(o.redIAdd(f),this.x.cmp(o)===0)return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(e,h,p){var c=p;c.base=e("./base"),c.short=e("./short"),c.mont=e("./mont"),c.edwards=e("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(e,h,p){var c=e("bn.js"),s=e("inherits"),i=e("./base"),r=e("../utils");function t(l){i.call(this,"mont",l),this.a=new c(l.a,16).toRed(this.red),this.b=new c(l.b,16).toRed(this.red),this.i4=new c(4).toRed(this.red).redInvm(),this.two=new c(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function n(l,a,o){i.BasePoint.call(this,l,"projective"),a===null&&o===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new c(a,16),this.z=new c(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(t,i),h.exports=t,t.prototype.validate=function(l){var a=l.normalize().x,o=a.redSqr(),d=o.redMul(a).redAdd(o.redMul(this.a)).redAdd(a);return d.redSqrt().redSqr().cmp(d)===0},s(n,i.BasePoint),t.prototype.decodePoint=function(l,a){return this.point(r.toArray(l,a),1)},t.prototype.point=function(l,a){return new n(this,l,a)},t.prototype.pointFromJSON=function(l){return n.fromJSON(this,l)},n.prototype.precompute=function(){},n.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},n.fromJSON=function(l,a){return new n(l,a[0],a[1]||l.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.z.cmpn(0)===0},n.prototype.dbl=function(){var l=this.x.redAdd(this.z).redSqr(),a=this.x.redSub(this.z).redSqr(),o=l.redSub(a),d=l.redMul(a),f=o.redMul(a.redAdd(this.curve.a24.redMul(o)));return this.curve.point(d,f)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(l,a){var o=this.x.redAdd(this.z),d=this.x.redSub(this.z),f=l.x.redAdd(l.z),u=l.x.redSub(l.z).redMul(o),g=f.redMul(d),m=a.z.redMul(u.redAdd(g).redSqr()),k=a.x.redMul(u.redISub(g).redSqr());return this.curve.point(m,k)},n.prototype.mul=function(l){for(var a=l.clone(),o=this,d=this.curve.point(null,null),f=[];a.cmpn(0)!==0;a.iushrn(1))f.push(a.andln(1));for(var u=f.length-1;u>=0;u--)f[u]===0?(o=o.diffAdd(d,this),d=d.dbl()):(d=o.diffAdd(d,this),o=o.dbl());return d},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.eq=function(l){return this.getX().cmp(l.getX())===0},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(e,h,p){var c=e("../utils"),s=e("bn.js"),i=e("inherits"),r=e("./base"),t=c.assert;function n(o){r.call(this,"short",o),this.a=new s(o.a,16).toRed(this.red),this.b=new s(o.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(o),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(o,d,f,u){r.BasePoint.call(this,o,"affine"),d===null&&f===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(d,16),this.y=new s(f,16),u&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function a(o,d,f,u){r.BasePoint.call(this,o,"jacobian"),d===null&&f===null&&u===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(d,16),this.y=new s(f,16),this.z=new s(u,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(n,r),h.exports=n,n.prototype._getEndomorphism=function(o){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var d,f;if(o.beta)d=new s(o.beta,16).toRed(this.red);else{var u=this._getEndoRoots(this.p);d=(d=u[0].cmp(u[1])<0?u[0]:u[1]).toRed(this.red)}if(o.lambda)f=new s(o.lambda,16);else{var g=this._getEndoRoots(this.n);this.g.mul(g[0]).x.cmp(this.g.x.redMul(d))===0?f=g[0]:(f=g[1],t(this.g.mul(f).x.cmp(this.g.x.redMul(d))===0))}return{beta:d,lambda:f,basis:o.basis?o.basis.map(function(m){return{a:new s(m.a,16),b:new s(m.b,16)}}):this._getEndoBasis(f)}}},n.prototype._getEndoRoots=function(o){var d=o===this.p?this.red:s.mont(o),f=new s(2).toRed(d).redInvm(),u=f.redNeg(),g=new s(3).toRed(d).redNeg().redSqrt().redMul(f);return[u.redAdd(g).fromRed(),u.redSub(g).fromRed()]},n.prototype._getEndoBasis=function(o){for(var d,f,u,g,m,k,E,A,L,z=this.n.ushrn(Math.floor(this.n.bitLength()/2)),R=o,I=this.n.clone(),B=new s(1),H=new s(0),$=new s(0),C=new s(1),T=0;R.cmpn(0)!==0;){var j=I.div(R);A=I.sub(j.mul(R)),L=$.sub(j.mul(B));var b=C.sub(j.mul(H));if(!u&&A.cmp(z)<0)d=E.neg(),f=B,u=A.neg(),g=L;else if(u&&++T==2)break;E=A,I=R,R=A,$=B,B=L,C=H,H=b}m=A.neg(),k=L;var v=u.sqr().add(g.sqr());return m.sqr().add(k.sqr()).cmp(v)>=0&&(m=d,k=f),u.negative&&(u=u.neg(),g=g.neg()),m.negative&&(m=m.neg(),k=k.neg()),[{a:u,b:g},{a:m,b:k}]},n.prototype._endoSplit=function(o){var d=this.endo.basis,f=d[0],u=d[1],g=u.b.mul(o).divRound(this.n),m=f.b.neg().mul(o).divRound(this.n),k=g.mul(f.a),E=m.mul(u.a),A=g.mul(f.b),L=m.mul(u.b);return{k1:o.sub(k).sub(E),k2:A.add(L).neg()}},n.prototype.pointFromX=function(o,d){(o=new s(o,16)).red||(o=o.toRed(this.red));var f=o.redSqr().redMul(o).redIAdd(o.redMul(this.a)).redIAdd(this.b),u=f.redSqrt();if(u.redSqr().redSub(f).cmp(this.zero)!==0)throw new Error("invalid point");var g=u.fromRed().isOdd();return(d&&!g||!d&&g)&&(u=u.redNeg()),this.point(o,u)},n.prototype.validate=function(o){if(o.inf)return!0;var d=o.x,f=o.y,u=this.a.redMul(d),g=d.redSqr().redMul(d).redIAdd(u).redIAdd(this.b);return f.redSqr().redISub(g).cmpn(0)===0},n.prototype._endoWnafMulAdd=function(o,d,f){for(var u=this._endoWnafT1,g=this._endoWnafT2,m=0;m<o.length;m++){var k=this._endoSplit(d[m]),E=o[m],A=E._getBeta();k.k1.negative&&(k.k1.ineg(),E=E.neg(!0)),k.k2.negative&&(k.k2.ineg(),A=A.neg(!0)),u[2*m]=E,u[2*m+1]=A,g[2*m]=k.k1,g[2*m+1]=k.k2}for(var L=this._wnafMulAdd(1,u,g,2*m,f),z=0;z<2*m;z++)u[z]=null,g[z]=null;return L},i(l,r.BasePoint),n.prototype.point=function(o,d,f){return new l(this,o,d,f)},n.prototype.pointFromJSON=function(o,d){return l.fromJSON(this,o,d)},l.prototype._getBeta=function(){if(this.curve.endo){var o=this.precomputed;if(o&&o.beta)return o.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(o){var f=this.curve,u=function(g){return f.point(g.x.redMul(f.endo.beta),g.y)};o.beta=d,d.precomputed={beta:null,naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(u)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(u)}}}return d}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(o,d,f){typeof d=="string"&&(d=JSON.parse(d));var u=o.point(d[0],d[1],f);if(!d[2])return u;function g(k){return o.point(k[0],k[1],f)}var m=d[2];return u.precomputed={beta:null,doubles:m.doubles&&{step:m.doubles.step,points:[u].concat(m.doubles.points.map(g))},naf:m.naf&&{wnd:m.naf.wnd,points:[u].concat(m.naf.points.map(g))}},u},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(o){if(this.inf)return o;if(o.inf)return this;if(this.eq(o))return this.dbl();if(this.neg().eq(o))return this.curve.point(null,null);if(this.x.cmp(o.x)===0)return this.curve.point(null,null);var d=this.y.redSub(o.y);d.cmpn(0)!==0&&(d=d.redMul(this.x.redSub(o.x).redInvm()));var f=d.redSqr().redISub(this.x).redISub(o.x),u=d.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,u)},l.prototype.dbl=function(){if(this.inf)return this;var o=this.y.redAdd(this.y);if(o.cmpn(0)===0)return this.curve.point(null,null);var d=this.curve.a,f=this.x.redSqr(),u=o.redInvm(),g=f.redAdd(f).redIAdd(f).redIAdd(d).redMul(u),m=g.redSqr().redISub(this.x.redAdd(this.x)),k=g.redMul(this.x.redSub(m)).redISub(this.y);return this.curve.point(m,k)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(o){return o=new s(o,16),this.isInfinity()?this:this._hasDoubles(o)?this.curve._fixedNafMul(this,o):this.curve.endo?this.curve._endoWnafMulAdd([this],[o]):this.curve._wnafMul(this,o)},l.prototype.mulAdd=function(o,d,f){var u=[this,d],g=[o,f];return this.curve.endo?this.curve._endoWnafMulAdd(u,g):this.curve._wnafMulAdd(1,u,g,2)},l.prototype.jmulAdd=function(o,d,f){var u=[this,d],g=[o,f];return this.curve.endo?this.curve._endoWnafMulAdd(u,g,!0):this.curve._wnafMulAdd(1,u,g,2,!0)},l.prototype.eq=function(o){return this===o||this.inf===o.inf&&(this.inf||this.x.cmp(o.x)===0&&this.y.cmp(o.y)===0)},l.prototype.neg=function(o){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(o&&this.precomputed){var f=this.precomputed,u=function(g){return g.neg()};d.precomputed={naf:f.naf&&{wnd:f.naf.wnd,points:f.naf.points.map(u)},doubles:f.doubles&&{step:f.doubles.step,points:f.doubles.points.map(u)}}}return d},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(a,r.BasePoint),n.prototype.jpoint=function(o,d,f){return new a(this,o,d,f)},a.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var o=this.z.redInvm(),d=o.redSqr(),f=this.x.redMul(d),u=this.y.redMul(d).redMul(o);return this.curve.point(f,u)},a.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},a.prototype.add=function(o){if(this.isInfinity())return o;if(o.isInfinity())return this;var d=o.z.redSqr(),f=this.z.redSqr(),u=this.x.redMul(d),g=o.x.redMul(f),m=this.y.redMul(d.redMul(o.z)),k=o.y.redMul(f.redMul(this.z)),E=u.redSub(g),A=m.redSub(k);if(E.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var L=E.redSqr(),z=L.redMul(E),R=u.redMul(L),I=A.redSqr().redIAdd(z).redISub(R).redISub(R),B=A.redMul(R.redISub(I)).redISub(m.redMul(z)),H=this.z.redMul(o.z).redMul(E);return this.curve.jpoint(I,B,H)},a.prototype.mixedAdd=function(o){if(this.isInfinity())return o.toJ();if(o.isInfinity())return this;var d=this.z.redSqr(),f=this.x,u=o.x.redMul(d),g=this.y,m=o.y.redMul(d).redMul(this.z),k=f.redSub(u),E=g.redSub(m);if(k.cmpn(0)===0)return E.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=k.redSqr(),L=A.redMul(k),z=f.redMul(A),R=E.redSqr().redIAdd(L).redISub(z).redISub(z),I=E.redMul(z.redISub(R)).redISub(g.redMul(L)),B=this.z.redMul(k);return this.curve.jpoint(R,I,B)},a.prototype.dblp=function(o){if(o===0)return this;if(this.isInfinity())return this;if(!o)return this.dbl();var d;if(this.curve.zeroA||this.curve.threeA){var f=this;for(d=0;d<o;d++)f=f.dbl();return f}var u=this.curve.a,g=this.curve.tinv,m=this.x,k=this.y,E=this.z,A=E.redSqr().redSqr(),L=k.redAdd(k);for(d=0;d<o;d++){var z=m.redSqr(),R=L.redSqr(),I=R.redSqr(),B=z.redAdd(z).redIAdd(z).redIAdd(u.redMul(A)),H=m.redMul(R),$=B.redSqr().redISub(H.redAdd(H)),C=H.redISub($),T=B.redMul(C);T=T.redIAdd(T).redISub(I);var j=L.redMul(E);d+1<o&&(A=A.redMul(I)),m=$,E=j,L=T}return this.curve.jpoint(m,L.redMul(g),E)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},a.prototype._zeroDbl=function(){var o,d,f;if(this.zOne){var u=this.x.redSqr(),g=this.y.redSqr(),m=g.redSqr(),k=this.x.redAdd(g).redSqr().redISub(u).redISub(m);k=k.redIAdd(k);var E=u.redAdd(u).redIAdd(u),A=E.redSqr().redISub(k).redISub(k),L=m.redIAdd(m);L=(L=L.redIAdd(L)).redIAdd(L),o=A,d=E.redMul(k.redISub(A)).redISub(L),f=this.y.redAdd(this.y)}else{var z=this.x.redSqr(),R=this.y.redSqr(),I=R.redSqr(),B=this.x.redAdd(R).redSqr().redISub(z).redISub(I);B=B.redIAdd(B);var H=z.redAdd(z).redIAdd(z),$=H.redSqr(),C=I.redIAdd(I);C=(C=C.redIAdd(C)).redIAdd(C),o=$.redISub(B).redISub(B),d=H.redMul(B.redISub(o)).redISub(C),f=(f=this.y.redMul(this.z)).redIAdd(f)}return this.curve.jpoint(o,d,f)},a.prototype._threeDbl=function(){var o,d,f;if(this.zOne){var u=this.x.redSqr(),g=this.y.redSqr(),m=g.redSqr(),k=this.x.redAdd(g).redSqr().redISub(u).redISub(m);k=k.redIAdd(k);var E=u.redAdd(u).redIAdd(u).redIAdd(this.curve.a),A=E.redSqr().redISub(k).redISub(k);o=A;var L=m.redIAdd(m);L=(L=L.redIAdd(L)).redIAdd(L),d=E.redMul(k.redISub(A)).redISub(L),f=this.y.redAdd(this.y)}else{var z=this.z.redSqr(),R=this.y.redSqr(),I=this.x.redMul(R),B=this.x.redSub(z).redMul(this.x.redAdd(z));B=B.redAdd(B).redIAdd(B);var H=I.redIAdd(I),$=(H=H.redIAdd(H)).redAdd(H);o=B.redSqr().redISub($),f=this.y.redAdd(this.z).redSqr().redISub(R).redISub(z);var C=R.redSqr();C=(C=(C=C.redIAdd(C)).redIAdd(C)).redIAdd(C),d=B.redMul(H.redISub(o)).redISub(C)}return this.curve.jpoint(o,d,f)},a.prototype._dbl=function(){var o=this.curve.a,d=this.x,f=this.y,u=this.z,g=u.redSqr().redSqr(),m=d.redSqr(),k=f.redSqr(),E=m.redAdd(m).redIAdd(m).redIAdd(o.redMul(g)),A=d.redAdd(d),L=(A=A.redIAdd(A)).redMul(k),z=E.redSqr().redISub(L.redAdd(L)),R=L.redISub(z),I=k.redSqr();I=(I=(I=I.redIAdd(I)).redIAdd(I)).redIAdd(I);var B=E.redMul(R).redISub(I),H=f.redAdd(f).redMul(u);return this.curve.jpoint(z,B,H)},a.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var o=this.x.redSqr(),d=this.y.redSqr(),f=this.z.redSqr(),u=d.redSqr(),g=o.redAdd(o).redIAdd(o),m=g.redSqr(),k=this.x.redAdd(d).redSqr().redISub(o).redISub(u),E=(k=(k=(k=k.redIAdd(k)).redAdd(k).redIAdd(k)).redISub(m)).redSqr(),A=u.redIAdd(u);A=(A=(A=A.redIAdd(A)).redIAdd(A)).redIAdd(A);var L=g.redIAdd(k).redSqr().redISub(m).redISub(E).redISub(A),z=d.redMul(L);z=(z=z.redIAdd(z)).redIAdd(z);var R=this.x.redMul(E).redISub(z);R=(R=R.redIAdd(R)).redIAdd(R);var I=this.y.redMul(L.redMul(A.redISub(L)).redISub(k.redMul(E)));I=(I=(I=I.redIAdd(I)).redIAdd(I)).redIAdd(I);var B=this.z.redAdd(k).redSqr().redISub(f).redISub(E);return this.curve.jpoint(R,I,B)},a.prototype.mul=function(o,d){return o=new s(o,d),this.curve._wnafMul(this,o)},a.prototype.eq=function(o){if(o.type==="affine")return this.eq(o.toJ());if(this===o)return!0;var d=this.z.redSqr(),f=o.z.redSqr();if(this.x.redMul(f).redISub(o.x.redMul(d)).cmpn(0)!==0)return!1;var u=d.redMul(this.z),g=f.redMul(o.z);return this.y.redMul(g).redISub(o.y.redMul(u)).cmpn(0)===0},a.prototype.eqXToP=function(o){var d=this.z.redSqr(),f=o.toRed(this.curve.red).redMul(d);if(this.x.cmp(f)===0)return!0;for(var u=o.clone(),g=this.curve.redN.redMul(d);;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(f.redIAdd(g),this.x.cmp(f)===0)return!0}},a.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(e,h,p){var c,s=p,i=e("hash.js"),r=e("./curve"),t=e("./utils").assert;function n(a){a.type==="short"?this.curve=new r.short(a):a.type==="edwards"?this.curve=new r.edwards(a):this.curve=new r.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,t(this.g.validate(),"Invalid curve"),t(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(a,o){Object.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){var d=new n(o);return Object.defineProperty(s,a,{configurable:!0,enumerable:!0,value:d}),d}})}s.PresetCurve=n,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{c=e("./precomputed/secp256k1")}catch{c=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(e,h,p){var c=e("bn.js"),s=e("hmac-drbg"),i=e("../utils"),r=e("../curves"),t=e("brorand"),n=i.assert,l=e("./key"),a=e("./signature");function o(d){if(!(this instanceof o))return new o(d);typeof d=="string"&&(n(Object.prototype.hasOwnProperty.call(r,d),"Unknown curve "+d),d=r[d]),d instanceof r.PresetCurve&&(d={curve:d}),this.curve=d.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=d.curve.g,this.g.precompute(d.curve.n.bitLength()+1),this.hash=d.hash||d.curve.hash}h.exports=o,o.prototype.keyPair=function(d){return new l(this,d)},o.prototype.keyFromPrivate=function(d,f){return l.fromPrivate(this,d,f)},o.prototype.keyFromPublic=function(d,f){return l.fromPublic(this,d,f)},o.prototype.genKeyPair=function(d){d||(d={});for(var f=new s({hash:this.hash,pers:d.pers,persEnc:d.persEnc||"utf8",entropy:d.entropy||t(this.hash.hmacStrength),entropyEnc:d.entropy&&d.entropyEnc||"utf8",nonce:this.n.toArray()}),u=this.n.byteLength(),g=this.n.sub(new c(2));;){var m=new c(f.generate(u));if(!(m.cmp(g)>0))return m.iaddn(1),this.keyFromPrivate(m)}},o.prototype._truncateToN=function(d,f){var u=8*d.byteLength()-this.n.bitLength();return u>0&&(d=d.ushrn(u)),!f&&d.cmp(this.n)>=0?d.sub(this.n):d},o.prototype.sign=function(d,f,u,g){typeof u=="object"&&(g=u,u=null),g||(g={}),f=this.keyFromPrivate(f,u),d=this._truncateToN(new c(d,16));for(var m=this.n.byteLength(),k=f.getPrivate().toArray("be",m),E=d.toArray("be",m),A=new s({hash:this.hash,entropy:k,nonce:E,pers:g.pers,persEnc:g.persEnc||"utf8"}),L=this.n.sub(new c(1)),z=0;;z++){var R=g.k?g.k(z):new c(A.generate(this.n.byteLength()));if(!((R=this._truncateToN(R,!0)).cmpn(1)<=0||R.cmp(L)>=0)){var I=this.g.mul(R);if(!I.isInfinity()){var B=I.getX(),H=B.umod(this.n);if(H.cmpn(0)!==0){var $=R.invm(this.n).mul(H.mul(f.getPrivate()).iadd(d));if(($=$.umod(this.n)).cmpn(0)!==0){var C=(I.getY().isOdd()?1:0)|(B.cmp(H)!==0?2:0);return g.canonical&&$.cmp(this.nh)>0&&($=this.n.sub($),C^=1),new a({r:H,s:$,recoveryParam:C})}}}}}},o.prototype.verify=function(d,f,u,g){d=this._truncateToN(new c(d,16)),u=this.keyFromPublic(u,g);var m=(f=new a(f,"hex")).r,k=f.s;if(m.cmpn(1)<0||m.cmp(this.n)>=0||k.cmpn(1)<0||k.cmp(this.n)>=0)return!1;var E,A=k.invm(this.n),L=A.mul(d).umod(this.n),z=A.mul(m).umod(this.n);return this.curve._maxwellTrick?!(E=this.g.jmulAdd(L,u.getPublic(),z)).isInfinity()&&E.eqXToP(m):!(E=this.g.mulAdd(L,u.getPublic(),z)).isInfinity()&&E.getX().umod(this.n).cmp(m)===0},o.prototype.recoverPubKey=function(d,f,u,g){n((3&u)===u,"The recovery param is more than two bits"),f=new a(f,g);var m=this.n,k=new c(d),E=f.r,A=f.s,L=1&u,z=u>>1;if(E.cmp(this.curve.p.umod(this.curve.n))>=0&&z)throw new Error("Unable to find sencond key candinate");E=z?this.curve.pointFromX(E.add(this.curve.n),L):this.curve.pointFromX(E,L);var R=f.r.invm(m),I=m.sub(k).mul(R).umod(m),B=A.mul(R).umod(m);return this.g.mulAdd(I,E,B)},o.prototype.getKeyRecoveryParam=function(d,f,u,g){if((f=new a(f,g)).recoveryParam!==null)return f.recoveryParam;for(var m=0;m<4;m++){var k;try{k=this.recoverPubKey(d,f,m)}catch{continue}if(k.eq(u))return m}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(e,h,p){var c=e("bn.js"),s=e("../utils").assert;function i(r,t){this.ec=r,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}h.exports=i,i.fromPublic=function(r,t,n){return t instanceof i?t:new i(r,{pub:t,pubEnc:n})},i.fromPrivate=function(r,t,n){return t instanceof i?t:new i(r,{priv:t,privEnc:n})},i.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(r,t){return typeof r=="string"&&(t=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,r):this.pub},i.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(r,t){this.priv=new c(r,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(r,t){if(r.x||r.y)return this.ec.curve.type==="mont"?s(r.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||s(r.x&&r.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(r.x,r.y));this.pub=this.ec.curve.decodePoint(r,t)},i.prototype.derive=function(r){return r.validate()||s(r.validate(),"public point not validated"),r.mul(this.priv).getX()},i.prototype.sign=function(r,t,n){return this.ec.sign(r,this,t,n)},i.prototype.verify=function(r,t){return this.ec.verify(r,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(e,h,p){var c=e("bn.js"),s=e("../utils"),i=s.assert;function r(o,d){if(o instanceof r)return o;this._importDER(o,d)||(i(o.r&&o.s,"Signature without r or s"),this.r=new c(o.r,16),this.s=new c(o.s,16),o.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=o.recoveryParam)}function t(){this.place=0}function n(o,d){var f=o[d.place++];if(!(128&f))return f;var u=15&f;if(u===0||u>4)return!1;for(var g=0,m=0,k=d.place;m<u;m++,k++)g<<=8,g|=o[k],g>>>=0;return!(g<=127)&&(d.place=k,g)}function l(o){for(var d=0,f=o.length-1;!o[d]&&!(128&o[d+1])&&d<f;)d++;return d===0?o:o.slice(d)}function a(o,d){if(d<128)o.push(d);else{var f=1+(Math.log(d)/Math.LN2>>>3);for(o.push(128|f);--f;)o.push(d>>>(f<<3)&255);o.push(d)}}h.exports=r,r.prototype._importDER=function(o,d){o=s.toArray(o,d);var f=new t;if(o[f.place++]!==48)return!1;var u=n(o,f);if(u===!1||u+f.place!==o.length||o[f.place++]!==2)return!1;var g=n(o,f);if(g===!1)return!1;var m=o.slice(f.place,g+f.place);if(f.place+=g,o[f.place++]!==2)return!1;var k=n(o,f);if(k===!1||o.length!==k+f.place)return!1;var E=o.slice(f.place,k+f.place);if(m[0]===0){if(!(128&m[1]))return!1;m=m.slice(1)}if(E[0]===0){if(!(128&E[1]))return!1;E=E.slice(1)}return this.r=new c(m),this.s=new c(E),this.recoveryParam=null,!0},r.prototype.toDER=function(o){var d=this.r.toArray(),f=this.s.toArray();for(128&d[0]&&(d=[0].concat(d)),128&f[0]&&(f=[0].concat(f)),d=l(d),f=l(f);!(f[0]||128&f[1]);)f=f.slice(1);var u=[2];a(u,d.length),(u=u.concat(d)).push(2),a(u,f.length);var g=u.concat(f),m=[48];return a(m,g.length),m=m.concat(g),s.encode(m,o)}},{"../utils":419,"bn.js":420}],415:[function(e,h,p){var c=e("hash.js"),s=e("../curves"),i=e("../utils"),r=i.assert,t=i.parseBytes,n=e("./key"),l=e("./signature");function a(o){if(r(o==="ed25519","only tested with ed25519 so far"),!(this instanceof a))return new a(o);o=s[o].curve,this.curve=o,this.g=o.g,this.g.precompute(o.n.bitLength()+1),this.pointClass=o.point().constructor,this.encodingLength=Math.ceil(o.n.bitLength()/8),this.hash=c.sha512}h.exports=a,a.prototype.sign=function(o,d){o=t(o);var f=this.keyFromSecret(d),u=this.hashInt(f.messagePrefix(),o),g=this.g.mul(u),m=this.encodePoint(g),k=this.hashInt(m,f.pubBytes(),o).mul(f.priv()),E=u.add(k).umod(this.curve.n);return this.makeSignature({R:g,S:E,Rencoded:m})},a.prototype.verify=function(o,d,f){o=t(o),d=this.makeSignature(d);var u=this.keyFromPublic(f),g=this.hashInt(d.Rencoded(),u.pubBytes(),o),m=this.g.mul(d.S());return d.R().add(u.pub().mul(g)).eq(m)},a.prototype.hashInt=function(){for(var o=this.hash(),d=0;d<arguments.length;d++)o.update(arguments[d]);return i.intFromLE(o.digest()).umod(this.curve.n)},a.prototype.keyFromPublic=function(o){return n.fromPublic(this,o)},a.prototype.keyFromSecret=function(o){return n.fromSecret(this,o)},a.prototype.makeSignature=function(o){return o instanceof l?o:new l(this,o)},a.prototype.encodePoint=function(o){var d=o.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=o.getX().isOdd()?128:0,d},a.prototype.decodePoint=function(o){var d=(o=i.parseBytes(o)).length-1,f=o.slice(0,d).concat(-129&o[d]),u=(128&o[d])!=0,g=i.intFromLE(f);return this.curve.pointFromY(g,u)},a.prototype.encodeInt=function(o){return o.toArray("le",this.encodingLength)},a.prototype.decodeInt=function(o){return i.intFromLE(o)},a.prototype.isPoint=function(o){return o instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(e,h,p){var c=e("../utils"),s=c.assert,i=c.parseBytes,r=c.cachedProperty;function t(n,l){this.eddsa=n,this._secret=i(l.secret),n.isPoint(l.pub)?this._pub=l.pub:this._pubBytes=i(l.pub)}t.fromPublic=function(n,l){return l instanceof t?l:new t(n,{pub:l})},t.fromSecret=function(n,l){return l instanceof t?l:new t(n,{secret:l})},t.prototype.secret=function(){return this._secret},r(t,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),r(t,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),r(t,"privBytes",function(){var n=this.eddsa,l=this.hash(),a=n.encodingLength-1,o=l.slice(0,n.encodingLength);return o[0]&=248,o[a]&=127,o[a]|=64,o}),r(t,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),r(t,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),r(t,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),t.prototype.sign=function(n){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(n,this)},t.prototype.verify=function(n,l){return this.eddsa.verify(n,l,this)},t.prototype.getSecret=function(n){return s(this._secret,"KeyPair is public only"),c.encode(this.secret(),n)},t.prototype.getPublic=function(n){return c.encode(this.pubBytes(),n)},h.exports=t},{"../utils":419}],417:[function(e,h,p){var c=e("bn.js"),s=e("../utils"),i=s.assert,r=s.cachedProperty,t=s.parseBytes;function n(l,a){this.eddsa=l,typeof a!="object"&&(a=t(a)),Array.isArray(a)&&(a={R:a.slice(0,l.encodingLength),S:a.slice(l.encodingLength)}),i(a.R&&a.S,"Signature without R or S"),l.isPoint(a.R)&&(this._R=a.R),a.S instanceof c&&(this._S=a.S),this._Rencoded=Array.isArray(a.R)?a.R:a.Rencoded,this._Sencoded=Array.isArray(a.S)?a.S:a.Sencoded}r(n,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),r(n,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),r(n,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),r(n,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),n.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},n.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},h.exports=n},{"../utils":419,"bn.js":420}],418:[function(e,h,p){h.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(e,h,p){var c=p,s=e("bn.js"),i=e("minimalistic-assert"),r=e("minimalistic-crypto-utils");c.assert=i,c.toArray=r.toArray,c.zero2=r.zero2,c.toHex=r.toHex,c.encode=r.encode,c.getNAF=function(t,n,l){var a=new Array(Math.max(t.bitLength(),l)+1);a.fill(0);for(var o=1<<n+1,d=t.clone(),f=0;f<a.length;f++){var u,g=d.andln(o-1);d.isOdd()?(u=g>(o>>1)-1?(o>>1)-g:g,d.isubn(u)):u=0,a[f]=u,d.iushrn(1)}return a},c.getJSF=function(t,n){var l=[[],[]];t=t.clone(),n=n.clone();for(var a,o=0,d=0;t.cmpn(-o)>0||n.cmpn(-d)>0;){var f,u,g=t.andln(3)+o&3,m=n.andln(3)+d&3;g===3&&(g=-1),m===3&&(m=-1),f=(1&g)==0?0:(a=t.andln(7)+o&7)!==3&&a!==5||m!==2?g:-g,l[0].push(f),u=(1&m)==0?0:(a=n.andln(7)+d&7)!==3&&a!==5||g!==2?m:-m,l[1].push(u),2*o===f+1&&(o=1-o),2*d===u+1&&(d=1-d),t.iushrn(1),n.iushrn(1)}return l},c.cachedProperty=function(t,n,l){var a="_"+n;t.prototype[n]=function(){return this[a]!==void 0?this[a]:this[a]=l.call(this)}},c.parseBytes=function(t){return typeof t=="string"?c.toArray(t,"hex"):t},c.intFromLE=function(t){return new s(t,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(e,h,p){arguments[4][184][0].apply(p,arguments)},{buffer:188,dup:184}],421:[function(e,h,p){h.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(e,h,p){var c=Object.create||function(R){var I=function(){};return I.prototype=R,new I},s=Object.keys||function(R){var I=[];for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&I.push(B);return B},i=Function.prototype.bind||function(R){var I=this;return function(){return I.apply(R,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}h.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var t,n=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),t=l.x===0}catch{t=!1}function a(R){return R._maxListeners===void 0?r.defaultMaxListeners:R._maxListeners}function o(R,I,B){if(I)R.call(B);else for(var H=R.length,$=z(R,H),C=0;C<H;++C)$[C].call(B)}function d(R,I,B,H){if(I)R.call(B,H);else for(var $=R.length,C=z(R,$),T=0;T<$;++T)C[T].call(B,H)}function f(R,I,B,H,$){if(I)R.call(B,H,$);else for(var C=R.length,T=z(R,C),j=0;j<C;++j)T[j].call(B,H,$)}function u(R,I,B,H,$,C){if(I)R.call(B,H,$,C);else for(var T=R.length,j=z(R,T),b=0;b<T;++b)j[b].call(B,H,$,C)}function g(R,I,B,H){if(I)R.apply(B,H);else for(var $=R.length,C=z(R,$),T=0;T<$;++T)C[T].apply(B,H)}function m(R,I,B,H){var $,C,T;if(typeof B!="function")throw new TypeError('"listener" argument must be a function');if((C=R._events)?(C.newListener&&(R.emit("newListener",I,B.listener?B.listener:B),C=R._events),T=C[I]):(C=R._events=c(null),R._eventsCount=0),T){if(typeof T=="function"?T=C[I]=H?[B,T]:[T,B]:H?T.unshift(B):T.push(B),!T.warned&&($=a(R))&&$>0&&T.length>$){T.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+T.length+' "'+String(I)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');j.name="MaxListenersExceededWarning",j.emitter=R,j.type=I,j.count=T.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",j.name,j.message)}}else T=C[I]=B,++R._eventsCount;return R}function k(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var R=new Array(arguments.length),I=0;I<R.length;++I)R[I]=arguments[I];this.listener.apply(this.target,R)}}function E(R,I,B){var H={fired:!1,wrapFn:void 0,target:R,type:I,listener:B},$=i.call(k,H);return $.listener=B,H.wrapFn=$,$}function A(R,I,B){var H=R._events;if(!H)return[];var $=H[I];return $?typeof $=="function"?B?[$.listener||$]:[$]:B?function(C){for(var T=new Array(C.length),j=0;j<T.length;++j)T[j]=C[j].listener||C[j];return T}($):z($,$.length):[]}function L(R){var I=this._events;if(I){var B=I[R];if(typeof B=="function")return 1;if(B)return B.length}return 0}function z(R,I){for(var B=new Array(I),H=0;H<I;++H)B[H]=R[H];return B}t?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(R){if(typeof R!="number"||R<0||R!=R)throw new TypeError('"defaultMaxListeners" must be a positive number');n=R}}):r.defaultMaxListeners=n,r.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||isNaN(R))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=R,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(R){var I,B,H,$,C,T,j=R==="error";if(T=this._events)j=j&&T.error==null;else if(!j)return!1;if(j){if(arguments.length>1&&(I=arguments[1]),I instanceof Error)throw I;var b=new Error('Unhandled "error" event. ('+I+")");throw b.context=I,b}if(!(B=T[R]))return!1;var v=typeof B=="function";switch(H=arguments.length){case 1:o(B,v,this);break;case 2:d(B,v,this,arguments[1]);break;case 3:f(B,v,this,arguments[1],arguments[2]);break;case 4:u(B,v,this,arguments[1],arguments[2],arguments[3]);break;default:for($=new Array(H-1),C=1;C<H;C++)$[C-1]=arguments[C];g(B,v,this,$)}return!0},r.prototype.addListener=function(R,I){return m(this,R,I,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(R,I){return m(this,R,I,!0)},r.prototype.once=function(R,I){if(typeof I!="function")throw new TypeError('"listener" argument must be a function');return this.on(R,E(this,R,I)),this},r.prototype.prependOnceListener=function(R,I){if(typeof I!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(R,E(this,R,I)),this},r.prototype.removeListener=function(R,I){var B,H,$,C,T;if(typeof I!="function")throw new TypeError('"listener" argument must be a function');if(!(H=this._events))return this;if(!(B=H[R]))return this;if(B===I||B.listener===I)--this._eventsCount==0?this._events=c(null):(delete H[R],H.removeListener&&this.emit("removeListener",R,B.listener||I));else if(typeof B!="function"){for($=-1,C=B.length-1;C>=0;C--)if(B[C]===I||B[C].listener===I){T=B[C].listener,$=C;break}if($<0)return this;$===0?B.shift():function(j,b){for(var v=b,x=v+1,w=j.length;x<w;v+=1,x+=1)j[v]=j[x];j.pop()}(B,$),B.length===1&&(H[R]=B[0]),H.removeListener&&this.emit("removeListener",R,T||I)}return this},r.prototype.removeAllListeners=function(R){var I,B,H;if(!(B=this._events))return this;if(!B.removeListener)return arguments.length===0?(this._events=c(null),this._eventsCount=0):B[R]&&(--this._eventsCount==0?this._events=c(null):delete B[R]),this;if(arguments.length===0){var $,C=s(B);for(H=0;H<C.length;++H)($=C[H])!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0,this}if(typeof(I=B[R])=="function")this.removeListener(R,I);else if(I)for(H=I.length-1;H>=0;H--)this.removeListener(R,I[H]);return this},r.prototype.listeners=function(R){return A(this,R,!0)},r.prototype.rawListeners=function(R){return A(this,R,!1)},r.listenerCount=function(R,I){return typeof R.listenerCount=="function"?R.listenerCount(I):L.call(R,I)},r.prototype.listenerCount=L,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("md5.js");h.exports=function(i,r,t,n){if(c.isBuffer(i)||(i=c.from(i,"binary")),r&&(c.isBuffer(r)||(r=c.from(r,"binary")),r.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var l=t/8,a=c.alloc(l),o=c.alloc(n||0),d=c.alloc(0);l>0||n>0;){var f=new s;f.update(d),f.update(i),r&&f.update(r),d=f.digest();var u=0;if(l>0){var g=a.length-l;u=Math.min(l,d.length),d.copy(a,g,0,u),l-=u}if(u<d.length&&n>0){var m=o.length-n,k=Math.min(n,d.length-u);d.copy(o,m,u,u+k),n-=k}}return d.fill(0),{key:a,iv:o}}},{"md5.js":450,"safe-buffer":494}],424:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.CsvParserStream=p.ParserOptions=p.parseFile=p.parseStream=p.parseString=p.parse=p.FormatterOptions=p.CsvFormatterStream=p.writeToPath=p.writeToString=p.writeToBuffer=p.writeToStream=p.write=p.format=void 0;var c=e("@fast-csv/format");Object.defineProperty(p,"format",{enumerable:!0,get:function(){return c.format}}),Object.defineProperty(p,"write",{enumerable:!0,get:function(){return c.write}}),Object.defineProperty(p,"writeToStream",{enumerable:!0,get:function(){return c.writeToStream}}),Object.defineProperty(p,"writeToBuffer",{enumerable:!0,get:function(){return c.writeToBuffer}}),Object.defineProperty(p,"writeToString",{enumerable:!0,get:function(){return c.writeToString}}),Object.defineProperty(p,"writeToPath",{enumerable:!0,get:function(){return c.writeToPath}}),Object.defineProperty(p,"CsvFormatterStream",{enumerable:!0,get:function(){return c.CsvFormatterStream}}),Object.defineProperty(p,"FormatterOptions",{enumerable:!0,get:function(){return c.FormatterOptions}});var s=e("@fast-csv/parse");Object.defineProperty(p,"parse",{enumerable:!0,get:function(){return s.parse}}),Object.defineProperty(p,"parseString",{enumerable:!0,get:function(){return s.parseString}}),Object.defineProperty(p,"parseStream",{enumerable:!0,get:function(){return s.parseStream}}),Object.defineProperty(p,"parseFile",{enumerable:!0,get:function(){return s.parseFile}}),Object.defineProperty(p,"ParserOptions",{enumerable:!0,get:function(){return s.ParserOptions}}),Object.defineProperty(p,"CsvParserStream",{enumerable:!0,get:function(){return s.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("readable-stream").Transform;function i(r){s.call(this),this._block=c.allocUnsafe(r),this._blockSize=r,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(i,s),i.prototype._transform=function(r,t,n){var l=null;try{this.update(r,t)}catch(a){l=a}n(l)},i.prototype._flush=function(r){var t=null;try{this.push(this.digest())}catch(n){t=n}r(t)},i.prototype.update=function(r,t){if(function(f,u){if(!c.isBuffer(f)&&typeof f!="string")throw new TypeError(u+" must be a string or a buffer")}(r,"Data"),this._finalized)throw new Error("Digest already called");c.isBuffer(r)||(r=c.from(r,t));for(var n=this._block,l=0;this._blockOffset+r.length-l>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)n[a++]=r[l++];this._update(),this._blockOffset=0}for(;l<r.length;)n[this._blockOffset++]=r[l++];for(var o=0,d=8*r.length;d>0;++o)this._length[o]+=d,(d=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*d);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();r!==void 0&&(t=t.toString(r)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},h.exports=i},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(e,h,p){var c=p;c.utils=e("./hash/utils"),c.common=e("./hash/common"),c.sha=e("./hash/sha"),c.ripemd=e("./hash/ripemd"),c.hmac=e("./hash/hmac"),c.sha1=c.sha.sha1,c.sha256=c.sha.sha256,c.sha224=c.sha.sha224,c.sha384=c.sha.sha384,c.sha512=c.sha.sha512,c.ripemd160=c.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(e,h,p){var c=e("./utils"),s=e("minimalistic-assert");function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}p.BlockHash=i,i.prototype.update=function(r,t){if(r=c.toArray(r,t),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){var n=(r=this.pending).length%this._delta8;this.pending=r.slice(r.length-n,r.length),this.pending.length===0&&(this.pending=null),r=c.join32(r,0,r.length-n,this.endian);for(var l=0;l<r.length;l+=this._delta32)this._update(r,l,l+this._delta32)}return this},i.prototype.digest=function(r){return this.update(this._pad()),s(this.pending===null),this._digest(r)},i.prototype._pad=function(){var r=this.pendingTotal,t=this._delta8,n=t-(r+this.padLength)%t,l=new Array(n+this.padLength);l[0]=128;for(var a=1;a<n;a++)l[a]=0;if(r<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)l[a++]=0;l[a++]=0,l[a++]=0,l[a++]=0,l[a++]=0,l[a++]=r>>>24&255,l[a++]=r>>>16&255,l[a++]=r>>>8&255,l[a++]=255&r}else for(l[a++]=255&r,l[a++]=r>>>8&255,l[a++]=r>>>16&255,l[a++]=r>>>24&255,l[a++]=0,l[a++]=0,l[a++]=0,l[a++]=0,o=8;o<this.padLength;o++)l[a++]=0;return l}},{"./utils":437,"minimalistic-assert":453}],428:[function(e,h,p){var c=e("./utils"),s=e("minimalistic-assert");function i(r,t,n){if(!(this instanceof i))return new i(r,t,n);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(c.toArray(t,n))}h.exports=i,i.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),s(r.length<=this.blockSize);for(var t=r.length;t<this.blockSize;t++)r.push(0);for(t=0;t<r.length;t++)r[t]^=54;for(this.inner=new this.Hash().update(r),t=0;t<r.length;t++)r[t]^=106;this.outer=new this.Hash().update(r)},i.prototype.update=function(r,t){return this.inner.update(r,t),this},i.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)}},{"./utils":437,"minimalistic-assert":453}],429:[function(e,h,p){var c=e("./utils"),s=e("./common"),i=c.rotl32,r=c.sum32,t=c.sum32_3,n=c.sum32_4,l=s.BlockHash;function a(){if(!(this instanceof a))return new a;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function o(E,A,L,z){return E<=15?A^L^z:E<=31?A&L|~A&z:E<=47?(A|~L)^z:E<=63?A&z|L&~z:A^(L|~z)}function d(E){return E<=15?0:E<=31?1518500249:E<=47?1859775393:E<=63?2400959708:2840853838}function f(E){return E<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0}c.inherits(a,l),p.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(E,A){for(var L=this.h[0],z=this.h[1],R=this.h[2],I=this.h[3],B=this.h[4],H=L,$=z,C=R,T=I,j=B,b=0;b<80;b++){var v=r(i(n(L,o(b,z,R,I),E[u[b]+A],d(b)),m[b]),B);L=B,B=I,I=i(R,10),R=z,z=v,v=r(i(n(H,o(79-b,$,C,T),E[g[b]+A],f(b)),k[b]),j),H=j,j=T,T=i(C,10),C=$,$=v}v=t(this.h[1],R,T),this.h[1]=t(this.h[2],I,j),this.h[2]=t(this.h[3],B,H),this.h[3]=t(this.h[4],L,$),this.h[4]=t(this.h[0],z,C),this.h[0]=v},a.prototype._digest=function(E){return E==="hex"?c.toHex32(this.h,"little"):c.split32(this.h,"little")};var u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],k=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(e,h,p){p.sha1=e("./sha/1"),p.sha224=e("./sha/224"),p.sha256=e("./sha/256"),p.sha384=e("./sha/384"),p.sha512=e("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(e,h,p){var c=e("../utils"),s=e("../common"),i=e("./common"),r=c.rotl32,t=c.sum32,n=c.sum32_5,l=i.ft_1,a=s.BlockHash,o=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}c.inherits(d,a),h.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(f,u){for(var g=this.W,m=0;m<16;m++)g[m]=f[u+m];for(;m<g.length;m++)g[m]=r(g[m-3]^g[m-8]^g[m-14]^g[m-16],1);var k=this.h[0],E=this.h[1],A=this.h[2],L=this.h[3],z=this.h[4];for(m=0;m<g.length;m++){var R=~~(m/20),I=n(r(k,5),l(R,E,A,L),z,g[m],o[R]);z=L,L=A,A=r(E,30),E=k,k=I}this.h[0]=t(this.h[0],k),this.h[1]=t(this.h[1],E),this.h[2]=t(this.h[2],A),this.h[3]=t(this.h[3],L),this.h[4]=t(this.h[4],z)},d.prototype._digest=function(f){return f==="hex"?c.toHex32(this.h,"big"):c.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(e,h,p){var c=e("../utils"),s=e("./256");function i(){if(!(this instanceof i))return new i;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}c.inherits(i,s),h.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(r){return r==="hex"?c.toHex32(this.h.slice(0,7),"big"):c.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(e,h,p){var c=e("../utils"),s=e("../common"),i=e("./common"),r=e("minimalistic-assert"),t=c.sum32,n=c.sum32_4,l=c.sum32_5,a=i.ch32,o=i.maj32,d=i.s0_256,f=i.s1_256,u=i.g0_256,g=i.g1_256,m=s.BlockHash,k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function E(){if(!(this instanceof E))return new E;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=k,this.W=new Array(64)}c.inherits(E,m),h.exports=E,E.blockSize=512,E.outSize=256,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(A,L){for(var z=this.W,R=0;R<16;R++)z[R]=A[L+R];for(;R<z.length;R++)z[R]=n(g(z[R-2]),z[R-7],u(z[R-15]),z[R-16]);var I=this.h[0],B=this.h[1],H=this.h[2],$=this.h[3],C=this.h[4],T=this.h[5],j=this.h[6],b=this.h[7];for(r(this.k.length===z.length),R=0;R<z.length;R++){var v=l(b,f(C),a(C,T,j),this.k[R],z[R]),x=t(d(I),o(I,B,H));b=j,j=T,T=C,C=t($,v),$=H,H=B,B=I,I=t(v,x)}this.h[0]=t(this.h[0],I),this.h[1]=t(this.h[1],B),this.h[2]=t(this.h[2],H),this.h[3]=t(this.h[3],$),this.h[4]=t(this.h[4],C),this.h[5]=t(this.h[5],T),this.h[6]=t(this.h[6],j),this.h[7]=t(this.h[7],b)},E.prototype._digest=function(A){return A==="hex"?c.toHex32(this.h,"big"):c.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(e,h,p){var c=e("../utils"),s=e("./512");function i(){if(!(this instanceof i))return new i;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}c.inherits(i,s),h.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(r){return r==="hex"?c.toHex32(this.h.slice(0,12),"big"):c.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(e,h,p){var c=e("../utils"),s=e("../common"),i=e("minimalistic-assert"),r=c.rotr64_hi,t=c.rotr64_lo,n=c.shr64_hi,l=c.shr64_lo,a=c.sum64,o=c.sum64_hi,d=c.sum64_lo,f=c.sum64_4_hi,u=c.sum64_4_lo,g=c.sum64_5_hi,m=c.sum64_5_lo,k=s.BlockHash,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function A(){if(!(this instanceof A))return new A;k.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=E,this.W=new Array(160)}function L(x,w,N,P,D){var V=x&N^~x&D;return V<0&&(V+=4294967296),V}function z(x,w,N,P,D,V){var q=w&P^~w&V;return q<0&&(q+=4294967296),q}function R(x,w,N,P,D){var V=x&N^x&D^N&D;return V<0&&(V+=4294967296),V}function I(x,w,N,P,D,V){var q=w&P^w&V^P&V;return q<0&&(q+=4294967296),q}function B(x,w){var N=r(x,w,28)^r(w,x,2)^r(w,x,7);return N<0&&(N+=4294967296),N}function H(x,w){var N=t(x,w,28)^t(w,x,2)^t(w,x,7);return N<0&&(N+=4294967296),N}function $(x,w){var N=r(x,w,14)^r(x,w,18)^r(w,x,9);return N<0&&(N+=4294967296),N}function C(x,w){var N=t(x,w,14)^t(x,w,18)^t(w,x,9);return N<0&&(N+=4294967296),N}function T(x,w){var N=r(x,w,1)^r(x,w,8)^n(x,w,7);return N<0&&(N+=4294967296),N}function j(x,w){var N=t(x,w,1)^t(x,w,8)^l(x,w,7);return N<0&&(N+=4294967296),N}function b(x,w){var N=r(x,w,19)^r(w,x,29)^n(x,w,6);return N<0&&(N+=4294967296),N}function v(x,w){var N=t(x,w,19)^t(w,x,29)^l(x,w,6);return N<0&&(N+=4294967296),N}c.inherits(A,k),h.exports=A,A.blockSize=1024,A.outSize=512,A.hmacStrength=192,A.padLength=128,A.prototype._prepareBlock=function(x,w){for(var N=this.W,P=0;P<32;P++)N[P]=x[w+P];for(;P<N.length;P+=2){var D=b(N[P-4],N[P-3]),V=v(N[P-4],N[P-3]),q=N[P-14],G=N[P-13],F=T(N[P-30],N[P-29]),X=j(N[P-30],N[P-29]),O=N[P-32],M=N[P-31];N[P]=f(D,V,q,G,F,X,O,M),N[P+1]=u(D,V,q,G,F,X,O,M)}},A.prototype._update=function(x,w){this._prepareBlock(x,w);var N=this.W,P=this.h[0],D=this.h[1],V=this.h[2],q=this.h[3],G=this.h[4],F=this.h[5],X=this.h[6],O=this.h[7],M=this.h[8],U=this.h[9],K=this.h[10],Q=this.h[11],Y=this.h[12],J=this.h[13],ae=this.h[14],ie=this.h[15];i(this.k.length===N.length);for(var Z=0;Z<N.length;Z+=2){var ne=ae,re=ie,ue=$(M,U),ce=C(M,U),te=L(M,U,K,Q,Y),de=z(M,U,K,Q,Y,J),le=this.k[Z],ve=this.k[Z+1],we=N[Z],Se=N[Z+1],_e=g(ne,re,ue,ce,te,de,le,ve,we,Se),Pe=m(ne,re,ue,ce,te,de,le,ve,we,Se);ne=B(P,D),re=H(P,D),ue=R(P,D,V,q,G),ce=I(P,D,V,q,G,F);var Fe=o(ne,re,ue,ce),Oe=d(ne,re,ue,ce);ae=Y,ie=J,Y=K,J=Q,K=M,Q=U,M=o(X,O,_e,Pe),U=d(O,O,_e,Pe),X=G,O=F,G=V,F=q,V=P,q=D,P=o(_e,Pe,Fe,Oe),D=d(_e,Pe,Fe,Oe)}a(this.h,0,P,D),a(this.h,2,V,q),a(this.h,4,G,F),a(this.h,6,X,O),a(this.h,8,M,U),a(this.h,10,K,Q),a(this.h,12,Y,J),a(this.h,14,ae,ie)},A.prototype._digest=function(x){return x==="hex"?c.toHex32(this.h,"big"):c.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(e,h,p){var c=e("../utils").rotr32;function s(t,n,l){return t&n^~t&l}function i(t,n,l){return t&n^t&l^n&l}function r(t,n,l){return t^n^l}p.ft_1=function(t,n,l,a){return t===0?s(n,l,a):t===1||t===3?r(n,l,a):t===2?i(n,l,a):void 0},p.ch32=s,p.maj32=i,p.p32=r,p.s0_256=function(t){return c(t,2)^c(t,13)^c(t,22)},p.s1_256=function(t){return c(t,6)^c(t,11)^c(t,25)},p.g0_256=function(t){return c(t,7)^c(t,18)^t>>>3},p.g1_256=function(t){return c(t,17)^c(t,19)^t>>>10}},{"../utils":437}],437:[function(e,h,p){var c=e("minimalistic-assert"),s=e("inherits");function i(l,a){return(64512&l.charCodeAt(a))==55296&&!(a<0||a+1>=l.length)&&(64512&l.charCodeAt(a+1))==56320}function r(l){return(l>>>24|l>>>8&65280|l<<8&16711680|(255&l)<<24)>>>0}function t(l){return l.length===1?"0"+l:l}function n(l){return l.length===7?"0"+l:l.length===6?"00"+l:l.length===5?"000"+l:l.length===4?"0000"+l:l.length===3?"00000"+l:l.length===2?"000000"+l:l.length===1?"0000000"+l:l}p.inherits=s,p.toArray=function(l,a){if(Array.isArray(l))return l.slice();if(!l)return[];var o=[];if(typeof l=="string")if(a){if(a==="hex")for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),f=0;f<l.length;f+=2)o.push(parseInt(l[f]+l[f+1],16))}else for(var d=0,f=0;f<l.length;f++){var u=l.charCodeAt(f);u<128?o[d++]=u:u<2048?(o[d++]=u>>6|192,o[d++]=63&u|128):i(l,f)?(u=65536+((1023&u)<<10)+(1023&l.charCodeAt(++f)),o[d++]=u>>18|240,o[d++]=u>>12&63|128,o[d++]=u>>6&63|128,o[d++]=63&u|128):(o[d++]=u>>12|224,o[d++]=u>>6&63|128,o[d++]=63&u|128)}else for(f=0;f<l.length;f++)o[f]=0|l[f];return o},p.toHex=function(l){for(var a="",o=0;o<l.length;o++)a+=t(l[o].toString(16));return a},p.htonl=r,p.toHex32=function(l,a){for(var o="",d=0;d<l.length;d++){var f=l[d];a==="little"&&(f=r(f)),o+=n(f.toString(16))}return o},p.zero2=t,p.zero8=n,p.join32=function(l,a,o,d){var f=o-a;c(f%4==0);for(var u=new Array(f/4),g=0,m=a;g<u.length;g++,m+=4){var k;k=d==="big"?l[m]<<24|l[m+1]<<16|l[m+2]<<8|l[m+3]:l[m+3]<<24|l[m+2]<<16|l[m+1]<<8|l[m],u[g]=k>>>0}return u},p.split32=function(l,a){for(var o=new Array(4*l.length),d=0,f=0;d<l.length;d++,f+=4){var u=l[d];a==="big"?(o[f]=u>>>24,o[f+1]=u>>>16&255,o[f+2]=u>>>8&255,o[f+3]=255&u):(o[f+3]=u>>>24,o[f+2]=u>>>16&255,o[f+1]=u>>>8&255,o[f]=255&u)}return o},p.rotr32=function(l,a){return l>>>a|l<<32-a},p.rotl32=function(l,a){return l<<a|l>>>32-a},p.sum32=function(l,a){return l+a>>>0},p.sum32_3=function(l,a,o){return l+a+o>>>0},p.sum32_4=function(l,a,o,d){return l+a+o+d>>>0},p.sum32_5=function(l,a,o,d,f){return l+a+o+d+f>>>0},p.sum64=function(l,a,o,d){var f=l[a],u=d+l[a+1]>>>0,g=(u<d?1:0)+o+f;l[a]=g>>>0,l[a+1]=u},p.sum64_hi=function(l,a,o,d){return(a+d>>>0<a?1:0)+l+o>>>0},p.sum64_lo=function(l,a,o,d){return a+d>>>0},p.sum64_4_hi=function(l,a,o,d,f,u,g,m){var k=0,E=a;return k+=(E=E+d>>>0)<a?1:0,k+=(E=E+u>>>0)<u?1:0,l+o+f+g+(k+=(E=E+m>>>0)<m?1:0)>>>0},p.sum64_4_lo=function(l,a,o,d,f,u,g,m){return a+d+u+m>>>0},p.sum64_5_hi=function(l,a,o,d,f,u,g,m,k,E){var A=0,L=a;return A+=(L=L+d>>>0)<a?1:0,A+=(L=L+u>>>0)<u?1:0,A+=(L=L+m>>>0)<m?1:0,l+o+f+g+k+(A+=(L=L+E>>>0)<E?1:0)>>>0},p.sum64_5_lo=function(l,a,o,d,f,u,g,m,k,E){return a+d+u+m+E>>>0},p.rotr64_hi=function(l,a,o){return(a<<32-o|l>>>o)>>>0},p.rotr64_lo=function(l,a,o){return(l<<32-o|a>>>o)>>>0},p.shr64_hi=function(l,a,o){return l>>>o},p.shr64_lo=function(l,a,o){return(l<<32-o|a>>>o)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(e,h,p){var c=e("hash.js"),s=e("minimalistic-crypto-utils"),i=e("minimalistic-assert");function r(t){if(!(this instanceof r))return new r(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=s.toArray(t.entropy,t.entropyEnc||"hex"),l=s.toArray(t.nonce,t.nonceEnc||"hex"),a=s.toArray(t.pers,t.persEnc||"hex");i(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,l,a)}h.exports=r,r.prototype._init=function(t,n,l){var a=t.concat(n).concat(l);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(a),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new c.hmac(this.hash,this.K)},r.prototype._update=function(t){var n=this._hmac().update(this.V).update([0]);t&&(n=n.update(t)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(t,n,l,a){typeof n!="string"&&(a=l,l=n,n=null),t=s.toArray(t,n),l=s.toArray(l,a),i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(l||[])),this._reseed=1},r.prototype.generate=function(t,n,l,a){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(a=l,l=n,n=null),l&&(l=s.toArray(l,a||"hex"),this._update(l));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var d=o.slice(0,t);return this._update(l),this._reseed++,s.encode(d,n)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(e,h,p){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */p.read=function(c,s,i,r,t){var n,l,a=8*t-r-1,o=(1<<a)-1,d=o>>1,f=-7,u=i?t-1:0,g=i?-1:1,m=c[s+u];for(u+=g,n=m&(1<<-f)-1,m>>=-f,f+=a;f>0;n=256*n+c[s+u],u+=g,f-=8);for(l=n&(1<<-f)-1,n>>=-f,f+=r;f>0;l=256*l+c[s+u],u+=g,f-=8);if(n===0)n=1-d;else{if(n===o)return l?NaN:1/0*(m?-1:1);l+=Math.pow(2,r),n-=d}return(m?-1:1)*l*Math.pow(2,n-r)},p.write=function(c,s,i,r,t,n){var l,a,o,d=8*n-t-1,f=(1<<d)-1,u=f>>1,g=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:n-1,k=r?1:-1,E=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(a=isNaN(s)?1:0,l=f):(l=Math.floor(Math.log(s)/Math.LN2),s*(o=Math.pow(2,-l))<1&&(l--,o*=2),(s+=l+u>=1?g/o:g*Math.pow(2,1-u))*o>=2&&(l++,o/=2),l+u>=f?(a=0,l=f):l+u>=1?(a=(s*o-1)*Math.pow(2,t),l+=u):(a=s*Math.pow(2,u-1)*Math.pow(2,t),l=0));t>=8;c[i+m]=255&a,m+=k,a/=256,t-=8);for(l=l<<t|a,d+=t;d>0;c[i+m]=255&l,m+=k,l/=256,d-=8);c[i+m-k]|=128*E}},{}],440:[function(e,h,p){typeof Object.create=="function"?h.exports=function(c,s){s&&(c.super_=s,c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:h.exports=function(c,s){if(s){c.super_=s;var i=function(){};i.prototype=s.prototype,c.prototype=new i,c.prototype.constructor=c}}},{}],441:[function(e,h,p){(function(c,s,i,r,t,n,l,a){(function(){/*!

		JSZip v3.10.1 - A JavaScript class for generating and reading zip files
		<http://stuartk.com/jszip>

		(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
		Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

		JSZip uses the library pako released under the MIT license :
		https://github.com/nodeca/pako/blob/main/LICENSE
		*/(function(o){typeof p=="object"&&h!==void 0?h.exports=o():(typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:this).JSZip=o()})(function(){return function o(d,f,u){function g(E,A){if(!f[E]){if(!d[E]){var L=typeof e=="function"&&e;if(!A&&L)return L(E,!0);if(m)return m(E,!0);var z=new Error("Cannot find module '"+E+"'");throw z.code="MODULE_NOT_FOUND",z}var R=f[E]={exports:{}};d[E][0].call(R.exports,function(I){return g(d[E][1][I]||I)},R,R.exports,o,d,f,u)}return f[E].exports}for(var m=typeof e=="function"&&e,k=0;k<u.length;k++)g(u[k]);return g}({1:[function(o,d,f){var u=o("./utils"),g=o("./support"),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(k){for(var E,A,L,z,R,I,B,H=[],$=0,C=k.length,T=C,j=u.getTypeOf(k)!=="string";$<k.length;)T=C-$,L=j?(E=k[$++],A=$<C?k[$++]:0,$<C?k[$++]:0):(E=k.charCodeAt($++),A=$<C?k.charCodeAt($++):0,$<C?k.charCodeAt($++):0),z=E>>2,R=(3&E)<<4|A>>4,I=1<T?(15&A)<<2|L>>6:64,B=2<T?63&L:64,H.push(m.charAt(z)+m.charAt(R)+m.charAt(I)+m.charAt(B));return H.join("")},f.decode=function(k){var E,A,L,z,R,I,B=0,H=0,$="data:";if(k.substr(0,$.length)===$)throw new Error("Invalid base64 input, it looks like a data url.");var C,T=3*(k=k.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(k.charAt(k.length-1)===m.charAt(64)&&T--,k.charAt(k.length-2)===m.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=g.uint8array?new Uint8Array(0|T):new Array(0|T);B<k.length;)E=m.indexOf(k.charAt(B++))<<2|(z=m.indexOf(k.charAt(B++)))>>4,A=(15&z)<<4|(R=m.indexOf(k.charAt(B++)))>>2,L=(3&R)<<6|(I=m.indexOf(k.charAt(B++))),C[H++]=E,R!==64&&(C[H++]=A),I!==64&&(C[H++]=L);return C}},{"./support":30,"./utils":32}],2:[function(o,d,f){var u=o("./external"),g=o("./stream/DataWorker"),m=o("./stream/Crc32Probe"),k=o("./stream/DataLengthProbe");function E(A,L,z,R,I){this.compressedSize=A,this.uncompressedSize=L,this.crc32=z,this.compression=R,this.compressedContent=I}E.prototype={getContentWorker:function(){var A=new g(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new k("data_length")),L=this;return A.on("end",function(){if(this.streamInfo.data_length!==L.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new g(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},E.createWorkerFrom=function(A,L,z){return A.pipe(new m).pipe(new k("uncompressedSize")).pipe(L.compressWorker(z)).pipe(new k("compressedSize")).withStreamInfo("compression",L)},d.exports=E},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,d,f){var u=o("./stream/GenericWorker");f.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},f.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,d,f){var u=o("./utils"),g=function(){for(var m,k=[],E=0;E<256;E++){m=E;for(var A=0;A<8;A++)m=1&m?3988292384^m>>>1:m>>>1;k[E]=m}return k}();d.exports=function(m,k){return m!==void 0&&m.length?u.getTypeOf(m)!=="string"?function(E,A,L,z){var R=g,I=0+L;E^=-1;for(var B=0;B<I;B++)E=E>>>8^R[255&(E^A[B])];return-1^E}(0|k,m,m.length):function(E,A,L,z){var R=g,I=0+L;E^=-1;for(var B=0;B<I;B++)E=E>>>8^R[255&(E^A.charCodeAt(B))];return-1^E}(0|k,m,m.length):0}},{"./utils":32}],5:[function(o,d,f){f.base64=!1,f.binary=!1,f.dir=!1,f.createFolders=!0,f.date=null,f.compression=null,f.compressionOptions=null,f.comment=null,f.unixPermissions=null,f.dosPermissions=null},{}],6:[function(o,d,f){var u;u=typeof Promise<"u"?Promise:o("lie"),d.exports={Promise:u}},{lie:37}],7:[function(o,d,f){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",g=o("pako"),m=o("./utils"),k=o("./stream/GenericWorker"),E=u?"uint8array":"array";function A(L,z){k.call(this,"FlateWorker/"+L),this._pako=null,this._pakoAction=L,this._pakoOptions=z,this.meta={}}f.magic="\b\0",m.inherits(A,k),A.prototype.processChunk=function(L){this.meta=L.meta,this._pako===null&&this._createPako(),this._pako.push(m.transformTo(E,L.data),!1)},A.prototype.flush=function(){k.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){k.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new g[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var L=this;this._pako.onData=function(z){L.push({data:z,meta:L.meta})}},f.compressWorker=function(L){return new A("Deflate",L)},f.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,d,f){function u(R,I){var B,H="";for(B=0;B<I;B++)H+=String.fromCharCode(255&R),R>>>=8;return H}function g(R,I,B,H,$,C){var T,j,b=R.file,v=R.compression,x=C!==E.utf8encode,w=m.transformTo("string",C(b.name)),N=m.transformTo("string",E.utf8encode(b.name)),P=b.comment,D=m.transformTo("string",C(P)),V=m.transformTo("string",E.utf8encode(P)),q=N.length!==b.name.length,G=V.length!==P.length,F="",X="",O="",M=b.dir,U=b.date,K={crc32:0,compressedSize:0,uncompressedSize:0};I&&!B||(K.crc32=R.crc32,K.compressedSize=R.compressedSize,K.uncompressedSize=R.uncompressedSize);var Q=0;I&&(Q|=8),x||!q&&!G||(Q|=2048);var Y=0,J=0;M&&(Y|=16),$==="UNIX"?(J=798,Y|=function(ie,Z){var ne=ie;return ie||(ne=Z?16893:33204),(65535&ne)<<16}(b.unixPermissions,M)):(J=20,Y|=function(ie){return 63&(ie||0)}(b.dosPermissions)),T=U.getUTCHours(),T<<=6,T|=U.getUTCMinutes(),T<<=5,T|=U.getUTCSeconds()/2,j=U.getUTCFullYear()-1980,j<<=4,j|=U.getUTCMonth()+1,j<<=5,j|=U.getUTCDate(),q&&(X=u(1,1)+u(A(w),4)+N,F+="up"+u(X.length,2)+X),G&&(O=u(1,1)+u(A(D),4)+V,F+="uc"+u(O.length,2)+O);var ae="";return ae+=`
\0`,ae+=u(Q,2),ae+=v.magic,ae+=u(T,2),ae+=u(j,2),ae+=u(K.crc32,4),ae+=u(K.compressedSize,4),ae+=u(K.uncompressedSize,4),ae+=u(w.length,2),ae+=u(F.length,2),{fileRecord:L.LOCAL_FILE_HEADER+ae+w+F,dirRecord:L.CENTRAL_FILE_HEADER+u(J,2)+ae+u(D.length,2)+"\0\0\0\0"+u(Y,4)+u(H,4)+w+F+D}}var m=o("../utils"),k=o("../stream/GenericWorker"),E=o("../utf8"),A=o("../crc32"),L=o("../signature");function z(R,I,B,H){k.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=I,this.zipPlatform=B,this.encodeFileName=H,this.streamFiles=R,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}m.inherits(z,k),z.prototype.push=function(R){var I=R.meta.percent||0,B=this.entriesCount,H=this._sources.length;this.accumulate?this.contentBuffer.push(R):(this.bytesWritten+=R.data.length,k.prototype.push.call(this,{data:R.data,meta:{currentFile:this.currentFile,percent:B?(I+100*(B-H-1))/B:100}}))},z.prototype.openedSource=function(R){this.currentSourceOffset=this.bytesWritten,this.currentFile=R.file.name;var I=this.streamFiles&&!R.file.dir;if(I){var B=g(R,I,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:B.fileRecord,meta:{percent:0}})}else this.accumulate=!0},z.prototype.closedSource=function(R){this.accumulate=!1;var I=this.streamFiles&&!R.file.dir,B=g(R,I,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(B.dirRecord),I)this.push({data:function(H){return L.DATA_DESCRIPTOR+u(H.crc32,4)+u(H.compressedSize,4)+u(H.uncompressedSize,4)}(R),meta:{percent:100}});else for(this.push({data:B.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},z.prototype.flush=function(){for(var R=this.bytesWritten,I=0;I<this.dirRecords.length;I++)this.push({data:this.dirRecords[I],meta:{percent:100}});var B=this.bytesWritten-R,H=function($,C,T,j,b){var v=m.transformTo("string",b(j));return L.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u($,2)+u($,2)+u(C,4)+u(T,4)+u(v.length,2)+v}(this.dirRecords.length,B,R,this.zipComment,this.encodeFileName);this.push({data:H,meta:{percent:100}})},z.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},z.prototype.registerPrevious=function(R){this._sources.push(R);var I=this;return R.on("data",function(B){I.processChunk(B)}),R.on("end",function(){I.closedSource(I.previous.streamInfo),I._sources.length?I.prepareNextSource():I.end()}),R.on("error",function(B){I.error(B)}),this},z.prototype.resume=function(){return!!k.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},z.prototype.error=function(R){var I=this._sources;if(!k.prototype.error.call(this,R))return!1;for(var B=0;B<I.length;B++)try{I[B].error(R)}catch{}return!0},z.prototype.lock=function(){k.prototype.lock.call(this);for(var R=this._sources,I=0;I<R.length;I++)R[I].lock()},d.exports=z},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,d,f){var u=o("../compressions"),g=o("./ZipFileWorker");f.generateWorker=function(m,k,E){var A=new g(k.streamFiles,E,k.platform,k.encodeFileName),L=0;try{m.forEach(function(z,R){L++;var I=function(C,T){var j=C||T,b=u[j];if(!b)throw new Error(j+" is not a valid compression method !");return b}(R.options.compression,k.compression),B=R.options.compressionOptions||k.compressionOptions||{},H=R.dir,$=R.date;R._compressWorker(I,B).withStreamInfo("file",{name:z,dir:H,date:$,comment:R.comment||"",unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions}).pipe(A)}),A.entriesCount=L}catch(z){A.error(z)}return A}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,d,f){function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var g=new u;for(var m in this)typeof this[m]!="function"&&(g[m]=this[m]);return g}}(u.prototype=o("./object")).loadAsync=o("./load"),u.support=o("./support"),u.defaults=o("./defaults"),u.version="3.10.1",u.loadAsync=function(g,m){return new u().loadAsync(g,m)},u.external=o("./external"),d.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,d,f){var u=o("./utils"),g=o("./external"),m=o("./utf8"),k=o("./zipEntries"),E=o("./stream/Crc32Probe"),A=o("./nodejsUtils");function L(z){return new g.Promise(function(R,I){var B=z.decompressed.getContentWorker().pipe(new E);B.on("error",function(H){I(H)}).on("end",function(){B.streamInfo.crc32!==z.decompressed.crc32?I(new Error("Corrupted zip : CRC32 mismatch")):R()}).resume()})}d.exports=function(z,R){var I=this;return R=u.extend(R||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:m.utf8decode}),A.isNode&&A.isStream(z)?g.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",z,!0,R.optimizedBinaryString,R.base64).then(function(B){var H=new k(R);return H.load(B),H}).then(function(B){var H=[g.Promise.resolve(B)],$=B.files;if(R.checkCRC32)for(var C=0;C<$.length;C++)H.push(L($[C]));return g.Promise.all(H)}).then(function(B){for(var H=B.shift(),$=H.files,C=0;C<$.length;C++){var T=$[C],j=T.fileNameStr,b=u.resolve(T.fileNameStr);I.file(b,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:R.createFolders}),T.dir||(I.file(b).unsafeOriginalName=j)}return H.zipComment.length&&(I.comment=H.zipComment),I})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,d,f){var u=o("../utils"),g=o("../stream/GenericWorker");function m(k,E){g.call(this,"Nodejs stream input adapter for "+k),this._upstreamEnded=!1,this._bindStream(E)}u.inherits(m,g),m.prototype._bindStream=function(k){var E=this;(this._stream=k).pause(),k.on("data",function(A){E.push({data:A,meta:{percent:0}})}).on("error",function(A){E.isPaused?this.generatedError=A:E.error(A)}).on("end",function(){E.isPaused?E._upstreamEnded=!0:E.end()})},m.prototype.pause=function(){return!!g.prototype.pause.call(this)&&(this._stream.pause(),!0)},m.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=m},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,d,f){var u=o("readable-stream").Readable;function g(m,k,E){u.call(this,k),this._helper=m;var A=this;m.on("data",function(L,z){A.push(L)||A._helper.pause(),E&&E(z)}).on("error",function(L){A.emit("error",L)}).on("end",function(){A.push(null)})}o("../utils").inherits(g,u),g.prototype._read=function(){this._helper.resume()},d.exports=g},{"../utils":32,"readable-stream":16}],14:[function(o,d,f){d.exports={isNode:i!==void 0,newBufferFrom:function(u,g){if(i.from&&i.from!==Uint8Array.from)return i.from(u,g);if(typeof u=="number")throw new Error('The "data" argument must not be a number');return new i(u,g)},allocBuffer:function(u){if(i.alloc)return i.alloc(u);var g=new i(u);return g.fill(0),g},isBuffer:function(u){return i.isBuffer(u)},isStream:function(u){return u&&typeof u.on=="function"&&typeof u.pause=="function"&&typeof u.resume=="function"}}},{}],15:[function(o,d,f){function u(b,v,x){var w,N=m.getTypeOf(v),P=m.extend(x||{},A);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(b=$(b)),P.createFolders&&(w=H(b))&&C.call(this,w,!0);var D=N==="string"&&P.binary===!1&&P.base64===!1;x&&x.binary!==void 0||(P.binary=!D),(v instanceof L&&v.uncompressedSize===0||P.dir||!v||v.length===0)&&(P.base64=!1,P.binary=!0,v="",P.compression="STORE",N="string");var V;V=v instanceof L||v instanceof k?v:I.isNode&&I.isStream(v)?new B(b,v):m.prepareContent(b,v,P.binary,P.optimizedBinaryString,P.base64);var q=new z(b,V,P);this.files[b]=q}var g=o("./utf8"),m=o("./utils"),k=o("./stream/GenericWorker"),E=o("./stream/StreamHelper"),A=o("./defaults"),L=o("./compressedObject"),z=o("./zipObject"),R=o("./generate"),I=o("./nodejsUtils"),B=o("./nodejs/NodejsStreamInputAdapter"),H=function(b){b.slice(-1)==="/"&&(b=b.substring(0,b.length-1));var v=b.lastIndexOf("/");return 0<v?b.substring(0,v):""},$=function(b){return b.slice(-1)!=="/"&&(b+="/"),b},C=function(b,v){return v=v!==void 0?v:A.createFolders,b=$(b),this.files[b]||u.call(this,b,null,{dir:!0,createFolders:v}),this.files[b]};function T(b){return Object.prototype.toString.call(b)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(b){var v,x,w;for(v in this.files)w=this.files[v],(x=v.slice(this.root.length,v.length))&&v.slice(0,this.root.length)===this.root&&b(x,w)},filter:function(b){var v=[];return this.forEach(function(x,w){b(x,w)&&v.push(w)}),v},file:function(b,v,x){if(arguments.length!==1)return b=this.root+b,u.call(this,b,v,x),this;if(T(b)){var w=b;return this.filter(function(P,D){return!D.dir&&w.test(P)})}var N=this.files[this.root+b];return N&&!N.dir?N:null},folder:function(b){if(!b)return this;if(T(b))return this.filter(function(N,P){return P.dir&&b.test(N)});var v=this.root+b,x=C.call(this,v),w=this.clone();return w.root=x.name,w},remove:function(b){b=this.root+b;var v=this.files[b];if(v||(b.slice(-1)!=="/"&&(b+="/"),v=this.files[b]),v&&!v.dir)delete this.files[b];else for(var x=this.filter(function(N,P){return P.name.slice(0,b.length)===b}),w=0;w<x.length;w++)delete this.files[x[w].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(b){var v,x={};try{if((x=m.extend(b||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:g.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");m.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var w=x.comment||this.comment||"";v=R.generateWorker(this,x,w)}catch(N){(v=new k("error")).error(N)}return new E(v,x.type||"string",x.mimeType)},generateAsync:function(b,v){return this.generateInternalStream(b).accumulate(v)},generateNodeStream:function(b,v){return(b=b||{}).type||(b.type="nodebuffer"),this.generateInternalStream(b).toNodejsStream(v)}};d.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,d,f){d.exports=o("stream")},{stream:void 0}],17:[function(o,d,f){var u=o("./DataReader");function g(m){u.call(this,m);for(var k=0;k<this.data.length;k++)m[k]=255&m[k]}o("../utils").inherits(g,u),g.prototype.byteAt=function(m){return this.data[this.zero+m]},g.prototype.lastIndexOfSignature=function(m){for(var k=m.charCodeAt(0),E=m.charCodeAt(1),A=m.charCodeAt(2),L=m.charCodeAt(3),z=this.length-4;0<=z;--z)if(this.data[z]===k&&this.data[z+1]===E&&this.data[z+2]===A&&this.data[z+3]===L)return z-this.zero;return-1},g.prototype.readAndCheckSignature=function(m){var k=m.charCodeAt(0),E=m.charCodeAt(1),A=m.charCodeAt(2),L=m.charCodeAt(3),z=this.readData(4);return k===z[0]&&E===z[1]&&A===z[2]&&L===z[3]},g.prototype.readData=function(m){if(this.checkOffset(m),m===0)return[];var k=this.data.slice(this.zero+this.index,this.zero+this.index+m);return this.index+=m,k},d.exports=g},{"../utils":32,"./DataReader":18}],18:[function(o,d,f){var u=o("../utils");function g(m){this.data=m,this.length=m.length,this.index=0,this.zero=0}g.prototype={checkOffset:function(m){this.checkIndex(this.index+m)},checkIndex:function(m){if(this.length<this.zero+m||m<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+m+"). Corrupted zip ?")},setIndex:function(m){this.checkIndex(m),this.index=m},skip:function(m){this.setIndex(this.index+m)},byteAt:function(){},readInt:function(m){var k,E=0;for(this.checkOffset(m),k=this.index+m-1;k>=this.index;k--)E=(E<<8)+this.byteAt(k);return this.index+=m,E},readString:function(m){return u.transformTo("string",this.readData(m))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var m=this.readInt(4);return new Date(Date.UTC(1980+(m>>25&127),(m>>21&15)-1,m>>16&31,m>>11&31,m>>5&63,(31&m)<<1))}},d.exports=g},{"../utils":32}],19:[function(o,d,f){var u=o("./Uint8ArrayReader");function g(m){u.call(this,m)}o("../utils").inherits(g,u),g.prototype.readData=function(m){this.checkOffset(m);var k=this.data.slice(this.zero+this.index,this.zero+this.index+m);return this.index+=m,k},d.exports=g},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,d,f){var u=o("./DataReader");function g(m){u.call(this,m)}o("../utils").inherits(g,u),g.prototype.byteAt=function(m){return this.data.charCodeAt(this.zero+m)},g.prototype.lastIndexOfSignature=function(m){return this.data.lastIndexOf(m)-this.zero},g.prototype.readAndCheckSignature=function(m){return m===this.readData(4)},g.prototype.readData=function(m){this.checkOffset(m);var k=this.data.slice(this.zero+this.index,this.zero+this.index+m);return this.index+=m,k},d.exports=g},{"../utils":32,"./DataReader":18}],21:[function(o,d,f){var u=o("./ArrayReader");function g(m){u.call(this,m)}o("../utils").inherits(g,u),g.prototype.readData=function(m){if(this.checkOffset(m),m===0)return new Uint8Array(0);var k=this.data.subarray(this.zero+this.index,this.zero+this.index+m);return this.index+=m,k},d.exports=g},{"../utils":32,"./ArrayReader":17}],22:[function(o,d,f){var u=o("../utils"),g=o("../support"),m=o("./ArrayReader"),k=o("./StringReader"),E=o("./NodeBufferReader"),A=o("./Uint8ArrayReader");d.exports=function(L){var z=u.getTypeOf(L);return u.checkSupport(z),z!=="string"||g.uint8array?z==="nodebuffer"?new E(L):g.uint8array?new A(u.transformTo("uint8array",L)):new m(u.transformTo("array",L)):new k(L)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,d,f){f.LOCAL_FILE_HEADER="PK",f.CENTRAL_FILE_HEADER="PK",f.CENTRAL_DIRECTORY_END="PK",f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",f.ZIP64_CENTRAL_DIRECTORY_END="PK",f.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,d,f){var u=o("./GenericWorker"),g=o("../utils");function m(k){u.call(this,"ConvertWorker to "+k),this.destType=k}g.inherits(m,u),m.prototype.processChunk=function(k){this.push({data:g.transformTo(this.destType,k.data),meta:k.meta})},d.exports=m},{"../utils":32,"./GenericWorker":28}],25:[function(o,d,f){var u=o("./GenericWorker"),g=o("../crc32");function m(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(m,u),m.prototype.processChunk=function(k){this.streamInfo.crc32=g(k.data,this.streamInfo.crc32||0),this.push(k)},d.exports=m},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,d,f){var u=o("../utils"),g=o("./GenericWorker");function m(k){g.call(this,"DataLengthProbe for "+k),this.propName=k,this.withStreamInfo(k,0)}u.inherits(m,g),m.prototype.processChunk=function(k){if(k){var E=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=E+k.data.length}g.prototype.processChunk.call(this,k)},d.exports=m},{"../utils":32,"./GenericWorker":28}],27:[function(o,d,f){var u=o("../utils"),g=o("./GenericWorker");function m(k){g.call(this,"DataWorker");var E=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,k.then(function(A){E.dataIsReady=!0,E.data=A,E.max=A&&A.length||0,E.type=u.getTypeOf(A),E.isPaused||E._tickAndRepeat()},function(A){E.error(A)})}u.inherits(m,g),m.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this.data=null},m.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},m.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},m.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var k=null,E=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":k=this.data.substring(this.index,E);break;case"uint8array":k=this.data.subarray(this.index,E);break;case"array":case"nodebuffer":k=this.data.slice(this.index,E)}return this.index=E,this.push({data:k,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=m},{"../utils":32,"./GenericWorker":28}],28:[function(o,d,f){function u(g){this.name=g||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(g){this.emit("data",g)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(g){this.emit("error",g)}return!0},error:function(g){return!this.isFinished&&(this.isPaused?this.generatedError=g:(this.isFinished=!0,this.emit("error",g),this.previous&&this.previous.error(g),this.cleanUp()),!0)},on:function(g,m){return this._listeners[g].push(m),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(g,m){if(this._listeners[g])for(var k=0;k<this._listeners[g].length;k++)this._listeners[g][k].call(this,m)},pipe:function(g){return g.registerPrevious(this)},registerPrevious:function(g){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=g.streamInfo,this.mergeStreamInfo(),this.previous=g;var m=this;return g.on("data",function(k){m.processChunk(k)}),g.on("end",function(){m.end()}),g.on("error",function(k){m.error(k)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var g=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),g=!0),this.previous&&this.previous.resume(),!g},flush:function(){},processChunk:function(g){this.push(g)},withStreamInfo:function(g,m){return this.extraStreamInfo[g]=m,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var g in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,g)&&(this.streamInfo[g]=this.extraStreamInfo[g])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var g="Worker "+this.name;return this.previous?this.previous+" -> "+g:g}},d.exports=u},{}],29:[function(o,d,f){var u=o("../utils"),g=o("./ConvertWorker"),m=o("./GenericWorker"),k=o("../base64"),E=o("../support"),A=o("../external"),L=null;if(E.nodestream)try{L=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function z(R,I,B){var H=I;switch(I){case"blob":case"arraybuffer":H="uint8array";break;case"base64":H="string"}try{this._internalType=H,this._outputType=I,this._mimeType=B,u.checkSupport(H),this._worker=R.pipe(new g(H)),R.lock()}catch($){this._worker=new m("error"),this._worker.error($)}}z.prototype={accumulate:function(R){return function(I,B){return new A.Promise(function(H,$){var C=[],T=I._internalType,j=I._outputType,b=I._mimeType;I.on("data",function(v,x){C.push(v),B&&B(x)}).on("error",function(v){C=[],$(v)}).on("end",function(){try{var v=function(x,w,N){switch(x){case"blob":return u.newBlob(u.transformTo("arraybuffer",w),N);case"base64":return k.encode(w);default:return u.transformTo(x,w)}}(j,function(x,w){var N,P=0,D=null,V=0;for(N=0;N<w.length;N++)V+=w[N].length;switch(x){case"string":return w.join("");case"array":return Array.prototype.concat.apply([],w);case"uint8array":for(D=new Uint8Array(V),N=0;N<w.length;N++)D.set(w[N],P),P+=w[N].length;return D;case"nodebuffer":return i.concat(w);default:throw new Error("concat : unsupported type '"+x+"'")}}(T,C),b);H(v)}catch(x){$(x)}C=[]}).resume()})}(this,R)},on:function(R,I){var B=this;return R==="data"?this._worker.on(R,function(H){I.call(B,H.data,H.meta)}):this._worker.on(R,function(){u.delay(I,arguments,B)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(R){if(u.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new L(this,{objectMode:this._outputType!=="nodebuffer"},R)}},d.exports=z},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,d,f){if(f.base64=!0,f.array=!0,f.string=!0,f.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",f.nodebuffer=i!==void 0,f.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")f.blob=!1;else{var u=new ArrayBuffer(0);try{f.blob=new Blob([u],{type:"application/zip"}).size===0}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);g.append(u),f.blob=g.getBlob("application/zip").size===0}catch{f.blob=!1}}}try{f.nodestream=!!o("readable-stream").Readable}catch{f.nodestream=!1}},{"readable-stream":16}],31:[function(o,d,f){for(var u=o("./utils"),g=o("./support"),m=o("./nodejsUtils"),k=o("./stream/GenericWorker"),E=new Array(256),A=0;A<256;A++)E[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function L(){k.call(this,"utf-8 decode"),this.leftOver=null}function z(){k.call(this,"utf-8 encode")}E[254]=E[254]=1,f.utf8encode=function(R){return g.nodebuffer?m.newBufferFrom(R,"utf-8"):function(I){var B,H,$,C,T,j=I.length,b=0;for(C=0;C<j;C++)(64512&(H=I.charCodeAt(C)))==55296&&C+1<j&&(64512&($=I.charCodeAt(C+1)))==56320&&(H=65536+(H-55296<<10)+($-56320),C++),b+=H<128?1:H<2048?2:H<65536?3:4;for(B=g.uint8array?new Uint8Array(b):new Array(b),C=T=0;T<b;C++)(64512&(H=I.charCodeAt(C)))==55296&&C+1<j&&(64512&($=I.charCodeAt(C+1)))==56320&&(H=65536+(H-55296<<10)+($-56320),C++),H<128?B[T++]=H:(H<2048?B[T++]=192|H>>>6:(H<65536?B[T++]=224|H>>>12:(B[T++]=240|H>>>18,B[T++]=128|H>>>12&63),B[T++]=128|H>>>6&63),B[T++]=128|63&H);return B}(R)},f.utf8decode=function(R){return g.nodebuffer?u.transformTo("nodebuffer",R).toString("utf-8"):function(I){var B,H,$,C,T=I.length,j=new Array(2*T);for(B=H=0;B<T;)if(($=I[B++])<128)j[H++]=$;else if(4<(C=E[$]))j[H++]=65533,B+=C-1;else{for($&=C===2?31:C===3?15:7;1<C&&B<T;)$=$<<6|63&I[B++],C--;1<C?j[H++]=65533:$<65536?j[H++]=$:($-=65536,j[H++]=55296|$>>10&1023,j[H++]=56320|1023&$)}return j.length!==H&&(j.subarray?j=j.subarray(0,H):j.length=H),u.applyFromCharCode(j)}(R=u.transformTo(g.uint8array?"uint8array":"array",R))},u.inherits(L,k),L.prototype.processChunk=function(R){var I=u.transformTo(g.uint8array?"uint8array":"array",R.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var B=I;(I=new Uint8Array(B.length+this.leftOver.length)).set(this.leftOver,0),I.set(B,this.leftOver.length)}else I=this.leftOver.concat(I);this.leftOver=null}var H=function(C,T){var j;for((T=T||C.length)>C.length&&(T=C.length),j=T-1;0<=j&&(192&C[j])==128;)j--;return j<0||j===0?T:j+E[C[j]]>T?j:T}(I),$=I;H!==I.length&&(g.uint8array?($=I.subarray(0,H),this.leftOver=I.subarray(H,I.length)):($=I.slice(0,H),this.leftOver=I.slice(H,I.length))),this.push({data:f.utf8decode($),meta:R.meta})},L.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:f.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},f.Utf8DecodeWorker=L,u.inherits(z,k),z.prototype.processChunk=function(R){this.push({data:f.utf8encode(R.data),meta:R.meta})},f.Utf8EncodeWorker=z},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,d,f){var u=o("./support"),g=o("./base64"),m=o("./nodejsUtils"),k=o("./external");function E(B){return B}function A(B,H){for(var $=0;$<B.length;++$)H[$]=255&B.charCodeAt($);return H}o("setimmediate"),f.newBlob=function(B,H){f.checkSupport("blob");try{return new Blob([B],{type:H})}catch{try{var $=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return $.append(B),$.getBlob(H)}catch{throw new Error("Bug : can't construct the Blob.")}}};var L={stringifyByChunk:function(B,H,$){var C=[],T=0,j=B.length;if(j<=$)return String.fromCharCode.apply(null,B);for(;T<j;)H==="array"||H==="nodebuffer"?C.push(String.fromCharCode.apply(null,B.slice(T,Math.min(T+$,j)))):C.push(String.fromCharCode.apply(null,B.subarray(T,Math.min(T+$,j)))),T+=$;return C.join("")},stringifyByChar:function(B){for(var H="",$=0;$<B.length;$++)H+=String.fromCharCode(B[$]);return H},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&String.fromCharCode.apply(null,m.allocBuffer(1)).length===1}catch{return!1}}()}};function z(B){var H=65536,$=f.getTypeOf(B),C=!0;if($==="uint8array"?C=L.applyCanBeUsed.uint8array:$==="nodebuffer"&&(C=L.applyCanBeUsed.nodebuffer),C)for(;1<H;)try{return L.stringifyByChunk(B,$,H)}catch{H=Math.floor(H/2)}return L.stringifyByChar(B)}function R(B,H){for(var $=0;$<B.length;$++)H[$]=B[$];return H}f.applyFromCharCode=z;var I={};I.string={string:E,array:function(B){return A(B,new Array(B.length))},arraybuffer:function(B){return I.string.uint8array(B).buffer},uint8array:function(B){return A(B,new Uint8Array(B.length))},nodebuffer:function(B){return A(B,m.allocBuffer(B.length))}},I.array={string:z,array:E,arraybuffer:function(B){return new Uint8Array(B).buffer},uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return m.newBufferFrom(B)}},I.arraybuffer={string:function(B){return z(new Uint8Array(B))},array:function(B){return R(new Uint8Array(B),new Array(B.byteLength))},arraybuffer:E,uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return m.newBufferFrom(new Uint8Array(B))}},I.uint8array={string:z,array:function(B){return R(B,new Array(B.length))},arraybuffer:function(B){return B.buffer},uint8array:E,nodebuffer:function(B){return m.newBufferFrom(B)}},I.nodebuffer={string:z,array:function(B){return R(B,new Array(B.length))},arraybuffer:function(B){return I.nodebuffer.uint8array(B).buffer},uint8array:function(B){return R(B,new Uint8Array(B.length))},nodebuffer:E},f.transformTo=function(B,H){if(H=H||"",!B)return H;f.checkSupport(B);var $=f.getTypeOf(H);return I[$][B](H)},f.resolve=function(B){for(var H=B.split("/"),$=[],C=0;C<H.length;C++){var T=H[C];T==="."||T===""&&C!==0&&C!==H.length-1||(T===".."?$.pop():$.push(T))}return $.join("/")},f.getTypeOf=function(B){return typeof B=="string"?"string":Object.prototype.toString.call(B)==="[object Array]"?"array":u.nodebuffer&&m.isBuffer(B)?"nodebuffer":u.uint8array&&B instanceof Uint8Array?"uint8array":u.arraybuffer&&B instanceof ArrayBuffer?"arraybuffer":void 0},f.checkSupport=function(B){if(!u[B.toLowerCase()])throw new Error(B+" is not supported by this platform")},f.MAX_VALUE_16BITS=65535,f.MAX_VALUE_32BITS=-1,f.pretty=function(B){var H,$,C="";for($=0;$<(B||"").length;$++)C+="\\x"+((H=B.charCodeAt($))<16?"0":"")+H.toString(16).toUpperCase();return C},f.delay=function(B,H,$){a(function(){B.apply($||null,H||[])})},f.inherits=function(B,H){function $(){}$.prototype=H.prototype,B.prototype=new $},f.extend=function(){var B,H,$={};for(B=0;B<arguments.length;B++)for(H in arguments[B])Object.prototype.hasOwnProperty.call(arguments[B],H)&&$[H]===void 0&&($[H]=arguments[B][H]);return $},f.prepareContent=function(B,H,$,C,T){return k.Promise.resolve(H).then(function(j){return u.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new k.Promise(function(b,v){var x=new FileReader;x.onload=function(w){b(w.target.result)},x.onerror=function(w){v(w.target.error)},x.readAsArrayBuffer(j)}):j}).then(function(j){var b=f.getTypeOf(j);return b?(b==="arraybuffer"?j=f.transformTo("uint8array",j):b==="string"&&(T?j=g.decode(j):$&&C!==!0&&(j=function(v){return A(v,u.uint8array?new Uint8Array(v.length):new Array(v.length))}(j))),j):k.Promise.reject(new Error("Can't read the data of '"+B+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,d,f){var u=o("./reader/readerFor"),g=o("./utils"),m=o("./signature"),k=o("./zipEntry"),E=o("./support");function A(L){this.files=[],this.loadOptions=L}A.prototype={checkSignature:function(L){if(!this.reader.readAndCheckSignature(L)){this.reader.index-=4;var z=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+g.pretty(z)+", expected "+g.pretty(L)+")")}},isSignature:function(L,z){var R=this.reader.index;this.reader.setIndex(L);var I=this.reader.readString(4)===z;return this.reader.setIndex(R),I},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var L=this.reader.readData(this.zipCommentLength),z=E.uint8array?"uint8array":"array",R=g.transformTo(z,L);this.zipComment=this.loadOptions.decodeFileName(R)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var L,z,R,I=this.zip64EndOfCentralSize-44;0<I;)L=this.reader.readInt(2),z=this.reader.readInt(4),R=this.reader.readData(z),this.zip64ExtensibleData[L]={id:L,length:z,value:R}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var L,z;for(L=0;L<this.files.length;L++)z=this.files[L],this.reader.setIndex(z.localHeaderOffset),this.checkSignature(m.LOCAL_FILE_HEADER),z.readLocalPart(this.reader),z.handleUTF8(),z.processAttributes()},readCentralDir:function(){var L;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(m.CENTRAL_FILE_HEADER);)(L=new k({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(L);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var L=this.reader.lastIndexOfSignature(m.CENTRAL_DIRECTORY_END);if(L<0)throw this.isSignature(0,m.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(L);var z=L;if(this.checkSignature(m.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,(L=this.reader.lastIndexOfSignature(m.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(L),this.checkSignature(m.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,m.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(m.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(m.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var R=this.centralDirOffset+this.centralDirSize;this.zip64&&(R+=20,R+=12+this.zip64EndOfCentralSize);var I=z-R;if(0<I)this.isSignature(z,m.CENTRAL_FILE_HEADER)||(this.reader.zero=I);else if(I<0)throw new Error("Corrupted zip: missing "+Math.abs(I)+" bytes.")},prepareReader:function(L){this.reader=u(L)},load:function(L){this.prepareReader(L),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,d,f){var u=o("./reader/readerFor"),g=o("./utils"),m=o("./compressedObject"),k=o("./crc32"),E=o("./utf8"),A=o("./compressions"),L=o("./support");function z(R,I){this.options=R,this.loadOptions=I}z.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(R){var I,B;if(R.skip(22),this.fileNameLength=R.readInt(2),B=R.readInt(2),this.fileName=R.readData(this.fileNameLength),R.skip(B),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((I=function(H){for(var $ in A)if(Object.prototype.hasOwnProperty.call(A,$)&&A[$].magic===H)return A[$];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+g.transformTo("string",this.fileName)+")");this.decompressed=new m(this.compressedSize,this.uncompressedSize,this.crc32,I,R.readData(this.compressedSize))},readCentralPart:function(R){this.versionMadeBy=R.readInt(2),R.skip(2),this.bitFlag=R.readInt(2),this.compressionMethod=R.readString(2),this.date=R.readDate(),this.crc32=R.readInt(4),this.compressedSize=R.readInt(4),this.uncompressedSize=R.readInt(4);var I=R.readInt(2);if(this.extraFieldsLength=R.readInt(2),this.fileCommentLength=R.readInt(2),this.diskNumberStart=R.readInt(2),this.internalFileAttributes=R.readInt(2),this.externalFileAttributes=R.readInt(4),this.localHeaderOffset=R.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");R.skip(I),this.readExtraFields(R),this.parseZIP64ExtraField(R),this.fileComment=R.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var R=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),R==0&&(this.dosPermissions=63&this.externalFileAttributes),R==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var R=u(this.extraFields[1].value);this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=R.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=R.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=R.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=R.readInt(4))}},readExtraFields:function(R){var I,B,H,$=R.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});R.index+4<$;)I=R.readInt(2),B=R.readInt(2),H=R.readData(B),this.extraFields[I]={id:I,length:B,value:H};R.setIndex($)},handleUTF8:function(){var R=L.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=E.utf8decode(this.fileName),this.fileCommentStr=E.utf8decode(this.fileComment);else{var I=this.findExtraFieldUnicodePath();if(I!==null)this.fileNameStr=I;else{var B=g.transformTo(R,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(B)}var H=this.findExtraFieldUnicodeComment();if(H!==null)this.fileCommentStr=H;else{var $=g.transformTo(R,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName($)}}},findExtraFieldUnicodePath:function(){var R=this.extraFields[28789];if(R){var I=u(R.value);return I.readInt(1)!==1||k(this.fileName)!==I.readInt(4)?null:E.utf8decode(I.readData(R.length-5))}return null},findExtraFieldUnicodeComment:function(){var R=this.extraFields[25461];if(R){var I=u(R.value);return I.readInt(1)!==1||k(this.fileComment)!==I.readInt(4)?null:E.utf8decode(I.readData(R.length-5))}return null}},d.exports=z},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,d,f){function u(I,B,H){this.name=I,this.dir=H.dir,this.date=H.date,this.comment=H.comment,this.unixPermissions=H.unixPermissions,this.dosPermissions=H.dosPermissions,this._data=B,this._dataBinary=H.binary,this.options={compression:H.compression,compressionOptions:H.compressionOptions}}var g=o("./stream/StreamHelper"),m=o("./stream/DataWorker"),k=o("./utf8"),E=o("./compressedObject"),A=o("./stream/GenericWorker");u.prototype={internalStream:function(I){var B=null,H="string";try{if(!I)throw new Error("No output type specified.");var $=(H=I.toLowerCase())==="string"||H==="text";H!=="binarystring"&&H!=="text"||(H="string"),B=this._decompressWorker();var C=!this._dataBinary;C&&!$&&(B=B.pipe(new k.Utf8EncodeWorker)),!C&&$&&(B=B.pipe(new k.Utf8DecodeWorker))}catch(T){(B=new A("error")).error(T)}return new g(B,H,"")},async:function(I,B){return this.internalStream(I).accumulate(B)},nodeStream:function(I,B){return this.internalStream(I||"nodebuffer").toNodejsStream(B)},_compressWorker:function(I,B){if(this._data instanceof E&&this._data.compression.magic===I.magic)return this._data.getCompressedWorker();var H=this._decompressWorker();return this._dataBinary||(H=H.pipe(new k.Utf8EncodeWorker)),E.createWorkerFrom(H,I,B)},_decompressWorker:function(){return this._data instanceof E?this._data.getContentWorker():this._data instanceof A?this._data:new m(this._data)}};for(var L=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],z=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},R=0;R<L.length;R++)u.prototype[L[R]]=z;d.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,d,f){(function(u){var g,m,k=u.MutationObserver||u.WebKitMutationObserver;if(k){var E=0,A=new k(I),L=u.document.createTextNode("");A.observe(L,{characterData:!0}),g=function(){L.data=E=++E%2}}else if(u.setImmediate||u.MessageChannel===void 0)g="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var B=u.document.createElement("script");B.onreadystatechange=function(){I(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},u.document.documentElement.appendChild(B)}:function(){setTimeout(I,0)};else{var z=new u.MessageChannel;z.port1.onmessage=I,g=function(){z.port2.postMessage(0)}}var R=[];function I(){var B,H;m=!0;for(var $=R.length;$;){for(H=R,R=[],B=-1;++B<$;)H[B]();$=R.length}m=!1}d.exports=function(B){R.push(B)!==1||m||g()}}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,d,f){var u=o("immediate");function g(){}var m={},k=["REJECTED"],E=["FULFILLED"],A=["PENDING"];function L($){if(typeof $!="function")throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,$!==g&&B(this,$)}function z($,C,T){this.promise=$,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function R($,C,T){u(function(){var j;try{j=C(T)}catch(b){return m.reject($,b)}j===$?m.reject($,new TypeError("Cannot resolve promise with itself")):m.resolve($,j)})}function I($){var C=$&&$.then;if($&&(typeof $=="object"||typeof $=="function")&&typeof C=="function")return function(){C.apply($,arguments)}}function B($,C){var T=!1;function j(x){T||(T=!0,m.reject($,x))}function b(x){T||(T=!0,m.resolve($,x))}var v=H(function(){C(b,j)});v.status==="error"&&j(v.value)}function H($,C){var T={};try{T.value=$(C),T.status="success"}catch(j){T.status="error",T.value=j}return T}(d.exports=L).prototype.finally=function($){if(typeof $!="function")return this;var C=this.constructor;return this.then(function(T){return C.resolve($()).then(function(){return T})},function(T){return C.resolve($()).then(function(){throw T})})},L.prototype.catch=function($){return this.then(null,$)},L.prototype.then=function($,C){if(typeof $!="function"&&this.state===E||typeof C!="function"&&this.state===k)return this;var T=new this.constructor(g);return this.state!==A?R(T,this.state===E?$:C,this.outcome):this.queue.push(new z(T,$,C)),T},z.prototype.callFulfilled=function($){m.resolve(this.promise,$)},z.prototype.otherCallFulfilled=function($){R(this.promise,this.onFulfilled,$)},z.prototype.callRejected=function($){m.reject(this.promise,$)},z.prototype.otherCallRejected=function($){R(this.promise,this.onRejected,$)},m.resolve=function($,C){var T=H(I,C);if(T.status==="error")return m.reject($,T.value);var j=T.value;if(j)B($,j);else{$.state=E,$.outcome=C;for(var b=-1,v=$.queue.length;++b<v;)$.queue[b].callFulfilled(C)}return $},m.reject=function($,C){$.state=k,$.outcome=C;for(var T=-1,j=$.queue.length;++T<j;)$.queue[T].callRejected(C);return $},L.resolve=function($){return $ instanceof this?$:m.resolve(new this(g),$)},L.reject=function($){var C=new this(g);return m.reject(C,$)},L.all=function($){var C=this;if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=$.length,j=!1;if(!T)return this.resolve([]);for(var b=new Array(T),v=0,x=-1,w=new this(g);++x<T;)N($[x],x);return w;function N(P,D){C.resolve(P).then(function(V){b[D]=V,++v!==T||j||(j=!0,m.resolve(w,b))},function(V){j||(j=!0,m.reject(w,V))})}},L.race=function($){if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=$.length,T=!1;if(!C)return this.resolve([]);for(var j,b=-1,v=new this(g);++b<C;)j=$[b],this.resolve(j).then(function(x){T||(T=!0,m.resolve(v,x))},function(x){T||(T=!0,m.reject(v,x))});return v}},{immediate:36}],38:[function(o,d,f){var u={};(0,o("./lib/utils/common").assign)(u,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),d.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,d,f){var u=o("./zlib/deflate"),g=o("./utils/common"),m=o("./utils/strings"),k=o("./zlib/messages"),E=o("./zlib/zstream"),A=Object.prototype.toString;function L(R){if(!(this instanceof L))return new L(R);this.options=g.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},R||{});var I=this.options;I.raw&&0<I.windowBits?I.windowBits=-I.windowBits:I.gzip&&0<I.windowBits&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var B=u.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(B!==0)throw new Error(k[B]);if(I.header&&u.deflateSetHeader(this.strm,I.header),I.dictionary){var H;if(H=typeof I.dictionary=="string"?m.string2buf(I.dictionary):A.call(I.dictionary)==="[object ArrayBuffer]"?new Uint8Array(I.dictionary):I.dictionary,(B=u.deflateSetDictionary(this.strm,H))!==0)throw new Error(k[B]);this._dict_set=!0}}function z(R,I){var B=new L(I);if(B.push(R,!0),B.err)throw B.msg||k[B.err];return B.result}L.prototype.push=function(R,I){var B,H,$=this.strm,C=this.options.chunkSize;if(this.ended)return!1;H=I===~~I?I:I===!0?4:0,typeof R=="string"?$.input=m.string2buf(R):A.call(R)==="[object ArrayBuffer]"?$.input=new Uint8Array(R):$.input=R,$.next_in=0,$.avail_in=$.input.length;do{if($.avail_out===0&&($.output=new g.Buf8(C),$.next_out=0,$.avail_out=C),(B=u.deflate($,H))!==1&&B!==0)return this.onEnd(B),!(this.ended=!0);$.avail_out!==0&&($.avail_in!==0||H!==4&&H!==2)||(this.options.to==="string"?this.onData(m.buf2binstring(g.shrinkBuf($.output,$.next_out))):this.onData(g.shrinkBuf($.output,$.next_out)))}while((0<$.avail_in||$.avail_out===0)&&B!==1);return H===4?(B=u.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===0):H!==2||(this.onEnd(0),!($.avail_out=0))},L.prototype.onData=function(R){this.chunks.push(R)},L.prototype.onEnd=function(R){R===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=R,this.msg=this.strm.msg},f.Deflate=L,f.deflate=z,f.deflateRaw=function(R,I){return(I=I||{}).raw=!0,z(R,I)},f.gzip=function(R,I){return(I=I||{}).gzip=!0,z(R,I)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,d,f){var u=o("./zlib/inflate"),g=o("./utils/common"),m=o("./utils/strings"),k=o("./zlib/constants"),E=o("./zlib/messages"),A=o("./zlib/zstream"),L=o("./zlib/gzheader"),z=Object.prototype.toString;function R(B){if(!(this instanceof R))return new R(B);this.options=g.assign({chunkSize:16384,windowBits:0,to:""},B||{});var H=this.options;H.raw&&0<=H.windowBits&&H.windowBits<16&&(H.windowBits=-H.windowBits,H.windowBits===0&&(H.windowBits=-15)),!(0<=H.windowBits&&H.windowBits<16)||B&&B.windowBits||(H.windowBits+=32),15<H.windowBits&&H.windowBits<48&&(15&H.windowBits)==0&&(H.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var $=u.inflateInit2(this.strm,H.windowBits);if($!==k.Z_OK)throw new Error(E[$]);this.header=new L,u.inflateGetHeader(this.strm,this.header)}function I(B,H){var $=new R(H);if($.push(B,!0),$.err)throw $.msg||E[$.err];return $.result}R.prototype.push=function(B,H){var $,C,T,j,b,v,x=this.strm,w=this.options.chunkSize,N=this.options.dictionary,P=!1;if(this.ended)return!1;C=H===~~H?H:H===!0?k.Z_FINISH:k.Z_NO_FLUSH,typeof B=="string"?x.input=m.binstring2buf(B):z.call(B)==="[object ArrayBuffer]"?x.input=new Uint8Array(B):x.input=B,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new g.Buf8(w),x.next_out=0,x.avail_out=w),($=u.inflate(x,k.Z_NO_FLUSH))===k.Z_NEED_DICT&&N&&(v=typeof N=="string"?m.string2buf(N):z.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,$=u.inflateSetDictionary(this.strm,v)),$===k.Z_BUF_ERROR&&P===!0&&($=k.Z_OK,P=!1),$!==k.Z_STREAM_END&&$!==k.Z_OK)return this.onEnd($),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&$!==k.Z_STREAM_END&&(x.avail_in!==0||C!==k.Z_FINISH&&C!==k.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=m.utf8border(x.output,x.next_out),j=x.next_out-T,b=m.buf2string(x.output,T),x.next_out=j,x.avail_out=w-j,j&&g.arraySet(x.output,x.output,T,j,0),this.onData(b)):this.onData(g.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(P=!0)}while((0<x.avail_in||x.avail_out===0)&&$!==k.Z_STREAM_END);return $===k.Z_STREAM_END&&(C=k.Z_FINISH),C===k.Z_FINISH?($=u.inflateEnd(this.strm),this.onEnd($),this.ended=!0,$===k.Z_OK):C!==k.Z_SYNC_FLUSH||(this.onEnd(k.Z_OK),!(x.avail_out=0))},R.prototype.onData=function(B){this.chunks.push(B)},R.prototype.onEnd=function(B){B===k.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=B,this.msg=this.strm.msg},f.Inflate=R,f.inflate=I,f.inflateRaw=function(B,H){return(H=H||{}).raw=!0,I(B,H)},f.ungzip=I},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,d,f){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";f.assign=function(k){for(var E=Array.prototype.slice.call(arguments,1);E.length;){var A=E.shift();if(A){if(typeof A!="object")throw new TypeError(A+"must be non-object");for(var L in A)A.hasOwnProperty(L)&&(k[L]=A[L])}}return k},f.shrinkBuf=function(k,E){return k.length===E?k:k.subarray?k.subarray(0,E):(k.length=E,k)};var g={arraySet:function(k,E,A,L,z){if(E.subarray&&k.subarray)k.set(E.subarray(A,A+L),z);else for(var R=0;R<L;R++)k[z+R]=E[A+R]},flattenChunks:function(k){var E,A,L,z,R,I;for(E=L=0,A=k.length;E<A;E++)L+=k[E].length;for(I=new Uint8Array(L),E=z=0,A=k.length;E<A;E++)R=k[E],I.set(R,z),z+=R.length;return I}},m={arraySet:function(k,E,A,L,z){for(var R=0;R<L;R++)k[z+R]=E[A+R]},flattenChunks:function(k){return[].concat.apply([],k)}};f.setTyped=function(k){k?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,g)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,m))},f.setTyped(u)},{}],42:[function(o,d,f){var u=o("./common"),g=!0,m=!0;try{String.fromCharCode.apply(null,[0])}catch{g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{m=!1}for(var k=new u.Buf8(256),E=0;E<256;E++)k[E]=252<=E?6:248<=E?5:240<=E?4:224<=E?3:192<=E?2:1;function A(L,z){if(z<65537&&(L.subarray&&m||!L.subarray&&g))return String.fromCharCode.apply(null,u.shrinkBuf(L,z));for(var R="",I=0;I<z;I++)R+=String.fromCharCode(L[I]);return R}k[254]=k[254]=1,f.string2buf=function(L){var z,R,I,B,H,$=L.length,C=0;for(B=0;B<$;B++)(64512&(R=L.charCodeAt(B)))==55296&&B+1<$&&(64512&(I=L.charCodeAt(B+1)))==56320&&(R=65536+(R-55296<<10)+(I-56320),B++),C+=R<128?1:R<2048?2:R<65536?3:4;for(z=new u.Buf8(C),B=H=0;H<C;B++)(64512&(R=L.charCodeAt(B)))==55296&&B+1<$&&(64512&(I=L.charCodeAt(B+1)))==56320&&(R=65536+(R-55296<<10)+(I-56320),B++),R<128?z[H++]=R:(R<2048?z[H++]=192|R>>>6:(R<65536?z[H++]=224|R>>>12:(z[H++]=240|R>>>18,z[H++]=128|R>>>12&63),z[H++]=128|R>>>6&63),z[H++]=128|63&R);return z},f.buf2binstring=function(L){return A(L,L.length)},f.binstring2buf=function(L){for(var z=new u.Buf8(L.length),R=0,I=z.length;R<I;R++)z[R]=L.charCodeAt(R);return z},f.buf2string=function(L,z){var R,I,B,H,$=z||L.length,C=new Array(2*$);for(R=I=0;R<$;)if((B=L[R++])<128)C[I++]=B;else if(4<(H=k[B]))C[I++]=65533,R+=H-1;else{for(B&=H===2?31:H===3?15:7;1<H&&R<$;)B=B<<6|63&L[R++],H--;1<H?C[I++]=65533:B<65536?C[I++]=B:(B-=65536,C[I++]=55296|B>>10&1023,C[I++]=56320|1023&B)}return A(C,I)},f.utf8border=function(L,z){var R;for((z=z||L.length)>L.length&&(z=L.length),R=z-1;0<=R&&(192&L[R])==128;)R--;return R<0||R===0?z:R+k[L[R]]>z?R:z}},{"./common":41}],43:[function(o,d,f){d.exports=function(u,g,m,k){for(var E=65535&u|0,A=u>>>16&65535|0,L=0;m!==0;){for(m-=L=2e3<m?2e3:m;A=A+(E=E+g[k++]|0)|0,--L;);E%=65521,A%=65521}return E|A<<16|0}},{}],44:[function(o,d,f){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,d,f){var u=function(){for(var g,m=[],k=0;k<256;k++){g=k;for(var E=0;E<8;E++)g=1&g?3988292384^g>>>1:g>>>1;m[k]=g}return m}();d.exports=function(g,m,k,E){var A=u,L=E+k;g^=-1;for(var z=E;z<L;z++)g=g>>>8^A[255&(g^m[z])];return-1^g}},{}],46:[function(o,d,f){var u,g=o("../utils/common"),m=o("./trees"),k=o("./adler32"),E=o("./crc32"),A=o("./messages"),L=-2,z=258,R=262,I=113;function B(F,X){return F.msg=A[X],X}function H(F){return(F<<1)-(4<F?9:0)}function $(F){for(var X=F.length;0<=--X;)F[X]=0}function C(F){var X=F.state,O=X.pending;O>F.avail_out&&(O=F.avail_out),O!==0&&(g.arraySet(F.output,X.pending_buf,X.pending_out,O,F.next_out),F.next_out+=O,X.pending_out+=O,F.total_out+=O,F.avail_out-=O,X.pending-=O,X.pending===0&&(X.pending_out=0))}function T(F,X){m._tr_flush_block(F,0<=F.block_start?F.block_start:-1,F.strstart-F.block_start,X),F.block_start=F.strstart,C(F.strm)}function j(F,X){F.pending_buf[F.pending++]=X}function b(F,X){F.pending_buf[F.pending++]=X>>>8&255,F.pending_buf[F.pending++]=255&X}function v(F,X){var O,M,U=F.max_chain_length,K=F.strstart,Q=F.prev_length,Y=F.nice_match,J=F.strstart>F.w_size-R?F.strstart-(F.w_size-R):0,ae=F.window,ie=F.w_mask,Z=F.prev,ne=F.strstart+z,re=ae[K+Q-1],ue=ae[K+Q];F.prev_length>=F.good_match&&(U>>=2),Y>F.lookahead&&(Y=F.lookahead);do if(ae[(O=X)+Q]===ue&&ae[O+Q-1]===re&&ae[O]===ae[K]&&ae[++O]===ae[K+1]){K+=2,O++;do;while(ae[++K]===ae[++O]&&ae[++K]===ae[++O]&&ae[++K]===ae[++O]&&ae[++K]===ae[++O]&&ae[++K]===ae[++O]&&ae[++K]===ae[++O]&&ae[++K]===ae[++O]&&ae[++K]===ae[++O]&&K<ne);if(M=z-(ne-K),K=ne-z,Q<M){if(F.match_start=X,Y<=(Q=M))break;re=ae[K+Q-1],ue=ae[K+Q]}}while((X=Z[X&ie])>J&&--U!=0);return Q<=F.lookahead?Q:F.lookahead}function x(F){var X,O,M,U,K,Q,Y,J,ae,ie,Z=F.w_size;do{if(U=F.window_size-F.lookahead-F.strstart,F.strstart>=Z+(Z-R)){for(g.arraySet(F.window,F.window,Z,Z,0),F.match_start-=Z,F.strstart-=Z,F.block_start-=Z,X=O=F.hash_size;M=F.head[--X],F.head[X]=Z<=M?M-Z:0,--O;);for(X=O=Z;M=F.prev[--X],F.prev[X]=Z<=M?M-Z:0,--O;);U+=Z}if(F.strm.avail_in===0)break;if(Q=F.strm,Y=F.window,J=F.strstart+F.lookahead,ie=void 0,(ae=U)<(ie=Q.avail_in)&&(ie=ae),O=ie===0?0:(Q.avail_in-=ie,g.arraySet(Y,Q.input,Q.next_in,ie,J),Q.state.wrap===1?Q.adler=k(Q.adler,Y,ie,J):Q.state.wrap===2&&(Q.adler=E(Q.adler,Y,ie,J)),Q.next_in+=ie,Q.total_in+=ie,ie),F.lookahead+=O,F.lookahead+F.insert>=3)for(K=F.strstart-F.insert,F.ins_h=F.window[K],F.ins_h=(F.ins_h<<F.hash_shift^F.window[K+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[K+3-1])&F.hash_mask,F.prev[K&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=K,K++,F.insert--,!(F.lookahead+F.insert<3)););}while(F.lookahead<R&&F.strm.avail_in!==0)}function w(F,X){for(var O,M;;){if(F.lookahead<R){if(x(F),F.lookahead<R&&X===0)return 1;if(F.lookahead===0)break}if(O=0,F.lookahead>=3&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,O=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),O!==0&&F.strstart-O<=F.w_size-R&&(F.match_length=v(F,O)),F.match_length>=3)if(M=m._tr_tally(F,F.strstart-F.match_start,F.match_length-3),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=3){for(F.match_length--;F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,O=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart,--F.match_length!=0;);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else M=m._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(M&&(T(F,!1),F.strm.avail_out===0))return 1}return F.insert=F.strstart<2?F.strstart:2,X===4?(T(F,!0),F.strm.avail_out===0?3:4):F.last_lit&&(T(F,!1),F.strm.avail_out===0)?1:2}function N(F,X){for(var O,M,U;;){if(F.lookahead<R){if(x(F),F.lookahead<R&&X===0)return 1;if(F.lookahead===0)break}if(O=0,F.lookahead>=3&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,O=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=2,O!==0&&F.prev_length<F.max_lazy_match&&F.strstart-O<=F.w_size-R&&(F.match_length=v(F,O),F.match_length<=5&&(F.strategy===1||F.match_length===3&&4096<F.strstart-F.match_start)&&(F.match_length=2)),F.prev_length>=3&&F.match_length<=F.prev_length){for(U=F.strstart+F.lookahead-3,M=m._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-3),F.lookahead-=F.prev_length-1,F.prev_length-=2;++F.strstart<=U&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,O=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),--F.prev_length!=0;);if(F.match_available=0,F.match_length=2,F.strstart++,M&&(T(F,!1),F.strm.avail_out===0))return 1}else if(F.match_available){if((M=m._tr_tally(F,0,F.window[F.strstart-1]))&&T(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return 1}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(M=m._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<2?F.strstart:2,X===4?(T(F,!0),F.strm.avail_out===0?3:4):F.last_lit&&(T(F,!1),F.strm.avail_out===0)?1:2}function P(F,X,O,M,U){this.good_length=F,this.max_lazy=X,this.nice_length=O,this.max_chain=M,this.func=U}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(1146),this.dyn_dtree=new g.Buf16(122),this.bl_tree=new g.Buf16(78),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(16),this.heap=new g.Buf16(573),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(573),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(F){var X;return F&&F.state?(F.total_in=F.total_out=0,F.data_type=2,(X=F.state).pending=0,X.pending_out=0,X.wrap<0&&(X.wrap=-X.wrap),X.status=X.wrap?42:I,F.adler=X.wrap===2?0:1,X.last_flush=0,m._tr_init(X),0):B(F,L)}function q(F){var X=V(F);return X===0&&function(O){O.window_size=2*O.w_size,$(O.head),O.max_lazy_match=u[O.level].max_lazy,O.good_match=u[O.level].good_length,O.nice_match=u[O.level].nice_length,O.max_chain_length=u[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=2,O.match_available=0,O.ins_h=0}(F.state),X}function G(F,X,O,M,U,K){if(!F)return L;var Q=1;if(X===-1&&(X=6),M<0?(Q=0,M=-M):15<M&&(Q=2,M-=16),U<1||9<U||O!==8||M<8||15<M||X<0||9<X||K<0||4<K)return B(F,L);M===8&&(M=9);var Y=new D;return(F.state=Y).strm=F,Y.wrap=Q,Y.gzhead=null,Y.w_bits=M,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=U+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+3-1)/3),Y.window=new g.Buf8(2*Y.w_size),Y.head=new g.Buf16(Y.hash_size),Y.prev=new g.Buf16(Y.w_size),Y.lit_bufsize=1<<U+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new g.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=X,Y.strategy=K,Y.method=O,q(F)}u=[new P(0,0,0,0,function(F,X){var O=65535;for(O>F.pending_buf_size-5&&(O=F.pending_buf_size-5);;){if(F.lookahead<=1){if(x(F),F.lookahead===0&&X===0)return 1;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var M=F.block_start+O;if((F.strstart===0||F.strstart>=M)&&(F.lookahead=F.strstart-M,F.strstart=M,T(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-R&&(T(F,!1),F.strm.avail_out===0))return 1}return F.insert=0,X===4?(T(F,!0),F.strm.avail_out===0?3:4):(F.strstart>F.block_start&&(T(F,!1),F.strm.avail_out),1)}),new P(4,4,8,4,w),new P(4,5,16,8,w),new P(4,6,32,32,w),new P(4,4,16,16,N),new P(8,16,32,32,N),new P(8,16,128,128,N),new P(8,32,128,256,N),new P(32,128,258,1024,N),new P(32,258,258,4096,N)],f.deflateInit=function(F,X){return G(F,X,8,15,8,0)},f.deflateInit2=G,f.deflateReset=q,f.deflateResetKeep=V,f.deflateSetHeader=function(F,X){return F&&F.state?F.state.wrap!==2?L:(F.state.gzhead=X,0):L},f.deflate=function(F,X){var O,M,U,K;if(!F||!F.state||5<X||X<0)return F?B(F,L):L;if(M=F.state,!F.output||!F.input&&F.avail_in!==0||M.status===666&&X!==4)return B(F,F.avail_out===0?-5:L);if(M.strm=F,O=M.last_flush,M.last_flush=X,M.status===42)if(M.wrap===2)F.adler=0,j(M,31),j(M,139),j(M,8),M.gzhead?(j(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),j(M,255&M.gzhead.time),j(M,M.gzhead.time>>8&255),j(M,M.gzhead.time>>16&255),j(M,M.gzhead.time>>24&255),j(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),j(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(j(M,255&M.gzhead.extra.length),j(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(F.adler=E(F.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(j(M,0),j(M,0),j(M,0),j(M,0),j(M,0),j(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),j(M,3),M.status=I);else{var Q=8+(M.w_bits-8<<4)<<8;Q|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(Q|=32),Q+=31-Q%31,M.status=I,b(M,Q),M.strstart!==0&&(b(M,F.adler>>>16),b(M,65535&F.adler)),F.adler=1}if(M.status===69)if(M.gzhead.extra){for(U=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>U&&(F.adler=E(F.adler,M.pending_buf,M.pending-U,U)),C(F),U=M.pending,M.pending!==M.pending_buf_size));)j(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>U&&(F.adler=E(F.adler,M.pending_buf,M.pending-U,U)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){U=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>U&&(F.adler=E(F.adler,M.pending_buf,M.pending-U,U)),C(F),U=M.pending,M.pending===M.pending_buf_size)){K=1;break}K=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,j(M,K)}while(K!==0);M.gzhead.hcrc&&M.pending>U&&(F.adler=E(F.adler,M.pending_buf,M.pending-U,U)),K===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){U=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>U&&(F.adler=E(F.adler,M.pending_buf,M.pending-U,U)),C(F),U=M.pending,M.pending===M.pending_buf_size)){K=1;break}K=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,j(M,K)}while(K!==0);M.gzhead.hcrc&&M.pending>U&&(F.adler=E(F.adler,M.pending_buf,M.pending-U,U)),K===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&C(F),M.pending+2<=M.pending_buf_size&&(j(M,255&F.adler),j(M,F.adler>>8&255),F.adler=0,M.status=I)):M.status=I),M.pending!==0){if(C(F),F.avail_out===0)return M.last_flush=-1,0}else if(F.avail_in===0&&H(X)<=H(O)&&X!==4)return B(F,-5);if(M.status===666&&F.avail_in!==0)return B(F,-5);if(F.avail_in!==0||M.lookahead!==0||X!==0&&M.status!==666){var Y=M.strategy===2?function(J,ae){for(var ie;;){if(J.lookahead===0&&(x(J),J.lookahead===0)){if(ae===0)return 1;break}if(J.match_length=0,ie=m._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,ie&&(T(J,!1),J.strm.avail_out===0))return 1}return J.insert=0,ae===4?(T(J,!0),J.strm.avail_out===0?3:4):J.last_lit&&(T(J,!1),J.strm.avail_out===0)?1:2}(M,X):M.strategy===3?function(J,ae){for(var ie,Z,ne,re,ue=J.window;;){if(J.lookahead<=z){if(x(J),J.lookahead<=z&&ae===0)return 1;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=3&&0<J.strstart&&(Z=ue[ne=J.strstart-1])===ue[++ne]&&Z===ue[++ne]&&Z===ue[++ne]){re=J.strstart+z;do;while(Z===ue[++ne]&&Z===ue[++ne]&&Z===ue[++ne]&&Z===ue[++ne]&&Z===ue[++ne]&&Z===ue[++ne]&&Z===ue[++ne]&&Z===ue[++ne]&&ne<re);J.match_length=z-(re-ne),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=3?(ie=m._tr_tally(J,1,J.match_length-3),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(ie=m._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),ie&&(T(J,!1),J.strm.avail_out===0))return 1}return J.insert=0,ae===4?(T(J,!0),J.strm.avail_out===0?3:4):J.last_lit&&(T(J,!1),J.strm.avail_out===0)?1:2}(M,X):u[M.level].func(M,X);if(Y!==3&&Y!==4||(M.status=666),Y===1||Y===3)return F.avail_out===0&&(M.last_flush=-1),0;if(Y===2&&(X===1?m._tr_align(M):X!==5&&(m._tr_stored_block(M,0,0,!1),X===3&&($(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),C(F),F.avail_out===0))return M.last_flush=-1,0}return X!==4?0:M.wrap<=0?1:(M.wrap===2?(j(M,255&F.adler),j(M,F.adler>>8&255),j(M,F.adler>>16&255),j(M,F.adler>>24&255),j(M,255&F.total_in),j(M,F.total_in>>8&255),j(M,F.total_in>>16&255),j(M,F.total_in>>24&255)):(b(M,F.adler>>>16),b(M,65535&F.adler)),C(F),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?0:1)},f.deflateEnd=function(F){var X;return F&&F.state?(X=F.state.status)!==42&&X!==69&&X!==73&&X!==91&&X!==103&&X!==I&&X!==666?B(F,L):(F.state=null,X===I?B(F,-3):0):L},f.deflateSetDictionary=function(F,X){var O,M,U,K,Q,Y,J,ae,ie=X.length;if(!F||!F.state||(K=(O=F.state).wrap)===2||K===1&&O.status!==42||O.lookahead)return L;for(K===1&&(F.adler=k(F.adler,X,ie,0)),O.wrap=0,ie>=O.w_size&&(K===0&&($(O.head),O.strstart=0,O.block_start=0,O.insert=0),ae=new g.Buf8(O.w_size),g.arraySet(ae,X,ie-O.w_size,O.w_size,0),X=ae,ie=O.w_size),Q=F.avail_in,Y=F.next_in,J=F.input,F.avail_in=ie,F.next_in=0,F.input=X,x(O);O.lookahead>=3;){for(M=O.strstart,U=O.lookahead-2;O.ins_h=(O.ins_h<<O.hash_shift^O.window[M+3-1])&O.hash_mask,O.prev[M&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=M,M++,--U;);O.strstart=M,O.lookahead=2,x(O)}return O.strstart+=O.lookahead,O.block_start=O.strstart,O.insert=O.lookahead,O.lookahead=0,O.match_length=O.prev_length=2,O.match_available=0,F.next_in=Y,F.input=J,F.avail_in=Q,O.wrap=K,0},f.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,d,f){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,d,f){d.exports=function(u,g){var m,k,E,A,L,z,R,I,B,H,$,C,T,j,b,v,x,w,N,P,D,V,q,G,F;m=u.state,k=u.next_in,G=u.input,E=k+(u.avail_in-5),A=u.next_out,F=u.output,L=A-(g-u.avail_out),z=A+(u.avail_out-257),R=m.dmax,I=m.wsize,B=m.whave,H=m.wnext,$=m.window,C=m.hold,T=m.bits,j=m.lencode,b=m.distcode,v=(1<<m.lenbits)-1,x=(1<<m.distbits)-1;e:do{T<15&&(C+=G[k++]<<T,T+=8,C+=G[k++]<<T,T+=8),w=j[C&v];t:for(;;){if(C>>>=N=w>>>24,T-=N,(N=w>>>16&255)==0)F[A++]=65535&w;else{if(!(16&N)){if((64&N)==0){w=j[(65535&w)+(C&(1<<N)-1)];continue t}if(32&N){m.mode=12;break e}u.msg="invalid literal/length code",m.mode=30;break e}P=65535&w,(N&=15)&&(T<N&&(C+=G[k++]<<T,T+=8),P+=C&(1<<N)-1,C>>>=N,T-=N),T<15&&(C+=G[k++]<<T,T+=8,C+=G[k++]<<T,T+=8),w=b[C&x];r:for(;;){if(C>>>=N=w>>>24,T-=N,!(16&(N=w>>>16&255))){if((64&N)==0){w=b[(65535&w)+(C&(1<<N)-1)];continue r}u.msg="invalid distance code",m.mode=30;break e}if(D=65535&w,T<(N&=15)&&(C+=G[k++]<<T,(T+=8)<N&&(C+=G[k++]<<T,T+=8)),R<(D+=C&(1<<N)-1)){u.msg="invalid distance too far back",m.mode=30;break e}if(C>>>=N,T-=N,(N=A-L)<D){if(B<(N=D-N)&&m.sane){u.msg="invalid distance too far back",m.mode=30;break e}if(q=$,(V=0)===H){if(V+=I-N,N<P){for(P-=N;F[A++]=$[V++],--N;);V=A-D,q=F}}else if(H<N){if(V+=I+H-N,(N-=H)<P){for(P-=N;F[A++]=$[V++],--N;);if(V=0,H<P){for(P-=N=H;F[A++]=$[V++],--N;);V=A-D,q=F}}}else if(V+=H-N,N<P){for(P-=N;F[A++]=$[V++],--N;);V=A-D,q=F}for(;2<P;)F[A++]=q[V++],F[A++]=q[V++],F[A++]=q[V++],P-=3;P&&(F[A++]=q[V++],1<P&&(F[A++]=q[V++]))}else{for(V=A-D;F[A++]=F[V++],F[A++]=F[V++],F[A++]=F[V++],2<(P-=3););P&&(F[A++]=F[V++],1<P&&(F[A++]=F[V++]))}break}}break}}while(k<E&&A<z);k-=P=T>>3,C&=(1<<(T-=P<<3))-1,u.next_in=k,u.next_out=A,u.avail_in=k<E?E-k+5:5-(k-E),u.avail_out=A<z?z-A+257:257-(A-z),m.hold=C,m.bits=T}},{}],49:[function(o,d,f){var u=o("../utils/common"),g=o("./adler32"),m=o("./crc32"),k=o("./inffast"),E=o("./inftrees"),A=-2;function L(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function z(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(v){var x;return v&&v.state?(x=v.state,v.total_in=v.total_out=x.total=0,v.msg="",x.wrap&&(v.adler=1&x.wrap),x.mode=1,x.last=0,x.havedict=0,x.dmax=32768,x.head=null,x.hold=0,x.bits=0,x.lencode=x.lendyn=new u.Buf32(852),x.distcode=x.distdyn=new u.Buf32(592),x.sane=1,x.back=-1,0):A}function I(v){var x;return v&&v.state?((x=v.state).wsize=0,x.whave=0,x.wnext=0,R(v)):A}function B(v,x){var w,N;return v&&v.state?(N=v.state,x<0?(w=0,x=-x):(w=1+(x>>4),x<48&&(x&=15)),x&&(x<8||15<x)?A:(N.window!==null&&N.wbits!==x&&(N.window=null),N.wrap=w,N.wbits=x,I(v))):A}function H(v,x){var w,N;return v?(N=new z,(v.state=N).window=null,(w=B(v,x))!==0&&(v.state=null),w):A}var $,C,T=!0;function j(v){if(T){var x;for($=new u.Buf32(512),C=new u.Buf32(32),x=0;x<144;)v.lens[x++]=8;for(;x<256;)v.lens[x++]=9;for(;x<280;)v.lens[x++]=7;for(;x<288;)v.lens[x++]=8;for(E(1,v.lens,0,288,$,0,v.work,{bits:9}),x=0;x<32;)v.lens[x++]=5;E(2,v.lens,0,32,C,0,v.work,{bits:5}),T=!1}v.lencode=$,v.lenbits=9,v.distcode=C,v.distbits=5}function b(v,x,w,N){var P,D=v.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new u.Buf8(D.wsize)),N>=D.wsize?(u.arraySet(D.window,x,w-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(N<(P=D.wsize-D.wnext)&&(P=N),u.arraySet(D.window,x,w-N,P,D.wnext),(N-=P)?(u.arraySet(D.window,x,w-N,N,0),D.wnext=N,D.whave=D.wsize):(D.wnext+=P,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=P))),0}f.inflateReset=I,f.inflateReset2=B,f.inflateResetKeep=R,f.inflateInit=function(v){return H(v,15)},f.inflateInit2=H,f.inflate=function(v,x){var w,N,P,D,V,q,G,F,X,O,M,U,K,Q,Y,J,ae,ie,Z,ne,re,ue,ce,te,de=0,le=new u.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return A;(w=v.state).mode===12&&(w.mode=13),V=v.next_out,P=v.output,G=v.avail_out,D=v.next_in,N=v.input,q=v.avail_in,F=w.hold,X=w.bits,O=q,M=G,ue=0;e:for(;;)switch(w.mode){case 1:if(w.wrap===0){w.mode=13;break}for(;X<16;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(2&w.wrap&&F===35615){le[w.check=0]=255&F,le[1]=F>>>8&255,w.check=m(w.check,le,2,0),X=F=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&F)<<8)+(F>>8))%31){v.msg="incorrect header check",w.mode=30;break}if((15&F)!=8){v.msg="unknown compression method",w.mode=30;break}if(X-=4,re=8+(15&(F>>>=4)),w.wbits===0)w.wbits=re;else if(re>w.wbits){v.msg="invalid window size",w.mode=30;break}w.dmax=1<<re,v.adler=w.check=1,w.mode=512&F?10:12,X=F=0;break;case 2:for(;X<16;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(w.flags=F,(255&w.flags)!=8){v.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){v.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=F>>8&1),512&w.flags&&(le[0]=255&F,le[1]=F>>>8&255,w.check=m(w.check,le,2,0)),X=F=0,w.mode=3;case 3:for(;X<32;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}w.head&&(w.head.time=F),512&w.flags&&(le[0]=255&F,le[1]=F>>>8&255,le[2]=F>>>16&255,le[3]=F>>>24&255,w.check=m(w.check,le,4,0)),X=F=0,w.mode=4;case 4:for(;X<16;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}w.head&&(w.head.xflags=255&F,w.head.os=F>>8),512&w.flags&&(le[0]=255&F,le[1]=F>>>8&255,w.check=m(w.check,le,2,0)),X=F=0,w.mode=5;case 5:if(1024&w.flags){for(;X<16;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}w.length=F,w.head&&(w.head.extra_len=F),512&w.flags&&(le[0]=255&F,le[1]=F>>>8&255,w.check=m(w.check,le,2,0)),X=F=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(q<(U=w.length)&&(U=q),U&&(w.head&&(re=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),u.arraySet(w.head.extra,N,D,U,re)),512&w.flags&&(w.check=m(w.check,N,U,D)),q-=U,D+=U,w.length-=U),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(q===0)break e;for(U=0;re=N[D+U++],w.head&&re&&w.length<65536&&(w.head.name+=String.fromCharCode(re)),re&&U<q;);if(512&w.flags&&(w.check=m(w.check,N,U,D)),q-=U,D+=U,re)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(q===0)break e;for(U=0;re=N[D+U++],w.head&&re&&w.length<65536&&(w.head.comment+=String.fromCharCode(re)),re&&U<q;);if(512&w.flags&&(w.check=m(w.check,N,U,D)),q-=U,D+=U,re)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;X<16;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(F!==(65535&w.check)){v.msg="header crc mismatch",w.mode=30;break}X=F=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),v.adler=w.check=0,w.mode=12;break;case 10:for(;X<32;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}v.adler=w.check=L(F),X=F=0,w.mode=11;case 11:if(w.havedict===0)return v.next_out=V,v.avail_out=G,v.next_in=D,v.avail_in=q,w.hold=F,w.bits=X,2;v.adler=w.check=1,w.mode=12;case 12:if(x===5||x===6)break e;case 13:if(w.last){F>>>=7&X,X-=7&X,w.mode=27;break}for(;X<3;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}switch(w.last=1&F,X-=1,3&(F>>>=1)){case 0:w.mode=14;break;case 1:if(j(w),w.mode=20,x!==6)break;F>>>=2,X-=2;break e;case 2:w.mode=17;break;case 3:v.msg="invalid block type",w.mode=30}F>>>=2,X-=2;break;case 14:for(F>>>=7&X,X-=7&X;X<32;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if((65535&F)!=(F>>>16^65535)){v.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&F,X=F=0,w.mode=15,x===6)break e;case 15:w.mode=16;case 16:if(U=w.length){if(q<U&&(U=q),G<U&&(U=G),U===0)break e;u.arraySet(P,N,D,U,V),q-=U,D+=U,G-=U,V+=U,w.length-=U;break}w.mode=12;break;case 17:for(;X<14;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(w.nlen=257+(31&F),F>>>=5,X-=5,w.ndist=1+(31&F),F>>>=5,X-=5,w.ncode=4+(15&F),F>>>=4,X-=4,286<w.nlen||30<w.ndist){v.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;X<3;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}w.lens[ve[w.have++]]=7&F,F>>>=3,X-=3}for(;w.have<19;)w.lens[ve[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,ce={bits:w.lenbits},ue=E(0,w.lens,0,19,w.lencode,0,w.work,ce),w.lenbits=ce.bits,ue){v.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;J=(de=w.lencode[F&(1<<w.lenbits)-1])>>>16&255,ae=65535&de,!((Y=de>>>24)<=X);){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(ae<16)F>>>=Y,X-=Y,w.lens[w.have++]=ae;else{if(ae===16){for(te=Y+2;X<te;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(F>>>=Y,X-=Y,w.have===0){v.msg="invalid bit length repeat",w.mode=30;break}re=w.lens[w.have-1],U=3+(3&F),F>>>=2,X-=2}else if(ae===17){for(te=Y+3;X<te;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}X-=Y,re=0,U=3+(7&(F>>>=Y)),F>>>=3,X-=3}else{for(te=Y+7;X<te;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}X-=Y,re=0,U=11+(127&(F>>>=Y)),F>>>=7,X-=7}if(w.have+U>w.nlen+w.ndist){v.msg="invalid bit length repeat",w.mode=30;break}for(;U--;)w.lens[w.have++]=re}}if(w.mode===30)break;if(w.lens[256]===0){v.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,ce={bits:w.lenbits},ue=E(1,w.lens,0,w.nlen,w.lencode,0,w.work,ce),w.lenbits=ce.bits,ue){v.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,ce={bits:w.distbits},ue=E(2,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,ce),w.distbits=ce.bits,ue){v.msg="invalid distances set",w.mode=30;break}if(w.mode=20,x===6)break e;case 20:w.mode=21;case 21:if(6<=q&&258<=G){v.next_out=V,v.avail_out=G,v.next_in=D,v.avail_in=q,w.hold=F,w.bits=X,k(v,M),V=v.next_out,P=v.output,G=v.avail_out,D=v.next_in,N=v.input,q=v.avail_in,F=w.hold,X=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;J=(de=w.lencode[F&(1<<w.lenbits)-1])>>>16&255,ae=65535&de,!((Y=de>>>24)<=X);){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(J&&(240&J)==0){for(ie=Y,Z=J,ne=ae;J=(de=w.lencode[ne+((F&(1<<ie+Z)-1)>>ie)])>>>16&255,ae=65535&de,!(ie+(Y=de>>>24)<=X);){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}F>>>=ie,X-=ie,w.back+=ie}if(F>>>=Y,X-=Y,w.back+=Y,w.length=ae,J===0){w.mode=26;break}if(32&J){w.back=-1,w.mode=12;break}if(64&J){v.msg="invalid literal/length code",w.mode=30;break}w.extra=15&J,w.mode=22;case 22:if(w.extra){for(te=w.extra;X<te;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}w.length+=F&(1<<w.extra)-1,F>>>=w.extra,X-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;J=(de=w.distcode[F&(1<<w.distbits)-1])>>>16&255,ae=65535&de,!((Y=de>>>24)<=X);){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if((240&J)==0){for(ie=Y,Z=J,ne=ae;J=(de=w.distcode[ne+((F&(1<<ie+Z)-1)>>ie)])>>>16&255,ae=65535&de,!(ie+(Y=de>>>24)<=X);){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}F>>>=ie,X-=ie,w.back+=ie}if(F>>>=Y,X-=Y,w.back+=Y,64&J){v.msg="invalid distance code",w.mode=30;break}w.offset=ae,w.extra=15&J,w.mode=24;case 24:if(w.extra){for(te=w.extra;X<te;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}w.offset+=F&(1<<w.extra)-1,F>>>=w.extra,X-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){v.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(G===0)break e;if(U=M-G,w.offset>U){if((U=w.offset-U)>w.whave&&w.sane){v.msg="invalid distance too far back",w.mode=30;break}K=U>w.wnext?(U-=w.wnext,w.wsize-U):w.wnext-U,U>w.length&&(U=w.length),Q=w.window}else Q=P,K=V-w.offset,U=w.length;for(G<U&&(U=G),G-=U,w.length-=U;P[V++]=Q[K++],--U;);w.length===0&&(w.mode=21);break;case 26:if(G===0)break e;P[V++]=w.length,G--,w.mode=21;break;case 27:if(w.wrap){for(;X<32;){if(q===0)break e;q--,F|=N[D++]<<X,X+=8}if(M-=G,v.total_out+=M,w.total+=M,M&&(v.adler=w.check=w.flags?m(w.check,P,M,V-M):g(w.check,P,M,V-M)),M=G,(w.flags?F:L(F))!==w.check){v.msg="incorrect data check",w.mode=30;break}X=F=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;X<32;){if(q===0)break e;q--,F+=N[D++]<<X,X+=8}if(F!==(4294967295&w.total)){v.msg="incorrect length check",w.mode=30;break}X=F=0}w.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return A}return v.next_out=V,v.avail_out=G,v.next_in=D,v.avail_in=q,w.hold=F,w.bits=X,(w.wsize||M!==v.avail_out&&w.mode<30&&(w.mode<27||x!==4))&&b(v,v.output,v.next_out,M-v.avail_out)?(w.mode=31,-4):(O-=v.avail_in,M-=v.avail_out,v.total_in+=O,v.total_out+=M,w.total+=M,w.wrap&&M&&(v.adler=w.check=w.flags?m(w.check,P,M,v.next_out-M):g(w.check,P,M,v.next_out-M)),v.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(O==0&&M===0||x===4)&&ue===0&&(ue=-5),ue)},f.inflateEnd=function(v){if(!v||!v.state)return A;var x=v.state;return x.window&&(x.window=null),v.state=null,0},f.inflateGetHeader=function(v,x){var w;return v&&v.state?(2&(w=v.state).wrap)==0?A:((w.head=x).done=!1,0):A},f.inflateSetDictionary=function(v,x){var w,N=x.length;return v&&v.state?(w=v.state).wrap!==0&&w.mode!==11?A:w.mode===11&&g(1,x,N,0)!==w.check?-3:b(v,x,N,N)?(w.mode=31,-4):(w.havedict=1,0):A},f.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,d,f){var u=o("../utils/common"),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(A,L,z,R,I,B,H,$){var C,T,j,b,v,x,w,N,P,D=$.bits,V=0,q=0,G=0,F=0,X=0,O=0,M=0,U=0,K=0,Q=0,Y=null,J=0,ae=new u.Buf16(16),ie=new u.Buf16(16),Z=null,ne=0;for(V=0;V<=15;V++)ae[V]=0;for(q=0;q<R;q++)ae[L[z+q]]++;for(X=D,F=15;1<=F&&ae[F]===0;F--);if(F<X&&(X=F),F===0)return I[B++]=20971520,I[B++]=20971520,$.bits=1,0;for(G=1;G<F&&ae[G]===0;G++);for(X<G&&(X=G),V=U=1;V<=15;V++)if(U<<=1,(U-=ae[V])<0)return-1;if(0<U&&(A===0||F!==1))return-1;for(ie[1]=0,V=1;V<15;V++)ie[V+1]=ie[V]+ae[V];for(q=0;q<R;q++)L[z+q]!==0&&(H[ie[L[z+q]]++]=q);if(x=A===0?(Y=Z=H,19):A===1?(Y=g,J-=257,Z=m,ne-=257,256):(Y=k,Z=E,-1),V=G,v=B,M=q=Q=0,j=-1,b=(K=1<<(O=X))-1,A===1&&852<K||A===2&&592<K)return 1;for(;;){for(w=V-M,P=H[q]<x?(N=0,H[q]):H[q]>x?(N=Z[ne+H[q]],Y[J+H[q]]):(N=96,0),C=1<<V-M,G=T=1<<O;I[v+(Q>>M)+(T-=C)]=w<<24|N<<16|P|0,T!==0;);for(C=1<<V-1;Q&C;)C>>=1;if(C!==0?(Q&=C-1,Q+=C):Q=0,q++,--ae[V]==0){if(V===F)break;V=L[z+H[q]]}if(X<V&&(Q&b)!==j){for(M===0&&(M=X),v+=G,U=1<<(O=V-M);O+M<F&&!((U-=ae[O+M])<=0);)O++,U<<=1;if(K+=1<<O,A===1&&852<K||A===2&&592<K)return 1;I[j=Q&b]=X<<24|O<<16|v-B|0}}return Q!==0&&(I[v+Q]=V-M<<24|64<<16|0),$.bits=X,0}},{"../utils/common":41}],51:[function(o,d,f){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,d,f){var u=o("../utils/common");function g(Z){for(var ne=Z.length;0<=--ne;)Z[ne]=0}var m=256,k=286,E=30,A=15,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(576);g(B);var H=new Array(60);g(H);var $=new Array(512);g($);var C=new Array(256);g(C);var T=new Array(29);g(T);var j,b,v,x=new Array(E);function w(Z,ne,re,ue,ce){this.static_tree=Z,this.extra_bits=ne,this.extra_base=re,this.elems=ue,this.max_length=ce,this.has_stree=Z&&Z.length}function N(Z,ne){this.dyn_tree=Z,this.max_code=0,this.stat_desc=ne}function P(Z){return Z<256?$[Z]:$[256+(Z>>>7)]}function D(Z,ne){Z.pending_buf[Z.pending++]=255&ne,Z.pending_buf[Z.pending++]=ne>>>8&255}function V(Z,ne,re){Z.bi_valid>16-re?(Z.bi_buf|=ne<<Z.bi_valid&65535,D(Z,Z.bi_buf),Z.bi_buf=ne>>16-Z.bi_valid,Z.bi_valid+=re-16):(Z.bi_buf|=ne<<Z.bi_valid&65535,Z.bi_valid+=re)}function q(Z,ne,re){V(Z,re[2*ne],re[2*ne+1])}function G(Z,ne){for(var re=0;re|=1&Z,Z>>>=1,re<<=1,0<--ne;);return re>>>1}function F(Z,ne,re){var ue,ce,te=new Array(16),de=0;for(ue=1;ue<=A;ue++)te[ue]=de=de+re[ue-1]<<1;for(ce=0;ce<=ne;ce++){var le=Z[2*ce+1];le!==0&&(Z[2*ce]=G(te[le]++,le))}}function X(Z){var ne;for(ne=0;ne<k;ne++)Z.dyn_ltree[2*ne]=0;for(ne=0;ne<E;ne++)Z.dyn_dtree[2*ne]=0;for(ne=0;ne<19;ne++)Z.bl_tree[2*ne]=0;Z.dyn_ltree[512]=1,Z.opt_len=Z.static_len=0,Z.last_lit=Z.matches=0}function O(Z){8<Z.bi_valid?D(Z,Z.bi_buf):0<Z.bi_valid&&(Z.pending_buf[Z.pending++]=Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0}function M(Z,ne,re,ue){var ce=2*ne,te=2*re;return Z[ce]<Z[te]||Z[ce]===Z[te]&&ue[ne]<=ue[re]}function U(Z,ne,re){for(var ue=Z.heap[re],ce=re<<1;ce<=Z.heap_len&&(ce<Z.heap_len&&M(ne,Z.heap[ce+1],Z.heap[ce],Z.depth)&&ce++,!M(ne,ue,Z.heap[ce],Z.depth));)Z.heap[re]=Z.heap[ce],re=ce,ce<<=1;Z.heap[re]=ue}function K(Z,ne,re){var ue,ce,te,de,le=0;if(Z.last_lit!==0)for(;ue=Z.pending_buf[Z.d_buf+2*le]<<8|Z.pending_buf[Z.d_buf+2*le+1],ce=Z.pending_buf[Z.l_buf+le],le++,ue===0?q(Z,ce,ne):(q(Z,(te=C[ce])+m+1,ne),(de=L[te])!==0&&V(Z,ce-=T[te],de),q(Z,te=P(--ue),re),(de=z[te])!==0&&V(Z,ue-=x[te],de)),le<Z.last_lit;);q(Z,256,ne)}function Q(Z,ne){var re,ue,ce,te=ne.dyn_tree,de=ne.stat_desc.static_tree,le=ne.stat_desc.has_stree,ve=ne.stat_desc.elems,we=-1;for(Z.heap_len=0,Z.heap_max=573,re=0;re<ve;re++)te[2*re]!==0?(Z.heap[++Z.heap_len]=we=re,Z.depth[re]=0):te[2*re+1]=0;for(;Z.heap_len<2;)te[2*(ce=Z.heap[++Z.heap_len]=we<2?++we:0)]=1,Z.depth[ce]=0,Z.opt_len--,le&&(Z.static_len-=de[2*ce+1]);for(ne.max_code=we,re=Z.heap_len>>1;1<=re;re--)U(Z,te,re);for(ce=ve;re=Z.heap[1],Z.heap[1]=Z.heap[Z.heap_len--],U(Z,te,1),ue=Z.heap[1],Z.heap[--Z.heap_max]=re,Z.heap[--Z.heap_max]=ue,te[2*ce]=te[2*re]+te[2*ue],Z.depth[ce]=(Z.depth[re]>=Z.depth[ue]?Z.depth[re]:Z.depth[ue])+1,te[2*re+1]=te[2*ue+1]=ce,Z.heap[1]=ce++,U(Z,te,1),2<=Z.heap_len;);Z.heap[--Z.heap_max]=Z.heap[1],function(Se,_e){var Pe,Fe,Oe,Me,Ee,je,Ie=_e.dyn_tree,$e=_e.max_code,De=_e.stat_desc.static_tree,Ze=_e.stat_desc.has_stree,vt=_e.stat_desc.extra_bits,Ve=_e.stat_desc.extra_base,xt=_e.stat_desc.max_length,ht=0;for(Me=0;Me<=A;Me++)Se.bl_count[Me]=0;for(Ie[2*Se.heap[Se.heap_max]+1]=0,Pe=Se.heap_max+1;Pe<573;Pe++)xt<(Me=Ie[2*Ie[2*(Fe=Se.heap[Pe])+1]+1]+1)&&(Me=xt,ht++),Ie[2*Fe+1]=Me,$e<Fe||(Se.bl_count[Me]++,Ee=0,Ve<=Fe&&(Ee=vt[Fe-Ve]),je=Ie[2*Fe],Se.opt_len+=je*(Me+Ee),Ze&&(Se.static_len+=je*(De[2*Fe+1]+Ee)));if(ht!==0){do{for(Me=xt-1;Se.bl_count[Me]===0;)Me--;Se.bl_count[Me]--,Se.bl_count[Me+1]+=2,Se.bl_count[xt]--,ht-=2}while(0<ht);for(Me=xt;Me!==0;Me--)for(Fe=Se.bl_count[Me];Fe!==0;)$e<(Oe=Se.heap[--Pe])||(Ie[2*Oe+1]!==Me&&(Se.opt_len+=(Me-Ie[2*Oe+1])*Ie[2*Oe],Ie[2*Oe+1]=Me),Fe--)}}(Z,ne),F(te,we,Z.bl_count)}function Y(Z,ne,re){var ue,ce,te=-1,de=ne[1],le=0,ve=7,we=4;for(de===0&&(ve=138,we=3),ne[2*(re+1)+1]=65535,ue=0;ue<=re;ue++)ce=de,de=ne[2*(ue+1)+1],++le<ve&&ce===de||(le<we?Z.bl_tree[2*ce]+=le:ce!==0?(ce!==te&&Z.bl_tree[2*ce]++,Z.bl_tree[32]++):le<=10?Z.bl_tree[34]++:Z.bl_tree[36]++,te=ce,we=(le=0)===de?(ve=138,3):ce===de?(ve=6,3):(ve=7,4))}function J(Z,ne,re){var ue,ce,te=-1,de=ne[1],le=0,ve=7,we=4;for(de===0&&(ve=138,we=3),ue=0;ue<=re;ue++)if(ce=de,de=ne[2*(ue+1)+1],!(++le<ve&&ce===de)){if(le<we)for(;q(Z,ce,Z.bl_tree),--le!=0;);else ce!==0?(ce!==te&&(q(Z,ce,Z.bl_tree),le--),q(Z,16,Z.bl_tree),V(Z,le-3,2)):le<=10?(q(Z,17,Z.bl_tree),V(Z,le-3,3)):(q(Z,18,Z.bl_tree),V(Z,le-11,7));te=ce,we=(le=0)===de?(ve=138,3):ce===de?(ve=6,3):(ve=7,4)}}g(x);var ae=!1;function ie(Z,ne,re,ue){V(Z,0+(ue?1:0),3),function(ce,te,de,le){O(ce),D(ce,de),D(ce,~de),u.arraySet(ce.pending_buf,ce.window,te,de,ce.pending),ce.pending+=de}(Z,ne,re)}f._tr_init=function(Z){ae||(function(){var ne,re,ue,ce,te,de=new Array(16);for(ce=ue=0;ce<28;ce++)for(T[ce]=ue,ne=0;ne<1<<L[ce];ne++)C[ue++]=ce;for(C[ue-1]=ce,ce=te=0;ce<16;ce++)for(x[ce]=te,ne=0;ne<1<<z[ce];ne++)$[te++]=ce;for(te>>=7;ce<E;ce++)for(x[ce]=te<<7,ne=0;ne<1<<z[ce]-7;ne++)$[256+te++]=ce;for(re=0;re<=A;re++)de[re]=0;for(ne=0;ne<=143;)B[2*ne+1]=8,ne++,de[8]++;for(;ne<=255;)B[2*ne+1]=9,ne++,de[9]++;for(;ne<=279;)B[2*ne+1]=7,ne++,de[7]++;for(;ne<=287;)B[2*ne+1]=8,ne++,de[8]++;for(F(B,287,de),ne=0;ne<E;ne++)H[2*ne+1]=5,H[2*ne]=G(ne,5);j=new w(B,L,257,k,A),b=new w(H,z,0,E,A),v=new w(new Array(0),R,0,19,7)}(),ae=!0),Z.l_desc=new N(Z.dyn_ltree,j),Z.d_desc=new N(Z.dyn_dtree,b),Z.bl_desc=new N(Z.bl_tree,v),Z.bi_buf=0,Z.bi_valid=0,X(Z)},f._tr_stored_block=ie,f._tr_flush_block=function(Z,ne,re,ue){var ce,te,de=0;0<Z.level?(Z.strm.data_type===2&&(Z.strm.data_type=function(le){var ve,we=4093624447;for(ve=0;ve<=31;ve++,we>>>=1)if(1&we&&le.dyn_ltree[2*ve]!==0)return 0;if(le.dyn_ltree[18]!==0||le.dyn_ltree[20]!==0||le.dyn_ltree[26]!==0)return 1;for(ve=32;ve<m;ve++)if(le.dyn_ltree[2*ve]!==0)return 1;return 0}(Z)),Q(Z,Z.l_desc),Q(Z,Z.d_desc),de=function(le){var ve;for(Y(le,le.dyn_ltree,le.l_desc.max_code),Y(le,le.dyn_dtree,le.d_desc.max_code),Q(le,le.bl_desc),ve=18;3<=ve&&le.bl_tree[2*I[ve]+1]===0;ve--);return le.opt_len+=3*(ve+1)+5+5+4,ve}(Z),ce=Z.opt_len+3+7>>>3,(te=Z.static_len+3+7>>>3)<=ce&&(ce=te)):ce=te=re+5,re+4<=ce&&ne!==-1?ie(Z,ne,re,ue):Z.strategy===4||te===ce?(V(Z,2+(ue?1:0),3),K(Z,B,H)):(V(Z,4+(ue?1:0),3),function(le,ve,we,Se){var _e;for(V(le,ve-257,5),V(le,we-1,5),V(le,Se-4,4),_e=0;_e<Se;_e++)V(le,le.bl_tree[2*I[_e]+1],3);J(le,le.dyn_ltree,ve-1),J(le,le.dyn_dtree,we-1)}(Z,Z.l_desc.max_code+1,Z.d_desc.max_code+1,de+1),K(Z,Z.dyn_ltree,Z.dyn_dtree)),X(Z),ue&&O(Z)},f._tr_tally=function(Z,ne,re){return Z.pending_buf[Z.d_buf+2*Z.last_lit]=ne>>>8&255,Z.pending_buf[Z.d_buf+2*Z.last_lit+1]=255&ne,Z.pending_buf[Z.l_buf+Z.last_lit]=255&re,Z.last_lit++,ne===0?Z.dyn_ltree[2*re]++:(Z.matches++,ne--,Z.dyn_ltree[2*(C[re]+m+1)]++,Z.dyn_dtree[2*P(ne)]++),Z.last_lit===Z.lit_bufsize-1},f._tr_align=function(Z){V(Z,2,3),q(Z,256,B),function(ne){ne.bi_valid===16?(D(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}(Z)}},{"../utils/common":41}],53:[function(o,d,f){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,d,f){(function(u){(function(g,m){if(!g.setImmediate){var k,E,A,L,z=1,R={},I=!1,B=g.document,H=Object.getPrototypeOf&&Object.getPrototypeOf(g);H=H&&H.setTimeout?H:g,k={}.toString.call(g.process)==="[object process]"?function(j){c.nextTick(function(){C(j)})}:function(){if(g.postMessage&&!g.importScripts){var j=!0,b=g.onmessage;return g.onmessage=function(){j=!1},g.postMessage("","*"),g.onmessage=b,j}}()?(L="setImmediate$"+Math.random()+"$",g.addEventListener?g.addEventListener("message",T,!1):g.attachEvent("onmessage",T),function(j){g.postMessage(L+j,"*")}):g.MessageChannel?((A=new MessageChannel).port1.onmessage=function(j){C(j.data)},function(j){A.port2.postMessage(j)}):B&&"onreadystatechange"in B.createElement("script")?(E=B.documentElement,function(j){var b=B.createElement("script");b.onreadystatechange=function(){C(j),b.onreadystatechange=null,E.removeChild(b),b=null},E.appendChild(b)}):function(j){setTimeout(C,0,j)},H.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var b=new Array(arguments.length-1),v=0;v<b.length;v++)b[v]=arguments[v+1];var x={callback:j,args:b};return R[z]=x,k(z),z++},H.clearImmediate=$}function $(j){delete R[j]}function C(j){if(I)setTimeout(C,0,j);else{var b=R[j];if(b){I=!0;try{(function(v){var x=v.callback,w=v.args;switch(w.length){case 0:x();break;case 1:x(w[0]);break;case 2:x(w[0],w[1]);break;case 3:x(w[0],w[1],w[2]);break;default:x.apply(void 0,w)}})(b)}finally{$(j),I=!1}}}}function T(j){j.source===g&&typeof j.data=="string"&&j.data.indexOf(L)===0&&C(+j.data.slice(L.length))}})(typeof self>"u"?u===void 0?this:u:self)}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(e,h,p){(function(c){(function(){var s=/[\\^$.*+?()[\]{}|]/g,i=RegExp(s.source),r=typeof c=="object"&&c&&c.Object===Object&&c,t=typeof self=="object"&&self&&self.Object===Object&&self,n=r||t||Function("return this")(),l=Object.prototype.toString,a=n.Symbol,o=a?a.prototype:void 0,d=o?o.toString:void 0;function f(u){if(typeof u=="string")return u;if(function(m){return typeof m=="symbol"||function(k){return!!k&&typeof k=="object"}(m)&&l.call(m)=="[object Symbol]"}(u))return d?d.call(u):"";var g=u+"";return g=="0"&&1/u==-1/0?"-0":g}h.exports=function(u){var g;return(u=(g=u)==null?"":f(g))&&i.test(u)?u.replace(s,"\\$&"):u}}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(e,h,p){(function(c){(function(){var s="[object Arguments]",i="[object Map]",r="[object Object]",t="[object Set]",n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,a=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[s]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g["[object Function]"]=g[i]=g["[object Number]"]=g[r]=g["[object RegExp]"]=g[t]=g["[object String]"]=g["[object WeakMap]"]=!1;var m=typeof c=="object"&&c&&c.Object===Object&&c,k=typeof self=="object"&&self&&self.Object===Object&&self,E=m||k||Function("return this")(),A=typeof p=="object"&&p&&!p.nodeType&&p,L=A&&typeof h=="object"&&h&&!h.nodeType&&h,z=L&&L.exports===A&&m.process,R=function(){try{return z&&z.binding("util")}catch{}}(),I=R&&R.isTypedArray;function B(se,pe,xe,ke){for(var Le=-1,Ce=se?se.length:0;++Le<Ce;){var Te=se[Le];pe(ke,Te,xe(Te),se)}return ke}function H(se,pe){for(var xe=-1,ke=se?se.length:0;++xe<ke;)if(pe(se[xe],xe,se))return!0;return!1}function $(se){var pe=!1;if(se!=null&&typeof se.toString!="function")try{pe=!!(se+"")}catch{}return pe}function C(se){var pe=-1,xe=Array(se.size);return se.forEach(function(ke,Le){xe[++pe]=[Le,ke]}),xe}function T(se){var pe=-1,xe=Array(se.size);return se.forEach(function(ke){xe[++pe]=ke}),xe}var j,b,v,x=Array.prototype,w=Function.prototype,N=Object.prototype,P=E["__core-js_shared__"],D=(j=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",V=w.toString,q=N.hasOwnProperty,G=N.toString,F=RegExp("^"+V.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=E.Symbol,O=E.Uint8Array,M=N.propertyIsEnumerable,U=x.splice,K=(b=Object.keys,v=Object,function(se){return b(v(se))}),Q=qe(E,"DataView"),Y=qe(E,"Map"),J=qe(E,"Promise"),ae=qe(E,"Set"),ie=qe(E,"WeakMap"),Z=qe(Object,"create"),ne=he(Q),re=he(Y),ue=he(J),ce=he(ae),te=he(ie),de=X?X.prototype:void 0,le=de?de.valueOf:void 0,ve=de?de.toString:void 0;function we(se){var pe=-1,xe=se?se.length:0;for(this.clear();++pe<xe;){var ke=se[pe];this.set(ke[0],ke[1])}}function Se(se){var pe=-1,xe=se?se.length:0;for(this.clear();++pe<xe;){var ke=se[pe];this.set(ke[0],ke[1])}}function _e(se){var pe=-1,xe=se?se.length:0;for(this.clear();++pe<xe;){var ke=se[pe];this.set(ke[0],ke[1])}}function Pe(se){var pe=-1,xe=se?se.length:0;for(this.__data__=new _e;++pe<xe;)this.add(se[pe])}function Fe(se){this.__data__=new Se(se)}function Oe(se,pe){var xe=Ke(se)||Je(se)?function(Te,yt){for(var ot=-1,ut=Array(Te);++ot<Te;)ut[ot]=yt(ot);return ut}(se.length,String):[],ke=xe.length,Le=!!ke;for(var Ce in se)!q.call(se,Ce)||Le&&(Ce=="length"||bt(Ce,ke))||xe.push(Ce);return xe}function Me(se,pe){for(var xe=se.length;xe--;)if(Ae(se[xe][0],pe))return xe;return-1}function Ee(se,pe,xe,ke){return Ie(se,function(Le,Ce,Te){pe(ke,Le,xe(Le),Te)}),ke}we.prototype.clear=function(){this.__data__=Z?Z(null):{}},we.prototype.delete=function(se){return this.has(se)&&delete this.__data__[se]},we.prototype.get=function(se){var pe=this.__data__;if(Z){var xe=pe[se];return xe==="__lodash_hash_undefined__"?void 0:xe}return q.call(pe,se)?pe[se]:void 0},we.prototype.has=function(se){var pe=this.__data__;return Z?pe[se]!==void 0:q.call(pe,se)},we.prototype.set=function(se,pe){return this.__data__[se]=Z&&pe===void 0?"__lodash_hash_undefined__":pe,this},Se.prototype.clear=function(){this.__data__=[]},Se.prototype.delete=function(se){var pe=this.__data__,xe=Me(pe,se);return!(xe<0)&&(xe==pe.length-1?pe.pop():U.call(pe,xe,1),!0)},Se.prototype.get=function(se){var pe=this.__data__,xe=Me(pe,se);return xe<0?void 0:pe[xe][1]},Se.prototype.has=function(se){return Me(this.__data__,se)>-1},Se.prototype.set=function(se,pe){var xe=this.__data__,ke=Me(xe,se);return ke<0?xe.push([se,pe]):xe[ke][1]=pe,this},_e.prototype.clear=function(){this.__data__={hash:new we,map:new(Y||Se),string:new we}},_e.prototype.delete=function(se){return pt(this,se).delete(se)},_e.prototype.get=function(se){return pt(this,se).get(se)},_e.prototype.has=function(se){return pt(this,se).has(se)},_e.prototype.set=function(se,pe){return pt(this,se).set(se,pe),this},Pe.prototype.add=Pe.prototype.push=function(se){return this.__data__.set(se,"__lodash_hash_undefined__"),this},Pe.prototype.has=function(se){return this.__data__.has(se)},Fe.prototype.clear=function(){this.__data__=new Se},Fe.prototype.delete=function(se){return this.__data__.delete(se)},Fe.prototype.get=function(se){return this.__data__.get(se)},Fe.prototype.has=function(se){return this.__data__.has(se)},Fe.prototype.set=function(se,pe){var xe=this.__data__;if(xe instanceof Se){var ke=xe.__data__;if(!Y||ke.length<199)return ke.push([se,pe]),this;xe=this.__data__=new _e(ke)}return xe.set(se,pe),this};var je,Ie=(je=function(se,pe){return se&&$e(se,pe,Lt)},function(se,pe){if(se==null)return se;if(!Be(se))return je(se,pe);for(var xe=se.length,ke=-1,Le=Object(se);++ke<xe&&pe(Le[ke],ke,Le)!==!1;);return se}),$e=function(se){return function(pe,xe,ke){for(var Le=-1,Ce=Object(pe),Te=ke(pe),yt=Te.length;yt--;){var ot=Te[++Le];if(xe(Ce[ot],ot,Ce)===!1)break}return pe}}();function De(se,pe){for(var xe=0,ke=(pe=Ye(pe,se)?[pe]:nt(pe)).length;se!=null&&xe<ke;)se=se[oe(pe[xe++])];return xe&&xe==ke?se:void 0}function Ze(se,pe){return se!=null&&pe in Object(se)}function vt(se,pe,xe,ke,Le){return se===pe||(se==null||pe==null||!ct(se)&&!Dt(pe)?se!=se&&pe!=pe:function(Ce,Te,yt,ot,ut,He){var Ct=Ke(Ce),Nt=Ke(Te),Mt="[object Array]",Pt="[object Array]";Ct||(Mt=(Mt=gt(Ce))==s?r:Mt),Nt||(Pt=(Pt=gt(Te))==s?r:Pt);var Bt=Mt==r&&!$(Ce),qt=Pt==r&&!$(Te),ar=Mt==Pt;if(ar&&!Bt)return He||(He=new Fe),Ct||jt(Ce)?St(Ce,Te,yt,ot,ut,He):function(Tt,wt,hr,wr,Kr,Gt,cr){switch(hr){case"[object DataView]":if(Tt.byteLength!=wt.byteLength||Tt.byteOffset!=wt.byteOffset)return!1;Tt=Tt.buffer,wt=wt.buffer;case"[object ArrayBuffer]":return!(Tt.byteLength!=wt.byteLength||!wr(new O(Tt),new O(wt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ae(+Tt,+wt);case"[object Error]":return Tt.name==wt.name&&Tt.message==wt.message;case"[object RegExp]":case"[object String]":return Tt==wt+"";case i:var pr=C;case t:var Rr=2&Gt;if(pr||(pr=T),Tt.size!=wt.size&&!Rr)return!1;var ee=cr.get(Tt);if(ee)return ee==wt;Gt|=1,cr.set(Tt,wt);var fe=St(pr(Tt),pr(wt),wr,Kr,Gt,cr);return cr.delete(Tt),fe;case"[object Symbol]":if(le)return le.call(Tt)==le.call(wt)}return!1}(Ce,Te,Mt,yt,ot,ut,He);if(!(2&ut)){var xr=Bt&&q.call(Ce,"__wrapped__"),jr=qt&&q.call(Te,"__wrapped__");if(xr||jr){var Er=xr?Ce.value():Ce,Cr=jr?Te.value():Te;return He||(He=new Fe),yt(Er,Cr,ot,ut,He)}}return ar?(He||(He=new Fe),function(Tt,wt,hr,wr,Kr,Gt){var cr=2&Kr,pr=Lt(Tt),Rr=pr.length,ee=Lt(wt).length;if(Rr!=ee&&!cr)return!1;for(var fe=Rr;fe--;){var ye=pr[fe];if(!(cr?ye in wt:q.call(wt,ye)))return!1}var ge=Gt.get(Tt);if(ge&&Gt.get(wt))return ge==wt;var Re=!0;Gt.set(Tt,wt),Gt.set(wt,Tt);for(var st=cr;++fe<Rr;){ye=pr[fe];var Xe=Tt[ye],Ge=wt[ye];if(wr)var _t=cr?wr(Ge,Xe,ye,wt,Tt,Gt):wr(Xe,Ge,ye,Tt,wt,Gt);if(!(_t===void 0?Xe===Ge||hr(Xe,Ge,wr,Kr,Gt):_t)){Re=!1;break}st||(st=ye=="constructor")}if(Re&&!st){var it=Tt.constructor,dt=wt.constructor;it==dt||!("constructor"in Tt)||!("constructor"in wt)||typeof it=="function"&&it instanceof it&&typeof dt=="function"&&dt instanceof dt||(Re=!1)}return Gt.delete(Tt),Gt.delete(wt),Re}(Ce,Te,yt,ot,ut,He)):!1}(se,pe,vt,xe,ke,Le))}function Ve(se){return!(!ct(se)||function(pe){return!!D&&D in pe}(se))&&(Qe(se)||$(se)?F:f).test(he(se))}function xt(se){return typeof se=="function"?se:se==null?Ut:typeof se=="object"?Ke(se)?function(ke,Le){return Ye(ke)&&mt(Le)?At(oe(ke),Le):function(Ce){var Te=function(yt,ot,ut){var He=yt==null?void 0:De(yt,ot);return He===void 0?ut:He}(Ce,ke);return Te===void 0&&Te===Le?function(yt,ot){return yt!=null&&function(ut,He,Ct){He=Ye(He,ut)?[He]:nt(He);for(var Nt,Mt=-1,Pt=He.length;++Mt<Pt;){var Bt=oe(He[Mt]);if(!(Nt=ut!=null&&Ct(ut,Bt)))break;ut=ut[Bt]}return Nt||!!(Pt=ut?ut.length:0)&&rt(Pt)&&bt(Bt,Pt)&&(Ke(ut)||Je(ut))}(yt,ot,Ze)}(Ce,ke):vt(Le,Te,void 0,3)}}(se[0],se[1]):function(ke){var Le=function(Ce){for(var Te=Lt(Ce),yt=Te.length;yt--;){var ot=Te[yt],ut=Ce[ot];Te[yt]=[ot,ut,mt(ut)]}return Te}(ke);return Le.length==1&&Le[0][2]?At(Le[0][0],Le[0][1]):function(Ce){return Ce===ke||function(Te,yt,ot,ut){var He=ot.length,Ct=He;if(Te==null)return!Ct;for(Te=Object(Te);He--;){var Nt=ot[He];if(Nt[2]?Nt[1]!==Te[Nt[0]]:!(Nt[0]in Te))return!1}for(;++He<Ct;){var Mt=(Nt=ot[He])[0],Pt=Te[Mt],Bt=Nt[1];if(Nt[2]){if(Pt===void 0&&!(Mt in Te))return!1}else{var qt=new Fe,ar;if(!(ar===void 0?vt(Bt,Pt,ut,3,qt):ar))return!1}}return!0}(Ce,ke,Le)}}(se):Ye(pe=se)?(xe=oe(pe),function(ke){return ke?.[xe]}):function(ke){return function(Le){return De(Le,ke)}}(pe);var pe,xe}function ht(se){if(xe=(pe=se)&&pe.constructor,ke=typeof xe=="function"&&xe.prototype||N,pe!==ke)return K(se);var pe,xe,ke,Le=[];for(var Ce in Object(se))q.call(se,Ce)&&Ce!="constructor"&&Le.push(Ce);return Le}function nt(se){return Ke(se)?se:tt(se)}function St(se,pe,xe,ke,Le,Ce){var Te=2&Le,yt=se.length,ot=pe.length;if(yt!=ot&&!(Te&&ot>yt))return!1;var ut=Ce.get(se);if(ut&&Ce.get(pe))return ut==pe;var He=-1,Ct=!0,Nt=1&Le?new Pe:void 0;for(Ce.set(se,pe),Ce.set(pe,se);++He<yt;){var Mt=se[He],Pt=pe[He];if(ke)var Bt=Te?ke(Pt,Mt,He,pe,se,Ce):ke(Mt,Pt,He,se,pe,Ce);if(Bt!==void 0){if(Bt)continue;Ct=!1;break}if(Nt){if(!H(pe,function(qt,ar){if(!Nt.has(ar)&&(Mt===qt||xe(Mt,qt,ke,Le,Ce)))return Nt.add(ar)})){Ct=!1;break}}else if(Mt!==Pt&&!xe(Mt,Pt,ke,Le,Ce)){Ct=!1;break}}return Ce.delete(se),Ce.delete(pe),Ct}function pt(se,pe){var xe,ke,Le=se.__data__;return((ke=typeof(xe=pe))=="string"||ke=="number"||ke=="symbol"||ke=="boolean"?xe!=="__proto__":xe===null)?Le[typeof pe=="string"?"string":"hash"]:Le.map}function qe(se,pe){var xe=function(ke,Le){return ke?.[Le]}(se,pe);return Ve(xe)?xe:void 0}var gt=function(se){return G.call(se)};function bt(se,pe){return!!(pe=pe??9007199254740991)&&(typeof se=="number"||u.test(se))&&se>-1&&se%1==0&&se<pe}function Ye(se,pe){if(Ke(se))return!1;var xe=typeof se;return!(xe!="number"&&xe!="symbol"&&xe!="boolean"&&se!=null&&!Ot(se))||l.test(se)||!n.test(se)||pe!=null&&se in Object(pe)}function mt(se){return se==se&&!ct(se)}function At(se,pe){return function(xe){return xe!=null&&xe[se]===pe&&(pe!==void 0||se in Object(xe))}}(Q&&gt(new Q(new ArrayBuffer(1)))!="[object DataView]"||Y&&gt(new Y)!=i||J&&gt(J.resolve())!="[object Promise]"||ae&&gt(new ae)!=t||ie&&gt(new ie)!="[object WeakMap]")&&(gt=function(se){var pe=G.call(se),xe=pe==r?se.constructor:void 0,ke=xe?he(xe):void 0;if(ke)switch(ke){case ne:return"[object DataView]";case re:return i;case ue:return"[object Promise]";case ce:return t;case te:return"[object WeakMap]"}return pe});var tt=ze(function(se){var pe;se=(pe=se)==null?"":function(ke){if(typeof ke=="string")return ke;if(Ot(ke))return ve?ve.call(ke):"";var Le=ke+"";return Le=="0"&&1/ke==-1/0?"-0":Le}(pe);var xe=[];return a.test(se)&&xe.push(""),se.replace(o,function(ke,Le,Ce,Te){xe.push(Ce?Te.replace(d,"$1"):Le||ke)}),xe});function oe(se){if(typeof se=="string"||Ot(se))return se;var pe=se+"";return pe=="0"&&1/se==-1/0?"-0":pe}function he(se){if(se!=null){try{return V.call(se)}catch{}try{return se+""}catch{}}return""}var be,Ne=(be=function(se,pe,xe){q.call(se,xe)?se[xe].push(pe):se[xe]=[pe]},function(se,pe){var xe=Ke(se)?B:Ee,ke={};return xe(se,be,xt(pe),ke)});function ze(se,pe){if(typeof se!="function"||pe&&typeof pe!="function")throw new TypeError("Expected a function");var xe=function(){var ke=arguments,Le=pe?pe.apply(this,ke):ke[0],Ce=xe.cache;if(Ce.has(Le))return Ce.get(Le);var Te=se.apply(this,ke);return xe.cache=Ce.set(Le,Te),Te};return xe.cache=new(ze.Cache||_e),xe}function Ae(se,pe){return se===pe||se!=se&&pe!=pe}function Je(se){return function(pe){return Dt(pe)&&Be(pe)}(se)&&q.call(se,"callee")&&(!M.call(se,"callee")||G.call(se)==s)}ze.Cache=_e;var Ke=Array.isArray;function Be(se){return se!=null&&rt(se.length)&&!Qe(se)}function Qe(se){var pe=ct(se)?G.call(se):"";return pe=="[object Function]"||pe=="[object GeneratorFunction]"}function rt(se){return typeof se=="number"&&se>-1&&se%1==0&&se<=9007199254740991}function ct(se){var pe=typeof se;return!!se&&(pe=="object"||pe=="function")}function Dt(se){return!!se&&typeof se=="object"}function Ot(se){return typeof se=="symbol"||Dt(se)&&G.call(se)=="[object Symbol]"}var jt=I?function(se){return function(pe){return se(pe)}}(I):function(se){return Dt(se)&&rt(se.length)&&!!g[G.call(se)]};function Lt(se){return Be(se)?Oe(se):ht(se)}function Ut(se){return se}h.exports=Ne}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(e,h,p){var c=Object.prototype.toString;h.exports=function(s){return s===!0||s===!1||function(i){return!!i&&typeof i=="object"}(s)&&c.call(s)=="[object Boolean]"}},{}],445:[function(e,h,p){(function(c){(function(){var s="[object Arguments]",i="[object Map]",r="[object Object]",t="[object Set]",n=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a[s]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a[i]=a["[object Number]"]=a[r]=a["[object RegExp]"]=a[t]=a["[object String]"]=a["[object WeakMap]"]=!1;var o=typeof c=="object"&&c&&c.Object===Object&&c,d=typeof self=="object"&&self&&self.Object===Object&&self,f=o||d||Function("return this")(),u=typeof p=="object"&&p&&!p.nodeType&&p,g=u&&typeof h=="object"&&h&&!h.nodeType&&h,m=g&&g.exports===u,k=m&&o.process,E=function(){try{return k&&k.binding&&k.binding("util")}catch{}}(),A=E&&E.isTypedArray;function L(oe,he){for(var be=-1,Ne=oe==null?0:oe.length;++be<Ne;)if(he(oe[be],be,oe))return!0;return!1}function z(oe){var he=-1,be=Array(oe.size);return oe.forEach(function(Ne,ze){be[++he]=[ze,Ne]}),be}function R(oe){var he=-1,be=Array(oe.size);return oe.forEach(function(Ne){be[++he]=Ne}),be}var I,B,H,$=Array.prototype,C=Function.prototype,T=Object.prototype,j=f["__core-js_shared__"],b=C.toString,v=T.hasOwnProperty,x=(I=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",w=T.toString,N=RegExp("^"+b.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=m?f.Buffer:void 0,D=f.Symbol,V=f.Uint8Array,q=T.propertyIsEnumerable,G=$.splice,F=D?D.toStringTag:void 0,X=Object.getOwnPropertySymbols,O=P?P.isBuffer:void 0,M=(B=Object.keys,H=Object,function(oe){return B(H(oe))}),U=Ze(f,"DataView"),K=Ze(f,"Map"),Q=Ze(f,"Promise"),Y=Ze(f,"Set"),J=Ze(f,"WeakMap"),ae=Ze(Object,"create"),ie=ht(U),Z=ht(K),ne=ht(Q),re=ht(Y),ue=ht(J),ce=D?D.prototype:void 0,te=ce?ce.valueOf:void 0;function de(oe){var he=-1,be=oe==null?0:oe.length;for(this.clear();++he<be;){var Ne=oe[he];this.set(Ne[0],Ne[1])}}function le(oe){var he=-1,be=oe==null?0:oe.length;for(this.clear();++he<be;){var Ne=oe[he];this.set(Ne[0],Ne[1])}}function ve(oe){var he=-1,be=oe==null?0:oe.length;for(this.clear();++he<be;){var Ne=oe[he];this.set(Ne[0],Ne[1])}}function we(oe){var he=-1,be=oe==null?0:oe.length;for(this.__data__=new ve;++he<be;)this.add(oe[he])}function Se(oe){var he=this.__data__=new le(oe);this.size=he.size}function _e(oe,he){var be=pt(oe),Ne=!be&&St(oe),ze=!be&&!Ne&&qe(oe),Ae=!be&&!Ne&&!ze&&At(oe),Je=be||Ne||ze||Ae,Ke=Je?function(rt,ct){for(var Dt=-1,Ot=Array(rt);++Dt<rt;)Ot[Dt]=ct(Dt);return Ot}(oe.length,String):[],Be=Ke.length;for(var Qe in oe)!v.call(oe,Qe)||Je&&(Qe=="length"||ze&&(Qe=="offset"||Qe=="parent")||Ae&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||xt(Qe,Be))||Ke.push(Qe);return Ke}function Pe(oe,he){for(var be=oe.length;be--;)if(nt(oe[be][0],he))return be;return-1}function Fe(oe){return oe==null?oe===void 0?"[object Undefined]":"[object Null]":F&&F in Object(oe)?function(he){var be=v.call(he,F),Ne=he[F];try{he[F]=void 0;var ze=!0}catch{}var Ae=w.call(he);return ze&&(be?he[F]=Ne:delete he[F]),Ae}(oe):function(he){return w.call(he)}(oe)}function Oe(oe){return mt(oe)&&Fe(oe)==s}function Me(oe,he,be,Ne,ze){return oe===he||(oe==null||he==null||!mt(oe)&&!mt(he)?oe!=oe&&he!=he:function(Ae,Je,Ke,Be,Qe,rt){var ct=pt(Ae),Dt=pt(Je),Ot=ct?"[object Array]":Ve(Ae),jt=Dt?"[object Array]":Ve(Je),Lt=(Ot=Ot==s?r:Ot)==r,Ut=(jt=jt==s?r:jt)==r,se=Ot==jt;if(se&&qe(Ae)){if(!qe(Je))return!1;ct=!0,Lt=!1}if(se&&!Lt)return rt||(rt=new Se),ct||At(Ae)?Ie(Ae,Je,Ke,Be,Qe,rt):function(Ce,Te,yt,ot,ut,He,Ct){switch(yt){case"[object DataView]":if(Ce.byteLength!=Te.byteLength||Ce.byteOffset!=Te.byteOffset)return!1;Ce=Ce.buffer,Te=Te.buffer;case"[object ArrayBuffer]":return!(Ce.byteLength!=Te.byteLength||!He(new V(Ce),new V(Te)));case"[object Boolean]":case"[object Date]":case"[object Number]":return nt(+Ce,+Te);case"[object Error]":return Ce.name==Te.name&&Ce.message==Te.message;case"[object RegExp]":case"[object String]":return Ce==Te+"";case i:var Nt=z;case t:var Mt=1&ot;if(Nt||(Nt=R),Ce.size!=Te.size&&!Mt)return!1;var Pt=Ct.get(Ce);if(Pt)return Pt==Te;ot|=2,Ct.set(Ce,Te);var Bt=Ie(Nt(Ce),Nt(Te),ot,ut,He,Ct);return Ct.delete(Ce),Bt;case"[object Symbol]":if(te)return te.call(Ce)==te.call(Te)}return!1}(Ae,Je,Ot,Ke,Be,Qe,rt);if(!(1&Ke)){var pe=Lt&&v.call(Ae,"__wrapped__"),xe=Ut&&v.call(Je,"__wrapped__");if(pe||xe){var ke=pe?Ae.value():Ae,Le=xe?Je.value():Je;return rt||(rt=new Se),Qe(ke,Le,Ke,Be,rt)}}return se?(rt||(rt=new Se),function(Ce,Te,yt,ot,ut,He){var Ct=1&yt,Nt=$e(Ce),Mt=Nt.length,Pt=$e(Te).length;if(Mt!=Pt&&!Ct)return!1;for(var Bt=Mt;Bt--;){var qt=Nt[Bt];if(!(Ct?qt in Te:v.call(Te,qt)))return!1}var ar=He.get(Ce);if(ar&&He.get(Te))return ar==Te;var xr=!0;He.set(Ce,Te),He.set(Te,Ce);for(var jr=Ct;++Bt<Mt;){qt=Nt[Bt];var Er=Ce[qt],Cr=Te[qt];if(ot)var Tt=Ct?ot(Cr,Er,qt,Te,Ce,He):ot(Er,Cr,qt,Ce,Te,He);if(!(Tt===void 0?Er===Cr||ut(Er,Cr,yt,ot,He):Tt)){xr=!1;break}jr||(jr=qt=="constructor")}if(xr&&!jr){var wt=Ce.constructor,hr=Te.constructor;wt==hr||!("constructor"in Ce)||!("constructor"in Te)||typeof wt=="function"&&wt instanceof wt&&typeof hr=="function"&&hr instanceof hr||(xr=!1)}return He.delete(Ce),He.delete(Te),xr}(Ae,Je,Ke,Be,Qe,rt)):!1}(oe,he,be,Ne,Me,ze))}function Ee(oe){return!(!Ye(oe)||function(he){return!!x&&x in he}(oe))&&(gt(oe)?N:n).test(ht(oe))}function je(oe){if(be=(he=oe)&&he.constructor,Ne=typeof be=="function"&&be.prototype||T,he!==Ne)return M(oe);var he,be,Ne,ze=[];for(var Ae in Object(oe))v.call(oe,Ae)&&Ae!="constructor"&&ze.push(Ae);return ze}function Ie(oe,he,be,Ne,ze,Ae){var Je=1&be,Ke=oe.length,Be=he.length;if(Ke!=Be&&!(Je&&Be>Ke))return!1;var Qe=Ae.get(oe);if(Qe&&Ae.get(he))return Qe==he;var rt=-1,ct=!0,Dt=2&be?new we:void 0;for(Ae.set(oe,he),Ae.set(he,oe);++rt<Ke;){var Ot=oe[rt],jt=he[rt];if(Ne)var Lt=Je?Ne(jt,Ot,rt,he,oe,Ae):Ne(Ot,jt,rt,oe,he,Ae);if(Lt!==void 0){if(Lt)continue;ct=!1;break}if(Dt){if(!L(he,function(Ut,se){if(pe=se,!Dt.has(pe)&&(Ot===Ut||ze(Ot,Ut,be,Ne,Ae)))return Dt.push(se);var pe})){ct=!1;break}}else if(Ot!==jt&&!ze(Ot,jt,be,Ne,Ae)){ct=!1;break}}return Ae.delete(oe),Ae.delete(he),ct}function $e(oe){return function(he,be,Ne){var ze=be(he);return pt(he)?ze:function(Ae,Je){for(var Ke=-1,Be=Je.length,Qe=Ae.length;++Ke<Be;)Ae[Qe+Ke]=Je[Ke];return Ae}(ze,Ne(he))}(oe,tt,vt)}function De(oe,he){var be,Ne,ze=oe.__data__;return((Ne=typeof(be=he))=="string"||Ne=="number"||Ne=="symbol"||Ne=="boolean"?be!=="__proto__":be===null)?ze[typeof he=="string"?"string":"hash"]:ze.map}function Ze(oe,he){var be=function(Ne,ze){return Ne?.[ze]}(oe,he);return Ee(be)?be:void 0}de.prototype.clear=function(){this.__data__=ae?ae(null):{},this.size=0},de.prototype.delete=function(oe){var he=this.has(oe)&&delete this.__data__[oe];return this.size-=he?1:0,he},de.prototype.get=function(oe){var he=this.__data__;if(ae){var be=he[oe];return be==="__lodash_hash_undefined__"?void 0:be}return v.call(he,oe)?he[oe]:void 0},de.prototype.has=function(oe){var he=this.__data__;return ae?he[oe]!==void 0:v.call(he,oe)},de.prototype.set=function(oe,he){var be=this.__data__;return this.size+=this.has(oe)?0:1,be[oe]=ae&&he===void 0?"__lodash_hash_undefined__":he,this},le.prototype.clear=function(){this.__data__=[],this.size=0},le.prototype.delete=function(oe){var he=this.__data__,be=Pe(he,oe);return!(be<0)&&(be==he.length-1?he.pop():G.call(he,be,1),--this.size,!0)},le.prototype.get=function(oe){var he=this.__data__,be=Pe(he,oe);return be<0?void 0:he[be][1]},le.prototype.has=function(oe){return Pe(this.__data__,oe)>-1},le.prototype.set=function(oe,he){var be=this.__data__,Ne=Pe(be,oe);return Ne<0?(++this.size,be.push([oe,he])):be[Ne][1]=he,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new de,map:new(K||le),string:new de}},ve.prototype.delete=function(oe){var he=De(this,oe).delete(oe);return this.size-=he?1:0,he},ve.prototype.get=function(oe){return De(this,oe).get(oe)},ve.prototype.has=function(oe){return De(this,oe).has(oe)},ve.prototype.set=function(oe,he){var be=De(this,oe),Ne=be.size;return be.set(oe,he),this.size+=be.size==Ne?0:1,this},we.prototype.add=we.prototype.push=function(oe){return this.__data__.set(oe,"__lodash_hash_undefined__"),this},we.prototype.has=function(oe){return this.__data__.has(oe)},Se.prototype.clear=function(){this.__data__=new le,this.size=0},Se.prototype.delete=function(oe){var he=this.__data__,be=he.delete(oe);return this.size=he.size,be},Se.prototype.get=function(oe){return this.__data__.get(oe)},Se.prototype.has=function(oe){return this.__data__.has(oe)},Se.prototype.set=function(oe,he){var be=this.__data__;if(be instanceof le){var Ne=be.__data__;if(!K||Ne.length<199)return Ne.push([oe,he]),this.size=++be.size,this;be=this.__data__=new ve(Ne)}return be.set(oe,he),this.size=be.size,this};var vt=X?function(oe){return oe==null?[]:(oe=Object(oe),function(he,be){for(var Ne=-1,ze=he==null?0:he.length,Ae=0,Je=[];++Ne<ze;){var Ke=he[Ne];be(Ke,Ne,he)&&(Je[Ae++]=Ke)}return Je}(X(oe),function(he){return q.call(oe,he)}))}:function(){return[]},Ve=Fe;function xt(oe,he){return!!(he=he??9007199254740991)&&(typeof oe=="number"||l.test(oe))&&oe>-1&&oe%1==0&&oe<he}function ht(oe){if(oe!=null){try{return b.call(oe)}catch{}try{return oe+""}catch{}}return""}function nt(oe,he){return oe===he||oe!=oe&&he!=he}(U&&Ve(new U(new ArrayBuffer(1)))!="[object DataView]"||K&&Ve(new K)!=i||Q&&Ve(Q.resolve())!="[object Promise]"||Y&&Ve(new Y)!=t||J&&Ve(new J)!="[object WeakMap]")&&(Ve=function(oe){var he=Fe(oe),be=he==r?oe.constructor:void 0,Ne=be?ht(be):"";if(Ne)switch(Ne){case ie:return"[object DataView]";case Z:return i;case ne:return"[object Promise]";case re:return t;case ue:return"[object WeakMap]"}return he});var St=Oe(function(){return arguments}())?Oe:function(oe){return mt(oe)&&v.call(oe,"callee")&&!q.call(oe,"callee")},pt=Array.isArray,qe=O||function(){return!1};function gt(oe){if(!Ye(oe))return!1;var he=Fe(oe);return he=="[object Function]"||he=="[object GeneratorFunction]"||he=="[object AsyncFunction]"||he=="[object Proxy]"}function bt(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=9007199254740991}function Ye(oe){var he=typeof oe;return oe!=null&&(he=="object"||he=="function")}function mt(oe){return oe!=null&&typeof oe=="object"}var At=A?function(oe){return function(he){return oe(he)}}(A):function(oe){return mt(oe)&&bt(oe.length)&&!!a[Fe(oe)]};function tt(oe){return(he=oe)!=null&&bt(he.length)&&!gt(he)?_e(oe):je(oe);var he}h.exports=function(oe,he){return Me(oe,he)}}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(e,h,p){(function(c){(function(){var s=typeof c=="object"&&c&&c.Object===Object&&c,i=typeof self=="object"&&self&&self.Object===Object&&self,r=s||i||Function("return this")(),t=Object.prototype,n=t.hasOwnProperty,l=t.toString,a=r.Symbol,o=a?a.toStringTag:void 0;function d(f){return f==null?f===void 0?"[object Undefined]":"[object Null]":o&&o in Object(f)?function(u){var g=n.call(u,o),m=u[o];try{u[o]=void 0;var k=!0}catch{}var E=l.call(u);return k&&(g?u[o]=m:delete u[o]),E}(f):function(u){return l.call(u)}(f)}h.exports=function(f){if(!function(g){var m=typeof g;return g!=null&&(m=="object"||m=="function")}(f))return!1;var u=d(f);return u=="[object Function]"||u=="[object GeneratorFunction]"||u=="[object AsyncFunction]"||u=="[object Proxy]"}}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(e,h,p){h.exports=function(c){return c==null}},{}],448:[function(e,h,p){h.exports=function(c){return c===void 0}},{}],449:[function(e,h,p){(function(c){(function(){var s=/^\[object .+?Constructor\]$/,i=typeof c=="object"&&c&&c.Object===Object&&c,r=typeof self=="object"&&self&&self.Object===Object&&self,t=i||r||Function("return this")();function n(D,V){return!!(D&&D.length)&&function(q,G,F){if(G!=G)return function(M,U,K,Q){for(var Y=M.length,J=K+-1;++J<Y;)if(U(M[J],J,M))return J;return-1}(q,l,F);for(var X=F-1,O=q.length;++X<O;)if(q[X]===G)return X;return-1}(D,V,0)>-1}function l(D){return D!=D}function a(D,V){return D.has(V)}function o(D){var V=-1,q=Array(D.size);return D.forEach(function(G){q[++V]=G}),q}var d,f=Array.prototype,u=Function.prototype,g=Object.prototype,m=t["__core-js_shared__"],k=(d=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",E=u.toString,A=g.hasOwnProperty,L=g.toString,z=RegExp("^"+E.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=f.splice,I=N(t,"Map"),B=N(t,"Set"),H=N(Object,"create");function $(D){var V=-1,q=D?D.length:0;for(this.clear();++V<q;){var G=D[V];this.set(G[0],G[1])}}function C(D){var V=-1,q=D?D.length:0;for(this.clear();++V<q;){var G=D[V];this.set(G[0],G[1])}}function T(D){var V=-1,q=D?D.length:0;for(this.clear();++V<q;){var G=D[V];this.set(G[0],G[1])}}function j(D){var V=-1,q=D?D.length:0;for(this.__data__=new T;++V<q;)this.add(D[V])}function b(D,V){for(var q,G,F=D.length;F--;)if((q=D[F][0])===(G=V)||q!=q&&G!=G)return F;return-1}function v(D){return!(!P(D)||(V=D,k&&k in V))&&(function(q){var G=P(q)?L.call(q):"";return G=="[object Function]"||G=="[object GeneratorFunction]"}(D)||function(q){var G=!1;if(q!=null&&typeof q.toString!="function")try{G=!!(q+"")}catch{}return G}(D)?z:s).test(function(q){if(q!=null){try{return E.call(q)}catch{}try{return q+""}catch{}}return""}(D));var V}$.prototype.clear=function(){this.__data__=H?H(null):{}},$.prototype.delete=function(D){return this.has(D)&&delete this.__data__[D]},$.prototype.get=function(D){var V=this.__data__;if(H){var q=V[D];return q==="__lodash_hash_undefined__"?void 0:q}return A.call(V,D)?V[D]:void 0},$.prototype.has=function(D){var V=this.__data__;return H?V[D]!==void 0:A.call(V,D)},$.prototype.set=function(D,V){return this.__data__[D]=H&&V===void 0?"__lodash_hash_undefined__":V,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(D){var V=this.__data__,q=b(V,D);return!(q<0)&&(q==V.length-1?V.pop():R.call(V,q,1),!0)},C.prototype.get=function(D){var V=this.__data__,q=b(V,D);return q<0?void 0:V[q][1]},C.prototype.has=function(D){return b(this.__data__,D)>-1},C.prototype.set=function(D,V){var q=this.__data__,G=b(q,D);return G<0?q.push([D,V]):q[G][1]=V,this},T.prototype.clear=function(){this.__data__={hash:new $,map:new(I||C),string:new $}},T.prototype.delete=function(D){return w(this,D).delete(D)},T.prototype.get=function(D){return w(this,D).get(D)},T.prototype.has=function(D){return w(this,D).has(D)},T.prototype.set=function(D,V){return w(this,D).set(D,V),this},j.prototype.add=j.prototype.push=function(D){return this.__data__.set(D,"__lodash_hash_undefined__"),this},j.prototype.has=function(D){return this.__data__.has(D)};var x=B&&1/o(new B([,-0]))[1]==1/0?function(D){return new B(D)}:function(){};function w(D,V){var q,G,F=D.__data__;return((G=typeof(q=V))=="string"||G=="number"||G=="symbol"||G=="boolean"?q!=="__proto__":q===null)?F[typeof V=="string"?"string":"hash"]:F.map}function N(D,V){var q=function(G,F){return G?.[F]}(D,V);return v(q)?q:void 0}function P(D){var V=typeof D;return!!D&&(V=="object"||V=="function")}h.exports=function(D){return D&&D.length?function(V,q,G){var F=-1,X=n,O=V.length,M=!0,U=[],K=U;if(O>=200){var Q=x(V);if(Q)return o(Q);M=!1,X=a,K=new j}else K=U;e:for(;++F<O;){var Y=V[F],J=Y;if(Y=Y!==0?Y:0,M&&J==J){for(var ae=K.length;ae--;)if(K[ae]===J)continue e;U.push(Y)}else X(K,J,G)||(K!==U&&K.push(J),U.push(Y))}return U}(D):[]}}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(e,h,p){var c=e("inherits"),s=e("hash-base"),i=e("safe-buffer").Buffer,r=new Array(16);function t(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function n(f,u){return f<<u|f>>>32-u}function l(f,u,g,m,k,E,A){return n(f+(u&g|~u&m)+k+E|0,A)+u|0}function a(f,u,g,m,k,E,A){return n(f+(u&m|g&~m)+k+E|0,A)+u|0}function o(f,u,g,m,k,E,A){return n(f+(u^g^m)+k+E|0,A)+u|0}function d(f,u,g,m,k,E,A){return n(f+(g^(u|~m))+k+E|0,A)+u|0}c(t,s),t.prototype._update=function(){for(var f=r,u=0;u<16;++u)f[u]=this._block.readInt32LE(4*u);var g=this._a,m=this._b,k=this._c,E=this._d;g=l(g,m,k,E,f[0],3614090360,7),E=l(E,g,m,k,f[1],3905402710,12),k=l(k,E,g,m,f[2],606105819,17),m=l(m,k,E,g,f[3],3250441966,22),g=l(g,m,k,E,f[4],4118548399,7),E=l(E,g,m,k,f[5],1200080426,12),k=l(k,E,g,m,f[6],2821735955,17),m=l(m,k,E,g,f[7],4249261313,22),g=l(g,m,k,E,f[8],1770035416,7),E=l(E,g,m,k,f[9],2336552879,12),k=l(k,E,g,m,f[10],4294925233,17),m=l(m,k,E,g,f[11],2304563134,22),g=l(g,m,k,E,f[12],1804603682,7),E=l(E,g,m,k,f[13],4254626195,12),k=l(k,E,g,m,f[14],2792965006,17),g=a(g,m=l(m,k,E,g,f[15],1236535329,22),k,E,f[1],4129170786,5),E=a(E,g,m,k,f[6],3225465664,9),k=a(k,E,g,m,f[11],643717713,14),m=a(m,k,E,g,f[0],3921069994,20),g=a(g,m,k,E,f[5],3593408605,5),E=a(E,g,m,k,f[10],38016083,9),k=a(k,E,g,m,f[15],3634488961,14),m=a(m,k,E,g,f[4],3889429448,20),g=a(g,m,k,E,f[9],568446438,5),E=a(E,g,m,k,f[14],3275163606,9),k=a(k,E,g,m,f[3],4107603335,14),m=a(m,k,E,g,f[8],1163531501,20),g=a(g,m,k,E,f[13],2850285829,5),E=a(E,g,m,k,f[2],4243563512,9),k=a(k,E,g,m,f[7],1735328473,14),g=o(g,m=a(m,k,E,g,f[12],2368359562,20),k,E,f[5],4294588738,4),E=o(E,g,m,k,f[8],2272392833,11),k=o(k,E,g,m,f[11],1839030562,16),m=o(m,k,E,g,f[14],4259657740,23),g=o(g,m,k,E,f[1],2763975236,4),E=o(E,g,m,k,f[4],1272893353,11),k=o(k,E,g,m,f[7],4139469664,16),m=o(m,k,E,g,f[10],3200236656,23),g=o(g,m,k,E,f[13],681279174,4),E=o(E,g,m,k,f[0],3936430074,11),k=o(k,E,g,m,f[3],3572445317,16),m=o(m,k,E,g,f[6],76029189,23),g=o(g,m,k,E,f[9],3654602809,4),E=o(E,g,m,k,f[12],3873151461,11),k=o(k,E,g,m,f[15],530742520,16),g=d(g,m=o(m,k,E,g,f[2],3299628645,23),k,E,f[0],4096336452,6),E=d(E,g,m,k,f[7],1126891415,10),k=d(k,E,g,m,f[14],2878612391,15),m=d(m,k,E,g,f[5],4237533241,21),g=d(g,m,k,E,f[12],1700485571,6),E=d(E,g,m,k,f[3],2399980690,10),k=d(k,E,g,m,f[10],4293915773,15),m=d(m,k,E,g,f[1],2240044497,21),g=d(g,m,k,E,f[8],1873313359,6),E=d(E,g,m,k,f[15],4264355552,10),k=d(k,E,g,m,f[6],2734768916,15),m=d(m,k,E,g,f[13],1309151649,21),g=d(g,m,k,E,f[4],4149444226,6),E=d(E,g,m,k,f[11],3174756917,10),k=d(k,E,g,m,f[2],718787259,15),m=d(m,k,E,g,f[9],3951481745,21),this._a=this._a+g|0,this._b=this._b+m|0,this._c=this._c+k|0,this._d=this._d+E|0},t.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var f=i.allocUnsafe(16);return f.writeInt32LE(this._a,0),f.writeInt32LE(this._b,4),f.writeInt32LE(this._c,8),f.writeInt32LE(this._d,12),f},h.exports=t},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(e,h,p){var c=e("bn.js"),s=e("brorand");function i(r){this.rand=r||new s.Rand}h.exports=i,i.create=function(r){return new i(r)},i.prototype._randbelow=function(r){var t=r.bitLength(),n=Math.ceil(t/8);do var l=new c(this.rand.generate(n));while(l.cmp(r)>=0);return l},i.prototype._randrange=function(r,t){var n=t.sub(r);return r.add(this._randbelow(n))},i.prototype.test=function(r,t,n){var l=r.bitLength(),a=c.mont(r),o=new c(1).toRed(a);t||(t=Math.max(1,l/48|0));for(var d=r.subn(1),f=0;!d.testn(f);f++);for(var u=r.shrn(f),g=d.toRed(a);t>0;t--){var m=this._randrange(new c(2),d);n&&n(m);var k=m.toRed(a).redPow(u);if(k.cmp(o)!==0&&k.cmp(g)!==0){for(var E=1;E<f;E++){if((k=k.redSqr()).cmp(o)===0)return!1;if(k.cmp(g)===0)break}if(E===f)return!1}}return!0},i.prototype.getDivisor=function(r,t){var n=r.bitLength(),l=c.mont(r),a=new c(1).toRed(l);t||(t=Math.max(1,n/48|0));for(var o=r.subn(1),d=0;!o.testn(d);d++);for(var f=r.shrn(d),u=o.toRed(l);t>0;t--){var g=this._randrange(new c(2),o),m=r.gcd(g);if(m.cmpn(1)!==0)return m;var k=g.toRed(l).redPow(f);if(k.cmp(a)!==0&&k.cmp(u)!==0){for(var E=1;E<d;E++){if((k=k.redSqr()).cmp(a)===0)return k.fromRed().subn(1).gcd(r);if(k.cmp(u)===0)break}if(E===d)return(k=k.redSqr()).fromRed().subn(1).gcd(r)}}return!1}},{"bn.js":452,brorand:187}],452:[function(e,h,p){arguments[4][184][0].apply(p,arguments)},{buffer:188,dup:184}],453:[function(e,h,p){function c(s,i){if(!s)throw new Error(i||"Assertion failed")}h.exports=c,c.equal=function(s,i,r){if(s!=i)throw new Error(r||"Assertion failed: "+s+" != "+i)}},{}],454:[function(e,h,p){var c=p;function s(r){return r.length===1?"0"+r:r}function i(r){for(var t="",n=0;n<r.length;n++)t+=s(r[n].toString(16));return t}c.toArray=function(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var n=[];if(typeof r!="string"){for(var l=0;l<r.length;l++)n[l]=0|r[l];return n}if(t==="hex")for((r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r),l=0;l<r.length;l+=2)n.push(parseInt(r[l]+r[l+1],16));else for(l=0;l<r.length;l++){var a=r.charCodeAt(l),o=a>>8,d=255&a;o?n.push(o,d):n.push(d)}return n},c.zero2=s,c.toHex=i,c.encode=function(r,t){return t==="hex"?i(r):r}},{}],455:[function(e,h,p){h.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(e,h,p){var c=e("asn1.js");p.certificate=e("./certificate");var s=c.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});p.RSAPrivateKey=s;var i=c.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});p.RSAPublicKey=i;var r=c.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(t),this.key("subjectPublicKey").bitstr())});p.PublicKey=r;var t=c.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),n=c.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(t),this.key("subjectPrivateKey").octstr())});p.PrivateKey=n;var l=c.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});p.EncryptedPrivateKey=l;var a=c.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});p.DSAPrivateKey=a,p.DSAparam=c.define("DSAparam",function(){this.int()});var o=c.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())});p.ECPrivateKey=o;var d=c.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});p.signature=c.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(e,h,p){var c=e("asn1.js"),s=c.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),i=c.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),r=c.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),t=c.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())}),n=c.define("RelativeDistinguishedName",function(){this.setof(i)}),l=c.define("RDNSequence",function(){this.seqof(n)}),a=c.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),o=c.define("Validity",function(){this.seq().obj(this.key("notBefore").use(s),this.key("notAfter").use(s))}),d=c.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=c.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(r),this.key("issuer").use(a),this.key("validity").use(o),this.key("subject").use(a),this.key("subjectPublicKeyInfo").use(t),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),u=c.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(r),this.key("signatureValue").bitstr())});h.exports=u},{"asn1.js":170}],458:[function(e,h,p){var c=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,r=e("evp_bytestokey"),t=e("browserify-aes"),n=e("safe-buffer").Buffer;h.exports=function(l,a){var o,d=l.toString(),f=d.match(c);if(f){var u="aes"+f[1],g=n.from(f[2],"hex"),m=n.from(f[3].replace(/[\r\n]/g,""),"base64"),k=r(a,g.slice(0,8),parseInt(f[1],10)).key,E=[],A=t.createDecipheriv(u,k,g);E.push(A.update(m)),E.push(A.final()),o=n.concat(E)}else{var L=d.match(i);o=n.from(L[2].replace(/[\r\n]/g,""),"base64")}return{tag:d.match(s)[1],data:o}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(e,h,p){var c=e("./asn1"),s=e("./aesid.json"),i=e("./fixProc"),r=e("browserify-aes"),t=e("pbkdf2"),n=e("safe-buffer").Buffer;function l(a){var o;typeof a!="object"||n.isBuffer(a)||(o=a.passphrase,a=a.key),typeof a=="string"&&(a=n.from(a));var d,f,u=i(a,o),g=u.tag,m=u.data;switch(g){case"CERTIFICATE":f=c.certificate.decode(m,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(f||(f=c.PublicKey.decode(m,"der")),d=f.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return c.RSAPublicKey.decode(f.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return f.subjectPrivateKey=f.subjectPublicKey,{type:"ec",data:f};case"1.2.840.10040.4.1":return f.algorithm.params.pub_key=c.DSAparam.decode(f.subjectPublicKey.data,"der"),{type:"dsa",data:f.algorithm.params};default:throw new Error("unknown key id "+d)}case"ENCRYPTED PRIVATE KEY":m=function(k,E){var A=k.algorithm.decrypt.kde.kdeparams.salt,L=parseInt(k.algorithm.decrypt.kde.kdeparams.iters.toString(),10),z=s[k.algorithm.decrypt.cipher.algo.join(".")],R=k.algorithm.decrypt.cipher.iv,I=k.subjectPrivateKey,B=parseInt(z.split("-")[1],10)/8,H=t.pbkdf2Sync(E,A,L,B,"sha1"),$=r.createDecipheriv(z,H,R),C=[];return C.push($.update(I)),C.push($.final()),n.concat(C)}(m=c.EncryptedPrivateKey.decode(m,"der"),o);case"PRIVATE KEY":switch(d=(f=c.PrivateKey.decode(m,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return c.RSAPrivateKey.decode(f.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:f.algorithm.curve,privateKey:c.ECPrivateKey.decode(f.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return f.algorithm.params.priv_key=c.DSAparam.decode(f.subjectPrivateKey,"der"),{type:"dsa",params:f.algorithm.params};default:throw new Error("unknown key id "+d)}case"RSA PUBLIC KEY":return c.RSAPublicKey.decode(m,"der");case"RSA PRIVATE KEY":return c.RSAPrivateKey.decode(m,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:c.DSAPrivateKey.decode(m,"der")};case"EC PRIVATE KEY":return{curve:(m=c.ECPrivateKey.decode(m,"der")).parameters.value,privateKey:m.privateKey};default:throw new Error("unknown key type "+g)}}h.exports=l,l.signature=c.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(e,h,p){p.pbkdf2=e("./lib/async"),p.pbkdf2Sync=e("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(e,h,p){(function(c){(function(){var s,i,r=e("safe-buffer").Buffer,t=e("./precondition"),n=e("./default-encoding"),l=e("./sync"),a=e("./to-buffer"),o=c.crypto&&c.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function u(){return i||(i=c.process&&c.process.nextTick?c.process.nextTick:c.queueMicrotask?c.queueMicrotask:c.setImmediate?c.setImmediate:c.setTimeout)}function g(m,k,E,A,L){return o.importKey("raw",m,{name:"PBKDF2"},!1,["deriveBits"]).then(function(z){return o.deriveBits({name:"PBKDF2",salt:k,iterations:E,hash:{name:L}},z,A<<3)}).then(function(z){return r.from(z)})}h.exports=function(m,k,E,A,L,z){typeof L=="function"&&(z=L,L=void 0);var R=d[(L=L||"sha1").toLowerCase()];if(R&&typeof c.Promise=="function"){if(t(E,A),m=a(m,n,"Password"),k=a(k,n,"Salt"),typeof z!="function")throw new Error("No callback provided to pbkdf2");(function(I,B){I.then(function(H){u()(function(){B(null,H)})},function(H){u()(function(){B(H)})})})(function(I){if(c.process&&!c.process.browser||!o||!o.importKey||!o.deriveBits)return Promise.resolve(!1);if(f[I]!==void 0)return f[I];var B=g(s=s||r.alloc(8),s,10,128,I).then(function(){return!0}).catch(function(){return!1});return f[I]=B,B}(R).then(function(I){return I?g(m,k,E,A,R):l(m,k,E,A,L)}),z)}else u()(function(){var I;try{I=l(m,k,E,A,L)}catch(B){return z(B)}z(null,I)})}}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(e,h,p){(function(c,s){(function(){var i;s.process&&s.process.browser?i="utf-8":s.process&&s.process.version?i=parseInt(c.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":i="utf-8",h.exports=i}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(e,h,p){var c=Math.pow(2,30)-1;h.exports=function(s,i){if(typeof s!="number")throw new TypeError("Iterations not a number");if(s<0)throw new TypeError("Bad iterations");if(typeof i!="number")throw new TypeError("Key length not a number");if(i<0||i>c||i!=i)throw new TypeError("Bad key length")}},{}],464:[function(e,h,p){var c=e("create-hash/md5"),s=e("ripemd160"),i=e("sha.js"),r=e("safe-buffer").Buffer,t=e("./precondition"),n=e("./default-encoding"),l=e("./to-buffer"),a=r.alloc(128),o={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(f,u,g){var m=function(R){function I(B){return i(R).update(B).digest()}return R==="rmd160"||R==="ripemd160"?function(B){return new s().update(B).digest()}:R==="md5"?c:I}(f),k=f==="sha512"||f==="sha384"?128:64;u.length>k?u=m(u):u.length<k&&(u=r.concat([u,a],k));for(var E=r.allocUnsafe(k+o[f]),A=r.allocUnsafe(k+o[f]),L=0;L<k;L++)E[L]=54^u[L],A[L]=92^u[L];var z=r.allocUnsafe(k+g+4);E.copy(z,0,0,k),this.ipad1=z,this.ipad2=E,this.opad=A,this.alg=f,this.blocksize=k,this.hash=m,this.size=o[f]}d.prototype.run=function(f,u){return f.copy(u,this.blocksize),this.hash(u).copy(this.opad,this.blocksize),this.hash(this.opad)},h.exports=function(f,u,g,m,k){t(g,m);var E=new d(k=k||"sha1",f=l(f,n,"Password"),(u=l(u,n,"Salt")).length),A=r.allocUnsafe(m),L=r.allocUnsafe(u.length+4);u.copy(L,0,0,u.length);for(var z=0,R=o[k],I=Math.ceil(m/R),B=1;B<=I;B++){L.writeUInt32BE(B,u.length);for(var H=E.run(L,E.ipad1),$=H,C=1;C<g;C++){$=E.run($,E.ipad2);for(var T=0;T<R;T++)H[T]^=$[T]}H.copy(A,z),z+=R}return A}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(e,h,p){var c=e("safe-buffer").Buffer;h.exports=function(s,i,r){if(c.isBuffer(s))return s;if(typeof s=="string")return c.from(s,i);if(ArrayBuffer.isView(s))return c.from(s.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(e,h,p){(function(c){(function(){c===void 0||!c.version||c.version.indexOf("v0.")===0||c.version.indexOf("v1.")===0&&c.version.indexOf("v1.8.")!==0?h.exports={nextTick:function(s,i,r,t){if(typeof s!="function")throw new TypeError('"callback" argument must be a function');var n,l,a=arguments.length;switch(a){case 0:case 1:return c.nextTick(s);case 2:return c.nextTick(function(){s.call(null,i)});case 3:return c.nextTick(function(){s.call(null,i,r)});case 4:return c.nextTick(function(){s.call(null,i,r,t)});default:for(n=new Array(a-1),l=0;l<n.length;)n[l++]=arguments[l];return c.nextTick(function(){s.apply(null,n)})}}}:h.exports=c}).call(this)}).call(this,e("_process"))},{_process:467}],467:[function(e,h,p){var c,s,i=h.exports={};function r(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}function n(k){if(c===setTimeout)return setTimeout(k,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(k,0);try{return c(k,0)}catch{try{return c.call(null,k,0)}catch{return c.call(this,k,0)}}}(function(){try{c=typeof setTimeout=="function"?setTimeout:r}catch{c=r}try{s=typeof clearTimeout=="function"?clearTimeout:t}catch{s=t}})();var l,a=[],o=!1,d=-1;function f(){o&&l&&(o=!1,l.length?a=l.concat(a):d=-1,a.length&&u())}function u(){if(!o){var k=n(f);o=!0;for(var E=a.length;E;){for(l=a,a=[];++d<E;)l&&l[d].run();d=-1,E=a.length}l=null,o=!1,function(A){if(s===clearTimeout)return clearTimeout(A);if((s===t||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(A);try{s(A)}catch{try{return s.call(null,A)}catch{return s.call(this,A)}}}(k)}}function g(k,E){this.fun=k,this.array=E}function m(){}i.nextTick=function(k){var E=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)E[A-1]=arguments[A];a.push(new g(k,E)),a.length!==1||o||n(u)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(k){return[]},i.binding=function(k){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(k){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],468:[function(e,h,p){p.publicEncrypt=e("./publicEncrypt"),p.privateDecrypt=e("./privateDecrypt"),p.privateEncrypt=function(c,s){return p.publicEncrypt(c,s,!0)},p.publicDecrypt=function(c,s){return p.privateDecrypt(c,s,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(e,h,p){var c=e("create-hash"),s=e("safe-buffer").Buffer;function i(r){var t=s.allocUnsafe(4);return t.writeUInt32BE(r,0),t}h.exports=function(r,t){for(var n,l=s.alloc(0),a=0;l.length<t;)n=i(a++),l=s.concat([l,c("sha1").update(r).update(n).digest()]);return l.slice(0,t)}},{"create-hash":386,"safe-buffer":494}],470:[function(e,h,p){arguments[4][184][0].apply(p,arguments)},{buffer:188,dup:184}],471:[function(e,h,p){var c=e("parse-asn1"),s=e("./mgf"),i=e("./xor"),r=e("bn.js"),t=e("browserify-rsa"),n=e("create-hash"),l=e("./withPublic"),a=e("safe-buffer").Buffer;h.exports=function(o,d,f){var u;u=o.padding?o.padding:f?1:4;var g,m=c(o),k=m.modulus.byteLength();if(d.length>k||new r(d).cmp(m.modulus)>=0)throw new Error("decryption error");g=f?l(new r(d),m):t(d,m);var E=a.alloc(k-g.length);if(g=a.concat([E,g],k),u===4)return function(A,L){var z=A.modulus.byteLength(),R=n("sha1").update(a.alloc(0)).digest(),I=R.length;if(L[0]!==0)throw new Error("decryption error");var B=L.slice(1,I+1),H=L.slice(I+1),$=i(B,s(H,I)),C=i(H,s($,z-I-1));if(function(j,b){j=a.from(j),b=a.from(b);var v=0,x=j.length;j.length!==b.length&&(v++,x=Math.min(j.length,b.length));for(var w=-1;++w<x;)v+=j[w]^b[w];return v}(R,C.slice(0,I)))throw new Error("decryption error");for(var T=I;C[T]===0;)T++;if(C[T++]!==1)throw new Error("decryption error");return C.slice(T)}(m,g);if(u===1)return function(A,L,z){for(var R=L.slice(0,2),I=2,B=0;L[I++]!==0;)if(I>=L.length){B++;break}var H=L.slice(2,I-1);if((R.toString("hex")!=="0002"&&!z||R.toString("hex")!=="0001"&&z)&&B++,H.length<8&&B++,B)throw new Error("decryption error");return L.slice(I)}(0,g,f);if(u===3)return g;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(e,h,p){var c=e("parse-asn1"),s=e("randombytes"),i=e("create-hash"),r=e("./mgf"),t=e("./xor"),n=e("bn.js"),l=e("./withPublic"),a=e("browserify-rsa"),o=e("safe-buffer").Buffer;h.exports=function(d,f,u){var g;g=d.padding?d.padding:u?1:4;var m,k=c(d);if(g===4)m=function(E,A){var L=E.modulus.byteLength(),z=A.length,R=i("sha1").update(o.alloc(0)).digest(),I=R.length,B=2*I;if(z>L-B-2)throw new Error("message too long");var H=o.alloc(L-z-B-2),$=L-I-1,C=s(I),T=t(o.concat([R,H,o.alloc(1,1),A],$),r(C,$)),j=t(C,r(T,I));return new n(o.concat([o.alloc(1),j,T],L))}(k,f);else if(g===1)m=function(E,A,L){var z,R=A.length,I=E.modulus.byteLength();if(R>I-11)throw new Error("message too long");return z=L?o.alloc(I-R-3,255):function(B){for(var H,$=o.allocUnsafe(B),C=0,T=s(2*B),j=0;C<B;)j===T.length&&(T=s(2*B),j=0),(H=T[j++])&&($[C++]=H);return $}(I-R-3),new n(o.concat([o.from([0,L?1:2]),z,o.alloc(1),A],I))}(k,f,u);else{if(g!==3)throw new Error("unknown padding");if((m=new n(f)).cmp(k.modulus)>=0)throw new Error("data too long for modulus")}return u?a(m,k):l(m,k)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(e,h,p){var c=e("bn.js"),s=e("safe-buffer").Buffer;h.exports=function(i,r){return s.from(i.toRed(c.mont(r.modulus)).redPow(new c(r.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(e,h,p){h.exports=function(c,s){for(var i=c.length,r=-1;++r<i;)c[r]^=s[r];return c}},{}],475:[function(e,h,p){(function(c,s){(function(){var i=e("safe-buffer").Buffer,r=s.crypto||s.msCrypto;r&&r.getRandomValues?h.exports=function(t,n){if(t>4294967295)throw new RangeError("requested too many random bytes");var l=i.allocUnsafe(t);if(t>0)if(t>65536)for(var a=0;a<t;a+=65536)r.getRandomValues(l.slice(a,a+65536));else r.getRandomValues(l);return typeof n=="function"?c.nextTick(function(){n(null,l)}):l}:h.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(e,h,p){(function(c,s){(function(){function i(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var r=e("safe-buffer"),t=e("randombytes"),n=r.Buffer,l=r.kMaxLength,a=s.crypto||s.msCrypto,o=Math.pow(2,32)-1;function d(g,m){if(typeof g!="number"||g!=g)throw new TypeError("offset must be a number");if(g>o||g<0)throw new TypeError("offset must be a uint32");if(g>l||g>m)throw new RangeError("offset out of range")}function f(g,m,k){if(typeof g!="number"||g!=g)throw new TypeError("size must be a number");if(g>o||g<0)throw new TypeError("size must be a uint32");if(g+m>k||g>l)throw new RangeError("buffer too small")}function u(g,m,k,E){if(c.browser){var A=g.buffer,L=new Uint8Array(A,m,k);return a.getRandomValues(L),E?void c.nextTick(function(){E(null,g)}):g}if(!E)return t(k).copy(g,m),g;t(k,function(z,R){if(z)return E(z);R.copy(g,m),E(null,g)})}a&&a.getRandomValues||!c.browser?(p.randomFill=function(g,m,k,E){if(!(n.isBuffer(g)||g instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof m=="function")E=m,m=0,k=g.length;else if(typeof k=="function")E=k,k=g.length-m;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return d(m,g.length),f(k,m,g.length),u(g,m,k,E)},p.randomFillSync=function(g,m,k){if(m===void 0&&(m=0),!(n.isBuffer(g)||g instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return d(m,g.length),k===void 0&&(k=g.length-m),f(k,m,g.length),u(g,m,k)}):(p.randomFill=i,p.randomFillSync=i)}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(e,h,p){var c={};function s(r,t,n){n||(n=Error);var l=function(a){var o,d;function f(u,g,m){return a.call(this,function(k,E,A){return typeof t=="string"?t:t(k,E,A)}(u,g,m))||this}return d=a,(o=f).prototype=Object.create(d.prototype),o.prototype.constructor=o,o.__proto__=d,f}(n);l.prototype.name=n.name,l.prototype.code=r,c[r]=l}function i(r,t){if(Array.isArray(r)){var n=r.length;return r=r.map(function(l){return String(l)}),n>2?"one of ".concat(t," ").concat(r.slice(0,n-1).join(", "),", or ")+r[n-1]:n===2?"one of ".concat(t," ").concat(r[0]," or ").concat(r[1]):"of ".concat(t," ").concat(r[0])}return"of ".concat(t," ").concat(String(r))}s("ERR_INVALID_OPT_VALUE",function(r,t){return'The value "'+t+'" is invalid for option "'+r+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(r,t,n){var l,a,o;if(typeof t=="string"&&(a="not ",t.substr(0,a.length)===a)?(l="must not be",t=t.replace(/^not /,"")):l="must be",function(f,u,g){return(g===void 0||g>f.length)&&(g=f.length),f.substring(g-u.length,g)===u}(r," argument"))o="The ".concat(r," ").concat(l," ").concat(i(t,"type"));else{var d=function(f,u,g){return typeof g!="number"&&(g=0),!(g+u.length>f.length)&&f.indexOf(u,g)!==-1}(r,".")?"property":"argument";o='The "'.concat(r,'" ').concat(d," ").concat(l," ").concat(i(t,"type"))}return o+=". Received type ".concat(typeof n)},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),h.exports.codes=c},{}],478:[function(e,h,p){(function(c){(function(){var s=Object.keys||function(f){var u=[];for(var g in f)u.push(g);return u};h.exports=a;var i=e("./_stream_readable"),r=e("./_stream_writable");e("inherits")(a,i);for(var t=s(r.prototype),n=0;n<t.length;n++){var l=t[n];a.prototype[l]||(a.prototype[l]=r.prototype[l])}function a(f){if(!(this instanceof a))return new a(f);i.call(this,f),r.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||c.nextTick(d,this)}function d(f){f.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(e,h,p){h.exports=s;var c=e("./_stream_transform");function s(i){if(!(this instanceof s))return new s(i);c.call(this,i)}e("inherits")(s,c),s.prototype._transform=function(i,r,t){t(null,i)}},{"./_stream_transform":481,inherits:440}],480:[function(e,h,p){(function(c,s){(function(){var i;h.exports=$,$.ReadableState=H,e("events").EventEmitter;var r=function(O,M){return O.listeners(M).length},t=e("./internal/streams/stream"),n=e("buffer").Buffer,l=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},a,o=e("util");a=o&&o.debuglog?o.debuglog("stream"):function(){};var d,f,u,g=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),k=e("./internal/streams/state").getHighWaterMark,E=e("../errors").codes,A=E.ERR_INVALID_ARG_TYPE,L=E.ERR_STREAM_PUSH_AFTER_EOF,z=E.ERR_METHOD_NOT_IMPLEMENTED,R=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")($,t);var I=m.errorOrDestroy,B=["error","close","destroy","pause","resume"];function H(O,M,U){i=i||e("./_stream_duplex"),O=O||{},typeof U!="boolean"&&(U=M instanceof i),this.objectMode=!!O.objectMode,U&&(this.objectMode=this.objectMode||!!O.readableObjectMode),this.highWaterMark=k(this,O,"readableHighWaterMark",U),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.destroyed=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(O.encoding),this.encoding=O.encoding)}function $(O){if(i=i||e("./_stream_duplex"),!(this instanceof $))return new $(O);var M=this instanceof i;this._readableState=new H(O,this,M),this.readable=!0,O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy)),t.call(this)}function C(O,M,U,K,Q){a("readableAddChunk",M);var Y,J=O._readableState;if(M===null)J.reading=!1,function(ae,ie){if(a("onEofChunk"),!ie.ended){if(ie.decoder){var Z=ie.decoder.end();Z&&Z.length&&(ie.buffer.push(Z),ie.length+=ie.objectMode?1:Z.length)}ie.ended=!0,ie.sync?b(ae):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,v(ae)))}}(O,J);else if(Q||(Y=function(ae,ie){var Z;ne=ie,n.isBuffer(ne)||ne instanceof l||typeof ie=="string"||ie===void 0||ae.objectMode||(Z=new A("chunk",["string","Buffer","Uint8Array"],ie));var ne;return Z}(J,M)),Y)I(O,Y);else if(J.objectMode||M&&M.length>0)if(typeof M=="string"||J.objectMode||Object.getPrototypeOf(M)===n.prototype||(M=function(ae){return n.from(ae)}(M)),K)J.endEmitted?I(O,new R):T(O,J,M,!0);else if(J.ended)I(O,new L);else{if(J.destroyed)return!1;J.reading=!1,J.decoder&&!U?(M=J.decoder.write(M),J.objectMode||M.length!==0?T(O,J,M,!1):x(O,J)):T(O,J,M,!1)}else K||(J.reading=!1,x(O,J));return!J.ended&&(J.length<J.highWaterMark||J.length===0)}function T(O,M,U,K){M.flowing&&M.length===0&&!M.sync?(M.awaitDrain=0,O.emit("data",U)):(M.length+=M.objectMode?1:U.length,K?M.buffer.unshift(U):M.buffer.push(U),M.needReadable&&b(O)),x(O,M)}Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),$.prototype.destroy=m.destroy,$.prototype._undestroy=m.undestroy,$.prototype._destroy=function(O,M){M(O)},$.prototype.push=function(O,M){var U,K=this._readableState;return K.objectMode?U=!0:typeof O=="string"&&((M=M||K.defaultEncoding)!==K.encoding&&(O=n.from(O,M),M=""),U=!0),C(this,O,M,!1,U)},$.prototype.unshift=function(O){return C(this,O,null,!0,!1)},$.prototype.isPaused=function(){return this._readableState.flowing===!1},$.prototype.setEncoding=function(O){d||(d=e("string_decoder/").StringDecoder);var M=new d(O);this._readableState.decoder=M,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,K="";U!==null;)K+=M.write(U.data),U=U.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};function j(O,M){return O<=0||M.length===0&&M.ended?0:M.objectMode?1:O!=O?M.flowing&&M.length?M.buffer.head.data.length:M.length:(O>M.highWaterMark&&(M.highWaterMark=function(U){return U>=1073741824?U=1073741824:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}(O)),O<=M.length?O:M.ended?M.length:(M.needReadable=!0,0))}function b(O){var M=O._readableState;a("emitReadable",M.needReadable,M.emittedReadable),M.needReadable=!1,M.emittedReadable||(a("emitReadable",M.flowing),M.emittedReadable=!0,c.nextTick(v,O))}function v(O){var M=O._readableState;a("emitReadable_",M.destroyed,M.length,M.ended),M.destroyed||!M.length&&!M.ended||(O.emit("readable"),M.emittedReadable=!1),M.needReadable=!M.flowing&&!M.ended&&M.length<=M.highWaterMark,V(O)}function x(O,M){M.readingMore||(M.readingMore=!0,c.nextTick(w,O,M))}function w(O,M){for(;!M.reading&&!M.ended&&(M.length<M.highWaterMark||M.flowing&&M.length===0);){var U=M.length;if(a("maybeReadMore read 0"),O.read(0),U===M.length)break}M.readingMore=!1}function N(O){var M=O._readableState;M.readableListening=O.listenerCount("readable")>0,M.resumeScheduled&&!M.paused?M.flowing=!0:O.listenerCount("data")>0&&O.resume()}function P(O){a("readable nexttick read 0"),O.read(0)}function D(O,M){a("resume",M.reading),M.reading||O.read(0),M.resumeScheduled=!1,O.emit("resume"),V(O),M.flowing&&!M.reading&&O.read(0)}function V(O){var M=O._readableState;for(a("flow",M.flowing);M.flowing&&O.read()!==null;);}function q(O,M){return M.length===0?null:(M.objectMode?U=M.buffer.shift():!O||O>=M.length?(U=M.decoder?M.buffer.join(""):M.buffer.length===1?M.buffer.first():M.buffer.concat(M.length),M.buffer.clear()):U=M.buffer.consume(O,M.decoder),U);var U}function G(O){var M=O._readableState;a("endReadable",M.endEmitted),M.endEmitted||(M.ended=!0,c.nextTick(F,M,O))}function F(O,M){if(a("endReadableNT",O.endEmitted,O.length),!O.endEmitted&&O.length===0&&(O.endEmitted=!0,M.readable=!1,M.emit("end"),O.autoDestroy)){var U=M._writableState;(!U||U.autoDestroy&&U.finished)&&M.destroy()}}function X(O,M){for(var U=0,K=O.length;U<K;U++)if(O[U]===M)return U;return-1}$.prototype.read=function(O){a("read",O),O=parseInt(O,10);var M=this._readableState,U=O;if(O!==0&&(M.emittedReadable=!1),O===0&&M.needReadable&&((M.highWaterMark!==0?M.length>=M.highWaterMark:M.length>0)||M.ended))return a("read: emitReadable",M.length,M.ended),M.length===0&&M.ended?G(this):b(this),null;if((O=j(O,M))===0&&M.ended)return M.length===0&&G(this),null;var K,Q=M.needReadable;return a("need readable",Q),(M.length===0||M.length-O<M.highWaterMark)&&a("length less than watermark",Q=!0),M.ended||M.reading?a("reading or ended",Q=!1):Q&&(a("do read"),M.reading=!0,M.sync=!0,M.length===0&&(M.needReadable=!0),this._read(M.highWaterMark),M.sync=!1,M.reading||(O=j(U,M))),(K=O>0?q(O,M):null)===null?(M.needReadable=M.length<=M.highWaterMark,O=0):(M.length-=O,M.awaitDrain=0),M.length===0&&(M.ended||(M.needReadable=!0),U!==O&&M.ended&&G(this)),K!==null&&this.emit("data",K),K},$.prototype._read=function(O){I(this,new z("_read()"))},$.prototype.pipe=function(O,M){var U=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=O;break;case 1:K.pipes=[K.pipes,O];break;default:K.pipes.push(O)}K.pipesCount+=1,a("pipe count=%d opts=%j",K.pipesCount,M);var Q=(!M||M.end!==!1)&&O!==c.stdout&&O!==c.stderr?J:ce;function Y(te,de){a("onunpipe"),te===U&&de&&de.hasUnpiped===!1&&(de.hasUnpiped=!0,a("cleanup"),O.removeListener("close",re),O.removeListener("finish",ue),O.removeListener("drain",ae),O.removeListener("error",ne),O.removeListener("unpipe",Y),U.removeListener("end",J),U.removeListener("end",ce),U.removeListener("data",Z),ie=!0,!K.awaitDrain||O._writableState&&!O._writableState.needDrain||ae())}function J(){a("onend"),O.end()}K.endEmitted?c.nextTick(Q):U.once("end",Q),O.on("unpipe",Y);var ae=function(te){return function(){var de=te._readableState;a("pipeOnDrain",de.awaitDrain),de.awaitDrain&&de.awaitDrain--,de.awaitDrain===0&&r(te,"data")&&(de.flowing=!0,V(te))}}(U);O.on("drain",ae);var ie=!1;function Z(te){a("ondata");var de=O.write(te);a("dest.write",de),de===!1&&((K.pipesCount===1&&K.pipes===O||K.pipesCount>1&&X(K.pipes,O)!==-1)&&!ie&&(a("false write response, pause",K.awaitDrain),K.awaitDrain++),U.pause())}function ne(te){a("onerror",te),ce(),O.removeListener("error",ne),r(O,"error")===0&&I(O,te)}function re(){O.removeListener("finish",ue),ce()}function ue(){a("onfinish"),O.removeListener("close",re),ce()}function ce(){a("unpipe"),U.unpipe(O)}return U.on("data",Z),function(te,de,le){if(typeof te.prependListener=="function")return te.prependListener(de,le);te._events&&te._events[de]?Array.isArray(te._events[de])?te._events[de].unshift(le):te._events[de]=[le,te._events[de]]:te.on(de,le)}(O,"error",ne),O.once("close",re),O.once("finish",ue),O.emit("pipe",U),K.flowing||(a("pipe resume"),U.resume()),O},$.prototype.unpipe=function(O){var M=this._readableState,U={hasUnpiped:!1};if(M.pipesCount===0)return this;if(M.pipesCount===1)return O&&O!==M.pipes||(O||(O=M.pipes),M.pipes=null,M.pipesCount=0,M.flowing=!1,O&&O.emit("unpipe",this,U)),this;if(!O){var K=M.pipes,Q=M.pipesCount;M.pipes=null,M.pipesCount=0,M.flowing=!1;for(var Y=0;Y<Q;Y++)K[Y].emit("unpipe",this,{hasUnpiped:!1});return this}var J=X(M.pipes,O);return J===-1||(M.pipes.splice(J,1),M.pipesCount-=1,M.pipesCount===1&&(M.pipes=M.pipes[0]),O.emit("unpipe",this,U)),this},$.prototype.on=function(O,M){var U=t.prototype.on.call(this,O,M),K=this._readableState;return O==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):O==="readable"&&(K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,a("on readable",K.length,K.reading),K.length?b(this):K.reading||c.nextTick(P,this))),U},$.prototype.addListener=$.prototype.on,$.prototype.removeListener=function(O,M){var U=t.prototype.removeListener.call(this,O,M);return O==="readable"&&c.nextTick(N,this),U},$.prototype.removeAllListeners=function(O){var M=t.prototype.removeAllListeners.apply(this,arguments);return O!=="readable"&&O!==void 0||c.nextTick(N,this),M},$.prototype.resume=function(){var O=this._readableState;return O.flowing||(a("resume"),O.flowing=!O.readableListening,function(M,U){U.resumeScheduled||(U.resumeScheduled=!0,c.nextTick(D,M,U))}(this,O)),O.paused=!1,this},$.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},$.prototype.wrap=function(O){var M=this,U=this._readableState,K=!1;for(var Q in O.on("end",function(){if(a("wrapped end"),U.decoder&&!U.ended){var J=U.decoder.end();J&&J.length&&M.push(J)}M.push(null)}),O.on("data",function(J){a("wrapped data"),U.decoder&&(J=U.decoder.write(J)),U.objectMode&&J==null||(U.objectMode||J&&J.length)&&(M.push(J)||(K=!0,O.pause()))}),O)this[Q]===void 0&&typeof O[Q]=="function"&&(this[Q]=function(J){return function(){return O[J].apply(O,arguments)}}(Q));for(var Y=0;Y<B.length;Y++)O.on(B[Y],this.emit.bind(this,B[Y]));return this._read=function(J){a("wrapped _read",J),K&&(K=!1,O.resume())},this},typeof Symbol=="function"&&($.prototype[Symbol.asyncIterator]=function(){return f===void 0&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty($.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty($.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty($.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(O){this._readableState&&(this._readableState.flowing=O)}}),$._fromList=q,Object.defineProperty($.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&($.from=function(O,M){return u===void 0&&(u=e("./internal/streams/from")),u($,O,M)})}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(e,h,p){h.exports=a;var c=e("../errors").codes,s=c.ERR_METHOD_NOT_IMPLEMENTED,i=c.ERR_MULTIPLE_CALLBACK,r=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,t=c.ERR_TRANSFORM_WITH_LENGTH_0,n=e("./_stream_duplex");function l(f,u){var g=this._transformState;g.transforming=!1;var m=g.writecb;if(m===null)return this.emit("error",new i);g.writechunk=null,g.writecb=null,u!=null&&this.push(u),m(f);var k=this._readableState;k.reading=!1,(k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}function a(f){if(!(this instanceof a))return new a(f);n.call(this,f),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",o)}function o(){var f=this;typeof this._flush!="function"||this._readableState.destroyed?d(this,null,null):this._flush(function(u,g){d(f,u,g)})}function d(f,u,g){if(u)return f.emit("error",u);if(g!=null&&f.push(g),f._writableState.length)throw new t;if(f._transformState.transforming)throw new r;return f.push(null)}e("inherits")(a,n),a.prototype.push=function(f,u){return this._transformState.needTransform=!1,n.prototype.push.call(this,f,u)},a.prototype._transform=function(f,u,g){g(new s("_transform()"))},a.prototype._write=function(f,u,g){var m=this._transformState;if(m.writecb=g,m.writechunk=f,m.writeencoding=u,!m.transforming){var k=this._readableState;(m.needTransform||k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}},a.prototype._read=function(f){var u=this._transformState;u.writechunk===null||u.transforming?u.needTransform=!0:(u.transforming=!0,this._transform(u.writechunk,u.writeencoding,u.afterTransform))},a.prototype._destroy=function(f,u){n.prototype._destroy.call(this,f,function(g){u(g)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(e,h,p){(function(c,s){(function(){function i(w){var N=this;this.next=null,this.entry=null,this.finish=function(){(function(P,D,V){var q=P.entry;for(P.entry=null;q;){var G=q.callback;D.pendingcb--,G(V),q=q.next}D.corkedRequestsFree.next=P})(N,w)}}var r;h.exports=$,$.WritableState=H;var t={deprecate:e("util-deprecate")},n=e("./internal/streams/stream"),l=e("buffer").Buffer,a=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,d=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,u=e("../errors").codes,g=u.ERR_INVALID_ARG_TYPE,m=u.ERR_METHOD_NOT_IMPLEMENTED,k=u.ERR_MULTIPLE_CALLBACK,E=u.ERR_STREAM_CANNOT_PIPE,A=u.ERR_STREAM_DESTROYED,L=u.ERR_STREAM_NULL_VALUES,z=u.ERR_STREAM_WRITE_AFTER_END,R=u.ERR_UNKNOWN_ENCODING,I=d.errorOrDestroy;function B(){}function H(w,N,P){r=r||e("./_stream_duplex"),w=w||{},typeof P!="boolean"&&(P=N instanceof r),this.objectMode=!!w.objectMode,P&&(this.objectMode=this.objectMode||!!w.writableObjectMode),this.highWaterMark=f(this,w,"writableHighWaterMark",P),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=w.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=w.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){(function(q,G){var F=q._writableState,X=F.sync,O=F.writecb;if(typeof O!="function")throw new k;if(function(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}(F),G)(function(U,K,Q,Y,J){--K.pendingcb,Q?(c.nextTick(J,Y),c.nextTick(x,U,K),U._writableState.errorEmitted=!0,I(U,Y)):(J(Y),U._writableState.errorEmitted=!0,I(U,Y),x(U,K))})(q,F,X,G,O);else{var M=b(F)||q.destroyed;M||F.corked||F.bufferProcessing||!F.bufferedRequest||j(q,F),X?c.nextTick(T,q,F,M,O):T(q,F,M,O)}})(N,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=w.emitClose!==!1,this.autoDestroy=!!w.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function $(w){var N=this instanceof(r=r||e("./_stream_duplex"));if(!N&&!o.call($,this))return new $(w);this._writableState=new H(w,this,N),this.writable=!0,w&&(typeof w.write=="function"&&(this._write=w.write),typeof w.writev=="function"&&(this._writev=w.writev),typeof w.destroy=="function"&&(this._destroy=w.destroy),typeof w.final=="function"&&(this._final=w.final)),n.call(this)}function C(w,N,P,D,V,q,G){N.writelen=D,N.writecb=G,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new A("write")):P?w._writev(V,N.onwrite):w._write(V,q,N.onwrite),N.sync=!1}function T(w,N,P,D){P||function(V,q){q.length===0&&q.needDrain&&(q.needDrain=!1,V.emit("drain"))}(w,N),N.pendingcb--,D(),x(w,N)}function j(w,N){N.bufferProcessing=!0;var P=N.bufferedRequest;if(w._writev&&P&&P.next){var D=N.bufferedRequestCount,V=new Array(D),q=N.corkedRequestsFree;q.entry=P;for(var G=0,F=!0;P;)V[G]=P,P.isBuf||(F=!1),P=P.next,G+=1;V.allBuffers=F,C(w,N,!0,N.length,V,"",q.finish),N.pendingcb++,N.lastBufferedRequest=null,q.next?(N.corkedRequestsFree=q.next,q.next=null):N.corkedRequestsFree=new i(N),N.bufferedRequestCount=0}else{for(;P;){var X=P.chunk,O=P.encoding,M=P.callback;if(C(w,N,!1,N.objectMode?1:X.length,X,O,M),P=P.next,N.bufferedRequestCount--,N.writing)break}P===null&&(N.lastBufferedRequest=null)}N.bufferedRequest=P,N.bufferProcessing=!1}function b(w){return w.ending&&w.length===0&&w.bufferedRequest===null&&!w.finished&&!w.writing}function v(w,N){w._final(function(P){N.pendingcb--,P&&I(w,P),N.prefinished=!0,w.emit("prefinish"),x(w,N)})}function x(w,N){var P=b(N);if(P&&(function(V,q){q.prefinished||q.finalCalled||(typeof V._final!="function"||q.destroyed?(q.prefinished=!0,V.emit("prefinish")):(q.pendingcb++,q.finalCalled=!0,c.nextTick(v,V,q)))}(w,N),N.pendingcb===0&&(N.finished=!0,w.emit("finish"),N.autoDestroy))){var D=w._readableState;(!D||D.autoDestroy&&D.endEmitted)&&w.destroy()}return P}e("inherits")($,n),H.prototype.getBuffer=function(){for(var w=this.bufferedRequest,N=[];w;)N.push(w),w=w.next;return N},function(){try{Object.defineProperty(H.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(w){return!!o.call(this,w)||this===$&&w&&w._writableState instanceof H}})):o=function(w){return w instanceof this},$.prototype.pipe=function(){I(this,new E)},$.prototype.write=function(w,N,P){var D,V=this._writableState,q=!1,G=!V.objectMode&&(D=w,l.isBuffer(D)||D instanceof a);return G&&!l.isBuffer(w)&&(w=function(F){return l.from(F)}(w)),typeof N=="function"&&(P=N,N=null),G?N="buffer":N||(N=V.defaultEncoding),typeof P!="function"&&(P=B),V.ending?function(F,X){var O=new z;I(F,O),c.nextTick(X,O)}(this,P):(G||function(F,X,O,M){var U;return O===null?U=new L:typeof O=="string"||X.objectMode||(U=new g("chunk",["string","Buffer"],O)),!U||(I(F,U),c.nextTick(M,U),!1)}(this,V,w,P))&&(V.pendingcb++,q=function(F,X,O,M,U,K){if(!O){var Q=function(ie,Z,ne){return ie.objectMode||ie.decodeStrings===!1||typeof Z!="string"||(Z=l.from(Z,ne)),Z}(X,M,U);M!==Q&&(O=!0,U="buffer",M=Q)}var Y=X.objectMode?1:M.length;X.length+=Y;var J=X.length<X.highWaterMark;if(J||(X.needDrain=!0),X.writing||X.corked){var ae=X.lastBufferedRequest;X.lastBufferedRequest={chunk:M,encoding:U,isBuf:O,callback:K,next:null},ae?ae.next=X.lastBufferedRequest:X.bufferedRequest=X.lastBufferedRequest,X.bufferedRequestCount+=1}else C(F,X,!1,Y,M,U,K);return J}(this,V,G,w,N,P)),q},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){var w=this._writableState;w.corked&&(w.corked--,w.writing||w.corked||w.bufferProcessing||!w.bufferedRequest||j(this,w))},$.prototype.setDefaultEncoding=function(w){if(typeof w=="string"&&(w=w.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((w+"").toLowerCase())>-1))throw new R(w);return this._writableState.defaultEncoding=w,this},Object.defineProperty($.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),$.prototype._write=function(w,N,P){P(new m("_write()"))},$.prototype._writev=null,$.prototype.end=function(w,N,P){var D=this._writableState;return typeof w=="function"?(P=w,w=null,N=null):typeof N=="function"&&(P=N,N=null),w!=null&&this.write(w,N),D.corked&&(D.corked=1,this.uncork()),D.ending||function(V,q,G){q.ending=!0,x(V,q),G&&(q.finished?c.nextTick(G):V.once("finish",G)),q.ended=!0,V.writable=!1}(this,D,P),this},Object.defineProperty($.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(w){this._writableState&&(this._writableState.destroyed=w)}}),$.prototype.destroy=d.destroy,$.prototype._undestroy=d.undestroy,$.prototype._destroy=function(w,N){N(w)}}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(e,h,p){(function(c){(function(){var s;function i(A,L,z){return(L=function(R){var I=function(B,H){if(typeof B!="object"||B===null)return B;var $=B[Symbol.toPrimitive];if($!==void 0){var C=$.call(B,H);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(B)}(R,"string");return typeof I=="symbol"?I:String(I)}(L))in A?Object.defineProperty(A,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):A[L]=z,A}var r=e("./end-of-stream"),t=Symbol("lastResolve"),n=Symbol("lastReject"),l=Symbol("error"),a=Symbol("ended"),o=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function u(A,L){return{value:A,done:L}}function g(A){var L=A[t];if(L!==null){var z=A[f].read();z!==null&&(A[o]=null,A[t]=null,A[n]=null,L(u(z,!1)))}}function m(A){c.nextTick(g,A)}var k=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((i(s={get stream(){return this[f]},next:function(){var A=this,L=this[l];if(L!==null)return Promise.reject(L);if(this[a])return Promise.resolve(u(void 0,!0));if(this[f].destroyed)return new Promise(function(B,H){c.nextTick(function(){A[l]?H(A[l]):B(u(void 0,!0))})});var z,R=this[o];if(R)z=new Promise(function(B,H){return function($,C){B.then(function(){H[a]?$(u(void 0,!0)):H[d]($,C)},C)}}(R,this));else{var I=this[f].read();if(I!==null)return Promise.resolve(u(I,!1));z=new Promise(this[d])}return this[o]=z,z}},Symbol.asyncIterator,function(){return this}),i(s,"return",function(){var A=this;return new Promise(function(L,z){A[f].destroy(null,function(R){R?z(R):L(u(void 0,!0))})})}),s),k);h.exports=function(A){var L,z=Object.create(E,(i(L={},f,{value:A,writable:!0}),i(L,t,{value:null,writable:!0}),i(L,n,{value:null,writable:!0}),i(L,l,{value:null,writable:!0}),i(L,a,{value:A._readableState.endEmitted,writable:!0}),i(L,d,{value:function(R,I){var B=z[f].read();B?(z[o]=null,z[t]=null,z[n]=null,R(u(B,!1))):(z[t]=R,z[n]=I)},writable:!0}),L));return z[o]=null,r(A,function(R){if(R&&R.code!=="ERR_STREAM_PREMATURE_CLOSE"){var I=z[n];return I!==null&&(z[o]=null,z[t]=null,z[n]=null,I(R)),void(z[l]=R)}var B=z[t];B!==null&&(z[o]=null,z[t]=null,z[n]=null,B(u(void 0,!0))),z[a]=!0}),A.on("readable",m.bind(null,z)),z}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":486,_process:467}],484:[function(e,h,p){function c(o,d){var f=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);d&&(u=u.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),f.push.apply(f,u)}return f}function s(o){for(var d=1;d<arguments.length;d++){var f=arguments[d]!=null?arguments[d]:{};d%2?c(Object(f),!0).forEach(function(u){i(o,u,f[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(f)):c(Object(f)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(f,u))})}return o}function i(o,d,f){return(d=t(d))in o?Object.defineProperty(o,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):o[d]=f,o}function r(o,d){for(var f=0;f<d.length;f++){var u=d[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,t(u.key),u)}}function t(o){var d=function(f,u){if(typeof f!="object"||f===null)return f;var g=f[Symbol.toPrimitive];if(g!==void 0){var m=g.call(f,u);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(f)}(o,"string");return typeof d=="symbol"?d:String(d)}var n=e("buffer").Buffer,l=e("util").inspect,a=l&&l.custom||"inspect";h.exports=function(){function o(){(function(u,g){if(!(u instanceof g))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}var d,f;return d=o,(f=[{key:"push",value:function(u){var g={data:u,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(u){var g={data:u,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(u){if(this.length===0)return"";for(var g=this.head,m=""+g.data;g=g.next;)m+=u+g.data;return m}},{key:"concat",value:function(u){if(this.length===0)return n.alloc(0);for(var g,m,k,E=n.allocUnsafe(u>>>0),A=this.head,L=0;A;)g=A.data,m=E,k=L,n.prototype.copy.call(g,m,k),L+=A.data.length,A=A.next;return E}},{key:"consume",value:function(u,g){var m;return u<this.head.data.length?(m=this.head.data.slice(0,u),this.head.data=this.head.data.slice(u)):m=u===this.head.data.length?this.shift():g?this._getString(u):this._getBuffer(u),m}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(u){var g=this.head,m=1,k=g.data;for(u-=k.length;g=g.next;){var E=g.data,A=u>E.length?E.length:u;if(A===E.length?k+=E:k+=E.slice(0,u),(u-=A)==0){A===E.length?(++m,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=E.slice(A));break}++m}return this.length-=m,k}},{key:"_getBuffer",value:function(u){var g=n.allocUnsafe(u),m=this.head,k=1;for(m.data.copy(g),u-=m.data.length;m=m.next;){var E=m.data,A=u>E.length?E.length:u;if(E.copy(g,g.length-u,0,A),(u-=A)==0){A===E.length?(++k,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=E.slice(A));break}++k}return this.length-=k,g}},{key:a,value:function(u,g){return l(this,s(s({},g),{},{depth:0,customInspect:!1}))}}])&&r(d.prototype,f),Object.defineProperty(d,"prototype",{writable:!1}),o}()},{buffer:220,util:188}],485:[function(e,h,p){(function(c){(function(){function s(t,n){r(t,n),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,n){t.emit("error",n)}h.exports={destroy:function(t,n){var l=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(r,this,t)):c.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(d){!n&&d?l._writableState?l._writableState.errorEmitted?c.nextTick(i,l):(l._writableState.errorEmitted=!0,c.nextTick(s,l,d)):c.nextTick(s,l,d):n?(c.nextTick(i,l),n(d)):c.nextTick(i,l)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,n){var l=t._readableState,a=t._writableState;l&&l.autoDestroy||a&&a.autoDestroy?t.destroy(n):t.emit("error",n)}}}).call(this)}).call(this,e("_process"))},{_process:467}],486:[function(e,h,p){var c=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}h.exports=function i(r,t,n){if(typeof t=="function")return i(r,null,t);t||(t={}),n=function(A){var L=!1;return function(){if(!L){L=!0;for(var z=arguments.length,R=new Array(z),I=0;I<z;I++)R[I]=arguments[I];A.apply(this,R)}}}(n||s);var l=t.readable||t.readable!==!1&&r.readable,a=t.writable||t.writable!==!1&&r.writable,o=function(){r.writable||f()},d=r._writableState&&r._writableState.finished,f=function(){a=!1,d=!0,l||n.call(r)},u=r._readableState&&r._readableState.endEmitted,g=function(){l=!1,u=!0,a||n.call(r)},m=function(A){n.call(r,A)},k=function(){var A;return l&&!u?(r._readableState&&r._readableState.ended||(A=new c),n.call(r,A)):a&&!d?(r._writableState&&r._writableState.ended||(A=new c),n.call(r,A)):void 0},E=function(){r.req.on("finish",f)};return function(A){return A.setHeader&&typeof A.abort=="function"}(r)?(r.on("complete",f),r.on("abort",k),r.req?E():r.on("request",E)):a&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",g),r.on("finish",f),t.error!==!1&&r.on("error",m),r.on("close",k),function(){r.removeListener("complete",f),r.removeListener("abort",k),r.removeListener("request",E),r.req&&r.req.removeListener("finish",f),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",f),r.removeListener("end",g),r.removeListener("error",m),r.removeListener("close",k)}}},{"../../../errors":477}],487:[function(e,h,p){h.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(e,h,p){var c,s=e("../../../errors").codes,i=s.ERR_MISSING_ARGS,r=s.ERR_STREAM_DESTROYED;function t(d){if(d)throw d}function n(d,f,u,g){g=function(E){var A=!1;return function(){A||(A=!0,E.apply(void 0,arguments))}}(g);var m=!1;d.on("close",function(){m=!0}),c===void 0&&(c=e("./end-of-stream")),c(d,{readable:f,writable:u},function(E){if(E)return g(E);m=!0,g()});var k=!1;return function(E){if(!m&&!k)return k=!0,function(A){return A.setHeader&&typeof A.abort=="function"}(d)?d.abort():typeof d.destroy=="function"?d.destroy():void g(E||new r("pipe"))}}function l(d){d()}function a(d,f){return d.pipe(f)}function o(d){return d.length?typeof d[d.length-1]!="function"?t:d.pop():t}h.exports=function(){for(var d=arguments.length,f=new Array(d),u=0;u<d;u++)f[u]=arguments[u];var g,m=o(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new i("streams");var k=f.map(function(E,A){var L=A<f.length-1;return n(E,L,A>0,function(z){g||(g=z),z&&k.forEach(l),L||(k.forEach(l),m(g))})});return f.reduce(a)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(e,h,p){var c=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;h.exports={getHighWaterMark:function(s,i,r,t){var n=function(l,a,o){return l.highWaterMark!=null?l.highWaterMark:a?l[o]:null}(i,t,r);if(n!=null){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new c(t?r:"highWaterMark",n);return Math.floor(n)}return s.objectMode?16:16384}}},{"../../../errors":477}],490:[function(e,h,p){h.exports=e("events").EventEmitter},{events:422}],491:[function(e,h,p){(p=h.exports=e("./lib/_stream_readable.js")).Stream=p,p.Readable=p,p.Writable=e("./lib/_stream_writable.js"),p.Duplex=e("./lib/_stream_duplex.js"),p.Transform=e("./lib/_stream_transform.js"),p.PassThrough=e("./lib/_stream_passthrough.js"),p.finished=e("./lib/internal/streams/end-of-stream.js"),p.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(e,h,p){var c=function(s){var i=Object.prototype,r=i.hasOwnProperty,t=Object.defineProperty||function(x,w,N){x[w]=N.value},n=typeof Symbol=="function"?Symbol:{},l=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function d(x,w,N){return Object.defineProperty(x,w,{value:N,enumerable:!0,configurable:!0,writable:!0}),x[w]}try{d({},"")}catch{d=function(w,N,P){return w[N]=P}}function f(x,w,N,P){var D=w&&w.prototype instanceof m?w:m,V=Object.create(D.prototype),q=new j(P||[]);return t(V,"_invoke",{value:H(x,N,q)}),V}function u(x,w,N){try{return{type:"normal",arg:x.call(w,N)}}catch(P){return{type:"throw",arg:P}}}s.wrap=f;var g={};function m(){}function k(){}function E(){}var A={};d(A,l,function(){return this});var L=Object.getPrototypeOf,z=L&&L(L(b([])));z&&z!==i&&r.call(z,l)&&(A=z);var R=E.prototype=m.prototype=Object.create(A);function I(x){["next","throw","return"].forEach(function(w){d(x,w,function(N){return this._invoke(w,N)})})}function B(x,w){var N;t(this,"_invoke",{value:function(P,D){function V(){return new w(function(q,G){(function F(X,O,M,U){var K=u(x[X],x,O);if(K.type!=="throw"){var Q=K.arg,Y=Q.value;return Y&&typeof Y=="object"&&r.call(Y,"__await")?w.resolve(Y.__await).then(function(J){F("next",J,M,U)},function(J){F("throw",J,M,U)}):w.resolve(Y).then(function(J){Q.value=J,M(Q)},function(J){return F("throw",J,M,U)})}U(K.arg)})(P,D,q,G)})}return N=N?N.then(V,V):V()}})}function H(x,w,N){var P="suspendedStart";return function(D,V){if(P==="executing")throw new Error("Generator is already running");if(P==="completed"){if(D==="throw")throw V;return v()}for(N.method=D,N.arg=V;;){var q=N.delegate;if(q){var G=$(q,N);if(G){if(G===g)continue;return G}}if(N.method==="next")N.sent=N._sent=N.arg;else if(N.method==="throw"){if(P==="suspendedStart")throw P="completed",N.arg;N.dispatchException(N.arg)}else N.method==="return"&&N.abrupt("return",N.arg);P="executing";var F=u(x,w,N);if(F.type==="normal"){if(P=N.done?"completed":"suspendedYield",F.arg===g)continue;return{value:F.arg,done:N.done}}F.type==="throw"&&(P="completed",N.method="throw",N.arg=F.arg)}}}function $(x,w){var N=w.method,P=x.iterator[N];if(P===void 0)return w.delegate=null,N==="throw"&&x.iterator.return&&(w.method="return",w.arg=void 0,$(x,w),w.method==="throw")||N!=="return"&&(w.method="throw",w.arg=new TypeError("The iterator does not provide a '"+N+"' method")),g;var D=u(P,x.iterator,w.arg);if(D.type==="throw")return w.method="throw",w.arg=D.arg,w.delegate=null,g;var V=D.arg;return V?V.done?(w[x.resultName]=V.value,w.next=x.nextLoc,w.method!=="return"&&(w.method="next",w.arg=void 0),w.delegate=null,g):V:(w.method="throw",w.arg=new TypeError("iterator result is not an object"),w.delegate=null,g)}function C(x){var w={tryLoc:x[0]};1 in x&&(w.catchLoc=x[1]),2 in x&&(w.finallyLoc=x[2],w.afterLoc=x[3]),this.tryEntries.push(w)}function T(x){var w=x.completion||{};w.type="normal",delete w.arg,x.completion=w}function j(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(C,this),this.reset(!0)}function b(x){if(x){var w=x[l];if(w)return w.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var N=-1,P=function D(){for(;++N<x.length;)if(r.call(x,N))return D.value=x[N],D.done=!1,D;return D.value=void 0,D.done=!0,D};return P.next=P}}return{next:v}}function v(){return{value:void 0,done:!0}}return k.prototype=E,t(R,"constructor",{value:E,configurable:!0}),t(E,"constructor",{value:k,configurable:!0}),k.displayName=d(E,o,"GeneratorFunction"),s.isGeneratorFunction=function(x){var w=typeof x=="function"&&x.constructor;return!!w&&(w===k||(w.displayName||w.name)==="GeneratorFunction")},s.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,E):(x.__proto__=E,d(x,o,"GeneratorFunction")),x.prototype=Object.create(R),x},s.awrap=function(x){return{__await:x}},I(B.prototype),d(B.prototype,a,function(){return this}),s.AsyncIterator=B,s.async=function(x,w,N,P,D){D===void 0&&(D=Promise);var V=new B(f(x,w,N,P),D);return s.isGeneratorFunction(w)?V:V.next().then(function(q){return q.done?q.value:V.next()})},I(R),d(R,o,"Generator"),d(R,l,function(){return this}),d(R,"toString",function(){return"[object Generator]"}),s.keys=function(x){var w=Object(x),N=[];for(var P in w)N.push(P);return N.reverse(),function D(){for(;N.length;){var V=N.pop();if(V in w)return D.value=V,D.done=!1,D}return D.done=!0,D}},s.values=b,j.prototype={constructor:j,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!x)for(var w in this)w.charAt(0)==="t"&&r.call(this,w)&&!isNaN(+w.slice(1))&&(this[w]=void 0)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var w=this;function N(F,X){return V.type="throw",V.arg=x,w.next=F,X&&(w.method="next",w.arg=void 0),!!X}for(var P=this.tryEntries.length-1;P>=0;--P){var D=this.tryEntries[P],V=D.completion;if(D.tryLoc==="root")return N("end");if(D.tryLoc<=this.prev){var q=r.call(D,"catchLoc"),G=r.call(D,"finallyLoc");if(q&&G){if(this.prev<D.catchLoc)return N(D.catchLoc,!0);if(this.prev<D.finallyLoc)return N(D.finallyLoc)}else if(q){if(this.prev<D.catchLoc)return N(D.catchLoc,!0)}else{if(!G)throw new Error("try statement without catch or finally");if(this.prev<D.finallyLoc)return N(D.finallyLoc)}}}},abrupt:function(x,w){for(var N=this.tryEntries.length-1;N>=0;--N){var P=this.tryEntries[N];if(P.tryLoc<=this.prev&&r.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var D=P;break}}D&&(x==="break"||x==="continue")&&D.tryLoc<=w&&w<=D.finallyLoc&&(D=null);var V=D?D.completion:{};return V.type=x,V.arg=w,D?(this.method="next",this.next=D.finallyLoc,g):this.complete(V)},complete:function(x,w){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&w&&(this.next=w),g},finish:function(x){for(var w=this.tryEntries.length-1;w>=0;--w){var N=this.tryEntries[w];if(N.finallyLoc===x)return this.complete(N.completion,N.afterLoc),T(N),g}},catch:function(x){for(var w=this.tryEntries.length-1;w>=0;--w){var N=this.tryEntries[w];if(N.tryLoc===x){var P=N.completion;if(P.type==="throw"){var D=P.arg;T(N)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(x,w,N){return this.delegate={iterator:b(x),resultName:w,nextLoc:N},this.method==="next"&&(this.arg=void 0),g}},s}(typeof h=="object"?h.exports:{});try{regeneratorRuntime=c}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},{}],493:[function(e,h,p){var c=e("buffer").Buffer,s=e("inherits"),i=e("hash-base"),r=new Array(16),t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],o=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function f(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function u(L,z){return L<<z|L>>>32-z}function g(L,z,R,I,B,H,$,C){return u(L+(z^R^I)+H+$|0,C)+B|0}function m(L,z,R,I,B,H,$,C){return u(L+(z&R|~z&I)+H+$|0,C)+B|0}function k(L,z,R,I,B,H,$,C){return u(L+((z|~R)^I)+H+$|0,C)+B|0}function E(L,z,R,I,B,H,$,C){return u(L+(z&I|R&~I)+H+$|0,C)+B|0}function A(L,z,R,I,B,H,$,C){return u(L+(z^(R|~I))+H+$|0,C)+B|0}s(f,i),f.prototype._update=function(){for(var L=r,z=0;z<16;++z)L[z]=this._block.readInt32LE(4*z);for(var R=0|this._a,I=0|this._b,B=0|this._c,H=0|this._d,$=0|this._e,C=0|this._a,T=0|this._b,j=0|this._c,b=0|this._d,v=0|this._e,x=0;x<80;x+=1){var w,N;x<16?(w=g(R,I,B,H,$,L[t[x]],o[0],l[x]),N=A(C,T,j,b,v,L[n[x]],d[0],a[x])):x<32?(w=m(R,I,B,H,$,L[t[x]],o[1],l[x]),N=E(C,T,j,b,v,L[n[x]],d[1],a[x])):x<48?(w=k(R,I,B,H,$,L[t[x]],o[2],l[x]),N=k(C,T,j,b,v,L[n[x]],d[2],a[x])):x<64?(w=E(R,I,B,H,$,L[t[x]],o[3],l[x]),N=m(C,T,j,b,v,L[n[x]],d[3],a[x])):(w=A(R,I,B,H,$,L[t[x]],o[4],l[x]),N=g(C,T,j,b,v,L[n[x]],d[4],a[x])),R=$,$=H,H=u(B,10),B=I,I=w,C=v,v=b,b=u(j,10),j=T,T=N}var P=this._b+B+b|0;this._b=this._c+H+v|0,this._c=this._d+$+C|0,this._d=this._e+R+T|0,this._e=this._a+I+j|0,this._a=P},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var L=c.alloc?c.alloc(20):new c(20);return L.writeInt32LE(this._a,0),L.writeInt32LE(this._b,4),L.writeInt32LE(this._c,8),L.writeInt32LE(this._d,12),L.writeInt32LE(this._e,16),L},h.exports=f},{buffer:220,"hash-base":425,inherits:440}],494:[function(e,h,p){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var c=e("buffer"),s=c.Buffer;function i(t,n){for(var l in t)n[l]=t[l]}function r(t,n,l){return s(t,n,l)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?h.exports=c:(i(c,p),p.Buffer=r),r.prototype=Object.create(s.prototype),i(s,r),r.from=function(t,n,l){if(typeof t=="number")throw new TypeError("Argument must not be a number");return s(t,n,l)},r.alloc=function(t,n,l){if(typeof t!="number")throw new TypeError("Argument must be a number");var a=s(t);return n!==void 0?typeof l=="string"?a.fill(n,l):a.fill(n):a.fill(0),a},r.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(t)}},{buffer:220}],495:[function(e,h,p){(function(c){(function(){var s,i=e("buffer"),r=i.Buffer,t={};for(s in i)i.hasOwnProperty(s)&&s!=="SlowBuffer"&&s!=="Buffer"&&(t[s]=i[s]);var n=t.Buffer={};for(s in r)r.hasOwnProperty(s)&&s!=="allocUnsafe"&&s!=="allocUnsafeSlow"&&(n[s]=r[s]);if(t.Buffer.prototype=r.prototype,n.from&&n.from!==Uint8Array.from||(n.from=function(l,a,o){if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof l);if(l&&l.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);return r(l,a,o)}),n.alloc||(n.alloc=function(l,a,o){if(typeof l!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof l);if(l<0||l>=2*(1<<30))throw new RangeError('The value "'+l+'" is invalid for option "size"');var d=r(l);return a&&a.length!==0?typeof o=="string"?d.fill(a,o):d.fill(a):d.fill(0),d}),!t.kStringMaxLength)try{t.kStringMaxLength=c.binding("buffer").kStringMaxLength}catch{}t.constants||(t.constants={MAX_LENGTH:t.kMaxLength},t.kStringMaxLength&&(t.constants.MAX_STRING_LENGTH=t.kStringMaxLength)),h.exports=t}).call(this)}).call(this,e("_process"))},{_process:467,buffer:220}],496:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0});const c=e("xmlchars/xml/1.0/ed5"),s=e("xmlchars/xml/1.1/ed2"),i=e("xmlchars/xmlns/1.0/ed3");var r=c.isS,t=c.isChar,n=c.isNameStartChar,l=c.isNameChar,a=c.S_LIST,o=c.NAME_RE,d=s.isChar,f=i.isNCNameStartChar,u=i.isNCNameChar,g=i.NC_NAME_RE;const m="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/2000/xmlns/",E={__proto__:null,xml:m,xmlns:k},A={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},L=b=>b===34||b===39,z=[34,39],R=[...z,91,62],I=[...z,60,93],B=[61,63,...a],H=[...a,62,38,60];function $(b,v,x){switch(v){case"xml":x!==m&&b.fail(`xml prefix must be bound to ${m}.`);break;case"xmlns":x!==k&&b.fail(`xmlns prefix must be bound to ${k}.`)}switch(x){case k:b.fail(v===""?`the default namespace may not be set to ${x}.`:`may not assign a prefix (even "xmlns") to the URI ${k}.`);break;case m:switch(v){case"xml":break;case"":b.fail(`the default namespace may not be set to ${x}.`);break;default:b.fail("may not assign the xml namespace to another prefix.")}}}const C=b=>g.test(b),T=b=>o.test(b);p.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const j={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};p.SaxesParser=class{constructor(b){this.opt=b??{},this.fragmentOpt=!!this.opt.fragment;const v=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,v){this.nameStartCheck=f,this.nameCheck=u,this.isName=C,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},E);const x=this.opt.additionalNamespaces;x!=null&&(function(w,N){for(const P of Object.keys(N))$(w,P,N[P])}(this,x),Object.assign(this.ns,x))}else this.nameStartCheck=n,this.nameCheck=l,this.isName=T,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var b;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:v}=this;this.state=v?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=v,this.xmlDeclPossible=!v,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:x}=this.opt;if(x===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");x="1.0"}this.setXMLVersion(x),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(A),(b=this.readyHandler)===null||b===void 0||b.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(b,v){this[j[b]]=v}off(b){this[j[b]]=void 0}makeError(b){var v;let x=(v=this.fileName)!==null&&v!==void 0?v:"";return this.trackPosition&&(x.length>0&&(x+=":"),x+=`${this.line}:${this.column}`),x.length>0&&(x+=": "),new Error(x+b)}fail(b){const v=this.makeError(b),x=this.errorHandler;if(x===void 0)throw v;return x(v),this}write(b){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let v=!1;b===null?(v=!0,b=""):typeof b=="object"&&(b=b.toString()),this.carriedFromPrevious!==void 0&&(b=`${this.carriedFromPrevious}${b}`,this.carriedFromPrevious=void 0);let x=b.length;const w=b.charCodeAt(x-1);!v&&(w===13||w>=55296&&w<=56319)&&(this.carriedFromPrevious=b[x-1],x--,b=b.slice(0,x));const{stateTable:N}=this;for(this.chunk=b,this.i=0;this.i<x;)N[this.state].call(this);return this.chunkPosition+=x,v?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:b,i:v}=this;if(this.prevI=v,this.i=v+1,v>=b.length)return-1;const x=b.charCodeAt(v);if(this.column++,x<55296){if(x>=32||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return b.charCodeAt(v+1)===10&&(this.i=v+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const w=65536+1024*(x-55296)+(b.charCodeAt(v+1)-56320);return this.i=v+2,w>1114111&&this.fail("disallowed character."),w}getCode11(){const{chunk:b,i:v}=this;if(this.prevI=v,this.i=v+1,v>=b.length)return-1;const x=b.charCodeAt(v);if(this.column++,x<55296){if(x>31&&x<127||x>159&&x!==8232||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const N=b.charCodeAt(v+1);N!==10&&N!==133||(this.i=v+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const w=65536+1024*(x-55296)+(b.charCodeAt(v+1)-56320);return this.i=v+2,w>1114111&&this.fail("disallowed character."),w}getCodeNorm(){const b=this.getCode();return b===-2?10:b}unget(){this.i=this.prevI,this.column--}captureTo(b){let{i:v}=this;const{chunk:x}=this;for(;;){const w=this.getCode(),N=w===-2,P=N?10:w;if(P===-1||b.includes(P))return this.text+=x.slice(v,this.prevI),P;N&&(this.text+=x.slice(v,this.prevI)+`
`,v=this.i)}}captureToChar(b){let{i:v}=this;const{chunk:x}=this;for(;;){let w=this.getCode();switch(w){case-2:this.text+=x.slice(v,this.prevI)+`
`,v=this.i,w=10;break;case-1:return this.text+=x.slice(v),!1}if(w===b)return this.text+=x.slice(v,this.prevI),!0}}captureNameChars(){const{chunk:b,i:v}=this;for(;;){const x=this.getCode();if(x===-1)return this.name+=b.slice(v),-1;if(!l(x))return this.name+=b.slice(v,this.prevI),x===-2?10:x}}skipSpaces(){for(;;){const b=this.getCodeNorm();if(b===-1||!r(b))return b}}setXMLVersion(b){this.currentXMLVersion=b,b==="1.0"?(this.isChar=t,this.getCode=this.getCode10):(this.isChar=d,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const b=this.i,v=this.skipSpaces();switch(this.prevI!==b&&(this.xmlDeclPossible=!1),v){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var b;const v=this.captureTo(R);switch(v){case 62:(b=this.doctypeHandler)===null||b===void 0||b.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(v),v===91?this.state=4:L(v)&&(this.state=3,this.q=v)}}sDoctypeQuote(){const b=this.q;this.captureToChar(b)&&(this.text+=String.fromCodePoint(b),this.q=null,this.state=2)}sDTD(){const b=this.captureTo(I);b!==-1&&(this.text+=String.fromCodePoint(b),b===93?this.state=2:b===60?this.state=6:L(b)&&(this.state=5,this.q=b))}sDTDQuoted(){const b=this.q;this.captureToChar(b)&&(this.text+=String.fromCodePoint(b),this.state=4,this.q=null)}sDTDOpenWaka(){const b=this.getCodeNorm();switch(this.text+=String.fromCodePoint(b),b){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const b=String.fromCodePoint(this.getCodeNorm()),v=this.openWakaBang+=b;this.text+=b,v!=="-"&&(this.state=v==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const b=this.getCodeNorm();this.text+=String.fromCodePoint(b),this.state=b===45?10:8}sDTDCommentEnded(){const b=this.getCodeNorm();this.text+=String.fromCodePoint(b),b===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const b=this.getCodeNorm();this.text+=String.fromCodePoint(b),b===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:b}=this;const{chunk:v}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=v.slice(b,this.prevI)+`
`,b=this.i;break;case 59:{const{entityReturnState:x}=this,w=this.entity+v.slice(b,this.prevI);let N;this.state=x,w===""?(this.fail("empty entity name."),N="&;"):(N=this.parseEntity(w),this.entity=""),x===13&&this.textHandler===void 0||(this.text+=N);break e}case-1:this.entity+=v.slice(b);break e}}sOpenWaka(){const b=this.getCode();if(n(b))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(b){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var b;const v=this.getCodeNorm();v===45?(this.state=19,(b=this.commentHandler)===null||b===void 0||b.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(v),this.state=17)}sCommentEnded(){const b=this.getCodeNorm();b!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(b),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const b=this.getCodeNorm();b===93?this.state=22:(this.text+="]"+String.fromCodePoint(b),this.state=20)}sCDataEnding2(){var b;const v=this.getCodeNorm();switch(v){case 62:(b=this.cdataHandler)===null||b===void 0||b.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(v),this.state=20}}sPIFirstChar(){const b=this.getCodeNorm();this.nameStartCheck(b)?(this.piTarget+=String.fromCodePoint(b),this.state=24):b===63||r(b)?(this.fail("processing instruction without a target."),this.state=b===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(b),this.state=24)}sPIRest(){const{chunk:b,i:v}=this;for(;;){const x=this.getCodeNorm();if(x===-1)return void(this.piTarget+=b.slice(v));if(!this.nameCheck(x)){this.piTarget+=b.slice(v,this.prevI);const w=x===63;w||r(x)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=w?33:27):this.state=w?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(x));break}}}sPIBody(){if(this.text.length===0){const b=this.getCodeNorm();b===63?this.state=26:r(b)||(this.text=String.fromCodePoint(b))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var b;const v=this.getCodeNorm();if(v===62){const{piTarget:x}=this;x.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(b=this.piHandler)===null||b===void 0||b.call(this,{target:x,body:this.text}),this.piTarget=this.text="",this.state=13}else v===63?this.text+="?":(this.text+="?"+String.fromCodePoint(v),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const b=this.skipSpaces();b!==63?b!==-1&&(this.state=28,this.name=String.fromCodePoint(b)):this.state=33}sXMLDeclName(){const b=this.captureTo(B);if(b===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(r(b)||b===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=b===61?30:29}}sXMLDeclEq(){const b=this.getCodeNorm();if(b===63)return this.state=33,void this.fail("XML declaration is incomplete.");r(b)||(b!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const b=this.getCodeNorm();if(b===63)return this.state=33,void this.fail("XML declaration is incomplete.");r(b)||(L(b)?this.q=b:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const b=this.captureTo([this.q,63]);if(b===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(b===-1)return;const v=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const x=v;this.xmlDecl.version=x,/^1\.[0-9]+$/.test(x)?this.opt.forceXMLVersion||this.setXMLVersion(x):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(v)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=v;break;case"standalone":v!=="yes"&&v!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=v}this.name="",this.state=32}sXMLDeclSeparator(){const b=this.getCodeNorm();b!==63?(r(b)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var b;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(b=this.xmldeclHandler)===null||b===void 0||b.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var b;const v=this.captureNameChars();if(v===-1)return;const x=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=x.ns=Object.create(null)),(b=this.openTagStartHandler)===null||b===void 0||b.call(this,x),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),v){case 62:this.openTag();break;case 47:this.state=35;break;default:r(v)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const b=this.skipSpaces();b!==-1&&(n(b)?(this.unget(),this.state=37):b===62?this.openTag():b===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const b=this.captureNameChars();b===61?this.state=39:r(b)?this.state=38:b===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):b!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const b=this.skipSpaces();switch(b){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",b===62?this.openTag():n(b)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const b=this.getCodeNorm();L(b)?(this.q=b,this.state=40):r(b)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:b,chunk:v}=this;let{i:x}=this;for(;;)switch(this.getCode()){case b:return this.pushAttrib(this.name,this.text+v.slice(x,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=v.slice(x,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=v.slice(x,this.prevI)+" ",x=this.i;break;case 60:return this.text+=v.slice(x,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=v.slice(x))}}sAttribValueClosed(){const b=this.getCodeNorm();r(b)?this.state=36:b===62?this.openTag():b===47?this.state=35:n(b)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const b=this.captureTo(H);switch(b){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",b===62?this.openTag():this.state=36}}sCloseTag(){const b=this.captureNameChars();b===62?this.closeTag():r(b)?this.state=44:b!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:b,forbiddenState:v}=this;const{chunk:x,textHandler:w}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,w!==void 0){const{text:N}=this,P=x.slice(b,this.prevI);N.length!==0?(w(N+P),this.text=""):P.length!==0&&w(P)}v=0;break e;case 38:this.state=14,this.entityReturnState=13,w!==void 0&&(this.text+=x.slice(b,this.prevI)),v=0;break e;case 93:switch(v){case 0:v=1;break;case 1:v=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:v===2&&this.fail('the string "]]>" is disallowed in char data.'),v=0;break;case-2:w!==void 0&&(this.text+=x.slice(b,this.prevI)+`
`),b=this.i,v=0;break;case-1:w!==void 0&&(this.text+=x.slice(b));break e;default:v=0}this.forbiddenState=v}handleTextOutsideRoot(){let{i:b}=this;const{chunk:v,textHandler:x}=this;let w=!1;e:for(;;){const N=this.getCode();switch(N){case 60:if(this.state=15,x!==void 0){const{text:P}=this,D=v.slice(b,this.prevI);P.length!==0?(x(P+D),this.text=""):D.length!==0&&x(D)}break e;case 38:this.state=14,this.entityReturnState=13,x!==void 0&&(this.text+=v.slice(b,this.prevI)),w=!0;break e;case-2:x!==void 0&&(this.text+=v.slice(b,this.prevI)+`
`),b=this.i;break;case-1:x!==void 0&&(this.text+=v.slice(b));break e;default:r(N)||(w=!0)}}w&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(b,v){var x;const{prefix:w,local:N}=this.qname(b),P={name:b,prefix:w,local:N,value:v};if(this.attribList.push(P),(x=this.attributeHandler)===null||x===void 0||x.call(this,P),w==="xmlns"){const D=v.trim();this.currentXMLVersion==="1.0"&&D===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[N]=D,$(this,N,D)}else if(b==="xmlns"){const D=v.trim();this.topNS[""]=D,$(this,"",D)}}pushAttribPlain(b,v){var x;const w={name:b,value:v};this.attribList.push(w),(x=this.attributeHandler)===null||x===void 0||x.call(this,w)}end(){var b,v;this.sawRoot||this.fail("document must contain a root element.");const{tags:x}=this;for(;x.length>0;){const N=x.pop();this.fail("unclosed tag: "+N.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:w}=this;return w.length!==0&&((b=this.textHandler)===null||b===void 0||b.call(this,w),this.text=""),this._closed=!0,(v=this.endHandler)===null||v===void 0||v.call(this),this._init(),this}resolve(b){var v,x;let w=this.topNS[b];if(w!==void 0)return w;const{tags:N}=this;for(let P=N.length-1;P>=0;P--)if(w=N[P].ns[b],w!==void 0)return w;return w=this.ns[b],w!==void 0?w:(x=(v=this.opt).resolvePrefix)===null||x===void 0?void 0:x.call(v,b)}qname(b){const v=b.indexOf(":");if(v===-1)return{prefix:"",local:b};const x=b.slice(v+1),w=b.slice(0,v);return(w===""||x===""||x.includes(":"))&&this.fail(`malformed name: ${b}.`),{prefix:w,local:x}}processAttribsNS(){var b;const{attribList:v}=this,x=this.tag;{const{prefix:P,local:D}=this.qname(x.name);x.prefix=P,x.local=D;const V=x.uri=(b=this.resolve(P))!==null&&b!==void 0?b:"";P!==""&&(P==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),V===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(P)}.`),x.uri=P))}if(v.length===0)return;const{attributes:w}=x,N=new Set;for(const P of v){const{name:D,prefix:V,local:q}=P;let G,F;V===""?(G=D==="xmlns"?k:"",F=D):(G=this.resolve(V),G===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(V)}.`),G=V),F=`{${G}}${q}`),N.has(F)&&this.fail(`duplicate attribute: ${F}.`),N.add(F),P.uri=G,w[D]=P}this.attribList=[]}processAttribsPlain(){const{attribList:b}=this,v=this.tag.attributes;for(const{name:x,value:w}of b)v[x]!==void 0&&this.fail(`duplicate attribute: ${x}.`),v[x]=w;this.attribList=[]}openTag(){var b;this.processAttribs();const{tags:v}=this,x=this.tag;x.isSelfClosing=!1,(b=this.openTagHandler)===null||b===void 0||b.call(this,x),v.push(x),this.state=13,this.name=""}openSelfClosingTag(){var b,v,x;this.processAttribs();const{tags:w}=this,N=this.tag;N.isSelfClosing=!0,(b=this.openTagHandler)===null||b===void 0||b.call(this,N),(v=this.closeTagHandler)===null||v===void 0||v.call(this,N),(this.tag=(x=w[w.length-1])!==null&&x!==void 0?x:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:b,name:v}=this;if(this.state=13,this.name="",v==="")return this.fail("weird empty close tag."),void(this.text+="</>");const x=this.closeTagHandler;let w=b.length;for(;w-- >0;){const N=this.tag=b.pop();if(this.topNS=N.ns,x?.(N),N.name===v)break;this.fail("unexpected close tag.")}w===0?this.closedRoot=!0:w<0&&(this.fail(`unmatched closing tag: ${v}.`),this.text+=`</${v}>`)}parseEntity(b){if(b[0]!=="#"){const x=this.ENTITIES[b];return x!==void 0?x:(this.fail(this.isName(b)?"undefined entity.":"disallowed character in entity name."),`&${b};`)}let v=NaN;return b[1]==="x"&&/^#x[0-9a-f]+$/i.test(b)?v=parseInt(b.slice(2),16):/^#[0-9]+$/.test(b)&&(v=parseInt(b.slice(1),10)),this.isChar(v)?String.fromCodePoint(v):(this.fail("malformed character entity."),`&${b};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(e,h,p){var c=e("safe-buffer").Buffer;function s(i,r){this._block=c.alloc(i),this._finalSize=r,this._blockSize=i,this._len=0}s.prototype.update=function(i,r){typeof i=="string"&&(r=r||"utf8",i=c.from(i,r));for(var t=this._block,n=this._blockSize,l=i.length,a=this._len,o=0;o<l;){for(var d=a%n,f=Math.min(l-o,n-d),u=0;u<f;u++)t[d+u]=i[o+u];o+=f,(a+=f)%n==0&&this._update(t)}return this._len+=l,this},s.prototype.digest=function(i){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var t=8*this._len;if(t<=4294967295)this._block.writeUInt32BE(t,this._blockSize-4);else{var n=(4294967295&t)>>>0,l=(t-n)/4294967296;this._block.writeUInt32BE(l,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return i?a.toString(i):a},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},h.exports=s},{"safe-buffer":494}],498:[function(e,h,p){var c=h.exports=function(s){s=s.toLowerCase();var i=c[s];if(!i)throw new Error(s+" is not supported (we accept pull requests)");return new i};c.sha=e("./sha"),c.sha1=e("./sha1"),c.sha224=e("./sha224"),c.sha256=e("./sha256"),c.sha384=e("./sha384"),c.sha512=e("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(e,h,p){var c=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],t=new Array(80);function n(){this.init(),this._w=t,s.call(this,64,56)}function l(o){return o<<30|o>>>2}function a(o,d,f,u){return o===0?d&f|~d&u:o===2?d&f|d&u|f&u:d^f^u}c(n,s),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(o){for(var d,f=this._w,u=0|this._a,g=0|this._b,m=0|this._c,k=0|this._d,E=0|this._e,A=0;A<16;++A)f[A]=o.readInt32BE(4*A);for(;A<80;++A)f[A]=f[A-3]^f[A-8]^f[A-14]^f[A-16];for(var L=0;L<80;++L){var z=~~(L/20),R=0|((d=u)<<5|d>>>27)+a(z,g,m,k)+E+f[L]+r[z];E=k,k=m,m=l(g),g=u,u=R}this._a=u+this._a|0,this._b=g+this._b|0,this._c=m+this._c|0,this._d=k+this._d|0,this._e=E+this._e|0},n.prototype._hash=function(){var o=i.allocUnsafe(20);return o.writeInt32BE(0|this._a,0),o.writeInt32BE(0|this._b,4),o.writeInt32BE(0|this._c,8),o.writeInt32BE(0|this._d,12),o.writeInt32BE(0|this._e,16),o},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(e,h,p){var c=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],t=new Array(80);function n(){this.init(),this._w=t,s.call(this,64,56)}function l(d){return d<<5|d>>>27}function a(d){return d<<30|d>>>2}function o(d,f,u,g){return d===0?f&u|~f&g:d===2?f&u|f&g|u&g:f^u^g}c(n,s),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(d){for(var f,u=this._w,g=0|this._a,m=0|this._b,k=0|this._c,E=0|this._d,A=0|this._e,L=0;L<16;++L)u[L]=d.readInt32BE(4*L);for(;L<80;++L)u[L]=(f=u[L-3]^u[L-8]^u[L-14]^u[L-16])<<1|f>>>31;for(var z=0;z<80;++z){var R=~~(z/20),I=l(g)+o(R,m,k,E)+A+u[z]+r[R]|0;A=E,E=k,k=a(m),m=g,g=I}this._a=g+this._a|0,this._b=m+this._b|0,this._c=k+this._c|0,this._d=E+this._d|0,this._e=A+this._e|0},n.prototype._hash=function(){var d=i.allocUnsafe(20);return d.writeInt32BE(0|this._a,0),d.writeInt32BE(0|this._b,4),d.writeInt32BE(0|this._c,8),d.writeInt32BE(0|this._d,12),d.writeInt32BE(0|this._e,16),d},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(e,h,p){var c=e("inherits"),s=e("./sha256"),i=e("./hash"),r=e("safe-buffer").Buffer,t=new Array(64);function n(){this.init(),this._w=t,i.call(this,64,56)}c(n,s),n.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},n.prototype._hash=function(){var l=r.allocUnsafe(28);return l.writeInt32BE(this._a,0),l.writeInt32BE(this._b,4),l.writeInt32BE(this._c,8),l.writeInt32BE(this._d,12),l.writeInt32BE(this._e,16),l.writeInt32BE(this._f,20),l.writeInt32BE(this._g,24),l},h.exports=n},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(e,h,p){var c=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],t=new Array(64);function n(){this.init(),this._w=t,s.call(this,64,56)}function l(u,g,m){return m^u&(g^m)}function a(u,g,m){return u&g|m&(u|g)}function o(u){return(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10)}function d(u){return(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7)}function f(u){return(u>>>7|u<<25)^(u>>>18|u<<14)^u>>>3}c(n,s),n.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},n.prototype._update=function(u){for(var g,m=this._w,k=0|this._a,E=0|this._b,A=0|this._c,L=0|this._d,z=0|this._e,R=0|this._f,I=0|this._g,B=0|this._h,H=0;H<16;++H)m[H]=u.readInt32BE(4*H);for(;H<64;++H)m[H]=0|(((g=m[H-2])>>>17|g<<15)^(g>>>19|g<<13)^g>>>10)+m[H-7]+f(m[H-15])+m[H-16];for(var $=0;$<64;++$){var C=B+d(z)+l(z,R,I)+r[$]+m[$]|0,T=o(k)+a(k,E,A)|0;B=I,I=R,R=z,z=L+C|0,L=A,A=E,E=k,k=C+T|0}this._a=k+this._a|0,this._b=E+this._b|0,this._c=A+this._c|0,this._d=L+this._d|0,this._e=z+this._e|0,this._f=R+this._f|0,this._g=I+this._g|0,this._h=B+this._h|0},n.prototype._hash=function(){var u=i.allocUnsafe(32);return u.writeInt32BE(this._a,0),u.writeInt32BE(this._b,4),u.writeInt32BE(this._c,8),u.writeInt32BE(this._d,12),u.writeInt32BE(this._e,16),u.writeInt32BE(this._f,20),u.writeInt32BE(this._g,24),u.writeInt32BE(this._h,28),u},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(e,h,p){var c=e("inherits"),s=e("./sha512"),i=e("./hash"),r=e("safe-buffer").Buffer,t=new Array(160);function n(){this.init(),this._w=t,i.call(this,128,112)}c(n,s),n.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},n.prototype._hash=function(){var l=r.allocUnsafe(48);function a(o,d,f){l.writeInt32BE(o,f),l.writeInt32BE(d,f+4)}return a(this._ah,this._al,0),a(this._bh,this._bl,8),a(this._ch,this._cl,16),a(this._dh,this._dl,24),a(this._eh,this._el,32),a(this._fh,this._fl,40),l},h.exports=n},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(e,h,p){var c=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],t=new Array(160);function n(){this.init(),this._w=t,s.call(this,128,112)}function l(E,A,L){return L^E&(A^L)}function a(E,A,L){return E&A|L&(E|A)}function o(E,A){return(E>>>28|A<<4)^(A>>>2|E<<30)^(A>>>7|E<<25)}function d(E,A){return(E>>>14|A<<18)^(E>>>18|A<<14)^(A>>>9|E<<23)}function f(E,A){return(E>>>1|A<<31)^(E>>>8|A<<24)^E>>>7}function u(E,A){return(E>>>1|A<<31)^(E>>>8|A<<24)^(E>>>7|A<<25)}function g(E,A){return(E>>>19|A<<13)^(A>>>29|E<<3)^E>>>6}function m(E,A){return(E>>>19|A<<13)^(A>>>29|E<<3)^(E>>>6|A<<26)}function k(E,A){return E>>>0<A>>>0?1:0}c(n,s),n.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},n.prototype._update=function(E){for(var A=this._w,L=0|this._ah,z=0|this._bh,R=0|this._ch,I=0|this._dh,B=0|this._eh,H=0|this._fh,$=0|this._gh,C=0|this._hh,T=0|this._al,j=0|this._bl,b=0|this._cl,v=0|this._dl,x=0|this._el,w=0|this._fl,N=0|this._gl,P=0|this._hl,D=0;D<32;D+=2)A[D]=E.readInt32BE(4*D),A[D+1]=E.readInt32BE(4*D+4);for(;D<160;D+=2){var V=A[D-30],q=A[D-30+1],G=f(V,q),F=u(q,V),X=g(V=A[D-4],q=A[D-4+1]),O=m(q,V),M=A[D-14],U=A[D-14+1],K=A[D-32],Q=A[D-32+1],Y=F+U|0,J=G+M+k(Y,F)|0;J=(J=J+X+k(Y=Y+O|0,O)|0)+K+k(Y=Y+Q|0,Q)|0,A[D]=J,A[D+1]=Y}for(var ae=0;ae<160;ae+=2){J=A[ae],Y=A[ae+1];var ie=a(L,z,R),Z=a(T,j,b),ne=o(L,T),re=o(T,L),ue=d(B,x),ce=d(x,B),te=r[ae],de=r[ae+1],le=l(B,H,$),ve=l(x,w,N),we=P+ce|0,Se=C+ue+k(we,P)|0;Se=(Se=(Se=Se+le+k(we=we+ve|0,ve)|0)+te+k(we=we+de|0,de)|0)+J+k(we=we+Y|0,Y)|0;var _e=re+Z|0,Pe=ne+ie+k(_e,re)|0;C=$,P=N,$=H,N=w,H=B,w=x,B=I+Se+k(x=v+we|0,v)|0,I=R,v=b,R=z,b=j,z=L,j=T,L=Se+Pe+k(T=we+_e|0,we)|0}this._al=this._al+T|0,this._bl=this._bl+j|0,this._cl=this._cl+b|0,this._dl=this._dl+v|0,this._el=this._el+x|0,this._fl=this._fl+w|0,this._gl=this._gl+N|0,this._hl=this._hl+P|0,this._ah=this._ah+L+k(this._al,T)|0,this._bh=this._bh+z+k(this._bl,j)|0,this._ch=this._ch+R+k(this._cl,b)|0,this._dh=this._dh+I+k(this._dl,v)|0,this._eh=this._eh+B+k(this._el,x)|0,this._fh=this._fh+H+k(this._fl,w)|0,this._gh=this._gh+$+k(this._gl,N)|0,this._hh=this._hh+C+k(this._hl,P)|0},n.prototype._hash=function(){var E=i.allocUnsafe(64);function A(L,z,R){E.writeInt32BE(L,R),E.writeInt32BE(z,R+4)}return A(this._ah,this._al,0),A(this._bh,this._bl,8),A(this._ch,this._cl,16),A(this._dh,this._dl,24),A(this._eh,this._el,32),A(this._fh,this._fl,40),A(this._gh,this._gl,48),A(this._hh,this._hl,56),E},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(e,h,p){h.exports=s;var c=e("events").EventEmitter;function s(){c.call(this)}e("inherits")(s,c),s.Readable=e("readable-stream/readable.js"),s.Writable=e("readable-stream/writable.js"),s.Duplex=e("readable-stream/duplex.js"),s.Transform=e("readable-stream/transform.js"),s.PassThrough=e("readable-stream/passthrough.js"),s.Stream=s,s.prototype.pipe=function(i,r){var t=this;function n(g){i.writable&&i.write(g)===!1&&t.pause&&t.pause()}function l(){t.readable&&t.resume&&t.resume()}t.on("data",n),i.on("drain",l),i._isStdio||r&&r.end===!1||(t.on("end",o),t.on("close",d));var a=!1;function o(){a||(a=!0,i.end())}function d(){a||(a=!0,typeof i.destroy=="function"&&i.destroy())}function f(g){if(u(),c.listenerCount(this,"error")===0)throw g}function u(){t.removeListener("data",n),i.removeListener("drain",l),t.removeListener("end",o),t.removeListener("close",d),t.removeListener("error",f),i.removeListener("error",f),t.removeListener("end",u),t.removeListener("close",u),i.removeListener("close",u)}return t.on("error",f),i.on("error",f),t.on("end",u),t.on("close",u),i.on("close",u),i.emit("pipe",t),i}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(e,h,p){var c={}.toString;h.exports=Array.isArray||function(s){return c.call(s)=="[object Array]"}},{}],507:[function(e,h,p){h.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(e,h,p){var c=e("process-nextick-args"),s=Object.keys||function(u){var g=[];for(var m in u)g.push(m);return g};h.exports=o;var i=Object.create(e("core-util-is"));i.inherits=e("inherits");var r=e("./_stream_readable"),t=e("./_stream_writable");i.inherits(o,r);for(var n=s(t.prototype),l=0;l<n.length;l++){var a=n[l];o.prototype[a]||(o.prototype[a]=t.prototype[a])}function o(u){if(!(this instanceof o))return new o(u);r.call(this,u),t.call(this,u),u&&u.readable===!1&&(this.readable=!1),u&&u.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,u&&u.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||c.nextTick(f,this)}function f(u){u.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),o.prototype._destroy=function(u,g){this.push(null),this.end(),c.nextTick(g,u)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(e,h,p){h.exports=i;var c=e("./_stream_transform"),s=Object.create(e("core-util-is"));function i(r){if(!(this instanceof i))return new i(r);c.call(this,r)}s.inherits=e("inherits"),s.inherits(i,c),i.prototype._transform=function(r,t,n){n(null,r)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(e,h,p){(function(c,s){(function(){var i=e("process-nextick-args");h.exports=L;var r,t=e("isarray");L.ReadableState=A,e("events").EventEmitter;var n=function(P,D){return P.listeners(D).length},l=e("./internal/streams/stream"),a=e("safe-buffer").Buffer,o=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},d=Object.create(e("core-util-is"));d.inherits=e("inherits");var f=e("util"),u=void 0;u=f&&f.debuglog?f.debuglog("stream"):function(){};var g,m=e("./internal/streams/BufferList"),k=e("./internal/streams/destroy");d.inherits(L,l);var E=["error","close","destroy","pause","resume"];function A(P,D){P=P||{};var V=D instanceof(r=r||e("./_stream_duplex"));this.objectMode=!!P.objectMode,V&&(this.objectMode=this.objectMode||!!P.readableObjectMode);var q=P.highWaterMark,G=P.readableHighWaterMark,F=this.objectMode?16:16384;this.highWaterMark=q||q===0?q:V&&(G||G===0)?G:F,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=P.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,P.encoding&&(g||(g=e("string_decoder/").StringDecoder),this.decoder=new g(P.encoding),this.encoding=P.encoding)}function L(P){if(r=r||e("./_stream_duplex"),!(this instanceof L))return new L(P);this._readableState=new A(P,this),this.readable=!0,P&&(typeof P.read=="function"&&(this._read=P.read),typeof P.destroy=="function"&&(this._destroy=P.destroy)),l.call(this)}function z(P,D,V,q,G){var F,X=P._readableState;return D===null?(X.reading=!1,function(O,M){if(!M.ended){if(M.decoder){var U=M.decoder.end();U&&U.length&&(M.buffer.push(U),M.length+=M.objectMode?1:U.length)}M.ended=!0,B(O)}}(P,X)):(G||(F=function(O,M){var U;K=M,a.isBuffer(K)||K instanceof o||typeof M=="string"||M===void 0||O.objectMode||(U=new TypeError("Invalid non-string/buffer chunk"));var K;return U}(X,D)),F?P.emit("error",F):X.objectMode||D&&D.length>0?(typeof D=="string"||X.objectMode||Object.getPrototypeOf(D)===a.prototype||(D=function(O){return a.from(O)}(D)),q?X.endEmitted?P.emit("error",new Error("stream.unshift() after end event")):R(P,X,D,!0):X.ended?P.emit("error",new Error("stream.push() after EOF")):(X.reading=!1,X.decoder&&!V?(D=X.decoder.write(D),X.objectMode||D.length!==0?R(P,X,D,!1):$(P,X)):R(P,X,D,!1))):q||(X.reading=!1)),function(O){return!O.ended&&(O.needReadable||O.length<O.highWaterMark||O.length===0)}(X)}function R(P,D,V,q){D.flowing&&D.length===0&&!D.sync?(P.emit("data",V),P.read(0)):(D.length+=D.objectMode?1:V.length,q?D.buffer.unshift(V):D.buffer.push(V),D.needReadable&&B(P)),$(P,D)}Object.defineProperty(L.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(P){this._readableState&&(this._readableState.destroyed=P)}}),L.prototype.destroy=k.destroy,L.prototype._undestroy=k.undestroy,L.prototype._destroy=function(P,D){this.push(null),D(P)},L.prototype.push=function(P,D){var V,q=this._readableState;return q.objectMode?V=!0:typeof P=="string"&&((D=D||q.defaultEncoding)!==q.encoding&&(P=a.from(P,D),D=""),V=!0),z(this,P,D,!1,V)},L.prototype.unshift=function(P){return z(this,P,null,!0,!1)},L.prototype.isPaused=function(){return this._readableState.flowing===!1},L.prototype.setEncoding=function(P){return g||(g=e("string_decoder/").StringDecoder),this._readableState.decoder=new g(P),this._readableState.encoding=P,this};function I(P,D){return P<=0||D.length===0&&D.ended?0:D.objectMode?1:P!=P?D.flowing&&D.length?D.buffer.head.data.length:D.length:(P>D.highWaterMark&&(D.highWaterMark=function(V){return V>=8388608?V=8388608:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}(P)),P<=D.length?P:D.ended?D.length:(D.needReadable=!0,0))}function B(P){var D=P._readableState;D.needReadable=!1,D.emittedReadable||(u("emitReadable",D.flowing),D.emittedReadable=!0,D.sync?i.nextTick(H,P):H(P))}function H(P){u("emit readable"),P.emit("readable"),b(P)}function $(P,D){D.readingMore||(D.readingMore=!0,i.nextTick(C,P,D))}function C(P,D){for(var V=D.length;!D.reading&&!D.flowing&&!D.ended&&D.length<D.highWaterMark&&(u("maybeReadMore read 0"),P.read(0),V!==D.length);)V=D.length;D.readingMore=!1}function T(P){u("readable nexttick read 0"),P.read(0)}function j(P,D){D.reading||(u("resume read 0"),P.read(0)),D.resumeScheduled=!1,D.awaitDrain=0,P.emit("resume"),b(P),D.flowing&&!D.reading&&P.read(0)}function b(P){var D=P._readableState;for(u("flow",D.flowing);D.flowing&&P.read()!==null;);}function v(P,D){return D.length===0?null:(D.objectMode?V=D.buffer.shift():!P||P>=D.length?(V=D.decoder?D.buffer.join(""):D.buffer.length===1?D.buffer.head.data:D.buffer.concat(D.length),D.buffer.clear()):V=function(q,G,F){var X;return q<G.head.data.length?(X=G.head.data.slice(0,q),G.head.data=G.head.data.slice(q)):X=q===G.head.data.length?G.shift():F?function(O,M){var U=M.head,K=1,Q=U.data;for(O-=Q.length;U=U.next;){var Y=U.data,J=O>Y.length?Y.length:O;if(J===Y.length?Q+=Y:Q+=Y.slice(0,O),(O-=J)===0){J===Y.length?(++K,U.next?M.head=U.next:M.head=M.tail=null):(M.head=U,U.data=Y.slice(J));break}++K}return M.length-=K,Q}(q,G):function(O,M){var U=a.allocUnsafe(O),K=M.head,Q=1;for(K.data.copy(U),O-=K.data.length;K=K.next;){var Y=K.data,J=O>Y.length?Y.length:O;if(Y.copy(U,U.length-O,0,J),(O-=J)===0){J===Y.length?(++Q,K.next?M.head=K.next:M.head=M.tail=null):(M.head=K,K.data=Y.slice(J));break}++Q}return M.length-=Q,U}(q,G),X}(P,D.buffer,D.decoder),V);var V}function x(P){var D=P._readableState;if(D.length>0)throw new Error('"endReadable()" called on non-empty stream');D.endEmitted||(D.ended=!0,i.nextTick(w,D,P))}function w(P,D){P.endEmitted||P.length!==0||(P.endEmitted=!0,D.readable=!1,D.emit("end"))}function N(P,D){for(var V=0,q=P.length;V<q;V++)if(P[V]===D)return V;return-1}L.prototype.read=function(P){u("read",P),P=parseInt(P,10);var D=this._readableState,V=P;if(P!==0&&(D.emittedReadable=!1),P===0&&D.needReadable&&(D.length>=D.highWaterMark||D.ended))return u("read: emitReadable",D.length,D.ended),D.length===0&&D.ended?x(this):B(this),null;if((P=I(P,D))===0&&D.ended)return D.length===0&&x(this),null;var q,G=D.needReadable;return u("need readable",G),(D.length===0||D.length-P<D.highWaterMark)&&u("length less than watermark",G=!0),D.ended||D.reading?u("reading or ended",G=!1):G&&(u("do read"),D.reading=!0,D.sync=!0,D.length===0&&(D.needReadable=!0),this._read(D.highWaterMark),D.sync=!1,D.reading||(P=I(V,D))),(q=P>0?v(P,D):null)===null?(D.needReadable=!0,P=0):D.length-=P,D.length===0&&(D.ended||(D.needReadable=!0),V!==P&&D.ended&&x(this)),q!==null&&this.emit("data",q),q},L.prototype._read=function(P){this.emit("error",new Error("_read() is not implemented"))},L.prototype.pipe=function(P,D){var V=this,q=this._readableState;switch(q.pipesCount){case 0:q.pipes=P;break;case 1:q.pipes=[q.pipes,P];break;default:q.pipes.push(P)}q.pipesCount+=1,u("pipe count=%d opts=%j",q.pipesCount,D);var G=(!D||D.end!==!1)&&P!==c.stdout&&P!==c.stderr?X:ae;function F(ie,Z){u("onunpipe"),ie===V&&Z&&Z.hasUnpiped===!1&&(Z.hasUnpiped=!0,u("cleanup"),P.removeListener("close",Y),P.removeListener("finish",J),P.removeListener("drain",O),P.removeListener("error",Q),P.removeListener("unpipe",F),V.removeListener("end",X),V.removeListener("end",ae),V.removeListener("data",K),M=!0,!q.awaitDrain||P._writableState&&!P._writableState.needDrain||O())}function X(){u("onend"),P.end()}q.endEmitted?i.nextTick(G):V.once("end",G),P.on("unpipe",F);var O=function(ie){return function(){var Z=ie._readableState;u("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&n(ie,"data")&&(Z.flowing=!0,b(ie))}}(V);P.on("drain",O);var M=!1,U=!1;function K(ie){u("ondata"),U=!1,P.write(ie)!==!1||U||((q.pipesCount===1&&q.pipes===P||q.pipesCount>1&&N(q.pipes,P)!==-1)&&!M&&(u("false write response, pause",q.awaitDrain),q.awaitDrain++,U=!0),V.pause())}function Q(ie){u("onerror",ie),ae(),P.removeListener("error",Q),n(P,"error")===0&&P.emit("error",ie)}function Y(){P.removeListener("finish",J),ae()}function J(){u("onfinish"),P.removeListener("close",Y),ae()}function ae(){u("unpipe"),V.unpipe(P)}return V.on("data",K),function(ie,Z,ne){if(typeof ie.prependListener=="function")return ie.prependListener(Z,ne);ie._events&&ie._events[Z]?t(ie._events[Z])?ie._events[Z].unshift(ne):ie._events[Z]=[ne,ie._events[Z]]:ie.on(Z,ne)}(P,"error",Q),P.once("close",Y),P.once("finish",J),P.emit("pipe",V),q.flowing||(u("pipe resume"),V.resume()),P},L.prototype.unpipe=function(P){var D=this._readableState,V={hasUnpiped:!1};if(D.pipesCount===0)return this;if(D.pipesCount===1)return P&&P!==D.pipes||(P||(P=D.pipes),D.pipes=null,D.pipesCount=0,D.flowing=!1,P&&P.emit("unpipe",this,V)),this;if(!P){var q=D.pipes,G=D.pipesCount;D.pipes=null,D.pipesCount=0,D.flowing=!1;for(var F=0;F<G;F++)q[F].emit("unpipe",this,{hasUnpiped:!1});return this}var X=N(D.pipes,P);return X===-1||(D.pipes.splice(X,1),D.pipesCount-=1,D.pipesCount===1&&(D.pipes=D.pipes[0]),P.emit("unpipe",this,V)),this},L.prototype.on=function(P,D){var V=l.prototype.on.call(this,P,D);if(P==="data")this._readableState.flowing!==!1&&this.resume();else if(P==="readable"){var q=this._readableState;q.endEmitted||q.readableListening||(q.readableListening=q.needReadable=!0,q.emittedReadable=!1,q.reading?q.length&&B(this):i.nextTick(T,this))}return V},L.prototype.addListener=L.prototype.on,L.prototype.resume=function(){var P=this._readableState;return P.flowing||(u("resume"),P.flowing=!0,function(D,V){V.resumeScheduled||(V.resumeScheduled=!0,i.nextTick(j,D,V))}(this,P)),this},L.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},L.prototype.wrap=function(P){var D=this,V=this._readableState,q=!1;for(var G in P.on("end",function(){if(u("wrapped end"),V.decoder&&!V.ended){var X=V.decoder.end();X&&X.length&&D.push(X)}D.push(null)}),P.on("data",function(X){u("wrapped data"),V.decoder&&(X=V.decoder.write(X)),V.objectMode&&X==null||(V.objectMode||X&&X.length)&&(D.push(X)||(q=!0,P.pause()))}),P)this[G]===void 0&&typeof P[G]=="function"&&(this[G]=function(X){return function(){return P[X].apply(P,arguments)}}(G));for(var F=0;F<E.length;F++)P.on(E[F],this.emit.bind(this,E[F]));return this._read=function(X){u("wrapped _read",X),q&&(q=!1,P.resume())},this},Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),L._fromList=v}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(e,h,p){h.exports=r;var c=e("./_stream_duplex"),s=Object.create(e("core-util-is"));function i(l,a){var o=this._transformState;o.transforming=!1;var d=o.writecb;if(!d)return this.emit("error",new Error("write callback called multiple times"));o.writechunk=null,o.writecb=null,a!=null&&this.push(a),d(l);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function r(l){if(!(this instanceof r))return new r(l);c.call(this,l),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",t)}function t(){var l=this;typeof this._flush=="function"?this._flush(function(a,o){n(l,a,o)}):n(this,null,null)}function n(l,a,o){if(a)return l.emit("error",a);if(o!=null&&l.push(o),l._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(l._transformState.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}s.inherits=e("inherits"),s.inherits(r,c),r.prototype.push=function(l,a){return this._transformState.needTransform=!1,c.prototype.push.call(this,l,a)},r.prototype._transform=function(l,a,o){throw new Error("_transform() is not implemented")},r.prototype._write=function(l,a,o){var d=this._transformState;if(d.writecb=o,d.writechunk=l,d.writeencoding=a,!d.transforming){var f=this._readableState;(d.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},r.prototype._read=function(l){var a=this._transformState;a.writechunk!==null&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0},r.prototype._destroy=function(l,a){var o=this;c.prototype._destroy.call(this,l,function(d){a(d),o.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(e,h,p){(function(c,s,i){(function(){var r=e("process-nextick-args");function t($){var C=this;this.next=null,this.entry=null,this.finish=function(){(function(T,j,b){var v=T.entry;for(T.entry=null;v;){var x=v.callback;j.pendingcb--,x(b),v=v.next}j.corkedRequestsFree.next=T})(C,$)}}h.exports=A;var n,l=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?i:r.nextTick;A.WritableState=E;var a=Object.create(e("core-util-is"));a.inherits=e("inherits");var o={deprecate:e("util-deprecate")},d=e("./internal/streams/stream"),f=e("safe-buffer").Buffer,u=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},g,m=e("./internal/streams/destroy");function k(){}function E($,C){n=n||e("./_stream_duplex"),$=$||{};var T=C instanceof n;this.objectMode=!!$.objectMode,T&&(this.objectMode=this.objectMode||!!$.writableObjectMode);var j=$.highWaterMark,b=$.writableHighWaterMark,v=this.objectMode?16:16384;this.highWaterMark=j||j===0?j:T&&(b||b===0)?b:v,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=$.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(w){(function(N,P){var D=N._writableState,V=D.sync,q=D.writecb;if(function(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}(D),P)(function(F,X,O,M,U){--X.pendingcb,O?(r.nextTick(U,M),r.nextTick(H,F,X),F._writableState.errorEmitted=!0,F.emit("error",M)):(U(M),F._writableState.errorEmitted=!0,F.emit("error",M),H(F,X))})(N,D,V,P,q);else{var G=I(D);G||D.corked||D.bufferProcessing||!D.bufferedRequest||R(N,D),V?l(z,N,D,G,q):z(N,D,G,q)}})(C,w)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function A($){if(n=n||e("./_stream_duplex"),!(g.call(A,this)||this instanceof n))return new A($);this._writableState=new E($,this),this.writable=!0,$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final)),d.call(this)}function L($,C,T,j,b,v,x){C.writelen=j,C.writecb=x,C.writing=!0,C.sync=!0,T?$._writev(b,C.onwrite):$._write(b,v,C.onwrite),C.sync=!1}function z($,C,T,j){T||function(b,v){v.length===0&&v.needDrain&&(v.needDrain=!1,b.emit("drain"))}($,C),C.pendingcb--,j(),H($,C)}function R($,C){C.bufferProcessing=!0;var T=C.bufferedRequest;if($._writev&&T&&T.next){var j=C.bufferedRequestCount,b=new Array(j),v=C.corkedRequestsFree;v.entry=T;for(var x=0,w=!0;T;)b[x]=T,T.isBuf||(w=!1),T=T.next,x+=1;b.allBuffers=w,L($,C,!0,C.length,b,"",v.finish),C.pendingcb++,C.lastBufferedRequest=null,v.next?(C.corkedRequestsFree=v.next,v.next=null):C.corkedRequestsFree=new t(C),C.bufferedRequestCount=0}else{for(;T;){var N=T.chunk,P=T.encoding,D=T.callback;if(L($,C,!1,C.objectMode?1:N.length,N,P,D),T=T.next,C.bufferedRequestCount--,C.writing)break}T===null&&(C.lastBufferedRequest=null)}C.bufferedRequest=T,C.bufferProcessing=!1}function I($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function B($,C){$._final(function(T){C.pendingcb--,T&&$.emit("error",T),C.prefinished=!0,$.emit("prefinish"),H($,C)})}function H($,C){var T=I(C);return T&&(function(j,b){b.prefinished||b.finalCalled||(typeof j._final=="function"?(b.pendingcb++,b.finalCalled=!0,r.nextTick(B,j,b)):(b.prefinished=!0,j.emit("prefinish")))}($,C),C.pendingcb===0&&(C.finished=!0,$.emit("finish"))),T}a.inherits(A,d),E.prototype.getBuffer=function(){for(var $=this.bufferedRequest,C=[];$;)C.push($),$=$.next;return C},function(){try{Object.defineProperty(E.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function($){return!!g.call(this,$)||this===A&&$&&$._writableState instanceof E}})):g=function($){return $ instanceof this},A.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},A.prototype.write=function($,C,T){var j,b=this._writableState,v=!1,x=!b.objectMode&&(j=$,f.isBuffer(j)||j instanceof u);return x&&!f.isBuffer($)&&($=function(w){return f.from(w)}($)),typeof C=="function"&&(T=C,C=null),x?C="buffer":C||(C=b.defaultEncoding),typeof T!="function"&&(T=k),b.ended?function(w,N){var P=new Error("write after end");w.emit("error",P),r.nextTick(N,P)}(this,T):(x||function(w,N,P,D){var V=!0,q=!1;return P===null?q=new TypeError("May not write null values to stream"):typeof P=="string"||P===void 0||N.objectMode||(q=new TypeError("Invalid non-string/buffer chunk")),q&&(w.emit("error",q),r.nextTick(D,q),V=!1),V}(this,b,$,T))&&(b.pendingcb++,v=function(w,N,P,D,V,q){if(!P){var G=function(M,U,K){return M.objectMode||M.decodeStrings===!1||typeof U!="string"||(U=f.from(U,K)),U}(N,D,V);D!==G&&(P=!0,V="buffer",D=G)}var F=N.objectMode?1:D.length;N.length+=F;var X=N.length<N.highWaterMark;if(X||(N.needDrain=!0),N.writing||N.corked){var O=N.lastBufferedRequest;N.lastBufferedRequest={chunk:D,encoding:V,isBuf:P,callback:q,next:null},O?O.next=N.lastBufferedRequest:N.bufferedRequest=N.lastBufferedRequest,N.bufferedRequestCount+=1}else L(w,N,!1,F,D,V,q);return X}(this,b,x,$,C,T)),v},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,$.writing||$.corked||$.bufferProcessing||!$.bufferedRequest||R(this,$))},A.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=$.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+$);return this._writableState.defaultEncoding=$,this},Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function($,C,T){T(new Error("_write() is not implemented"))},A.prototype._writev=null,A.prototype.end=function($,C,T){var j=this._writableState;typeof $=="function"?(T=$,$=null,C=null):typeof C=="function"&&(T=C,C=null),$!=null&&this.write($,C),j.corked&&(j.corked=1,this.uncork()),j.ending||function(b,v,x){v.ending=!0,H(b,v),x&&(v.finished?r.nextTick(x):b.once("finish",x)),v.ended=!0,b.writable=!1}(this,j,T)},Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function($){this._writableState&&(this._writableState.destroyed=$)}}),A.prototype.destroy=m.destroy,A.prototype._undestroy=m.undestroy,A.prototype._destroy=function($,C){this.end(),C($)}}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(e,h,p){var c=e("safe-buffer").Buffer,s=e("util");h.exports=function(){function i(){(function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.head=null,this.tail=null,this.length=0}return i.prototype.push=function(r){var t={data:r,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(r){var t={data:r,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(r){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=r+t.data;return n},i.prototype.concat=function(r){if(this.length===0)return c.alloc(0);for(var t,n,l,a=c.allocUnsafe(r>>>0),o=this.head,d=0;o;)t=o.data,n=a,l=d,t.copy(n,l),d+=o.data.length,o=o.next;return a},i}(),s&&s.inspect&&s.inspect.custom&&(h.exports.prototype[s.inspect.custom]=function(){var i=s.inspect({length:this.length});return this.constructor.name+" "+i})},{"safe-buffer":520,util:188}],514:[function(e,h,p){var c=e("process-nextick-args");function s(i,r){i.emit("error",r)}h.exports={destroy:function(i,r){var t=this,n=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return n||l?(r?r(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(s,this,i)):c.nextTick(s,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(a){!r&&a?t._writableState?t._writableState.errorEmitted||(t._writableState.errorEmitted=!0,c.nextTick(s,t,a)):c.nextTick(s,t,a):r&&r(a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(e,h,p){arguments[4][490][0].apply(p,arguments)},{dup:490,events:422}],516:[function(e,h,p){h.exports=e("./readable").PassThrough},{"./readable":517}],517:[function(e,h,p){(p=h.exports=e("./lib/_stream_readable.js")).Stream=p,p.Readable=p,p.Writable=e("./lib/_stream_writable.js"),p.Duplex=e("./lib/_stream_duplex.js"),p.Transform=e("./lib/_stream_transform.js"),p.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(e,h,p){h.exports=e("./readable").Transform},{"./readable":517}],519:[function(e,h,p){h.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(e,h,p){arguments[4][217][0].apply(p,arguments)},{buffer:220,dup:217}],521:[function(e,h,p){arguments[4][218][0].apply(p,arguments)},{dup:218,"safe-buffer":520}],522:[function(e,h,p){arguments[4][218][0].apply(p,arguments)},{dup:218,"safe-buffer":494}],523:[function(e,h,p){(function(c,s){(function(){var i=e("process/browser.js").nextTick,r=Function.prototype.apply,t=Array.prototype.slice,n={},l=0;function a(o,d){this._id=o,this._clearFn=d}p.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},p.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},p.clearTimeout=p.clearInterval=function(o){o.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},p.enroll=function(o,d){clearTimeout(o._idleTimeoutId),o._idleTimeout=d},p.unenroll=function(o){clearTimeout(o._idleTimeoutId),o._idleTimeout=-1},p._unrefActive=p.active=function(o){clearTimeout(o._idleTimeoutId);var d=o._idleTimeout;d>=0&&(o._idleTimeoutId=setTimeout(function(){o._onTimeout&&o._onTimeout()},d))},p.setImmediate=typeof c=="function"?c:function(o){var d=l++,f=!(arguments.length<2)&&t.call(arguments,1);return n[d]=!0,i(function(){n[d]&&(f?o.apply(null,f):o.call(null),p.clearImmediate(d))}),d},p.clearImmediate=typeof s=="function"?s:function(o){delete n[o]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(e,h,p){(function(c){(function(){function s(i){try{if(!c.localStorage)return!1}catch{return!1}var r=c.localStorage[i];return r!=null&&String(r).toLowerCase()==="true"}h.exports=function(i,r){if(s("noDeprecation"))return i;var t=!1;return function(){if(!t){if(s("throwDeprecation"))throw new Error(r);s("traceDeprecation")?console.trace(r):console.warn(r),t=!0}return i.apply(this,arguments)}}}).call(this)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(e,h,p){typeof Object.create=="function"?h.exports=function(c,s){c.super_=s,c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:h.exports=function(c,s){c.super_=s;var i=function(){};i.prototype=s.prototype,c.prototype=new i,c.prototype.constructor=c}},{}],526:[function(e,h,p){h.exports=function(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"}},{}],527:[function(e,h,p){(function(c,s){(function(){var i=/%[sdj%]/g;p.format=function(b){if(!E(b)){for(var v=[],x=0;x<arguments.length;x++)v.push(n(arguments[x]));return v.join(" ")}x=1;for(var w=arguments,N=w.length,P=String(b).replace(i,function(V){if(V==="%%")return"%";if(x>=N)return V;switch(V){case"%s":return String(w[x++]);case"%d":return Number(w[x++]);case"%j":try{return JSON.stringify(w[x++])}catch{return"[Circular]"}default:return V}}),D=w[x];x<N;D=w[++x])m(D)||!z(D)?P+=" "+D:P+=" "+n(D);return P},p.deprecate=function(b,v){if(A(s.process))return function(){return p.deprecate(b,v).apply(this,arguments)};if(c.noDeprecation===!0)return b;var x=!1;return function(){if(!x){if(c.throwDeprecation)throw new Error(v);c.traceDeprecation?console.trace(v):console.error(v),x=!0}return b.apply(this,arguments)}};var r,t={};function n(b,v){var x={seen:[],stylize:a};return arguments.length>=3&&(x.depth=arguments[2]),arguments.length>=4&&(x.colors=arguments[3]),g(v)?x.showHidden=v:v&&p._extend(x,v),A(x.showHidden)&&(x.showHidden=!1),A(x.depth)&&(x.depth=2),A(x.colors)&&(x.colors=!1),A(x.customInspect)&&(x.customInspect=!0),x.colors&&(x.stylize=l),o(x,b,x.depth)}function l(b,v){var x=n.styles[v];return x?"\x1B["+n.colors[x][0]+"m"+b+"\x1B["+n.colors[x][1]+"m":b}function a(b,v){return b}function o(b,v,x){if(b.customInspect&&v&&B(v.inspect)&&v.inspect!==p.inspect&&(!v.constructor||v.constructor.prototype!==v)){var w=v.inspect(x,b);return E(w)||(w=o(b,w,x)),w}var N=function(O,M){if(A(M))return O.stylize("undefined","undefined");if(E(M)){var U="'"+JSON.stringify(M).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return O.stylize(U,"string")}if(k(M))return O.stylize(""+M,"number");if(g(M))return O.stylize(""+M,"boolean");if(m(M))return O.stylize("null","null")}(b,v);if(N)return N;var P=Object.keys(v),D=function(O){var M={};return O.forEach(function(U,K){M[U]=!0}),M}(P);if(b.showHidden&&(P=Object.getOwnPropertyNames(v)),I(v)&&(P.indexOf("message")>=0||P.indexOf("description")>=0))return d(v);if(P.length===0){if(B(v)){var V=v.name?": "+v.name:"";return b.stylize("[Function"+V+"]","special")}if(L(v))return b.stylize(RegExp.prototype.toString.call(v),"regexp");if(R(v))return b.stylize(Date.prototype.toString.call(v),"date");if(I(v))return d(v)}var q,G="",F=!1,X=["{","}"];return u(v)&&(F=!0,X=["[","]"]),B(v)&&(G=" [Function"+(v.name?": "+v.name:"")+"]"),L(v)&&(G=" "+RegExp.prototype.toString.call(v)),R(v)&&(G=" "+Date.prototype.toUTCString.call(v)),I(v)&&(G=" "+d(v)),P.length!==0||F&&v.length!=0?x<0?L(v)?b.stylize(RegExp.prototype.toString.call(v),"regexp"):b.stylize("[Object]","special"):(b.seen.push(v),q=F?function(O,M,U,K,Q){for(var Y=[],J=0,ae=M.length;J<ae;++J)j(M,String(J))?Y.push(f(O,M,U,K,String(J),!0)):Y.push("");return Q.forEach(function(ie){ie.match(/^\d+$/)||Y.push(f(O,M,U,K,ie,!0))}),Y}(b,v,x,D,P):P.map(function(O){return f(b,v,x,D,O,F)}),b.seen.pop(),function(O,M,U){return O.reduce(function(K,Q){return Q.indexOf(`
`)>=0,K+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?U[0]+(M===""?"":M+`
 `)+" "+O.join(`,
  `)+" "+U[1]:U[0]+M+" "+O.join(", ")+" "+U[1]}(q,G,X)):X[0]+G+X[1]}function d(b){return"["+Error.prototype.toString.call(b)+"]"}function f(b,v,x,w,N,P){var D,V,q;if((q=Object.getOwnPropertyDescriptor(v,N)||{value:v[N]}).get?V=q.set?b.stylize("[Getter/Setter]","special"):b.stylize("[Getter]","special"):q.set&&(V=b.stylize("[Setter]","special")),j(w,N)||(D="["+N+"]"),V||(b.seen.indexOf(q.value)<0?(V=m(x)?o(b,q.value,null):o(b,q.value,x-1)).indexOf(`
`)>-1&&(V=P?V.split(`
`).map(function(G){return"  "+G}).join(`
`).substr(2):`
`+V.split(`
`).map(function(G){return"   "+G}).join(`
`)):V=b.stylize("[Circular]","special")),A(D)){if(P&&N.match(/^\d+$/))return V;(D=JSON.stringify(""+N)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(D=D.substr(1,D.length-2),D=b.stylize(D,"name")):(D=D.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),D=b.stylize(D,"string"))}return D+": "+V}function u(b){return Array.isArray(b)}function g(b){return typeof b=="boolean"}function m(b){return b===null}function k(b){return typeof b=="number"}function E(b){return typeof b=="string"}function A(b){return b===void 0}function L(b){return z(b)&&H(b)==="[object RegExp]"}function z(b){return typeof b=="object"&&b!==null}function R(b){return z(b)&&H(b)==="[object Date]"}function I(b){return z(b)&&(H(b)==="[object Error]"||b instanceof Error)}function B(b){return typeof b=="function"}function H(b){return Object.prototype.toString.call(b)}function $(b){return b<10?"0"+b.toString(10):b.toString(10)}p.debuglog=function(b){if(A(r)&&(r=c.env.NODE_DEBUG||""),b=b.toUpperCase(),!t[b])if(new RegExp("\\b"+b+"\\b","i").test(r)){var v=c.pid;t[b]=function(){var x=p.format.apply(p,arguments);console.error("%s %d: %s",b,v,x)}}else t[b]=function(){};return t[b]},p.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},p.isArray=u,p.isBoolean=g,p.isNull=m,p.isNullOrUndefined=function(b){return b==null},p.isNumber=k,p.isString=E,p.isSymbol=function(b){return typeof b=="symbol"},p.isUndefined=A,p.isRegExp=L,p.isObject=z,p.isDate=R,p.isError=I,p.isFunction=B,p.isPrimitive=function(b){return b===null||typeof b=="boolean"||typeof b=="number"||typeof b=="string"||typeof b=="symbol"||b===void 0},p.isBuffer=e("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var b=new Date,v=[$(b.getHours()),$(b.getMinutes()),$(b.getSeconds())].join(":");return[b.getDate(),C[b.getMonth()],v].join(" ")}function j(b,v){return Object.prototype.hasOwnProperty.call(b,v)}p.log=function(){console.log("%s - %s",T(),p.format.apply(p,arguments))},p.inherits=e("inherits"),p._extend=function(b,v){if(!v||!z(v))return b;for(var x=Object.keys(v),w=x.length;w--;)b[x[w]]=v[x[w]];return b}}).call(this)}).call(this,e("_process"),typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),Object.defineProperty(p,"v1",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(p,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(p,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(p,"v5",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(p,"NIL",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(p,"version",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(p,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(p,"stringify",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(p,"parse",{enumerable:!0,get:function(){return o.default}});var c=d(e("./v1.js")),s=d(e("./v3.js")),i=d(e("./v4.js")),r=d(e("./v5.js")),t=d(e("./nil.js")),n=d(e("./version.js")),l=d(e("./validate.js")),a=d(e("./stringify.js")),o=d(e("./parse.js"));function d(f){return f&&f.__esModule?f:{default:f}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(e,h,p){function c(o){return 14+(o+64>>>9<<4)+1}function s(o,d){const f=(65535&o)+(65535&d);return(o>>16)+(d>>16)+(f>>16)<<16|65535&f}function i(o,d,f,u,g,m){return s((k=s(s(d,o),s(u,m)))<<(E=g)|k>>>32-E,f);var k,E}function r(o,d,f,u,g,m,k){return i(d&f|~d&u,o,d,g,m,k)}function t(o,d,f,u,g,m,k){return i(d&u|f&~u,o,d,g,m,k)}function n(o,d,f,u,g,m,k){return i(d^f^u,o,d,g,m,k)}function l(o,d,f,u,g,m,k){return i(f^(d|~u),o,d,g,m,k)}Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var a=function(o){if(typeof o=="string"){const d=unescape(encodeURIComponent(o));o=new Uint8Array(d.length);for(let f=0;f<d.length;++f)o[f]=d.charCodeAt(f)}return function(d){const f=[],u=32*d.length;for(let g=0;g<u;g+=8){const m=d[g>>5]>>>g%32&255,k=parseInt("0123456789abcdef".charAt(m>>>4&15)+"0123456789abcdef".charAt(15&m),16);f.push(k)}return f}(function(d,f){d[f>>5]|=128<<f%32,d[c(f)-1]=f;let u=1732584193,g=-271733879,m=-1732584194,k=271733878;for(let E=0;E<d.length;E+=16){const A=u,L=g,z=m,R=k;u=r(u,g,m,k,d[E],7,-680876936),k=r(k,u,g,m,d[E+1],12,-389564586),m=r(m,k,u,g,d[E+2],17,606105819),g=r(g,m,k,u,d[E+3],22,-1044525330),u=r(u,g,m,k,d[E+4],7,-176418897),k=r(k,u,g,m,d[E+5],12,1200080426),m=r(m,k,u,g,d[E+6],17,-1473231341),g=r(g,m,k,u,d[E+7],22,-45705983),u=r(u,g,m,k,d[E+8],7,1770035416),k=r(k,u,g,m,d[E+9],12,-1958414417),m=r(m,k,u,g,d[E+10],17,-42063),g=r(g,m,k,u,d[E+11],22,-1990404162),u=r(u,g,m,k,d[E+12],7,1804603682),k=r(k,u,g,m,d[E+13],12,-40341101),m=r(m,k,u,g,d[E+14],17,-1502002290),g=r(g,m,k,u,d[E+15],22,1236535329),u=t(u,g,m,k,d[E+1],5,-165796510),k=t(k,u,g,m,d[E+6],9,-1069501632),m=t(m,k,u,g,d[E+11],14,643717713),g=t(g,m,k,u,d[E],20,-373897302),u=t(u,g,m,k,d[E+5],5,-701558691),k=t(k,u,g,m,d[E+10],9,38016083),m=t(m,k,u,g,d[E+15],14,-660478335),g=t(g,m,k,u,d[E+4],20,-405537848),u=t(u,g,m,k,d[E+9],5,568446438),k=t(k,u,g,m,d[E+14],9,-1019803690),m=t(m,k,u,g,d[E+3],14,-187363961),g=t(g,m,k,u,d[E+8],20,1163531501),u=t(u,g,m,k,d[E+13],5,-1444681467),k=t(k,u,g,m,d[E+2],9,-51403784),m=t(m,k,u,g,d[E+7],14,1735328473),g=t(g,m,k,u,d[E+12],20,-1926607734),u=n(u,g,m,k,d[E+5],4,-378558),k=n(k,u,g,m,d[E+8],11,-2022574463),m=n(m,k,u,g,d[E+11],16,1839030562),g=n(g,m,k,u,d[E+14],23,-35309556),u=n(u,g,m,k,d[E+1],4,-1530992060),k=n(k,u,g,m,d[E+4],11,1272893353),m=n(m,k,u,g,d[E+7],16,-155497632),g=n(g,m,k,u,d[E+10],23,-1094730640),u=n(u,g,m,k,d[E+13],4,681279174),k=n(k,u,g,m,d[E],11,-358537222),m=n(m,k,u,g,d[E+3],16,-722521979),g=n(g,m,k,u,d[E+6],23,76029189),u=n(u,g,m,k,d[E+9],4,-640364487),k=n(k,u,g,m,d[E+12],11,-421815835),m=n(m,k,u,g,d[E+15],16,530742520),g=n(g,m,k,u,d[E+2],23,-995338651),u=l(u,g,m,k,d[E],6,-198630844),k=l(k,u,g,m,d[E+7],10,1126891415),m=l(m,k,u,g,d[E+14],15,-1416354905),g=l(g,m,k,u,d[E+5],21,-57434055),u=l(u,g,m,k,d[E+12],6,1700485571),k=l(k,u,g,m,d[E+3],10,-1894986606),m=l(m,k,u,g,d[E+10],15,-1051523),g=l(g,m,k,u,d[E+1],21,-2054922799),u=l(u,g,m,k,d[E+8],6,1873313359),k=l(k,u,g,m,d[E+15],10,-30611744),m=l(m,k,u,g,d[E+6],15,-1560198380),g=l(g,m,k,u,d[E+13],21,1309151649),u=l(u,g,m,k,d[E+4],6,-145523070),k=l(k,u,g,m,d[E+11],10,-1120210379),m=l(m,k,u,g,d[E+2],15,718787259),g=l(g,m,k,u,d[E+9],21,-343485551),u=s(u,A),g=s(g,L),m=s(m,z),k=s(k,R)}return[u,g,m,k]}(function(d){if(d.length===0)return[];const f=8*d.length,u=new Uint32Array(c(f));for(let g=0;g<f;g+=8)u[g>>5]|=(255&d[g/8])<<g%32;return u}(o),8*o.length))};p.default=a},{}],530:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c,s=(c=e("./validate.js"))&&c.__esModule?c:{default:c},i=function(r){if(!(0,s.default)(r))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(r.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(r.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(r.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(r.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};p.default=i},{"./validate.js":541}],532:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(e,h,p){let c;Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(){if(!c&&(c=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(s)};const s=new Uint8Array(16)},{}],534:[function(e,h,p){function c(r,t,n,l){switch(r){case 0:return t&n^~t&l;case 1:return t^n^l;case 2:return t&n^t&l^n&l;case 3:return t^n^l}}function s(r,t){return r<<t|r>>>32-t}Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var i=function(r){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){const d=unescape(encodeURIComponent(r));r=[];for(let f=0;f<d.length;++f)r.push(d.charCodeAt(f))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);const l=r.length/4+2,a=Math.ceil(l/16),o=new Array(a);for(let d=0;d<a;++d){const f=new Uint32Array(16);for(let u=0;u<16;++u)f[u]=r[64*d+4*u]<<24|r[64*d+4*u+1]<<16|r[64*d+4*u+2]<<8|r[64*d+4*u+3];o[d]=f}o[a-1][14]=8*(r.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(r.length-1)&4294967295;for(let d=0;d<a;++d){const f=new Uint32Array(80);for(let A=0;A<16;++A)f[A]=o[d][A];for(let A=16;A<80;++A)f[A]=s(f[A-3]^f[A-8]^f[A-14]^f[A-16],1);let u=n[0],g=n[1],m=n[2],k=n[3],E=n[4];for(let A=0;A<80;++A){const L=Math.floor(A/20),z=s(u,5)+c(L,g,m,k)+E+t[L]+f[A]>>>0;E=k,k=m,m=s(g,30)>>>0,g=u,u=z}n[0]=n[0]+u>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+m>>>0,n[3]=n[3]+k>>>0,n[4]=n[4]+E>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};p.default=i},{}],535:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c,s=(c=e("./validate.js"))&&c.__esModule?c:{default:c};const i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).substr(1));var r=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const l=(i[t[n+0]]+i[t[n+1]]+i[t[n+2]]+i[t[n+3]]+"-"+i[t[n+4]]+i[t[n+5]]+"-"+i[t[n+6]]+i[t[n+7]]+"-"+i[t[n+8]]+i[t[n+9]]+"-"+i[t[n+10]]+i[t[n+11]]+i[t[n+12]]+i[t[n+13]]+i[t[n+14]]+i[t[n+15]]).toLowerCase();if(!(0,s.default)(l))throw TypeError("Stringified UUID is invalid");return l};p.default=r},{"./validate.js":541}],536:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c=i(e("./rng.js")),s=i(e("./stringify.js"));function i(o){return o&&o.__esModule?o:{default:o}}let r,t,n=0,l=0;var a=function(o,d,f){let u=d&&f||0;const g=d||new Array(16);let m=(o=o||{}).node||r,k=o.clockseq!==void 0?o.clockseq:t;if(m==null||k==null){const I=o.random||(o.rng||c.default)();m==null&&(m=r=[1|I[0],I[1],I[2],I[3],I[4],I[5]]),k==null&&(k=t=16383&(I[6]<<8|I[7]))}let E=o.msecs!==void 0?o.msecs:Date.now(),A=o.nsecs!==void 0?o.nsecs:l+1;const L=E-n+(A-l)/1e4;if(L<0&&o.clockseq===void 0&&(k=k+1&16383),(L<0||E>n)&&o.nsecs===void 0&&(A=0),A>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");n=E,l=A,t=k,E+=122192928e5;const z=(1e4*(268435455&E)+A)%4294967296;g[u++]=z>>>24&255,g[u++]=z>>>16&255,g[u++]=z>>>8&255,g[u++]=255&z;const R=E/4294967296*1e4&268435455;g[u++]=R>>>8&255,g[u++]=255&R,g[u++]=R>>>24&15|16,g[u++]=R>>>16&255,g[u++]=k>>>8|128,g[u++]=255&k;for(let I=0;I<6;++I)g[u+I]=m[I];return d||(0,s.default)(g)};p.default=a},{"./rng.js":533,"./stringify.js":535}],537:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c=i(e("./v35.js")),s=i(e("./md5.js"));function i(t){return t&&t.__esModule?t:{default:t}}var r=(0,c.default)("v3",48,s.default);p.default=r},{"./md5.js":529,"./v35.js":538}],538:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(n,l,a){function o(d,f,u,g){if(typeof d=="string"&&(d=function(k){k=unescape(encodeURIComponent(k));const E=[];for(let A=0;A<k.length;++A)E.push(k.charCodeAt(A));return E}(d)),typeof f=="string"&&(f=(0,s.default)(f)),f.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let m=new Uint8Array(16+d.length);if(m.set(f),m.set(d,f.length),m=a(m),m[6]=15&m[6]|l,m[8]=63&m[8]|128,u){g=g||0;for(let k=0;k<16;++k)u[g+k]=m[k];return u}return(0,c.default)(m)}try{o.name=n}catch{}return o.DNS=r,o.URL=t,o},p.URL=p.DNS=void 0;var c=i(e("./stringify.js")),s=i(e("./parse.js"));function i(n){return n&&n.__esModule?n:{default:n}}const r="6ba7b810-9dad-11d1-80b4-00c04fd430c8";p.DNS=r;const t="6ba7b811-9dad-11d1-80b4-00c04fd430c8";p.URL=t},{"./parse.js":531,"./stringify.js":535}],539:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c=i(e("./rng.js")),s=i(e("./stringify.js"));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(t,n,l){const a=(t=t||{}).random||(t.rng||c.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){l=l||0;for(let o=0;o<16;++o)n[l+o]=a[o];return n}return(0,s.default)(a)};p.default=r},{"./rng.js":533,"./stringify.js":535}],540:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c=i(e("./v35.js")),s=i(e("./sha1.js"));function i(t){return t&&t.__esModule?t:{default:t}}var r=(0,c.default)("v5",80,s.default);p.default=r},{"./sha1.js":534,"./v35.js":538}],541:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c,s=(c=e("./regex.js"))&&c.__esModule?c:{default:c},i=function(r){return typeof r=="string"&&s.default.test(r)};p.default=i},{"./regex.js":532}],542:[function(e,h,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c,s=(c=e("./validate.js"))&&c.__esModule?c:{default:c},i=function(r){if(!(0,s.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)};p.default=i},{"./validate.js":541}],543:[function(e,h,p){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(p,"__esModule",{value:!0}),p.CHAR=`	
\r ---`,p.S=` 	\r
`,p.NAME_START_CHAR=":A-Z_a-z-----------",p.NAME_CHAR="-"+p.NAME_START_CHAR+".0-9--",p.CHAR_RE=new RegExp("^["+p.CHAR+"]$","u"),p.S_RE=new RegExp("^["+p.S+"]+$","u"),p.NAME_START_CHAR_RE=new RegExp("^["+p.NAME_START_CHAR+"]$","u"),p.NAME_CHAR_RE=new RegExp("^["+p.NAME_CHAR+"]$","u"),p.NAME_RE=new RegExp("^["+p.NAME_START_CHAR+"]["+p.NAME_CHAR+"]*$","u"),p.NMTOKEN_RE=new RegExp("^["+p.NAME_CHAR+"]+$","u");function c(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}p.S_LIST=[32,10,13,9],p.isChar=function(s){return s>=32&&s<=55295||s===10||s===13||s===9||s>=57344&&s<=65533||s>=65536&&s<=1114111},p.isS=function(s){return s===32||s===10||s===13||s===9},p.isNameStartChar=c,p.isNameChar=function(s){return c(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],544:[function(e,h,p){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(p,"__esModule",{value:!0}),p.CHAR="---",p.RESTRICTED_CHAR="-\b\v\f---",p.S=` 	\r
`,p.NAME_START_CHAR=":A-Z_a-z-----------",p.NAME_CHAR="-"+p.NAME_START_CHAR+".0-9--",p.CHAR_RE=new RegExp("^["+p.CHAR+"]$","u"),p.RESTRICTED_CHAR_RE=new RegExp("^["+p.RESTRICTED_CHAR+"]$","u"),p.S_RE=new RegExp("^["+p.S+"]+$","u"),p.NAME_START_CHAR_RE=new RegExp("^["+p.NAME_START_CHAR+"]$","u"),p.NAME_CHAR_RE=new RegExp("^["+p.NAME_CHAR+"]$","u"),p.NAME_RE=new RegExp("^["+p.NAME_START_CHAR+"]["+p.NAME_CHAR+"]*$","u"),p.NMTOKEN_RE=new RegExp("^["+p.NAME_CHAR+"]+$","u");function c(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}p.S_LIST=[32,10,13,9],p.isChar=function(s){return s>=1&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},p.isRestrictedChar=function(s){return s>=1&&s<=8||s===11||s===12||s>=14&&s<=31||s>=127&&s<=132||s>=134&&s<=159},p.isCharAndNotRestricted=function(s){return s===9||s===10||s===13||s>31&&s<127||s===133||s>159&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},p.isS=function(s){return s===32||s===10||s===13||s===9},p.isNameStartChar=c,p.isNameChar=function(s){return c(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],545:[function(e,h,p){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function c(s){return s>=65&&s<=90||s===95||s>=97&&s<=122||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}Object.defineProperty(p,"__esModule",{value:!0}),p.NC_NAME_START_CHAR="A-Z_a-z------------",p.NC_NAME_CHAR="-"+p.NC_NAME_START_CHAR+".0-9--",p.NC_NAME_START_CHAR_RE=new RegExp("^["+p.NC_NAME_START_CHAR+"]$","u"),p.NC_NAME_CHAR_RE=new RegExp("^["+p.NC_NAME_CHAR+"]$","u"),p.NC_NAME_RE=new RegExp("^["+p.NC_NAME_START_CHAR+"]["+p.NC_NAME_CHAR+"]*$","u"),p.isNCNameStartChar=c,p.isNCNameChar=function(s){return c(s)||s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}]},{},[15])(15)})}(Xs)),Xs.exports}var Xf=Wf();const Oa=Ti(Xf),Ia=(S,_,e,h)=>e,Ue={debug:(S,_,e)=>{},info:(S,_,e)=>{},warn:(S,_,e)=>{console.warn(Ia("warn",e,S))},error:(S,_,e)=>{console.error(Ia("error",e,S))}},Pa={info:(S,_)=>Ue.info(S,_,"App"),warn:(S,_)=>Ue.warn(S,_,"App"),error:(S,_)=>Ue.error(S,_,"App"),debug:(S,_)=>Ue.debug(S,_,"App")},or={info:(S,_)=>Ue.info(S,_,"UI"),warn:(S,_)=>Ue.warn(S,_,"UI"),error:(S,_)=>Ue.error(S,_,"UI"),debug:(S,_)=>Ue.debug(S,_,"UI")},Kf=1,Yf=1e6;let Ks=0;function Gf(){return Ks=(Ks+1)%Number.MAX_SAFE_INTEGER,Ks.toString()}const Ys=new Map,Da=S=>{if(Ys.has(S))return;const _=setTimeout(()=>{Ys.delete(S),jn({type:"REMOVE_TOAST",toastId:S})},Yf);Ys.set(S,_)},Zf=(S,_)=>{switch(_.type){case"ADD_TOAST":return{...S,toasts:[_.toast,...S.toasts].slice(0,Kf)};case"UPDATE_TOAST":return{...S,toasts:S.toasts.map(e=>e.id===_.toast.id?{...e,..._.toast}:e)};case"DISMISS_TOAST":{const{toastId:e}=_;return e?Da(e):S.toasts.forEach(h=>{Da(h.id)}),{...S,toasts:S.toasts.map(h=>h.id===e||e===void 0?{...h,open:!1}:h)}}case"REMOVE_TOAST":return _.toastId===void 0?{...S,toasts:[]}:{...S,toasts:S.toasts.filter(e=>e.id!==_.toastId)}}},ds=[];let fs={toasts:[]};function jn(S){fs=Zf(fs,S),ds.forEach(_=>{_(fs)})}function Jf({...S}){const _=Gf(),e=p=>jn({type:"UPDATE_TOAST",toast:{...p,id:_}}),h=()=>jn({type:"DISMISS_TOAST",toastId:_});return jn({type:"ADD_TOAST",toast:{...S,id:_,open:!0,onOpenChange:p=>{p||h()}}}),{id:_,dismiss:h,update:e}}function Dn(){const[S,_]=W.useState(fs);return W.useEffect(()=>(ds.push(_),()=>{const e=ds.indexOf(_);e>-1&&ds.splice(e,1)}),[S]),{...S,toast:Jf,dismiss:e=>jn({type:"DISMISS_TOAST",toastId:e})}}function Qf(S){const[_,e]=W.useState({reasoning:null,isLoading:!1,error:null}),h=W.useCallback(async c=>{e(s=>({...s,isLoading:!0,error:null}));try{const s=await Nn.getEmployeeReasoning(c);e({reasoning:s,isLoading:!1,error:null})}catch(s){e({reasoning:null,isLoading:!1,error:s.message})}},[]),p=W.useCallback(async c=>{e(s=>({...s,isLoading:!0,error:null}));try{const s=await Nn.refreshEmployeeReasoning(c);e({reasoning:s,isLoading:!1,error:null})}catch(s){e({reasoning:null,isLoading:!1,error:s.message})}},[]);return W.useEffect(()=>{S?h(S):e({reasoning:null,isLoading:!1,error:null})},[S,h]),W.useMemo(()=>({..._,refetch:S?()=>h(S):void 0,refresh:S?()=>p(S):void 0}),[_,S,h,p])}function eh(){const[S,_]=W.useState({reasoningData:[],isLoading:!1,error:null}),[e,h]=W.useState({total:0,processed:0,currentItem:"",isProcessing:!1}),p=W.useCallback(async c=>{if(c.length===0){_({reasoningData:[],isLoading:!1,error:null}),h({total:0,processed:0,currentItem:"",isProcessing:!1});return}_(s=>({...s,isLoading:!0,error:null})),h({total:c.length,processed:0,currentItem:"",isProcessing:!0});try{const s=[];for(let i=0;i<c.length;i++){const r=c[i];h(t=>({...t,processed:i,currentItem:r}));try{const t=await Nn.getEmployeeReasoning(r);s.push(t)}catch(t){console.error(`Failed to get reasoning for ${r}:`,t)}}_({reasoningData:s,isLoading:!1,error:null}),h({total:c.length,processed:c.length,currentItem:"",isProcessing:!1})}catch(s){_({reasoningData:[],isLoading:!1,error:s.message}),h(i=>({...i,isProcessing:!1,currentItem:""}))}},[]);return W.useMemo(()=>({...S,batchProgress:e,fetchBatchReasoning:p}),[S,e,p])}const xi=async S=>{try{return S.type==="text/csv"||S.name.endsWith(".csv")?th(S):S.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||S.type==="application/vnd.ms-excel"||S.name.endsWith(".xlsx")||S.name.endsWith(".xls")?rh(S):{data:[],columns:[],error:"Unsupported file type. Please upload a CSV or Excel file."}}catch(_){return{data:[],columns:[],error:`Error parsing file: ${_ instanceof Error?_.message:"Unknown error"}`}}},th=S=>new Promise((_,e)=>{qf.parse(S,{header:!0,skipEmptyLines:!0,complete:h=>{h.errors&&h.errors.length>0;const p=h.data,c=h.meta.fields||[];_({data:p,columns:c})},error:h=>{e(new Error(`CSV parsing error: ${h.message}`))}})}),rh=async S=>Promise.resolve({data:[],columns:[],error:"Excel file parsing is handled by the backend. Please use CSV format for client-side parsing, or upload directly to the API endpoint."}),nh=(S,_="employee")=>{const e=_==="interview"?["hrcode","hr_code","date","interview_date","notes","interview_notes","interview_type","type"]:["full_name","structure_name","section_name","position","sex","status","age","tenure","last_salary_increase","last_position_change","vacation_usage_rate","one_or_two_day_vacations","last_debt_10","last_debt_90","total_trainings","total_personal_cost_azn","position_level","performance_rating_latest","employee_cost","report_date"],h={};return S.forEach(p=>{const c=p.toLowerCase().replace(/[_\s-]/g,"");let s=e.find(i=>i.toLowerCase()===p.toLowerCase());s||(s=e.find(i=>i.toLowerCase().replace(/[_\s-]/g,"")===c)),s||(s=e.find(i=>c.includes(i.toLowerCase().replace(/[_\s-]/g,""))||i.toLowerCase().replace(/[_\s-]/g,"").includes(c))),s?h[p]=s:c==="finalfq"&&(h[p]="performance_rating_latest")}),h},sh=(S,_)=>{const e={},h={};return["hrcode","date","notes"].forEach(c=>{Object.values(_).some(i=>i.toLowerCase()===c.toLowerCase())||(e._global=[...e._global||[],`Required column "${c}" is missing. Please map a column to "${c}".`])}),Object.keys(_).forEach(c=>{const s=_[c];if(s){if(["hrcode","date","notes"].includes(s.toLowerCase())){const i=S.filter(r=>!r[c]||String(r[c]).trim()==="").length;i>0&&(e[c]=[...e[c]||[],`${i} rows have empty values in the ${s} column`])}if(s.toLowerCase()==="date"||s.toLowerCase()==="interview_date"){const i=S.filter(r=>{if(!r[c])return!1;const t=new Date(r[c]);return isNaN(t.getTime())}).length;i>0&&(e[c]=[...e[c]||[],`${i} rows have invalid date values in the ${s} column`])}if(s.toLowerCase()==="interview_type"||s.toLowerCase()==="type"){const i=["stay","exit"],r=S.filter(t=>t[c]?!i.includes(String(t[c]).toLowerCase()):!1).length;r>0&&(h[c]=[...h[c]||[],`${r} rows have invalid interview type values. Valid types: ${i.join(", ")}`])}}}),{isValid:Object.keys(e).length===0,errors:e,warnings:h,mappedColumns:_}},La=(S,_,e="employee")=>{if(e==="interview")return sh(S,_);const h={},p={};Object.values(_).some(r=>r.toLowerCase()==="status")||(h._global=['Status column is required. Please map a column to "status".']);const i=Object.values(_).filter((r,t,n)=>r&&n.indexOf(r)!==t);return i.length>0&&i.forEach(r=>{const t=Object.keys(_).filter(n=>_[n]===r);t.forEach(n=>{h[n]=[...h[n]||[],`Duplicate mapping: "${r}" is also mapped to ${t.filter(l=>l!==n).join(", ")}`]})}),Object.keys(_).forEach(r=>{const t=_[r];if(t){if(t==="status"){const n=S.filter(l=>!l[r]).length;n>0&&(h[r]=[...h[r]||[],`${n} rows have empty values in the Status column`])}if(["age","tenure","last_salary_increase","last_position_change","vacation_usage_rate","one_or_two_day_vacations","last_debt_10","last_debt_90","total_trainings","total_personal_cost_azn","performance_rating_latest","employee_cost"].includes(t)){const n=S.filter(l=>l[r]!==void 0&&l[r]!==null&&l[r]!==""&&isNaN(Number(l[r]))).length;n>0&&(p[r]=[...p[r]||[],`${n} rows have non-numeric values in the ${t} column`])}if(t==="report_date"){const n=S.filter(l=>{if(!l[r])return!1;const a=new Date(l[r]);return isNaN(a.getTime())}).length;n>0&&(p[r]=[...p[r]||[],`${n} rows have invalid date values in the ${t} column`])}}}),{isValid:Object.keys(h).length===0,errors:h,warnings:p,mappedColumns:_}},ih=(S,_)=>S.map(e=>{const h={};return Object.keys(_).forEach(p=>{const c=_[p];if(!c)return;const s=e[p];if(s==null){h[c]=null;return}let i=s;if(c.toLowerCase()==="date"||c.toLowerCase()==="interview_date")try{const r=new Date(s);i=isNaN(r.getTime())?null:r.toISOString()}catch{i=null}else if(c.toLowerCase()==="interview_type"||c.toLowerCase()==="type"){const r=String(s).toLowerCase();i=["stay","exit"].includes(r)?r:"exit"}else i=String(s).trim();c.toLowerCase()==="hr_code"?h.hrcode=i:c.toLowerCase()==="interview_date"?h.date=i:c.toLowerCase()==="interview_notes"?h.notes=i:c.toLowerCase()==="type"?h.interview_type=i:h[c]=i}),h.hrcode||(h.hrcode="Unknown"),h.date||(h.date=new Date().toISOString()),h.notes||(h.notes=""),h.interview_type||(h.interview_type="exit"),h}),ah=(S,_,e="employee")=>e==="interview"?ih(S,_):S.map(h=>{const p={...h};return Object.keys(_).forEach(s=>{const i=_[s];if(!i)return;const r=h[s];if(r==null){i!==s&&(p[i]=null,delete p[s]);return}let t=r;if(["age","tenure","last_salary_increase","last_position_change","vacation_usage_rate","one_or_two_day_vacations","last_debt_10","last_debt_90","total_trainings","total_personal_cost_azn","performance_rating_latest","employee_cost"].includes(i)){const n=Number(r);t=isNaN(n)?null:n}else if(i==="report_date")try{const n=new Date(r);t=isNaN(n.getTime())?null:n.toISOString()}catch{t=null}else t=String(r);p[i]=t,i!==s&&s in p&&delete p[s]}),["hr_code","full_name","structure_name","position","status","tenure","employee_cost","performance_rating_latest"].forEach(s=>{s in p||(["tenure","employee_cost"].includes(s)?p[s]=0:p[s]="Unknown")}),p});function oh({show:S,onClose:_,onUploadSuccess:e}){const[h,p]=W.useState(null),[c,s]=W.useState(!1),[i,r]=W.useState(null),[t,n]=W.useState(!1),[l,a]=W.useState(!1),[o,d]=W.useState([]),[f,u]=W.useState(!1),[g,m]=W.useState({}),[k,E]=W.useState({}),[A,L]=W.useState(!1),[z,R]=W.useState(0);W.useEffect(()=>{S||(p(null),r(null),d([]),u(!1),m({}),E({}),a(!1))},[S]);const I=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?n(!0):x.type==="dragleave"&&n(!1)},B=x=>{x.preventDefault(),x.stopPropagation(),n(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&$(x.dataTransfer.files[0])},H=x=>{x.target.files&&x.target.files[0]&&$(x.target.files[0])},$=async x=>{const w=["text/csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"],N=[".csv",".xlsx",".xls"],P=x.name.substring(x.name.lastIndexOf(".")).toLowerCase();if(!w.includes(x.type)&&!N.includes(P)){r("Please upload a CSV or Excel file");return}p(x),r(null);try{L(!0),R(10);const D=await xi(x);if(R(50),D.error){r(D.error),L(!1);return}R(70);const V=nh(D.columns,"interview");m(V),R(90);const q=La(D.data,V,"interview");E(q.errors),d(D.data.slice(0,10)),u(!0),R(100),L(!1)}catch(D){r(`Error parsing file: ${D instanceof Error?D.message:"Unknown error"}`),L(!1)}},C=(x,w)=>{m(P=>({...P,[x]:w}));const N=La(o,{...g,[x]:w},"interview");E(N.errors)},T=async()=>{if(h){s(!0),r(null);try{const x=await xi(h);if(x.error){r(x.error),s(!1);return}const w=ah(x.data,g,"interview");a(!0);const N=new FormData;N.append("file",h),N.append("data",JSON.stringify(w)),N.append("type","interview");const P=await et.post("/api/data/interviews/upload",N,{headers:{"Content-Type":"multipart/form-data"}});P.data.success?(e?.(),_()):r(P.data.error||"Upload failed")}catch(x){r(x.response?.data?.error||"Upload failed")}finally{s(!1),a(!1)}}},j=()=>{const w=[["hrcode","date","notes","interview_type"],["EMP001","2024-01-15","Employee expressed satisfaction with current role and team dynamics. Mentioned interest in professional development opportunities.","stay"],["EMP002","2024-01-20","Leaving due to better opportunity elsewhere. Feedback on management style and lack of growth opportunities.","exit"],["EMP003","2024-01-25","Positive feedback about work-life balance. Suggested improvements in team communication.","stay"]].map(V=>V.map(q=>`"${q}"`).join(",")).join(`
`),N=new Blob([w],{type:"text/csv"}),P=URL.createObjectURL(N),D=document.createElement("a");D.href=P,D.download="interview_data_template.csv",document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(P)},b=Object.keys(k).length>0,v=f&&!b&&!c&&!l;return S?y.jsx(zr,{children:y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:_,children:y.jsxs(at.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:x=>x.stopPropagation(),className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-purple-50",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx(bo,{className:"h-6 w-6 text-blue-600"}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Interview Data"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Import stay and exit interview data for analysis"})]})]}),y.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",children:y.jsx(Br,{className:"h-6 w-6"})})]}),y.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[y.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(on,{className:"h-5 w-5 text-blue-600"}),y.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Need a template?"})]}),y.jsxs("button",{onClick:j,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",children:[y.jsx(rn,{className:"h-4 w-4"}),y.jsx("span",{children:"Download Template"})]})]}),y.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Required columns: hrcode, date, notes. Optional: interview_type"})]}),y.jsxs("div",{className:lt("border-2 border-dashed rounded-lg p-8 text-center transition-colors",t?"border-blue-500 bg-blue-50":"border-gray-300",h?"border-green-500 bg-green-50":""),onDragEnter:I,onDragLeave:I,onDragOver:I,onDrop:B,children:[y.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:H,className:"hidden",id:"interview-file-input",disabled:c||l}),y.jsxs("div",{className:"space-y-4",children:[h?y.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[y.jsx(on,{className:"h-8 w-8 text-green-600"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-green-900",children:h.name}),y.jsxs("p",{className:"text-xs text-green-600",children:[(h.size/1024).toFixed(1)," KB"]})]})]}):y.jsxs(y.Fragment,{children:[y.jsx(Ar,{className:"h-12 w-12 text-gray-400 mx-auto"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Drop your interview data file here"}),y.jsx("p",{className:"text-sm text-gray-500",children:"or click to browse"})]})]}),y.jsx("label",{htmlFor:"interview-file-input",className:lt("inline-flex items-center px-4 py-2 border border-transparent rounded-md text-sm font-medium cursor-pointer transition-colors",c||l?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:h?"Change File":"Select File"})]})]}),A&&y.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),y.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Parsing file..."})]}),y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:y.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${z}%`}})})]}),i&&y.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ur,{className:"h-5 w-5 text-red-600"}),y.jsx("span",{className:"text-sm font-medium text-red-900",children:"Error"})]}),y.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),b&&y.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx(Ur,{className:"h-5 w-5 text-yellow-600"}),y.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"Validation Issues"})]}),y.jsx("div",{className:"space-y-1",children:Object.entries(k).map(([x,w])=>y.jsxs("div",{className:"text-sm text-yellow-700",children:[y.jsxs("strong",{children:[x,":"]})," ",w.join(", ")]},x))})]}),f&&y.jsxs("div",{className:"mt-6 space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Column Mapping"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(g).map(x=>y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("span",{className:"text-sm text-gray-600 w-32 truncate",children:x}),y.jsx("span",{className:"text-gray-400",children:""}),y.jsxs("select",{value:g[x]||"",onChange:w=>C(x,w.target.value),className:"flex-1 px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"",children:"Skip this column"}),y.jsx("option",{value:"hrcode",children:"HR Code"}),y.jsx("option",{value:"date",children:"Interview Date"}),y.jsx("option",{value:"notes",children:"Interview Notes"}),y.jsx("option",{value:"interview_type",children:"Interview Type"})]})]},x))})]}),f&&o.length>0&&y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Preview"}),y.jsx("div",{className:"border rounded-lg overflow-hidden",children:y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsx("tr",{children:Object.keys(o[0]).map(x=>y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:x},x))})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((x,w)=>y.jsx("tr",{className:w%2===0?"bg-white":"bg-gray-50",children:Object.values(x).map((N,P)=>y.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 max-w-xs truncate",children:String(N)},P))},w))})]})})})]})]}),y.jsxs("div",{className:"flex items-center justify-between p-6 border-t bg-gray-50",children:[y.jsx("div",{className:"flex items-center space-x-2",children:l&&y.jsxs(y.Fragment,{children:[y.jsx(En,{className:"h-5 w-5 text-blue-600 animate-pulse"}),y.jsx("span",{className:"text-sm text-gray-600",children:"Processing with AI..."})]})}),y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("button",{onClick:_,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),y.jsx("button",{onClick:T,disabled:!v,className:lt("px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",v?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:c?"Uploading...":l?"Processing...":"Upload & Process"})]})]})]})})}):null}const Xn=["employee_id","survey_date","overall_satisfaction"],Kn=["work_life_balance","career_development","management_rating","team_collaboration","compensation_satisfaction"],lh={employee_id:["employee_id","emp_id","id","employee","worker_id","staff_id"],survey_date:["survey_date","date","survey_time","timestamp","created_date"],overall_satisfaction:["overall_satisfaction","satisfaction","overall_score","total_satisfaction","general_satisfaction"],work_life_balance:["work_life_balance","wlb","balance","work_balance","life_balance"],career_development:["career_development","career","development","growth","career_growth"],management_rating:["management_rating","management","manager_rating","supervisor_rating","leadership"],team_collaboration:["team_collaboration","collaboration","teamwork","team_work","team_rating"],compensation_satisfaction:["compensation_satisfaction","compensation","salary_satisfaction","pay_satisfaction","benefits"]};class ch{async uploadEngagementData(_){try{const e=new FormData;return e.append("file",_),e.append("dataType","engagement"),(await et.post("/api/data/upload/engagement",e,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})).data}catch(e){throw console.error("Error uploading engagement data:",e),new Error(e instanceof Error?`Upload failed: ${e.message}`:"Failed to upload engagement data")}}validateEngagementFormat(_){const e={},h={};if(!_||_.length===0)return e.general=["No data provided"],{isValid:!1,errors:e,warnings:h,requiredColumns:Xn,optionalColumns:Kn,detectedColumns:[]};const p=Object.keys(_[0]||{}),c=[];for(const i of Xn)this.findColumnMatch(i,p)||c.push(i);return c.length>0&&(e.columns=[`Missing required columns: ${c.join(", ")}`]),_.forEach((i,r)=>{const t=this.extractValue(i,"employee_id",p);(!t||t.toString().trim()==="")&&(e[`row_${r}`]||(e[`row_${r}`]=[]),e[`row_${r}`].push("Employee ID is required"));const n=this.extractValue(i,"survey_date",p);(!n||isNaN(Date.parse(n)))&&(e[`row_${r}`]||(e[`row_${r}`]=[]),e[`row_${r}`].push("Invalid survey date format"));const l=this.extractValue(i,"overall_satisfaction",p);if(l!=null){const a=Number(l);isNaN(a)?(e[`row_${r}`]||(e[`row_${r}`]=[]),e[`row_${r}`].push("Overall satisfaction must be numeric")):(a<1||a>10)&&(h[`row_${r}`]||(h[`row_${r}`]=[]),h[`row_${r}`].push("Satisfaction score outside typical range (1-10)"))}for(const a of Kn.slice(1)){const o=this.extractValue(i,a,p);if(o!=null&&o!==""){const d=Number(o);isNaN(d)&&(h[`row_${r}`]||(h[`row_${r}`]=[]),h[`row_${r}`].push(`${a} should be numeric`))}}}),{isValid:Object.keys(e).length===0,errors:e,warnings:h,requiredColumns:Xn,optionalColumns:Kn,detectedColumns:p}}async processEngagementData(_){if(!_||_.length===0)throw new Error("No data to process");const e=Object.keys(_[0]||{}),h=[];for(const p of _)try{const c=this.extractValue(p,"employee_id",e),s=this.extractValue(p,"survey_date",e),i=Number(this.extractValue(p,"overall_satisfaction",e));if(!c||!s||isNaN(i))continue;const r=new Date(s);if(isNaN(r.getTime()))continue;const t={employeeId:c.toString(),surveyDate:r,overallSatisfaction:i},n=this.extractNumericValue(p,"work_life_balance",e);n!==null&&(t.workLifeBalance=n);const l=this.extractNumericValue(p,"career_development",e);l!==null&&(t.careerDevelopment=l);const a=this.extractNumericValue(p,"management_rating",e);a!==null&&(t.managementRating=a);const o=this.extractNumericValue(p,"team_collaboration",e);o!==null&&(t.teamCollaboration=o);const d=this.extractNumericValue(p,"compensation_satisfaction",e);d!==null&&(t.compensationSatisfaction=d);const f={};for(const[u,g]of Object.entries(p))!this.isStandardColumn(u)&&g!==null&&g!==void 0&&g!==""&&(f[u]=g);Object.keys(f).length>0&&(t.additionalMetrics=f),h.push(t)}catch(c){console.warn("Error processing engagement data row:",c);continue}return h}async getEngagementData(_){try{const e=new URLSearchParams;return _?.employeeId&&e.append("employeeId",_.employeeId),_?.dateRange&&(e.append("startDate",_.dateRange.start.toISOString()),e.append("endDate",_.dateRange.end.toISOString())),_?.satisfactionRange&&(e.append("minSatisfaction",_.satisfactionRange.min.toString()),e.append("maxSatisfaction",_.satisfactionRange.max.toString())),_?.department&&e.append("department",_.department),(await et.get(`/api/data/engagement?${e.toString()}`)).data.map(p=>({...p,surveyDate:new Date(p.surveyDate)}))}catch(e){throw console.error("Error fetching engagement data:",e),new Error("Failed to fetch engagement data")}}async getEngagementSummary(){try{const _=await et.get("/api/data/engagement/summary");return{..._.data,latestSurveyDate:new Date(_.data.latestSurveyDate),oldestSurveyDate:new Date(_.data.oldestSurveyDate)}}catch(_){throw console.error("Error fetching engagement summary:",_),new Error("Failed to fetch engagement summary")}}prepareForAnalysis(_){return _.map(e=>{const h={overall_satisfaction:e.overallSatisfaction};if(e.workLifeBalance!==void 0&&(h.work_life_balance=e.workLifeBalance),e.careerDevelopment!==void 0&&(h.career_development=e.careerDevelopment),e.managementRating!==void 0&&(h.management_rating=e.managementRating),e.teamCollaboration!==void 0&&(h.team_collaboration=e.teamCollaboration),e.compensationSatisfaction!==void 0&&(h.compensation_satisfaction=e.compensationSatisfaction),e.additionalMetrics)for(const[s,i]of Object.entries(e.additionalMetrics))typeof i=="number"&&(h[s]=i);const p=Object.values(h),c=p.reduce((s,i)=>s+i,0)/p.length;return{employeeId:e.employeeId,metrics:h,surveyDate:e.surveyDate,overallScore:c}})}findColumnMatch(_,e){const h=lh[_]||[_];for(const p of h){const c=e.find(s=>s.toLowerCase().trim()===p.toLowerCase().trim());if(c)return c}return null}extractValue(_,e,h){const p=this.findColumnMatch(e,h);return p?_[p]:null}extractNumericValue(_,e,h){const p=this.extractValue(_,e,h);if(p==null||p==="")return null;const c=Number(p);return isNaN(c)?null:c}isStandardColumn(_){return[...Xn,...Kn].some(h=>this.findColumnMatch(h,[_])!==null)}}const Fa=new ch;function uh({show:S,onClose:_,onUploadSuccess:e}){const[h,p]=W.useState(null),[c,s]=W.useState(!1),[i,r]=W.useState(null),[t,n]=W.useState(!1),[l,a]=W.useState(!1),[o,d]=W.useState(0),[f,u]=W.useState([]),[g,m]=W.useState(!1),[k,E]=W.useState({});W.useEffect(()=>{S||(p(null),r(null),u([]),m(!1),E({}),a(!1))},[S]);const A=()=>{const B=`employee_id,survey_date,overall_satisfaction,work_life_balance,career_development,management_rating,team_collaboration,compensation_satisfaction
EMP001,2024-01-15,8,7,6,8,9,7
EMP002,2024-01-15,6,5,7,6,8,5
EMP003,2024-01-16,9,8,9,9,8,8`,H=new Blob([B],{type:"text/csv"}),$=window.URL.createObjectURL(H),C=document.createElement("a");C.href=$,C.download="engagement_survey_template.csv",C.click(),window.URL.revokeObjectURL($)},L=B=>{B.preventDefault(),B.stopPropagation(),n(!1);const H=Array.from(B.dataTransfer.files);H.length>0&&z(H[0])},z=async B=>{r(null),p(B);const H=[".csv",".xlsx",".xls"],$=B.name.toLowerCase().substring(B.name.lastIndexOf("."));if(!H.includes($)){r("Please upload a CSV or Excel file");return}await R(B)},R=async B=>{a(!0),d(0);try{const H=setInterval(()=>{d(C=>Math.min(C+10,90))},100),$=await xi(B);if(clearInterval(H),d(100),$.data&&$.data.length>0){u($.data);const C=Fa.validateEngagementFormat($.data);E(C.errors),m(!0)}else r("No data found in the file")}catch(H){r(H.message||"Failed to parse file")}finally{a(!1),setTimeout(()=>d(0),1e3)}},I=async()=>{if(h){s(!0),r(null);try{const B=await Fa.uploadEngagementData(h);B.success?(e?.(),_()):r(B.errors?.[0]?.message||"Upload failed")}catch(B){r(B.message||"Upload failed")}finally{s(!1)}}};return S?y.jsx(zr,{children:y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:y.jsxs(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-white dark:bg-gray-900 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:y.jsx(Ni,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Upload Engagement Survey Data"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Upload employee engagement and satisfaction survey data"})]})]}),y.jsx("button",{onClick:_,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:y.jsx(Br,{className:"w-5 h-5 text-gray-500"})})]}),y.jsxs("div",{className:"p-6 space-y-6 max-h-[calc(90vh-120px)] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(on,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Need a template?"}),y.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Download our sample CSV template with the correct format"})]})]}),y.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[y.jsx(rn,{className:"w-4 h-4"}),"Download Template"]})]}),y.jsx("div",{className:lt("border-2 border-dashed rounded-lg p-8 text-center transition-colors",t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"),onDrop:L,onDragOver:B=>{B.preventDefault(),n(!0)},onDragLeave:()=>n(!1),children:y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:y.jsx(Ar,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:h?h.name:"Drop your engagement survey file here"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["or"," ",y.jsxs("label",{className:"text-blue-600 hover:text-blue-700 cursor-pointer",children:["browse to upload",y.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:B=>B.target.files?.[0]&&z(B.target.files[0]),className:"hidden"})]})]}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Supports CSV and Excel files (max 10MB)"})]})]})}),l&&y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(En,{className:"w-5 h-5 text-blue-600 animate-pulse"}),y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Parsing engagement survey data..."})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]}),g&&f.length>0&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:["Data Preview (",f.length," records)"]}),y.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 overflow-x-auto",children:y.jsxs("table",{className:"w-full text-sm",children:[y.jsx("thead",{children:y.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:Object.keys(f[0]||{}).slice(0,6).map(B=>y.jsx("th",{className:"text-left p-2 font-medium text-gray-700 dark:text-gray-300",children:B},B))})}),y.jsx("tbody",{children:f.slice(0,5).map((B,H)=>y.jsx("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:Object.values(B).slice(0,6).map(($,C)=>y.jsx("td",{className:"p-2 text-gray-600 dark:text-gray-400",children:String($).length>30?String($).substring(0,30)+"...":String($)},C))},H))})]})})]}),Object.keys(k).length>0&&y.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx(Ur,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),y.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100",children:"Validation Issues"})]}),y.jsx("div",{className:"space-y-1",children:Object.entries(k).map(([B,H])=>y.jsx("div",{children:H.map(($,C)=>y.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[" ",$]},C))},B))})]}),i&&y.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Ur,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),y.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:i})]})}),y.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[y.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Required Fields"}),y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"Required:"})," employee_id, survey_date, overall_satisfaction"]}),y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:[y.jsx("strong",{children:"Optional:"})," work_life_balance, career_development, management_rating, team_collaboration, compensation_satisfaction"]})]}),y.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[y.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"Cancel"}),y.jsx("button",{onClick:I,disabled:!h||c||Object.keys(k).length>0,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2",children:c?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):y.jsxs(y.Fragment,{children:[y.jsx(Ar,{className:"w-4 h-4"}),"Upload Engagement Data"]})})]})]})]})})}):null}const yn=S=>typeof S!="number"||Number.isNaN(S)?0:Math.min(Math.max(S,0),1),dh=S=>S>=.85?{label:"Very good",tone:"text-emerald-600",tip:"Model looks healthy  keep refreshing with new hires & exits."}:S>=.7?{label:"Good",tone:"text-emerald-500",tip:"Results are solid. Consider adding recent exits or feedback to keep it sharp."}:S>=.55?{label:"OK",tone:"text-amber-500",tip:"Performance is average; enrich features (engagement, performance, training) before retraining."}:S>=.4?{label:"Bad",tone:"text-orange-500",tip:"Churn signal is weak  inspect data quality, normalize salaries, and trim noisy features."}:{label:"Very bad",tone:"text-red-500",tip:"Model needs immediate attention. Re-run training with cleaned data and balanced sampling."};function fh({accuracy:S,precision:_,recall:e,f1:h,rocAuc:p}){const c=[yn(S),yn(_),yn(e),yn(h),yn(p)],s=c.reduce((n,l)=>n+l,0)/c.length,i=Math.round(s*100),r=dh(s),t=Math.round((s||0)*180);return y.jsxs("div",{className:"p-4 bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative w-32 h-32",children:[y.jsx("div",{className:"absolute inset-0 rounded-full bg-gray-100 dark:bg-gray-900 overflow-hidden",style:{background:`conic-gradient(var(--gauge-color) ${t}deg, transparent ${t}deg 180deg)`},children:y.jsx("div",{className:"absolute inset-3 rounded-full bg-white dark:bg-gray-900",style:{border:"1px solid rgba(0,0,0,0.05)"}})}),y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center",children:[y.jsx("span",{className:"text-sm uppercase text-gray-500 dark:text-gray-400 tracking-wide",children:"Model health"}),y.jsxs("span",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:[i,"%"]})]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:`text-lg font-semibold ${r.tone}`,children:r.label}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.tip})]})]})}const hh=[".csv","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].join(","),Ba=["Oracle","PostgreSQL","MySQL","SQL Server"],wn=[{key:"identifier",label:"Unique Employee ID (Identifier)",description:"Unique Employee ID/Code (e.g., HR_CODE). Must be unique for each employee.",required:!0,notes:"Data Type: Text"},{key:"name",label:"Full Name",description:"Employee's full display name (e.g., FULL_NAME).",required:!0,notes:"Data Type: Text"},{key:"department",label:"Department",description:"Department or division name (e.g., STRUCTURE_NAME).",required:!0,notes:"Data Type: Text"},{key:"position",label:"Position/Role",description:"Job title or role (e.g., POSITION).",required:!0,notes:"Data Type: Text"},{key:"cost",label:"Employee Cost",description:"Salary or total cost of the employee (e.g., EMPLOYEE_COST). Must be a numerical value. Required in Wage mode.",required:!0,notes:"Data Type: Number"},{key:"status",label:"Status (Target Variable)",description:"Employment status, used as the target for churn prediction (e.g., Active, Resigned, Terminated).",required:!0,notes:"Data Type: Text"},{key:"manager_id",label:"Manager ID",description:"Manager identifier for scoping and governance (e.g., MANAGER_ID).",required:!0,notes:"Data Type: Text"},{key:"tenure",label:"Tenure",description:"Length of service with the company (e.g., TENURE). Should be a numerical value (e.g., years or months).",required:!0,notes:"Data Type: Number"},{key:"termination_date",label:"Termination Date",description:"Date of employment termination (e.g., YYYY-MM-DD). This field is optional and should only be filled for terminated employees.",required:!1,notes:"Data Type: Date/Text"}],wi=localStorage.getItem("settings.dataMode")==="performance"?"performance":"wage",$a=wi==="performance"?[{key:"identifier",label:"Unique Employee ID (Identifier)",description:"",required:!0},{key:"name",label:"Full Name",description:"",required:!0},{key:"department",label:"Department",description:"",required:!0},{key:"position",label:"Position/Role",description:"",required:!0},{key:"performance_rating_latest",label:"Latest Performance Rating",description:"Numeric rating (e.g., 1-5). Required in Performance mode.",required:!0},{key:"status",label:"Status (Target Variable)",description:"",required:!0},{key:"manager_id",label:"Manager ID",description:"",required:!0},{key:"tenure",label:"Tenure",description:"",required:!0},{key:"termination_date",label:"Termination Date",description:"",required:!1}]:wn,Yn=["hr_code","full_name","structure_name","position","status","manager_id","tenure","termination_date"],za=[{key:"salary_percentile_dept",label:"Salary Percentile (Dept)",type:"number",example:.42,why:"Peer-relative pay positioning"},{key:"hike_months_since",label:"Months Since Last Salary Hike",type:"number",example:14,why:"Pay stagnation signal"},{key:"promo_months_since",label:"Months Since Last Promotion",type:"number",example:28,why:"Career stagnation risk"},{key:"equity_value_usd",label:"Equity Value (USD)",type:"number",example:25e3,why:"Golden handcuffs effect"},{key:"equity_refresh_date",label:"Equity Refresh Date",type:"date",example:"2024-06-01",why:"Recent refresh reduces risk"},{key:"performance_rating_latest",label:"Latest Performance Rating",type:"number",example:4.2,why:"Risk stabilizer/trigger"},{key:"performance_trend_4q",label:"Performance Trend (4 quarters)",type:"number",example:-.4,why:"Downward trend increases risk"},{key:"engagement_score",label:"Engagement Score",type:"number",example:58,why:"Low engagement raises risk"},{key:"engagement_trend_6m",label:"Engagement Trend (6 months)",type:"number",example:-.6,why:"Recent drop is a warning"},{key:"overtime_hours_90d",label:"Overtime Hours (90 days)",type:"number",example:55,why:"Overwork/burnout risk"},{key:"after_hours_ratio_90d",label:"After-hours Work Ratio (90 days)",type:"number",example:.32,why:"Sustained after-hours pattern"},{key:"absences_90d",label:"Absences (90 days)",type:"number",example:3,why:"Attendance signals"},{key:"unscheduled_absences_90d",label:"Unscheduled Absences (90 days)",type:"number",example:1,why:"Potential disengagement"},{key:"manager_id",label:"Manager ID",type:"string",example:"M-102",why:"Manager relationship rules"},{key:"manager_feedback_freq_90d",label:"Manager 1:1s (90 days)",type:"number",example:1,why:"Low cadence is a risk"},{key:"manager_span",label:"Manager Span of Control",type:"number",example:14,why:"High span reduces attention"},{key:"team_size",label:"Team Size",type:"number",example:9,why:"Context for span/peer effects"},{key:"peer_resignations_90d",label:"Peer Resignations (90 days)",type:"number",example:2,why:"Contagion effect"},{key:"promotions_24m",label:"Promotions (24 months)",type:"number",example:0,why:"Progress opportunity"},{key:"role_market_heat_index",label:"Market Heat Index (1-10)",type:"number",example:8,why:"External demand"},{key:"internal_mobility_attempts_12m",label:"Internal Applications (12 months)",type:"number",example:2,why:"Blocked mobility increases risk"},{key:"work_location",label:"Work Location",type:"string",example:"onsite|remote|hybrid",why:"Fit with preference/policy"},{key:"commute_time_min",label:"Daily Commute (minutes)",type:"number",example:70,why:"Commute fatigue"},{key:"training_hours_12m",label:"Training Hours (12 months)",type:"number",example:6,why:"Investment perception"},{key:"last_training_date",label:"Last Training Date",type:"date",example:"2024-03-15",why:"Recency matters"},{key:"pto_balance_days",label:"PTO Balance (days)",type:"number",example:24,why:"High unused PTO can signal issues"},{key:"pto_carryover_flag",label:"PTO Carryover",type:"boolean",example:!0,why:"Delayed usage warning"},{key:"sentiment_composite",label:"Composite Sentiment",type:"number",example:-.45,why:"Surveys + interviews"},{key:"manager_churn_risk",label:"Manager Churn Risk",type:"number",example:.62,why:"Manager risk contagion"},{key:"department_budget_change_pct_12m",label:"Dept Budget Change % (12m)",type:"number",example:-12,why:"Downsizing stress"},{key:"hiring_freeze_flag",label:"Hiring Freeze Flag",type:"boolean",example:!0,why:"Growth stagnation signal"},{key:"layoff_event_recent_180d",label:"Layoff Event in Last 180 Days",type:"boolean",example:!1,why:"Psychological safety"},{key:"warnings_12m",label:"Written Warnings (12m)",type:"number",example:1,why:"HR risk marker"},{key:"pip_active_flag",label:"Performance Improvement Plan Active",type:"boolean",example:!1,why:"Very high churn risk"},{key:"policy_violations_12m",label:"Policy Violations (12m)",type:"number",example:0,why:"Employment risk"},{key:"grievance_count_12m",label:"Grievances Filed (12m)",type:"number",example:0,why:"Employee relations strain"},{key:"on_call_shifts_90d",label:"On-call Shifts (90d)",type:"number",example:8,why:"Fatigue and stress"},{key:"incident_pages_90d",label:"Incident Pages (90d)",type:"number",example:4,why:"Sleep disruption risk"},{key:"customer_escalations_90d",label:"Customer Escalations (90d)",type:"number",example:3,why:"High pressure exposure"},{key:"deadline_slips_90d",label:"Project Deadline Slips (90d)",type:"number",example:2,why:"Delivery stress"},{key:"project_cancellation_180d",label:"Project Cancellations (180d)",type:"number",example:1,why:"Motivation impact"},{key:"travel_days_12m",label:"Travel Days (12m)",type:"number",example:35,why:"Travel fatigue"},{key:"travel_fatigue_score",label:"Travel Fatigue Score (0-1)",type:"number",example:.7,why:"Sustained travel burden"},{key:"schedule_change_count_90d",label:"Schedule Changes (90d)",type:"number",example:8,why:"Instability"},{key:"shift_variability_index",label:"Shift Variability Index (0-1)",type:"number",example:.5,why:"Irregular hours stress"},{key:"flexible_schedule_flag",label:"Flexible Schedule",type:"boolean",example:!0,why:"Stabilizes work-life fit"},{key:"remote_preference",label:"Remote Preference",type:"string",example:"remote",why:"Policy/preference alignment"},{key:"external_offer_flag",label:"External Offer in Hand",type:"boolean",example:!1,why:"Immediate churn risk"},{key:"internal_offer_flag",label:"Internal Offer in Hand",type:"boolean",example:!1,why:"Retention lever"},{key:"visa_dependency_flag",label:"Visa Dependency",type:"boolean",example:!1,why:"Sensitivity to org changes"},{key:"location_change_12m",label:"Location Changes (12m)",type:"number",example:1,why:"Instability indicator"},{key:"coverage_ratio",label:"Role Coverage Ratio (0-1)",type:"number",example:.6,why:"Single point of failure pressure"},{key:"utilization_rate",label:"Utilization Rate (0-1)",type:"number",example:.45,why:"Low utilization discouragement"},{key:"bench_time_days_90d",label:"Bench Time Days (90d)",type:"number",example:25,why:"Idle time risk"},{key:"recognition_events_12m",label:"Recognition Events (12m)",type:"number",example:0,why:"Appreciation signal"},{key:"mentor_assigned_flag",label:"Mentor Assigned",type:"boolean",example:!0,why:"Support reduces risk"},{key:"certs_12m",label:"Certifications Earned (12m)",type:"number",example:1,why:"Growth indicator"},{key:"months_since_last_cert",label:"Months Since Last Certification",type:"number",example:16,why:"Learning gap"},{key:"months_to_next_vest",label:"Months to Next Equity Vest",type:"number",example:2,why:"Near-term vesting retains"},{key:"feedback_negative_ratio_12m",label:"360 Negative Feedback Ratio (12m)",type:"number",example:.65,why:"Risk of performance mgmt"},{key:"safety_incidents_12m",label:"Safety Incidents (12m)",type:"number",example:0,why:"Operational stressor"},{key:"benefits_change_recent",label:"Recent Benefits Change",type:"boolean",example:!1,why:"Perceived value shift"},{key:"benefits_change_type",label:"Benefits Change Type",type:"string",example:"reduction|improvement",why:"Direction of change"},{key:"ticket_backlog_delta_30d",label:"Ticket Backlog  (30d)",type:"number",example:25,why:"Workload surge"}],vn=({id:S,label:_,type:e="text",name:h,value:p,onChange:c,placeholder:s,required:i=!0,icon:r,...t})=>y.jsxs("div",{children:[y.jsx("label",{htmlFor:S,className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5",children:_}),y.jsxs("div",{className:"relative",children:[r&&y.jsx(r,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500"}),y.jsx("input",{type:e,id:S,name:h,value:p,onChange:c,placeholder:s,required:i,className:`w-full ${r?"pl-9":"pl-3"} pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 shadow-sm text-sm`,...t})]})]}),Ua=({status:S,message:_})=>{if(!_)return null;const e=S==="error",h=e?Ur:un,p=e?"bg-red-50 dark:bg-red-900/20":"bg-green-50 dark:bg-green-900/20",c=e?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400",s=e?"text-red-500":"text-green-500",i=_.includes(`
`);return y.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mt-4 p-3 rounded-lg flex ${i?"flex-col":"items-center gap-2.5"} text-sm ${p}`,children:[y.jsxs("div",{className:`${i?"mb-2 flex items-center gap-2.5":"flex items-center gap-2.5"}`,children:[y.jsx(h,{className:`w-5 h-5 ${s} flex-shrink-0`}),y.jsx("span",{className:c,children:i?_.split(`
`)[0]:_})]}),i&&y.jsx("ul",{className:`${c} mt-1 ml-7 list-disc space-y-1`,children:_.split(`
`).slice(1).map((r,t)=>r.trim()&&y.jsx("li",{children:r.trim()},t))})]})},ph=({children:S,title:_="Coming Soon"})=>y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"opacity-40 pointer-events-none select-none",children:S}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-900/80 rounded-xl",children:y.jsx(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"bg-white dark:bg-gray-800 rounded-lg px-6 py-4 shadow-lg border border-gray-200 dark:border-gray-700",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-full",children:y.jsx(Tr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:_}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This feature is under development"})]})]})})})]});function mh(){const S=Xr(),{toast:_}=Dn(),{activeProject:e,isLoadingProject:h}=Qo(),p=nn(ee=>ee.startPollingTrainingStatus),c=nn(ee=>ee.trainingStatus),[s,i]=W.useState(null),[r,t]=W.useState("idle"),[n,l]=W.useState(""),[a,o]=W.useState(Ba[0]),[d,f]=W.useState({host:"",port:"",username:"",password:"",databaseName:""}),[u,g]=W.useState("idle"),[m,k]=W.useState(""),[E,A]=W.useState(""),[L,z]=W.useState([]),[R,I]=W.useState(!1),[B,H]=W.useState(null),[$,C]=W.useState(null),[T,j]=W.useState([]),b=W.useMemo(()=>new Map(L.map(ee=>[ee.id,ee])),[L]),[v,x]=W.useState(""),[w,N]=W.useState(""),[P,D]=W.useState([]),[V,q]=W.useState(""),[G,F]=W.useState(1e5),[X,O]=W.useState(!1),[M,U]=W.useState(!1),[K,Q]=W.useState(null),[Y,J]=W.useState(null),[ae,ie]=W.useState(null),[Z,ne]=W.useState([]),[re,ue]=W.useState({identifier:"",name:"",department:"",position:"",cost:"",status:"",manager_id:"",tenure:"",termination_date:""}),[ce,te]=W.useState(!1),[de,le]=W.useState("uploading"),[ve,we]=W.useState(0),[Se,_e]=W.useState(!1),[Pe,Fe]=W.useState(!1),[Oe,Me]=W.useState(!1),[Ee,je]=W.useState([]),[Ie,$e]=W.useState(!0),[De,Ze]=W.useState(null),[vt,Ve]=W.useState(""),[xt,ht]=W.useState(!1),[nt,St]=W.useState(!1),[pt,qe]=W.useState(!1),gt=W.useRef(null);eh();const[bt,Ye]=W.useState("files"),[mt,At]=W.useState([]),[tt,oe]=W.useState(!1),[he,be]=W.useState(""),Ne=W.useCallback(async()=>{if(e){oe(!0),be("");try{const fe=(await et.get("/churn/model/metrics")).data;fe?.success?At(fe.data||[]):be(fe?.error||"Failed to load model metrics")}catch(ee){Ue.error("Failed to fetch model metrics",ee),be("Failed to load model metrics")}finally{oe(!1)}}},[e]);W.useEffect(()=>{bt==="mlmodels"&&Ne()},[bt,Ne]);const ze=({label:ee,value:fe})=>{const ye=typeof fe=="number"?(Math.round(Number(fe)*1e3)/1e3).toFixed(3):String(fe);return y.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-md bg-gray-100 dark:bg-gray-700 text-xs",children:[y.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:ee}),y.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:ye})]})},Ae=W.useCallback((ee=!0)=>{const ye=localStorage.getItem("settings.dataMode")==="performance"?[...Yn,"performance_rating_latest"]:[...Yn,"employee_cost"],Re=(ee?[...ye,...za.map(_t=>_t.key)]:[...ye]).join(",")+`
`,st=new Blob([Re],{type:"text/csv;charset=utf-8;"}),Xe=URL.createObjectURL(st),Ge=document.createElement("a");Ge.href=Xe,Ge.download=ee?"churnvision_template_full.csv":"churnvision_template_minimum.csv",document.body.appendChild(Ge),Ge.click(),document.body.removeChild(Ge),URL.revokeObjectURL(Xe)},[]),Je=()=>y.jsxs("div",{className:"mt-4 border border-gray-200 dark:border-gray-700/60 rounded-lg p-4 bg-white/70 dark:bg-gray-800/60",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Data Guide & Templates"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("button",{type:"button",onClick:()=>Ae(!0),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-1",children:[y.jsx(rn,{className:"w-3.5 h-3.5"})," Full CSV Template"]}),y.jsxs("button",{type:"button",onClick:()=>Ae(!1),className:"px-3 py-1.5 text-xs bg-gray-700 text-white rounded-md hover:bg-gray-800 flex items-center gap-1",children:[y.jsx(rn,{className:"w-3.5 h-3.5"})," Minimum Template"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"Required Columns"}),y.jsx("ul",{className:"list-disc ml-5 space-y-1 text-gray-700 dark:text-gray-300",children:(localStorage.getItem("settings.dataMode")==="performance"?[...Yn,"performance_rating_latest"]:[...Yn,"employee_cost"]).map(ee=>y.jsx("li",{children:y.jsx("code",{className:"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:ee})},ee))})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"Recommended Columns"}),y.jsx("div",{className:"max-h-40 overflow-y-auto pr-1",children:y.jsx("ul",{className:"list-disc ml-5 space-y-1 text-gray-700 dark:text-gray-300",children:za.map(ee=>y.jsxs("li",{children:[y.jsx("code",{className:"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded mr-1",children:ee.key}),y.jsxs("span",{className:"opacity-80",children:[ee.label,"  ",ee.why]})]},ee.key))})})]})]}),y.jsxs("p",{className:"text-[11px] text-gray-600 dark:text-gray-400 mt-3",children:["Notes: additional columns not listed will be stored in ",y.jsx("code",{className:"px-1 bg-gray-100 dark:bg-gray-700 rounded",children:"additional_data"})," and can be referenced by business rules as ",y.jsx("code",{className:"px-1 bg-gray-100 dark:bg-gray-700 rounded",children:"emp.<column_name>"}),"."]})]}),Ke=()=>{const ee=L.find(ye=>ye.active),fe=L.length;return y.jsxs("header",{className:"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 border-b border-gray-700/50 relative overflow-hidden dark:border-gray-700",children:[" ",y.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]"}),y.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-500/50 to-transparent"})]}),y.jsx("div",{className:"max-w-[1400px] mx-auto px-8 relative",children:y.jsx("div",{className:"py-8",children:y.jsx("div",{className:"flex items-center justify-between",children:y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex items-center gap-4",children:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200 animate-gradient",children:"Data Management Platform"}),y.jsx("div",{className:"flex items-center gap-2",children:y.jsxs("span",{className:"relative",children:[y.jsxs("span",{className:"px-2.5 py-0.5 text-xs font-medium bg-purple-500/10 text-purple-300 rounded-full border border-purple-500/20 relative z-10 flex items-center gap-1",children:[y.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-purple-400"}),"Enterprise-Ready"]}),y.jsx("div",{className:"absolute inset-0 bg-purple-500/20 rounded-full blur-sm animate-pulse"})]})})]}),y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[fe>0&&y.jsxs("span",{className:"px-2.5 py-0.5 text-xs font-medium bg-blue-500/10 text-blue-300 rounded-full border border-blue-500/20 relative z-10 flex items-center gap-1.5",children:[y.jsx(br,{className:"w-3 h-3"}),fe," Dataset",fe!==1?"s":""]}),ee&&y.jsxs("span",{className:"px-2.5 py-0.5 text-xs font-medium bg-green-500/10 text-green-300 rounded-full border border-green-500/20 relative z-10 flex items-center gap-1.5",children:[y.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-400"}),"Active: ",ee.name]})]}),y.jsx("p",{className:"text-base text-gray-400 max-w-2xl",children:"Seamlessly integrate, transform, and organize your workforce data. Our intelligent platform automates the complex data processes to bring clarity and precision to your HR analytics."})]})})})})})})]})};W.useEffect(()=>{A(""),Be().catch(ee=>{Ue.error("DataManagement: Error fetching initial project list",ee,"DataManagement"),Ze("Failed to load initial project list.")})},[]),W.useEffect(()=>{e?.dbPath?(Ue.info("DataManagement: Active project context changed, fetching related data...",{activeProject:e.name},"DataManagement"),jt(),Ut()):(z([]),H(null),C(null),I(!1))},[e]);const Be=W.useCallback(async()=>{$e(!0),Ze(null);try{const fe=(await et.get("/data-management/projects")).data;Ue.info("DataManagement: Fetched projects",{count:fe.length},"DataManagement"),je(fe||[])}catch(ee){Ue.error("DataManagement: Error fetching projects",ee,"DataManagement"),Ze(ee.message||"Failed to load projects."),je([])}finally{$e(!1)}},[]),Qe=W.useCallback(async ee=>{Ze(null);try{const ye=(await et.post("/data-management/projects/active",{dbPath:ee})).data;if(!ye.success)throw new Error(ye.error||"Failed to set active project.");Ue.info("DataManagement: Set active project requested",{dbPath:ee},"DataManagement")}catch(fe){Ue.error("DataManagement: Error setting active project",fe,"DataManagement"),Ze(fe.message||"Could not set active project.")}finally{}},[]),rt=W.useCallback(async()=>{if(!vt.trim()){Ze("Project name cannot be empty.");return}ht(!0),Ze(null);try{const fe=(await et.post("/data-management/projects",{name:vt.trim()})).data;if(fe.success)Ue.info("DataManagement: Project created successfully",fe.project,"DataManagement"),Ve(""),await Be(),fe.project?.dbPath&&await Qe(fe.project.dbPath);else throw new Error(fe.error||"Failed to create project.")}catch(ee){Ue.error("DataManagement: Error creating project",ee,"DataManagement"),Ze(ee.message||"Could not create project.")}finally{ht(!1)}},[vt,Be,Qe]),ct=W.useCallback(async ee=>{if(gt.current!==ee.path){Ze(null),$e(!0),gt.current=ee.path;try{const ye=(await et.delete(`/data-management/projects/${encodeURIComponent(ee.path)}`)).data;if(ye.success)Ue.info(`DataManagement: Project "${ee.name}" deleted`,void 0,"DataManagement"),await Be();else throw new Error(ye.error||"Failed to delete project.")}catch(fe){Ue.error("DataManagement: Error deleting project",fe,"DataManagement"),Ze(fe.message||"Could not delete project.")}finally{$e(!1),gt.current=null}}},[Be]),Dt=W.useCallback(async()=>{if(!e){Ze("Active project is required to export.");return}qe(!0),Ze(null);try{const fe=(await et.post("/data-management/projects/export",{projectName:e.name,projectPath:e.path})).data;if(fe.success)Ue.info("DataManagement: Project exported successfully",{filePath:fe.filePath},"DataManagement"),St(!1);else throw new Error(fe.error||"Unknown error during project export.")}catch(ee){Ue.error("DataManagement: Error exporting project",ee,"DataManagement"),Ze(ee.message||"Could not export project.")}finally{qe(!1)}},[e]),Ot=W.useCallback(async()=>{qe(!0),Ze(null);try{const fe=(await et.post("/data-management/projects/import")).data;if(fe.success&&fe.importedProject)Ue.info("DataManagement: Project imported successfully",fe.importedProject,"DataManagement"),await Be(),St(!1);else throw new Error(fe.error||"Unknown error during project import.")}catch(ee){Ue.error("DataManagement: Error importing project",ee,"DataManagement"),Ze(ee.message||"Could not import project.")}finally{qe(!1)}},[Be]),jt=W.useCallback(async()=>{if(!e){Ue.warn("fetchDatasets skipped: No active project in context",void 0,"DataManagement"),z([]),I(!1);return}I(!0);try{A(""),Ue.info("Fetching datasets via API for context project...",{activeProject:e.name},"DataManagement");const fe=(await et.get("/data-management/datasets")).data;Ue.info("Datasets received via API",{count:fe.length},"DataManagement");const ye=fe.map(Re=>({id:Re.id,name:Re.name,type:Re.type||"Unknown",size:Re.size||0,uploadedAt:Re.uploadedAt,rowCount:Re.rowCount,active:Re.active,isSnapshot:Re.isSnapshot,snapshotGroup:Re.snapshotGroup||null,snapshotPairDatasetId:Re.snapshotPairDatasetId||null,description:Re.description})),ge=ye.find(Re=>Re.active);ge?(H(ge.id),Ue.info(`Active dataset set: ${ge.name} (ID: ${ge.id})`,void 0,"DataManagement")):(H(null),ye.length>0&&Ue.warn("No active dataset found in the fetched list.",void 0,"DataManagement")),z(ye)}catch(ee){Ue.error("Error fetching datasets via API:",ee,"DataManagement"),z([]),A(ee.message||"Failed to fetch datasets via API.")}finally{I(!1)}},[e]),Lt=W.useCallback(async ee=>{if(window.confirm("Are you sure you want to delete this dataset and its associated model? This action cannot be undone."))try{Ue.info(`Requesting dataset deletion via API: ${ee}`,void 0,"DataManagement");const ye=(await et.delete(`/data-management/datasets/${ee}`)).data;if(ye?.success)Ue.info(`Dataset ${ee} deleted successfully via API. Refreshing list.`,{cancelled:ye.cancelled},"DataManagement"),jt();else throw new Error(ye?.message||"Failed to delete dataset via API")}catch(fe){Ue.error(`Error deleting dataset ${ee} via API:`,fe,"DataManagement"),A(fe.message||"Could not delete dataset.")}},[jt]),Ut=W.useCallback(async()=>{if(!e){Ue.warn("fetchConnections skipped: No active project in context",void 0,"DataManagement"),C(null);return}I(!0);try{Ue.info("Fetching connections via API for context project...",{activeProject:e.name},"DataManagement");const fe=(await et.get("/data-management/connections")).data;Ue.info(`Connections received via API: ${fe.length}`,void 0,"DataManagement");const ye=fe.map(ge=>({id:ge.id,name:ge.name,type:ge.type,host:ge.host,lastConnected:ge.lastConnected||"",status:ge.status||"inactive"}));j(ye),C(ye[0]?.id)}catch(ee){Ue.error("Error fetching connections via API:",ee,"DataManagement"),j([]),C(null)}finally{I(!1)}},[e]),se=W.useCallback(async ee=>{if(ee){U(!0),x("");try{Ue.info(`Requesting table list for connection: ${ee}`);const ye=(await et.get(`/data-management/connections/${ee}/tables`)).data;Ue.info(`Received ${ye?.length??0} tables.`),D(ye||[])}catch(fe){Ue.error(`Error listing tables for connection ${ee}:`,fe,"DataManagement"),U(!1)}finally{U(!1)}}},[]),pe=W.useCallback(async()=>{if(!$||!v||!w){A("Connection, Table, and Dataset Name required.");return}U(!0);try{Ue.info(`Starting import from connection ${$}, table ${v}, dataset ${w}`);const fe=(await et.post("/data-management/import/db",{connectionId:$,tableName:v,datasetName:w})).data;if(fe.success)Ue.info(`Import successful: ${fe.message}`),jt(),x(""),_({title:"Import Successful",description:`Imported data from ${v} table`});else throw new Error(fe.error||fe.message||"Import failed.")}catch(ee){Ue.error("Error importing data:",ee,"DataManagement"),A(ee.message||"Failed to import data."),_({title:"Import Failed",description:ee.message||"Failed to import data from database",variant:"destructive"})}finally{U(!1)}},[$,v,w,jt,_]),xe=W.useCallback(async()=>{if(!d.host||!d.port||!d.username||!d.password||!d.databaseName){k("All fields are required."),g("error");return}try{Ue.info(`Requesting connection creation via API: ${d.host}:${d.port}`,void 0,"DataManagement");const ee=`${a} @ ${d.host}`,ye=(await et.post("/data-management/connections",{name:ee,type:a,host:d.host,port:parseInt(d.port),username:d.username,password:d.password,databaseName:d.databaseName})).data;if(ye?.success)Ue.info("Connection created successfully via API. Refreshing list.",void 0,"DataManagement"),Ut(),k("Connection created successfully.");else throw new Error(ye?.message||"Failed to create connection via API")}catch(ee){Ue.error("Error creating connection via API:",ee,"DataManagement"),k(ee.message||"Could not create connection."),g("error")}},[a,d,Ut]),ke=async()=>{if(Me(!1),J(null),!s||!Le()){t("error"),l("Please select a file and map all required columns.");return}try{t("testing"),l("Running data validation checks...");const ee=await qt(s),fe=wr(ee,re);if(J(fe),!fe.valid){Me(!0),t("error"),l("Validation failed. Please review the detected issues.");return}t("uploading"),l("Validation passed. Uploading dataset..."),await Te()}catch(ee){t("error"),l(`Diagnosis error: ${ee instanceof Error?ee.message:"Unknown error"}`)}},Le=()=>wn.every(ee=>!ee.required||!!re[ee.key]),Ce=()=>{S("/?refresh=true")},Te=W.useCallback(async()=>{if(!s||!K||!Le()){l("Please select a file and complete column mapping."),t("error");return}t("uploading"),l("Preparing data for upload..."),we(0),le("uploading"),A("");try{const ge=new FormData;ge.append("file",s),ge.append("columnMapping",JSON.stringify(re)),e&&ge.append("projectName",e.name);const st=(await et.post("/data-management/upload",ge,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Xe=>{const Ge=Math.round(Xe.loaded*100/(Xe.total||100));we(Ge)}})).data;if(st.success)t("success"),l("File uploaded successfully."),jt();else throw new Error(st.message||"Upload failed.")}catch(ge){Ue.error("Error uploading data:",ge,"DataManagement"),t("error"),l(ge.message||"File upload failed."),A(ge.message||"File upload failed.")}const ee=s.name,fe={hr_code:re.identifier,full_name:re.name,structure_name:re.department,position:re.position,employee_cost:re.cost,status:re.status,manager_id:re.manager_id,tenure:re.tenure},ye=JSON.stringify(fe);try{le("uploading"),l("Reading file data...");const ge=ae?(()=>{const It=[ae.headers.join(",")].concat(ae.rows.map(Ft=>Ft.map(Ht=>{const Wt=Ht==null?"":String(Ht);return/[",\n]/.test(Wt)?'"'+Wt.replace(/"/g,'""')+'"':Wt}).join(","))).join(`
`);return new TextEncoder().encode(It).buffer})():await s.arrayBuffer(),Re=new Uint8Array(ge),st=Re.byteLength;we(10),l("Sending file to main process..."),Ue.info("Sending file data via IPC...",{filename:ae?`autofixed_${s.name.replace(/\.(csv|xlsx|xls)$/i,"")}.csv`:s.name,size:st,type:s.type,datasetName:ee.trim(),mappings:ye},"DataManagement");const Xe=new FormData,Ge=new Blob([Re],{type:ae?"text/csv":s.type}),_t=ae?`autofixed_${s.name.replace(/\.(csv|xlsx|xls)$/i,"")}.csv`:s.name;Xe.append("file",Ge,_t),Xe.append("mappings",JSON.stringify(fe)),Xe.append("datasetName",ee.trim()),Xe.append("xDataMode",localStorage.getItem("settings.dataMode")==="performance"?"performance":"wage");const dt=(await et.post("/data-management/upload",Xe,{headers:{"Content-Type":"multipart/form-data"}})).data;if(dt?.success){le("saving"),l("Data saved."),we(100);const We=dt.needsTraining;await jt(),Ue.info("Upload successful via IPC, datasets refreshed.",{result:dt},"DataManagement"),We?(le("training"),l("Data saved. Starting model training..."),e?.id&&p(e.id)):(le("complete"),t("success"),l(dt.message||"File uploaded and processed successfully!"),i(null),te(!1),Q(null),J(null))}else throw new Error(dt?.error||"File processing failed in main process.")}catch(ge){Ue.error("File upload via IPC failed:",ge,"DataManagement"),t("error"),we(0),le("uploading");let Re="Unknown error occurred during upload via IPC";ge instanceof Error?Re=ge.message:typeof ge=="string"&&(Re=ge),l(Re),A(Re)}},[s,K,re,Le,jt,Ce,p,e]);W.useCallback(async()=>{try{if(!e)return;if(!$){A("Select a connection first");return}if(!Le()){A("Complete required column mappings first");return}if(!w.trim()){A("Enter a dataset name");return}I(!0),A("");const ee={hr_code:re.identifier,full_name:re.name,structure_name:re.department,position:re.position,employee_cost:re.cost,status:re.status,manager_id:re.manager_id,tenure:re.tenure},fe={datasetName:w.trim(),mappings:ee,limit:G};if(V&&V.trim().length>0)fe.query=V.trim();else if(v)fe.table=v;else{A("Provide a SQL query or select a table"),I(!1);return}const ye=await et.post(`/api/data/connections/${$}/import`,fe);if(ye.data?.success){if(X)try{await et.post("/api/data/datasets/export-scoped/all-managers",{})}catch{}await jt(),l(`Imported ${ye.data.recordCount} rows from DB`),t("success")}else A(ye.data?.error||"Import failed")}catch(ee){A(ee?.response?.data?.error||ee?.message||"DB import failed")}finally{I(!1)}},[e,$,Le,w,re,V,v,G,X,jt]);const yt=W.useCallback(async()=>{g("testing"),k("");try{const ee={type:a,host:d.host,port:d.port,username:d.username,password:d.password,databaseName:d.databaseName};Ue.info("Testing connection via API...",{params:ee},"DataManagement");const ye=(await et.post("/data-management/test-connection",ee)).data;ye?.success?(g("success"),k(ye.message||"Connection successful!")):(g("error"),k(ye?.error||"Connection test failed (via IPC)"))}catch(ee){Ue.error("Error testing connection via IPC:",ee,"DataManagement"),g("error"),k(ee.message||"Error testing connection via IPC.")}},[d,a]),ot=async ee=>{const fe=ee.target.files;if(!fe||fe.length===0)return;t("idle"),l(""),A(""),te(!1),Q(null),J(null),ue({identifier:"",name:"",department:"",position:"",cost:"",status:"",manager_id:"",tenure:"",termination_date:""});const ye=fe[0];i(ye);try{t("uploading"),l("Processing file...");const ge=await Bt(ye);Q(ge);const Re=Pt(ge);if(t("success"),Re.length>0){let st="File processed with warnings. Please check your data:";Re.forEach(Xe=>{st+=`
- ${Xe}`}),l(st)}else l("File uploaded successfully! Please map the columns below to continue.");te(!0),ut(ge.headers)}catch(ge){t("error"),l(`Failed to process file: ${ge instanceof Error?ge.message:"Unknown error"}`)}},ut=ee=>{const fe={identifier:"",name:"",department:"",position:"",cost:"",status:"",manager_id:"",tenure:"",termination_date:""};ee.forEach(ye=>{const ge=ye.toLowerCase();!fe.identifier&&(ge.includes("id")||ge.includes("code")||ge.includes("number"))&&!ge.includes("name")&&(fe.identifier=ye),!fe.name&&(ge.includes("name")||ge.includes("employee")||ge.includes("emp"))&&ge!==fe.identifier?.toLowerCase()&&(fe.name=ye),!fe.identifier&&!fe.name&&ge.includes("name")&&(fe.identifier=ye),!fe.department&&(ge.includes("department")||ge.includes("dept")||ge.includes("division")||ge.includes("unit"))&&(fe.department=ye),!fe.position&&(ge.includes("position")||ge.includes("title")||ge.includes("role")||ge.includes("job"))&&(fe.position=ye),!fe.cost&&(ge.includes("cost")||ge.includes("salary")||ge.includes("wage")||ge.includes("pay"))&&(fe.cost=ye),!fe.status&&(ge.includes("status")||ge.includes("state")||ge.includes("employed")||ge.includes("active"))&&(fe.status=ye),!fe.tenure&&(ge.includes("tenure")||ge.includes("years")||ge.includes("months")||ge.includes("duration"))&&(fe.tenure=ye),!fe.manager_id&&(ge==="manager_id"||ge.includes("manager"))&&(fe.manager_id=ye)}),ue(fe)},He=ee=>{const{name:fe,value:ye}=ee.target;f(ge=>({...ge,[fe]:ye})),g("idle"),k(""),A("")},Ct=ee=>{const fe=ee.target.value;o(fe);const ye=Nt(fe);f({...d,port:ye})},Nt=ee=>{switch(ee){case"PostgreSQL":return"5432";case"MySQL":return"3306";case"SQL Server":return"1433";case"Oracle":return"1521";default:return""}},Mt=ee=>{if(ee==null||ee==="")return null;const fe=ee.toString().trim();if(["n/a","na","-","null","none","unknown"].includes(fe.toLowerCase()))return null;try{const ye=Number(fe);if(!isNaN(ye))return ye;let ge=fe.replace(/[^0-9.-]/g,"");const Re=ge.match(/\./g);if(Re&&Re.length>1){const Xe=ge.split(".");ge=Xe[0]+"."+Xe.slice(1).join("")}const st=parseFloat(ge);return isNaN(st)?null:st}catch{return null}},Pt=ee=>{const fe=[],ye=["employee","name","id","emp","code","department","dept","division","position","title","role","salary","cost","status","state"];let ge=0;return ee.headers.forEach(Re=>{const st=Re.toLowerCase();ye.some(Xe=>st.includes(Xe))&&ge++}),ge<3&&ee.headers.length>0&&fe.push("Your headers don't appear to match expected column names. Verify your file has employee, department, position, cost, and status information."),ee.rows.length>0&&ee.rows[0].some((st,Xe)=>{const Ge=ee.headers[Xe].toLowerCase(),_t=String(st).toLowerCase();return(_t.includes("employee")||_t.includes("dept")||_t.includes("id")||_t.includes("position")||_t.includes("status"))&&Ge!==_t})&&fe.push("First data row might be another header row. Check if your file has multiple header rows."),ee.headers.forEach((Re,st)=>{ee.rows.every(Ge=>!Ge[st])&&fe.push(`Column "${Re}" appears to be empty in the preview data.`)}),ee.headers.forEach((Re,st)=>{const Xe=Re.toLowerCase();(Xe.includes("salary")||Xe.includes("cost")||Xe.includes("wage")||Xe.includes("amount"))&&ee.rows.some(_t=>{const it=_t[st];return it&&isNaN(Number(it.toString().replace(/[$,]/g,"")))})&&fe.push(`Column "${Re}" appears to contain non-numeric values but looks like it should be numeric.`)}),fe},Bt=async ee=>new Promise((fe,ye)=>{if(ee.name.endsWith(".csv"))vi.parse(ee,{preview:5,complete:ge=>{try{const Re=ge.data[0],st=ge.data.slice(1);Pt({headers:Re,rows:st,totalRows:ge.data.length-1}),fe({headers:Re,rows:st,totalRows:ge.data.length-1})}catch{ye(new Error("Failed to parse CSV file"))}},error:ge=>{ye(ge)}});else if(ee.name.endsWith(".xlsx")||ee.name.endsWith(".xls")){const ge=new FileReader;ge.onload=async Re=>{try{const st=Re.target?.result;if(!st){ye(new Error("Failed to read Excel file"));return}const Xe=new Oa.Workbook;await Xe.xlsx.load(st);const Ge=Xe.getWorksheet(1);if(!Ge){ye(new Error("No worksheet found in Excel file"));return}const _t=[],it=[];Ge.getRow(1).eachCell((Ft,Ht)=>{_t[Ht-1]=Ft.text||`Column${Ht}`});let We=0;Ge.eachRow((Ft,Ht)=>{if(Ht===1||We>=5)return;const Wt=[];Ft.eachCell((Or,$n)=>{Wt[$n-1]=Or.text||""}),it.push(Wt),We++});const It=Ge.rowCount-1;Pt({headers:_t,rows:it,totalRows:It}),fe({headers:_t,rows:it,totalRows:It})}catch{ye(new Error("Failed to parse Excel file"))}},ge.onerror=()=>{ye(new Error("Failed to read Excel file"))},ge.readAsArrayBuffer(ee)}else ye(new Error("Unsupported file format"))}),qt=async ee=>{if(ee.name.endsWith(".csv"))return new Promise((fe,ye)=>{vi.parse(ee,{skipEmptyLines:!1,dynamicTyping:!1,complete:ge=>{try{if(!ge.data||ge.data.length===0){ye(new Error("No data rows found in file"));return}const Re=ge.data,st=Re[0]?.map(Ge=>(Ge??"").toString().trim())??[],Xe=Re.slice(1).map(Ge=>Ge.map(_t=>(_t??"").toString()));fe({headers:st,rows:Xe,totalRows:Xe.length})}catch{ye(new Error("Failed to parse CSV file for validation"))}},error:ge=>ye(ge)})});if(ee.name.endsWith(".xlsx")||ee.name.endsWith(".xls")){const fe=new FileReader;return new Promise((ye,ge)=>{fe.onload=async Re=>{try{const st=Re.target?.result;if(!st){ge(new Error("Failed to read Excel file for validation"));return}const Xe=new Oa.Workbook;await Xe.xlsx.load(st);const Ge=Xe.getWorksheet(1);if(!Ge){ge(new Error("No worksheet found in Excel file"));return}const _t=[],it=[];Ge.getRow(1).eachCell((We,It)=>{_t[It-1]=We.text||`Column${It}`}),Ge.eachRow((We,It)=>{if(It===1)return;const Ft=[];We.eachCell((Ht,Wt)=>{Ft[Wt-1]=Ht.text||""}),it.push(Ft)}),ye({headers:_t,rows:it,totalRows:it.length})}catch{ge(new Error("Failed to parse Excel file for validation"))}},fe.onerror=()=>ge(new Error("Failed to read Excel file for validation")),fe.readAsArrayBuffer(ee)})}throw new Error("Unsupported file format")},ar=(ee,fe)=>{ue(ye=>({...ye,[ee]:fe}))},xr=()=>{switch(a){case"PostgreSQL":return"5432";case"MySQL":return"3306";case"SQL Server":return"1433";case"Oracle":return"1521";default:return"e.g., 5432"}},jr=()=>a==="Oracle"?"Service Name / SID":"Database Name",Er=()=>a==="Oracle"?"e.g., ORCLPDB1":"e.g., my_database",Cr=W.useCallback(async ee=>{if(!e){A("Cannot activate dataset: No active project selected.");return}const fe=e.id;A("");try{Ue.info("Setting active dataset via API...",{datasetId:ee},"DataManagement");const ge=(await et.post(`/data-management/datasets/${ee}/activate`)).data;if(ge?.success)jt(),nn.getState().fetchHomeData(fe,!0),l("Dataset set as active."),t("success");else throw new Error(ge?.error||"Failed to set active dataset via IPC")}catch(ye){Ue.error("Error setting active dataset via IPC:",ye,"DataManagement"),A(ye.message||"Could not set active dataset via IPC.")}},[e,jt]);W.useEffect(()=>{const ee=nn.getState().fetchTrainingStatus;e&&!h&&ee(e.id)},[e,h]);const Tt=ee=>{if(ee===0)return"0 Bytes";const fe=1024,ye=["Bytes","KB","MB","GB","TB"],ge=Math.floor(Math.log(ee)/Math.log(fe));return`${parseFloat((ee/Math.pow(fe,ge)).toFixed(2))} ${ye[ge]}`},wt=ee=>new Date(ee).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),hr=({datasets:ee})=>{const fe=ee.find(ye=>ye.active);return e?y.jsxs(at.section,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-green-300 dark:border-green-700 border-l-4 border-l-green-500 dark:border-l-green-400 mb-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-600/20 rounded-lg",children:y.jsx(br,{className:"w-5 h-5 text-green-700 dark:text-green-300"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50",children:"Active Dataset"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:fe?y.jsxs(y.Fragment,{children:["Currently using dataset ",y.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:fe.name})," from project ",y.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:e.name})," for predictions."]}):y.jsxs(y.Fragment,{children:["No active dataset selected in project ",y.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:e.name}),"."]})})]})]}),fe&&c&&c.status!=="in_progress"&&c.status!=="queued"&&y.jsxs("button",{onClick:Rr,disabled:R,className:"px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md shadow-sm transition-colors disabled:bg-blue-400 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-1.5 dark:bg-blue-500 dark:hover:bg-blue-600 dark:disabled:bg-blue-700",children:[R?y.jsx(zt,{className:"w-3.5 h-3.5 animate-spin"}):y.jsx(Mr,{className:"w-3.5 h-3.5"}),c.status==="complete"?"Retrain Model":"Train Model"]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[y.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 p-3 rounded-lg bg-gray-50 dark:bg-gray-700/60",children:[y.jsx("span",{className:"text-xs uppercase text-gray-500 dark:text-gray-400",children:"Type"}),y.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:fe?.type||"N/A"})]}),y.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 p-3 rounded-lg bg-gray-50 dark:bg-gray-700/60",children:[y.jsx("span",{className:"text-xs uppercase text-gray-500 dark:text-gray-400",children:"Uploaded"}),y.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:fe?wt(fe.uploadedAt):"N/A"})]}),y.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 p-3 rounded-lg bg-gray-50 dark:bg-gray-700/60",children:[y.jsx("span",{className:"text-xs uppercase text-gray-500 dark:text-gray-400",children:"Records"}),y.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:fe?.rowCount?.toLocaleString()||"N/A"})]})]}),fe&&c&&y.jsx(pr,{})]}):null},wr=(ee,fe)=>{const ye={};let ge=!1;const Re=25,st={identifier:"Employee Identifier",name:"Employee Name",department:"Department",position:"Position",cost:"Employee Cost",status:"Employment Status",manager_id:"Manager ID",tenure:"Tenure",termination_date:"Termination Date",performance_rating_latest:"Latest Performance Rating"};return!ee||ee.totalRows===0?{valid:!1,totalRows:ee?.totalRows??0,columnIssues:{general:[{column:"general",fieldName:"Dataset",issueType:"invalid",description:"No data rows detected in the uploaded file.",rowIndices:[],exampleValues:[],suggestion:"Ensure the file contains data below the header row."}]}}:(Object.entries(fe).forEach(([Xe,Ge])=>{if(!Ge)return;const _t=ee.headers.indexOf(Ge);if(_t===-1){ge=!0,ye[Ge]=[{column:Ge,fieldName:st[Xe]||Xe,issueType:"invalid",description:"Mapped column not found in uploaded file headers.",rowIndices:[],exampleValues:[],suggestion:"Verify the column mapping matches the file headers exactly."}];return}const dt=wn.find(We=>We.key===Xe)?.required??!0;if(ye[Ge]||(ye[Ge]=[]),dt){const We=[];let It=0;ee.rows.forEach((Ft,Ht)=>{const Wt=Ft[_t],Or=Wt==null||Wt===""||typeof Wt=="string"&&Wt.trim()==="",$n=String(Wt).trim(),qc=$n==="0"||Number($n)===0;Or&&!qc&&(It+=1,We.length<Re&&We.push(Ht+2))}),It>0&&(ge=!0,ye[Ge].push({column:Ge,fieldName:st[Xe]||Xe,issueType:"empty",description:`${It} empty value${It!==1?"s":""} found`,rowIndices:We,exampleValues:[],suggestion:"Fill in missing values or ensure the correct column is mapped"}))}if(Xe==="cost"){const We=[];let It=0;const Ft=[];ee.rows.forEach((Ht,Wt)=>{const Or=Ht[_t];Or&&Mt(Or)===null&&(It+=1,We.length<Re&&We.push(Wt+2),Ft.length<5&&Ft.push(Or.toString()))}),It>0&&(ge=!0,ye[Ge].push({column:Ge,fieldName:st[Xe],issueType:"type",description:`${It} non-numeric value${It!==1?"s":""} found`,rowIndices:We,exampleValues:Ft,suggestion:"Remove currency symbols, commas, or text. Ensure values are numbers only."}))}if(Xe==="status"){const We=new Map;ee.rows.forEach(It=>{const Ft=It[_t];if(Ft){const Ht=Ft.toString().trim().toLowerCase();We.set(Ht,(We.get(Ht)||0)+1)}}),Number(We.size)>10&&(ge=!0,ye[Ge].push({column:Ge,fieldName:st[Xe],issueType:"format",description:`${We.size} unique status values found (unusually high)`,rowIndices:[],exampleValues:Array.from(We.keys()).slice(0,5),suggestion:'Status should typically be limited values like "Active", "Resigned", "Terminated". Verify column mapping.'}))}}),{valid:!ge,columnIssues:ye,totalRows:ee.totalRows})},Kr=W.useCallback((ee,fe)=>{const ye=[],ge=[...ee.headers],Re=ee.rows.map(it=>[...it]),st=it=>it?ge.indexOf(it):-1,Xe=st(fe.department),Ge=st(fe.manager_id),_t=st(fe.cost);if(Ge>=0){const it=new Map;for(let dt=0;dt<Re.length;dt++){const We=Xe>=0?String(Re[dt][Xe]??"").trim():"",It=String(Re[dt][Ge]??"").trim();if(It)We&&it.set(We,It);else{const Ft=We&&it.get(We)?it.get(We):"UNKNOWN";Re[dt][Ge]=Ft}}ye.push("Filled missing manager_id values with last known per department or UNKNOWN.")}if(_t>=0){for(let it=0;it<Re.length;it++){const dt=Re[it][_t];if(dt==null||String(dt).trim()===""){Re[it][_t]="0";continue}let We=String(dt).trim();We=We.replace(/[^0-9,.-]/g,""),We.includes(",")&&We.includes(".")?We=We.replace(/,/g,""):We.includes(",")&&!We.includes(".")&&(We=We.replace(",","."));const It=Number(We);Re[it][_t]=Number.isFinite(It)?String(It):"0"}ye.push("Normalized cost values and set missing to 0.")}return{preview:{headers:ge,rows:Re,totalRows:ee.totalRows},warnings:ye}},[]),Gt=({results:ee,onClose:fe,onProceed:ye})=>{const[ge,Re]=W.useState({}),st=it=>{Re(dt=>({...dt,[it]:!dt[it]}))},Xe=Object.values(ee.columnIssues).reduce((it,dt)=>it+dt.length,0),Ge=Object.entries(ee.columnIssues).filter(([it,dt])=>dt.length>0).map(([it,dt])=>({column:it,issues:dt})),_t=!Ge.some(({issues:it})=>it.some(dt=>dt.issueType==="format"||dt.issueType==="empty"&&dt.fieldName.toString()==="Employee Identifier"));return y.jsxs("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/70 z-50 flex items-center justify-center p-4",children:[" ",y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-3xl w-full max-h-[80vh] flex flex-col border border-gray-200 dark:border-gray-700",children:[" ",y.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Data Diagnosis Results"}),y.jsx("button",{onClick:fe,className:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-300 transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:ee.valid?"Your data passed all validation checks!":`Found ${Xe} issue${Xe!==1?"s":""} in ${Ge.length} column${Ge.length!==1?"s":""}. Review below or proceed with caution.`})]}),y.jsxs("div",{className:"p-4 overflow-y-auto flex-grow bg-gray-50 dark:bg-gray-800/50 rounded-b-xl",children:[" ",!ee.valid&&y.jsx("div",{className:"space-y-4",children:Ge.map(({column:it,issues:dt})=>y.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-white dark:bg-gray-700 shadow-sm",children:[" ",y.jsxs("button",{onClick:()=>st(it),className:"w-full p-4 flex items-center justify-between bg-gray-100 dark:bg-gray-700/70 hover:bg-gray-200 dark:hover:bg-gray-600/70 text-left transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:it}),y.jsxs("span",{className:"px-2 py-0.5 text-xs bg-red-100 dark:bg-red-500/30 text-red-700 dark:text-red-300 rounded-full border border-red-300 dark:border-red-500/50",children:[" ",dt.length," issue",dt.length!==1?"s":""]})]}),y.jsx("svg",{className:`h-5 w-5 text-gray-500 dark:text-gray-400 transition-transform ${ge[it]?"transform rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),ge[it]&&y.jsxs("div",{className:"p-4 border-t border-gray-300 dark:border-gray-600 space-y-3 bg-white dark:bg-gray-700/50",children:[" ",dt.map((We,It)=>y.jsxs("div",{className:"space-y-2 p-3 bg-gray-50 dark:bg-gray-600/30 rounded-md border border-gray-200 dark:border-gray-500/50",children:[" ",y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsx("div",{className:`mt-0.5 flex-shrink-0 w-4 h-4 rounded-full ${We.issueType==="empty"?"bg-yellow-400 dark:bg-yellow-500":We.issueType==="type"?"bg-purple-400 dark:bg-purple-500":We.issueType==="format"?"bg-blue-400 dark:bg-blue-500":"bg-red-400 dark:bg-red-500"}`}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:We.description}),y.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[We.fieldName," field"]})]})]}),We.exampleValues.length>0&&y.jsxs("div",{className:"ml-6 p-2 bg-gray-100 dark:bg-gray-500/30 rounded text-sm border border-gray-200 dark:border-gray-600/50",children:[" ",y.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Example values:"}),y.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5",children:We.exampleValues.map((Ft,Ht)=>y.jsxs("span",{className:"px-2 py-0.5 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded text-xs shadow-sm",children:[" ",Ft]},Ht))})]}),y.jsxs("div",{className:"ml-6 text-sm",children:[y.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Suggestion:"}),y.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",We.suggestion]})]}),We.rowIndices.length>0&&y.jsxs("div",{className:"ml-6 text-sm text-gray-600 dark:text-gray-400",children:[y.jsx("span",{className:"font-medium",children:"Found in rows:"})," ",We.rowIndices.length>5?`${We.rowIndices.slice(0,5).join(", ")} and ${We.rowIndices.length-5} more`:We.rowIndices.join(", ")]})]},It))]})]},it))})]}),y.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-gray-50 dark:bg-gray-800/50 rounded-b-xl",children:[" ",y.jsx("button",{onClick:fe,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-500 transition-colors shadow-sm",children:"Cancel"}),!ee.valid&&_t&&y.jsx("button",{onClick:ye,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 border border-blue-700 dark:border-blue-500 transition-colors shadow-sm",children:"Try Automatic Fix"}),!ee.valid&&!_t&&y.jsx("button",{onClick:ye,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 border border-red-700 dark:border-red-500 transition-colors shadow-sm",children:"Upload Anyway"}),ee.valid&&y.jsx("button",{onClick:ye,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 border border-green-700 dark:border-green-500 transition-colors shadow-sm",children:"Continue Upload"})]})]})]})},cr=()=>{Me(!1),t("idle"),J(null)},pr=()=>{if(!c||c.status==="idle")return null;let ee="gray",fe=y.jsx(zt,{className:"w-4 h-4 animate-spin"}),ye="bg-gray-50 dark:bg-gray-700/50",ge="border-gray-200 dark:border-gray-600",Re="text-gray-700 dark:text-gray-300";return c.status==="in_progress"||c.status==="queued"?(ee="blue",fe=y.jsx(zt,{className:"w-4 h-4 animate-spin"}),ye="bg-blue-50 dark:bg-blue-900/30",ge="border-blue-300 dark:border-blue-700/50",Re="text-blue-700 dark:text-blue-300"):c.status==="complete"?(ee="green",fe=y.jsx(Bs,{className:"w-4 h-4"}),ye="bg-green-50 dark:bg-green-900/30",ge="border-green-300 dark:border-green-700/50",Re="text-green-700 dark:text-green-300"):c.status==="error"&&(ee="red",fe=y.jsx(Br,{className:"w-4 h-4"}),ye="bg-red-50 dark:bg-red-900/30",ge="border-red-300 dark:border-red-700/50",Re="text-red-700 dark:text-red-300"),y.jsxs("div",{className:`mt-4 p-4 border rounded-lg ${ye} ${ge}`,children:[" ",y.jsxs("div",{className:`flex items-center gap-2 mb-2 ${Re}`,children:[" ",fe,y.jsxs("span",{className:"font-medium",children:["Model Training: ",c?.status?c.status.charAt(0).toUpperCase()+c.status.slice(1):"Loading..."]})]}),y.jsxs("p",{className:`text-sm mb-2 ${Re}`,children:[" ",c?.message||"Loading status..."]}),c?.status==="complete"&&y.jsx("p",{className:`text-xs ${Re} opacity-75`,children:"Model is ready for predictions. You can retrain with new data if needed."}),(c?.status==="in_progress"||c?.status==="queued")&&y.jsxs("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2.5 mb-2",children:[" ",y.jsx("div",{className:`h-2.5 rounded-full ${ee==="blue"?"bg-blue-600 dark:bg-blue-500":"bg-gray-500"}`,style:{width:`${c?.progress||0}%`}})]}),c?.error&&y.jsx("p",{className:`text-sm mt-2 ${ee==="red"?"text-red-600 dark:text-red-400":Re}`,children:c.error})]})},Rr=W.useCallback(async()=>{const ee=L.find(ye=>ye.active);if(!e||!ee||c&&(c.status==="in_progress"||c.status==="queued")){A("Please ensure an active project and dataset are selected, and no training is currently running."),Ue.warn("handleStartTraining: Preconditions not met.",{hasProject:!!e,hasActiveDataset:!!ee,trainingStatus:c},"DataManagement");return}const fe=e.id;A("");try{const ge=(await et.post("/churn/train")).data;if(ge.success&&ge.status)Ue.info("Training successfully queued via API.",{status:ge.status},"DataManagement"),Ue.info(`Triggering global cache polling for training status (Project: ${fe}).`,void 0,"DataManagement"),p(fe);else{const Re=ge.error||"Failed to start training (unknown reason)";throw new Error(Re)}}catch(ye){Ue.error("Error starting training via API:",ye,"DataManagement"),A(ye.response?.data?.detail||ye.message||"Could not start training via API.")}},[e,L,p,c]);return y.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 text-sm",children:[" ",Ke(),y.jsxs("div",{className:"p-6 md:p-8",children:[E&&y.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-red-100 dark:bg-red-900/40 border border-red-300 dark:border-red-600/50 rounded-lg flex items-center gap-3 shadow-sm flex-shrink-0",children:[y.jsx(Ur,{className:"w-5 h-5 text-red-700 dark:text-red-300 flex-shrink-0"}),y.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:E})]}),!h&&e&&y.jsx(hr,{datasets:L}),y.jsxs(at.section,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-6 bg-white dark:bg-gray-800/70 p-6 rounded-xl shadow-lg border border-gray-200/80 dark:border-gray-700/50 flex-shrink-0",children:[y.jsxs("div",{className:"flex items-center justify-between mb-5",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-600/20 rounded-lg",children:y.jsx(ci,{className:"w-5 h-5 text-purple-700 dark:text-purple-300"})}),y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50",children:"Project Management"})]}),y.jsx("button",{onClick:Be,disabled:Ie||h,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 disabled:opacity-50 transition-colors",title:"Refresh project list",children:y.jsx(Mr,{className:`w-5 h-5 ${Ie?"animate-spin":""}`})})]}),y.jsxs("div",{className:"mb-4 p-3 rounded-lg border border-blue-300 dark:border-blue-600/80 bg-blue-50 dark:bg-blue-900/40",children:[" ",y.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Active Project:"}),y.jsx("span",{className:"ml-2 text-sm font-semibold text-blue-700 dark:text-blue-300",children:h?y.jsx(zt,{className:"w-4 h-4 inline animate-spin"}):e?e.name:"None selected"}),!h&&e&&y.jsx("button",{onClick:()=>Qe(null),className:"ml-3 text-xs text-blue-700 dark:text-blue-300 hover:underline focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 rounded",title:"Deactivate project",children:"(Deactivate)"})]}),y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("input",{type:"text",value:vt,onChange:ee=>Ve(ee.target.value),placeholder:"New project name...",disabled:xt,className:"flex-grow px-3 py-2 border border-gray-300 dark:border-gray-500 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-1 focus:ring-purple-500 dark:focus:ring-purple-400 text-sm"}),y.jsxs("button",{onClick:rt,disabled:!vt.trim()||xt,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 dark:disabled:bg-gray-600 dark:disabled:opacity-70 disabled:cursor-not-allowed transition-colors flex items-center gap-1 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:focus:ring-purple-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:[xt?y.jsx(zt,{className:"w-4 h-4 animate-spin"}):y.jsx(na,{className:"w-4 h-4"}),"Create"]})]}),De&&y.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-3",children:["Error: ",De]}),y.jsxs("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-2 space-y-2 bg-gray-100 dark:bg-gray-700/60",children:[" ",Ie?y.jsxs("div",{className:"flex items-center justify-center p-4",children:[y.jsx(zt,{className:"w-5 h-5 animate-spin text-gray-400 dark:text-gray-500"})," /* Adjusted dark spinner color */"]}):Ee.length===0?y.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 p-4",children:"No projects found. Create one above."}):Ee.map(ee=>y.jsxs("div",{className:`flex items-center justify-between p-4 rounded-md transition-all duration-150 ${e?.path===ee.path?"bg-blue-100 dark:bg-blue-800/70 ring-1 ring-blue-500 dark:ring-blue-400":"bg-white dark:bg-gray-700/80 hover:bg-gray-200 dark:hover:bg-gray-600/80"}`,children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e?.path===ee.path?y.jsx(ci,{className:"w-4 h-4 text-blue-600 dark:text-blue-300 flex-shrink-0"}):y.jsx(ru,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 flex-shrink-0"}),y.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",title:ee.name,children:ee.name}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[200px]",title:ee.id,children:ee.id})]}),y.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[!h&&e?.path!==ee.path&&y.jsx("button",{onClick:()=>Qe(ee.dbPath),className:"p-1.5 text-gray-500 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-300 rounded-md transition-colors focus:outline-none focus:ring-1 focus:ring-green-500 dark:focus:ring-green-400",title:"Set as active project",disabled:h,children:y.jsx(un,{className:"w-4 h-4"})}),y.jsx("button",{onClick:fe=>{fe.stopPropagation(),ct(ee)},className:"p-1.5 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-300 rounded-md transition-colors focus:outline-none focus:ring-1 focus:ring-red-500 dark:focus:ring-red-400",title:"Delete project",disabled:h||Ie,children:y.jsx(ui,{className:"w-4 h-4"})})]})]},ee.path))]}),y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex items-center justify-end gap-3",children:y.jsxs(Et,{variant:"outline",onClick:()=>St(!0),disabled:pt,className:"dark:text-gray-300 dark:border-gray-500 dark:hover:bg-gray-700",children:[y.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Import/Export Project"]})})]}),Oe&&K&&Y&&y.jsx(Gt,{results:Y,onClose:cr,onProceed:()=>{const{preview:ee,warnings:fe}=Kr(K,re);ie(ee),ne(fe),Me(!1),J(null),Te()}}),y.jsxs("div",{className:`relative ${!e&&!h?"opacity-50 pointer-events-none":""}`,children:[!e&&!h&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/90 dark:bg-gray-900/90 z-10 rounded-lg",children:y.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-300 dark:border-gray-600",children:"Please select or create a project to manage data."})}),h&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/90 dark:bg-gray-900/90 z-10 rounded-lg",children:y.jsx(zt,{className:"w-8 h-8 animate-spin text-gray-500 dark:text-gray-400"})}),y.jsxs(at.section,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6 bg-white dark:bg-gray-800/70 p-6 rounded-xl shadow-lg border border-gray-200/80 dark:border-gray-700/50",children:[y.jsxs("div",{className:"flex mb-6 border-b border-gray-200 dark:border-gray-600",children:[y.jsx("button",{onClick:()=>Ye("files"),className:`px-4 py-2 text-sm font-medium transition-all duration-200 border-b-2 rounded-t-lg ${bt==="files"?"border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 bg-gray-50/30 dark:bg-gray-700/10"}`,children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ss,{className:"w-4 h-4"}),"Excel/CSV"]})}),y.jsx("button",{onClick:()=>Ye("database"),title:"Database Connection - Live HR System Integration",className:`hidden px-4 py-2 text-sm font-medium border-b-2 rounded-t-lg cursor-pointer transition-all ${bt==="database"?"border-indigo-500 text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"border-transparent text-gray-500 dark:text-gray-400 bg-gray-50/30 dark:bg-gray-700/10 hover:bg-gray-100 dark:hover:bg-gray-600/30"}`,children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(br,{className:"w-4 h-4"}),"DB Connection"]})}),y.jsx("button",{onClick:()=>Ye("mlmodels"),title:"ML Models - View Model Performance and Results",className:`px-4 py-2 text-sm font-medium border-b-2 rounded-t-lg cursor-pointer transition-all ${bt==="mlmodels"?"border-green-500 text-green-600 dark:text-green-400 bg-green-50/50 dark:bg-green-900/20":"border-transparent text-gray-500 dark:text-gray-400 bg-gray-50/30 dark:bg-gray-700/10 hover:bg-gray-100 dark:hover:bg-gray-600/30"}`,children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Fs,{className:"w-4 h-4"}),"ML Models"]})}),y.jsx("button",{title:"API & System Connections - External Integrations","aria-disabled":"true",disabled:!0,className:"hidden px-4 py-2 text-sm font-medium border-b-2 rounded-t-lg transition-all border-transparent text-gray-400 dark:text-gray-500 bg-gray-50/30 dark:bg-gray-700/10 cursor-not-allowed",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Un,{className:"w-4 h-4"}),"External/API"]})})]}),y.jsxs("div",{className:"tab-content",children:[bt==="files"&&y.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[y.jsxs(at.section,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800/70 p-6 rounded-xl shadow-lg border border-gray-200/80 dark:border-gray-700/50",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[y.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:y.jsx(ss,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),y.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Upload Dataset"})]}),y.jsxs("div",{className:"space-y-4 flex-grow",children:[Je(),y.jsxs("label",{htmlFor:"file-upload-input",className:"relative block w-full p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center cursor-pointer hover:border-blue-400 dark:hover:border-blue-500 transition-colors duration-200 bg-gray-50 dark:bg-gray-700/40",children:[y.jsx("input",{id:"file-upload-input",type:"file",accept:hh,onChange:ot,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Select dataset file (CSV or Excel)"}),y.jsx(ss,{className:"mx-auto h-8 w-8 text-gray-400 dark:text-gray-500 mb-2"}),y.jsxs("span",{className:"mt-2 block text-sm font-medium text-gray-600 dark:text-gray-400",children:["Drag & drop or ",y.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"click to upload"})]}),y.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:"CSV, XLS, XLSX (Max 50MB)"})]}),s&&y.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg flex items-center gap-2.5 text-sm border border-blue-200 dark:border-blue-700/50",children:[y.jsx(on,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"}),y.jsxs("span",{className:"text-blue-700 dark:text-blue-300 flex-grow truncate",children:[s.name," (",Math.round(s.size/1024)," KB)"]})]}),ce&&K&&y.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 space-y-6 border border-gray-200 dark:border-gray-700/50 rounded-xl p-6 bg-white dark:bg-gray-800/80 shadow-lg",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Configure Column Mapping"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Please map the columns from your dataset to the required fields for analysis."})]}),y.jsx("button",{onClick:()=>{te(!1),Q(null),J(null),i(null),t("idle"),l("")},className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",title:"Cancel and start over",children:y.jsx(Br,{className:"w-5 h-5"})})]}),y.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700/60",children:[y.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-200 mb-2 flex items-center",children:[y.jsx(Yr,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-blue-300"}),"Column Mapping Guide"]}),y.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mb-3",children:"Map your file columns to the required data fields. Required fields are marked with an asterisk (*)."}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:(wi==="performance"?$a:wn).map(ee=>y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsxs("span",{className:"font-medium text-blue-700 dark:text-blue-200 flex-shrink-0",children:[ee.required&&y.jsx("span",{className:"text-red-500 dark:text-red-400",children:"*"}),ee.label.split(" ")[0],":"]}),y.jsxs("span",{className:"text-blue-600 dark:text-blue-300 text-xs",children:[ee.key==="identifier"&&"Unique employee ID or code",ee.key==="name"&&"Full employee name",ee.key==="department"&&"Department or division",ee.key==="position"&&"Job title or role",ee.key==="cost"&&"Salary or cost (numeric)",ee.key==="status"&&"Employment status",ee.key==="tenure"&&"Years/months of service",ee.key==="termination_date"&&"Exit date (if applicable)"]})]},ee.key))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 pt-2 border-t border-gray-200 dark:border-gray-700/50",children:"Dataset Preview"}),y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Showing first 5 rows of ",K.totalRows," total rows. Scroll to see more columns if needed."]}),y.jsx("div",{className:"border border-gray-200 dark:border-gray-700/50 rounded-lg overflow-hidden shadow-sm bg-gray-50 dark:bg-gray-800/50 max-h-72 overflow-y-auto",children:y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-gray-600",children:[y.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/80 sticky top-0 z-10",children:y.jsx("tr",{children:K.headers.map((ee,fe)=>y.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:ee},fe))})}),y.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600",children:K.rows.map((ee,fe)=>y.jsx("tr",{className:"odd:bg-gray-50 dark:odd:bg-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-700/70 transition-colors duration-150",children:ee.map((ye,ge)=>y.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 max-w-[200px] truncate",title:String(ye),children:String(ye)},ge))},fe))})]})})})]}),y.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200 dark:border-gray-700/50",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3",children:"Map Data Fields"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:(wi==="performance"?$a:wn).map(ee=>y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("label",{htmlFor:`map-${ee.key}`,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[ee.label,ee.required&&y.jsx("span",{className:"text-red-500 dark:text-red-400 ml-1",children:"*"})]}),y.jsx("span",{title:ee.description+(ee.notes?` (${ee.notes})`:""),children:y.jsx(Yr,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 cursor-help"})})]}),y.jsxs("select",{id:`map-${ee.key}`,value:re[ee.key]||"",onChange:fe=>ar(ee.key,fe.target.value),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700/60 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 shadow-sm text-sm","aria-label":`Map column for ${ee.label}`,children:[y.jsx("option",{value:"",children:"Select column..."}),K.headers.map((fe,ye)=>y.jsx("option",{value:fe,children:fe},ye))]})]},ee.key))})]}),y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700/50",children:y.jsx("button",{type:"button",onClick:ke,disabled:!Le()||r==="uploading",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:opacity-70 dark:disabled:bg-gray-500/80 dark:hover:bg-blue-500 dark:disabled:opacity-60 disabled:cursor-not-allowed transition-colors flex items-center gap-2 text-sm font-medium shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:r==="uploading"?y.jsxs(y.Fragment,{children:[y.jsx(zt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):y.jsxs(y.Fragment,{children:[y.jsx(Sn,{className:"w-4 h-4"}),"Upload & Process Data"]})})})]}),r==="uploading"&&y.jsx(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 border border-gray-200 dark:border-gray-700/50 rounded-lg p-4 bg-white dark:bg-gray-800/80 shadow",children:y.jsxs("div",{className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Processing Status"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute left-5 top-0 h-full w-0.5 bg-gray-200 dark:bg-gray-700"}),y.jsxs("div",{className:"relative flex items-center mb-6",children:[y.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-blue-100 dark:bg-blue-900/40",children:y.jsx(zt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"})}),y.jsxs("div",{className:"ml-4 flex-grow",children:[y.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Uploading File"}),y.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:y.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2.5 rounded-full transition-all duration-300",style:{width:`${ve}%`}})})]})]}),y.jsxs("div",{className:"relative flex items-center mb-6",children:[y.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${de==="processing"?"bg-blue-100 dark:bg-blue-900/40":"bg-gray-100 dark:bg-gray-700/60"}`,children:de==="processing"?y.jsx(zt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"}):y.jsx("div",{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),y.jsx("div",{className:"ml-4",children:y.jsx("h4",{className:"text-sm font-medium text-gray-400 dark:text-gray-500",children:"Validating & Processing Data"})})]}),y.jsxs("div",{className:"relative flex items-center mb-6",children:[y.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${de==="saving"?"bg-blue-100 dark:bg-blue-900/40":"bg-gray-100 dark:bg-gray-700/60"}`,children:de==="saving"?y.jsx(zt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"}):y.jsx("div",{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),y.jsx("div",{className:"ml-4",children:y.jsx("h4",{className:"text-sm font-medium text-gray-400 dark:text-gray-500",children:"Saving to Database"})})]}),y.jsxs("div",{className:"relative flex items-center",children:[y.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${de==="training"?"bg-blue-100 dark:bg-blue-900/40":de==="complete"?"bg-green-100 dark:bg-green-900/40":"bg-gray-100 dark:bg-gray-700/60"}`,children:de==="training"?y.jsx(zt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"}):de==="complete"?y.jsx(Bs,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):y.jsx("div",{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),y.jsxs("div",{className:"ml-4 flex-grow",children:[y.jsx("h4",{className:`text-sm font-medium ${de==="training"||de==="complete"?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"}`,children:"Training ML Model"}),de==="training"&&c?.status!=="idle"&&y.jsxs("div",{className:"mt-2",children:[y.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-1",children:y.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2.5 rounded-full transition-all duration-300",style:{width:`${c?.progress||0}%`}})}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:c?.message||"Starting training..."})]})]})]})]})]})}),y.jsx(Ua,{status:r,message:n,type:"upload"})]})]}),y.jsxs(at.section,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.05},className:"hidden bg-white dark:bg-gray-800/70 p-6 rounded-xl shadow-lg border border-gray-200/80 dark:border-gray-700/50",children:[y.jsxs("div",{className:"mb-5",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:y.jsx(bo,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Support Data"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Upload interview and engagement survey data to enrich insights."})]})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-4",children:[y.jsxs(Et,{onClick:()=>{_e(!0)},className:"w-full justify-center bg-emerald-600 hover:bg-emerald-700 text-white text-sm py-2.5 border border-emerald-600 dark:border-emerald-700",children:[y.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Stay Interview"]}),y.jsxs(Et,{onClick:()=>{_e(!0)},className:"w-full justify-center bg-rose-600 hover:bg-rose-700 text-white text-sm py-2.5 border border-rose-600 dark:border-rose-700",children:[y.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Exit Interview"]}),y.jsxs(Et,{onClick:()=>{Fe(!0)},className:"w-full justify-center bg-indigo-600 hover:bg-indigo-700 text-white text-sm py-2.5 border border-indigo-600 dark:border-indigo-700",children:[y.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Engagement Survey"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[y.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[y.jsx("h3",{className:"font-medium text-green-900 dark:text-green-100 mb-1",children:"Stay Interviews"}),y.jsx("p",{className:"text-green-700 dark:text-green-300",children:"Retention feedback from current employees"})]}),y.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[y.jsx("h3",{className:"font-medium text-red-900 dark:text-red-100 mb-1",children:"Exit Interviews"}),y.jsx("p",{className:"text-red-700 dark:text-red-300",children:"Departure feedback from leaving employees"})]}),y.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[y.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Engagement Surveys"}),y.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Employee satisfaction and engagement metrics"})]}),y.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[y.jsx("h3",{className:"font-medium text-purple-900 dark:text-purple-100 mb-1",children:"AI Analysis"}),y.jsx("p",{className:"text-purple-700 dark:text-purple-300",children:"Automated sentiment and theme extraction"})]})]}),y.jsxs("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-2 gap-3",children:[y.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/40 rounded-lg border border-gray-200 dark:border-gray-600",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx(Yr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),y.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:"Interview Columns"}),y.jsx("span",{className:"ml-auto text-[10px] px-1.5 py-0.5 rounded bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200",children:"CSV/XLSX"})]}),y.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[["hrcode","date","notes"].map(ee=>y.jsx("span",{className:"px-2 py-0.5 rounded bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:ee},ee)),y.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200",children:"Optional"}),y.jsx("span",{className:"px-2 py-0.5 rounded bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:"interview_type (stay/exit)"})]})]}),y.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-700/30 rounded-lg border border-blue-200 dark:border-blue-700/60",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx(Yr,{className:"w-4 h-4 text-blue-600 dark:text-blue-300"}),y.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Engagement Columns"}),y.jsx("span",{className:"ml-auto text-[10px] px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",children:"CSV/XLSX"})]}),y.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[["employee_id","survey_date","overall_satisfaction"].map(ee=>y.jsx("span",{className:"px-2 py-0.5 rounded bg-white/80 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 text-blue-900 dark:text-blue-100",children:ee},ee)),y.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/40 border border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-300",children:"Optional"}),["work_life_balance","career_development","management_rating"].map(ee=>y.jsx("span",{className:"px-2 py-0.5 rounded bg-white/80 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 text-blue-900 dark:text-blue-100",children:ee},ee))]})]})]})]}),y.jsxs(at.section,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"bg-white dark:bg-gray-800/70 p-6 rounded-xl shadow-lg border border-gray-200/80 dark:border-gray-700/50 flex-1 overflow-hidden flex flex-col",children:[y.jsxs("div",{className:"flex items-center justify-between mb-5",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/40 rounded-lg",children:y.jsx(on,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Datasets"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>Ce(),className:"p-2 text-gray-400 hover:text-blue-600 dark:text-gray-500 dark:hover:text-blue-400 rounded-md transition-colors",title:"Refresh data on Home page",children:y.jsx(Sn,{className:"w-5 h-5"})}),y.jsx("button",{onClick:jt,className:"p-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors",title:"Refresh dataset list",children:y.jsx(Mr,{className:"w-5 h-5"})})]})]}),y.jsx("div",{className:"overflow-y-auto flex-1 space-y-3 pr-2",children:R?y.jsx("div",{className:"flex items-center justify-center h-32",children:y.jsx(zt,{className:"w-6 h-6 animate-spin text-gray-400 dark:text-gray-500"})}):L.length===0?y.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 space-y-3",children:[y.jsx("p",{children:"No datasets yet. Upload a file from the Excel/CSV tab above or import data from a connection."}),y.jsx("div",{className:"flex justify-center",children:y.jsx(Et,{size:"sm",variant:"outline",onClick:()=>Ye("files"),children:"Go to Excel/CSV upload"})})]}):L.map(ee=>{const fe=ee.snapshotPairDatasetId?b.get(ee.snapshotPairDatasetId):void 0;return y.jsx("div",{className:`p-4 rounded-lg border transition-all duration-200 shadow-sm ${ee.active?"bg-green-50 dark:bg-green-900/30 border-green-400 dark:border-green-600":B===ee.id?"bg-blue-50 dark:bg-blue-900/30 border-blue-400 dark:border-blue-600":"bg-white dark:bg-gray-700/50 border-gray-200 dark:border-gray-600/70 hover:border-blue-300 dark:hover:border-blue-500 hover:shadow-md"}`,children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("h3",{className:`text-sm font-medium ${ee.active?"text-green-800 dark:text-green-200":"text-gray-900 dark:text-gray-100"}`,children:ee.name}),ee.active&&y.jsxs("span",{className:"bg-green-100 text-green-700 dark:bg-green-600/30 dark:text-green-300 text-xs px-2 py-0.5 rounded-full flex items-center gap-1 border border-green-300 dark:border-green-500",children:[y.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-500 animate-pulse"}),"Active Dataset"]}),ee.isSnapshot&&y.jsxs("span",{className:"bg-blue-100 text-blue-700 dark:bg-blue-600/30 dark:text-blue-300 text-xs px-2 py-0.5 rounded-full flex items-center gap-1 border border-blue-300 dark:border-blue-500",children:[y.jsx(Tr,{className:"h-3 w-3"}),"Snapshot Dataset"]})]}),y.jsxs("div",{className:`text-xs ${ee.active?"text-green-700 dark:text-green-300":"text-gray-500 dark:text-gray-400"}`,children:[y.jsxs("span",{className:"inline-block",children:[ee.type,"  ",Tt(ee.size)]}),y.jsxs("span",{className:"block mt-1",children:["Uploaded ",wt(ee.uploadedAt)]}),ee.rowCount!==void 0&&y.jsxs("span",{className:"ml-1",children:[" ",ee.rowCount.toLocaleString()," rows"]})]}),ee.active&&y.jsx("div",{className:"mt-2 text-xs text-green-700 dark:text-green-300",children:y.jsx("p",{children:"This dataset is currently being used for predictions and analytics."})}),ee.isSnapshot&&y.jsxs("div",{className:"mt-2 space-y-1 text-xs text-blue-700 dark:text-blue-300",children:[ee.snapshotGroup&&y.jsxs("p",{className:"flex items-center gap-1",children:[y.jsx(Tr,{className:"h-3 w-3"}),"Snapshot group: ",y.jsx("span",{className:"font-medium",children:ee.snapshotGroup})]}),fe&&y.jsxs("p",{className:"flex items-center gap-1",children:[y.jsx(mo,{className:"h-3 w-3"}),"Paired with"," ",y.jsx("button",{type:"button",onClick:()=>H(fe.id),className:"text-blue-600 dark:text-blue-300 underline-offset-2 hover:underline focus:outline-none",children:fe.name}),"for delta comparisons."]}),!fe&&ee.snapshotPairDatasetId&&y.jsx("p",{className:"text-blue-600/80 dark:text-blue-200/80",children:"Snapshot pair detected but companion dataset is not currently available."})]})]}),y.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[!ee.active&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>Cr(ee.id),className:"p-1.5 text-gray-500 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-300 rounded-md transition-colors focus:outline-none focus:ring-1 focus:ring-green-500 dark:focus:ring-green-400",title:"Set as active dataset",children:y.jsx(Bs,{className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>Lt(ee.id),className:"p-1.5 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-300 rounded-md transition-colors focus:outline-none focus:ring-1 focus:ring-red-500 dark:focus:ring-red-400",title:"Delete dataset",children:y.jsx(ui,{className:"w-4 h-4"})})]}),y.jsx("button",{onClick:()=>H(ee.id===B?null:ee.id),className:`p-1.5 rounded-md transition-colors ${B===ee.id?"text-blue-600 dark:text-blue-300 bg-blue-100 dark:bg-blue-700/50":"text-gray-400 hover:text-blue-600 dark:text-gray-500 dark:hover:text-blue-400"}`,title:B===ee.id?"Hide details":"Show details",children:y.jsx(on,{className:"w-4 h-4"})})]})]})},ee.id)})})]})]}),bt==="database"&&y.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"hidden space-y-6",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg",children:y.jsx(br,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Database Connection"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"dbType",className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5",children:"Database Type"}),y.jsx("select",{id:"dbType",name:"dbType",value:a,onChange:Ct,className:"w-full pl-3 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700/60 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent transition-all duration-200 shadow-sm text-sm",children:Ba.map(ee=>y.jsx("option",{value:ee,children:ee},ee))})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsx(vn,{id:"dbHost",label:"Host Address",name:"host",value:d.host,onChange:He,placeholder:"e.g., db.example.com"}),y.jsx(vn,{id:"dbPort",label:"Port",type:"number",name:"port",value:d.port,onChange:He,placeholder:xr(),min:"1",max:"65535"})]}),y.jsx(vn,{id:"dbUsername",label:"Username",name:"username",value:d.username,onChange:He,placeholder:"e.g., admin_user"}),y.jsx(vn,{id:"dbPassword",label:"Password",type:"password",name:"password",value:d.password,onChange:He,placeholder:""}),y.jsx(vn,{id:"dbName",label:jr(),name:"databaseName",value:d.databaseName,onChange:He,placeholder:Er()}),y.jsxs("div",{className:"mt-6",children:[y.jsx(at.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:yt,disabled:u==="testing",className:`w-full px-5 py-3 rounded-lg text-white text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2 shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800
                                                        ${u==="testing"?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-400"}`,children:u==="testing"?y.jsxs(y.Fragment,{children:[y.jsx(zt,{className:"animate-spin h-4 w-4"}),"Testing..."]}):y.jsxs(y.Fragment,{children:[u==="success"?y.jsx(sa,{className:"w-4 h-4"}):y.jsx(nu,{className:"w-4 h-4"}),"Test Connection"]})}),y.jsx(Ua,{status:u,message:m,type:"connection"}),u==="success"&&y.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-4 text-center",children:[y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Connection verified. You can now save this connection for later use."}),y.jsxs(Et,{onClick:xe,disabled:!d.host||!d.port||!d.username||!d.password||!d.databaseName||u!=="success",className:"w-full bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white dark:disabled:bg-green-700/70",children:[y.jsx(na,{className:"w-4 h-4 mr-2"}),"Save Connection"]})]})]})]}),T.length>0&&y.jsxs("div",{className:"mt-8 p-6 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-200 dark:border-gray-600",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:y.jsx(br,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Database Import"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Import data directly from your connected databases into ChurnVision."}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Select Connection"}),y.jsxs("select",{value:$||"",onChange:ee=>{C(ee.target.value),ee.target.value&&se(ee.target.value)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[y.jsx("option",{value:"",children:"Select a connection..."}),T.map(ee=>y.jsxs("option",{value:ee.id,children:[ee.name," (",ee.type,")"]},ee.id))]})]}),$&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Select Table"}),y.jsxs("select",{value:v,onChange:ee=>x(ee.target.value),disabled:M,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50",children:[y.jsx("option",{value:"",children:M?"Loading tables...":"Select a table..."}),P.map(ee=>y.jsx("option",{value:ee,children:ee},ee))]})]}),v&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Dataset Name"}),y.jsx("input",{type:"text",value:w,onChange:ee=>N(ee.target.value),placeholder:`Import_${v}_${new Date().toISOString().split("T")[0]}`,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),y.jsx(Et,{onClick:pe,disabled:!$||!v||!w||M,className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white",children:M?y.jsxs(y.Fragment,{children:[y.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}),"Importing..."]}):y.jsxs(y.Fragment,{children:[y.jsx(rn,{className:"w-4 h-4 mr-2"}),"Import Data"]})})]})]})]})]}),bt==="mlmodels"&&y.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/40 rounded-lg",children:y.jsx(Fs,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"ML Model Performance"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View latest model evaluation metrics and performance results"})]}),y.jsx("div",{className:"ml-auto",children:y.jsxs("button",{onClick:Ne,disabled:tt,className:"px-3 py-2 text-sm bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-md transition-colors flex items-center gap-2",children:[y.jsx(Mr,{className:`w-4 h-4 ${tt?"animate-spin":""}`}),"Refresh"]})})]}),tt&&y.jsxs("div",{className:"flex items-center justify-center py-8",children:[y.jsx(zt,{className:"w-6 h-6 animate-spin text-green-600"}),y.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading model metrics..."})]}),he&&y.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[y.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400",children:[y.jsx(Ur,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm font-medium",children:"Error loading metrics"})]}),y.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:he})]}),!tt&&!he&&y.jsx("div",{className:"space-y-4",children:mt.length===0?y.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-600",children:[y.jsx(Fs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),y.jsx("h4",{className:"text-lg font-medium text-gray-600 dark:text-gray-400 mb-2",children:"No Model Results Yet"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-4",children:"Train a model to see performance metrics and evaluation results here."}),y.jsxs("button",{onClick:()=>S("/model-training"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors flex items-center gap-2 mx-auto",children:[y.jsx(Sn,{className:"w-4 h-4"}),"Go to Model Training"]})]}):y.jsx("div",{className:"space-y-4",children:y.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(280px,320px)_1fr]",children:[y.jsx(fh,{accuracy:mt[0].accuracy,precision:mt[0].precision_score,recall:mt[0].recall_score,f1:mt[0].f1_score,rocAuc:mt[0].roc_auc}),y.jsx("div",{className:"space-y-4",children:mt.map(ee=>y.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Model v",ee.model_version]}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Evaluated on ",new Date(ee.evaluation_date).toLocaleDateString()]})]}),y.jsxs("div",{className:"text-right text-xs text-gray-500 dark:text-gray-400",children:[y.jsxs("div",{children:["Total Predictions: ",ee.total_predictions]}),y.jsxs("div",{children:["Correct: ",ee.correct_predictions]}),y.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["FP: ",ee.false_positives," | FN: ",ee.false_negatives]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[y.jsx(ze,{label:"Accuracy",value:ee.accuracy}),y.jsx(ze,{label:"Precision",value:ee.precision_score}),y.jsx(ze,{label:"Recall",value:ee.recall_score}),y.jsx(ze,{label:"F1 Score",value:ee.f1_score}),y.jsx(ze,{label:"ROC AUC",value:ee.roc_auc}),ee.calibration_score!=null&&y.jsx(ze,{label:"Calibration",value:ee.calibration_score}),ee.drift_score!=null&&y.jsx(ze,{label:"Drift Score",value:ee.drift_score})]}),ee.recommendations&&y.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsx(Yr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-1",children:"Recommendations"}),y.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:ee.recommendations})]})]})})]},ee.id))})]})})})]}),bt==="api"&&y.jsx("div",{className:"hidden",children:y.jsx(ph,{title:"API & System Connections",children:y.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx("div",{className:"p-2 bg-teal-100 dark:bg-teal-900/40 rounded-lg",children:y.jsx(Un,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"API & System Connections"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Connect directly to external HR systems (e.g., SAP SuccessFactors, BambooHR) for automated data synchronization."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"p-4 border border-dashed border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/40",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:y.jsx(br,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),y.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"SAP SuccessFactors"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Direct integration with SAP HR system for real-time data sync."}),y.jsxs(Et,{variant:"outline",disabled:!0,className:"w-full",children:[y.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Coming Soon"]})]}),y.jsxs("div",{className:"p-4 border border-dashed border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/40",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/40 rounded-lg",children:y.jsx(Un,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),y.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"BambooHR"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to BambooHR for automated employee data import."}),y.jsxs(Et,{variant:"outline",disabled:!0,className:"w-full",children:[y.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Coming Soon"]})]}),y.jsxs("div",{className:"p-4 border border-dashed border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/40",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:y.jsx(sa,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),y.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Workday"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Integration with Workday HCM for comprehensive HR data."}),y.jsxs(Et,{variant:"outline",disabled:!0,className:"w-full",children:[y.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Coming Soon"]})]}),y.jsxs("div",{className:"p-4 border border-dashed border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/40",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/40 rounded-lg",children:y.jsx(Un,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),y.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Custom API"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to your custom HR API endpoints."}),y.jsxs(Et,{variant:"outline",disabled:!0,className:"w-full",children:[y.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Coming Soon"]})]})]}),y.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700/60",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx(Yr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),y.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200",children:"API Integration Benefits"})]}),y.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[y.jsx("li",{children:" Real-time data synchronization"}),y.jsx("li",{children:" Automated data updates"}),y.jsx("li",{children:" Reduced manual data entry"}),y.jsx("li",{children:" Enhanced data accuracy"})]})]})]})]})})})]})]})]})]}),nt&&Mi.createPortal(y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-black/50 p-4",children:y.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},style:{willChange:"opacity"},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 w-full max-w-md border border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Import or Export Project"}),y.jsx("button",{onClick:()=>St(!1),disabled:pt,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors p-1 rounded-full","aria-label":"Close modal",children:y.jsx(Br,{className:"w-5 h-5"})})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Export the currently active project data to a file, or import a previously exported project from a file."}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs(Et,{onClick:Dt,disabled:!e||pt,className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white dark:disabled:bg-blue-700/70",children:[pt&&e?y.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx(rn,{className:"w-4 h-4 mr-2"}),"Export Active Project"]}),y.jsxs(Et,{onClick:Ot,disabled:pt,variant:"outline",className:"w-full dark:text-gray-300 dark:border-gray-500 dark:hover:bg-gray-700",children:[pt&&!e?y.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Import Project from File"]})]}),y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-6 text-center",children:["Importing will add the project to your list. Exporting creates a sharable ",y.jsx("code",{children:".zip"})," file."]})]})}),document.body),y.jsx(oh,{show:Se,onClose:()=>_e(!1),onUploadSuccess:()=>{_e(!1)}}),y.jsx(uh,{show:Pe,onClose:()=>Fe(!1),onUploadSuccess:()=>{Fe(!1)}})]})}const Yt=W.forwardRef(({className:S,..._},e)=>y.jsx("div",{ref:e,className:lt("rounded-xl border bg-card text-card-foreground shadow",S),..._}));Yt.displayName="Card";const Zt=W.forwardRef(({className:S,..._},e)=>y.jsx("div",{ref:e,className:lt("flex flex-col space-y-1.5 p-6",S),..._}));Zt.displayName="CardHeader";const Jt=W.forwardRef(({className:S,..._},e)=>y.jsx("div",{ref:e,className:lt("font-semibold leading-none tracking-tight",S),..._}));Jt.displayName="CardTitle";const Qt=W.forwardRef(({className:S,..._},e)=>y.jsx("div",{ref:e,className:lt("text-sm text-muted-foreground",S),..._}));Qt.displayName="CardDescription";const ir=W.forwardRef(({className:S,..._},e)=>y.jsx("div",{ref:e,className:lt("p-6 pt-0",S),..._}));ir.displayName="CardContent";const Ui=W.forwardRef(({className:S,..._},e)=>y.jsx("div",{ref:e,className:lt("flex items-center p-6 pt-0",S),..._}));Ui.displayName="CardFooter";function gh(S,_){const e=W.createContext(_),h=c=>{const{children:s,...i}=c,r=W.useMemo(()=>i,Object.values(i));return y.jsx(e.Provider,{value:r,children:s})};h.displayName=S+"Provider";function p(c){const s=W.useContext(e);if(s)return s;if(_!==void 0)return _;throw new Error(`\`${c}\` must be used within \`${S}\``)}return[h,p]}function Ln(S,_=[]){let e=[];function h(c,s){const i=W.createContext(s),r=e.length;e=[...e,s];const t=l=>{const{scope:a,children:o,...d}=l,f=a?.[S]?.[r]||i,u=W.useMemo(()=>d,Object.values(d));return y.jsx(f.Provider,{value:u,children:o})};t.displayName=c+"Provider";function n(l,a){const o=a?.[S]?.[r]||i,d=W.useContext(o);if(d)return d;if(s!==void 0)return s;throw new Error(`\`${l}\` must be used within \`${c}\``)}return[t,n]}const p=()=>{const c=e.map(s=>W.createContext(s));return function(i){const r=i?.[S]||c;return W.useMemo(()=>({[`__scope${S}`]:{...i,[S]:r}}),[i,r])}};return p.scopeName=S,[h,bh(p,..._)]}function bh(...S){const _=S[0];if(S.length===1)return _;const e=()=>{const h=S.map(p=>({useScope:p(),scopeName:p.scopeName}));return function(c){const s=h.reduce((i,{useScope:r,scopeName:t})=>{const l=r(c)[`__scope${t}`];return{...i,...l}},{});return W.useMemo(()=>({[`__scope${_.scopeName}`]:s}),[s])}};return e.scopeName=_.scopeName,e}function $t(S,_,{checkForDefaultPrevented:e=!0}={}){return function(p){if(S?.(p),e===!1||!p.defaultPrevented)return _?.(p)}}var qr=globalThis?.document?W.useLayoutEffect:()=>{},yh=Ai[" useId ".trim().toString()]||(()=>{}),vh=0;function Gs(S){const[_,e]=W.useState(yh());return qr(()=>{e(h=>h??String(vh++))},[S]),S||(_?`radix-${_}`:"")}var xh=Ai[" useInsertionEffect ".trim().toString()]||qr;function Hi({prop:S,defaultProp:_,onChange:e=()=>{},caller:h}){const[p,c,s]=wh({defaultProp:_,onChange:e}),i=S!==void 0,r=i?S:p;{const n=W.useRef(S!==void 0);W.useEffect(()=>{const l=n.current;l!==i&&console.warn(`${h} is changing from ${l?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),n.current=i},[i,h])}const t=W.useCallback(n=>{if(i){const l=_h(n)?n(S):n;l!==S&&s.current?.(l)}else c(n)},[i,S,c,s]);return[r,t]}function wh({defaultProp:S,onChange:_}){const[e,h]=W.useState(S),p=W.useRef(e),c=W.useRef(_);return xh(()=>{c.current=_},[_]),W.useEffect(()=>{p.current!==e&&(c.current?.(e),p.current=e)},[e,p]),[e,h,c]}function _h(S){return typeof S=="function"}function kh(S){const _=Sh(S),e=W.forwardRef((h,p)=>{const{children:c,...s}=h,i=W.Children.toArray(c),r=i.find(Eh);if(r){const t=r.props.children,n=i.map(l=>l===r?W.Children.count(t)>1?W.Children.only(null):W.isValidElement(t)?t.props.children:null:l);return y.jsx(_,{...s,ref:p,children:W.isValidElement(t)?W.cloneElement(t,void 0,n):null})}return y.jsx(_,{...s,ref:p,children:c})});return e.displayName=`${S}.Slot`,e}function Sh(S){const _=W.forwardRef((e,h)=>{const{children:p,...c}=e;if(W.isValidElement(p)){const s=Nh(p),i=Ch(c,p.props);return p.type!==W.Fragment&&(i.ref=h?Pn(h,s):s),W.cloneElement(p,i)}return W.Children.count(p)>1?W.Children.only(null):null});return _.displayName=`${S}.SlotClone`,_}var jh=Symbol("radix.slottable");function Eh(S){return W.isValidElement(S)&&typeof S.type=="function"&&"__radixId"in S.type&&S.type.__radixId===jh}function Ch(S,_){const e={..._};for(const h in _){const p=S[h],c=_[h];/^on[A-Z]/.test(h)?p&&c?e[h]=(...i)=>{const r=c(...i);return p(...i),r}:p&&(e[h]=p):h==="style"?e[h]={...p,...c}:h==="className"&&(e[h]=[p,c].filter(Boolean).join(" "))}return{...S,...e}}function Nh(S){let _=Object.getOwnPropertyDescriptor(S.props,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning;return e?S.ref:(_=Object.getOwnPropertyDescriptor(S,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning,e?S.props.ref:S.props.ref||S.ref)}var Th=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vt=Th.reduce((S,_)=>{const e=kh(`Primitive.${_}`),h=W.forwardRef((p,c)=>{const{asChild:s,...i}=p,r=s?e:_;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(r,{...i,ref:c})});return h.displayName=`Primitive.${_}`,{...S,[_]:h}},{});function el(S,_){S&&Mi.flushSync(()=>S.dispatchEvent(_))}function kr(S){const _=W.useRef(S);return W.useEffect(()=>{_.current=S}),W.useMemo(()=>(...e)=>_.current?.(...e),[])}function Ah(S,_=globalThis?.document){const e=kr(S);W.useEffect(()=>{const h=p=>{p.key==="Escape"&&e(p)};return _.addEventListener("keydown",h,{capture:!0}),()=>_.removeEventListener("keydown",h,{capture:!0})},[e,_])}var Mh="DismissableLayer",_i="dismissableLayer.update",Rh="dismissableLayer.pointerDownOutside",Oh="dismissableLayer.focusOutside",Ha,tl=W.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vi=W.forwardRef((S,_)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:c,onInteractOutside:s,onDismiss:i,...r}=S,t=W.useContext(tl),[n,l]=W.useState(null),a=n?.ownerDocument??globalThis?.document,[,o]=W.useState({}),d=er(_,z=>l(z)),f=Array.from(t.layers),[u]=[...t.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(u),m=n?f.indexOf(n):-1,k=t.layersWithOutsidePointerEventsDisabled.size>0,E=m>=g,A=Ph(z=>{const R=z.target,I=[...t.branches].some(B=>B.contains(R));!E||I||(p?.(z),s?.(z),z.defaultPrevented||i?.())},a),L=Dh(z=>{const R=z.target;[...t.branches].some(B=>B.contains(R))||(c?.(z),s?.(z),z.defaultPrevented||i?.())},a);return Ah(z=>{m===t.layers.size-1&&(h?.(z),!z.defaultPrevented&&i&&(z.preventDefault(),i()))},a),W.useEffect(()=>{if(n)return e&&(t.layersWithOutsidePointerEventsDisabled.size===0&&(Ha=a.body.style.pointerEvents,a.body.style.pointerEvents="none"),t.layersWithOutsidePointerEventsDisabled.add(n)),t.layers.add(n),Va(),()=>{e&&t.layersWithOutsidePointerEventsDisabled.size===1&&(a.body.style.pointerEvents=Ha)}},[n,a,e,t]),W.useEffect(()=>()=>{n&&(t.layers.delete(n),t.layersWithOutsidePointerEventsDisabled.delete(n),Va())},[n,t]),W.useEffect(()=>{const z=()=>o({});return document.addEventListener(_i,z),()=>document.removeEventListener(_i,z)},[]),y.jsx(Vt.div,{...r,ref:d,style:{pointerEvents:k?E?"auto":"none":void 0,...S.style},onFocusCapture:$t(S.onFocusCapture,L.onFocusCapture),onBlurCapture:$t(S.onBlurCapture,L.onBlurCapture),onPointerDownCapture:$t(S.onPointerDownCapture,A.onPointerDownCapture)})});Vi.displayName=Mh;var Ih="DismissableLayerBranch",rl=W.forwardRef((S,_)=>{const e=W.useContext(tl),h=W.useRef(null),p=er(_,h);return W.useEffect(()=>{const c=h.current;if(c)return e.branches.add(c),()=>{e.branches.delete(c)}},[e.branches]),y.jsx(Vt.div,{...S,ref:p})});rl.displayName=Ih;function Ph(S,_=globalThis?.document){const e=kr(S),h=W.useRef(!1),p=W.useRef(()=>{});return W.useEffect(()=>{const c=i=>{if(i.target&&!h.current){let r=function(){nl(Rh,e,t,{discrete:!0})};const t={originalEvent:i};i.pointerType==="touch"?(_.removeEventListener("click",p.current),p.current=r,_.addEventListener("click",p.current,{once:!0})):r()}else _.removeEventListener("click",p.current);h.current=!1},s=window.setTimeout(()=>{_.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(s),_.removeEventListener("pointerdown",c),_.removeEventListener("click",p.current)}},[_,e]),{onPointerDownCapture:()=>h.current=!0}}function Dh(S,_=globalThis?.document){const e=kr(S),h=W.useRef(!1);return W.useEffect(()=>{const p=c=>{c.target&&!h.current&&nl(Oh,e,{originalEvent:c},{discrete:!1})};return _.addEventListener("focusin",p),()=>_.removeEventListener("focusin",p)},[_,e]),{onFocusCapture:()=>h.current=!0,onBlurCapture:()=>h.current=!1}}function Va(){const S=new CustomEvent(_i);document.dispatchEvent(S)}function nl(S,_,e,{discrete:h}){const p=e.originalEvent.target,c=new CustomEvent(S,{bubbles:!1,cancelable:!0,detail:e});_&&p.addEventListener(S,_,{once:!0}),h?el(p,c):p.dispatchEvent(c)}var Lh=Vi,Fh=rl,Zs="focusScope.autoFocusOnMount",Js="focusScope.autoFocusOnUnmount",qa={bubbles:!1,cancelable:!0},Bh="FocusScope",sl=W.forwardRef((S,_)=>{const{loop:e=!1,trapped:h=!1,onMountAutoFocus:p,onUnmountAutoFocus:c,...s}=S,[i,r]=W.useState(null),t=kr(p),n=kr(c),l=W.useRef(null),a=er(_,f=>r(f)),o=W.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;W.useEffect(()=>{if(h){let f=function(k){if(o.paused||!i)return;const E=k.target;i.contains(E)?l.current=E:Nr(l.current,{select:!0})},u=function(k){if(o.paused||!i)return;const E=k.relatedTarget;E!==null&&(i.contains(E)||Nr(l.current,{select:!0}))},g=function(k){if(document.activeElement===document.body)for(const A of k)A.removedNodes.length>0&&Nr(i)};document.addEventListener("focusin",f),document.addEventListener("focusout",u);const m=new MutationObserver(g);return i&&m.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",u),m.disconnect()}}},[h,i,o.paused]),W.useEffect(()=>{if(i){Xa.add(o);const f=document.activeElement;if(!i.contains(f)){const g=new CustomEvent(Zs,qa);i.addEventListener(Zs,t),i.dispatchEvent(g),g.defaultPrevented||($h(qh(il(i)),{select:!0}),document.activeElement===f&&Nr(i))}return()=>{i.removeEventListener(Zs,t),setTimeout(()=>{const g=new CustomEvent(Js,qa);i.addEventListener(Js,n),i.dispatchEvent(g),g.defaultPrevented||Nr(f??document.body,{select:!0}),i.removeEventListener(Js,n),Xa.remove(o)},0)}}},[i,t,n,o]);const d=W.useCallback(f=>{if(!e&&!h||o.paused)return;const u=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(u&&g){const m=f.currentTarget,[k,E]=zh(m);k&&E?!f.shiftKey&&g===E?(f.preventDefault(),e&&Nr(k,{select:!0})):f.shiftKey&&g===k&&(f.preventDefault(),e&&Nr(E,{select:!0})):g===m&&f.preventDefault()}},[e,h,o.paused]);return y.jsx(Vt.div,{tabIndex:-1,...s,ref:a,onKeyDown:d})});sl.displayName=Bh;function $h(S,{select:_=!1}={}){const e=document.activeElement;for(const h of S)if(Nr(h,{select:_}),document.activeElement!==e)return}function zh(S){const _=il(S),e=Wa(_,S),h=Wa(_.reverse(),S);return[e,h]}function il(S){const _=[],e=document.createTreeWalker(S,NodeFilter.SHOW_ELEMENT,{acceptNode:h=>{const p=h.tagName==="INPUT"&&h.type==="hidden";return h.disabled||h.hidden||p?NodeFilter.FILTER_SKIP:h.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)_.push(e.currentNode);return _}function Wa(S,_){for(const e of S)if(!Uh(e,{upTo:_}))return e}function Uh(S,{upTo:_}){if(getComputedStyle(S).visibility==="hidden")return!0;for(;S;){if(_!==void 0&&S===_)return!1;if(getComputedStyle(S).display==="none")return!0;S=S.parentElement}return!1}function Hh(S){return S instanceof HTMLInputElement&&"select"in S}function Nr(S,{select:_=!1}={}){if(S&&S.focus){const e=document.activeElement;S.focus({preventScroll:!0}),S!==e&&Hh(S)&&_&&S.select()}}var Xa=Vh();function Vh(){let S=[];return{add(_){const e=S[0];_!==e&&e?.pause(),S=Ka(S,_),S.unshift(_)},remove(_){S=Ka(S,_),S[0]?.resume()}}}function Ka(S,_){const e=[...S],h=e.indexOf(_);return h!==-1&&e.splice(h,1),e}function qh(S){return S.filter(_=>_.tagName!=="A")}var Wh="Portal",qi=W.forwardRef((S,_)=>{const{container:e,...h}=S,[p,c]=W.useState(!1);qr(()=>c(!0),[]);const s=e||p&&globalThis?.document?.body;return s?gu.createPortal(y.jsx(Vt.div,{...h,ref:_}),s):null});qi.displayName=Wh;function Xh(S,_){return W.useReducer((e,h)=>_[e][h]??e,S)}var Fn=S=>{const{present:_,children:e}=S,h=Kh(_),p=typeof e=="function"?e({present:h.isPresent}):W.Children.only(e),c=er(h.ref,Yh(p));return typeof e=="function"||h.isPresent?W.cloneElement(p,{ref:c}):null};Fn.displayName="Presence";function Kh(S){const[_,e]=W.useState(),h=W.useRef(null),p=W.useRef(S),c=W.useRef("none"),s=S?"mounted":"unmounted",[i,r]=Xh(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.useEffect(()=>{const t=Gn(h.current);c.current=i==="mounted"?t:"none"},[i]),qr(()=>{const t=h.current,n=p.current;if(n!==S){const a=c.current,o=Gn(t);S?r("MOUNT"):o==="none"||t?.display==="none"?r("UNMOUNT"):r(n&&a!==o?"ANIMATION_OUT":"UNMOUNT"),p.current=S}},[S,r]),qr(()=>{if(_){let t;const n=_.ownerDocument.defaultView??window,l=o=>{const f=Gn(h.current).includes(CSS.escape(o.animationName));if(o.target===_&&f&&(r("ANIMATION_END"),!p.current)){const u=_.style.animationFillMode;_.style.animationFillMode="forwards",t=n.setTimeout(()=>{_.style.animationFillMode==="forwards"&&(_.style.animationFillMode=u)})}},a=o=>{o.target===_&&(c.current=Gn(h.current))};return _.addEventListener("animationstart",a),_.addEventListener("animationcancel",l),_.addEventListener("animationend",l),()=>{n.clearTimeout(t),_.removeEventListener("animationstart",a),_.removeEventListener("animationcancel",l),_.removeEventListener("animationend",l)}}else r("ANIMATION_END")},[_,r]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:W.useCallback(t=>{h.current=t?getComputedStyle(t):null,e(t)},[])}}function Gn(S){return S?.animationName||"none"}function Yh(S){let _=Object.getOwnPropertyDescriptor(S.props,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning;return e?S.ref:(_=Object.getOwnPropertyDescriptor(S,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning,e?S.props.ref:S.props.ref||S.ref)}var Qs=0;function Gh(){W.useEffect(()=>{const S=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",S[0]??Ya()),document.body.insertAdjacentElement("beforeend",S[1]??Ya()),Qs++,()=>{Qs===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(_=>_.remove()),Qs--}},[])}function Ya(){const S=document.createElement("span");return S.setAttribute("data-radix-focus-guard",""),S.tabIndex=0,S.style.outline="none",S.style.opacity="0",S.style.position="fixed",S.style.pointerEvents="none",S}var yr=function(){return yr=Object.assign||function(_){for(var e,h=1,p=arguments.length;h<p;h++){e=arguments[h];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(_[c]=e[c])}return _},yr.apply(this,arguments)};function al(S,_){var e={};for(var h in S)Object.prototype.hasOwnProperty.call(S,h)&&_.indexOf(h)<0&&(e[h]=S[h]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,h=Object.getOwnPropertySymbols(S);p<h.length;p++)_.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(S,h[p])&&(e[h[p]]=S[h[p]]);return e}function Zh(S,_,e){if(e||arguments.length===2)for(var h=0,p=_.length,c;h<p;h++)(c||!(h in _))&&(c||(c=Array.prototype.slice.call(_,0,h)),c[h]=_[h]);return S.concat(c||Array.prototype.slice.call(_))}var hs="right-scroll-bar-position",ps="width-before-scroll-bar",Jh="with-scroll-bars-hidden",Qh="--removed-body-scroll-bar-size";function ei(S,_){return typeof S=="function"?S(_):S&&(S.current=_),S}function ep(S,_){var e=W.useState(function(){return{value:S,callback:_,facade:{get current(){return e.value},set current(h){var p=e.value;p!==h&&(e.value=h,e.callback(h,p))}}}})[0];return e.callback=_,e.facade}var tp=typeof window<"u"?W.useLayoutEffect:W.useEffect,Ga=new WeakMap;function rp(S,_){var e=ep(null,function(h){return S.forEach(function(p){return ei(p,h)})});return tp(function(){var h=Ga.get(e);if(h){var p=new Set(h),c=new Set(S),s=e.current;p.forEach(function(i){c.has(i)||ei(i,null)}),c.forEach(function(i){p.has(i)||ei(i,s)})}Ga.set(e,S)},[S]),e}function np(S){return S}function sp(S,_){_===void 0&&(_=np);var e=[],h=!1,p={read:function(){if(h)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:S},useMedium:function(c){var s=_(c,h);return e.push(s),function(){e=e.filter(function(i){return i!==s})}},assignSyncMedium:function(c){for(h=!0;e.length;){var s=e;e=[],s.forEach(c)}e={push:function(i){return c(i)},filter:function(){return e}}},assignMedium:function(c){h=!0;var s=[];if(e.length){var i=e;e=[],i.forEach(c),s=e}var r=function(){var n=s;s=[],n.forEach(c)},t=function(){return Promise.resolve().then(r)};t(),e={push:function(n){s.push(n),t()},filter:function(n){return s=s.filter(n),e}}}};return p}function ip(S){S===void 0&&(S={});var _=sp(null);return _.options=yr({async:!0,ssr:!1},S),_}var ol=function(S){var _=S.sideCar,e=al(S,["sideCar"]);if(!_)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var h=_.read();if(!h)throw new Error("Sidecar medium not found");return W.createElement(h,yr({},e))};ol.isSideCarExport=!0;function ap(S,_){return S.useMedium(_),ol}var ll=ip(),ti=function(){},Rs=W.forwardRef(function(S,_){var e=W.useRef(null),h=W.useState({onScrollCapture:ti,onWheelCapture:ti,onTouchMoveCapture:ti}),p=h[0],c=h[1],s=S.forwardProps,i=S.children,r=S.className,t=S.removeScrollBar,n=S.enabled,l=S.shards,a=S.sideCar,o=S.noRelative,d=S.noIsolation,f=S.inert,u=S.allowPinchZoom,g=S.as,m=g===void 0?"div":g,k=S.gapMode,E=al(S,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=a,L=rp([e,_]),z=yr(yr({},E),p);return W.createElement(W.Fragment,null,n&&W.createElement(A,{sideCar:ll,removeScrollBar:t,shards:l,noRelative:o,noIsolation:d,inert:f,setCallbacks:c,allowPinchZoom:!!u,lockRef:e,gapMode:k}),s?W.cloneElement(W.Children.only(i),yr(yr({},z),{ref:L})):W.createElement(m,yr({},z,{className:r,ref:L}),i))});Rs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rs.classNames={fullWidth:ps,zeroRight:hs};var op=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lp(){if(!document)return null;var S=document.createElement("style");S.type="text/css";var _=op();return _&&S.setAttribute("nonce",_),S}function cp(S,_){S.styleSheet?S.styleSheet.cssText=_:S.appendChild(document.createTextNode(_))}function up(S){var _=document.head||document.getElementsByTagName("head")[0];_.appendChild(S)}var dp=function(){var S=0,_=null;return{add:function(e){S==0&&(_=lp())&&(cp(_,e),up(_)),S++},remove:function(){S--,!S&&_&&(_.parentNode&&_.parentNode.removeChild(_),_=null)}}},fp=function(){var S=dp();return function(_,e){W.useEffect(function(){return S.add(_),function(){S.remove()}},[_&&e])}},cl=function(){var S=fp(),_=function(e){var h=e.styles,p=e.dynamic;return S(h,p),null};return _},hp={left:0,top:0,right:0,gap:0},ri=function(S){return parseInt(S||"",10)||0},pp=function(S){var _=window.getComputedStyle(document.body),e=_[S==="padding"?"paddingLeft":"marginLeft"],h=_[S==="padding"?"paddingTop":"marginTop"],p=_[S==="padding"?"paddingRight":"marginRight"];return[ri(e),ri(h),ri(p)]},mp=function(S){if(S===void 0&&(S="margin"),typeof window>"u")return hp;var _=pp(S),e=document.documentElement.clientWidth,h=window.innerWidth;return{left:_[0],top:_[1],right:_[2],gap:Math.max(0,h-e+_[2]-_[0])}},gp=cl(),ln="data-scroll-locked",bp=function(S,_,e,h){var p=S.left,c=S.top,s=S.right,i=S.gap;return e===void 0&&(e="margin"),`
  .`.concat(Jh,` {
   overflow: hidden `).concat(h,`;
   padding-right: `).concat(i,"px ").concat(h,`;
  }
  body[`).concat(ln,`] {
    overflow: hidden `).concat(h,`;
    overscroll-behavior: contain;
    `).concat([_&&"position: relative ".concat(h,";"),e==="margin"&&`
    padding-left: `.concat(p,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(h,`;
    `),e==="padding"&&"padding-right: ".concat(i,"px ").concat(h,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hs,` {
    right: `).concat(i,"px ").concat(h,`;
  }
  
  .`).concat(ps,` {
    margin-right: `).concat(i,"px ").concat(h,`;
  }
  
  .`).concat(hs," .").concat(hs,` {
    right: 0 `).concat(h,`;
  }
  
  .`).concat(ps," .").concat(ps,` {
    margin-right: 0 `).concat(h,`;
  }
  
  body[`).concat(ln,`] {
    `).concat(Qh,": ").concat(i,`px;
  }
`)},Za=function(){var S=parseInt(document.body.getAttribute(ln)||"0",10);return isFinite(S)?S:0},yp=function(){W.useEffect(function(){return document.body.setAttribute(ln,(Za()+1).toString()),function(){var S=Za()-1;S<=0?document.body.removeAttribute(ln):document.body.setAttribute(ln,S.toString())}},[])},vp=function(S){var _=S.noRelative,e=S.noImportant,h=S.gapMode,p=h===void 0?"margin":h;yp();var c=W.useMemo(function(){return mp(p)},[p]);return W.createElement(gp,{styles:bp(c,!_,p,e?"":"!important")})},ki=!1;if(typeof window<"u")try{var Zn=Object.defineProperty({},"passive",{get:function(){return ki=!0,!0}});window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{ki=!1}var Jr=ki?{passive:!1}:!1,xp=function(S){return S.tagName==="TEXTAREA"},ul=function(S,_){if(!(S instanceof Element))return!1;var e=window.getComputedStyle(S);return e[_]!=="hidden"&&!(e.overflowY===e.overflowX&&!xp(S)&&e[_]==="visible")},wp=function(S){return ul(S,"overflowY")},_p=function(S){return ul(S,"overflowX")},Ja=function(S,_){var e=_.ownerDocument,h=_;do{typeof ShadowRoot<"u"&&h instanceof ShadowRoot&&(h=h.host);var p=dl(S,h);if(p){var c=fl(S,h),s=c[1],i=c[2];if(s>i)return!0}h=h.parentNode}while(h&&h!==e.body);return!1},kp=function(S){var _=S.scrollTop,e=S.scrollHeight,h=S.clientHeight;return[_,e,h]},Sp=function(S){var _=S.scrollLeft,e=S.scrollWidth,h=S.clientWidth;return[_,e,h]},dl=function(S,_){return S==="v"?wp(_):_p(_)},fl=function(S,_){return S==="v"?kp(_):Sp(_)},jp=function(S,_){return S==="h"&&_==="rtl"?-1:1},Ep=function(S,_,e,h,p){var c=jp(S,window.getComputedStyle(_).direction),s=c*h,i=e.target,r=_.contains(i),t=!1,n=s>0,l=0,a=0;do{if(!i)break;var o=fl(S,i),d=o[0],f=o[1],u=o[2],g=f-u-c*d;(d||g)&&dl(S,i)&&(l+=g,a+=d);var m=i.parentNode;i=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!r&&i!==document.body||r&&(_.contains(i)||_===i));return(n&&Math.abs(l)<1||!n&&Math.abs(a)<1)&&(t=!0),t},Jn=function(S){return"changedTouches"in S?[S.changedTouches[0].clientX,S.changedTouches[0].clientY]:[0,0]},Qa=function(S){return[S.deltaX,S.deltaY]},eo=function(S){return S&&"current"in S?S.current:S},Cp=function(S,_){return S[0]===_[0]&&S[1]===_[1]},Np=function(S){return`
  .block-interactivity-`.concat(S,` {pointer-events: none;}
  .allow-interactivity-`).concat(S,` {pointer-events: all;}
`)},Tp=0,Qr=[];function Ap(S){var _=W.useRef([]),e=W.useRef([0,0]),h=W.useRef(),p=W.useState(Tp++)[0],c=W.useState(cl)[0],s=W.useRef(S);W.useEffect(function(){s.current=S},[S]),W.useEffect(function(){if(S.inert){document.body.classList.add("block-interactivity-".concat(p));var f=Zh([S.lockRef.current],(S.shards||[]).map(eo),!0).filter(Boolean);return f.forEach(function(u){return u.classList.add("allow-interactivity-".concat(p))}),function(){document.body.classList.remove("block-interactivity-".concat(p)),f.forEach(function(u){return u.classList.remove("allow-interactivity-".concat(p))})}}},[S.inert,S.lockRef.current,S.shards]);var i=W.useCallback(function(f,u){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!s.current.allowPinchZoom;var g=Jn(f),m=e.current,k="deltaX"in f?f.deltaX:m[0]-g[0],E="deltaY"in f?f.deltaY:m[1]-g[1],A,L=f.target,z=Math.abs(k)>Math.abs(E)?"h":"v";if("touches"in f&&z==="h"&&L.type==="range")return!1;var R=Ja(z,L);if(!R)return!0;if(R?A=z:(A=z==="v"?"h":"v",R=Ja(z,L)),!R)return!1;if(!h.current&&"changedTouches"in f&&(k||E)&&(h.current=A),!A)return!0;var I=h.current||A;return Ep(I,u,f,I==="h"?k:E)},[]),r=W.useCallback(function(f){var u=f;if(!(!Qr.length||Qr[Qr.length-1]!==c)){var g="deltaY"in u?Qa(u):Jn(u),m=_.current.filter(function(A){return A.name===u.type&&(A.target===u.target||u.target===A.shadowParent)&&Cp(A.delta,g)})[0];if(m&&m.should){u.cancelable&&u.preventDefault();return}if(!m){var k=(s.current.shards||[]).map(eo).filter(Boolean).filter(function(A){return A.contains(u.target)}),E=k.length>0?i(u,k[0]):!s.current.noIsolation;E&&u.cancelable&&u.preventDefault()}}},[]),t=W.useCallback(function(f,u,g,m){var k={name:f,delta:u,target:g,should:m,shadowParent:Mp(g)};_.current.push(k),setTimeout(function(){_.current=_.current.filter(function(E){return E!==k})},1)},[]),n=W.useCallback(function(f){e.current=Jn(f),h.current=void 0},[]),l=W.useCallback(function(f){t(f.type,Qa(f),f.target,i(f,S.lockRef.current))},[]),a=W.useCallback(function(f){t(f.type,Jn(f),f.target,i(f,S.lockRef.current))},[]);W.useEffect(function(){return Qr.push(c),S.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:a}),document.addEventListener("wheel",r,Jr),document.addEventListener("touchmove",r,Jr),document.addEventListener("touchstart",n,Jr),function(){Qr=Qr.filter(function(f){return f!==c}),document.removeEventListener("wheel",r,Jr),document.removeEventListener("touchmove",r,Jr),document.removeEventListener("touchstart",n,Jr)}},[]);var o=S.removeScrollBar,d=S.inert;return W.createElement(W.Fragment,null,d?W.createElement(c,{styles:Np(p)}):null,o?W.createElement(vp,{noRelative:S.noRelative,gapMode:S.gapMode}):null)}function Mp(S){for(var _=null;S!==null;)S instanceof ShadowRoot&&(_=S.host,S=S.host),S=S.parentNode;return _}const Rp=ap(ll,Ap);var hl=W.forwardRef(function(S,_){return W.createElement(Rs,yr({},S,{ref:_,sideCar:Rp}))});hl.classNames=Rs.classNames;var Op=function(S){if(typeof document>"u")return null;var _=Array.isArray(S)?S[0]:S;return _.ownerDocument.body},en=new WeakMap,Qn=new WeakMap,es={},ni=0,pl=function(S){return S&&(S.host||pl(S.parentNode))},Ip=function(S,_){return _.map(function(e){if(S.contains(e))return e;var h=pl(e);return h&&S.contains(h)?h:(console.error("aria-hidden",e,"in not contained inside",S,". Doing nothing"),null)}).filter(function(e){return!!e})},Pp=function(S,_,e,h){var p=Ip(_,Array.isArray(S)?S:[S]);es[e]||(es[e]=new WeakMap);var c=es[e],s=[],i=new Set,r=new Set(p),t=function(l){!l||i.has(l)||(i.add(l),t(l.parentNode))};p.forEach(t);var n=function(l){!l||r.has(l)||Array.prototype.forEach.call(l.children,function(a){if(i.has(a))n(a);else try{var o=a.getAttribute(h),d=o!==null&&o!=="false",f=(en.get(a)||0)+1,u=(c.get(a)||0)+1;en.set(a,f),c.set(a,u),s.push(a),f===1&&d&&Qn.set(a,!0),u===1&&a.setAttribute(e,"true"),d||a.setAttribute(h,"true")}catch(g){console.error("aria-hidden: cannot operate on ",a,g)}})};return n(_),i.clear(),ni++,function(){s.forEach(function(l){var a=en.get(l)-1,o=c.get(l)-1;en.set(l,a),c.set(l,o),a||(Qn.has(l)||l.removeAttribute(h),Qn.delete(l)),o||l.removeAttribute(e)}),ni--,ni||(en=new WeakMap,en=new WeakMap,Qn=new WeakMap,es={})}},Dp=function(S,_,e){e===void 0&&(e="data-aria-hidden");var h=Array.from(Array.isArray(S)?S:[S]),p=Op(S);return p?(h.push.apply(h,Array.from(p.querySelectorAll("[aria-live], script"))),Pp(h,p,e,"aria-hidden")):function(){return null}};function Lp(S){const _=Fp(S),e=W.forwardRef((h,p)=>{const{children:c,...s}=h,i=W.Children.toArray(c),r=i.find($p);if(r){const t=r.props.children,n=i.map(l=>l===r?W.Children.count(t)>1?W.Children.only(null):W.isValidElement(t)?t.props.children:null:l);return y.jsx(_,{...s,ref:p,children:W.isValidElement(t)?W.cloneElement(t,void 0,n):null})}return y.jsx(_,{...s,ref:p,children:c})});return e.displayName=`${S}.Slot`,e}function Fp(S){const _=W.forwardRef((e,h)=>{const{children:p,...c}=e;if(W.isValidElement(p)){const s=Up(p),i=zp(c,p.props);return p.type!==W.Fragment&&(i.ref=h?Pn(h,s):s),W.cloneElement(p,i)}return W.Children.count(p)>1?W.Children.only(null):null});return _.displayName=`${S}.SlotClone`,_}var Bp=Symbol("radix.slottable");function $p(S){return W.isValidElement(S)&&typeof S.type=="function"&&"__radixId"in S.type&&S.type.__radixId===Bp}function zp(S,_){const e={..._};for(const h in _){const p=S[h],c=_[h];/^on[A-Z]/.test(h)?p&&c?e[h]=(...i)=>{const r=c(...i);return p(...i),r}:p&&(e[h]=p):h==="style"?e[h]={...p,...c}:h==="className"&&(e[h]=[p,c].filter(Boolean).join(" "))}return{...S,...e}}function Up(S){let _=Object.getOwnPropertyDescriptor(S.props,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning;return e?S.ref:(_=Object.getOwnPropertyDescriptor(S,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning,e?S.props.ref:S.props.ref||S.ref)}var Os="Dialog",[ml,gl]=Ln(Os),[Hp,fr]=ml(Os),bl=S=>{const{__scopeDialog:_,children:e,open:h,defaultOpen:p,onOpenChange:c,modal:s=!0}=S,i=W.useRef(null),r=W.useRef(null),[t,n]=Hi({prop:h,defaultProp:p??!1,onChange:c,caller:Os});return y.jsx(Hp,{scope:_,triggerRef:i,contentRef:r,contentId:Gs(),titleId:Gs(),descriptionId:Gs(),open:t,onOpenChange:n,onOpenToggle:W.useCallback(()=>n(l=>!l),[n]),modal:s,children:e})};bl.displayName=Os;var yl="DialogTrigger",vl=W.forwardRef((S,_)=>{const{__scopeDialog:e,...h}=S,p=fr(yl,e),c=er(_,p.triggerRef);return y.jsx(Vt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":p.open,"aria-controls":p.contentId,"data-state":Ki(p.open),...h,ref:c,onClick:$t(S.onClick,p.onOpenToggle)})});vl.displayName=yl;var Wi="DialogPortal",[Vp,xl]=ml(Wi,{forceMount:void 0}),wl=S=>{const{__scopeDialog:_,forceMount:e,children:h,container:p}=S,c=fr(Wi,_);return y.jsx(Vp,{scope:_,forceMount:e,children:W.Children.map(h,s=>y.jsx(Fn,{present:e||c.open,children:y.jsx(qi,{asChild:!0,container:p,children:s})}))})};wl.displayName=Wi;var vs="DialogOverlay",_l=W.forwardRef((S,_)=>{const e=xl(vs,S.__scopeDialog),{forceMount:h=e.forceMount,...p}=S,c=fr(vs,S.__scopeDialog);return c.modal?y.jsx(Fn,{present:h||c.open,children:y.jsx(Wp,{...p,ref:_})}):null});_l.displayName=vs;var qp=Lp("DialogOverlay.RemoveScroll"),Wp=W.forwardRef((S,_)=>{const{__scopeDialog:e,...h}=S,p=fr(vs,e);return y.jsx(hl,{as:qp,allowPinchZoom:!0,shards:[p.contentRef],children:y.jsx(Vt.div,{"data-state":Ki(p.open),...h,ref:_,style:{pointerEvents:"auto",...h.style}})})}),Wr="DialogContent",kl=W.forwardRef((S,_)=>{const e=xl(Wr,S.__scopeDialog),{forceMount:h=e.forceMount,...p}=S,c=fr(Wr,S.__scopeDialog);return y.jsx(Fn,{present:h||c.open,children:c.modal?y.jsx(Xp,{...p,ref:_}):y.jsx(Kp,{...p,ref:_})})});kl.displayName=Wr;var Xp=W.forwardRef((S,_)=>{const e=fr(Wr,S.__scopeDialog),h=W.useRef(null),p=er(_,e.contentRef,h);return W.useEffect(()=>{const c=h.current;if(c)return Dp(c)},[]),y.jsx(Sl,{...S,ref:p,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$t(S.onCloseAutoFocus,c=>{c.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:$t(S.onPointerDownOutside,c=>{const s=c.detail.originalEvent,i=s.button===0&&s.ctrlKey===!0;(s.button===2||i)&&c.preventDefault()}),onFocusOutside:$t(S.onFocusOutside,c=>c.preventDefault())})}),Kp=W.forwardRef((S,_)=>{const e=fr(Wr,S.__scopeDialog),h=W.useRef(!1),p=W.useRef(!1);return y.jsx(Sl,{...S,ref:_,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{S.onCloseAutoFocus?.(c),c.defaultPrevented||(h.current||e.triggerRef.current?.focus(),c.preventDefault()),h.current=!1,p.current=!1},onInteractOutside:c=>{S.onInteractOutside?.(c),c.defaultPrevented||(h.current=!0,c.detail.originalEvent.type==="pointerdown"&&(p.current=!0));const s=c.target;e.triggerRef.current?.contains(s)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&p.current&&c.preventDefault()}})}),Sl=W.forwardRef((S,_)=>{const{__scopeDialog:e,trapFocus:h,onOpenAutoFocus:p,onCloseAutoFocus:c,...s}=S,i=fr(Wr,e),r=W.useRef(null),t=er(_,r);return Gh(),y.jsxs(y.Fragment,{children:[y.jsx(sl,{asChild:!0,loop:!0,trapped:h,onMountAutoFocus:p,onUnmountAutoFocus:c,children:y.jsx(Vi,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Ki(i.open),...s,ref:t,onDismiss:()=>i.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(Gp,{titleId:i.titleId}),y.jsx(Jp,{contentRef:r,descriptionId:i.descriptionId})]})]})}),Xi="DialogTitle",jl=W.forwardRef((S,_)=>{const{__scopeDialog:e,...h}=S,p=fr(Xi,e);return y.jsx(Vt.h2,{id:p.titleId,...h,ref:_})});jl.displayName=Xi;var El="DialogDescription",Cl=W.forwardRef((S,_)=>{const{__scopeDialog:e,...h}=S,p=fr(El,e);return y.jsx(Vt.p,{id:p.descriptionId,...h,ref:_})});Cl.displayName=El;var Nl="DialogClose",Tl=W.forwardRef((S,_)=>{const{__scopeDialog:e,...h}=S,p=fr(Nl,e);return y.jsx(Vt.button,{type:"button",...h,ref:_,onClick:$t(S.onClick,()=>p.onOpenChange(!1))})});Tl.displayName=Nl;function Ki(S){return S?"open":"closed"}var Al="DialogTitleWarning",[Yp,Ml]=gh(Al,{contentName:Wr,titleName:Xi,docsSlug:"dialog"}),Gp=({titleId:S})=>{const _=Ml(Al),e=`\`${_.contentName}\` requires a \`${_.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${_.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${_.docsSlug}`;return W.useEffect(()=>{S&&(document.getElementById(S)||console.error(e))},[e,S]),null},Zp="DialogDescriptionWarning",Jp=({contentRef:S,descriptionId:_})=>{const h=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ml(Zp).contentName}}.`;return W.useEffect(()=>{const p=S.current?.getAttribute("aria-describedby");_&&p&&(document.getElementById(_)||console.warn(h))},[h,S,_]),null},Qp=bl,em=vl,tm=wl,rm=_l,nm=kl,sm=jl,im=Cl,Rl=Tl,am=Symbol("radix.slottable");function om(S){const _=({children:e})=>y.jsx(y.Fragment,{children:e});return _.displayName=`${S}.Slottable`,_.__radixId=am,_}var Ol="AlertDialog",[lm]=Ln(Ol,[gl]),Sr=gl(),Il=S=>{const{__scopeAlertDialog:_,...e}=S,h=Sr(_);return y.jsx(Qp,{...h,...e,modal:!0})};Il.displayName=Ol;var cm="AlertDialogTrigger",Pl=W.forwardRef((S,_)=>{const{__scopeAlertDialog:e,...h}=S,p=Sr(e);return y.jsx(em,{...p,...h,ref:_})});Pl.displayName=cm;var um="AlertDialogPortal",Dl=S=>{const{__scopeAlertDialog:_,...e}=S,h=Sr(_);return y.jsx(tm,{...h,...e})};Dl.displayName=um;var dm="AlertDialogOverlay",Ll=W.forwardRef((S,_)=>{const{__scopeAlertDialog:e,...h}=S,p=Sr(e);return y.jsx(rm,{...p,...h,ref:_})});Ll.displayName=dm;var cn="AlertDialogContent",[fm,hm]=lm(cn),pm=om("AlertDialogContent"),Fl=W.forwardRef((S,_)=>{const{__scopeAlertDialog:e,children:h,...p}=S,c=Sr(e),s=W.useRef(null),i=er(_,s),r=W.useRef(null);return y.jsx(Yp,{contentName:cn,titleName:Bl,docsSlug:"alert-dialog",children:y.jsx(fm,{scope:e,cancelRef:r,children:y.jsxs(nm,{role:"alertdialog",...c,...p,ref:i,onOpenAutoFocus:$t(p.onOpenAutoFocus,t=>{t.preventDefault(),r.current?.focus({preventScroll:!0})}),onPointerDownOutside:t=>t.preventDefault(),onInteractOutside:t=>t.preventDefault(),children:[y.jsx(pm,{children:h}),y.jsx(gm,{contentRef:s})]})})})});Fl.displayName=cn;var Bl="AlertDialogTitle",$l=W.forwardRef((S,_)=>{const{__scopeAlertDialog:e,...h}=S,p=Sr(e);return y.jsx(sm,{...p,...h,ref:_})});$l.displayName=Bl;var zl="AlertDialogDescription",Ul=W.forwardRef((S,_)=>{const{__scopeAlertDialog:e,...h}=S,p=Sr(e);return y.jsx(im,{...p,...h,ref:_})});Ul.displayName=zl;var mm="AlertDialogAction",Hl=W.forwardRef((S,_)=>{const{__scopeAlertDialog:e,...h}=S,p=Sr(e);return y.jsx(Rl,{...p,...h,ref:_})});Hl.displayName=mm;var Vl="AlertDialogCancel",ql=W.forwardRef((S,_)=>{const{__scopeAlertDialog:e,...h}=S,{cancelRef:p}=hm(Vl,e),c=Sr(e),s=er(_,p);return y.jsx(Rl,{...c,...h,ref:s})});ql.displayName=Vl;var gm=({contentRef:S})=>{const _=`\`${cn}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${cn}\` by passing a \`${zl}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${cn}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return W.useEffect(()=>{document.getElementById(S.current?.getAttribute("aria-describedby"))||console.warn(_)},[_,S]),null},bm=Il,ym=Pl,vm=Dl,Wl=Ll,Xl=Fl,Kl=Hl,Yl=ql,Gl=$l,Zl=Ul;const xm=bm,wm=ym,_m=vm,Jl=W.forwardRef(({className:S,..._},e)=>y.jsx(Wl,{className:lt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",S),..._,ref:e}));Jl.displayName=Wl.displayName;const Ql=W.forwardRef(({className:S,..._},e)=>y.jsxs(_m,{children:[y.jsx(Jl,{}),y.jsx(Xl,{ref:e,className:lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",S),..._})]}));Ql.displayName=Xl.displayName;const ec=({className:S,..._})=>y.jsx("div",{className:lt("flex flex-col space-y-2 text-center sm:text-left",S),..._});ec.displayName="AlertDialogHeader";const tc=({className:S,..._})=>y.jsx("div",{className:lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",S),..._});tc.displayName="AlertDialogFooter";const rc=W.forwardRef(({className:S,..._},e)=>y.jsx(Gl,{ref:e,className:lt("text-lg font-semibold",S),..._}));rc.displayName=Gl.displayName;const nc=W.forwardRef(({className:S,..._},e)=>y.jsx(Zl,{ref:e,className:lt("text-sm text-muted-foreground",S),..._}));nc.displayName=Zl.displayName;const sc=W.forwardRef(({className:S,..._},e)=>y.jsx(Kl,{ref:e,className:lt(Bi(),S),..._}));sc.displayName=Kl.displayName;const ic=W.forwardRef(({className:S,..._},e)=>y.jsx(Yl,{ref:e,className:lt(Bi({variant:"outline"}),"mt-2 sm:mt-0",S),..._}));ic.displayName=Yl.displayName;const vr=W.forwardRef(({className:S,type:_,...e},h)=>y.jsx("input",{type:_,className:lt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",S),ref:h,...e}));vr.displayName="Input";function km(S){const _=W.useRef({value:S,previous:S});return W.useMemo(()=>(_.current.value!==S&&(_.current.previous=_.current.value,_.current.value=S),_.current.previous),[S])}function Sm(S){const[_,e]=W.useState(void 0);return qr(()=>{if(S){e({width:S.offsetWidth,height:S.offsetHeight});const h=new ResizeObserver(p=>{if(!Array.isArray(p)||!p.length)return;const c=p[0];let s,i;if("borderBoxSize"in c){const r=c.borderBoxSize,t=Array.isArray(r)?r[0]:r;s=t.inlineSize,i=t.blockSize}else s=S.offsetWidth,i=S.offsetHeight;e({width:s,height:i})});return h.observe(S,{box:"border-box"}),()=>h.unobserve(S)}else e(void 0)},[S]),_}var Is="Switch",[jm]=Ln(Is),[Em,Cm]=jm(Is),ac=W.forwardRef((S,_)=>{const{__scopeSwitch:e,name:h,checked:p,defaultChecked:c,required:s,disabled:i,value:r="on",onCheckedChange:t,form:n,...l}=S,[a,o]=W.useState(null),d=er(_,k=>o(k)),f=W.useRef(!1),u=a?n||!!a.closest("form"):!0,[g,m]=Hi({prop:p,defaultProp:c??!1,onChange:t,caller:Is});return y.jsxs(Em,{scope:e,checked:g,disabled:i,children:[y.jsx(Vt.button,{type:"button",role:"switch","aria-checked":g,"aria-required":s,"data-state":uc(g),"data-disabled":i?"":void 0,disabled:i,value:r,...l,ref:d,onClick:$t(S.onClick,k=>{m(E=>!E),u&&(f.current=k.isPropagationStopped(),f.current||k.stopPropagation())})}),u&&y.jsx(cc,{control:a,bubbles:!f.current,name:h,value:r,checked:g,required:s,disabled:i,form:n,style:{transform:"translateX(-100%)"}})]})});ac.displayName=Is;var oc="SwitchThumb",lc=W.forwardRef((S,_)=>{const{__scopeSwitch:e,...h}=S,p=Cm(oc,e);return y.jsx(Vt.span,{"data-state":uc(p.checked),"data-disabled":p.disabled?"":void 0,...h,ref:_})});lc.displayName=oc;var Nm="SwitchBubbleInput",cc=W.forwardRef(({__scopeSwitch:S,control:_,checked:e,bubbles:h=!0,...p},c)=>{const s=W.useRef(null),i=er(s,c),r=km(e),t=Sm(_);return W.useEffect(()=>{const n=s.current;if(!n)return;const l=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(l,"checked").set;if(r!==e&&o){const d=new Event("click",{bubbles:h});o.call(n,e),n.dispatchEvent(d)}},[r,e,h]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...p,tabIndex:-1,ref:i,style:{...p.style,...t,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});cc.displayName=Nm;function uc(S){return S?"checked":"unchecked"}var dc=ac,Tm=lc;const xs=W.forwardRef(({className:S,..._},e)=>y.jsx(dc,{className:lt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",S),..._,ref:e,children:y.jsx(Tm,{className:lt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xs.displayName=dc.displayName;var Am=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mm=Am.reduce((S,_)=>{const e=Li(`Primitive.${_}`),h=W.forwardRef((p,c)=>{const{asChild:s,...i}=p,r=s?e:_;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(r,{...i,ref:c})});return h.displayName=`Primitive.${_}`,{...S,[_]:h}},{}),Rm="Label",fc=W.forwardRef((S,_)=>y.jsx(Mm.label,{...S,ref:_,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(S.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));fc.displayName=Rm;var hc=fc;const Om=Fi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rr=W.forwardRef(({className:S,..._},e)=>y.jsx(hc,{ref:e,className:lt(Om(),S),..._}));rr.displayName=hc.displayName;const Im="/assets/churnvision-CFooihj2.svg",Pm="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='800'%20width='1200'%20viewBox='-33.0981%20-55.17375%20286.8502%20331.0425'%3e%3cpath%20d='M104.868%20104.868H0V0h104.868z'%20fill='%23f35325'/%3e%3cpath%20d='M220.654%20104.868H115.787V0h104.867z'%20fill='%2381bc06'/%3e%3cpath%20d='M104.865%20220.695H0V115.828h104.865z'%20fill='%2305a6f0'/%3e%3cpath%20d='M220.654%20220.695H115.787V115.828h104.867z'%20fill='%23ffba08'/%3e%3c/svg%3e",Dm="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M174.82%20108.75L155.38%2075L165.64%2057.75C166.46%2056.31%20166.46%2054.53%20165.64%2053.09L155.38%2035.84C154.86%2034.91%20153.87%2034.33%20152.78%2034.33H114.88L106.14%2019.03C105.62%2018.1%20104.63%2017.52%20103.54%2017.52H83.3C82.21%2017.52%2081.22%2018.1%2080.7%2019.03L61.26%2052.77H41.02C39.93%2052.77%2038.94%2053.35%2038.42%2054.28L28.16%2071.53C27.34%2072.97%2027.34%2074.75%2028.16%2076.19L45.52%20107.5L36.78%20122.8C35.96%20124.24%2035.96%20126.02%2036.78%20127.46L47.04%20144.71C47.56%20145.64%2048.55%20146.22%2049.64%20146.22H87.54L96.28%20161.52C96.8%20162.45%2097.79%20163.03%2098.88%20163.03H119.12C120.21%20163.03%20121.2%20162.45%20121.72%20161.52L141.16%20127.78H158.52C159.61%20127.78%20160.6%20127.2%20161.12%20126.27L171.38%20109.02C172.2%20107.58%20172.2%20105.8%20171.38%20104.36L174.82%20108.75Z'%20fill='url(%23paint0_radial)'/%3e%3cpath%20d='M119.12%20163.03H98.88L87.54%20144.71H49.64L61.26%20126.39H80.7L38.42%2055.29H61.26L83.3%2019.03L93.56%2037.35L83.3%2055.29H161.58L151.32%2072.54L170.76%20106.28H151.32L141.16%2088.34L101.18%20163.03H119.12Z'%20fill='white'/%3e%3cpath%20d='M127.86%2079.83H76.14L101.18%20122.11L127.86%2079.83Z'%20fill='url(%23paint1_radial)'/%3e%3cdefs%3e%3cradialGradient%20id='paint0_radial'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(100%20100)%20rotate(90)%20scale(100)'%3e%3cstop%20stop-color='%23665CEE'/%3e%3cstop%20offset='1'%20stop-color='%23332E91'/%3e%3c/radialGradient%3e%3cradialGradient%20id='paint1_radial'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(100%20100)%20rotate(90)%20scale(100)'%3e%3cstop%20stop-color='%23665CEE'/%3e%3cstop%20offset='1'%20stop-color='%23332E91'/%3e%3c/radialGradient%3e%3c/defs%3e%3c/svg%3e",Lm="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='-47.36265%20-79.99825%20410.4763%20479.9895'%20width='1200'%20height='800'%3e%3cpath%20d='M294.93%20130.971a79.712%2079.712%200%2000-6.85-65.48c-17.46-30.4-52.56-46.04-86.84-38.68A79.747%2079.747%200%2000141.11.001c-35.04-.08-66.13%2022.48-76.91%2055.82a79.754%2079.754%200%2000-53.31%2038.67c-17.59%2030.32-13.58%2068.54%209.92%2094.54a79.712%2079.712%200%20006.85%2065.48c17.46%2030.4%2052.56%2046.04%2086.84%2038.68a79.687%2079.687%200%200060.13%2026.8c35.06.09%2066.16-22.49%2076.94-55.86a79.754%2079.754%200%200053.31-38.67c17.57-30.32%2013.55-68.51-9.94-94.51zm-120.28%20168.11a59.77%2059.77%200%2001-38.39-13.88c.49-.26%201.34-.73%201.89-1.07l63.72-36.8a10.36%2010.36%200%20005.24-9.07v-89.83l26.93%2015.55c.29.14.48.42.52.74v74.39c-.04%2033.08-26.83%2059.9-59.91%2059.97zm-128.84-55.03a59.71%2059.71%200%2001-7.15-40.18c.47.28%201.3.79%201.89%201.13l63.72%2036.8c3.23%201.89%207.23%201.89%2010.47%200l77.79-44.92v31.1c.02.32-.13.63-.38.83l-64.41%2037.19c-28.69%2016.52-65.33%206.7-81.92-21.95zm-16.77-139.09c7-12.16%2018.05-21.46%2031.21-26.29%200%20.55-.03%201.52-.03%202.2v73.61c-.02%203.74%201.98%207.21%205.23%209.06l77.79%2044.91-26.93%2015.55c-.27.18-.61.21-.91.08l-64.42-37.22c-28.63-16.58-38.45-53.21-21.95-81.89zm221.26%2051.49l-77.79-44.92%2026.93-15.54c.27-.18.61-.21.91-.08l64.42%2037.19c28.68%2016.57%2038.51%2053.26%2021.94%2081.94a59.94%2059.94%200%2001-31.2%2026.28v-75.81c.03-3.74-1.96-7.2-5.2-9.06zm26.8-40.34c-.47-.29-1.3-.79-1.89-1.13l-63.72-36.8a10.375%2010.375%200%2000-10.47%200l-77.79%2044.92v-31.1c-.02-.32.13-.63.38-.83l64.41-37.16c28.69-16.55%2065.37-6.7%2081.91%2022a59.95%2059.95%200%20017.15%2040.1zm-168.51%2055.43l-26.94-15.55a.943.943%200%2001-.52-.74v-74.39c.02-33.12%2026.89-59.96%2060.01-59.94%2014.01%200%2027.57%204.92%2038.34%2013.88-.49.26-1.33.73-1.89%201.07l-63.72%2036.8a10.344%2010.344%200%2000-5.24%209.06l-.04%2089.79zm14.63-31.54l34.65-20.01%2034.65%2020v40.01l-34.65%2020-34.65-20z'/%3e%3c/svg%3e",Fm="/assets/mistral-BY6wN-cY.svg",Bm="/assets/ibm-Cip7uhsX.svg";function $m(S,_=[]){let e=[];function h(c,s){const i=W.createContext(s);i.displayName=c+"Context";const r=e.length;e=[...e,s];const t=l=>{const{scope:a,children:o,...d}=l,f=a?.[S]?.[r]||i,u=W.useMemo(()=>d,Object.values(d));return y.jsx(f.Provider,{value:u,children:o})};t.displayName=c+"Provider";function n(l,a){const o=a?.[S]?.[r]||i,d=W.useContext(o);if(d)return d;if(s!==void 0)return s;throw new Error(`\`${l}\` must be used within \`${c}\``)}return[t,n]}const p=()=>{const c=e.map(s=>W.createContext(s));return function(i){const r=i?.[S]||c;return W.useMemo(()=>({[`__scope${S}`]:{...i,[S]:r}}),[i,r])}};return p.scopeName=S,[h,zm(p,..._)]}function zm(...S){const _=S[0];if(S.length===1)return _;const e=()=>{const h=S.map(p=>({useScope:p(),scopeName:p.scopeName}));return function(c){const s=h.reduce((i,{useScope:r,scopeName:t})=>{const l=r(c)[`__scope${t}`];return{...i,...l}},{});return W.useMemo(()=>({[`__scope${_.scopeName}`]:s}),[s])}};return e.scopeName=_.scopeName,e}var Um=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pc=Um.reduce((S,_)=>{const e=Li(`Primitive.${_}`),h=W.forwardRef((p,c)=>{const{asChild:s,...i}=p,r=s?e:_;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(r,{...i,ref:c})});return h.displayName=`Primitive.${_}`,{...S,[_]:h}},{}),Yi="Progress",Gi=100,[Hm]=$m(Yi),[Vm,qm]=Hm(Yi),mc=W.forwardRef((S,_)=>{const{__scopeProgress:e,value:h=null,max:p,getValueLabel:c=Wm,...s}=S;(p||p===0)&&!to(p)&&console.error(Xm(`${p}`,"Progress"));const i=to(p)?p:Gi;h!==null&&!ro(h,i)&&console.error(Km(`${h}`,"Progress"));const r=ro(h,i)?h:null,t=ws(r)?c(r,i):void 0;return y.jsx(Vm,{scope:e,value:r,max:i,children:y.jsx(pc.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":ws(r)?r:void 0,"aria-valuetext":t,role:"progressbar","data-state":yc(r,i),"data-value":r??void 0,"data-max":i,...s,ref:_})})});mc.displayName=Yi;var gc="ProgressIndicator",bc=W.forwardRef((S,_)=>{const{__scopeProgress:e,...h}=S,p=qm(gc,e);return y.jsx(pc.div,{"data-state":yc(p.value,p.max),"data-value":p.value??void 0,"data-max":p.max,...h,ref:_})});bc.displayName=gc;function Wm(S,_){return`${Math.round(S/_*100)}%`}function yc(S,_){return S==null?"indeterminate":S===_?"complete":"loading"}function ws(S){return typeof S=="number"}function to(S){return ws(S)&&!isNaN(S)&&S>0}function ro(S,_){return ws(S)&&!isNaN(S)&&S<=_&&S>=0}function Xm(S,_){return`Invalid prop \`max\` of value \`${S}\` supplied to \`${_}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Gi}\`.`}function Km(S,_){return`Invalid prop \`value\` of value \`${S}\` supplied to \`${_}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Gi} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var vc=mc,Ym=bc;const xc=W.forwardRef(({className:S,value:_,...e},h)=>y.jsx(vc,{ref:h,className:lt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",S),...e,children:y.jsx(Ym,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(_||0)}%)`}})}));xc.displayName=vc.displayName;const ts=({label:S,value:_,icon:e})=>y.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 dark:border-gray-700/50 last:border-b-0",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[e&&y.jsx(e,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 flex-shrink-0"}),y.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:S})]}),y.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-100 text-right",children:_})]}),Gm=({sections:S,activeSection:_,onSectionChange:e})=>y.jsx("div",{className:"space-y-2",children:S.map(h=>y.jsxs(at.button,{onClick:()=>e(h.id),className:lt("w-full flex items-center gap-3 p-3 rounded-lg text-left transition-all duration-200",_===h.id?"bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[y.jsx(h.icon,{className:lt("w-5 h-5",h.color)}),y.jsxs("div",{children:[y.jsx("div",{className:"font-medium text-sm",children:h.title}),y.jsx("div",{className:"text-xs opacity-70",children:h.description})]})]},h.id))});function Zm(){const S=Xr(),{resetOnboarding:_}=Zo(),{licenseStatus:e,licenseData:h,isLoading:p,error:c,gracePeriodEnds:s,licenseTier:i}=Ts(),[r,t]=W.useState("general"),[n,l]=W.useState(!1),[a,o]=W.useState(""),[d,f]=W.useState(""),[u,g]=W.useState(!1),[m,k]=W.useState(!0),[E,A]=W.useState(!0),{toast:L}=Dn(),[z,R]=W.useState(()=>localStorage.getItem("settings.dataMode")==="performance"?"performance":"wage"),I=W.useMemo(()=>[{id:"general",title:"General",description:"Basic app settings",icon:ns,color:"text-gray-600"},{id:"license",title:"License & Plans",description:"Manage your subscription",icon:di,color:"text-purple-600"},{id:"appearance",title:"Appearance",description:"Theme and display",icon:yo,color:"text-blue-600"},{id:"ai",title:"AI & Models",description:"Choose AI provider",icon:gs,color:"text-emerald-600"},{id:"data",title:"Data & Storage",description:"Data sources and paths",icon:br,color:"text-green-600"},{id:"security",title:"Security",description:"Privacy and security",icon:_s,color:"text-red-600"},{id:"advanced",title:"Advanced",description:"Developer options",icon:su,color:"text-orange-600"}],[]),[B,H]=W.useState(()=>{if(typeof window<"u"){const te=localStorage.getItem("churnvision-ai-model-type");if(te&&_n(te))return te}return"local"}),[$,C]=W.useState({}),[T,j]=W.useState({}),[b,v]=W.useState(!0),[x,w]=W.useState(!0),[N,P]=W.useState(!1),[D,V]=W.useState(!1),q=W.useRef(!0),G=W.useRef(!1),F=W.useCallback(()=>{if(typeof window>"u")return null;const te=localStorage.getItem(si);return no(te)?te:null},[]);W.useEffect(()=>(q.current=!0,()=>{q.current=!1}),[]);const X=W.useCallback(async()=>{try{const te=await et.get("/ai/provider-status");te.data?.status&&q.current&&C(te.data.status)}catch(te){or.warn("[Settings] Failed to fetch provider status",te)}},[]),O=W.useCallback(async()=>{try{const de=(await et.get("/ai/model-type")).data?.modelType;_n(de)&&q.current&&(H(de),no(de)&&typeof window<"u"&&localStorage.setItem(si,de))}catch(te){or.warn("[Settings] Failed to load provider preference",te)}finally{q.current&&v(!1)}},[]),M=W.useCallback(async()=>{w(!0);try{const te=await et.get("/settings/offline-mode");q.current&&V(!!te.data?.enabled)}catch(te){or.warn("[Settings] Failed to load strict offline mode",te)}finally{q.current&&w(!1)}},[]);W.useEffect(()=>{O(),M(),X()},[O,M,X]);const U=W.useMemo(()=>Zi.map(te=>{const de=a0[te.id]??"churnvision",le=r0[te.id]??"bg-emerald-500",ve=$[te.id],we=!!T[te.id]||ve?.status==="downloading"||ve?.status==="verifying",Se=!!ve?.path||["ready","completed"].includes(ve?.status??""),_e=te.requiresOnline??(te.deployment==="cloud"||!!te.artifact&&!Se);return{id:te.id,value:te.id,label:te.label,description:te.description,badge:te.badge,icon:de,deployment:te.deployment,accent:le,metrics:te.metrics,artifact:te.artifact,requiresOnline:_e,requiresApiKey:te.requiresApiKey,disabled:te.id==="auto",status:ve,isProvisioning:we}}),[T,$]),K=W.useMemo(()=>U.reduce((te,de)=>(te[de.value]=de.label,te),{}),[U]);W.useMemo(()=>U.find(te=>te.value===B)??U[0],[U,B]);const Q=W.useMemo(()=>Object.values(T).some(Boolean),[T]),Y=W.useCallback(async te=>{if(te.deployment!=="local"||!te.artifact)return!1;const de=$[te.id];if((de?.status==="ready"||de?.status==="completed"||de?.path)&&!de?.error)return!1;j(le=>({...le,[te.id]:!0}));try{const le=await et.post("/ai/provision-provider",{provider_id:te.id});if(!le.data?.success)throw new Error(le.data?.message||"Provisioning failed");return await X(),!0}catch(le){throw new Error(le.response?.data?.detail||le.message||"Provisioning failed")}finally{q.current&&j(le=>({...le,[te.id]:!1}))}},[$,X]),J=W.useCallback(async(te,de)=>{if(de){L(D?{title:"Offline mode enabled",description:"Disable strict offline mode in Security settings to change AI providers.",variant:"destructive"}:{title:"Provider not yet available",description:"This provider will be enabled in a future release."});return}const le=te.value;if(!_n(le)){L({title:"Provider coming soon",description:"Support for this provider is not yet available in this build."});return}if(le!==B){P(!0);try{await et.post("/ai/set-provider",{provider:le}),typeof window<"u"&&(localStorage.setItem("churnvision-ai-model-type",le),te.deployment==="local"&&localStorage.setItem(si,le),window.dispatchEvent(new CustomEvent("churnvision:ai-provider-changed",{detail:le}))),q.current&&H(le),L({title:"AI provider updated",description:K[le]}),D||await Y(te)}catch(ve){const we=ve instanceof Error?ve.message:"Unknown error occurred while switching provider.";L({title:"Unable to switch provider",description:we,variant:"destructive"})}finally{q.current&&P(!1)}}},[B,K,D,L,Y]),ae=W.useCallback(async()=>{const te=F(),de=te&&U.find(le=>le.id===te&&le.deployment==="local")||U.find(le=>le.deployment==="local");!de||de.value===B||await J(de,!1)},[F,U,B,J]);W.useEffect(()=>{const te=G.current;G.current=D,D&&!te&&ae().catch(de=>or.warn("[Settings] Failed to enforce local provider",de))},[D,ae]),W.useEffect(()=>{if(typeof window>"u")return;const te=de=>{const le=!!de.detail;q.current&&(V(le),w(!1)),X(),O()};return window.addEventListener("churnvision:strict-offline-changed",te),()=>{window.removeEventListener("churnvision:strict-offline-changed",te)}},[X,O]);const ie=D||N||b||Q,Z=y.jsx("div",{className:"space-y-6",children:y.jsxs(Yt,{children:[y.jsx(Zt,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:y.jsxs("div",{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(gs,{className:"w-5 h-5 text-emerald-600"}),"AI Provider & Models"]}),y.jsx(Qt,{children:"Control how ChurnVisions AI assistant runs and which local model it prefers."})]})}),y.jsxs(ir,{className:"space-y-6",children:[y.jsxs("div",{className:lt("rounded-lg border p-4 transition-colors",D?"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800":"bg-surface-subtle border-border"),children:[y.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"font-medium flex items-center gap-2",children:["Strict Offline Mode",x&&y.jsx("span",{className:"text-xs text-neutral-muted",children:"(checking)"})]}),y.jsx("p",{className:"text-sm text-neutral-muted",children:D?"AI configuration is locked while strict offline mode is enabled.":"Online capabilities are available. You can safely adjust AI provider preferences."})]}),y.jsx("span",{className:lt("px-2 py-1 text-xs font-semibold rounded-md uppercase tracking-wide",D?"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-200":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200"),children:D?"Locked":"Unlocked"})]}),D&&y.jsx("p",{className:"mt-3 text-xs text-neutral-muted",children:"Disable strict offline mode from the Security tab to make changes to providers or models."})]}),y.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:U.map(te=>{const de=_n(B)&&B===te.value,le=te.status,ve=le?.downloadedBytes??0,we=le?.totalBytes??te.artifact?.size??0,Se=le?.percent??(we?Math.min(100,Math.round(ve/we*100)):null),_e=te.isProvisioning??!1,Pe=ie||!!te.disabled||!!te.requiresOnline&&D||_e,Fe=[{key:"speed",label:"Speed",score:te.metrics.speed},{key:"performance",label:"Performance",score:te.metrics.performance},{key:"intelligence",label:"Intelligence",score:te.metrics.intelligence}];let Oe="",Me="text-neutral-muted";return te.deployment==="cloud"?te.id==="openai"?(Oe="Managed by ChurnVision",Me="text-emerald-600"):(Oe="Cloud hosted",Me="text-sky-600"):le?.status==="downloading"?(Oe=`Downloading ${Se??0}%`,Me="text-blue-600"):le?.status==="verifying"?(Oe="Verifying download",Me="text-blue-600"):le?.status==="error"?(Oe=le?.error?`Error: ${le.error}`:"Provisioning failed",Me="text-red-600"):le?.status==="ready"||le?.status==="completed"||le?.path?(Oe="Ready to use",Me="text-emerald-600"):te.artifact?te.disabled?Oe="Coming soon":Oe="Not installed":(Oe="Ready to use",Me="text-emerald-600"),y.jsxs("button",{type:"button",onClick:()=>J(te,Pe),disabled:Pe,className:lt("relative flex h-full flex-col gap-4 rounded-lg border p-4 text-left transition-all",de?"border-emerald-500 bg-surface-elevated shadow-lg shadow-emerald-500/10":"border-border bg-surface hover:-translate-y-0.5 hover:border-emerald-400 hover:shadow-md",Pe&&"cursor-not-allowed opacity-60 hover:translate-y-0 hover:shadow-none"),children:[y.jsxs("div",{className:"flex items-start gap-3",children:[n0(te.icon),y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[y.jsx("span",{className:"font-semibold leading-tight text-foreground",children:te.label}),y.jsx("span",{className:lt("rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-foreground/80",te.deployment==="local"?"bg-emerald-100/80 dark:bg-emerald-900/40":"bg-indigo-100/80 dark:bg-indigo-900/40"),children:te.deployment==="local"?"Runs locally":"Cloud hosted"}),te.badge&&y.jsx("span",{className:"rounded-full bg-emerald-100/80 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200",children:te.badge})]}),y.jsx("p",{className:"text-sm text-neutral-muted leading-snug",children:te.description}),y.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-medium",children:[y.jsx("span",{className:lt(Me),children:Oe}),_e&&y.jsx(zt,{className:"w-4 h-4 animate-spin text-blue-500"})]}),le?.status==="downloading"&&y.jsxs("div",{className:"mt-2 space-y-1",children:[y.jsx(xc,{value:Se??0,className:"h-1.5"}),y.jsxs("p",{className:"text-[11px] text-neutral-muted",children:[so(ve)," / ",we?so(we):"unknown"]})]}),le?.status==="error"&&le?.error&&y.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-400 line-clamp-2",children:le.error})]})]}),y.jsx("div",{className:"grid gap-2 text-xs uppercase tracking-wide text-neutral-muted",children:Fe.map(Ee=>y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between text-[11px] font-medium",children:[y.jsx("span",{children:Ee.label}),y.jsxs("span",{children:[Ee.score,"/5"]})]}),y.jsx(s0,{score:Ee.score,accent:te.accent,disabled:Pe})]},Ee.key))}),te.requiresOnline&&y.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-300",children:"Requires connectivity"}),Pe&&te.requiresOnline&&D&&y.jsx("span",{className:"text-xs font-medium text-neutral-muted",children:"Turn off strict offline mode to enable"}),Pe&&!te.requiresOnline&&y.jsx("span",{className:"text-xs font-medium text-neutral-muted",children:"Coming soon"}),de&&y.jsx(un,{className:"absolute top-3 right-3 h-5 w-5 text-emerald-500"})]},te.id)})}),(()=>{if(B==="auto")return y.jsxs("div",{className:"rounded-lg border border-dashed border-border/70 bg-surface-subtle p-4 text-sm text-neutral-muted",children:[y.jsx("p",{className:"font-medium text-neutral",children:"Automatic provider selection"}),y.jsx("p",{className:"mt-1 leading-relaxed",children:"The auto mode will choose between local and cloud providers dynamically. This feature is under developmentwatch the release notes for availability."})]});const te=U.find(le=>le.value===B)??U[0];if(!te)return null;const de=te.deployment==="cloud";return y.jsxs("div",{className:"rounded-lg border border-dashed border-border/70 bg-surface-subtle p-4 text-sm text-neutral-muted",children:[y.jsx("p",{className:"font-medium text-neutral",children:de?"Cloud connectivity enabled":"Fully offline local deployment"}),y.jsx("p",{className:"mt-1 leading-relaxed",children:de?"Inference requests are routed to secure cloud endpoints once strict offline mode is disabled. Provisioning will download the recommended model automatically when available.":"All model weights stay on this device. No prompts or responses leave your network."}),te.value==="openai"&&y.jsx("p",{className:"mt-2 text-xs text-neutral-muted",children:"ChurnVision masks employee names, identifiers, and sensitive fields before contacting OpenAI. The masked response is unmasked locally before rendering."})]})})()]})]})}),ne=W.useCallback(async()=>{try{or.info("Starting application state reset...");try{localStorage.removeItem("churnvision-theme"),Object.keys(localStorage).filter(te=>te.startsWith("churnvision-onboarding-completed-")).forEach(te=>localStorage.removeItem(te)),Object.keys(localStorage).filter(te=>te.startsWith("chatbot_")).forEach(te=>localStorage.removeItem(te)),localStorage.removeItem("employee_data_cache"),localStorage.removeItem("user"),localStorage.removeItem("remember_me"),localStorage.removeItem("stored_email"),or.info("Cleared relevant localStorage items.")}catch(te){or.error("Error clearing localStorage:",te)}try{sessionStorage.clear(),or.info("Cleared sessionStorage.")}catch(te){or.error("Error clearing sessionStorage:",te)}or.info("Application state reset complete. Navigating..."),S("/")}catch(te){or.error("Error during application state reset:",te),L({title:"Reset failed",description:"An error occurred while resetting the application state.",variant:"destructive"})}finally{l(!1)}},[S,L]),re=W.useCallback(async()=>{if(!a.trim()){L({title:"License key required",description:"Please enter a license key.",variant:"destructive"});return}or.info("Attempting to activate license key:",{keyPreview:a.slice(0,6)+""}),L({title:"Activation requested",description:`Key: ${a.slice(0,6)} (implement actual activation)`})},[a,L]),ue=W.useCallback(async()=>{try{g(!0),await et.post("/api/projects/base-dir",{baseDir:d.trim()}),L({title:"Success",description:"Projects directory saved successfully."})}catch(te){L({title:"Failed to set projects directory",description:te?.message||"Unknown error",variant:"destructive"})}finally{g(!1)}},[d,L]),ce=W.useCallback(async()=>{try{const te=await et.get("/api/projects/base-dir");f(te.data?.baseDir||"")}catch{f("")}},[]);return p?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(at.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:y.jsx(ns,{className:"w-8 h-8 text-blue-500"})}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading Settings..."})]})}):c||e==="ERROR"?y.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-red-50 dark:bg-red-900/20",children:y.jsx(Yt,{className:"max-w-md w-full border-red-300 dark:border-red-700 bg-white dark:bg-gray-800 shadow-lg",children:y.jsxs(Zt,{className:"text-center",children:[y.jsx(Hr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),y.jsx(Jt,{className:"text-red-700 dark:text-red-300",children:"Error Loading Settings"}),y.jsx(Qt,{className:"text-red-600 dark:text-red-400",children:c||"Could not load license information. Please try again later or contact support."})]})})}):y.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:y.jsxs(at.div,{className:"max-w-7xl mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:y.jsx(ns,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your application preferences and configuration"})]})]})}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[y.jsx("div",{className:"lg:col-span-1",children:y.jsx(Yt,{className:"p-4 sticky top-6",children:y.jsx(Gm,{sections:I,activeSection:r,onSectionChange:t})})}),y.jsx("div",{className:"lg:col-span-3",children:y.jsx(zr,{mode:"wait",children:y.jsxs(at.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[r==="general"&&y.jsx(Jm,{notificationsEnabled:m,setNotificationsEnabled:k,autoSaveEnabled:E,setAutoSaveEnabled:A,dataMode:z,setDataMode:R,resetOnboarding:_}),r==="license"&&y.jsx(Qm,{licenseStatus:e,licenseData:h,gracePeriodEnds:s,licenseTier:i,licenseKeyInput:a,setLicenseKeyInput:o,handleActivateLicense:re}),r==="appearance"&&y.jsx(e0,{}),r==="ai"&&Z,r==="data"&&y.jsx(o0,{projectsBaseDir:d,setProjectsBaseDir:f,isSavingBaseDir:u,handleProjectBaseDirSave:ue,handleProjectBaseDirLoad:ce}),r==="security"&&y.jsx(l0,{}),r==="advanced"&&y.jsx(c0,{isResetAlertOpen:n,setIsResetAlertOpen:l,performReset:ne})]},r)})})]})]})})}const Jm=({notificationsEnabled:S,setNotificationsEnabled:_,autoSaveEnabled:e,setAutoSaveEnabled:h,dataMode:p,setDataMode:c,resetOnboarding:s})=>y.jsx("div",{className:"space-y-6",children:y.jsxs(Yt,{children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(ho,{className:"w-5 h-5 text-blue-600"}),"General Preferences"]}),y.jsx(Qt,{children:"Configure basic application settings"})]}),y.jsxs(ir,{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx(rr,{children:"Enable Notifications"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Receive app notifications and alerts"})]}),y.jsx(xs,{checked:S,onCheckedChange:_})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx(rr,{children:"Auto-save Changes"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Automatically save your work"})]}),y.jsx(xs,{checked:e,onCheckedChange:h})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx(rr,{children:"Analysis Mode"}),y.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[y.jsx("p",{children:"Wage: Uses salary & ELTV for financial analysis"}),y.jsx("p",{children:"Performance: Uses ratings & RVI for talent focus"})]})]}),y.jsx(Et,{variant:p==="wage"?"default":"outline",onClick:()=>{const i=p==="wage"?"performance":"wage";c(i),localStorage.setItem("settings.dataMode",i)},children:p==="wage"?"Wage Mode":"Performance Mode"})]}),y.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx(rr,{children:"Onboarding Tutorial"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Restart the welcome tutorial"})]}),y.jsxs(Et,{variant:"outline",onClick:s,children:[y.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Restart Tutorial"]})]})]})]})}),Qm=({licenseStatus:S,licenseData:_,gracePeriodEnds:e,licenseTier:h,licenseKeyInput:p,setLicenseKeyInput:c,handleActivateLicense:s})=>y.jsxs("div",{className:"space-y-6",children:[y.jsxs(Yt,{children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(an,{className:"w-5 h-5 text-green-600"}),"License Status"]}),y.jsx(Qt,{children:"Current license information and activation"})]}),y.jsxs(ir,{className:"space-y-4",children:[y.jsx(ts,{label:"Status",value:y.jsxs("span",{className:lt("text-xs font-semibold px-3 py-1 rounded-full inline-flex items-center gap-1.5",S==="ACTIVE"?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":S==="GRACE_PERIOD"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"),children:[S==="ACTIVE"&&y.jsx(an,{className:"w-3.5 h-3.5"}),S==="GRACE_PERIOD"&&y.jsx(ia,{className:"w-3.5 h-3.5"}),S!=="ACTIVE"&&S!=="GRACE_PERIOD"&&y.jsx(Hr,{className:"w-3.5 h-3.5"}),S.replace("_"," ")]}),icon:an}),_?.tier&&y.jsx(ts,{label:"Current Tier",value:Di(h),icon:di}),_?.expiryDate&&y.jsx(ts,{label:"Expires",value:new Date(_.expiryDate).toLocaleDateString(),icon:iu}),S==="GRACE_PERIOD"&&e&&y.jsx(ts,{label:"Grace Period Ends",value:y.jsx("span",{className:"text-yellow-700 dark:text-yellow-400",children:new Date(e).toLocaleString()}),icon:ia})]})]}),y.jsxs(Yt,{children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(au,{className:"w-5 h-5 text-blue-600"}),"Activate License"]}),y.jsx(Qt,{children:"Enter a new license key to activate or upgrade"})]}),y.jsx(ir,{className:"space-y-4",children:y.jsxs("div",{className:"flex gap-2",children:[y.jsx(vr,{type:"text",placeholder:"Paste your license key here",value:p,onChange:i=>c(i.target.value),className:"flex-1"}),y.jsx(Et,{onClick:s,disabled:!p.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Activate"})]})})]}),y.jsxs(Yt,{className:"overflow-hidden",children:[y.jsxs(Zt,{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(di,{className:"w-5 h-5 text-purple-600"}),"Available Plans"]}),y.jsx(Qt,{children:"Compare features across different license tiers"})]}),y.jsx(ir,{className:"p-6",children:y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["starter","pro","enterprise"].map(i=>{const r=h===i,n={starter:{name:"Starter",features:["Dashboard","Data Management","Basic Analytics"],color:"blue"},pro:{name:"Pro",features:["All Starter Features","AI Assistant","Employee Insights"],color:"emerald"},enterprise:{name:"Enterprise",features:["All Pro Features","Playground","Full API Access"],color:"purple"}}[i];return y.jsxs("div",{className:lt("p-4 rounded-lg border-2 transition-all",r?`border-${n.color}-400 bg-${n.color}-50 dark:bg-${n.color}-900/20`:"border-gray-200 dark:border-gray-700"),children:[r&&y.jsx("div",{className:"text-xs font-bold text-center mb-2 text-blue-600 dark:text-blue-400",children:"CURRENT PLAN"}),y.jsx("h3",{className:"font-semibold text-center mb-3",children:n.name}),y.jsx("ul",{className:"space-y-1 text-sm",children:n.features.map((l,a)=>y.jsxs("li",{className:"flex items-center",children:[y.jsx("div",{className:`w-2 h-2 rounded-full bg-${n.color}-500 mr-2 flex-shrink-0`}),l]},a))})]},i)})})})]})]}),e0=()=>y.jsx("div",{className:"space-y-6",children:y.jsxs(Yt,{children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(yo,{className:"w-5 h-5 text-blue-600"}),"Theme & Display"]}),y.jsx(Qt,{children:"Customize the app's visual appearance"})]}),y.jsx(ir,{className:"space-y-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx(rr,{children:"Color Theme"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Choose between light and dark mode"})]}),y.jsx(xo,{})]})})]})}),t0={churnvision:Im,microsoft:Pm,qwen:Dm,openai:Lm,mistral:Fm,ibm:Bm},r0={local:"bg-emerald-500",microsoft:"bg-blue-500",qwen:"bg-purple-500",mistral:"bg-orange-500",ibm:"bg-sky-500",openai:"bg-indigo-500",auto:"bg-slate-500"},n0=S=>y.jsx("img",{src:t0[S],alt:`${S} logo`,className:"h-12 w-12 rounded-full shadow-sm ring-1 ring-black/5",draggable:!1}),s0=({score:S,accent:_,disabled:e})=>y.jsx("div",{className:"mt-1 flex gap-1",children:Array.from({length:5}).map((h,p)=>y.jsx("div",{className:lt("h-1.5 flex-1 rounded-full transition-colors",p<S?_:"bg-border/60",e&&"opacity-40")},p))}),i0=["local","openai","auto","microsoft","qwen","mistral","ibm"],_n=S=>typeof S=="string"&&i0.includes(S),Zi=[{id:"local",label:"ChurnVision Local",description:"Run AI models locally on your machine",deployment:"local",badge:"Privacy First",metrics:{speed:85,performance:90,intelligence:88}},{id:"openai",label:"OpenAI",description:"GPT-4 and other OpenAI models",deployment:"cloud",badge:"Most Advanced",metrics:{speed:95,performance:98,intelligence:99}},{id:"microsoft",label:"Azure OpenAI",description:"Enterprise-grade AI from Microsoft",deployment:"cloud",badge:"Enterprise",metrics:{speed:93,performance:96,intelligence:97}},{id:"qwen",label:"Qwen",description:"Alibaba Cloud AI models",deployment:"cloud",metrics:{speed:90,performance:92,intelligence:93}},{id:"mistral",label:"Mistral AI",description:"European AI excellence",deployment:"cloud",metrics:{speed:91,performance:94,intelligence:95}},{id:"ibm",label:"IBM Watson",description:"IBM enterprise AI platform",deployment:"cloud",badge:"Enterprise",metrics:{speed:88,performance:90,intelligence:91}},{id:"auto",label:"Auto-Select",description:"Automatically choose the best provider",deployment:"local",badge:"Smart",metrics:{speed:90,performance:92,intelligence:94}}],si="churnvision-last-local-provider";Zi.reduce((S,_)=>(S[_.id]=_.label,S),{});const a0={local:"churnvision",microsoft:"microsoft",qwen:"qwen",mistral:"mistral",ibm:"ibm",openai:"openai",auto:"churnvision"},no=S=>_n(S)?Zi.find(e=>e.id===S)?.deployment==="local":!1,so=S=>{if(S==null||Number.isNaN(S))return"0 B";const _=["B","KB","MB","GB","TB"];let e=S,h=0;for(;e>=1024&&h<_.length-1;)e/=1024,h+=1;const p=h===0?0:e<10?1:0;return`${e.toFixed(p)} ${_[h]}`},o0=({projectsBaseDir:S,setProjectsBaseDir:_,isSavingBaseDir:e,handleProjectBaseDirSave:h,handleProjectBaseDirLoad:p})=>y.jsxs("div",{className:"space-y-6",children:[y.jsxs(Yt,{children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(ci,{className:"w-5 h-5 text-green-600"}),"Project Directory"]}),y.jsx(Qt,{children:"Configure where your project files are stored"})]}),y.jsx(ir,{className:"space-y-4",children:y.jsxs("div",{className:"space-y-3",children:[y.jsx(rr,{children:"Base Directory Path"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx(vr,{type:"text",value:S,onChange:c=>_(c.target.value),placeholder:"/path/to/projects",className:"flex-1"}),y.jsx(Et,{variant:"outline",disabled:e||!S.trim(),onClick:h,children:e?"Saving...":"Save"}),y.jsx(Et,{variant:"ghost",onClick:p,children:"Load"})]})]})})]}),y.jsxs(Yt,{children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(br,{className:"w-5 h-5 text-indigo-600"}),"Data Sources"]}),y.jsx(Qt,{children:"Manage external data connections"})]}),y.jsx(ir,{children:y.jsxs("div",{className:"text-center py-8 border border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[y.jsx(br,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Data source management coming soon"})]})})]})]}),l0=()=>{const[S,_]=W.useState(!1),[e,h]=W.useState(!0),p=Xr(),{toast:c}=Dn(),s=W.useCallback(async()=>{try{const r=await et.get("/settings/offline-mode");_(!!r.data?.enabled)}catch(r){console.error("Failed to load offline mode:",r)}finally{h(!1)}},[]);W.useEffect(()=>{s()},[s]);const i=W.useCallback(async r=>{_(r);try{await et.post("/settings/offline-mode",{enabled:r}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("churnvision:strict-offline-changed",{detail:r})),c(r?{title:"Strict offline mode enabled",description:"All outbound requests are blocked. Cloud AI providers are temporarily unavailable."}:{title:"Strict offline mode disabled",description:"Cloud AI providers, automatic model downloads, and masked cloud inference are now available."})}catch{_(!r)}},[c]);return y.jsx("div",{className:"space-y-6",children:y.jsxs(Yt,{children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2",children:[y.jsx(_s,{className:"w-5 h-5 text-red-600"}),"Privacy & Security"]}),y.jsx(Qt,{children:"Manage security and privacy settings"})]}),y.jsxs(ir,{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Strict Offline Mode"}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Blocks all external network access (local/localhost allowed)"})]}),y.jsx("div",{className:"flex items-center gap-2",children:e?y.jsx("span",{className:"text-sm text-gray-500",children:"Loading"}):y.jsx(xs,{checked:S,onCheckedChange:i})})]}),y.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Diagnostics"}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View DB health and local LLM status"})]}),y.jsx(Et,{variant:"outline",onClick:()=>p("/diagnostics"),children:"Open"})]}),y.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Provision Local Model"}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create a local LLM from the bundled Modelfile (offline)"})]}),y.jsx(Et,{variant:"secondary",onClick:async()=>{try{const r=await et.post("/ai/provision-provider",{provider_id:"local"});if(r.data?.success)alert("Model provisioned successfully.");else throw new Error(r.data?.message||"Provisioning failed")}catch(r){const t=r&&r.response?.data?.detail||r&&r.message?r.message:String(r);alert(`Provisioning failed: ${t}`)}},children:"Provision"})]}),y.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg opacity-50",children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Export Encrypted Backup"}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Desktop application only - use Data Management page for exports"})]}),y.jsx(Et,{variant:"outline",disabled:!0,title:"This feature is only available in the desktop application",children:"Export"})]}),y.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg opacity-50",children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Organization Knowledge Base"}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Desktop application only - RAG requires local file system access"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Et,{variant:"secondary",disabled:!0,title:"This feature is only available in the desktop application",children:"Add Files"}),y.jsx(Et,{variant:"outline",disabled:!0,title:"This feature is only available in the desktop application",children:"Stats"})]})]})]})]})})},c0=({isResetAlertOpen:S,setIsResetAlertOpen:_,performReset:e})=>y.jsx("div",{className:"space-y-6",children:y.jsxs(Yt,{className:"border-red-200 dark:border-red-800",children:[y.jsxs(Zt,{children:[y.jsxs(Jt,{className:"flex items-center gap-2 text-red-700 dark:text-red-300",children:[y.jsx(Hr,{className:"w-5 h-5"}),"Danger Zone"]}),y.jsx(Qt,{className:"text-red-600 dark:text-red-400",children:"These actions are permanent and cannot be undone"})]}),y.jsx(ir,{className:"space-y-4",children:y.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 dark:border-red-800 rounded-lg",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Reset Application State"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clear all local data, settings, and cached information"})]}),y.jsxs(xm,{open:S,onOpenChange:_,children:[y.jsx(wm,{asChild:!0,children:y.jsxs(Et,{variant:"destructive",size:"sm",children:[y.jsx(ui,{className:"w-4 h-4 mr-2"}),"Reset"]})}),y.jsxs(Ql,{children:[y.jsxs(ec,{children:[y.jsx(rc,{children:"Reset Application State?"}),y.jsx(nc,{children:"This will clear all local settings, cached data, and user preferences. Your license information will be preserved. This action cannot be undone."})]}),y.jsxs(tc,{children:[y.jsx(ic,{children:"Cancel"}),y.jsx(sc,{onClick:e,className:"bg-red-600 hover:bg-red-700",children:"Yes, Reset Everything"})]})]})]})]})})]})});function io(S){const _=u0(S),e=W.forwardRef((h,p)=>{const{children:c,...s}=h,i=W.Children.toArray(c),r=i.find(f0);if(r){const t=r.props.children,n=i.map(l=>l===r?W.Children.count(t)>1?W.Children.only(null):W.isValidElement(t)?t.props.children:null:l);return y.jsx(_,{...s,ref:p,children:W.isValidElement(t)?W.cloneElement(t,void 0,n):null})}return y.jsx(_,{...s,ref:p,children:c})});return e.displayName=`${S}.Slot`,e}function u0(S){const _=W.forwardRef((e,h)=>{const{children:p,...c}=e;if(W.isValidElement(p)){const s=p0(p),i=h0(c,p.props);return p.type!==W.Fragment&&(i.ref=h?Pn(h,s):s),W.cloneElement(p,i)}return W.Children.count(p)>1?W.Children.only(null):null});return _.displayName=`${S}.SlotClone`,_}var d0=Symbol("radix.slottable");function f0(S){return W.isValidElement(S)&&typeof S.type=="function"&&"__radixId"in S.type&&S.type.__radixId===d0}function h0(S,_){const e={..._};for(const h in _){const p=S[h],c=_[h];/^on[A-Z]/.test(h)?p&&c?e[h]=(...i)=>{const r=c(...i);return p(...i),r}:p&&(e[h]=p):h==="style"?e[h]={...p,...c}:h==="className"&&(e[h]=[p,c].filter(Boolean).join(" "))}return{...S,...e}}function p0(S){let _=Object.getOwnPropertyDescriptor(S.props,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning;return e?S.ref:(_=Object.getOwnPropertyDescriptor(S,"ref")?.get,e=_&&"isReactWarning"in _&&_.isReactWarning,e?S.props.ref:S.props.ref||S.ref)}function m0(S){const _=S+"CollectionProvider",[e,h]=Ln(_),[p,c]=e(_,{collectionRef:{current:null},itemMap:new Map}),s=f=>{const{scope:u,children:g}=f,m=lr.useRef(null),k=lr.useRef(new Map).current;return y.jsx(p,{scope:u,itemMap:k,collectionRef:m,children:g})};s.displayName=_;const i=S+"CollectionSlot",r=io(i),t=lr.forwardRef((f,u)=>{const{scope:g,children:m}=f,k=c(i,g),E=er(u,k.collectionRef);return y.jsx(r,{ref:E,children:m})});t.displayName=i;const n=S+"CollectionItemSlot",l="data-radix-collection-item",a=io(n),o=lr.forwardRef((f,u)=>{const{scope:g,children:m,...k}=f,E=lr.useRef(null),A=er(u,E),L=c(n,g);return lr.useEffect(()=>(L.itemMap.set(E,{ref:E,...k}),()=>void L.itemMap.delete(E))),y.jsx(a,{[l]:"",ref:A,children:m})});o.displayName=n;function d(f){const u=c(S+"CollectionConsumer",f);return lr.useCallback(()=>{const m=u.collectionRef.current;if(!m)return[];const k=Array.from(m.querySelectorAll(`[${l}]`));return Array.from(u.itemMap.values()).sort((L,z)=>k.indexOf(L.ref.current)-k.indexOf(z.ref.current))},[u.collectionRef,u.itemMap])}return[{Provider:s,Slot:t,ItemSlot:o},d,h]}var g0=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),b0="VisuallyHidden",Ji=W.forwardRef((S,_)=>y.jsx(Vt.span,{...S,ref:_,style:{...g0,...S.style}}));Ji.displayName=b0;var Qi="ToastProvider",[ea,y0,v0]=m0("Toast"),[wc]=Ln("Toast",[v0]),[x0,Ps]=wc(Qi),_c=S=>{const{__scopeToast:_,label:e="Notification",duration:h=5e3,swipeDirection:p="right",swipeThreshold:c=50,children:s}=S,[i,r]=W.useState(null),[t,n]=W.useState(0),l=W.useRef(!1),a=W.useRef(!1);return e.trim()||console.error(`Invalid prop \`label\` supplied to \`${Qi}\`. Expected non-empty \`string\`.`),y.jsx(ea.Provider,{scope:_,children:y.jsx(x0,{scope:_,label:e,duration:h,swipeDirection:p,swipeThreshold:c,toastCount:t,viewport:i,onViewportChange:r,onToastAdd:W.useCallback(()=>n(o=>o+1),[]),onToastRemove:W.useCallback(()=>n(o=>o-1),[]),isFocusedToastEscapeKeyDownRef:l,isClosePausedRef:a,children:s})})};_c.displayName=Qi;var kc="ToastViewport",w0=["F8"],Si="toast.viewportPause",ji="toast.viewportResume",Sc=W.forwardRef((S,_)=>{const{__scopeToast:e,hotkey:h=w0,label:p="Notifications ({hotkey})",...c}=S,s=Ps(kc,e),i=y0(e),r=W.useRef(null),t=W.useRef(null),n=W.useRef(null),l=W.useRef(null),a=er(_,l,s.onViewportChange),o=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),d=s.toastCount>0;W.useEffect(()=>{const u=g=>{h.length!==0&&h.every(k=>g[k]||g.code===k)&&l.current?.focus()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[h]),W.useEffect(()=>{const u=r.current,g=l.current;if(d&&u&&g){const m=()=>{if(!s.isClosePausedRef.current){const L=new CustomEvent(Si);g.dispatchEvent(L),s.isClosePausedRef.current=!0}},k=()=>{if(s.isClosePausedRef.current){const L=new CustomEvent(ji);g.dispatchEvent(L),s.isClosePausedRef.current=!1}},E=L=>{!u.contains(L.relatedTarget)&&k()},A=()=>{u.contains(document.activeElement)||k()};return u.addEventListener("focusin",m),u.addEventListener("focusout",E),u.addEventListener("pointermove",m),u.addEventListener("pointerleave",A),window.addEventListener("blur",m),window.addEventListener("focus",k),()=>{u.removeEventListener("focusin",m),u.removeEventListener("focusout",E),u.removeEventListener("pointermove",m),u.removeEventListener("pointerleave",A),window.removeEventListener("blur",m),window.removeEventListener("focus",k)}}},[d,s.isClosePausedRef]);const f=W.useCallback(({tabbingDirection:u})=>{const m=i().map(k=>{const E=k.ref.current,A=[E,...I0(E)];return u==="forwards"?A:A.reverse()});return(u==="forwards"?m.reverse():m).flat()},[i]);return W.useEffect(()=>{const u=l.current;if(u){const g=m=>{const k=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!k){const A=document.activeElement,L=m.shiftKey;if(m.target===u&&L){t.current?.focus();return}const I=f({tabbingDirection:L?"backwards":"forwards"}),B=I.findIndex(H=>H===A);ii(I.slice(B+1))?m.preventDefault():L?t.current?.focus():n.current?.focus()}};return u.addEventListener("keydown",g),()=>u.removeEventListener("keydown",g)}},[i,f]),y.jsxs(Fh,{ref:r,role:"region","aria-label":p.replace("{hotkey}",o),tabIndex:-1,style:{pointerEvents:d?void 0:"none"},children:[d&&y.jsx(Ei,{ref:t,onFocusFromOutsideViewport:()=>{const u=f({tabbingDirection:"forwards"});ii(u)}}),y.jsx(ea.Slot,{scope:e,children:y.jsx(Vt.ol,{tabIndex:-1,...c,ref:a})}),d&&y.jsx(Ei,{ref:n,onFocusFromOutsideViewport:()=>{const u=f({tabbingDirection:"backwards"});ii(u)}})]})});Sc.displayName=kc;var jc="ToastFocusProxy",Ei=W.forwardRef((S,_)=>{const{__scopeToast:e,onFocusFromOutsideViewport:h,...p}=S,c=Ps(jc,e);return y.jsx(Ji,{tabIndex:0,...p,ref:_,style:{position:"fixed"},onFocus:s=>{const i=s.relatedTarget;!c.viewport?.contains(i)&&h()}})});Ei.displayName=jc;var Bn="Toast",_0="toast.swipeStart",k0="toast.swipeMove",S0="toast.swipeCancel",j0="toast.swipeEnd",Ec=W.forwardRef((S,_)=>{const{forceMount:e,open:h,defaultOpen:p,onOpenChange:c,...s}=S,[i,r]=Hi({prop:h,defaultProp:p??!0,onChange:c,caller:Bn});return y.jsx(Fn,{present:e||i,children:y.jsx(N0,{open:i,...s,ref:_,onClose:()=>r(!1),onPause:kr(S.onPause),onResume:kr(S.onResume),onSwipeStart:$t(S.onSwipeStart,t=>{t.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$t(S.onSwipeMove,t=>{const{x:n,y:l}=t.detail.delta;t.currentTarget.setAttribute("data-swipe","move"),t.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${n}px`),t.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${l}px`)}),onSwipeCancel:$t(S.onSwipeCancel,t=>{t.currentTarget.setAttribute("data-swipe","cancel"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),t.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),t.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$t(S.onSwipeEnd,t=>{const{x:n,y:l}=t.detail.delta;t.currentTarget.setAttribute("data-swipe","end"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),t.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${n}px`),t.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${l}px`),r(!1)})})})});Ec.displayName=Bn;var[E0,C0]=wc(Bn,{onClose(){}}),N0=W.forwardRef((S,_)=>{const{__scopeToast:e,type:h="foreground",duration:p,open:c,onClose:s,onEscapeKeyDown:i,onPause:r,onResume:t,onSwipeStart:n,onSwipeMove:l,onSwipeCancel:a,onSwipeEnd:o,...d}=S,f=Ps(Bn,e),[u,g]=W.useState(null),m=er(_,T=>g(T)),k=W.useRef(null),E=W.useRef(null),A=p||f.duration,L=W.useRef(0),z=W.useRef(A),R=W.useRef(0),{onToastAdd:I,onToastRemove:B}=f,H=kr(()=>{u?.contains(document.activeElement)&&f.viewport?.focus(),s()}),$=W.useCallback(T=>{!T||T===1/0||(window.clearTimeout(R.current),L.current=new Date().getTime(),R.current=window.setTimeout(H,T))},[H]);W.useEffect(()=>{const T=f.viewport;if(T){const j=()=>{$(z.current),t?.()},b=()=>{const v=new Date().getTime()-L.current;z.current=z.current-v,window.clearTimeout(R.current),r?.()};return T.addEventListener(Si,b),T.addEventListener(ji,j),()=>{T.removeEventListener(Si,b),T.removeEventListener(ji,j)}}},[f.viewport,A,r,t,$]),W.useEffect(()=>{c&&!f.isClosePausedRef.current&&$(A)},[c,A,f.isClosePausedRef,$]),W.useEffect(()=>(I(),()=>B()),[I,B]);const C=W.useMemo(()=>u?Oc(u):null,[u]);return f.viewport?y.jsxs(y.Fragment,{children:[C&&y.jsx(T0,{__scopeToast:e,role:"status","aria-live":h==="foreground"?"assertive":"polite",children:C}),y.jsx(E0,{scope:e,onClose:H,children:Mi.createPortal(y.jsx(ea.ItemSlot,{scope:e,children:y.jsx(Lh,{asChild:!0,onEscapeKeyDown:$t(i,()=>{f.isFocusedToastEscapeKeyDownRef.current||H(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(Vt.li,{tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":f.swipeDirection,...d,ref:m,style:{userSelect:"none",touchAction:"none",...S.style},onKeyDown:$t(S.onKeyDown,T=>{T.key==="Escape"&&(i?.(T.nativeEvent),T.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,H()))}),onPointerDown:$t(S.onPointerDown,T=>{T.button===0&&(k.current={x:T.clientX,y:T.clientY})}),onPointerMove:$t(S.onPointerMove,T=>{if(!k.current)return;const j=T.clientX-k.current.x,b=T.clientY-k.current.y,v=!!E.current,x=["left","right"].includes(f.swipeDirection),w=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,N=x?w(0,j):0,P=x?0:w(0,b),D=T.pointerType==="touch"?10:2,V={x:N,y:P},q={originalEvent:T,delta:V};v?(E.current=V,rs(k0,l,q,{discrete:!1})):ao(V,f.swipeDirection,D)?(E.current=V,rs(_0,n,q,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(j)>D||Math.abs(b)>D)&&(k.current=null)}),onPointerUp:$t(S.onPointerUp,T=>{const j=E.current,b=T.target;if(b.hasPointerCapture(T.pointerId)&&b.releasePointerCapture(T.pointerId),E.current=null,k.current=null,j){const v=T.currentTarget,x={originalEvent:T,delta:j};ao(j,f.swipeDirection,f.swipeThreshold)?rs(j0,o,x,{discrete:!0}):rs(S0,a,x,{discrete:!0}),v.addEventListener("click",w=>w.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),T0=S=>{const{__scopeToast:_,children:e,...h}=S,p=Ps(Bn,_),[c,s]=W.useState(!1),[i,r]=W.useState(!1);return R0(()=>s(!0)),W.useEffect(()=>{const t=window.setTimeout(()=>r(!0),1e3);return()=>window.clearTimeout(t)},[]),i?null:y.jsx(qi,{asChild:!0,children:y.jsx(Ji,{...h,children:c&&y.jsxs(y.Fragment,{children:[p.label," ",e]})})})},A0="ToastTitle",Cc=W.forwardRef((S,_)=>{const{__scopeToast:e,...h}=S;return y.jsx(Vt.div,{...h,ref:_})});Cc.displayName=A0;var M0="ToastDescription",Nc=W.forwardRef((S,_)=>{const{__scopeToast:e,...h}=S;return y.jsx(Vt.div,{...h,ref:_})});Nc.displayName=M0;var Tc="ToastAction",Ac=W.forwardRef((S,_)=>{const{altText:e,...h}=S;return e.trim()?y.jsx(Rc,{altText:e,asChild:!0,children:y.jsx(ta,{...h,ref:_})}):(console.error(`Invalid prop \`altText\` supplied to \`${Tc}\`. Expected non-empty \`string\`.`),null)});Ac.displayName=Tc;var Mc="ToastClose",ta=W.forwardRef((S,_)=>{const{__scopeToast:e,...h}=S,p=C0(Mc,e);return y.jsx(Rc,{asChild:!0,children:y.jsx(Vt.button,{type:"button",...h,ref:_,onClick:$t(S.onClick,p.onClose)})})});ta.displayName=Mc;var Rc=W.forwardRef((S,_)=>{const{__scopeToast:e,altText:h,...p}=S;return y.jsx(Vt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":h||void 0,...p,ref:_})});function Oc(S){const _=[];return Array.from(S.childNodes).forEach(h=>{if(h.nodeType===h.TEXT_NODE&&h.textContent&&_.push(h.textContent),O0(h)){const p=h.ariaHidden||h.hidden||h.style.display==="none",c=h.dataset.radixToastAnnounceExclude==="";if(!p)if(c){const s=h.dataset.radixToastAnnounceAlt;s&&_.push(s)}else _.push(...Oc(h))}}),_}function rs(S,_,e,{discrete:h}){const p=e.originalEvent.currentTarget,c=new CustomEvent(S,{bubbles:!0,cancelable:!0,detail:e});_&&p.addEventListener(S,_,{once:!0}),h?el(p,c):p.dispatchEvent(c)}var ao=(S,_,e=0)=>{const h=Math.abs(S.x),p=Math.abs(S.y),c=h>p;return _==="left"||_==="right"?c&&h>e:!c&&p>e};function R0(S=()=>{}){const _=kr(S);qr(()=>{let e=0,h=0;return e=window.requestAnimationFrame(()=>h=window.requestAnimationFrame(_)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(h)}},[_])}function O0(S){return S.nodeType===S.ELEMENT_NODE}function I0(S){const _=[],e=document.createTreeWalker(S,NodeFilter.SHOW_ELEMENT,{acceptNode:h=>{const p=h.tagName==="INPUT"&&h.type==="hidden";return h.disabled||h.hidden||p?NodeFilter.FILTER_SKIP:h.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)_.push(e.currentNode);return _}function ii(S){const _=document.activeElement;return S.some(e=>e===_?!0:(e.focus(),document.activeElement!==_))}var P0=_c,Ic=Sc,Pc=Ec,Dc=Cc,Lc=Nc,Fc=Ac,Bc=ta;const D0=P0,$c=W.forwardRef(({className:S,..._},e)=>y.jsx(Ic,{ref:e,className:lt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",S),..._}));$c.displayName=Ic.displayName;const L0=Fi("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),zc=W.forwardRef(({className:S,variant:_,...e},h)=>y.jsx(Pc,{ref:h,className:lt(L0({variant:_}),S),...e}));zc.displayName=Pc.displayName;const F0=W.forwardRef(({className:S,..._},e)=>y.jsx(Fc,{ref:e,className:lt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",S),..._}));F0.displayName=Fc.displayName;const Uc=W.forwardRef(({className:S,..._},e)=>y.jsx(Bc,{ref:e,className:lt("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",S),"toast-close":"",..._,children:y.jsx(Br,{className:"h-4 w-4"})}));Uc.displayName=Bc.displayName;const Hc=W.forwardRef(({className:S,..._},e)=>y.jsx(Dc,{ref:e,className:lt("text-sm font-semibold [&+div]:text-xs",S),..._}));Hc.displayName=Dc.displayName;const Vc=W.forwardRef(({className:S,..._},e)=>y.jsx(Lc,{ref:e,className:lt("text-sm opacity-90",S),..._}));Vc.displayName=Lc.displayName;function B0(){const{toasts:S}=Dn();return y.jsxs(D0,{children:[S.map(function({id:_,title:e,description:h,action:p,...c}){return y.jsxs(zc,{...c,children:[y.jsxs("div",{className:"grid gap-1",children:[e&&y.jsx(Hc,{children:e}),h&&y.jsx(Vc,{children:h})]}),p,y.jsx(Uc,{})]},_)}),y.jsx($c,{})]})}const $0=S=>{switch(S){case"ai-assistant":return{name:"AI Assistant",description:"Get intelligent insights and recommendations with our AI-powered assistant.",requiredTier:"Advanced",icon:go,benefits:["AI-powered employee analysis","Intelligent retention recommendations","Natural language queries","Predictive insights"]};case"playground":return{name:"Playground",description:"Advanced simulation and modeling tools for comprehensive workforce analysis.",requiredTier:"Enterprise",icon:lu,benefits:["Advanced simulation modeling","What-if scenario analysis","Treatment effectiveness testing","ROI calculations","Custom intervention strategies"]};default:return{name:"Feature",description:"This feature requires a higher license tier.",requiredTier:"Advanced",icon:ou,benefits:["Enhanced functionality"]}}};function oo({children:S,feature:_}){const{hasAccess:e,licenseTier:h}=Ts();if(e(_))return y.jsx(y.Fragment,{children:S});const p=$0(_),c=p.icon;return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-6",children:y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl w-full",children:[y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[y.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-8 py-6 text-white",children:[y.jsx("div",{className:"flex items-center justify-center mb-4",children:y.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:y.jsx(_s,{className:"h-8 w-8"})})}),y.jsxs("h1",{className:"text-2xl font-bold text-center mb-2",children:[p.name," Access Required"]}),y.jsxs("p",{className:"text-blue-100 text-center",children:["Upgrade to ",p.requiredTier," to unlock this feature"]})]}),y.jsxs("div",{className:"p-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full mb-4",children:y.jsx(c,{className:"h-8 w-8 text-gray-600 dark:text-gray-400"})}),y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:p.name}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:p.description})]}),y.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Current Plan"}),y.jsx("div",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm font-medium",children:Di(h)})]}),y.jsx(Sn,{className:"h-5 w-5 text-gray-400"}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Required Plan"}),y.jsx("div",{className:"px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full text-sm font-medium",children:p.requiredTier})]})]}),y.jsxs("div",{className:"mb-8",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center",children:["What you'll get with ",p.requiredTier,":"]}),y.jsx("ul",{className:"space-y-3",children:p.benefits.map((s,i)=>y.jsxs(at.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:i*.1},className:"flex items-center space-x-3",children:[y.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})}),y.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s})]},i))})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[y.jsx("button",{onClick:()=>window.history.back(),className:"flex-1 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Go Back"}),y.jsxs("button",{onClick:()=>{console.log("Upgrade to",p.requiredTier)},className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105 font-medium",children:["Upgrade to ",p.requiredTier]})]})]})]}),y.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-6",children:"Need help choosing the right plan? Contact our sales team for personalized recommendations."})]})})}const Dr=({children:S})=>{const{isAuthenticated:_,isLoading:e}=In(),h=Tn();return e?y.jsx(As,{isLoading:!0,text:"Checking authentication..."}):_?y.jsx(y.Fragment,{children:S}):y.jsx(as,{to:"/login",state:{from:h},replace:!0})},lo=({title:S,children:_,className:e=""})=>y.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 ${e}`,children:[y.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:S}),_]}),ai=({label:S,score:_,description:e,showNotUsed:h=!1})=>{const p=Cn(),c=Math.round(_*100),s=r=>r>=p.highRisk?"text-red-600 bg-red-50 border-red-200":r>=p.mediumRisk?"text-orange-600 bg-orange-50 border-orange-200":"text-green-600 bg-green-50 border-green-200",i=()=>"text-gray-600 bg-gray-50 border-gray-200";return y.jsxs("div",{className:`p-3 rounded border ${h?i():s(_)}`,children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm font-medium",children:S}),y.jsx("span",{className:"text-lg font-bold",children:h?"Not Used":`${c}%`})]}),e&&y.jsx("p",{className:"text-xs mt-1 opacity-75",children:e})]})},z0=({contributors:S})=>{const _=S.sort((e,h)=>Math.abs(h.importance)-Math.abs(e.importance)).slice(0,8);return y.jsx("div",{className:"space-y-2",children:_.map((e,h)=>y.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[e.importance>0?y.jsx(fu,{className:"w-4 h-4 text-red-500"}):y.jsx(hu,{className:"w-4 h-4 text-green-500"}),y.jsxs("div",{children:[y.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.feature.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase())}),y.jsxs("div",{className:"text-xs text-gray-600",children:["Value: ",typeof e.value=="number"?e.value.toFixed(2):String(e.value)]})]})]}),y.jsxs("span",{className:`text-xs font-mono px-2 py-1 rounded ${e.importance>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[e.importance>0?"+":"",(e.importance*100).toFixed(1),"%"]})]},h))})},U0=({alerts:S})=>S.length===0?y.jsxs("div",{className:"text-center py-4",children:[y.jsx(un,{className:"w-6 h-6 mx-auto mb-2 text-green-500"}),y.jsx("p",{className:"text-sm text-gray-600",children:"No business rule alerts triggered"})]}):y.jsx("div",{className:"space-y-2",children:S.map((_,e)=>y.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Hr,{className:"w-4 h-4 text-orange-500"}),y.jsx("span",{className:"font-medium text-orange-900",children:_.rule_name})]}),y.jsx("p",{className:"text-sm text-orange-700 mt-1",children:_.reason})]}),y.jsxs("span",{className:"text-xs font-medium bg-orange-100 text-orange-800 px-2 py-1 rounded",children:["+",(_.impact*100).toFixed(1),"%"]})]})},e))}),H0=({hrCode:S,employeeName:_,onClose:e,isPerformanceMode:h=!1})=>{const{reasoning:p,isLoading:c,error:s}=Qf(S),[i,r]=W.useState(!1);if(c)return y.jsx("div",{className:"w-full max-w-7xl mx-auto p-3 sm:p-4 lg:p-6",children:y.jsxs("div",{className:"animate-pulse space-y-4",children:[y.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[1,2,3].map(a=>y.jsx("div",{className:"h-20 bg-gray-200 rounded"},a))}),y.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})});if(s)return y.jsx("div",{className:"w-full max-w-7xl mx-auto p-3 sm:p-4 lg:p-6",children:y.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[y.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[y.jsx(Hr,{className:"w-5 h-5"}),y.jsx("span",{className:"font-medium",children:"Failed to load reasoning data"})]}),y.jsx("p",{className:"text-red-600 mt-1 text-sm",children:s})]})});if(!p)return y.jsx("div",{className:"w-full max-w-7xl mx-auto p-3 sm:p-4 lg:p-6",children:y.jsxs("div",{className:"text-center py-8 sm:py-12",children:[y.jsx(En,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto text-gray-400 mb-4"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reasoning data available"}),y.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Reasoning analysis has not been computed for this employee yet."})]})});const t=p.heuristic_alerts&&p.heuristic_alerts.length>0,n=t?p.heuristic_alerts.reduce((a,o)=>a+o.impact,0):0,l=!t&&n===0;return y.jsxs("div",{className:"w-full max-w-7xl mx-auto p-3 sm:p-4 lg:p-6 space-y-4 sm:space-y-6",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between border-b pb-3 sm:pb-4 gap-3",children:[y.jsxs("div",{className:"min-w-0 flex-1",children:[y.jsxs("h1",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center gap-2",children:[y.jsx(En,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600 flex-shrink-0"}),y.jsxs("span",{className:"truncate",children:["Risk Analysis: ",_]})]}),y.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:["Updated: ",new Date(p.updated_at).toLocaleDateString()," ",new Date(p.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e&&y.jsx("button",{onClick:e,className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm flex-shrink-0 self-start sm:self-auto",children:"Close"})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[y.jsx(ai,{label:"Overall Risk",score:p.churn_risk,description:"Final combined score"}),y.jsx(ai,{label:"ML Model",score:p.ml_score,description:"Machine learning prediction"}),y.jsx(ai,{label:"Business Rules",score:n,description:l?"No rules triggered":`${p.heuristic_alerts.length} rule${p.heuristic_alerts.length===1?"":"s"} triggered`,showNotUsed:l})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[y.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(is,{className:"w-4 h-4 text-purple-600 flex-shrink-0"}),y.jsx("span",{className:"font-medium text-purple-900",children:"Behavioral Stage"})]}),y.jsx("p",{className:"text-purple-800 font-semibold text-sm sm:text-base",children:p.stage}),y.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:["Stage risk: ",Math.round(p.stage_score*100),"%"]})]}),y.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(Ni,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),y.jsx("span",{className:"font-medium text-blue-900",children:"Confidence"})]}),y.jsxs("p",{className:"text-blue-800 font-semibold text-sm sm:text-base",children:[Math.round(p.confidence_level*100),"%"]}),y.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Model confidence level"})]})]}),p.calculation_breakdown&&y.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[y.jsxs("button",{onClick:()=>r(!i),className:"w-full p-3 sm:p-4 text-left flex items-center justify-between hover:bg-gray-50",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(cu,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),y.jsx("span",{className:"font-medium text-gray-900 text-sm sm:text-base",children:"Score Calculation"})]}),i?y.jsx(uu,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}):y.jsx(du,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})]}),i&&y.jsxs("div",{className:"border-t border-gray-200 p-3 sm:p-4",children:[y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4",children:[y.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[y.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"ML Model"}),y.jsxs("div",{className:"text-xs font-mono text-blue-800 break-all",children:[(p.ml_score*100).toFixed(1),"%  ",p.calculation_breakdown.weights.ml_weight*100,"% = ",(p.calculation_breakdown.ml_contribution*100).toFixed(1),"%"]})]}),y.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded",children:[y.jsx("div",{className:"text-sm font-medium text-orange-900 mb-1",children:"Business Rules"}),y.jsx("div",{className:"text-xs font-mono text-orange-800 break-all",children:l?"Not Used":`${(p.heuristic_score*100).toFixed(1)}%  ${p.calculation_breakdown.weights.heuristic_weight*100}% = ${(p.calculation_breakdown.heuristic_contribution*100).toFixed(1)}%`})]}),y.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[y.jsx("div",{className:"text-sm font-medium text-purple-900 mb-1",children:"Behavioral Stage"}),y.jsxs("div",{className:"text-xs font-mono text-purple-800 break-all",children:[(p.stage_score*100).toFixed(1),"%  ",p.calculation_breakdown.weights.stage_weight*100,"% = ",(p.calculation_breakdown.stage_contribution*100).toFixed(1),"%"]})]})]}),y.jsx("div",{className:"border-t border-gray-200 pt-3",children:y.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[y.jsx("span",{className:"font-medium text-gray-900",children:"Final Risk Score:"}),y.jsxs("span",{className:"font-mono text-gray-900 text-sm break-all",children:[(p.calculation_breakdown.ml_contribution*100).toFixed(1),"% + ",l?"0":(p.calculation_breakdown.heuristic_contribution*100).toFixed(1),"% + ",(p.calculation_breakdown.stage_contribution*100).toFixed(1),"% = ",(p.churn_risk*100).toFixed(1),"%"]})]})})]})]}),y.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6",children:[y.jsx(lo,{title:"Top ML Risk Factors",children:y.jsx(z0,{contributors:p.ml_contributors})}),y.jsx(lo,{title:"Business Rule Alerts",children:y.jsx(U0,{alerts:p.heuristic_alerts})})]})]})};class sn{static instance;syncInterval=null;isSyncing=!1;constructor(){}static getInstance(){return sn.instance||(sn.instance=new sn),sn.instance}async syncWithBackend(){if(this.isSyncing)return{success:!1,message:"Sync already in progress"};this.isSyncing=!0;try{const e=(await et.get("/settings/risk-thresholds")).data,h=Cn();return e.highRisk!==h.highRisk||e.mediumRisk!==h.mediumRisk?(Ue.info("Syncing thresholds with backend:",{frontend:h,backend:e}),zi({highRisk:e.highRisk,mediumRisk:e.mediumRisk},"backend-sync")?{success:!0,message:"Thresholds synchronized successfully"}:{success:!1,message:"Failed to update frontend thresholds"}):{success:!0,message:"Thresholds already in sync"}}catch(_){return Ue.error("Failed to sync with backend:",_),{success:!1,message:`Sync failed: ${_ instanceof Error?_.message:"Unknown error"}`}}finally{this.isSyncing=!1}}async syncToBackend(){if(this.isSyncing)return{success:!1,message:"Sync already in progress"};this.isSyncing=!0;try{const _=Cn();return await et.put("/settings/risk-thresholds",{highRisk:_.highRisk,mediumRisk:_.mediumRisk}),Ue.info("Backend thresholds updated successfully"),{success:!0,message:"Backend thresholds updated successfully"}}catch(_){return Ue.error("Failed to sync to backend:",_),{success:!1,message:`Sync failed: ${_ instanceof Error?_.message:"Unknown error"}`}}finally{this.isSyncing=!1}}startAutoSync(_=30){this.syncInterval&&clearInterval(this.syncInterval);const e=_*60*1e3;this.syncInterval=setInterval(async()=>{await this.syncWithBackend()},e)}stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null)}getStatus(){return{isSyncing:this.isSyncing,autoSyncActive:this.syncInterval!==null}}}const co=sn.getInstance();class oi extends W.Component{retryCount=0;maxRetries=3;constructor(_){super(_),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(_){const e=`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{hasError:!0,error:_,errorId:e}}componentDidCatch(_,e){this.setState({errorInfo:e}),console.error("ErrorBoundary caught an error:",_),console.error("Error Info:",e),this.props.onError&&this.props.onError(_,e),this.logError(_,e)}logError=(_,e)=>{try{const h={message:_.message,stack:_.stack,componentStack:e.componentStack,errorId:this.state.errorId,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,level:this.props.level||"component",retryCount:this.retryCount};console.error("Error Boundary Log:",h);const p=JSON.parse(localStorage.getItem("app_errors")||"[]");p.push(h),p.length>50&&p.splice(0,p.length-50),localStorage.setItem("app_errors",JSON.stringify(p))}catch(h){console.error("Failed to log error:",h)}};handleRetry=()=>{this.retryCount<this.maxRetries?(this.retryCount++,this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})):window.location.href="/"};handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};copyErrorDetails=()=>{const _=[`Error ID: ${this.state.errorId}`,`Message: ${this.state.error?.message}`,`Stack: ${this.state.error?.stack}`,`Component Stack: ${this.state.errorInfo?.componentStack}`,`Timestamp: ${new Date().toISOString()}`,`URL: ${window.location.href}`].join("\\n\\n");navigator.clipboard.writeText(_).then(()=>{console.log("Error details copied to clipboard")})};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{level:_="component"}=this.props,e=this.retryCount<this.maxRetries,h=this.state.error?.message||"An unexpected error occurred";return _==="critical"||_==="page"?y.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gray-50 dark:bg-gray-900",children:y.jsxs(Yt,{className:"w-full max-w-2xl border-red-200 dark:border-red-800",children:[y.jsxs(Zt,{className:"text-center",children:[y.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-full flex items-center justify-center mb-4",children:y.jsx(Hr,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),y.jsx(Jt,{className:"text-red-900 dark:text-red-100",children:_==="critical"?"Critical Application Error":"Page Error"}),y.jsx(Qt,{className:"text-red-700 dark:text-red-300",children:_==="critical"?"A critical error has occurred that prevents the application from continuing.":"An error occurred while loading this page."})]}),y.jsxs(ir,{className:"space-y-6",children:[y.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[y.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-mono",children:h}),this.state.errorId&&y.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:["Error ID: ",this.state.errorId]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e&&y.jsxs(Et,{onClick:this.handleRetry,variant:"outline",className:"flex items-center gap-2",children:[y.jsx(Mr,{className:"w-4 h-4"}),"Try Again (",this.maxRetries-this.retryCount," left)"]}),y.jsxs(Et,{onClick:this.handleReload,variant:"outline",className:"flex items-center gap-2",children:[y.jsx(Mr,{className:"w-4 h-4"}),"Reload Page"]}),y.jsxs(Et,{onClick:this.handleGoHome,className:"flex items-center gap-2",children:[y.jsx(fo,{className:"w-4 h-4"}),"Go Home"]})]}),this.props.showDetails&&y.jsxs("details",{className:"text-sm",children:[y.jsxs("summary",{className:"cursor-pointer text-red-700 dark:text-red-300 font-medium mb-2 flex items-center gap-2",children:[y.jsx(pu,{className:"w-4 h-4"}),"Technical Details"]}),y.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg font-mono text-xs overflow-auto max-h-40",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Error:"})," ",this.state.error?.message]}),y.jsx("p",{children:y.jsx("strong",{children:"Stack:"})}),y.jsx("pre",{className:"whitespace-pre-wrap",children:this.state.error?.stack}),this.state.errorInfo?.componentStack&&y.jsxs(y.Fragment,{children:[y.jsx("p",{children:y.jsx("strong",{children:"Component Stack:"})}),y.jsx("pre",{className:"whitespace-pre-wrap",children:this.state.errorInfo.componentStack})]})]}),y.jsxs(Et,{onClick:this.copyErrorDetails,variant:"ghost",size:"sm",className:"mt-2 text-xs",children:[y.jsx(po,{className:"w-3 h-3 mr-1"}),"Copy Error Details"]})]})]})]})}):y.jsx("div",{className:"p-4 border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded-lg",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(Hr,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Component Error"}),y.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 mb-3",children:h}),y.jsxs("div",{className:"flex gap-2",children:[e&&y.jsxs(Et,{onClick:this.handleRetry,size:"sm",variant:"outline",className:"text-xs",children:[y.jsx(Mr,{className:"w-3 h-3 mr-1"}),"Retry"]}),this.state.errorId&&y.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400 self-center",children:["ID: ",this.state.errorId]})]})]})]})})}return this.props.children}}class V0{reports=[];maxReports=100;sessionId;constructor(){this.sessionId=this.generateSessionId(),this.loadStoredReports(),this.setupGlobalErrorHandlers()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateErrorId(){return`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}loadStoredReports(){try{const _=localStorage.getItem("error_reports");if(_){const e=JSON.parse(_);this.reports=Array.isArray(e)?e:[];const h=Date.now()-10080*60*1e3;this.reports=this.reports.filter(p=>new Date(p.timestamp).getTime()>h)}}catch(_){console.warn("Failed to load stored error reports:",_),this.reports=[]}}saveReports(){try{localStorage.setItem("error_reports",JSON.stringify(this.reports.slice(-this.maxReports)))}catch(_){console.warn("Failed to save error reports:",_)}}setupGlobalErrorHandlers(){window.addEventListener("error",_=>{this.report({message:_.message,stack:_.error?.stack,context:`${_.filename}:${_.lineno}:${_.colno}`,level:"error",source:"manual",metadata:{filename:_.filename,lineno:_.lineno,colno:_.colno}})}),window.addEventListener("unhandledrejection",_=>{const e=_.reason;this.report({message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0,context:"Unhandled Promise Rejection",level:"error",source:"promise",metadata:{reason:e}})})}report(_){const e=this.generateErrorId(),h={id:e,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,sessionId:this.sessionId,level:"error",source:"manual",..._};return this.reports.push(h),this.reports.length>this.maxReports&&(this.reports=this.reports.slice(-this.maxReports)),this.saveReports(),this.sendToBackend(h),e}sendToBackend(_){try{console.error("Error Report:",_)}catch(e){console.warn("Failed to send error report:",e)}}reportNetworkError(_,e,h,p){return this.report({message:`Network Error: ${e} ${h}`,context:p||`Request to ${_}`,level:"error",source:"network",metadata:{url:_,status:e,statusText:h,method:p?.includes("POST")?"POST":"GET"}})}reportValidationError(_,e,h){return this.report({message:`Validation Error: ${_} failed ${h}`,context:"Field validation failure",level:"warning",source:"validation",metadata:{field:_,value:typeof e=="string"?e.substring(0,100):e,rule:h}})}getStats(){const _=this.reports.length,e={},h={},p={};this.reports.forEach(i=>{e[i.level]=(e[i.level]||0)+1,h[i.source]=(h[i.source]||0)+1;const r=i.message.substring(0,100);p[r]=(p[r]||0)+1});const c=Object.entries(p).map(([i,r])=>({message:i,count:r})).sort((i,r)=>r.count-i.count).slice(0,10),s=this.reports.slice(-10).sort((i,r)=>new Date(r.timestamp).getTime()-new Date(i.timestamp).getTime());return{totalErrors:_,errorsByLevel:e,errorsBySource:h,commonErrors:c,recentErrors:s}}clearReports(){this.reports=[],this.saveReports()}exportReports(){return JSON.stringify({sessionId:this.sessionId,exportTime:new Date().toISOString(),stats:this.getStats(),reports:this.reports},null,2)}getReports(_){let e=[...this.reports];return _?.level&&(e=e.filter(h=>h.level===_.level)),_?.source&&(e=e.filter(h=>h.source===_.source)),_?.since&&(e=e.filter(h=>new Date(h.timestamp)>=_.since)),_?.limit&&(e=e.slice(-_.limit)),e.sort((h,p)=>new Date(p.timestamp).getTime()-new Date(h.timestamp).getTime())}}const tr=new V0,q0=(S,_,e)=>{const h=S instanceof Error?S.message:S,p=S instanceof Error?S.stack:void 0;return tr.report({message:h,stack:p,context:_,level:"error",source:"manual",metadata:e})},W0=(S,_,e)=>tr.report({message:S,context:_,level:"warning",source:"manual",metadata:e}),X0=(S,_,e)=>tr.report({message:S,context:_,level:"info",source:"manual",metadata:e}),Fg=()=>({reportError:q0,reportWarning:W0,reportInfo:X0,reportNetworkError:tr.reportNetworkError.bind(tr),reportValidationError:tr.reportValidationError.bind(tr),getStats:tr.getStats.bind(tr),clearReports:tr.clearReports.bind(tr),exportReports:tr.exportReports.bind(tr)}),K0=({routes:S})=>{const _=Tn(),e=W.useRef(new Map),h=bu(S,_),p=W.useMemo(()=>`${_.pathname}${_.search}${_.hash}`,[_.pathname,_.search,_.hash]);h&&!e.current.has(p)&&e.current.set(p,h);const c=Array.from(e.current.entries());return y.jsxs(y.Fragment,{children:[c.map(([s,i])=>{const r=s===p;return y.jsx("div",{style:{display:r?"block":"none",height:"100%",width:"100%"},children:i},s)}),!e.current.has(p)&&h]})},Y0={default:"border border-gray-200 bg-white text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100",success:"border border-emerald-200 bg-emerald-50 text-emerald-800 dark:border-emerald-800 dark:bg-emerald-950/40 dark:text-emerald-200",destructive:"border border-red-200 bg-red-50 text-red-800 dark:border-red-800 dark:bg-red-950/30 dark:text-red-200",warning:"border border-amber-200 bg-amber-50 text-amber-800 dark:border-amber-800 dark:bg-amber-950/30 dark:text-amber-200",accent:"border border-sky-200 bg-sky-50 text-sky-900 dark:border-sky-800 dark:bg-sky-950/40 dark:text-sky-200"},ra=W.forwardRef(({className:S,variant:_="default",...e},h)=>y.jsx("div",{ref:h,className:lt("rounded-lg px-4 py-3 text-sm",Y0[_],S),role:"status",...e}));ra.displayName="Alert";const G0=W.forwardRef(({className:S,..._},e)=>y.jsx("p",{ref:e,className:lt("text-sm font-semibold leading-snug",S),..._}));G0.displayName="AlertTitle";const Z0=W.forwardRef(({className:S,..._},e)=>y.jsx("p",{ref:e,className:lt("text-sm opacity-90 leading-relaxed",S),..._}));Z0.displayName="AlertDescription";const J0=()=>{const S=Xr(),{login:_}=In(),[e,h]=W.useState(""),[p,c]=W.useState(""),[s,i]=W.useState(""),[r,t]=W.useState(!1),n=async l=>{if(l.preventDefault(),i(""),!e||!p){i("Please enter both username and password");return}t(!0);try{await _({username:e,password:p}),S("/")}catch(a){i(a instanceof Error?a.message:"Login failed. Please try again.")}finally{t(!1)}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 px-4",children:y.jsxs(Yt,{className:"w-full max-w-md shadow-xl",children:[y.jsxs(Zt,{className:"space-y-1",children:[y.jsx(Jt,{className:"text-2xl font-bold text-center",children:"Welcome to ChurnVision"}),y.jsx(Qt,{className:"text-center",children:"Sign in to your account to continue"})]}),y.jsx(ir,{children:y.jsxs("form",{onSubmit:n,className:"space-y-4",children:[s&&y.jsx(ra,{variant:"destructive",className:"mb-4",children:s}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(rr,{htmlFor:"username",children:"Username or Email"}),y.jsx(vr,{id:"username",type:"text",placeholder:"Enter your username or email",value:e,onChange:l=>h(l.target.value),disabled:r,required:!0,autoComplete:"username",autoFocus:!0})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(rr,{htmlFor:"password",children:"Password"}),y.jsx(vr,{id:"password",type:"password",placeholder:"Enter your password",value:p,onChange:l=>c(l.target.value),disabled:r,required:!0,autoComplete:"current-password"})]}),y.jsx(Et,{type:"submit",className:"w-full",disabled:r,children:r?"Signing in...":"Sign In"})]})}),y.jsx(Ui,{className:"flex flex-col space-y-2",children:y.jsxs("div",{className:"text-sm text-center text-muted-foreground",children:["Don't have an account?"," ",y.jsx(dn,{to:"/register",className:"text-primary hover:underline font-medium",children:"Sign up"})]})})]})})},Q0=()=>{const S=Xr(),{register:_}=In(),[e,h]=W.useState({username:"",email:"",password:"",confirmPassword:"",fullName:""}),[p,c]=W.useState(""),[s,i]=W.useState(!1),r=l=>{h(a=>({...a,[l.target.name]:l.target.value}))},t=()=>!e.username||!e.email||!e.password?(c("Please fill in all required fields"),!1):e.password!==e.confirmPassword?(c("Passwords do not match"),!1):e.password.length<6?(c("Password must be at least 6 characters long"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?!0:(c("Please enter a valid email address"),!1),n=async l=>{if(l.preventDefault(),c(""),!!t()){i(!0);try{await _({username:e.username,email:e.email,password:e.password,full_name:e.fullName||void 0}),S("/")}catch(a){c(a instanceof Error?a.message:"Registration failed. Please try again.")}finally{i(!1)}}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 px-4 py-8",children:y.jsxs(Yt,{className:"w-full max-w-md shadow-xl",children:[y.jsxs(Zt,{className:"space-y-1",children:[y.jsx(Jt,{className:"text-2xl font-bold text-center",children:"Create an Account"}),y.jsx(Qt,{className:"text-center",children:"Sign up to get started with ChurnVision"})]}),y.jsx(ir,{children:y.jsxs("form",{onSubmit:n,className:"space-y-4",children:[p&&y.jsx(ra,{variant:"destructive",className:"mb-4",children:p}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs(rr,{htmlFor:"username",children:["Username ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx(vr,{id:"username",name:"username",type:"text",placeholder:"Choose a username",value:e.username,onChange:r,disabled:s,required:!0,autoComplete:"username",autoFocus:!0})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs(rr,{htmlFor:"email",children:["Email ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx(vr,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:e.email,onChange:r,disabled:s,required:!0,autoComplete:"email"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(rr,{htmlFor:"fullName",children:"Full Name"}),y.jsx(vr,{id:"fullName",name:"fullName",type:"text",placeholder:"Enter your full name (optional)",value:e.fullName,onChange:r,disabled:s,autoComplete:"name"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs(rr,{htmlFor:"password",children:["Password ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx(vr,{id:"password",name:"password",type:"password",placeholder:"Create a password (min 6 characters)",value:e.password,onChange:r,disabled:s,required:!0,autoComplete:"new-password"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs(rr,{htmlFor:"confirmPassword",children:["Confirm Password ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx(vr,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm your password",value:e.confirmPassword,onChange:r,disabled:s,required:!0,autoComplete:"new-password"})]}),y.jsx(Et,{type:"submit",className:"w-full",disabled:s,children:s?"Creating Account...":"Sign Up"})]})}),y.jsx(Ui,{className:"flex flex-col space-y-2",children:y.jsxs("div",{className:"text-sm text-center text-muted-foreground",children:["Already have an account?"," ",y.jsx(dn,{to:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})})]})})},eg="1.0.0",tg=eg,rg=["local","openai","auto","microsoft","qwen","mistral","ibm"],li=S=>typeof S=="string"&&rg.includes(S),Ds=S=>{const _=W.lazy(S);return _.preload=S,_},tn=Ds(()=>ks(()=>import("./Home-0abksWmx.js"),__vite__mapDeps([0,1,2,3,4])).then(S=>({default:S.Home}))),kn=Ds(()=>ks(()=>import("./AIAssistant-BfG2X4Tt.js"),__vite__mapDeps([5,1,2,6,7,8,3])).then(S=>({default:S.AIAssistant}))),ms=Ds(()=>ks(()=>import("./Playground-D73bkvHo.js"),__vite__mapDeps([9,1,2,6,7,8,3,4])).then(S=>({default:S.Playground}))),ng=Ds(()=>ks(()=>import("./Diagnostics-P6-RbaiJ.js"),__vite__mapDeps([10,1,2])).then(S=>({default:S.default})));tn.preload();kn.preload();ms.preload();const sg=()=>{const{hrCode:S}=yu(),_=Tn(),e=Xr(),h=_.state?.employeeName??"",p=()=>e(-1);return S?y.jsx(H0,{hrCode:S,employeeName:h,onClose:p,isPerformanceMode:typeof window<"u"&&localStorage.getItem("settings.dataMode")==="performance"}):y.jsx("div",{className:"p-4 text-center text-red-600",children:"Invalid employee code"})};function ig(){const S=Tn(),{fetchHomeData:_,fetchAIAssistantData:e,fetchPlaygroundData:h}=nn(),{showOnboarding:p,completeOnboarding:c}=Zo(),{licenseTier:s}=Ts(),{activeProject:i,isLoadingProject:r}=Qo(),{toast:t}=Dn(),{isAuthenticated:n}=In(),[l,a]=W.useState(!1),[o,d]=W.useState(null),[f,u]=W.useState(null),[g,m]=W.useState(!1),[k,E]=W.useState(!0);W.useEffect(()=>{const L=localStorage.getItem("churnvision-ai-model-type");let z="openai";L&&li(L)&&(z=L),z==="auto"&&(z="openai"),u(z),E(!0),m(!0)},[]),W.useEffect(()=>{if(typeof window>"u")return;const L=R=>{const I=R.detail;li(I)&&(u(I),E(!0),m(!0))},z=R=>{R.key==="churnvision-ai-model-type"&&R.newValue&&li(R.newValue)&&(u(R.newValue),E(!0),m(!0))};return window.addEventListener("churnvision:ai-provider-changed",L),window.addEventListener("storage",z),()=>{window.removeEventListener("churnvision:ai-provider-changed",L),window.removeEventListener("storage",z)}},[]),W.useEffect(()=>{const L=new AbortController;return n&&!r&&i&&(async()=>{const R=i?.id;if(R)try{await Promise.all([_(R),e(R),h(R)]),L.signal.aborted||Pa.info(`[AppContent Preload] Application data preloaded for projectId: ${R}.`)}catch(I){L.signal.aborted||Pa.error("Error preloading application data:",I)}})(),()=>{L.abort()}},[n,i,r,_,e,h]),W.useEffect(()=>{(()=>{S.pathname==="/"?(kn.preload(),ms.preload()):S.pathname==="/ai-assistant"?(ms.preload(),tn.preload()):S.pathname==="/playground"||S.pathname.startsWith("/reasoning")?(kn.preload(),tn.preload()):S.pathname.startsWith("/diagnostics")&&tn.preload()})()},[S.pathname]),W.useEffect(()=>{a(!1),d(null)},[]),W.useEffect(()=>{const L=Nf(z=>{const R=Math.round(z.current.highRisk*100),I=Math.round(z.current.mediumRisk*100);t({title:"Risk thresholds recalibrated",description:`High > ${R}%, Medium > ${I}%`})});return()=>{L()}},[t]),W.useEffect(()=>(i?.id&&co.startAutoSync(30),()=>{co.stopAutoSync()}),[i?.id]),W.useEffect(()=>{!k&&g&&f===null&&(u("openai"),E(!0),localStorage.setItem("churnvision-first-launch","completed"),localStorage.setItem("churnvision-ai-model-type","openai"))},[k,g,f]);const A=W.useMemo(()=>[{path:"/login",element:n?y.jsx(as,{to:"/",replace:!0}):y.jsx(J0,{})},{path:"/register",element:n?y.jsx(as,{to:"/",replace:!0}):y.jsx(Q0,{})},{path:"/",element:y.jsx(Dr,{children:y.jsx(Ir,{children:y.jsx(tn,{})})})},{path:"/ai-assistant",element:y.jsx(Dr,{children:y.jsx(Ir,{children:y.jsx(oo,{feature:"ai-assistant",children:y.jsx(kn,{})})})})},{path:"/playground",element:y.jsx(Dr,{children:y.jsx(Ir,{children:y.jsx(oo,{feature:"playground",children:y.jsx(ms,{})})})})},{path:"/data-management",element:y.jsx(Dr,{children:y.jsx(Ir,{children:y.jsx(mh,{})})})},{path:"/reasoning/:hrCode",element:y.jsx(Dr,{children:y.jsx(Ir,{children:y.jsx(sg,{})})})},{path:"/settings",element:y.jsx(Dr,{children:y.jsx(Ir,{children:y.jsx(Zm,{})})})},{path:"/diagnostics",element:y.jsx(Dr,{children:y.jsx(Ir,{children:y.jsx(ng,{})})})},{path:"*",element:y.jsx(as,{to:"/",replace:!0})}],[n]);return y.jsxs("div",{className:"h-screen flex flex-col overflow-hidden bg-background text-foreground transition-colors duration-300",children:[y.jsx($f,{}),y.jsxs(y.Fragment,{children:[y.jsx(vf,{}),y.jsx("main",{id:"main-content",className:"flex-1 bg-surface-subtle overflow-auto transition-colors duration-300",tabIndex:-1,children:y.jsx(W.Suspense,{fallback:y.jsx("div",{style:{willChange:"transform, opacity",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden"},children:y.jsx(As,{isLoading:!0,text:"Loading page..."})}),children:y.jsx(K0,{routes:A})})}),y.jsx(xf,{})]}),!1,y.jsx(Bf,{isOpen:p,onClose:()=>c(),onComplete:c,currentMode:"d-level"})]})}const ag=()=>{const[S,_]=W.useState(!0);return W.useEffect(()=>{if(typeof window>"u"||typeof document>"u"){_(!1);return}const e=900,h=performance.now();let p=!1;const c=()=>{if(p)return;p=!0;const i=performance.now()-h,r=Math.max(0,e-i);window.setTimeout(()=>_(!1),r)};document.readyState==="complete"?requestAnimationFrame(c):window.addEventListener("load",c,{once:!0});const s=window.setTimeout(c,2400);return()=>{window.removeEventListener("load",c),window.clearTimeout(s)}},[]),W.useEffect(()=>{const e=h=>{(h.ctrlKey||h.metaKey)&&h.shiftKey&&h.key==="V"&&h.preventDefault()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),y.jsxs(y.Fragment,{children:[y.jsx(Yo,{isVisible:S,versionLabel:`v${tg}`}),y.jsx(oi,{level:"critical",showDetails:!1,onError:(e,h)=>{tr.report({message:e.message,stack:e.stack,context:"App Root",level:"error",source:"boundary",metadata:{componentStack:h.componentStack}})},children:y.jsx(sf,{children:y.jsx(oi,{level:"page",showDetails:!1,children:y.jsxs(Uf,{children:[y.jsx(oi,{level:"component",children:y.jsx(ig,{})}),y.jsx(B0,{})]})})})})]})},og=W.createContext(void 0);function lg({children:S}){const[_,e]=W.useState(!1);W.useEffect(()=>{const p=s=>{s.key==="Tab"&&e(!0)},c=()=>{e(!1)};return window.addEventListener("keydown",p),window.addEventListener("mousedown",c),()=>{window.removeEventListener("keydown",p),window.removeEventListener("mousedown",c)}},[]),W.useEffect(()=>{const p=document.createElement("style");return p.textContent=`
      .js-focus-visible :focus:not(.focus-visible) {
        outline: none;
      }
      
      .js-focus-visible .focus-visible {
        outline: 2px solid #75caa9;
        outline-offset: 2px;
      }
    `,document.head.appendChild(p),document.documentElement.classList.add("js-focus-visible"),()=>{document.head.removeChild(p),document.documentElement.classList.remove("js-focus-visible")}},[]);const h=p=>{const c=document.getElementById("a11y-announcer");if(c)c.textContent=p;else{const s=document.createElement("div");s.id="a11y-announcer",s.setAttribute("aria-live","polite"),s.setAttribute("aria-atomic","true"),s.className="sr-only",s.textContent=p,document.body.appendChild(s)}};return y.jsxs(og.Provider,{value:{isFocusVisible:_,setFocusVisible:e,announceToScreenReader:h},children:[S,y.jsx("div",{id:"a11y-announcer",className:"sr-only","aria-live":"polite","aria-atomic":"true"})]})}Xt.router.info("Router configuration initialized",{routerType:"BrowserRouter",pathname:typeof window<"u"?window.location.pathname:"",protocol:typeof window<"u"?window.location.protocol:""});"serviceWorker"in navigator&&(Xt.serviceWorker.info("Checking for service workers..."),navigator.serviceWorker.getRegistrations().then(S=>{Xt.serviceWorker.info(`Found ${S.length} service workers`);for(const _ of S)Xt.serviceWorker.debug("Unregistering service worker",{scope:_.scope}),_.unregister().then(e=>{Xt.serviceWorker.info("Service worker unregistered successfully",{success:e})})}).catch(S=>{Xt.serviceWorker.error("Error unregistering service workers",S)}));"caches"in window&&caches.keys().then(S=>{S.forEach(_=>{Xt.cache.debug("Deleting cache",{cacheName:_}),caches.delete(_)})}).catch(S=>{Xt.cache.error("Error clearing caches",S)});_u.createRoot(document.getElementById("root")).render(y.jsx(lr.StrictMode,{children:y.jsx(vu,{children:y.jsx(cf,{children:y.jsx(ju,{children:y.jsx(lg,{children:y.jsx(ag,{})})})})})}));export{Qo as A,nn as B,Nf as C,Vi as D,Ag as E,sl as F,Mg as G,Ms as H,vr as I,eh as J,Dn as K,Et as L,Tg as M,Rg as N,Fg as O,Vt as P,la as Q,hl as R,If as S,Pg as T,Ig as U,g0 as V,ks as _,et as a,nh as b,lt as c,Ln as d,Sm as e,kr as f,qr as g,Pn as h,Hi as i,Gs as j,m0 as k,km as l,$t as m,qi as n,Dp as o,xi as p,Gh as q,xn as r,Og as s,ah as t,er as u,La as v,Lg as w,Go as x,Dg as y,Cn as z};
//# sourceMappingURL=index-BjfinGfq.js.map
